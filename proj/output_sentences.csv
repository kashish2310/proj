ID,Sentence
1,"Don'tforgettocheckouttheOnlineLearning Center,www.mhhe.com/forouzan for
additional resources!
Instructors andstudentsusingDataCommunications andNetworking, FourthEdition
byBehrouz A.Forouzan willfindawidevarietyofresources available atthe Online
Learning Center,www.mhhe.comlforouzan
Instructor Resources
Instructors canaccessthefollowing resources bycontacting theirMcGraw-Hill Repre­
sentative forasecurepassword."
2,"aPowerPoint Slides.Containfigures,tables,highlighted points,andbriefdescriptions
ofeachsection."
3,oComplete Solutions Manual.
4,"Password-protected solutions toallend-of-chapter
problems areprovided."
5,aPageout.
6,Afreetoolthathelpsyoucreateyourowncoursewebsite.
7,"DInstructor Message Board.Allowsyoutoshareideaswithotherinstructors
usingthetext."
8,"StudentResources
Thestudentresources areavailable tothosestudentsusingthebook.Onceyouhave
accessed theOnlineLearning Center,clickon""Student Resources,"" thenselectachap­
terfromthedropdownmenuthatappears.Eachchapterhasawealthofmaterials to
helpyoureviewcommunications andnetworking concepts."
9,"Included are:
aChapter Summaries."
10,"Bulleted summary pointsprovideanessential reviewof
majorideasandconcepts coveredineachchapter."
11,aStudentSolutions Manual.
12,Contains answersforodd-numbered problems.oGlossary.
13,Defineskeytermspresented inthebook.oFlashcards.
14,Facilitate learningthroughpracticeandreview.
15,aAnimated Figures.
16,"Visualrepresentations modelkeynetworking concepts, bringing
themtolife."
17,DAutomated Quizzes.
18,"Easy-to-use quizzesstrengthen learningandemphasize impor­
tantideasfromthebook.aWeblinks.Connectstudentstoadditional resources available online.DATA
COMMUNICATIONS
AND
NETWORKINGMcGraw-Hill Forouzan Networking Series
TitlesbyBehrouzA.Forouzan:
DataCommunications andNetworking
TCPflPProtocol Suite
LocalAreaNetworks
Business DataCommunicationsDATA
COMMUNICATIONS
AND
NETWORKING
FourthEdition
BehrouzA.Forouzan
DeAnzaCollege
with
SophiaChungFegan
•HigherEducation
BostonBurrRidge,ILDubuque, IAMadison, WINewYorkSanFrancisco S1.Louis
Bangkok BogotaCaracas KualaLumpur LisbonLondon MadridMexicoCity
MilanMontreal NewDelhiSantiago SeoulSingapore Sydney TaipeiTorontoTheMcGraw·HiII Companies .~I
IIHigherEducation
DATACOMMUNICATIONS ANDNETWORKING, FOURTH EDITION
Published byMcGraw-Hill, abusinessunitofTheMcGraw-Hill Companies."
19,"Inc.,1221Avenue
oftheAmericas, NewYork,NY10020.Copyright ©2007byTheMcGraw-Hill Companies, Inc."
20,AlIrightsreserved.
21,"Nopartofthispublication maybereproduced ordistributed inanyformor
byanymeans,orstoredinadatabase orretrievalsystem,withoutthepriorwrittenconsentof
TheMcGraw-Hill Companies, Inc.,including, butnotlimitedto,inanynetworkorother
electronic storageortransmission, orbroadcast fordistancelearning."
22,"Someancillaries, including electronic andprintcomponents, maynotbeavailable tocustomers
outsidetheUnitedStates."
23,Thisbookisprintedonacid-free paper.
24,"1234567890DOC/DOC09876
ISBN-13 978-0-07-296775-3
ISBN-to 0-07-296775-7
Publisher: AlanR.Apt
Developmental Editor:Rebecca Olson
Executive Marketing Manager: MichaelWeitz
SeniorProjectManager: SheilaM.Frank
SeniorProduction Supervisor: KaraKudronowicz
SeniorMediaProjectManager: JodiK.Banowetz
Associate MediaProducer: Christina Nelson
SeniorDesigner: DavidWHash
CoverDesigner: RokusekDesign
(USE)CoverImage:Womenascending MountMcKinley, Alaska.MountMcKinley (Denali)
12,000feet, ©AllanKearney/Getty Images
Compositor: Interactive Composition Corporation
Typeface: 10/12TimesRoman
Printer:R."
25,"R.Donnelley Crawfordsville, IN
LibraryofCongress Cataloging-in~Publication Data
Forouzan, BehrouzA."
26,Datacommunications andnetworking IBehrouzAForouzan.
27,-4thed.
28,"p.em.-(McGraw-HilI Forouzan networking series)
Includesindex."
29,"ISBN978-0-07-296775-3 -ISBN0-07-296775-7 (hardeopy:alk.paper)
1.Datatransmission systems."
30,2.Computer networks.
31,I.Title.II.Series.
32,"TK5105.F6617
004.6--dc22
www.mhhe.com2007
2006000013
CIPTolnywife,Faezeh,withlove
Behrouz ForouzanPreface XXlX
PART1Overview 1
Chapter 1Introduction 3
Chapter 2Network Models 27
PART2
Chapter 3
Chapter 4
Chapter 5
Chapter 6
Chapter 7
Chapter 8
Chapter 9
PART3
Chapter 10
Chapter 11
Chapter 12
Chapter 13
Chapter 14
Chapter 15
Chapter 16
Chapter 17
Chapter 18Physical LayerandMedia 55
DataandSignals 57
DigitalTransmission 101
AnalogTransmission 141
Bandwidth Utilization: Multiplexing andSpreading 161
Transmission Media 191
Switching 213
UsingTelephone andCableNetworksfor DataTransmission 241
DataLinkLayer265
ErrorDetection andCorrection 267
DataLinkControl 307
Multiple Access 363
WiredLANs:Ethernet 395
Wireless LANs421
Connecting LANs,Backbone Networks, andVirtualLANs445
WirelessWANs:CellularTelephone andSatelliteNetworks 467
SONETISDH 491
Virtual-Circuit Nenvorks: FrameRelayandATM 517
viiviiiBRIEFCONTENTS
PART4
Chapter 19
Chapter 20
Chapter 21
Chapter 22
PARTS
Chapter 23
Chapter 24
PART6
Chapter 25
Chapter 26
Chapter 27
Chapter28
Chapter 29Network Layer547
Netvvork Layer:LogicalAddressing 549
Netvvork Layer:InternetProtocol 579
Netl,vork La.ver:Address Mapping, ErrorReporting,
andMulticasting 611
Network Layer:Delivery, Fonvarding, andRouting 647
Transport Layer 701
Process-to-Process Delivery: UDp,TCP,andSCTP703
Congestion ControlandQualityql'Sen'ice 761
Application Layer795
Domain NameSystem 797
RemoteLogging, Electronic Mail,andFileTransfer 817
WWWandHTTP851
Network Management: SNMP 873
Multimedia 901
PART7Security 929
Chapter 30Cf}1Jtography931
Chapter 31Network Security 961
Chapter 32Securit}' intheInternet: IPSec,SSLlTLS, PCp,VPN,
andFirewalls 995
Appendix AUnicode 1029
Appendix BNumbering Systems 1037
Appendix CMathematical Review 1043
Appendix D8B/6TCode1055
Appendix ETelephone History 1059
Appendix FCo!1tactAddresses 1061
Appendix GRFCs1063
Appendix HUDPandTCPPorts1065
Acron.Vl11s 1067
ClOSSOlY 1071
References 1107
IndexIIIIPreface xxix
PART1Overview 1
Chapter 1Introduction 3
1.1DATACOMMUNICATIONS 3
Components 4
DataRepresentation 5
DataFlow 6
1.2NETWORKS 7
Distributed Processing 7
Network Criteria 7
Physical Structures 8
Network Models 13
Categories ofNetworks 13
Interconnection ofNetworks: Internetwork IS
1.3THEINTERNET 16
ABriefHistory 17
TheInternetToday 17
1.4PROTOCOLS ANDSTANDARDS 19
Protocols 19
Standards 19
Standards Organizations 20
InternetStandards 21
1.5RECOMMENDED READING 21
Books 21
Sites22
RFCs22
1.6KEYTERMS 22
1.7SUMMARY 23
1.8PRACTICE SET24
ReviewQuestions 24
Exercises 24
Research Activities 25
Chapter 2Network Models 27
2.1LAYERED TASKS 27
Sender,Receiver, andCarrier 28
Hierarchy 29
ixxCONTENTS
2.2THEOSIMODEL 29
LayeredArchitecture 30
Peer-to-Peer Processes 30
Encapsulation 33
2.3LAYERS INTHEOSIMODEL 33
Physical Layer33
DataLinkLayer34
Network Layer36
Transport Layer37
SessionLayer39
Presentation Layer39
Application Layer41
Summary ofLayers 42
2.4TCP/IPPROTOCOL SUITE 42
PhysicalandDataLinkLayers 43
Network Layer 43
Transport Layer 44
Application Layer45
2.5ADDRESSING 45
PhysicalAddresses 46
LogicalAddresses 47
PortAddresses 49
SpecificAddresses 50
2.6RECOMMENDED READING 50
Books 51
Sites51
RFCs51
2.7KEYlERMS 51
2.8SUMMARY 52
2.9PRACTICE SET52
ReviewQuestions 52
Exercises 53
Research Activities 54
PART2Physical LayerandMedia 55
Chapter 3DataandSignals 57
3.1ANALOG ANDDIGITAL 57
AnalogandDigitalData57
AnalogandDigitalSignals 58
PeriodicandNonperiodic Signals 58
3.2PERIODIC ANALOG SIGNALS 59
SineWave59
Phase63
Wavelength 64
TimeandFrequency Domains 65
Composite Signals 66
Bandwidth 69
3.3DIGITAL SIGNALS 71
BitRate73
BitLength 73
DigitalSignalasaComposite AnalogSignal74
Transmission ofDigitalSignals 743.4TRANSMISSION IMPAIRMENT 80
Attenuation 81
Distortion 83
Noise84
3.5DATARATELIMITS 85
Noiseless Channel: NyquistBitRate86
NoisyChannel: Shannon Capacity 87
UsingBothLimits 88
3.6PERFORMANCE 89
Bandwidth 89
Throughput 90
Latency(Delay) 90
Bandwidth-Delay Product 92
Jitter94
3.7RECOMMENDED READING 94
Books94
3.8KEYTERMS 94
3.9SUMMARY 95
3.10PRACTICE SET96
ReviewQuestions 96
Exercises 96
Chapter 4DigitalTransmission 101
4.1DIGITAL-TO-DIGITAL CONVERSION 101
LineCoding 101
LineCodingSchemes 106
BlockCoding 115
Scrambling 118
4.2ANALOG-TO-DIGITAL CONVERSION 120
PulseCodeModulation (PCM) 121
DeltaModulation (DM)129
4.3TRANSMISSION MODES 131
ParallelTransmission 131
SerialTransmission 132
4.4RECOMMENDED READING 135
Books135
4.5KEYTERMS 135
4.6SUMMARY 136
4.7PRACTICE SET137
ReviewQuestions 137
Exercises 137
Chapter 5AnalogTranSl1'lission 141
5.1DIGITAL-TO-ANALOG CONVERSION 141
AspectsofDigital-to-Analog Conversion 142
Amplitude ShiftKeying 143
Frequency ShiftKeying 146
PhaseShiftKeying 148
Quadrature Amplitude Modulation 152
5.2ANALOG- TO-ANALOG CONVERSION 152
Amplitude Modulation 153
Frequency Modulation 154
PhaseModulation 155CONTENTS xixiiCONTENTS
5.3RECOMMENDED READING 156
Books156
5.4KEYlERMS 157
5.5SUMMARY 157
5.6PRACTICE SET158
ReviewQuestions 158
Exercises 158
Chapter 6Ba17chridth Utili::.ation: Multiplexing
andSpreading 161
6.1MULTIPLEXING 161
Frequency-Division Multiplexing 162
Wavelength-Division Multiplexing 167
Synchronous Time-Division Multiplexing 169
Statistical Time-Division Multiplexing 179
6.2SPREAD SPECTRUM 180
Frequency Hopping SpreadSpectrum (FHSS) 181
DirectSequence SpreadSpectrum 184
6.3RECOMMENDED READING 185
Books 185
6.4KEYlERMS 185
6.5SUMMARY 186
6.6PRACTICE SET187
ReviewQuestions 187
Exercises 187
Chapter 7Transmission Media 191
7.1GUIDED MEDIA 192
Twisted-Pair Cable193
CoaxialCable195
Fiber-Optic Cable198
7.2UNGUIDED MEDIA: WIRELESS 203
RadioWaves205
Microwaves 206
Infrared 207
7.3RECOMMENDED READING 208
Books208
7.4KEYlERMS 208
7.5SUMMARY 209
7.6PRACTICE SET209
ReviewQuestions 209
Exercises 210
Chapter 8Svvitching 213
8.1CIRCUIT-SWITCHED NETWORKS 214
ThreePhases 217
Efficiency 217
Delay217
Circuit-Switched Technology inTelephone Networks 218
8.2DATAGRAM NETWORKS 218
RoutingTable220CONTENTS xiii
Efficiency 220
Delay221
Datagram Networks intheInternet 221
8.3VIRTUAL-CIRCUIT NETWORKS 221
Addressing 222
ThreePhases 223
Efficiency 226
DelayinVirtual-Circuit Networks 226
Circuit-Switched Technology inWANs227
8.4STRUCTURE OFASWITCH 227
Structure ofCircuitSwitches 227
Structure ofPacketSwitches 232
8.5RECOMMENDED READING 235
Books235
8.6KEYTERMS 235
8.7SUMMARY 236
8.8PRACTICE SET236
ReviewQuestions 236
Exercises 237
Chapter 9UsingTelephone andCableNetworks forData
Transm,ission 241
9.11ELEPHONE NETWORK 241
MajorComponents 241
LATAs 242
Signaling 244
ServicesProvided byTelephone Networks 247
9.2DIAL-UP MODEMS 248
ModemStandards 249
9.3DIGITAL SUBSCRIBER LINE251
ADSL252
ADSLLite254
HDSL255
SDSL255
VDSL255
Summary 255
9.4CABLETVNETWORKS 256
Traditional CableNetworks 256
HybridFiber-Coaxial (HFC)Network 256
9.5CABLETVFORDATATRANSFER 257
Bandwidth 257
Sharing 259
CMandCMTS 259
DataTransmission Schemes: DOCSIS 260
9.6RECOMMENDED READING 261
Books261
9.7KEYTERMS 261
9.8SUMMARY 262
9.9PRACTICE SET263
ReviewQuestions 263
Exercises 264xivCONTENTS
PART3DataLinkLayer265
Chapter10ErrorDetection andCorrection 267
10.1INTRODUCTION 267
TypesofErrors267
Redundancy 269
Detection VersusCorrection 269
ForwardErrorCorrection VersusRetransmission 269
Coding 269
Modular Arithmetic 270
10.2BLOCKCODING 271
ErrorDetection 272
ErrorCorrection 273
Hamming Distance 274
Minimum Hamming Distance 274
10.3LINEAR BLOCKCODES 277
Minimum Distance forLinearBlockCodes278
SomeLinearBlockCodes278
10.4CYCLIC CODES 284
CyclicRedundancy Check284
Hardware Implementation 287
Polynomials 291
CyclicCodeAnalysis 293
Advantages ofCyclic Codes 297
OtherCyclicCodes297
10.5CHECKSUM 298
Idea298
One'sComplement 298
InternetChecksum 299
10.6RECOMMENDED READING 30I
Books301
RFCs301
10.7KEYlERMS 301
10.8SUMMARY 302
10.9PRACTICE SET303
ReviewQuestions 303
Exercises 303
Chapter 11DataLinkControl 307
11.1FRAMING 307
Fixed-Size Framing 308
Variable-Size Framing 308
11.2FLOW AND ERRORCONTROL 311
FlowControl 311
ErrorControl 311
11.3PROTOCOLS 311
11.4NOISELESS CHANNELS 312
Simplest Protocol 312
Stop-and- WaitProtocol 315
11.5NOISYCHANNELS 318
Stop-and-Wait Automatic RepeatRequest 318
Go-Back-N Automatic RepeatRequest 32411.6
11.7
11.8
11.9
11.10
11.11Selective RepeatAutomatic RepeatRequest
Piggybacking 339
HDLC 340
Configurations andTransferModes 340
Frames 341
ControlField343
POINT-TO-POINT PROTOCOL 346
Framing 348
Transition Phases 349
Multiplexing 350
Multilink PPP355
RECOMMENDED READING 357
Books357
KEYTERMS 357
SUMMARY 358
PRACTICE SET359
ReviewQuestions 359
Exercises 359332CONTENTS xv
Chapter 12Multiple Access 363
12.1RANDOMACCESS 364
ALOHA 365
CarrierSenseMultiple Access(CSMA) 370
CarrierSenseMultiple AccesswithCollision Detection (CSMAlCD) 373
CarrierSenseMultiple AccesswithCollision Avoidance (CSMAlCA) 377
12.2CONTROLLED ACCESS 379
Reservation 379
Polling 380
TokenPassing 381
12.3CHANNELIZATION 383
Frequency-Division Multiple Access(FDMA) 383
Time-Division Multiple Access(TDMA) 384
Code-Division Multiple Access(CDMA) 385
12.4RECOMMENDED READING 390
Books391
12.5KEYTERMS 391
12.6SUMMARY 391
12.7PRACTICE SET392
ReviewQuestions 392
Exercises 393
Research Activities 394
Chapter 13WiredLANs:Ethernet 395
13.1IEEESTANDARDS 395
DataLinkLayer396
Physical Layer397
13.2STANDARD ETHERNET 397
MACSublayer 398
Physical Layer402
13.3CHANGES INTHESTANDARD 406
BridgedEthernet 406
Switched Ethernet 407
Full-Duplex Ethernet 408xviCONTENTS
13.4FASTETHERNET 409
MACSublayer409
PhysicalLayer410
13.5GIGABIT ETHERNET 412
MACSublayer 412
PhysicalLayer414
Ten-Gigabit Ethernet 416
13.6RECOMMENDED READING 417
Books417
13.7KEYTERMS 417
13.8SUMMARY 417
13.9PRACTICE SET418
ReviewQuestions 418
Exercises 419
Chapter 14Wireless LANs421
14.1IEEE802.11 421
Architecture 421
MACSublayer 423
Addressing Mechanism 428
PhysicalLayer432
14.2BLUETOOTH 434
Architecture 435
Bluetooth Layers 436
RadioLayer436
Baseband Layer437
L2CAP 440
OtherUpperLayers 441
14.3RECOMMENDED READING 44I
Books442
14.4KEYTERMS 442
14.5SUMMARY 442
14.6PRACTICE SET443
ReviewQuestions 443
Exercises 443
Chapter 15Connecting LANs,Backbone Networks,
andVirtuaLLANs445
15.1CONNECTING DEVICES 445
PassiveHubs446
Repeaters 446
ActiveHubs447
Bridges 447
Two-Layer Switches 454
Routers 455
Three-Layer Switches 455
Gateway 455
15.2BACKBONE NETWORKS 456
BusBackbone 456
StarBackbone 457
Connecting RemoteLANs45715.3VIRTUAL LANs 458
Membership 461
Configuration 461
Communication Between Switches 462
IEEE Standard 462
Advantages 463
15.4RECOMMENDED READING 463
Books463
Site463
15.5KEYTERMS 463
15.6SUMMARY 464
15.7PRACTICE SET464
ReviewQuestions 464
Exercises 465CONTENTS xvii
Chapter 16WirelessWANs:Cellular Telephone and
SatelliteNetworks 467
16.1CELLULAR TELEPHONY 467
Frequency-Reuse Principle 467
Transmitting 468
Receiving 469
Roaming 469
FirstGeneration 469
SecondGeneration 470
ThirdGeneration 477
16.2SATELLITE NETWORKS 478
Orbits479
Footprint 480
ThreeCategories ofSatellites 480
GEOSatellites 481
MEOSatellites 481
LEOSatellites 484
16.3RECOMMENDED READING 487
Books487
16.4KEYTERMS 487
16.5SUMMARY 487
16.6PRACTICE SET488
ReviewQuestions 488
Exercises 488
Chapter 17SONETISDH 491
17.1ARCHITECTURE 491
Signals 491
SONETDevices 492
Connections 493
17.2SONETLAYERS 494
PathLayer494
LineLayer495
SectionLayer495
Photonic Layer495
Device-Layer Relationships 495xviii CONTENTS
17.3SONETFRAMES 496
Frame,Byte,andBitTransmission 496
STS-lFrameFormat 497
Overhead Summary 501
Encapsulation 501
17.4STSMULTIPLEXING 503
ByteInterleaving 504
Concatenated Signal 505
AddlDrop Multiplexer 506
17.5SONETNETWORKS 507
LinearNetworks 507
RingNetworks 509
MeshNetworks 510
17.6VIRTUAL TRIBUTARIES 512
TypesofVTs 512
17.7RECOMMENDED READING 513
Books 513
17.8KEYlERMS 513
17.9SUMMARY 514
17.10PRACTICE SET514
ReviewQuestions 514
Exercises 515
Chapter 18Virtual-Circuit Networks: FrameRelm'andATM517
18.1FRAMERELAY 517
Architecture 518
FrameRelayLayers 519
Extended Address 521
FRADs 522
VOFR 522
LMI522
Congestion ControlandQualityofService 522
18.2ATM523
DesignGoals523
Problems 523
Architecture 526
Switching 529
ATMLayers 529
Congestion ControlandQualityofService 535
18.3ATMLANs536
ATMLANArchitecture 536
LANEmulation (LANE) 538
Client/Server Model 539
MixedArchitecture withClient/Server 540
18.4RECOMMENDED READING 540
Books 541
18.5KEYlERMS 541
18.6SUMMARY 541
18.7PRACTICE SET543
ReviewQuestions 543
Exercises 543CONTENTS xix
PART4Network Layer547
Chapter 19Netvl/ark Layer:LogicalAddressing 549
19.1IPv4ADDRESSES 549
AddressSpace550
Notations 550
ClassfulAddressing 552
Classless Addressing 555
Network AddressTranslation (NAT)563
19.2IPv6ADDRESSES 566
Structure 567
AddressSpace568
19.3RECOMMENDED READING 572
Books572
Sites572
RFCs572
19.4KEYTERMS 572
19.5SUMMARY 573
19.6PRACTICE SET574
ReviewQuestions 574
Exercises 574
Research Activities 577
Chapter20Network Layer:InternetProtocol 579
20.1INTERNETWORKING 579
NeedforNetwork Layer579
InternetasaDatagram Network 581
InternetasaConnectionless Network 582
20.2IPv4582
Datagram 583
Fragmentation 589
Checksum 594
Options 594
20.3IPv6596
Advantages 597
PacketFormat 597
Extension Headers 602
20.4TRANSITION FROMIPv4TOIPv6603
DualStack604
Tunneling 604
HeaderTranslation 605
20.5RECOMMENDED READING 605
Books606
Sites606
RFCs606
20.6KEYTERMS 606
20.7SUMMARY 607
20.8PRACTICE SET607
ReviewQuestions 607
Exercises 608
Research Activities 609xxCONTENTS
Chapter 21Network Layer:AddressMapping, ErrorReporting,
andMulticasting 611
21.1ADDRESS MAPPING 611
Mapping LogicaltoPhysicalAddress: ARP612
Mapping PhysicaltoLogicalAddress: RARp,BOOTP,andDHCP618
21.2ICMP621
TypesofMessages 621
Message Format 621
ErrorReporting 622
Query625
Debugging Tools627
21.3IGMP630
GroupManagement 630
IGMPMessages 631
Message Format 631
IGMPOperation 632
Encapsulation 635
NetstatUtility637
21.4ICMPv6 638
ErrorReporting 638
Query639
21.5RECOMMENDED READING 640
Books641
Site641
RFCs641
21.6KEYTERMS 641
21.7SUMMARY 642
21.8PRACTICE SET643
ReviewQuestions 643
Exercises 644
Research Activities 645
Chapter 22Network Layer:Delivery, Forwarding,
andRouting 647
22.1DELIVERY 647
DirectVersusIndirectDelivery 647
22.2FORWARDING 648
Forwarding Techniques 648
Forwarding Process 650
RoutingTable655
22.3UNICAST ROUTING PROTOCOLS 658
Optimization 658
Intra-andInterdomain Routing 659
Distance VectorRouting 660
LinkStateRouting 666
PathVectorRouting 674
22.4MULTICAST ROUTING PROTOCOLS 678
Unicast,Multicast, andBroadcast 678
Applications 681
Multicast Routing 682
RoutingProtocols 684CONTENTS xxi
22.5RECOMMENDED READING 694
Books694
Sites694
RFCs694
22.6KEYlERMS 694
22.7SUMMARY 695
22.8PRACTICE SET697
ReviewQuestions 697
Exercises 697
Research Activities 699
PART5Transport Layer 701
Chapter 23Process-fa-Process Delivery: UDp,TCp,
andSeTP703
23.1PROCESS-TO-PROCESS DELIVERY 703
Client/Server Paradigm 704
Multiplexing andDemultiplexing 707
Connectionless VersusConnection-Oriented Service 707
ReliableVersusUnreliable 708
ThreeProtocols 708
23.2USERDATAGRAM PROTOCOL (UDP)709
Well-KnownPortsforUDP709
UserDatagram 710
Checksum 711
UDPOperation 713
UseofUDP 715
23.3TCP715
TCPServices 715
TCPFeatures 719
Segment 721
ATCPConnection 723
FlowControl 728
ErrorControl 731
Congestion Control 735
23.4SCTP736
SCTPServices 736
SCTPFeatures 738
PacketFormat 742
AnSCTPAssociation 743
FlowControl 748
ErrorControl 751
Congestion Control 753
23.5RECOMMENDED READING 753
Books753
Sites753
RFCs753
23.6KEYlERMS 754
23.7SUMMARY 754
23.8PRACTICE SET756
ReviewQuestions 756
Exercises 757
Research Activities 759xxiiCONTENTS
Chapter 24Congestion ControlandQuality (~j'Service 767
24.1DATAlRAFFIC 761
TrafficDescriptor 76]
TrafficProfiles 762
24.2CONGESTION 763
Network Performance 764
24.3CONGESTION CONTROL 765
Open-Loop Congestion Control 766
Closed-Loop Congestion Control 767
24.4lWOEXAMPLES 768
Congestion ControlinTCP769
Congestion ControlinFrameRelay773
24.5QUALITY OFSERVICE 775
FlowCharacteristics 775
FlowClasses 776
24.6TECHNIQUES TOIMPROVE QoS776
Scheduling 776
TrafficShaping 777
Resource Reservation 780
Admission Control 780
24.7INTEGRATED SERVICES 780
Signaling 781
FlowSpecification 781
Admission 781
ServiceClasses 781
RSVP782
Problems withIntegrated Services 784
24.8DIFFERENTIATED SERVICES 785
DSField785
24.9QoSINSWITCHED NETWORKS 786
QoSinFrameRelay787
QoSinATM 789
24.10RECOMMENDED READING 790
Books 791
24.11KEYTERMS 791
24.12SUMMARY 791
24.13PRACTICE SET792
ReviewQuestions 792
Exercises 793
PART6Application Layer795
Chapter 25DO/nain NameSvstem 797
25.1NAMESPACE 798
FlatNameSpace798
Hierarchical NameSpace798
25.2DOMAIN NAMESPACE 799
Label799
DomainNarne799
Domain 80125.3
25.4
25.5
25.6
25.7
25.8
25.9
25.10
25.11
25.12
25.13
25.14DISTRIBUTION OFNAMESPACE 801
Hierarchy ofNameServers 802
Zone802
RootServer803
PrimaryandSecondary Servers 803
DNSINTHEINTERNET 803
GenericDomains 804
CountryDomains 805
InverseDomain 805
RESOLUTION 806
Resolver 806
Mapping NamestoAddresses 807
Mapping AddresstoNames 807
Recursive Resolution 808
IterativeResolution 808
Caching 808
DNSMESSAGES 809
Header 809
TYPESOFRECORDS 811
Question Record 811
Resource Record 811
REGISTRARS 811
DYNAMIC DOMAIN NAMESYSTEM (DDNS)
ENCAPSULATION 812
RECOMMENDED READING 812
Books 813
Sites813
RFCs813
KEYTERMS 813
SUMMARY 813
PRACTICE SET814
ReviewQuestions 814
Exercises 815812CONTENTS xxiii
Chapter 26RemoteLogging, Electronic Mail,andFileTransfer 817
26.1REMOTE LOGGING 817
TELNET 817
26.2ELECTRONIC MAIL824
Architecture 824
UserAgent828
Message TransferAgent:SMTP834
Message AccessAgent:POPandIMAP837
Web-Based Mail839
26.3FILETRANSFER 840
FileTransferProtocol (FTP)840
Anonymous FTP844
26.4RECOMMENDED READING 845
Books845
Sites845
RFCs845
26.5KEYlERMS 845
26.6SUMMARY 846xxiv CONTENTS
26.7PRACTICE SET847
ReviewQuestions 847
Exercises 848
Research Activities 848
Chapter 27WWWandHTTP851
27.1ARCHITECTURE 851
Client(Browser) 852
Server 852
Uniform Resource Locator 853
Cookies 853
27.2WEBDOCUMENTS 854
StaticDocuments 855
Dynamic Documents 857
ActiveDocuments 860
27.3HTTP861
HTTPTransaction 861
Persistent VersusNonpersistent Connection 868
ProxyServer 868
27.4RECOMMENDED READING 869
Books 869
Sites869
RFCs869
27.5KEY1ERMS 869
27.6SUMMARY 870
27.7PRACTICE SET871
ReviewQuestions 871
Exercises 871
Chapter 28Network Management: SNMP 873
28.1NETWORK MANAGEMENT SYSTEM 873
Configuration Management 874
FaultManagement 875
Performance Management 876
SecurityManagement 876
Accounting Management 877
28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 877
Concept 877
Management Components 878
Structure ofManagement Information 881
Management Information Base(MIB)886
Lexicographic Ordering 889
SNMP 891
Messages 893
UDPPorts895
Security 897
28.3RECOMMENDED READING 897
Books 897
Sites897
RFCs897
28.4KEY1ERMS 897
28.5SUMMARY 89828.6PRACTICE SET899
ReviewQuestions 899
Exercises 899
Chapter 29Multimedia 901
29.1DIGITIZING AUDIOANDVIDEO 902
Digitizing Audio902
Digitizing Video902
29.2AUDIOANDVIDEOCOMPRESSION 903
AudioCompression 903
VideoCompression 904
29.3STREAMING STORED AUDIO/VIDEO 908
FirstApproach: UsingaWebServer909
SecondApproach: UsingaWebServerwithMetafile 909
ThirdApproach: UsingaMediaServer910
FourthApproach: UsingaMediaServerandRTSP911
29.4STREAMING LIVEAUDIOIVIDEO 912
29.5REAL-TIME INTERACTIVE AUDIOIVIDEO 912
Characteristics 912
29.6RTP916
RTPPacketFormat 917
UDPPort 919
29.7RTCP919
SenderReport 919
Receiver Report 920
SourceDescription Message 920
ByeMessage 920
Application-Specific Message 920
UDPPort920
29.8VOICEOVERIP920
SIP920
H.323923
29.9RECOMMENDED READING 925
Books 925
Sites925
29.10KEY1ERMS 925
29.11SUMMARY 926
29.12PRACTICE SET927
ReviewQuestions 927
Exercises 927
Research Activities 928
PART7Security 929
Chapter 30Cryptography 931
30.1INTRODUCTION 931
Definitions 931
TwoCategories 932
30.2SYMMETRIC-KEY CRYPTOGRAPHY 935
Traditional Ciphers 935
SimpleModemCiphers 938CONTENTS xxvxxvi CONTENTS
ModernRoundCiphers 940
ModeofOperation 945
30.3ASYMMETRIC-KEY CRYPTOGRAPHY 949
RSA 949
Diffie-Hellman 952
30.4RECOMMENDED READING 956
Books956
30.5KEYTERMS 956
30.6SUMMARY 957
30.7PRACTICE SET958
ReviewQuestions 958
Exercises 959
Research Activities 960
Chapter 31Network Security 961
31.1SECURITY SERVICES 961
Message Confidentiality 962
Message Integrity 962
Message Authentication 962
Message Nonrepudiation 962
EntityAuthentication 962
31.2MESSAGE CONFIDENTIALITY 962
Confidentiality withSymmetric-Key Cryptography 963
Confidentiality withAsymmetric-Key Cryptography 963
31.3MESSAGE INTEGRITY 964
Document andFingerprint 965
Message andMessage Digest965
Difference 965
Creating andChecking theDigest966
HashFunction Criteria 966
HashAlgorithms: SHA-1 967
31.4MESSAGE AUTHENTICATION 969
MAC969
31.5DIGITAL SIGNATURE 971
Comparison 97I
NeedforKeys972
Process 973
Services 974
Signature Schemes 976
31.6ENTITY AUTHENTICATION 976
Passwords 976
Challenge-Response 978
31.7KEYMANAGEMENT 981
Symmetric-Key Distribution 981
Public-Key Distribution 986
31.8RECOMMENDED READING 990
Books990
31.9KEYTERMS 990
31.10SUMMARY 991
31.11PRACTICE SET992
ReviewQuestions 992
Exercises 993
Research Activities 994CONTENTS xxvii
Chapter 32Security intheInternet: IPSec,SSUFLS, PGP,VPN,
andFirewalls 995
32.1IPSecurity (lPSec) 996
TwoModes 996
TwoSecurityProtocols 998
SecurityAssociation 1002
InternetKeyExchange (IKE) 1004
VirtualPrivateNetwork 1004
32.2SSLffLS 1008
SSLServices 1008
SecurityParameters 1009
Sessions andConnections 1011
FourProtocols 1012
Transport LayerSecurity 1013
32.3PGP1014
SecurityParameters 1015
Services 1015
AScenario 1016
PGPAlgorithms 1017
KeyRings1018
PGPCertificates 1019
32.4FIREWALLS 1021
Packet-Filter Firewall 1022
ProxyFirewall 1023
32.5RECOMMENDED READING 1024
Books1024
32.6KEYlERMS 1024
32.7SUMMARY 1025
32.8PRACTICE SET1026
ReviewQuestions 1026
Exercises 1026
Appendix AUnicode 1029
A.lUNICODE 1029
Planes 1030
BasicMultilingual Plane(BMP) 1030
SupplementaryMultilingual Plane (SMP) 1032
Supplementary Ideographic Plane(SIP)1032
Supplementary SpecialPlane(SSP)1032
PrivateUsePlanes(PUPs) 1032
A.2ASCII1032
SomeProperties ofASCII 1036
Appendix BNumbering Systems 1037
B.lBASE10:DECIMAL 1037
Weights 1038
B.2BASE2:BINARY 1038
Weights 1038
Conversion 1038xxviii CONTENTS
B.3BASE16:HEXADECIMAL 1039
Weights 1039
Conversion 1039
AComparison 1040
BABASE256:IPADDRESSES 1040
Weights 1040
Conversion 1040
B.5OTHERCONVERSIONS 1041
BinaryandHexadecimal 1041
Base256andBinary 1042
Appendix CMathenwtical Revietv 1043
C.1TRIGONOMETRIC FUNCTIONS 1043
SineWave1043
CosineWave1045
OtherTrigonometric Functions 1046
Trigonometric Identities 1046
C.2FOURIER ANALYSIS 1046
FourierSeries1046
FourierTransform 1048
C.3EXPONENT ANDLOGARITHM 1050
Exponential Function 1050
Logarithmic Function 1051
Appendix 08B/6TCode1055
Appendix ETelephone History 1059
Before19841059
Between 1984and19961059
After1996 1059
Appendix FContactAddresses 1061
Appendix GRFCs1063
Appendix HUDPandTCPPorts1065
Acronyms 1067
Glossary 1071
References 1107
Index1111Datacommunications andnetworking maybethefastestgrowing technologies inour
culturetoday.Oneoftheramifications ofthatgrowthisadramatic increaseinthenumber
ofprofessions whereanunderstanding ofthesetechnologies isessential forsuccess­
andaproportionate increaseinthenumberandtypesofstudentstakingcoursestolearn
aboutthem."
33,"Features oftheBook
Severalfeaturesofthistextaredesigned tomakeitparticularly easyforstudents to
understand datacommunications andnetworking."
34,"Structure
Wehaveusedthefive-layer Internetmodelastheframework forthetextnotonlybecause
athorough understanding ofthemodelisessential tounderstanding mostcurrentnetwork­
ingtheorybutalsobecauseitisbasedonastructure ofinterdependencies: Eachlayer
buildsuponthelayerbeneathitandsupportsthelayeraboveit.Inthesameway,eachcon­
ceptintroduced inourtextbuildsupontheconcepts examined intheprevioussections.The
Internetmodelwaschosenbecauseitisaprotocolthatisfullyimplemented."
35,"Thistextisdesigned forstudentswithlittleornobackground intelecommunica­
tionsordatacommunications."
36,"Forthisreason,weuseabottom-up approach."
37,"Withthis
approach, studentslearnfirstaboutdatacommunications (lowerlayers)beforelearning
aboutnetworking (upperlayers)."
38,"VisualApproach
Thebookpresentshighlytechnical subjectmatterwithoutcomplex formulas byusinga
balanceoftextandfigures.Morethan700figuresaccompanying thetextprovidea
visualandintuitiveopportunity forunderstanding thematerial."
39,"Figuresareparticularly
important inexplaining networking concepts, whicharebasedonconnections and
transmission."
40,Bothoftheseideasareeasytograspvisually.
41,"Highlighted Points
Weemphasize important concepts inhighlighted boxesforquickreference andimme­
diateattention."
42,"xxixxxxPREFACE
Examples andApplications
Whenappropriate, wehaveselectedexamples toreflecttrue-to-life situations."
43,"Forexam­
ple,inChapter6wehaveshownseveralcasesoftelecommunications incurrenttelephone
networks."
44,"Recommended Reading
Eachchapterincludes alistofbooksandsitesthatcanbeusedforfurtherreading."
45,"KeyTerms
Eachchapterincludesalistofkeytermsforthestudent."
46,"Summary
Eachchapterendswithasummary ofthematerial coveredinthatchapter.Thesum­
maryprovides abriefoverview ofalltheimportant pointsinthechapter."
47,"PracticeSet
Eachchapterincludes apracticesetdesigned toreinforce andapplysalientconcepts.It
consistsofthreeparts:reviewquestions, exercises, andresearch activities (onlyfor
appropriate chapters)."
48,"Reviewquestions areintendedtotestthestudent'sfirst-level under­
standingofthematerialpresented inthechapter.Exercises requiredeeperunderstanding
ofthemateriaL Research activities aredesigned tocreatemotivation forfurtherstudy."
49,"Appendixes
Theappendixes areintended toprovidequickreference materialorareviewofmateri­
alsneededtounderstand theconcepts discussed inthebook."
50,"Glossary andAcronyms
Thebookcontains anextensive glossary andalistofacronyms."
51,"Changes intheFourthEdition
TheFourthEditionhasmajorchangesfromtheThirdEdition,bothintheorganization
andinthecontents."
52,"Organization
Thefollowing liststhechangesintheorganization ofthebook:
1.Chapter6nowcontains multiplexing aswellasspreading."
53,2.Chapter8isnowtotallydevotedtoswitching.
54,3.ThecontentsofChapter12aremovedtoChapter11.
55,4.Chapter17coversSONETtechnology.
56,5.Chapter19discusses IPaddressing.
57,6.Chapter20isdevotedtotheInternetProtocol.
58,"7.Chapter21discusses threeprotocols: ARP,ICMP,andIGMP."
59,8.Chapter28isnewanddevotedtonetworkmanagement intheInternet.
60,"9.Theprevious Chapters 29to31arenowChapters 30to32.PREFACE xxxi
Contents
Wehaverevisedthecontents ofmanychapters including thefollowing:
1.Thecontents ofChapters 1to5arerevisedandaugmented."
61,"Examples areaddedto
clarifythecontents."
62,"2.Thecontents ofChapter10arerevisedandaugmented toincludemethodsoferror
detection andcorrection."
63,3.Chapter 11isrevisedtoincludeafulldiscussion ofseveralcontrollinkprotocols.
64,"4.Delivery, forwarding, androutingofdatagrams areaddedtoChapter22."
65,"5.Thenewtransport protocol, SCTP,isaddedtoChapter23."
66,"6.Thecontents ofChapters 30, 31,and32arerevisedandaugmented to include
additional discussion aboutsecurityissuesandtheInternet."
67,7.Newexamples areaddedtoclarifytheunderstanding ofconcepts.
68,"EndMaterials
1.Asectionisaddedtotheendofeachchapterlistingadditional sourcesforstudy."
69,2.Thereviewquestions arechanged andupdated.
70,"3.Themultiple-choice questions aremovedtothebooksitetoallowstudentstoself-test
theirknowledge aboutthecontentsofthechapterandreceiveimmediate feedback."
71,4.Exercises arerevisedandnewonesareaddedtotheappropriate chapters.
72,5.Somechapters containresearch activities.
73,"Instructional Materials
Instructional materials forboththestudentandtheteacherarerevisedandaugmented."
74,"Thesolutions toexercises containboththeexplanation andanswerincluding fullcol­
oredfiguresortableswhenneeded.ThePowerpoint presentations aremorecompre­
hensiveandincludetextandfigures."
75,"Contents
Thebookisdividedintosevenparts.Thefirstpartisanoverview; thelastpartconcerns
network security."
76,"Themiddlefivepartsaredesigned torepresent thefivelayersofthe
Internetmodel.Thefollowing summarizes thecontentsofeachpart."
77,"PartOne:Overview
Thefirstpartgivesageneraloverview ofdatacommunications andnetworking."
78,"Chap­
ter1coversintroductory concepts neededfortherestofthebook.Chapter2introduces
theInternetmodel."
79,"PartTwo:Physical Layer
Thesecondpartisadiscussion ofthephysical layeroftheInternetmodel.Chapters 3
to6discusstelecommunication aspectsofthephysical layer.Chapter7introduces the
transmission media,which,although notpartofthephysical layer,iscontrolled byit."
80,"Chapter8isdevotedtoswitching, whichcanbeusedinseverallayers.Chapter9shows
howtwopublicnetworks, telephone andcableTV,canbeusedfordatatransfer.xxxii PREFACE
PartThree:DataLinkLayer
Thethirdpartisdevotedtothediscussion ofthedatalinklayeroftheInternetmodel."
81,Chapter10coverserrordetection andcorrection.
82,"Chapters 11,12discussissuesrelated
todatalinkcontrol.Chapters 13through16dealwithLANs.Chapters 17and]8are
aboutWANs.LANsandWANsareexamples ofnetworks operating inthefirsttwolay­
ersoftheInternetmodel."
83,"PartFour:Network Layer
Thefourthpartisdevotedtothediscussion ofthenetworklayeroftheInternetmodel."
84,Chapter19coversIPaddresses.
85,"Chapters 20and21aredevotedtothenetworklayer
protocols suchasIP,ARP,ICMP,andIGMP.Chapter22discusses delivery,forwarding,
androutingofpacketsintheInternet."
86,"PartFive:Transport Layer
Thefifthpartisdevotedtothediscussion ofthetransport layeroftheInternetmodel."
87,"Chapter23givesanoverview ofthetransport layeranddiscusses theservices and
dutiesofthislayer.Italsointroduces threetransport-layer protocols: UDP,TCP,and
SCTP.Chapter 24discusses congestion controlandqualityofservice,twoissues
relatedtothetransport layerandtheprevious twolayers."
88,"PartSix:Application Layer
Thesixthpartisdevotedtothediscussion oftheapplication layeroftheInternetmodel."
89,"Chapter25isaboutDNS,theapplication programthatisusedbyotherapplication pro­
gramstomapapplication layeraddresses tonetworklayeraddresses."
90,"Chapter26to29
discusssomecommon applications protocols intheInternet."
91,"PartSeven:Security
Theseventhpartisadiscussion ofsecurity.Itservesasapreludetofurtherstudyinthis
subject.Chapter30brieflydiscusses cryptography."
92,"Chapter 31introduces security
aspects.Chapter32showshowdifferent securityaspectscanbeappliedtothreelayers
oftheInternetmodel."
93,"OnlineLearning Center
TheMcGraw-Hill OnlineLearning Centercontains muchadditional material."
94,"Avail­
ableatwww.mhhe.com/forouzan."
95,"AsstudentsreadthroughDataCommunications and
Networking, theycangoonlinetotakeself-grading quizzes.Theycanalsoaccesslec­
turematerials suchasPowerPoint slides,andgetadditional reviewfromanimated fig­
uresfromthebook.Selectedsolutions arealsoavailable overtheWeb.Thesolutions to
odd-numbered problems areprovided tostudents, andinstructors canuseapassword to
accessthecomplete setofsolutions."
96,"Additionally, McGraw-Hill makesiteasytocreateawebsiteforyournetworking
coursewithanexclusive McGraw-Hill productcalledPageOut."
97,"Itrequiresnoprior
knowledge ofHTML,nolonghours,andnodesignskillsonyourpart.Instead,Page:­
Outoffersaseriesoftemplates."
98,"Simplyfillthemwithyourcourseinformation andPREFACE xxxiii
clickononeof16designs.Theprocesstakesunderanhourandleavesyouwithapro­
fessionally designed website."
99,"Although PageOut offers""instant"" development, thefinishedwebsiteprovides pow­
erfulfeatures.Aninteractive coursesyllabusallowsyoutopostcontenttocoincide with
yourlectures,sowhenstudentsvisityourPageOutwebsite,yoursyllabuswilldirectthem
tocomponents ofForouzan's OnlineLearning Center,orspecificmaterialofyourown."
100,"HowtoUsetheBook
Thisbookiswrittenforbothanacademic andaprofessional audience."
101,"Thebookcanbe
usedasaself-study guideforinterested professionals."
102,"Asatextbook, itcanbeusedfor
aone-semester orone-quarter course.Thefollowing aresomeguidelines."
103,oPartsonetothreearestronglyrecommended.
104,oPartsfourtosixcanbecoveredifthereisnofollowing courseinTCP/IPprotocol.
105,oPartsevenisrecommended ifthereisnofollowing courseinnetworksecurity.
106,"Acknowledgments
Itisobviousthatthedevelopment ofabookofthisscopeneedsthesupportofmanypeople."
107,"PeerReview
Themostimportant contribution tothedevelopment ofabooksuchasthiscomesfrom
peerreviews."
108,"Wecannotexpressourgratitude inwordstothemanyreviewers who
spentnumerous hoursreadingthemanuscript andproviding uswithhelpfulcomments
andideas.Wewouldespecially liketoacknowledge thecontributions ofthefollowing
reviewers forthethirdandfourtheditionsofthisbook."
109,"FaridAhmed,Catholic University
KavehAshenayi, University ofTulsa
YorisAu,University ofTexas,SanAntonio
EssieBakhtiar, ClaytonCollege&StateUniversity
Anthony Barnard, University ofAlabama, Brimingham
A.T.Burrell,Oklahoma StateUniversity
ScottCampbell, MiamiUniversity
TeresaCarrigan, Blackburn College
HwaChang,TuftsUniversity
EdwardChlebus, IllinoisInstituteofTechnology
PeterCooper,SamHouston StateUniversity
RichardCoppins, VirginiaCommonwealth University
HarpalDhillon,Southwestern Oklahoma StateUniversity
Hans-Peter Dommel, SantaClaraUniversity
M.BarryDumas,BaruchCollege,CUNY
WilliamFigg,DakotaStateUniversity
DaleFox,Quinnipiac University
Terrence Fries,CoastalCarolina University
ErrinFulp,WakeForestUniversityxxxiv PREFACE
Sandeep Gupta,ArizonaStateUniversity
GeorgeHamer,SouthDakotaStateUniversity
JamesHenson, California StateUniversity, Fresno
TomHilton,UtahStateUniversity
AllenHolliday, California StateUniversity, Fullerton
SeyedHosseinHosseini, University ofWisconsin, Milwaukee
GeraldIsaacs,CarrollCollege,Waukesha
Hrishikesh Joshi,DeVryUniversity
E.S.Khosravi, Southern University
BobKinicki,Worcester Polytechnic University
KevinKwiat,Hamilton College
Ten-Hwang Lai,OhioStateUniversity
Chung-Wei Lee,AuburnUniversity
Ka-Cheong Leung,TexasTechUniversity
Gertrude Levine,Fairleigh Dickinson University
AlvinSekSeeLim,AuburnUniversity
CharlesLiu,California StateUniversity, LosAngeles
Wenhang Liu,California StateUniversity, LosAngeles
MarkLlewellyn, University ofCentralFlorida
Sanchita Mal-Sarkar, Cleveland StateUniversity
LouisMarseille, HarfordCommunity College
KevinMcNeill, University ofArizona
ArnoldC.Meltzer, GeorgeWashington University
Rayman Meservy, Brigham YoungUniversity
PrasantMohapatra, University ofCalifornia, Davis
HungZNgo,SUNY,Buffalo
LarryOwens,California StateUniversity, Fresno
ArnoldPatton,BradleyUniversity
DollySamson, HawaiiPacificUniversity
JosephSherif,California StateUniversity, Fullerton
RobertSimon,GeorgeMasonUniversity
Ronald1.Srodawa, Oakland University
DanielTian,California StateUniversity, Monterey Bay
RichardTibbs,RadfordUniversity
Christophe Veltsos,Minnesota StateUniversity, Mankato
YangWang,University ofMaryland, CollegePark
SheraliZeadally, WayneStateUniversity
McGraw-Hill Staff
SpecialthanksgotothestaffofMcGraw-Hill."
110,"AlanApt,ourpublisher, provedhowa
proficient publisher canmaketheimpossible possible."
111,"Rebecca Olson,thedevelopmen­
taleditor,gaveushelpwhenever weneededit.SheilaFrank,ourprojectmanager,
guidedusthroughtheproduction processwithenormous enthusiasm."
112,"Wealsothank
DavidHashindesign,KaraKudronowicz inproduction, andPattiScott,thecopyeditor.Overview
Objectives
Part1provides ageneralideaofwhatwewillseeintherestofthebook.Fourmajor
concepts arediscussed: datacommunications, networking, protocols andstandards,
andnetworking models."
113,"Networks existsothatdatamaybesentfromoneplacetoanother-the basiccon­
ceptofdatacommunications."
114,"Tofullygraspthissubject,wemustunderstand thedata
communication components, howdifferent typesofdatacanberepresented, andhow
tocreateadataflow."
115,"Datacommunications between remotepartiescanbeachieved throughaprocess
callednetworking, involving theconnection ofcomputers, media,andnetworking
devices.Networks aredividedintotwomaincategories: localareanetworks (LANs)
andwideareanetworks (WANs)."
116,"Thesetwotypesofnetworks havedifferent charac­
teristicsanddifferent functionalities."
117,"TheInternet, themainfocusofthebook,isa
collection ofLANsandWANsheldtogetherbyinternetworking devices."
118,"Protocols andstandards arevitaltotheimplementation ofdatacommunications
andnetworking."
119,"Protocols refertotherules;astandard isaprotocol thathasbeen
adoptedbyvendorsandmanufacturers."
120,"Networkmodelsservetoorganize, unify,andcontrolthehardware andsoftwarecom­
ponentsofdatacommunications andnetworking."
121,"Although theterm""network model""
suggestsarelationship tonetworking, themodelalsoencompasses datacommunications."
122,"Chapters
Thispartconsistsoftwochapters: Chapter1andChapter2."
123,"Chapter1
InChapter1,weintroduce theconceptsofdatacommunications andnetworking."
124,"Wedis­
cussdatacommunications components, datarepresentation, anddataflow.Wethenmove
tothestructure ofnetworks thatcarrydata.Wediscussnetworktopologies, categories
ofnetworks, andthegeneralideabehindtheInternet."
125,"Thesectiononprotocols and
standards givesaquickoverview oftheorganizations thatsetstandards indatacommuni­
cationsandnetworking.Chapter2
Thetwodominant networking modelsaretheOpenSystems Interconnection (OSI)and
theInternet model(TCP/IP).The firstisatheoretical framework; thesecondisthe
actualmodelusedintoday'sdatacommunications."
126,"InChapter2,wefirstdiscussthe
OSImodeltogiveageneralbackground."
127,"Wethenconcentrate ontheInternetmodel,
whichisthefoundation fortherestofthebook.CHAPTERl
Introduction
Datacommunications andnetworking arechanging thewaywedobusinessandtheway
welive.Business decisions havetobemadeevermorequickly,andthedecisionmakers
requireimmediate accesstoaccurate information."
128,"Whywaitaweekforthatreport
fromGermany toarrivebymailwhenitcouldappearalmostinstantaneously through
computer networks?"
129,Businesses todayrelyoncomputer networks andinternetworks.
130,"Butbeforeweaskhowquicklywecangethookedup,weneedtoknowhownetworks
operate,whattypesoftechnologies areavailable, andwhichdesignbestfillswhichset
ofneeds."
131,"Thedevelopment ofthepersonalcomputer broughtabouttremendous changesfor
business, industry, science,andeducation."
132,"Asimilarrevolution isoccurring indata
communications andnetworking."
133,"Technological advances aremakingitpossiblefor
communications linkstocarrymoreandfastersignals.Asaresult,servicesareevolving
toallowuseofthisexpanded capacity."
134,"Forexample, established telephone services
suchasconference calling,callwaiting,voicemail,andcallerIDhavebeenextended."
135,"Research indatacommunications andnetworking hasresultedinnewtechnolo­
gies.Onegoalistobeabletoexchange datasuchastext,audio, and videofromall
pointsintheworld.WewanttoaccesstheInternettodownload anduploadinformation
quicklyandaccurately andatanytime."
136,"Thischapteraddresses fourissues:data communications, networks, theInternet,
andprotocols andstandards."
137,Firstwegiveabroaddefinition ofdatacommunications.
138,"Thenwedefinenetworks asahighway onwhichdatacantravel.TheInternetisdis­
cussedasagoodexampleofaninternetwork (i.e.,anetworkofnetworks)."
139,"Finally,we
discussdifferent typesofprotocols, thedifference between protocols andstandards,
andtheorganizations thatsetthosestandards."
140,"1.1DATACOMMUNICATIONS
Whenwecommunicate, wearesharinginformation."
141,"Thissharingcanbelocalor
remote.Between individuals, localcommunication usuallyoccursfacetoface,while
remotecommunication takesplaceoverdistance."
142,"Thetermtelecommunication, which
3I I,I4CHAPTER 1INTRODUCTION
includes telephony, telegraphy, andtelevision, meanscommunication atadistance(tele
isGreekfor""far"")."
143,"Theworddatareferstoinformation presented inwhatever formisagreeduponby
thepartiescreatingandusingthedata."
144,"Datacommunications aretheexchange ofdatabetween twodevicesviasome
formoftransmission medium suchasawirecable.Fordatacommunications tooccur,
thecommunicating devicesmustbepartofacommunication systemmadeupofacom­
binationofhardware (physical equipment) andsoftware (programs)."
145,"Theeffectiveness
ofadatacommunications systemdepends onfourfundamental characteristics: deliv­
ery,accuracy, timeliness, andjitter."
146,I.Delivery.
147,Thesystemmustdeliverdatatothecorrectdestination.
148,"Datamustbe
received bytheintended deviceoruserandonlybythatdeviceoruser."
149,7Accuracy.
150,Thesystemmustdeliverthedataaccurately.
151,"Datathathavebeen
alteredintransmission andleftuncorrected areunusable."
152,3.Timeliness.
153,"Thesystemmustdeliverdatainatimelymanner.Datadelivered lateare
useless.Inthecaseofvideoandaudio,timelydelivery meansdelivering dataas
theyareproduced, inthesameorderthattheyareproduced, andwithoutsignifi­
cantdelay.Thiskindofdeliveryiscalledreal-time transmission."
154,"-\..Jitter.Jitterreferstothevariation inthepacketarrivaltime.Itistheunevendelayin
thedeliveryofaudioorvideopackets.Forexample, letusassumethatvideopackets
aresentevery3Dms.Ifsomeofthepacketsarrivewith3D-msdelayandotherswith
4D-msdelay,anunevenqualityinthevideoistheresult."
155,"COinponents
Adatacommunications systemhasfivecomponents (seeFigure1.1)."
156,"Figure1.1Fivecomponents ofdatacommunication
Rule1:
Rule2:
Rulen:Protocol
-1 Messager
MediumProtocolRule1:
Rule2:
Rulen:
I.Message."
157,Themessage istheinformation (data)tobecommunicated.
158,"Popular
formsofinformation includetext,numbers, pictures, audio,andvideo."
159,ISender.
160,Thesenderisthedevicethatsendsthedatamessage.
161,"Itcanbeacom­
puter,workstation, telephone handset, videocamera,andsoon."
162,3.Receiver.
163,"Thereceiver isthedevicethatreceives themessage.Itcanbeacom­
puter,workstation, telephone handset, television, andsoon."
164,-1..Transmission medium.
165,"Thetransmission medium isthephysical pathbywhich
amessage travelsfromsendertoreceiver."
166,"Someexamples oftransmission media
includetwisted-pair wire,coaxialcable,fiber-optic cable,andradiowaves.SECTION 1.1DATACOMMUNICATIONS 5
5.Protocol."
167,Aprotocol isasetofrulesthatgoverndatacommunications.
168,"Itrepre­
sentsanagreement betweenthecommunicating devices.Withoutaprotocol, two
devicesmaybeconnected butnotcommunicating, justasapersonspeaking French
cannotbeunderstood byapersonwhospeaksonlyJapanese."
169,"DataRepresentation
Information todaycomesindifferent formssuchastext,numbers, images,audio,and
video."
170,"Text
Indatacommunications, textisrepresented asabitpattern,asequence ofbits(Osor
Is).Different setsofbitpatternshavebeendesigned torepresent textsymbols."
171,"Eachset
iscalledacode,andtheprocessofrepresenting symbols iscalledcoding.Today,the
prevalent codingsystemiscalledUnicode, whichuses32bitstorepresent asymbolor
character usedinanylanguage intheworld.TheAmerican Standard CodeforInfor­
mationInterchange (ASCII), developed somedecadesagointheUnitedStates,now
constitutes thefirst127characters inUnicode andisalsoreferredtoasBasicLatin."
172,Appendix AincludespartoftheUnicode.
173,"Numbers
Numbers arealsorepresented bybitpatterns.However, acodesuchasASCIIisnotused
torepresent numbers; thenumberisdirectlyconverted toabinarynumbertosimplify
mathematical operations."
174,Appendix Bdiscusses severaldifferentnumbering systems.
175,"Images
Imagesarealsorepresented bybitpatterns."
176,"Initssimplestform,animageiscomposed
ofamatrixofpixels(pictureelements), whereeachpixelisasmalldot.Thesizeofthe
pixeldependsontheresolution."
177,"Forexample, animagecanbedividedinto1000pixels
or10,000pixels.Inthesecondcase,thereisabetterrepresentation oftheimage(better
resolution), butmorememoryisneededtostoretheimage."
178,"Afteranimageisdividedintopixels,eachpixelisassigned abitpattern.Thesize
andthevalueofthepatterndependonthe image."
179,"Foranimagemadeofonlyblack­
and-white dots(e.g.,achessboard), aI-bitpatternisenoughtorepresent apixel."
180,"Ifanimageisnotmadeofpurewhiteandpureblackpixels,youcanincreasethe
sizeofthebitpatterntoincludegrayscale.Forexample, toshowfourlevelsofgray
scale,youcanuse2-bitpatterns."
181,"Ablackpixelcanberepresented by00,adarkgray
pixelby01,alightgraypixelby10,andawhitepixelby11."
182,"Thereareseveralmethods torepresent colorimages.OnemethodiscalledRGB,
socalledbecauseeachcolorismadeofacombination ofthreeprimarycolors:red,
green,andblue.Theintensityofeachcolorismeasured, andabitpatternisassigned to
it.AnothermethodiscalledYCM,inwhichacolorismadeofacombination ofthree
otherprimarycolors:yellow,cyan,andmagenta."
183,"Audio
Audioreferstotherecording orbroadcasting ofsoundormusic.Audioisbynature
different fromtext,numbers, orimages.Itiscontinuous, notdiscrete."
184,"Evenwhenwe6CHAPTER 1INTRODUCTION
useamicrophone tochangevoiceormusictoanelectricsignal,wecreateacontinuous
signal.InChapters 4and5,welearnhowtochangesoundormusictoadigitaloran
analogsignal."
185,"Video
Videoreferstotherecording orbroadcasting ofapictureormovie.Videocaneitherbe
produced asacontinuous entity(e.g.,byaTVcamera), oritcanbeacombination of
images,eachadiscrete entity,arranged toconveytheideaofmotion.Againwecan
changevideotoadigitalorananalogsignal,aswewillseeinChapters 4and5."
186,"DataFlow
Communication between twodevicescan besimplex, half-duplex, orfull-duplex as
showninFigure1.2.
Figure1.2Dataflow(simplex, half-duplex, andfull-duplex)
Mainframe
a.Simplex
b.Half-duplex
c.Full·duplexDirection ofdata
Direction ofdataattimeI
~
Direction ofdataattime2
Direction ofdataallthetime
)Monitor
Simplex
Insimplexmode,thecommunication isunidirectional, asonaone-way street.Onlyone
ofthetwodevicesonalinkcantransmit; theothercanonly receive(seeFigure1.2a)."
187,Keyboards andtraditional monitors areexamples ofsimplex devices.
188,"Thekey­
boardcanonlyintroduce input;themonitorcanonlyacceptoutput.Thesimplexmode
canusetheentirecapacityofthechanneltosenddatainonedirection."
189,"Half-Duplex
Inhalf-duplex mode,eachstationcanbothtransmitandreceive,butnotatthesametime.:
Whenonedeviceissending,theothercanonlyreceive,andviceversa(seeFigure1.2b).SECTION 1.2NETWORKS 7
Thehalf-duplex modeislikeaone-lane roadwithtrafficallowedinbothdirec­
tions.Whencarsaretraveling inonedirection, carsgoingtheotherwaymustwait.Ina
half-duplex transmission, theentirecapacityofachannelistakenoverbywhichever of
thetwodevicesistransmitting atthetime.Walkie-talkies andCB(citizens band)radios
arebothhalf-duplex systems."
190,"Thehalf-duplex modeisusedincaseswherethereisnoneedforcommunication
inbothdirections atthesametime;theentirecapacityofthechannelcanbeutilizedfor
eachdirection."
191,"Full-Duplex
Infull-duplex m.,lle(als@calledduplex), bothstationscantransmitandreceivesimul­
taneously (seeFigure1.2c)."
192,"Thefull-duplex modeislikeatW<D-way streetwithtrafficflowinginbothdirec­
tionsatthesametime.Infull-duplex mode, si~nalsgoinginonedirection sharethe
capacityofthelink:withsignalsgoingintheother din~c~on."
193,"Thissharingcanoccurin
twoways:Eitherthelinkmustcontaintwophysically separate t:nmsmissiIDn paths,one
forsending andtheotherforreceiving; orthecapacity ofthech:arillilel isdivided
betweensignalstraveling inbothdirections."
194,Onecommon example offull-duplex communication isthetelephone network.
195,"Whentwopeoplearecommunicating byatelephone line,bothcantalkandlistenatthe
sametime."
196,"Thefull-duplex modeisusedwhencommunication inbothdirections isrequired
allthetime.Thecapacityofthechannel, however, mustbedividedbetween thetwo
directions."
197,"1.2NETWORKS
Anetwork isasetofdevices(oftenreferredtoasnodes)connected bycommunication
links.Anodecanbeacomputer, printer,oranyotherdevicecapableofsendingand/or
receiving datagenerated byothernodesonthenetwork."
198,"Distributed Processing
Mostnetworks usedistributed processing, inwhichataskisdividedamongmultiple
computers."
199,"Insteadofonesinglelargemachine beingresponsible forallaspectsofa
process, separate computers (usually apersonal computer orworkstation) handlea
subset."
200,"Network Criteria
Anetwork mustbeabletomeetacertainnumberofcriteria.Themost important of
theseareperformance, reliability, andsecurity."
201,"Performance
Performance canbemeasured inmanyways,including transittimeandresponse time."
202,"Transittimeistheamountoftimerequired foramessage totravelfromonedeviceto8CHAPTER 1INTRODUCTION
another.Response timeistheelapsedtimebetweenaninquiryandaresponse."
203,"Theper­
formance ofanetworkdependsonanumberoffactors,including thenumberofusers,
thetypeoftransmission medium, thecapabilities oftheconnected hardware, andthe
efficiency ofthesoftware."
204,Performance isoftenevaluated bytwonetworking metrics:throughput anddelay.
205,"Weoftenneedmorethroughput andlessdelay.However, thesetwocriteriaareoften
contradictory."
206,"Ifwetrytosendmoredatatothenetwork, wemayincreasethroughput
butweincreasethedelaybecauseoftrafficcongestion inthenetwork."
207,"Reliability
Inadditiontoaccuracy ofdelivery,networkreliability ismeasured bythefrequency of
failure,thetimeittakesalinktorecoverfromafailure,andthenetwork's robustness in
acatastrophe."
208,"Security
Network security issuesincludeprotecting datafromunauthorized access,protecting
datafromdamageanddevelopment, andimplementing policiesandprocedures for
recovery frombreaches anddatalosses."
209,"Physical Structures
Beforediscussing networks, weneedtodefinesomenetworkattributes."
210,"TypeofConnection
Anetworkistwoormoredevicesconnected throughlinks.Alinkisacommunications
pathwaythattransfers datafromonedevicetoanother.Forvisualization purposes, itis
simplesttoimagineanylinkasalinedrawnbetweentwopoints.Forcommunication to
occur,twodevicesmustbeconnected insomewaytothesamelinkatthesametime."
211,Therearetwopossibletypesofconnections: point-to-point andmultipoint.
212,"Point-to-Point Apoint-to-point connection provides adedicated linkbetweentwo
devices.Theentirecapacityofthelinkisreserved fortransmission betweenthosetwo
devices.Mostpoint-to-point connections useanactuallengthofwireorcabletocon­
nectthetwoends,butotheroptions,suchasmicrowave orsatellitelinks,arealsopossi­
ble(seeFigure1.3a).Whenyouchangetelevision channels byinfraredremotecontrol,
youareestablishing apoint-to-point connection between theremotecontrolandthe
television's controlsystem."
213,"Multipoint Amultipoint (alsocalledmultidrop) connection isoneinwhichmore
thantwospecificdevicesshareasinglelink(seeFigure1.3b)."
214,"Inamultipoint environment, thecapacityofthechannelisshared,eitherspatially
ortemporally."
215,"Ifseveraldevicescanusethelinksimultaneously, itisaspatially shared
connection."
216,"Ifusersmust take turns,itisatimeshared connection."
217,"Physical Topology
Thetermphysical topology referstothewayinwhichanetworkislaidoutphysically.:
1\voormoredevicesconnecttoalink;twoormorelinksformatopology."
218,"ThetopologySECTION 1.2NETWORKS 9
Figure1.3Typesofconnections: point-to-point andmultipoint
Link
a.Point-to-point
MainframeLink
b.Multipoint
ofanetwork isthegeometric representation oftherelationship ofallthelinksand
linkingdevices(usuallycallednodes)tooneanother.Therearefourbasictopologies
possible: mesh,star,bus,andring(seeFigure1.4)."
219,"Figure1.4Categories oftopology
MeshInameshtopology, everydevicehasadedicated point-to-point linktoevery
otherdevice.Thetermdedicated meansthatthelinkcarriestrafficonlybetween the
twodevicesitconnects."
220,"Tofindthenumberofphysicallinksinafullyconnected mesh
network withnnodes,wefirstconsider thateachnodemustbeconnected toevery
othernode.Node1mustbeconnected ton-Inodes,node2mustbeconnected ton-1
nodes,andfinallynodenmustbeconnected ton-1nodes.Weneedn(n-1)physical
links.However, ifeachphysicallinkallowscommunication inbothdirections (duplex
mode),wecandividethenumberoflinksby2.Inotherwords,wecansaythatina
meshtopology, weneed
n(n-1)/2
duplex-mode links."
221,"Toaccommodate thatmanylinks,everydeviceonthenetwork musthaven-1
input/output (VO)ports(seeFigure1.5)tobeconnected totheothern-1stations.10CHAPTER 1INTRODUCTION
Figure1.5Afullyconnected meshtopology (fivedevices)
Ameshoffersseveraladvantages overothernetworktopologies."
222,"First,theuseof
dedicated linksguarantees thateachconnection cancarryitsowndataload,thuselimi­
natingthetrafficproblems thatcanoccurwhenlinksmustbesharedbymultipledevices."
223,"Second,ameshtopology isrobust.Ifonelinkbecomes unusable, itdoesnotincapaci­
tatetheentiresystem.Third,thereistheadvantage ofprivacyorsecurity.Whenevery
message travelsalongadedicated line,onlytheintended recipient seesit.Physical
boundaries preventotherusersfromgainingaccesstomessages."
224,"Finally,point-to-point
linksmakefaultidentification andfaultisolation easy.Trafficcanberoutedtoavoid
linkswithsuspected problems."
225,"Thisfacilityenablesthenetworkmanager todiscoverthe
preciselocationofthefaultandaidsinfindingitscauseandsolution."
226,"Themaindisadvantages ofamesharerelatedtotheamountofcablingandthe
numberofI/Oportsrequired."
227,"First,becauseeverydevicemustbeconnected toevery
otherdevice,installation andreconnection aredifficult."
228,"Second,thesheerbulkofthe
wiringcanbegreaterthantheavailable space(inwalls,ceilings, orfloors)canaccom­
modate.Finally,thehardware requiredtoconnecteachlink(I/Oportsandcable)canbe
prohibitively expensive."
229,"Forthesereasonsameshtopology isusuallyimplemented ina
limitedfashion,forexample, asabackbone connecting themaincomputers ofahybrid
networkthatcanincludeseveralothertopologies."
230,"Onepractical exampleofameshtopology istheconnection oftelephone regional
officesinwhicheachregionalofficeneeds tobeconnected toeveryotherregionaloffice."
231,"StarTopology Inastartopology, eachdevicehasadedicated point-to-point link
onlytoacentralcontroller, usuallycalledahub.Thedevicesarenotdirectlylinkedto
oneanother."
232,"Unlikeameshtopology, astartopology doesnotallowdirecttraffic
betweendevices.Thecontroller actsasanexchange:Ifonedevicewantstosenddatato
another,itsendsthedatatothecontroller, whichthenrelaysthedatatotheothercon­
necteddevice(seeFigure1.6)."
233,Astartopology islessexpensive thanameshtopology.
234,"Inastar,eachdeviceneeds
onlyonelinkandoneI/Oporttoconnectittoanynumberofothers.Thisfactoralso
makesiteasytoinstallandreconfigure."
235,"Farlesscablingneedstobehoused,andaddi­
tions,moves,anddeletions involveonlyoneconnection: betweenthatdeviceandthehub."
236,Otheradvantages includerobustness.
237,"Ifonelinkfails,onlythatlinkisaffected.All
otherlinksremainactive.Thisfactoralsolendsitselftoeasyfaultidentification andSECTION 1.2NETWORKS 11
Figure1.6Astartopology connecting fourstations
Hub
faultisolation."
238,"Aslongasthehubisworking, itcanbeusedtomonitorlinkproblems
andbypassdefective links."
239,"Onebigdisadvantage ofastartopology isthedependency ofthewholetopology
ononesinglepoint,thehub.Ifthehubgoesdown,thewholesystemisdead."
240,"Although astarrequiresfarlesscablethanamesh,eachnodemustbelinkedtoa
centralhub.Forthisreason,oftenmorecablingisrequired inastarthaninsomeother
topologies (suchasringorbus)."
241,"Thestartopology isusedinlocal-area networks (LANs),aswewillseeinChapter13."
242,High-speed LANsoftenuseastartopology withacentralhub.
243,BusTopology Thepreceding examples alldescribepoint-to-point connections.
244,"Abus
topology, ontheotherhand,ismultipoint."
245,"Onelongcableactsasabackbone tolinkall
thedevicesinanetwork(seeFigure1.7)."
246,"Figure1.7Abustopology connecting threestations
Dropline Dropline Dropline
Cableend11I-----1..----- ..----- ..----11 Cableend
Tap Tap Tap
Nodesareconnected tothebuscablebydroplinesandtaps.Adroplineisacon­
nectionrunningbetween thedeviceandthemaincable.Atapisaconnector thateither
splicesintothemaincableorpunctures thesheathing ofacabletocreateacontactwith
themetalliccore.Asasignaltravelsalongthebackbone, someofitsenergyistransformed
intoheat.Therefore, itbecomes weakerandweakerasittravelsfartherandfarther.For
thisreasonthereisalimitonthenumberoftapsabuscansupportandonthedistance
betweenthosetaps."
247,Advantages ofabustopology includeeaseofinstallation.
248,"Backbone cablecanbe
laidalongthemostefficientpath,thenconnected tothenodesbydroplinesofvarious
lengths.Inthisway,abususeslesscablingthanmeshorstartopologies."
249,"Inastar,for
example, fournetworkdevicesinthesameroomrequirefourlengthsofcablereaching12CHAPTER 1INTRODUCTION
allthewaytothehub.Inabus,thisredundancy iseliminated."
250,"Onlythebackbone cable
stretches throughtheentirefacility.Eachdroplinehastoreachonlyasfarasthenear­
estpointonthebackbone."
251,Disadvantages includedifficultreconnection andfaultisolation.
252,"Abusisusually
designed tobeoptimally efficientatinstallation."
253,"Itcantherefore bedifficulttoaddnew
devices.Signalreflection atthetapscancausedegradation inquality.Thisdegradation
canbecontrolled bylimitingthenumberandspacingofdevicesconnected toagiven
lengthofcable.Addingnewdevicesmaytherefore requiremodification orreplacement
ofthebackbone."
254,"Inaddition, afaultorbreakinthebuscablestopsalltransmission, evenbetween
devicesonthesamesideoftheproblem."
255,"Thedamaged areareflectssignalsbackinthe
direction oforigin,creatingnoiseinbothdirections."
256,"Bustopology wastheoneofthefirsttopologies usedinthedesignofearlylocal­
areanetworks."
257,"Ethernet LANscanuseabustopology, buttheyarelesspopularnowfor
reasonswewilldiscussinChapter13."
258,"RingTopology Inaringtopology, eachdevicehasadedicated point-to-point con­
nectionwithonlythetwodevicesoneithersideofit.Asignalispassedalongthering
inonedirection, fromdevicetodevice,untilitreachesitsdestination."
259,"Eachdevicein
theringincorporates arepeater."
260,"Whenadevicereceives asignalintended foranother
device,itsrepeaterregenerates thebitsandpassesthemalong(seeFigure1.8)."
261,"Figure1.8Aringtopology connecting sixstations
Repeater
Repeater
RepeaterRepeater
RepeaterRepeater
Aringisrelatively easytoinstallandreconfigure."
262,"Eachdeviceislinkedtoonlyits
immediate neighbors (eitherphysically orlogically)."
263,"Toaddordeleteadevice requires
changing onlytwoconnections."
264,"Theonlyconstraints aremediaandtrafficconsider­
ations(maximum ringlengthandnumberofdevices)."
265,"Inaddition, faultisolation issim­
plified.Generally inaring,asignaliscirculating atalltimes.Ifonedevicedoesnot
receiveasignalwithinaspecified period,itcanissueanalarm.Thealarmalertsthe
networkoperator totheproblem anditslocation."
266,"However, unidirectional trafficcanbeadisadvantage."
267,"Inasimplering,abreakin
thering(suchasadisabled station)candisabletheentirenetwork."
268,"Thisweakness can
besolvedbyusingadualringoraswitchcapableofclosingoffthebreak.SECTION 1.2NETWORKS 13
Ringtopology wasprevalent whenIBMintroduced itslocal-area network Token
Ring.Today,theneedforhigher-speed LANshasmadethistopology lesspopular."
269,"HybridTopology Anetworkcanbehybrid.Forexample, wecanhaveamainstartopol­
ogywitheachbranchconnecting severalstationsinabustopology asshowninFigure1.9.
Figure1.9Ahybridtopology: astarbackbone withthreebusnetworks
Hub
Network Models
Computer networks arecreatedbydifferent entities.Standards areneededsothatthese
heterogeneous networks cancommunicate withoneanother.Thetwobest-known stan­
dardsaretheOSImodelandtheInternetmodel.InChapter2wediscussthesetwo
models.TheOSI(OpenSystems Interconnection) modeldefinesaseven-layer net­
work;theInternetmodeldefinesafive-layer network."
270,"ThisbookisbasedontheInternet
modelwithoccasional references totheOSImodel."
271,"Categories ofNetworks
Todaywhenwespeakofnetworks, wearegenerally referring totwoprimarycatego­
ries:local-area networks andwide-area networks."
272,"Thecategory intowhichanetwork
fallsisdetermined byitssize.ALANnormally coversanarealessthan2mi;aWANcan
beworldwide."
273,"Networks ofasizeinbetween arenormally referredtoasmetropolitan­
areanetworks andspantensofmiles."
274,"LocalAreaNetwork
Alocalareanetwork (LAN)isusuallyprivately ownedandlinksthedevicesinasingle
office,building, orcampus(seeFigure1.10).Depending ontheneedsofanorganization
andthetypeoftechnology used,aLANcanbeassimpleastwoPCsandaprinterin
someone's homeoffice;oritcanextendthroughout acompany andincludeaudioand
videoperipherals."
275,"Currently, LANsizeislimitedtoafewkilometers.14CHAPTER 1INTRODUCTION
Figure1.10AnisolatedIANconnecting 12computers toahubinacloset
Hub
LANsaredesigned toallowresources tobesharedbetween personal computers or
workstations."
276,"Theresources tobesharedcanincludehardware (e.g.,aprinter),software
(e.g.,anapplication program), ordata.Acommon example ofaLAN,foundinmany
business environments, linksaworkgroup oftask-related computers, forexample, engi­
neeringworkstations oraccounting PCs.Oneofthecomputers maybegivenalarge­
capacity diskdriveandmaybecomeaservertoclients.Software canbestoredonthis
centralserverandusedasneededbythewholegroup.Inthisexample, thesizeofthe
LANmaybedetermined bylicensing restrictions onthenumberofuserspercopyofsoft­
ware,orbyrestrictions onthenumberofuserslicensedtoaccesstheoperating system."
277,"Inaddition tosize,LANsaredistinguished fromothertypesofnetworks bytheir
transmission mediaandtopology."
278,"Ingeneral, agivenLANwilluseonlyonetypeof
transmission medium."
279,"Themostcommon LANtopologies arebus,ring,andstar."
280,"EarlyLANshaddataratesinthe4to16megabits persecond(Mbps)range.Today,
however, speedsarenormally 100or1000Mbps.LANsarediscussed atlengthin
Chapters 13, 14,and15."
281,Wireless LANsarethenewestevolution inLANtechnology.
282,"Wediscusswireless
LANsindetailinChapter14."
283,"WideAreaNetwork
Awideareanetwork(WAN)provides long-distance transmission ofdata,image,audio,
andvideoinformation overlargegeographic areasthatmaycomprise acountry,aconti­
nent,oreventhewholeworld.InChapters 17and18wediscusswide-area networks in
greaterdetail.AWANcanbeascomplex asthebackbones thatconnecttheInternetoras
simpleasadial-uplinethatconnects ahomecomputer totheInternet.Wenormally refer
tothefirstasaswitched WANandtothesecondasapoint-to-point WAN(Figure1.11)."
284,"Theswitched WANconnects theendsystems, whichusuallycomprise arouter(internet­
working connecting device)thatconnects toanotherLANorWAN.Thepoint-to-point
WANisnormally alineleasedfromatelephone orcableTVprovider thatconnects a
homecomputer orasmallLANtoanInternetserviceprovider (lSP).ThistypeofWAN
isoftenusedtoprovideInternetaccess.ComputerSECTION 1.2NETWORKS
Figure1.11WANs:aswitched WANandapoint-to-point WAN
a.Switched WAN
Point-te-point
 ~d::_:
WAN .c'.-- cu::J::W
~ii~~;-E=~~~· """",,~!j.,..;~,-,E::J
Modem Modem -
ISP
b.Point-to-point WAN15
ii
I
Anearlyexample ofaswitched WANisX.25,anetwork designed toprovidecon­
nectivity between end users.AswewillseeinChapter 18,X.25isbeinggradually
replaced byahigh-speed, moreefficientnetwork calledFrameRelay.Agoodexample
ofaswitched WANistheasynchronous transfermode(ATM)network, whichisanet­
workwithfixed-size dataunitpacketscalledcells.WewilldiscussATMinChapter18."
285,"Anotherexample ofWANs isthewirelessWANthatisbecoming moreandmorepopu­
lar.WediscusswirelessWANsandtheirevolution inChapter16."
286,"Metropolitan AreaNetworks
Ametropolitan areanetwork (MAN)isanetwork withasizebetween aLANanda
WAN.Itnormally coverstheareainsideatownoracity.Itisdesigned forcustomers
whoneedahigh-speed connectivity, normally totheInternet, andhaveendpoints
spreadoveracityorpartofcity.AgoodexampleofaMANisthepartofthetelephone
company network thatcanprovideahigh-speed DSLlinetothecustomer."
287,"Another
example isthecableTVnetwork thatoriginally wasdesigned forcableTV,buttoday
canalsobeusedforhigh-speed dataconnection totheInternet."
288,"WediscussDSLlines
andcableTVnetworks inChapter9."
289,"Interconnection ofNetworks: Internetwork
Today,itisveryraretoseeaLAN,aMAN,oraLANinisolation; theyarecon­
nectedtooneanother."
290,"Whentwoormorenetworks areconnected, theybecome an
internetwork, orinternet."
291,"Asanexample, assumethatanorganization hastwooffices,oneontheeastcoast
andtheotheronthewestcoast.Theestablished officeonthewestcoasthasabustopology
LAN;thenewlyopenedofficeontheeastcoasthasastartopology LAN.Thepresident of
thecompany livessomewhere inthemiddleandneedstohavecontroloverthecompany16CHAPTER 1INTRODUCTION
fromherhorne.Tocreateabackbone WANforconnecting thesethreeentities(two
LANsandthepresident's computer), aswitched WAN(operated byaserviceprovider
suchasatelecomcompany) hasbeenleased.ToconnecttheLANstothisswitched
WAN,however, threepoint-to-point WANsarerequired."
292,"Thesepoint-to-point WANs
canbeahigh-speed DSLlineofferedbyatelephone company oracablemodernline
offeredbyacableTVprovider asshowninFigure1.12."
293,"Figure1.12Aheterogeneous networkmadeoffourWANsandtwoLANs
President
1_...."
294,"..,',Mod,m
••Point-to-point:
WAN:•
MOdem~~'
•':,Point-to-point
':.WAN
••
~Point-to-point
~WAN."
295,"LAN
LAN
1.3THEINTERNET
TheInternethasrevolutionized manyaspectsofourdailylives.Ithasaffectedtheway
wedobusiness aswellasthewaywespendourleisuretime.Countthewaysyou've
usedtheInternetrecently."
296,"Perhapsyou'vesentelectronic mail(e-mail)toabusiness
associate, paidautilitybill,readanewspaper fromadistantcity,orlookedupalocal
movieschedule-all byusingtheInternet."
297,"Ormaybeyouresearched amedicaltopic,
bookedahotelreservation, chattedwithafellowTrekkie,orcomparison-shopped fora
car.TheInternetisacommunication systemthathasbroughtawealthofinformation to
ourfingertips andorganized itforouruse."
298,"TheInternetisastructured, organized system.Webeginwithabriefhistoryofthe
Internet.Wefollowwithadescription oftheInternettoday.SECTION 1.3THEINTERNET 17
ABriefHistory
Anetwork isagroupofconnected communicating devicessuchascomputers and
printers.Aninternet(notethelowercase letteri)istwoormorenetworks thatcancom­
municate witheachother.ThemostnotableinternetiscalledtheInternet (uppercase
letterI),acollaboration ofmorethanhundreds ofthousands ofinterconnected net­
works.Privateindividuals aswellasvariousorganizations suchasgovernment agen­
cies,schools,researchfacilities, corporations, andlibrariesinmorethan100countries
usetheInternet.Millionsofpeopleareusers.Yetthisextraordinary communication sys­
temonlycameintobeingin1969."
299,"Inthemid-1960s, mainframe computers inresearch organizations werestand­
alonedevices.Computers fromdifferent manufacturers wereunabletocommunicate
withoneanother.TheAdvanced Research Projects Agency(ARPA)intheDepart­
mentofDefense(DoD)wasinterested infindingawaytoconnectcomputers sothat
theresearchers theyfundedcouldsharetheirfindings, therebyreducing costsandelim­
inatingduplication ofeffort."
300,"In1967,atanAssociation forComputing Machinery (ACM)meeting, ARPApre­
senteditsideasforARPANET, asmallnetworkofconnected computers."
301,"Theideawas
thateachhostcomputer (notnecessarily fromthesamemanufacturer) wouldbe
attachedtoaspecialized computer, calledaninteiface message processor (IMP).The
IMPs,intum,wouldbeconnected tooneanother.EachIMPhadtobeabletocommu­
nicatewithotherIMPsaswellaswithitsownattachedhost."
302,"By1969,ARPANET wasareality.Fournodes,attheUniversity ofCalifornia at
LosAngeles(UCLA), theUniversity ofCalifornia atSantaBarbara(UCSB), Stanford
Research Institute(SRI),andtheUniversity ofUtah,wereconnected viatheIMPsto
formanetwork."
303,"Software calledtheNetwork ControlProtocol (NCP)provided com­
munication betweenthehosts."
304,"In1972,VintCerfandBobKahn,bothofwhomwerepartofthecoreARPANET
group,collaborated onwhattheycalledtheInternetting Projec1.CerfandKahn'sland­
mark1973paperoutlinedtheprotocols toachieveend-to-end deliveryofpackets.This
paperonTransmission ControlProtocol (TCP)included concepts suchasencapsula­
tion,thedatagram, andthefunctions ofagateway."
305,"Shortlythereafter, authorities madeadecision tosplitTCPintotwoprotocols:
Transmission ControlProtocol (TCP)andInternetworking Protocol (lP).IPwould
handledatagram routingwhileTCPwouldberesponsible forhigher-level functions
suchassegmentation, reassembly, anderrordetection."
306,"Theinternetworking protocol
becameknownasTCPIIP."
307,"TheInternetToday
TheInternethascomealongwaysincethe1960s.TheInternettodayisnotasimple
hierarchical structure.Itismadeupofmanywide-andlocal-area networks joinedby
connecting devicesandswitching stations.Itisdifficulttogiveanaccuraterepresen­
tationoftheInternetbecauseitiscontinually changing-new networks arebeing
added,existingnetworks areaddingaddresses, andnetworks ofdefunctcompanies are
beingremoved."
308,"TodaymostenduserswhowantInternetconnection usetheservicesof
Internet serviceproviders (lSPs).Thereareinternational serviceproviders, national18CHAPTER 1INTRODUCTION
serviceproviders, regionalserviceproviders, andlocalserviceproviders."
309,"TheInternet
todayisrunbyprivatecompanies, notthegovernment."
310,"Figure1.13showsaconceptual
(notgeographic) viewoftheInternet."
311,"Figure1.13Hierarchical organization oftheInternet
National
ISP
a.Structure ofanationalISP
National
ISP
National
ISP
b.Interconnection ofnationalISPs
International InternetServiceProviders
Atthetopofthehierarchy aretheinternational serviceproviders thatconnectnations
together."
312,"National InternetServiceProviders
Thenational Internet serviceproviders arebackbone networks createdandmain­
tainedby specialized companies."
313,"TherearemanynationalISPsoperating inNorth
America; someofthemostwellknownareSprintLink, PSINet,UUNetTechnology,
AGIS,andinternetMel.Toprovideconnectivity between theendusers,theseback­
bonenetworks areconnected bycomplex switching stations(normally runbyathird
party)callednetwork accesspoints(NAPs)."
314,"SomenationalISPnetworks arealso
connected tooneanotherbyprivateswitching stationscalledpeeringpoints.These
normally operateatahighdatarate(upto600Mbps).SECTION 1.4PROTOCOLS ANDSTANDARDS 19
Regional InternetServiceProviders
Regional internetserviceproviders orregionalISPsaresmallerISPsthatareconnected
tooneormorenationalISPs.Theyareatthethirdlevelofthehierarchy withasmaller
datarate."
315,"LocalInternetServiceProviders
LocalInternet serviceproviders providedirectservicetotheendusers.Thelocal
ISPscanbeconnected toregionalISPsordirectlytonationalISPs.Mostendusersare
connected tothelocalISPs.Notethatinthissense,alocalISPcanbeacompany that
justprovides Internetservices, acorporation withanetworkthatsuppliesservicestoits
ownemployees, oranonprofit organization, suchasacollegeorauniversity, thatruns
itsownnetwork."
316,"EachoftheselocalISPscanbeconnected toaregional ornational
serviceprovider."
317,"1.4PROTOCOLS ANDSTANDARDS
Inthissection,wedefinetwowidelyusedterms:protocols andstandards."
318,"First,we
defineprotocol, whichissynonymous withrule.Thenwediscussstandards, whichare
agreed-upon rules."
319,"Protocols
Incomputer networks, communication occursbetweenentitiesindifferent systems.An
entityisanythingcapableofsendingorreceiving information."
320,"However, twoentitiescan­
notsimplysendbitstreamstoeachotherandexpecttobeunderstood."
321,"Forcommunication
tooccur,theentitiesmustagreeonaprotocol."
322,"Aprotocolisasetofrulesthatgoverndata
communications."
323,"Aprotocoldefineswhatiscommunicated, howitiscommunicated, and
whenitiscommunicated."
324,"Thekeyelements ofaprotocolaresyntax,semantics, andtiming."
325,oSyntax.
326,"Thetermsyntaxreferstothestructure orformatofthedata,meaning the
orderinwhichtheyarepresented."
327,"Forexample, asimpleprotocolmightexpectthe
first8bitsofdatatobetheaddressofthesender,thesecond8bitstobetheaddress
ofthereceiver, andtherestofthestreamtobethemessage itself."
328,oSemantics.
329,Thewordsemantics referstothemeaning ofeachsectionofbits.
330,"Howisaparticular patterntobeinterpreted, andwhatactionistobetakenbased
onthatinterpretation?"
331,"Forexample, doesanaddressidentifytheroutetobetaken
orthefinaldestination ofthemessage?"
332,oTiming.
333,"Thetermtimingreferstotwocharacteristics: whendatashouldbesent
andhowfasttheycanbesent.Forexample, ifasenderproduces dataat100Mbps
butthereceivercanprocessdataatonly1Mbps,thetransmission willoverload the
receiverandsomedatawillbelost."
334,"Standards
Standards areessential increatingandmaintaining anopenandcompetitive marketfor
equipment manufacturers andinguaranteeing nationalandinternational interoperability
ofdataandtelecommunications technology andprocesses."
335,"Standards provideguidelines20CHAPTER 1INTRODUCTION
tomanufacturers, vendors,government agencies, andotherserviceproviders toensure
thekindofinterconnectivity necessary intoday'smarketplace andininternational com­
munications."
336,"Datacommunication standards fallintotwocategories: defacto(meaning
""byfact""or""byconvention"") anddejure(meaning ""bylaw""or""byregulation"")."
337,"oDefacto.Standards thathavenotbeenapproved byanorganized bodybuthave
beenadoptedasstandards throughwidespread usearedefactostandards."
338,"Defacto
standards areoftenestablished originally bymanufacturers whoseektodefinethe
functionality ofanewproductortechnology."
339,"oDejure.Thosestandards thathavebeenlegislated byanofficially recognized body
aredejurestandards."
340,"Standards Organizations
Standards aredeveloped throughthecooperation ofstandards creationcommittees,
forums,andgovernment regulatory agencies."
341,"Standards Creation Committees
Whilemanyorganizations arededicated totheestablishment ofstandards, datatele­
communications inNorthAmerica relyprimarily onthosepublished bythefollowing:
oInternational Organization forStandardization (ISO).TheISOisamultinational
bodywhosemembership isdrawnmainlyfromthestandards creationcommittees
ofvariousgovernments throughout theworld.TheISOisactiveindeveloping
cooperation intherealmsofscientific, technological, andeconomic activity."
342,"oInternational Telecommunication Union-Telecommunication Standards
Sector(ITU-T)."
343,"Bytheearly1970s,anumberofcountries weredefiningnational
standards fortelecommunications, buttherewasstilllittleinternational compati­
bility.TheUnitedNationsresponded byforming, aspartofitsInternational
Telecommunication Union(ITU),acommittee, theConsultative Committee
forInternational Telegraphy andTelephony (CCITT)."
344,"Thiscommittee was
devotedtotheresearchandestablishment ofstandards fortelecommunications in
generalandforphoneanddatasystemsinparticular."
345,"OnMarch1,1993,thename
ofthiscommittee waschanged totheInternational Telecommunication Union­
Telecommunication Standards Sector(ITU-T).oAmerican National Standards Institute (ANSI)."
346,"Despiteitsname,theAmerican
NationalStandards Instituteisacompletely private,nonprofit corporation notaffili­
atedwiththeU.S.federalgovernment."
347,"However, allANSIactivities areundertaken
withthewelfareoftheUnitedStatesanditscitizensoccupying primaryimportance."
348,oInstitute ofElectrical andElectronics Engineers (IEEE).
349,"TheInstitute of
Electrical andElectronics Engineers isthelargestprofessional engineering societyin
theworld.International inscope,itaimstoadvancetheory,creativity, andproduct
qualityinthefieldsofelectrical engineering, electronics, andradioaswellasinall
relatedbranches ofengineering."
350,"Asoneofitsgoals,theIEEEoverseesthedevelop­
mentandadoptionofinternational standards forcomputing andcommunications."
351,"oElectronic Industries Association (EIA).Aligned withANSI,theElectronic
Industries Association isanonprofit organization devotedtothepromotion ofSECTION 1.5RECOMMENDED READING 21
electronics manufacturing concerns."
352,"Itsactivities includepublicawareness education
andlobbying effortsinadditiontostandards development."
353,"Inthefieldofinformation
technology, theEIAhasmadesignificantcontributions bydefiningphysicalconnec­
tioninterfaces andelectronic signaling specifications fordatacommunication."
354,"Forums
Telecommunications technology development ismovingfasterthantheabilityofstan­
dardscommittees toratifystandards."
355,"Standards committees areprocedural bodiesand
bynatureslow-moving."
356,"Toaccommodate theneedforworkingmodelsandagreements
andtofacilitate thestandardization process,manyspecial-interest groupshavedevel­
opedforumsmadeupofrepresentatives frominterested corporations."
357,"Theforums
workwithuniversities anduserstotest,evaluate, andstandardize newtechnologies."
358,"By
concentrating theireffortsonaparticular technology, theforumsare abletospeed
acceptance anduseofthosetechnologies inthetelecommunications community."
359,"The
forumspresenttheirconclusions tothestandards bodies."
360,"Regulatory Agencies
Allcommunications technology issubjecttoregulation bygovernment agencies such
astheFederalCommunications Commission (FCC)intheUnitedStates.Thepur­
poseoftheseagencies istoprotectthepublicinterestbyregulating radio,television,
andwire/cable communications."
361,"TheFCChasauthority overinterstate andinterna­
tionalcommerce asitrelatestocommunications."
362,"Internet Standards
AnInternet standard isathoroughly testedspecification thatisusefultoandadhered
tobythosewhoworkwiththeInternet."
363,"Itisaformalized regulation thatmustbefol­
lowed.Thereisastrictprocedure bywhichaspecification attainsInternetstandard
status."
364,"A specification beginsasanInternetdraft.AnInternet draftisaworkingdocu­
ment(aworkinprogress) withnoofficialstatusanda6-month lifetime."
365,"Upon recom­
mendation fromtheInternetauthorities, adraftmaybepublished asaRequest for
Comment (RFC).EachRFCisedited,assigned anumber,andmadeavailable toall
interested parties.RFCsgothroughmaturity levelsandarecategorized according to
theirrequirement level."
366,"1.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsenclosed inbrackets[...]refertothereference listattheend
ofthebook."
367,"Books
Theintroductory materials coveredinthischaptercanbefoundin[Sta04]and[PD03]."
368,"[Tan03]discusses standardization inSection1.6.22CHAPTER 1INTRODUCTION
Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter."
369,"owww.acm.org/sigcomm/sos.html Thissitegivesthestatusofvarililusnetworking
standards."
370,owww.ietf.org/ TheInternetEngineering TaskForce(IETF)homepage.
371,"RFCs
Thefollowing sitelistsallRFCs,including thoserelatedtoIPandTCP.Infuturechap­
terswecitetheRFCspertinent tothechaptermaterial."
372,"owww.ietf.org/rfc.html
1.6KEYTERMS
Advanced Research Projects
Agency(ARPA)
American National Standards
Institute(ANSI)
American Standard Codefor
Information Interchange (ASCII)
ARPANET
audio
backbone
BasicLatin
bustopology
code
Consultative Committee for
International Telegraphy
andTelephony (CCITT)
data
datacommunications
defactostandards
dejurestandards
delay
distributed processing
Electronic Industries Association (EIA)
entity
FederalCommunications Commission
(FCC)forumfull-duplex mode,orduplex
half-duplex mode
hub
image
Institute
ofElectrical andElectronics
Engineers (IEEE)
International Organization for
Standardization (ISO)
International Telecommunication
Union-Telecommunication
Standards Sector(ITU-T)
Internet
Internetdraft
Internetserviceprovider (ISP)
Internetstandard
internetwork orinternet
localareanetwork(LAN)
localInternetserviceproviders
meshtopology
message
metropolitan areanetwork(MAN)
multipoint ormultidrop connection
nationalInternetserviceprovider
networknetworkaccesspoints(NAPs)
node
performance
physicaltopology
point-to-point connection
protocol
receiverregionalISP
reliability
RequestforComment (RFC)
ROB
ringtopology
security
semantics
1.7SUMMARYSECTION 1.7SUMMARY 23
sendersimplexmode
startopology
syntax
telecommunication
throughput
timing
Transmission ControlProtocol!
Internetworking Protocol (TCPIIP)
transmission medium
Unicode
video
wideareanetwork(WAN)
YCM
oDatacommunications arethetransferofdatafromonedevicetoanotherviasome
formoftransmission medium."
373,"oAdatacommunications systemmusttransmitdatatothecorrectdestination inan
accurateandtimelymanner."
374,"oThefivecomponents thatmakeupadatacommunications systemarethemessage,
sender,receiver, medium, andprotocol."
375,"oText,numbers, images,audio,andvideoaredifferent formsofinformation."
376,"oDataflowbetweentwodevicescanoccurinoneofthreeways:simplex,half-duplex,
orfull-duplex."
377,oAnetworkisasetofcommunication devicesconnected bymedialinks.
378,"oInapoint-to-point connection, twoandonlytwodevicesareconnected bya
dedicated link.Inamultipoint connection, threeormoredevicessharealink."
379,oTopology refers tothephysical orlogicalarrangement ofanetwork.
380,"Devicesmay
bearranged inamesh,star,bus,orringtopology."
381,oAnetworkcanbecategorized asalocalareanetworkorawideareanetwork.
382,"oALANisadatacommunication systemwithinabuilding, plant,orcampus, or
betweennearbybuildings.oAWANisadatacommunication systemspanning states,countries, orthewhole
world."
383,oAninternetisanetworkofnetworks.
384,oTheInternetisacollection ofmanyseparatenetworks.
385,"oTherearelocal,regional, national, andinternational Internetserviceproviders."
386,"oAprotocol isasetofrulesthatgoverndatacommunication; thekeyelements of
aprotocolaresyntax,semantics, andtiming.24CHAPTER 1INTRODUCTION
oStandards arenecessary toensurethatproducts fromdifferent manufacturers can
worktogetherasexpected."
387,"oTheISO,ITD-T,ANSI,IEEE,andEIAaresomeoftheorganizations involved
instandards creation."
388,"oForumsarespecial-interest groupsthatquicklyevaluate andstandardize new
technologies."
389,"oARequest forComment isanideaorconceptthatisaprecursor toanInternet
standard."
390,"1.8PRACTICE SET
ReviewQuestions
1.Identifythefivecomponents ofadatacommunications system."
391,2.Whataretheadvantages ofdistributed processing?
392,3.Whatarethethreecriterianecessary foraneffective andefficientnetwork?
393,"4.Whataretheadvantages ofamultipoint connection overapoint-to-point
connection?"
394,5.Whatarethetwotypesoflineconfiguration?
395,6.Categorize thefourbasictopologies intermsoflineconfiguration.
396,7.Whatisthedifference between half-duplex andfull-duplex transmission modes?
397,"8.Namethefourbasicnetworktopologies, andciteanadvantage ofeachtype."
398,"9.Forndevicesinanetwork, whatisthenumberofcablelinksrequired foramesh,
ring,bus,andstartopology?"
399,"10.Whataresomeofthefactorsthatdetermine whetheracommunication systemisa
LANorWAN?"
400,1I.Whatisaninternet?
401,WhatistheInternet?
402,12.Whyareprotocols needed?
403,13.Whyarestandards needed?
404,"Exercises
14.Whatisthemaximum numberofcharacters orsymbols thatcanberepresented by
Unicode?"
405,"15.Acolorimageuses16bitstorepresent apixel.Whatisthemaximum numberof
different colorsthatcanberepresented?"
406,16.Assumesixdevicesarearranged inameshtopology.
407,Howmanycablesareneeded?
408,Howmanyportsareneededforeachdevice?
409,"17.Foreachofthefollowing fournetworks, discusstheconsequences ifaconnection fails."
410,"a.Fivedevicesarranged inameshtopology
b.Fivedevicesarranged inastartopology (notcounting thehub)
c.Fivedevicesarranged inabustopology
d.Fivedevicesarranged inaringtopologySECTION 1.8PRACTICE SET 25
18.Youhavetwocomputers connected byanEthernet hubathome.IsthisaLAN,a
MAN,oraWAN?Explainyourreason."
411,"19.Intheringtopology inFigure1.8,whathappensifoneofthestationsisunplugged?"
412,"20.Inthebustopology inFigure1.7,whathappensifoneofthestationsisunplugged?"
413,21.Drawahybridtopology withastarbackbone andthreeringnetworks.
414,22.Drawahybridtopology witharingbackbone andtwobusnetworks.
415,"23.Performance isinversely relatedtodelay.WhenyouusetheInternet, whichofthe
following applications aremoresensitive todelay?"
416,"a.Sendingane-mail
b.Copying afile
c.SurfingtheInternet
24.Whenapartymakesalocaltelephone calltoanotherparty,isthisapoint-to-point
ormultipoint connection?"
417,Explainyouranswer.
418,25.Compare thetelephone networkandtheInternet.Whatarethesimilarities?
419,"What
arethedifferences?"
420,"Research Activities
26.Usingthesite\\iww.cne.gmu.edu/modules/network/osi.html, discusstheOSImodel."
421,"27.Usingthesitewww.ansi.org, discussANSI'sactivities."
422,"28.Usingthesitewww.ieee.org, discussIEEE'sactivities."
423,"29.Usingthesitewww.ietf.org/, discussthedifferent typesofRFCs.CHAPTER 2
Network Models
Anetworkisacombination ofhardware andsoftware thatsendsdatafromonelocation
toanother.Thehardware consistsofthephysical equipment thatcarriessignalsfrom
onepointofthenetworktoanother.The software consistsofinstruction setsthatmake
possibletheservicesthatweexpectfromanetwork."
424,"Wecancomparethetaskofnetworking tothetaskofsolvingamathematics problem
withacomputer."
425,"Thefundamental jobofsolvingtheproblem withacomputer isdone
bycomputer hardware."
426,"However, thisisaverytedioustaskifonlyhardware isinvolved."
427,"Wewouldneedswitches foreverymemory locationtostoreandmanipulate data.The
taskismucheasierifsoftware isavailable."
428,"Atthehighestlevel,aprogram candirect
theproblem-solving process;thedetailsofhowthisisdonebytheactualhardware can
belefttothelayersofsoftware thatarecalledbythehigherlevels."
429,Compare thistoaserviceprovided byacomputer network.
430,"Forexample, thetask
ofsendingane-mailfromonepointintheworldtoanothercanbebrokenintoseveral
tasks,eachperformed byaseparatesoftware package."
431,"Eachsoftware packageusesthe
servicesofanothersoftware package."
432,"Atthelowestlayer,asignal,orasetofsignals,is
sentfromthesourcecomputer tothedestination computer."
433,"Inthischapter,wegiveageneralideaofthelayersofanetwork anddiscussthe
functions ofeach.Detailed descriptions oftheselayersfollowinlaterchapters."
434,"2.1LAYERED TASKS
Weusetheconceptoflayersinourdailylife.Asanexample, letusconsider two
friendswhocommunicate throughpostalmaiLTheprocessofsendingalettertoa
friendwouldbecomplex iftherewerenoservicesavailable fromthepostoffice.Fig­
ure2.1showsthestepsinthistask."
435,"2728CHAPTER 2NETWORK MODELS
Figure2.1Tasksinvolved insendingaletter
Sender
tReceiver
t
I t
Theletteriswritten, Theletterispickedup,
putinanenvelope, and Higherlayers removed fromthe
droppedinamailbox."
436,"envelope, andread."
437,"I -,
Theletteriscarried Theletteriscarried
fromthemailbox Middlelayers fromthepostoffice
toapostoffice."
438,tothemailbox.
439,"I I
Theletterisdelivered Theletterisdelivered
toacarrierbythepost Lowerlayers fromthecarrier
office."
440,tothepostoffice.
441,"•II
Theparceliscarriedfrom
thesourcetothedestination."
442,"Sender,Receiver, andCarrier
InFigure2.1wehaveasender,areceiver, and acarrierthattransports theletter.There
isahierarchy oftasks."
443,"AttheSellderSite
Letusfirstdescribe, inorder,theactivities thattakeplaceatthesendersite."
444,"oHigherlayer.Thesenderwritestheletter,insertstheletterinanenvelope, writes
thesenderandreceiveraddresses, anddropstheletterinamailbox."
445,"oMiddlelayer.Theletterispickedupbyalettercarrieranddelivered tothepost
office."
446,oLowerlayer.Theletterissortedatthepostoffice;acarriertransports theletter.
447,"011theWay
Theletteristhenonitswaytotherecipient."
448,"Onthewaytotherecipient's localpost
office,thelettermayactuallygothroughacentraloffice.Inaddition, itmaybetrans­
portedbytruck,train,airplane, boat,oracombination ofthese."
449,"AttheReceiver Site
oLowerlayer.Thecarriertransports thelettertothepostoffice."
450,oMiddlelayer.Theletterissortedanddelivered totherecipient's mailbox.
451,"oHigherlayer.Thereceiverpicksuptheletter,openstheenvelope, andreadsit.SECTION 2.2THEOS!MODEL 29
Hierarchy
According toouranalysis, therearethreedifferent activities atthesendersiteand
anotherthreeactivities atthereceiversite.Thetaskoftransporting theletterbetween
thesenderandthereceiver isdonebythecarrier.Something thatisnotobvious
immediately isthatthetasksmustbedoneintheordergiveninthehierarchy."
452,"Atthe
sendersite,thelettermustbewrittenanddroppedinthemailboxbeforebeingpicked
upbythelettercarrieranddelivered tothepostoffice.Atthereceiversite,theletter
mustbedropped intherecipient mailbox beforebeingpickedupandreadbythe
recipient."
453,"Services
Eachlayeratthesendingsiteusestheservicesofthelayerimmediately belowit.The
senderatthehigherlayerusestheservicesofthemiddlelayer.Themiddlelayeruses
theservicesofthelowerlayer.Thelowerlayerusestheservicesofthecarrier."
454,"Thelayeredmodelthatdominated datacommunications andnetworking literature
before1990wastheOpenSystems Interconnection (OSI)model.Everyone believed
thattheOSImodelwouldbecometheultimatestandard fordatacommunications, but
thisdidnothappen.TheTCPIIPprotocolsuitebecamethedominant commercial archi­
tecturebecauseitwasusedandtestedextensively intheInternet; theOSImodelwas
neverfullyimplemented."
455,"Inthischapter,firstwebrieflydiscusstheOSImodel,andthenweconcentrate on
TCPIIPasaprotocolsuite."
456,"2.2THEOSIMODEL
Established in1947,theInternational Standards Organization (ISO)isamultinational
bodydedicated toworldwide agreement oninternational standards."
457,"AnISOstandard
thatcoversallaspectsofnetworkcommunications istheOpenSystemsInterconnection
model.Itwasfirstintroduced inthelate1970s.Anopensystemisasetofprotocols that
allowsanytwodifferent systemstocommunicate regardless oftheirunderlying archi­
tecture.ThepurposeoftheOSImodelistoshowhowtofacilitate communication
betweendifferent systemswithoutrequiring changestothelogicoftheunderlying hard­
wareandsoftware."
458,"TheOSImodelisnotaprotocol; itisamodelforunderstanding and
designing anetworkarchitecture thatisflexible,robust,andinteroperable."
459,ISOistheorganization.
460,OSIisthemodel.
461,"TheOSImodelisalayeredframework forthedesignofnetwork systemsthat
allowscommunication betweenalltypesofcomputer systems."
462,"Itconsistsofsevensep­
aratebutrelatedlayers,eachofwhichdefinesapartoftheprocessofmovinginformation
acrossanetwork(seeFigure2.2).Anunderstanding ofthefundamentals oftheOSI
modelprovides asolidbasisforexploring data communications.30CHAPTER 2NETWORK MODELS
Figure2.2SevenlayersoftheOSImodel
71Application
61Presentation
51Session
41Transport
31Network
21Datalink
1IPhysical
Layered Architecture
TheOSImodeliscomposed ofsevenorderedlayers:physical(layer1),datalink(layer2),
network (layer3),transport (layer4),session(layer5),presentation (layer6),and
application (layer7).Figure2.3showsthelayersinvolved whenamessage issentfrom
deviceAtodeviceB.Asthemessage travelsfromAtoB,itmaypassthroughmany
intermediate nodes.Theseintermediate nodesusuallyinvolveonlythefirstthreelayers
oftheOSImodel."
463,"Indeveloping themodel,thedesigners distilledtheprocessoftransmitting datato
itsmostfundamental elements."
464,"Theyidentified whichnetworking functions hadrelated
usesandcollected thosefunctions intodiscretegroupsthatbecamethelayers.Each
layerdefinesafamilyoffunctions distinctfromthoseoftheotherlayers.Bydefining
andlocalizing functionality inthisfashion,thedesigners createdanarchitecture thatis
bothcomprehensive andflexible."
465,"Mostimportantly, theOSImodelallowscomplete
interoperability between otherwise incompatible systems."
466,"Withinasinglemachine, eachlayercallsupontheservicesofthelayerjustbelow
it.Layer3,forexample, usestheservicesprovided bylayer2andprovides servicesfor
layer4.Between machines, layerxononemachine communicates withlayerxon
anothermachine."
467,"Thiscommunication isgoverned byanagreed-upon seriesofrules
andconventions calledprotocols."
468,"Theprocesses oneachmachine thatcommunicate at
agivenlayerarecalledpeer-to-peer processes."
469,"Communication between machines is
therefore apeer-to-peer processusingtheprotocols appropriate toagivenlayer."
470,"Peer-to-Peer Processes
Atthephysical layer,communication isdirect:InFigure2.3,deviceAsendsastream
ofbitstodeviceB(through intermediate nodes).Atthehigherlayers,however, com­
munication mustmovedownthroughthelayersondeviceA,overtodeviceB,andthenSECTION 2.2THEOSIMODEL 31
Figure2.3Theinteraction betweenlayersintheOSImodel
Device
ADevice
B
Intermediate
nodeIntermediate
node
Peer-to-peer protocol Othlayer)
7Application ------------------------ Application 7
7-6interface 7-6interfacePeer-to-peer protocol(6thlayer)
6Presentation ------------------------ Presentation 6
6-5interface 6-5interfacePeer-to-peer protocol(5thlayer)
5 Session------------------------ Session 5
5-4interfacePeer-to-peer protocol(4thlayer)5-4interface
4 Transport ------------------------ Transport 4
4-3interface 4-3interface
3 Network Network 3
3-2interface 3-2interface
2 Datalink Datalink 2
2-1interface 2-1interface
Physical Physical
Physical communication
backupthroughthelayers.Eachlayerinthesendingdeviceaddsitsowninformation
tothemessage itreceivesfromthelayerjustaboveitandpassesthewholepackageto
thelayerjustbelowit."
471,"AtlayerItheentirepackageisconverted toaformthatcanbetransmitted tothe
receiving device.Atthereceiving machine, themessage isunwrapped layerbylayer,
witheachprocessreceiving andremoving thedatameantforit.Forexample, layer2
removesthedatameantforit,thenpassestheresttolayer3.Layer3thenremovesthe
datameantforitandpassestheresttolayer4,andsoon."
472,"Interfaces Between Layers
Thepassingofthedataandnetworkinformation downthroughthelayersofthesend­
ingdeviceandbackupthroughthelayersofthereceiving deviceismadepossibleby
aninterface betweeneachpairofadjacentlayers.Eachinterface definestheinforma­
tionandservicesalayermustprovideforthelayeraboveit.Well-defined interfaces and
layerfunctions providemodularity toanetwork."
473,"Aslongasalayerprovides the
expected servicestothelayeraboveit,thespecificimplementation ofitsfunctions can
bemodified orreplaced withoutrequiring changestothesurrounding layers."
474,"Organization oftheLayers
Thesevenlayerscanbethoughtofasbelonging tothreesubgroups."
475,"LayersI,2,and
3-physical, datalink,andnetwork-are thenetworksupportlayers;theydealwith32CHAPTER 2NETWORK MODELS
thephysical aspectsofmovingdatafromonedevicetoanother(suchaselectrical
specifications, physical connections, physical addressing, andtransport timingand
reliability)."
476,"Layers5,6,and7-session, presentation, andapplication-can be
thoughtofastheusersupportlayers;theyallowinteroperability amongunrelated
software systems."
477,"Layer4,thetransport layer,linksthetwosubgroups andensures
thatwhatthelowerlayershavetransmitted isinaformthattheupperlayerscanuse."
478,"TheupperOSIlayersarealmostalwaysimplemented insoftware; lowerlayersarea
combination ofhardware andsoftware, exceptfor thephysical layer,whichismostly
hardware."
479,"InFigure2.4,whichgivesanoverallviewoftheOSIlayers,D7meansthedata
unitatlayer7,D6meansthedataunitatlayer6,andsoon.Theprocessstartsatlayer
7(theapplication layer),thenmovesfromlayertolayerindescending, sequential
order.Ateachlayer,aheader,orpossibly atrailer,canbeaddedtothedataunit."
480,"Commonly, thetrailerisaddedonlyatlayer2.Whentheformatted dataunitpasses
throughthephysical layer(layer1),itischangedintoanelectromagnetic signaland
transported alongaphysicallink."
481,"Figure2.4Anexchange usingtheOS!model
:HiiD7l
t---~
~~§JD6I
:Hs-1D5Ir-_J
:H4j D4Ir---.------
:-HilD3Ir--J---=-=----
:HiJ D2 ~.j!
1-- - .10--1
:_~i§j010101010101101010000010000 I
Trn"",m;""io"" =dium1~
~ D6I
~ D5I
~ D4I
~ D3I
~ D2 •
@IQj010101010101101010000010000 I
L..."
482,"Uponreaching itsdestination, thesignalpassesintolayer1andistransformed
backintodigitalform.ThedataunitsthenmovebackupthroughtheOSIlayers.As
eachblockofdatareachesthenexthigherlayer,theheadersandtrailersattachedtoitat
thecorresponding sendinglayerareremoved, andactionsappropriate tothatlayerare
taken.By thetimeitreacheslayer7,themessage isagaininaformappropriate tothe
application andismadeavailable totherecipient.SECTION 2.3LAYERS INTHEOSIMODEL 33
Encapsulation
Figure2.3revealsanotheraspectofdatacommunications intheOSImodel:encapsula­
tion.Apacket(headeranddata)atlevel7isencapsulated inapacketatlevel6.The
wholepacketatlevel6isencapsulated inapacketatlevel5,andsoon."
483,"Inotherwords,thedataportionofapacketatlevelN-1carriesthewholepacket
(dataandheaderandmaybetrailer)fromlevelN.Theconceptiscalledencapsulation;
levelN-1isnotawareofwhichpartoftheencapsulated packetisdataandwhichpart
istheheaderortrailer.ForlevelN-1,thewholepacketcomingfromlevelNistreated
asoneintegralunit."
484,"2.3LAYERS INTHEOSIMODEL
Inthissectionwebrieflydescribethefunctions ofeachlayerintheOSImodel."
485,"Physical Layer
Thephysicallayercoordinates thefunctions requiredtocarryabitstreamoveraphysi­
calmedium.Itdealswiththemechanical andelectrical specifications oftheinterface and
transmission medium.Italsodefinestheprocedures andfunctions thatphysicaldevices
andinterfaces havetoperformfortransmission toOccur.Figure2.5showsthepositionof
thephysicallayerwithrespecttothetransmission mediumandthedatalinklayer."
486,"Figure2.5Physical layer
Fromdatalinklayer Todatalinklayer
Physical
layerPhysical
layer
Transmission medium
Thephysicallayerisresponsible formovements of
individual bitsfromonehop(node)tothenext."
487,"Thephysicallayerisalsoconcerned withthefollowing:
oPhysical characteristics ofinterfaces andmedium."
488,"Thephysical layerdefines
thecharacteristics oftheinterface between thedevicesandthetransmission
medium.Italsodefinesthetypeoftransmission medium."
489,"oRepresentation ofbits.Thephysical layerdataconsists ofastreamofbits
(sequence ofOsor1s)withnointerpretation."
490,"Tobetransmitted, bitsmustbe34CHAPTER 2NETWORK MODELS
encoded intosignals--electrical oroptical.Thephysical layerdefinesthetypeof
encoding (howOsandIsarechangedtosignals)."
491,"oDatarate.Thetransmission rate-the numberofbitssenteachsecond-is also
definedbythephysicallayer.Inotherwords,thephysical layerdefinesthedura­
tionofabit,whichishowlongitlasts."
492,"oSynchronization ofbits.Thesenderandreceivernotonlymustusethesamebit
ratebutalsomustbesynchronized atthebitlevel.Inotherwords,thesenderand
thereceiverclocksmustbesynchronized."
493,oLineconfiguration.
494,"Thephysical layerisconcerned withtheconnection of
devicestothemedia.Inapoint-to-point configuration, twodevicesareconnected
throughadedicated link.Inamultipoint configuration, alinkissharedamong
severaldevices."
495,oPhysical topology.
496,"Thephysical topology defineshowdevicesareconnected to
makeanetwork."
497,"Devicescanbeconnected byusingameshtopology (everydevice
isconnected toeveryotherdevice), a startopology (devicesareconnected through
acentraldevice),aringtopology (eachdeviceisconnected tothenext,forminga
ring),abustopology (everydeviceisonacommon link),orahybridtopology (this
isacombination oftwoormoretopologies)."
498,"oTransmission mode.Thephysicallayeralso defines thedirectionoftransmission
betweentwodevices:simplex, half-duplex, orfull-duplex."
499,"Insimplexmode,only
onedevicecansend;theothercanonlyreceive.Thesimplexmodeisaone-way
communication."
500,"Inthehalf-duplex mode,twodevicescansendandreceive,but
notatthesametime.Inafull-duplex (orsimplyduplex)mode,twodevicescan
sendandreceiveatthesametime."
501,"DataLinkLayer
Thedatalinklayertransforms thephysicallayer,arawtransmission facility,toareli­
ablelink.Itmakesthephysical layerappearerror-free totheupperlayer(network
layer).Figure2.6showstherelationship ofthedatalinklayertothenetworkandphys­
icallayers."
502,"Figure2.6Datalinklayer
Fromnetworklayer
Datalinklayer
TophysicallayerH2Tonetworklayer
Datalinklayer
FromphysicallayerSECTION 2.3LAYERS INTHEOSIMODEL 35
Thedatalinklayerisresponsible formovingframesfromonehop(node)tothenext."
503,"Otherresponsibilities ofthedatalinklayerincludethefollowing:
[IFraming."
504,"Thedatalinklayerdividesthestreamofbitsreceivedfromthenetwork
layerintomanageable dataunitscalledframes."
505,oPhysical addressing.
506,"Ifframesaretobedistributed todifferent systemsonthe
network, thedatalinklayeraddsaheadertotheframetodefinethesenderand/or
receiveroftheframe.Iftheframeisintended forasystemoutsidethesender's
network, thereceiveraddressistheaddressofthedevicethatconnects thenetwork
tothenextone."
507,DFlowcontrol.
508,"Iftherateatwhichthedataareabsorbed bythereceiverislessthan
therateatwhichdataareproduced inthesender,thedatalinklayerimposesaflow
controlmechanism toavoidoverwhelming thereceiver."
509,oErrorcontrol.
510,"Thedatalinklayeraddsreliability tothephysicallayerbyadding
mechanisms todetectandretransmit damaged orlostframes.Italsousesamecha­
nismtorecognize duplicate frames.Errorcontrolisnormally achieved througha
traileraddedtotheendoftheframe."
511,DAccesscontrol.
512,"Whentwoormoredevicesareconnected tothesamelink,data
linklayerprotocols arenecessary todetermine whichdevicehascontroloverthe
linkatanygiventime."
513,Figure2.7illustrates hop-to-hop (node-to-node) delivery bythedatalinklayer.
514,"Figure2.7Hop-fa-hop delivery
End
system
r
LinkLink
AEnd
system
rEnd
system
EF
Hop-ta-hop delivery Hop-to-hop delivery Hop-to-hop delivery
A B E F
Datalink Datalink Datalink
Physical Physical Physical
Hop-to-hop delivery Hop-to-hop delivery Hop-to-hop delivery
Asthefigureshows,communication atthedatalinklayer occurs between two
adjacent nodes.TosenddatafromAtoF,threepartialdeliveries aremade.First,the
datalinklayeratAsendsaframetothedatalinklayeratB(arouter).Second,thedata36CHAPTER 2NETWORK MODELS
linklayeratBsendsanewframetothedatalinklayeratE.Finally,thedatalinklayer
atEsendsanewframetothedatalinklayeratF.Notethattheframesthatare
exchanged betweenthethreenodeshavedifferentvaluesintheheaders.Theframefrom
AtoBhasBasthedestination addressandAasthesourceaddress.TheframefromBto
EhasEasthedestination addressandBasthesourceaddress.TheframefromEtoF
hasFasthedestination addressandEasthesourceaddress.Thevaluesofthetrailers
canalsobedifferentiferrorchecking includestheheaderoftheframe."
515,"Network Layer
Thenetwork layerisresponsible forthesource-to-destination deliveryofapacket,
possibly acrossmultiple networks (links).Whereas thedatalinklayeroversees the
deliveryofthepacket between twosystemsonthesamenetwork(links),thenetwork
layerensuresthateachpacketgetsfromitspointoforigintoitsfinaldestination."
516,"Iftwosystemsareconnected tothesamelink,thereisusuallynoneedforanet­
worklayer.However, ifthetwosystemsareattachedtodifferent networks (links)with
connecting devicesbetweenthenetworks (links),thereisoftenaneedforthenetwork
layertoaccomplish source-to-destination delivery.Figure2.8showstherelationship of
thenetworklayertothedatalinkandtransport layers."
517,"Figure2.8Network layer
Fromtransport layer
I
1 -,,-_1
~: Data .1Packet
I ITotransport layer..."
518,"I
',,---H-3--_]1.."
519,".j I
.Data,."
520,"Packeti------'-----'-------1
Network
layer...,
TodatalinklayerNetwork
layer
Fromdatalinklayer
Thenetworklayerisresponsible forthedeliveryofindividual
packetsfromthesourcehosttothedestination host."
521,"Otherresponsibilities ofthenetworklayerincludethefollowing:
oLogicaladdressing."
522,"Thephysicaladdressing implemented bythedatalinklayer
handlestheaddressing problemlocally.Ifapacketpassesthenetworkboundary,
weneedanotheraddressing systemtohelpdistinguish thesourceanddestination
systems."
523,"Thenetworklayeraddsaheadertothepacketcomingfromtheupper
layerthat,amongotherthings,includes thelogicaladdresses ofthesenderand
receiver."
524,Wediscusslogicaladdresses laterinthischapter.
525,oRouting.
526,"Whenindependent networks orlinksareconnected tocreateintemetworks
(network ofnetworks) oralargenetwork, theconnecting devices(calledroutersSECTION 2.3LAYERS INTHEOSIMODEL 37
orswitches) routeorswitchthepacketstotheirfinaldestination."
527,"Oneofthefunc­
tionsofthenetworklayeristoprovidethismechanism."
528,Figure2.9illustrates end-to-end deliverybythenetworklayer.
529,"Figure2.9Source-to-destination delivery
End
system
r
LinkIntermediate
systemAEnd
system
rEnd
system
r
EF
HOP-lO-hop delivery Hop-to-hop delivery HOp-lO-hop delivery
Source-to-destination delivery
A B E F
Network-Network-Network
Datalink Datalink Datalink
Physical Physical Physical
I.Source-to-destination delivery,I
Asthefigureshows,nowweneedasource-to-destination delivery."
530,"Thenetworklayer
atAsendsthepackettothenetworklayeratB.WhenthepacketarrivesatrouterB,the
routermakesadecisionbasedonthefinaldestination (F)ofthepacket.Aswewillsee
inlaterchapters, routerBusesitsroutingtabletofindthatthenexthopisrouterE.The
networklayeratB,therefore, sendsthepackettothenetworklayeratE.Thenetwork
layeratE,intum,sendsthepackettothenetworklayeratF."
531,"Transport Layer
Thetransport layerisresponsible forprocess-to-process delivery oftheentiremes­
sage.Aprocessisanapplication programrunningonahost.Whereas thenetworklayer
oversees source-to-destination delivery ofindividual packets,itdoesnotrecognize
anyrelationship between thosepackets.Ittreatseachoneindependently, asthough
eachpiecebelonged toaseparatemessage, whetherornotitdoes.Thetransport layer,
ontheotherhand,ensuresthatthewholemessagearrivesintactandinorder,overseeing
botherrorcontrolandflowcontrolatthesource-to-destination level.Figure2.10shows
therelationship ofthetransport layertothenetworkandsessionlayers.38CHAPTER 2NETWORK MODELS
Figure2.10Transport layer
Fromsessionlayer Tosessionlayer
\
\
\
\
Transport
layerSegments
Fromnetworklayer/
/
CH!lDataI
I I
Tonetworklayer/ / I I \ \
IH4(DatarIH4fDatarIH4)Data1
I II II I
Segments
Transport
layer
Thetransport layerisresponsible forthedeliveryofamessagefromoneprocesstoanother."
532,"Otherresponsibilities ofthetransport layerincludethefollowing:
oService-point addressing."
533,"Computers oftenrunseveralprograms atthesame
time.Forthisreason,source-to-destination deliverymeansdeliverynotonlyfrom
onecomputer tothenextbutalsofromaspecificprocess(running program) on
onecomputer toaspecificprocess(running program) ontheother.Thetransport
layerheadermusttherefore includeatypeofaddresscalledaservice-point
address(orportaddress)."
534,"Thenetwork layergetseachpackettothecorrect
computer; thetransport layergetstheentiremessage tothecorrectprocesson
thatcomputer.oSegmentation andreassembly."
535,"Amessageisdividedintotransmittable segments,
witheachsegmentcontaining asequence number.Thesenumbersenablethetrans­
portlayertoreassemble themessagecorrectly uponarrivingatthedestination and
toidentifyandreplacepacketsthatwerelostintransmission."
536,oConnection control.
537,"Thetransportlayercanbeeitherconnectionless orconnection­
oriented."
538,"Aconnectionless transport layertreatseachsegmentasanindependent
packetanddeliversittothetransport layeratthedestination machine."
539,"Aconnection­
orientedtransport layermakesaconnection withthetransport layeratthedestina­
tionmachine firstbeforedelivering thepackets.Afterallthedataaretransferred,
theconnection isterminated."
540,oFlowcontrol.
541,"Likethedatalinklayer,thetransport layerisresponsible forflow
control.However, flowcontrolatthislayerisperformed endtoendratherthan
acrossasinglelink."
542,oErrorcontrol.
543,"Likethedatalinklayer,thetransport layerisresponsible for
errorcontrol."
544,"However, errorcontrolatthislayerisperformed process-to­
processratherthanacrossasinglelink.Thesendingtransport layermakessure
thattheentiremessage arrivesatthereceiving transport layerwithouterror
(damage, loss,orduplication)."
545,"Errorcorrection isusuallyachieved through
retransmission.SECTION 2.3LAYERS INTHEOSIMODEL 39
Figure2.11illustrates process-to-process deliverybythetransport layer."
546,"Figure2.11Reliable process-to-process deliveryofamessage
Processes Processes
\
\
\
\
\
\
)-----~~~~'C)\\
\
\
\
\
\
\
\
~AninternetI
I
I,,,
,/~~~~,....-----<
, I I
/ I I
,I-.I.----------------------.J.I
/ I Network layer I
, Host-to-host deliveryL
Transport layer
Process-to-process delivery
SessionLayer
Theservicesprovided bythefirstthreelayers(physical, datalink,andnetwork) are
notsufficient forsomeprocesses."
547,Thesessionlayeristhenetworkdialogcontroller.
548,"Itestablishes, maintains, andsynchronizes theinteraction amongcommunicating
systems."
549,Thesessionlayerisresponsible fordialogcontrolandsynchronization.
550,"Specificresponsibilities ofthesessionlayerincludethefollowing:
oDialogcontrol."
551,"Thesessionlayerallowstwosystemstoenterintoadialog.It
allowsthecommunication between twoprocesses totakeplaceineitherhalf­
duplex(onewayatatime)orfull-duplex (twowaysatatime)mode."
552,oSynchronization.
553,"Thesessionlayerallowsaprocesstoaddcheckpoints, orsyn­
Chronization points,toastreamofdata.Forexample, ifasystemissendingafile
of2000pages,itisadvisable toinsertcheckpoints afterevery100pagestoensure
thateach100-page unitisreceivedandacknowledged independently."
554,"Inthiscase,
ifacrashhappensduringthetransmission ofpage523,theonlypagesthatneedto
beresentaftersystemrecovery arepages501to523.Pagesprevious to501need
notberesent.Figure2.12illustrates therelationship ofthesessionlayertothe
transport andpresentation layers."
555,"Presentation Layer
Thepresentation layerisconcerned withthesyntaxandsemantics oftheinformation
exchanged betweentwosystems."
556,"Figure2.13showstherelationship betweenthepre­
sentation layerandtheapplication andsessionlayers.40CHAPTER 2NETWORK MODELS
Figure2.12Sessionlayer
II II
1/ II I
I I II I•,I
I~')~:{~ ~,
r'~""''' 9~,
I
syn syn syn
ITopresentation layer
~i
1-,
I
I
I
I
I
II
I
IFrompresentation layer
1I
/ ;f t
/ I~ II
~.•.l
syn syn syn
1
Session
layerSession
layer
Totransport layer Fromtransport layer
Figure2.13Presentation layer
Fromapplication layer
IToapplication layer.."
557,"I
;.......,.1 --1
~l...,i""J)8,tfi~~.,.J
I I
Presentation
layer..."
558,"TosessionlayerPresentation
layer
Fromsessionlayer
Thepresentation layerisresponsible fortranslation, compression, andencryption."
559,"Specificresponsibilities ofthepresentation layerincludethefollowing:
oTranslation."
560,"Theprocesses (running programs) intwosystemsareusuallyexchang­
inginformation intheformofcharacter strings,numbers, andsoon.Theinfonna­
tionmustbechanged tobitstreamsbeforebeingtransmitted."
561,"Because different
computers usedifferent encoding systems, thepresentation layerisresponsible for
interoperability between thesedifferent encoding methods."
562,"Thepresentation layer
atthesenderchanges the information fromitssender-dependent formatintoa
common format.Thepresentation layer atthereceiving machine changes the
common formatintoitsreceiver-dependent format."
563,oEncryption.
564,"Tocarrysensitive information, asystemmustbeabletoensure
privacy.Encryption meansthatthesendertransforms theoriginalinformation toSECTION 2.3LAYERS INTHEOSIMODEL 41
anotherformandsendstheresulting message outoverthenetwork."
565,"Decryption
reversestheoriginalprocesstotransform themessagebacktoitsoriginalform."
566,oCompression.
567,"Datacompression reducesthenumberofbitscontained inthe
information."
568,"Datacompression becomes particularly important inthetransmission
ofmultimedia suchastext,audio,andvideo."
569,"Application Layer
Theapplication layerenablestheuser,whetherhumanorsoftware, toaccessthenet­
work.Itprovides userinterfaces andsupportforservices suchaselectronic mail,
remotefileaccessandtransfer,shareddatabasemanagement, andothertypesofdistrib­
utedinformation services."
570,"Figure2.14showstherelationship oftheapplication layertotheuserandthepre­
sentation layer.Ofthemanyapplication servicesavailable, thefigureshowsonlythree:
XAOO(message-handling services), X.500(directory services), andfiletransfer,
access,andmanagement (FTAM)."
571,"TheuserinthisexampleemploysXAOOtosendan
e-mailmessage."
572,"Figure2.14Application layer
Data' ~:.User
(humanorprogram)
Application
layer
Topresentation layerUser
(humanorprogram)
Application
layer
Frompresentation layer
Theapplication layerisresponsible forproviding servicestotheuser."
573,"Specificservicesprovided bytheapplication layerincludethefollowing:
oNetwork virtualterminal."
574,"Anetworkvirtualterminal isasoftware versionof
aphysicalterminal, anditallowsausertologontoaremotehost.Todoso,the
application createsasoftware emulation ofaterminal attheremotehost.The
user'scomputer talkstothesoftware terminal which,inturn,talkstothehost,
andviceversa.Theremotehostbelievesitiscommunicating withoneofitsown
terminals andallowstheusertologon.42CHAPTER 2NETWORK MODELS
oFiletransfer, access,andmanagement."
575,"Thisapplication allowsausertoaccess
filesinaremotehost(tomakechangesorreaddata),toretrievefilesfromaremote
computer foruseinthelocalcomputer, andtomanageorcontrolfilesinaremote
computer locally."
576,oMailservices.
577,"Thisapplication provides thebasisfore-mailforwarding and
storage."
578,oDirectory services.
579,"Thisapplication provides distributed database sourcesand
accessforglobalinformation aboutvariousobjectsandservices."
580,"Summary ofLayers
Figure2.15showsasummary ofdutiesforeachlayer."
581,"Figure2.15Summary oflayers
Totranslate, encrypt,and
compress data
Toprovidereliableprocess-to­
processmessage deliveryand
errorrecovery
Toorganize bitsintoframes;
toprovidehop-to-hop deliveryApplication
Presentation
Session
Transport
Network
Datalink
PhysicalToallowaccesstonetwork
resources
Toestablish, manage, and
terminate sessions
Tomovepacketsfromsource
todestination; toprovide
internetworking
Totransmitbitsoveramedium;
toprovidemechanical and
electrical specifications
2.4TCP/IPPROTOCOL SUITE
TheTCPIIPprotocol suitewasdeveloped priortotheOSImodel.Therefore, thelay­
ersintheTCP/IPprotocol suitedonotexactlymatchthoseintheOSImodel.The
originalTCP/IPprotocol suitewasdefinedashavingfourlayers:host-to-network,
internet,transport, andapplication."
582,"However, whenTCP/IPiscompared toOSI,wecan
saythatthehost-to-network layerisequivalent tothecombination ofthephysicaland
datalinklayers.Theinternetlayerisequivalent tothenetworklayer,andtheapplica­
tionlayerisroughlydoingthejobofthesession,presentation, andapplication layers
withthetransport layerinTCPIIPtakingcareofpartofthedutiesofthesessionlayer."
583,"Sointhisbook,weassumethattheTCPIIPprotocolsuiteismadeoffivelayers:physi­
cal,datalink,network, transport, andapplication."
584,"Thefirstfourlayersprovidephysical
standards, networkinterfaces, internetworking, andtransport functions thatcorrespond
tothefirstfourlayersoftheOSImodel.ThethreetopmostlayersintheOSImodel,
however, arerepresented inTCPIIPbyasinglelayercalledtheapplication layer(see
Figure2.16).SECTION 2.4TCPIIPPROTOCOL SUITE 43
Figure2.16TCPIIPandOSImodel
IApplicationApplicationsJ
8GB8GBIPresentation ...]
ISession 1
ITransport___ SC_TP__!IL-.-__TC_P__II UD_P__II
IICMPIIIGMPI
NetworkIP(internet)
IRARPIIARPI
IDatalink
IPhysicalProtocols definedby
theunderlying networks
(host-to-network)J
1
TCP/IPisahierarchical protocolmadeupofinteractive modules, eachofwhich
provides aspecificfunctionality; however, themodulesarenotnecessarily interdepen­
dent.Whereas theOSImodelspecifies whichfunctions belongtoeachofitslayers,
thelayersoftheTCP/IPprotocol suitecontainrelatively independent protocols that
canbemixedandmatched depending ontheneedsofthesystem.Thetermhierarchi­
calmeansthateachupper-level protocol issupported byoneormorelower-level
protocols."
585,"Atthetransport layer,TCP/IPdefinesthreeprotocols: Transmission Control
Protocol (TCP),UserDatagram Protocol (UDP),andStreamControlTransmission
Protocol (SCTP).Atthenetwork layer,themainprotocol definedbyTCP/IPisthe
Internetworking Protocol (IP);therearealsosomeotherprotocols thatsupportdata
movement inthislayer."
586,"Physical andDataLinkLayers
Atthephysical anddatalinklayers,TCPIIPdoesnotdefineanyspecificprotocol."
587,"It
supportsallthestandardandproprietary protocols."
588,"AnetworkinaTCPIIPinternetwork
canbealocal-area networkorawide-area network."
589,"Network Layer
Atthenetworklayer(or,moreaccurately, theinternetwork layer),TCP/IPsupports
theInternetworking Protocol."
590,"IP,inturn,usesfoursupporting protocols: ARP,
RARP,ICMP,andIGMP.Eachoftheseprotocols isdescribed ingreaterdetailinlater
chapters.44CHAPTER 2NETWORK MODELS
Internetworking Protocol (IP)
TheInternetworking Protocol (IP)isthetransmission mechanism usedbytheTCP/IP
protocols."
591,Itisanunreliable andconnectionless protocol-a best-effort delivery service.
592,ThetermbesteffortmeansthatIPprovides noerrorchecking ortracking.
593,"IPassumes
theunreliability oftheunderlying layersanddoesitsbesttogetatransmission through
toitsdestination, butwithnoguarantees."
594,"IPtransports datainpacketscalleddatagrams, eachofwhichistransported sepa­
rately.Datagrams cantravelalongdifferent routesandcanarriveoutofsequence orbe
duplicated."
595,"IPdoesnotkeeptrackoftheroutesandhasnofacilityforreordering data­
gramsoncetheyarriveattheirdestination."
596,"Thelimitedfunctionality ofIPshouldnotbeconsidered aweakness, however."
597,"IP
provides bare-bones transmission functions thatfreetheusertoaddonlythosefacilities
necessary foragivenapplication andtherebyallowsformaximum efficiency."
598,"IPisdis­
cussedinChapter20."
599,"AddressResolution Protocol
TheAddress Resolution Protocol (ARP)isusedtoassociate alogicaladdresswitha
physical address.Onatypicalphysical network, suchasaLAN,eachdeviceonalink
isidentified byaphysicalorstationaddress,usually imprinted onthenetworkinterface
card(NIC).ARPisusedtofindthephysical addressofthenodewhenitsInternet
addressisknown.ARPisdiscussed inChapter21."
600,"ReverseAddressResolution Protocol
TheReverseAddress Resolution Protocol (RARP) allowsahosttodiscover itsInter­
netaddresswhenitknowsonlyitsphysical address.Itisusedwhenacomputer iscon­
nectedtoanetworkforthefirsttimeorwhenadisklesscomputer isbooted.Wediscuss
RARPinChapter21."
601,"InternetControlMessage Protocol
TheInternet Control Message Protocol (ICMP) isamechanism usedbyhostsand
gateways tosendnotification ofdatagram problems backtothesender.ICMPsends
queryanderrorreporting messages."
602,WediscussICMPinChapter21.
603,"InternetGroupMessage Protocol
TheInternet GroupMessage Protocol (IGMP) isusedtofacilitate thesimultaneous
transmission ofamessage toagroupofrecipients."
604,WediscussIGMPinChapter22.
605,"Transport Layer
Traditionally thetransport layerwasrepresented inTCP/IPbytwoprotocols: TCPand
UDP.IPisahost-to-host protocol, meaning thatitcandeliverapacketfromone
physical devicetoanother.UDPandTCParetransport levelprotocols responsible
fordeliveryofamessage fromaprocess(running program) toanotherprocess.Anew
transport layerprotocol, SCTP,hasbeendevisedtomeettheneedsofsomenewer
applications.SECTION 2.5ADDRESSING 45
UserDatagram Protocol
TheUserDatagram Protocol(UDP)isthesimplerofthetwostandardTCPIIPtransport
protocols."
606,"Itisaprocess-to-process protocol thataddsonlyportaddresses, checksum
errorcontrol,andlengthinformation tothedatafromtheupperlayer.UDPisdiscussed
inChapter23."
607,"Transmission ControlProtocol
TheTransmission ControlProtocol (TCP)provides fulltransport-layer servicesto
applications."
608,TCPisareliablestreamtransport protocol.
609,"Thetermstream,inthiscon­
text,meansconnection-oriented: Aconnection mustbeestablished betweenbothends
ofatransmission beforeeithercantransmitdata."
610,"Atthesendingendofeachtransmission, TCPdividesastreamofdataintosmaller
unitscalledsegments."
611,"Eachsegmentincludes asequence numberforreordering after
receipt,togetherwithanacknowledgment numberforthesegments received."
612,"Segments
arecarriedacrosstheinternetinsideofIPdatagrams."
613,"Atthereceiving end,TCPcol­
lectseachdatagram asitcomesinandreordersthetransmission basedonsequence
numbers."
614,TCPisdiscussed inChapter23.
615,"StreamControlTransmission Protocol
TheStreamControlTransmission Protocol (SCTP)provides supportfornewer
applications suchasvoiceovertheInternet.Itisatransport layerprotocol thatcom­
binesthebestfeaturesofUDPandTCP.WediscussSCTPinChapter23."
616,"Application Layer
Theapplication layerinTCPIIPisequivalent tothecombined session,presentation,
andapplication layersintheOSImodeLManyprotocols aredefinedatthislayer.We
covermanyofthestandardprotocols inlaterchapters."
617,"2.5ADDRESSING
Fourlevelsofaddresses areusedinaninternetemploying theTCP/IPprotocols:
physical (link)addresses, logical(IP)addresses, portaddresses, andspecific
addresses (seeFigure2.17)."
618,"Figure2.17Addresses inTCPIIP
Addresses
I
I I I I
Physical Logical Port Specific
addresses addresses addresses addresses46CHAPTER 2NETWORK MODELS
EachaddressisrelatedtoaspecificlayerintheTCPIIParchitecture, asshownin
Figure2.18."
619,"Figure2.18Relationship oflayersandaddresses inTCPIIP
Physical
addresses•Specific
addresses
•Port
addresses
..Logical
addressesI IIPand
otherprotocols
Underlying
~ physical ~
networks
Physical layerAppli""tio"" I,,"",II p=,=
 11-----.-'---..I
T""""portI,,"",IEJG[j~1-----.-'---..I
Network layer
Datalinklayer
Physical Addresses
Thephysicaladdress,alsoknownasthelinkaddress,istheaddressofanodeasdefined
byitsLANorWAN.Itisincluded intheframeusedbythedatalinklayer.Itisthe
lowest-level address."
620,"Thephysical addresses haveauthority overthenetwork(LANorWAN).Thesize
andformatoftheseaddresses varydepending onthenetwork."
621,"Forexample, Ethernet
usesa6-byte(48-bit)physical addressthatisimprinted onthenetworkinterface card
(NIC).LocalTalk (Apple), however, hasaI-bytedynamic addressthatchangeseach
timethestationcomesup."
622,"Example 2.1
InFigure2.19anodewithphysical address10sendsaframetoanodewithphysical address87."
623,"Thetwonodesareconnected byalink(bustopology LAN).Atthedatalinklayer,thisframe
contains physical (link)addresses intheheader.Thesearetheonlyaddresses needed.Therestof
theheadercontains otherinformation neededatthislevel.Thetrailerusuallycontains extrabits
neededforerrordetection."
624,"Asthefigureshows,thecomputer withphysical addresslOisthe
sender,andthecomputer withphysical address87isthereceiver."
625,"Thedatalinklayeratthe
senderreceivesdatafromanupperlayer.Itencapsulates thedatainaframe,addingaheaderand
atrailer.Theheader,amongotherpiecesofinformation, carriesthereceiverandthesenderphys­
ical(link)addresses."
626,"Notethatinmostdatalinkprotocols, thedestination address, 87inthis
case,comesbeforethesourceaddress(10inthiscase)."
627,"Wehaveshownabustopology foranisolatedLAN.Inabustopology, theframeispropa­
gatedinbothdirections (leftandright).Theframepropagated totheleftdieswhenitreachesthe
endofthecableifthecableendisterminated appropriately."
628,"Theframepropagated totherightisSECTION 2.5ADDRESSING 47
Figure2.19Physical addresses
53__Sender
__28
Destination addressdoes
notmatch;thepacketis
dropped
•••
LAN""Receiver
senttoeverystationonthenetwork."
629,"Eachstationwithaphysicaladdresses otherthan87drops
theframebecausethedestination addressintheframedoesnotmatchitsownphysicaladdress."
630,"Theintended destination computer, however, findsamatchbetweenthedestination addressinthe
frameanditsownphysicaladdress.Theframeischecked, theheaderandtraileraredropped, and
thedatapartisdecapsulated anddelivered totheupperlayer."
631,"Example 2.2
AswewillseeinChapter13,mostlocal-area networks usea48-bit(6-byte)physical address
writtenas12hexadecimal digits;everybyte(2hexadecimal digits)isseparated byacolon,as
shownbelow:
07:01:02:01 :2C:4B
A6-byte(12hexadecimal digits)physicaladdress
LogicalAddresses
Logicaladdresses arenecessary foruniversal communications thatareindependent of
underlying physical networks."
632,"Physical addresses arenotadequate inaninternetwork
environment wheredifferent networks canhavedifferent address formats.Auniversal
addressing systemisneededinwhicheachhostcanbeidentified uniquely, regardless
oftheunderlying physicalnetwork."
633,"Thelogicaladdresses aredesigned forthispurpose.AlogicaladdressintheInternet
iscurrently a32-bitaddressthatcanuniquely defineahostconnected totheInternet.No
twopubliclyaddressed andvisiblehostsontheInternetcanhavethesameIPaddress."
634,"Example 2.3
Figure2.20showsapartofaninternetwithtworoutersconnecting threeLANs.Eachdevice
(computer orrouter)hasapairofaddresses (logicalandphysical) foreachconnection."
635,"Inthis
case,eachcomputer isconnected toonlyonelinkandtherefore hasonlyonepairofaddresses."
636,"Eachrouter,however, isconnected tothreenetworks (onlytwoareshowninthefigure).Soeach
routerhasthreepairsofaddresses, oneforeachconnection."
637,"Although itmayobviousthateach
routermusthaveaseparatephysicaladdressforeachconnection, itmaynotbeobviouswhyit
needsalogicaladdressforeachconnection."
638,"WediscusstheseissuesinChapter22whenwedis­
cussrouting.48CHAPTER 2NETWORK MODELS
Figure2.20IPaddresses
AI10
LAN2
Toanother
network Y/55Toanother XJ44
network
Ph)sical
addl'esscs
changedLAN3-~~_~I~I
 JRouterll
~tE]
LAN1
P/95
Thecomputer withlogicaladdressAandphysical address10needstosenda
packettothecomputer withlogicaladdressPandphysical address95.Weuselettersto
showthelogicaladdresses andnumbers forphysical addresses, butnotethatbothare
actuallynumbers, aswewillseelaterinthechapter."
639,"Thesenderencapsulates itsdatainapacketatthenetworklayerandaddstwological
addresses (AandP).Notethatinmostprotocols, thelogicalsourceaddresscomesbefore
thelogicaldestination address(contrary totheorderofphysicaladdresses)."
640,"Thenetwork
layer,however, needstofindthephysicaladdressofthenexthopbeforethepacketcanbe
delivered."
641,"Thenetwork layerconsults itsroutingtable(seeChapter22)andfindsthe
logicaladdressofthenexthop(routerI)tobeF.TheARPdiscussed previously finds
thephysical addressofrouter1thatcorresponds tothelogicaladdressof20.Nowthe
networklayerpassesthisaddresstothedatalinklayer,whichintum,encapsulates the
packetwithphysicaldestination address20andphysicalsourceaddress10."
642,"Theframeisreceived byeverydeviceonLAN1,butisdiscarded byallexcept
router1,whichfindsthatthedestination physicaladdressintheframematcheswithits
ownphysicaladdress.Therouterdecapsulates thepacketfromtheframetoreadthelog­
icaldestination address P.Sincethelogicaldestination addressdoesnotmatchthe
router'slogicaladdress, therouterknowsthatthepacketneedstobeforwarded."
643,"TheSECTION 2.5ADDRESSING 49
routerconsultsitsroutingtableandARPtofindthephysicaldestination addressofthe
nexthop(router2),createsanewframe,encapsulates thepacket,andsendsittorouter2."
644,"Notethephysical addresses intheframe.Thesourcephysical addresschanges
from10to99.Thedestination physical addresschangesfrom20(router1physical
address)to33(router2physicaladdress)."
645,"Thelogicalsourceanddestination addresses
mustremainthesame;otherwise thepacketwillbelost."
646,Atrouter2wehaveasimilarscenario.
647,"Thephysicaladdresses arechanged, anda
newframeissenttothedestination computer."
648,"Whentheframereachesthedestination,
thepacketisdecapsulated."
649,"Thedestination logicaladdressPmatchesthelogicaladdress
ofthecomputer."
650,"Thedataaredecapsulated fromthepacketanddelivered totheupper
layer.Notethatalthough physical addresses willchangefromhoptohop,logical
addresses remainthesamefromthesourcetodestination."
651,"Therearesomeexceptions to
thisrulethatwediscoverlaterinthebook."
652,"Thephysical addresses willchangefromhoptohop,
butthelogicaladdresses usuallyremainthesame."
653,"PortAddresses
TheIPaddressandthephysical addressarenecessary foraquantityofdatatotravel
fromasourcetothedestination host.However, arrivalatthedestination hostisnotthe
finalobjective ofdatacommunications ontheInternet.Asystemthatsendsnothingbut
datafromonecomputer toanotherisnotcomplete."
654,"Today,computers aredevicesthat
canrunmultipleprocesses atthesametime.Theendobjective ofInternetcommunica­
tionisaprocesscommunicating withanotherprocess.Forexample, computer Acan
communicate withcomputer CbyusingTELNET."
655,"Atthesametime,computer Acom­
municates withcomputer BbyusingtheFileTransfer Protocol (FTP).Forthesepro­
cessestoreceivedatasimultaneously, weneedamethodtolabelthedifferent processes."
656,"Inotherwords,theyneedaddresses."
657,"IntheTCPIIParchitecture, thelabelassigned toa
processiscalledaportaddress.AportaddressinTCPIIPis16bitsinlength."
658,"Example 2.4
Figure2.21showstwocomputers communicating viatheInternet.Thesendingcomputer isrun­
ningthreeprocesses atthistimewith portaddresses a,b,andc.Thereceiving computer isrunning
twoprocesses atthistimewithportaddressesjandk.Processainthesendingcomputer needsto
communicate withprocessjinthereceiving computer."
659,"Notethatalthough bothcomputers are
usingthesameapplication, FTP,forexample, theportaddresses aredifferentbecauseoneisaclient
program andtheotherisaserverprogram, aswewillseeinChapter23.Toshowthatdatafrom
processaneedtobedelivered to process j,andnotk,thetransport layerencapsulates datafrom
theapplication layerinapacketandaddstwoportaddresses (aandj),sourceanddestination."
660,"The
packetfromthetransport layeristhenencapsulated inanotherpacketatthenetworklayerwith
logicalsourceanddestination addresses (AandP).Finally,thispacketisencapsulated inaframe
withthephysical source anddestination addresses ofthenexthop.Wehavenotshownthephysi­
caladdresses becausetheychangefromhoptohopinsidetheclouddesignated astheInternet."
661,"Notethatalthough physicaladdresses changefromhoptohop,logicalandportaddresses remain
thesamefromthesourcetodestination."
662,"Therearesomeexceptions tothisrulethatwediscuss
laterinthebook.50CHAPTER 2NETWORK MODELS
Figure2.21Portaddresses
abcDD
- - - - Datalinklayer- ---
InternetjkDD
Thephysicaladdresses changefromhoptohop,
butthelogicalandportaddresses usuallyremainthesame."
663,"Example 2.5
AswewillseeinChapter23,aportaddressisa16-bitaddressrepresented byonedecimalnum­
herasshown."
664,"753
A16-bitportaddressrepresented asonesinglenumber
SpecificAddresses
Someapplications haveuser-friendly addresses thataredesigned forthatspecificaddress."
665,"Examples includethee-mailaddress(forexample, forouzan@fhda.edu) andtheUniversal
Resource Locator(URL)(forexample, www.mhhe.com)."
666,"Thefirstdefinestherecipient of
ane-mail(seeChapter26);thesecondisusedtofindadocument ontheWorldWideWeb
(seeChapter27).Theseaddresses, however, getchanged tothecorresponding portand
logicaladdresses bythesendingcomputer, aswewillseeinChapter25."
667,"2.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsenclosed inbrackets, [...]refertothereference listatthe
endofthetext.SECTION 2.7KEYTERMS 51
Books
Network modelsarediscussed inSection1.3of[Tan03],Chapter2of[For06],Chapter2
of[Sta04],Sections 2.2and2.3of[GW04], Section1.3of[PD03],andSection1.7of
[KR05].Agooddiscussion aboutaddresses canbefoundinSection1.7of[Ste94]."
668,"Sites
Thefollowing siteisrelatedtotopicsdiscussed inthischapter."
669,owww.osi.org! Information aboutOS1.
670,"RFCs
Thefollowing sitelistsallRFCs,including thoserelatedtoIPandportaddresses."
671,"owww.ietLorg/rfc.html
2.7KEYTERMS
accesscontrol
AddressResolution Protocol (ARP)
application layer
best-effortdelivery
bits
connection control
datalinklayer
encoding
error
errorcontrol
flowcontrol
frame
header
hop-to-hop delivery
host-to-host protocol
interface
InternetControlMessage Protocol
(ICMP)
InternetGroupMessage Protocol(IGMP)
logicaladdressing
mailservice
networklayer
node-to-node delivery
opensystemOpenSystems Interconnection (OSI)
model
peer-to-peer process
physical addressing
physical layer
portaddress
presentation layer
process-to-process delivery
ReverseAddressResolution Protocol
(RARP)
routing
segmentationsessionlayer
source-to-destination delivery
StreamControlTransmission Protocol
(SCTP)
synchronization point
TCPIIPprotocol suite
trailer
Transmission ControlProtocol (TCP)
transmission rate
transport layer
transport levelprotocols
UserDatagram Protocol (UDP)52CHAPTER 2NETWORK MODELS
2.8SUMMARY
oTheInternational Standards Organization createdamodelcalledtheOpenSystems
Interconnection, whichallows diverse systemstocommunicate."
672,"UTheseven-layer OSImodelprovides guidelines forthedevelopment ofuniversally
compatible networking protocols."
673,"oThephysical, datalink,andnetworklayersarethenetworksupportlayers."
674,"oThesession,presentation, andapplication layersaretheusersupportlayers."
675,DThetransport layerlinksthenetworksupportlayersandtheusersupportlayers.
676,"oThephysical layercoordinates thefunctions required totransmitabitstreamover
aphysicalmedium."
677,"oThedatalinklayerisresponsible fordelivering dataunitsfromonestationtothe
nextwithouterrors."
678,"oThenetworklayerisresponsible forthesource-to-destination deliveryofapacket
acrossmultiplenetworklinks."
679,"[JThetransport layerisresponsible fortheprocess-to-process deliveryoftheentire
message."
680,"DThesessionlayerestablishes, maintains, andsynchronizes theinteractions between
communicating devices."
681,"UThepresentation layerensuresinteroperability between communicating devices
throughtransformation ofdataintoamutually agreeduponformat."
682,oTheapplication layerenablestheuserstoaccessthenetwork.
683,oTCP/IPisafive-layer hierarchical protocolsuitedeveloped beforetheOSImodel.
684,"UTheTCP/IPapplication layerisequivalent tothecombined session,presentation,
andapplication layersoftheOSImodel."
685,"UFourlevelsofaddresses areusedinaninternetfollowing theTCP/IPprotocols: phys­
ical(link)addresses, logical(IP)addresses, portaddresses, andspecificaddresses."
686,"oThephysical address,alsoknownasthelinkaddress,istheaddressofanodeas
definedbyitsLANorWAN."
687,"L,JTheIPaddressuniquely definesahostontheInternet."
688,UTheportaddressidentifies aprocessonahost.
689,oAspecificaddressisauser-friendly address.
690,"2.9PRACTICE SET
ReviewQuestions
I.ListthelayersoftheInternetmodel."
691,2.WhichlayersintheInternetmodelarethenetworksupportlayers?
692,3.WhichlayerintheInternetmodelistheusersupportlayer?
693,"4.Whatisthedifference betweennetworklayerdeliveryandtransport layerdelivery?SECTION 2.9PRACTICE SET 53
5.Whatisapeer-to-peer process?"
694,"6.Howdoesinformation getpassedfromonelayertothenextintheInternet
model?"
695,"7.Whatareheadersandtrailers,andhowdotheygetaddedandremoved?"
696,X.Whataretheconcerns ofthephysicallayerintheInternetmodel?
697,9.Whataretheresponsibilities ofthedatalinklayerintheInternetmodel?
698,10.Whataretheresponsibilities ofthenetworklayerintheInternetmodel?
699,II.Whataretheresponsibilities ofthetransport layerintheInternetmodel?
700,"12.Whatisthedifference between aportaddress,alogicaladdress,andaphysical
address?"
701,13.Namesomeservicesprovided bytheapplication layerintheInternetmodel.
702,14.HowdothelayersoftheInternetmodelcorrelate tothelayersoftheOSImodel?
703,"Exercises
15.HowareOSIandISOrelatedtoeachother?"
704,"16.Matchthefollowing tooneormorelayersoftheOSImodel:
a.Routedetermination
b.Flowcontrol
c.Interface totransmission media
d.Provides accessfortheenduser
I7.Matchthefollowing tooneormorelayersoftheOSImodel:
a.Reliableprocess-to-process message delivery
b.Routeselection
c.Definesframes
d.Provides userservicessuchase-mailandfiletransfer
e.Transmission ofbitstreamacrossphysicalmedium
\8.Matchthefollowing tooneormorelayersoftheOSlmodel:
a.Communicates directlywithuser'sapplication program
b.Errorcorrection andretransmission
c.Mechanical, electrical, andfunctional interface
d.Responsibility forcarryingframesbetweenadjacentnodes
I9.Matchthefollowing tooneormorelayersoftheOSImodel:
a.Formatandcodeconversion services
b.Establishes, manages, andterminates sessions
c.Ensuresreliabletransmission ofdata
d.Log-inandlog-outprocedures
e.Provides independence fromdifferences indatarepresentation
20.InFigure2.22,computer Asendsamessage tocomputer DviaLANl,routerRl,
andLAN2.Showthecontentsofthepacketsandframesatthenetworkanddata
linklayerforeachhopinterface.54CHAPTER 2NETWORK MODELS
Figure2.22Exercise 20
Sender 8/42
LAN1Rl
LAN2Sender
21.InFigure2.22,assumethatthecommunication isbetween aprocessrunningat
computer Awithportaddressiandaprocessrunningatcomputer Dwithport
addressj.Showthecontentsofpacketsandframesatthenetwork, datalink,and
transport layerforeachhop."
705,22.Suppose acomputer sendsaframetoanothercomputer onabustopology LAN.
706,Thephysicaldestination addressoftheframeiscorrupted duringthetransmission.
707,Whathappenstotheframe?Howcanthesenderbeinformed aboutthesituation?
708,"23.Suppose acomputer sendsapacketatthenetwork layertoanothercomputer
somewhere intheInternet."
709,"Thelogicaldestination addressofthepacketiscor­
rupted.Whathappenstothepacket?Howcanthesourcecomputer beinformed of
thesituation?"
710,"24.Suppose acomputer sendsapacketatthetransport layertoanothercomputer
somewhere intheInternet."
711,"Thereisnoprocesswiththedestination portaddress
runningatthedestination computer."
712,Whatwillhappen?
713,"25.Ifthedatalinklayercandetecterrorsbetween hops,whydoyouthinkweneed
anotherchecking mechanism atthetransport layer?"
714,"Research Activities
26.Givesomeadvantages anddisadvantages ofcombining the session, presentation,
andapplication layerintheOSImodelintoonesingleapplication layerinthe
Internetmodel."
715,"27.Dialogcontrolandsynchronization aretworesponsibilities ofthesessionlayerin
theOSImodel.Whichlayerdoyouthinkisresponsible forthesedutiesinthe
Internetmodel?Explainyouranswer."
716,"28.Translation, encryption, andcompression aresomeofthedutiesofthepresentation
layerintheOSImodel.Whichlayerdoyouthinkisresponsible forthesedutiesin
theInternetmodel?Explainyouranswer."
717,"29.Thereareseveraltransport layermodelsproposed intheOSImodel.Findallof
them.Explainthedifferences betweenthem."
718,"30.Thereareseveralnetwork layermodelsproposed intheOSImodel.Findallof
them.Explainthedifferences betweenthem.Physical Layer
andMedia
Objectives
Westartthediscussion oftheInternetmodelwiththebottom-most layer,thephysical
layer.Itisthelayerthatactuallyinteracts withthetransmission media,thephysical part
ofthenetwork thatconnects network components together."
719,"Thislayerisinvolved in
physically carrying information fromonenodeinthenetworktothenext."
720,Thephysical layerhascomplex taskstoperform.
721,"Onemajortaskistoprovide
servicesforthedatalinklayer.ThedatainthedatalinklayerconsistsofOsandIsorga­
nizedintoframesthatarereadytobesentacrossthetransmission medium."
722,"Thisstream
ofOsandIsmustfirstbeconverted intoanotherentity:signals.Oneoftheservicespro­
videdbythephysical layeristocreateasignalthatrepresents thisstreamofbits."
723,"Thephysical layermustalsotakecareofthephysical network, thetransmission
medium."
724,"Thetransmission medium isapassiveentity;ithasnointernalprogram or
logicforcontrollikeotherlayers.Thetransmission medium mustbecontrolled bythe
physical layer.Thephysical layerdecidesonthedirections ofdataflow.Thephysical
layerdecidesonthenumberoflogicalchannels fortransporting datacomingfrom
different sources."
725,"InPart2ofthebook,wediscussissuesrelatedtothephysical layerandthetrans­
missionmediumthatiscontrolled bythephysical layer.InthelastchapterofPart2,we
discussthestructure andthephysical layersofthetelephone network andthecable
network."
726,"Part2ofthebookisdevotedtothephysicallayer
andthetransmission media.Chapters
Thispartconsistsofsevenchapters: Chapters 3to9."
727,"Chapter3
Chapter3discusses therelationship between data,whicharecreatedbyadevice,and
electromagnetic signals,whicharetransmitted overamedium."
728,"Chapter4
Chapter4dealswithdigitaltransmission."
729,"Wediscusshowwecancovertdigitalor
analogdatatodigitalsignals."
730,"Chapter5
Chapter5dealswithanalogtransmission."
731,"Wediscusshowwecancovertdigitalor
analogdatatoanalogsignals."
732,"Chapter6
Chapter6showshowwecanusetheavailable bandwidth efficiently."
733,"Wediscusstwo
separate, butrelatedtopics,multiplexing andspreading."
734,"Chapter7
Afterexplaining someideasaboutdataandsignalsandhowwecanusethemeffi­
ciently,wediscussthecharacteristics oftransmission media,bothguidedand
unguided, inthischapter.Although transmission mediaoperates underthephysical
layer,theyarecontrolled bythephysicallayer."
735,"Chapter8
Although theprevious chapters inthispartareissuesrelatedtothephysical layeror
transmission media,Chapter8discusses switching, atopicthatcanberelatedtoseveral
layers.Wehaveincluded thistopicinthispartofthebooktoavoidrepeating thedis­
cussionforeachlayer."
736,"Chapter9
Chapter9showshowtheissuesdiscussed intheprevious chapterscanbeusedinactual
networks."
737,"Inthischapter,wefirstdiscussthetelephone network asdesigned tocarry
voice.Wethenshowhowitcanbeusedtocarrydata.Second,wediscussthecablenet­
workasatelevision network."
738,"Wethenshowhowitcanalsobeusedtocarrydata.CHAPTER 3
DataandSignals
Oneofthemajorfunctions ofthephysical layeristomovedataintheformofelectro­
magnetic signalsacrossatransmission medium."
739,"Whether youarecollecting numerical
statistics fromanothercomputer, sendinganimated picturesfromadesignworkstation,
orcausingabelltoringatadistantcontrolcenter,youareworking withthetransmis­
sionofdataacrossnetworkconnections."
740,"Generally, thedatausabletoapersonorapplication arenotinaformthatcanbe
transmitted overanetwork."
741,"Forexample, aphotograph mustfirstbechanged toaform
thattransmission mediacanaccept.Transmission mediaworkbyconducting energy
alongaphysical path."
742,"Tobetransmitted, datamustbetransformed toelectromagnetic signals."
743,"3.1ANALOG ANDDIGITAL
Bothdataandthesignalsthatrepresent themcanbeeitheranalogordigitalinform."
744,"AnalogandDigitalData
Datacanbeanalogordigital.Thetermanalogdatareferstoinformation thatiscontin­
uous;digitaldatareferstoinformation thathasdiscretestates.Forexample, ananalog
clockthathashour,minute,andsecondhandsgivesinformation inacontinuous form;
themovements ofthehandsarecontinuous."
745,"Ontheotherhand,adigitalclockthat
reportsthehoursandtheminuteswillchangesuddenly from8:05to8:06."
746,"Analogdata,suchasthesoundsmadebyahumanvoice,takeoncontinuous values."
747,"Whensomeone speaks,ananalogwaveiscreatedintheair.Thiscanbecaptured bya
microphone andconverted toananalogsignalorsampled andconverted toadigital
signal."
748,"Digitaldatatakeondiscrete values.Forexample, dataarestoredincomputer
memory intheformofOsand1s.Theycanbeconverted toadigitalsignalormodu­
latedintoananalogsignalfortransmission acrossamedium."
749,"5758CHAPTER 3DATAANDSIGNALS
Datacanbeanalogordigital.Analogdataarecontinuous andtakecontinuous values."
750,Digitaldatahavediscretestatesandtakediscretevalues.
751,"AnalogandDigitalSignals
Likethedatatheyrepresent, signalscanbeeitheranalogordigital.Ananalogsignal
hasinfinitely manylevelsofintensity overaperiodoftime.Asthewavemovesfrom
valueAtovalueB,itpassesthroughandincludes aninfinitenumberofvaluesalongits
path.Adigitalsignal,ontheotherhand,canhaveonlyalimitednumberofdefined
values.Although eachvaluecanbeanynumber,itisoftenassimpleas1andO."
752,"Thesimplest waytoshowsignalsisbyplottingthemonapairofperpendicular
axes.Theverticalaxisrepresents thevalueorstrengthofasignal.Thehorizontal axis
represents time.Figure3.1illustrates ananalogsignalandadigitalsignal.Thecurve
representing theanalogsignalpassesthroughaninfinitenumberofpoints.Thevertical
linesofthedigitalsignal,however, demonstrate thesuddenjumpthatthesignalmakes
fromvaluetovalue."
753,"Signalscanbeanalogordigital.Analogsignalscanhaveaninfinitenumberof
valuesinarange;digitalsignalscanhaveonlyalimitednumberofvalues."
754,"Figure3.1Comparison ofanaloganddigitalsignals
Value Value
Time-
Tim
'----e
a.Analogsignal b.Digitalsignal
Periodic andNonperiodic Signals
Bothanaloganddigitalsignalscantakeoneoftwoforms:periodic ornonperiodic
(sometimes refertoasaperiodic, becausetheprefixainGreekmeans""non"")."
755,"Aperiodic signalcompletes apatternwithinameasurable timeframe,calleda
period,andrepeatsthatpatternoversubsequent identical periods.Thecompletion of
onefullpatterniscalledacycle.Anonperiodic signalchangeswithoutexhibiting apat­
ternorcyclethatrepeatsovertime."
756,Bothanaloganddigitalsignalscanbeperiodic ornonperiodic.
757,"Indatacommuni­
cations,wecommonly useperiodic analogsignals(because theyneedlessbandwidth,SECTION 3.2PERIODIC ANALOG SIGNALS 59
aswewillseeinChapter5)andnonperiodic digitalsignals(because theycanrepresent
variation indata,aswewillseeinChapter6)."
758,"Indatacommunications, wecommonly useperiodic
analogsignalsandnonperiodic digitalsignals."
759,"3.2PERIODIC ANALOG SIGNALS
Periodic analogsignalscanbeclassified assimpleorcomposite."
760,"Asimpleperiodic
analogsignal,asinewave,cannotbedecomposed intosimplersignals.Acomposite
periodicanalogsignaliscomposed ofmultiplesinewaves."
761,"SineWave
Thesinewaveisthemostfundamental formofaperiodic analogsignal.Whenwe
visualize itasasimpleoscillating curve,itschangeoverthecourseofacycleissmooth
andconsistent, acontinuous, rollingflow.Figure3.2showsasinewave.Eachcycle
consistsofasinglearcabovethetimeaxisfollowed byasinglearcbelowit."
762,"Figure3.2Asinewave
Value
Time
Wediscussamathematical approach tosinewavesinAppendix C."
763,"Asinewavecanberepresented bythreeparameters: thepeakamplitude, thefre­
quency,andthephase.Thesethreeparameters fullydescribeasinewave."
764,"PeakAmplitude
Thepeakamplitude ofasignalistheabsolutevalueofitshighestintensity, propor­
tionaltotheenergyitcarries.Forelectricsignals,peakamplitude isnormally measured
involts.Figure3.3showstwo signals andtheirpeakamplitudes."
765,"Example 3.1
Thepowerinyourhousecanberepresented byasinewavewithapeakamplitude of155to170V."
766,"However, itiscommon knowledge thatthevoltageofthepowerinU.S.homesis110to120V.60CHAPTER 3DATAANDSIGNALS
Figure3.3Twosignalswiththesamephaseandfrequency, butdifferent amplitudes
Amplitude
Peakamplitude
Time
a.Asignalwithhighpeakamplitude
Amplitude
Time
b.Asignalwithlowpeakamplitude
Thisdiscrepancy isduetothefactthatthesearerootmeansquare(rms)values.Thesignalis
squaredandthentheaverageamplitude iscalculated."
767,"Thepeakvalueisequalto2112xrms
value."
768,"Example 3.2
Thevoltageofbatteryisaconstant; thisconstantvaluecanbeconsidered asinewave,aswewill
seelater.Forexample, thepeakvalueofanAAbatteryisnormally 1.5V."
769,"PeriodandFrequency
Periodreferstotheamountoftime,inseconds, asignalneedstocomplete 1cycle."
770,"Frequency referstothenumberofperiodsinIs.Notethatperiodandfrequency arejust
onecharacteristic definedintwoways.Periodistheinverseoffrequency, andfrequency
istheinverseofperiod,asthefollowing formulas show."
771,"1f=­Tand1T=-f
Frequency andperiodaretheinverseofeachother."
772,"Figure3.4showstwosignalsandtheirfrequencies.SECTION 3.2PERIODIC ANALOG SIGNALS 61
Figure3.4Twosignalswiththesameamplitude andphase,butdifferentfrequencies
Amplitude
12periodsinIs-----+- Frequency is12Hz
1s
Time
Period:ns
a.Asignalwithafrequency of12Hz
Amplitude
6periodsinIs-----+- Frequency is6Hz
1s
I•••
Time
T
Period:ts
b.Asignalwithafrequency of6Hz
Periodisformally expressed inseconds."
773,"Frequency isformally expressed in
Hertz(Hz),whichiscyclepersecond.Unitsofperiodandfrequency areshownin
Table3.1.
Table3.1Unitsofperiodandfrequency
Unit Equivalent Unit Equivalent
Seconds(s) 1s Hertz(Hz) 1Hz
Milliseconds (ms) 10-3s Kilohertz (kHz) 103Hz
Microseconds (Ils) 10-6s Megahertz (MHz) 106Hz
Nanoseconds (ns) 10-9s Gigahertz (GHz) 109Hz
Picoseconds (ps) 10-12s Terahertz (THz) 1012Hz
Example 3.3
Thepowerweuseathomehasafrequency of60Hz(50HzinEurope)."
774,"Theperiodofthissine
wavecanbe determined asfollows:
T=1=610=0.0166s=0.0166x103ms=16.6illS
Thismeansthattheperiodofthepowerforourlightsathomeis0.0116s,or16.6ms.Our
eyesarenotsensitive enoughtodistinguish theserapidchangesinamplitude.62CHAPTER 3DATAANDSIGNALS
Example 3.4
Expressaperiodof100msinmicroseconds."
775,"Solution
FromTable3.1wefindtheequivalents of1ms(lmsis10-3s)and1s(1sis106118).Wemake
thefollowing substitutions:
100ms:;;::;100X10-3s:;;::;100X10-3X106JlS:;;::;102X10-3X106JlS::::::105JlS
Example 3.5
Theperiodofasignalis100ms.Whatisitsfrequency inkilohertz?"
776,"Solution
FirstwechangelOOmstoseconds, and thenwecalculate thefrequency fromtheperiod(1Hz=
10-3kHz)."
777,"100ms=100X10-3S=10-1S
f=1.=_1_Hz=10Hz=10X10-3kHz=10-2kHz
T10-1
MoreAboutFrequency
Wealreadyknowthatfrequency istherelationship ofasignaltotimeandthatthefrequency
ofawaveisthenumberofcyclesitcompletes in1s.Butanotherwaytolookatfrequency
isasameasurement oftherateofchange.Electromagnetic signalsareoscillating wave­
forms;thatis,theyfluctuate continuously andpredictably aboveandbelowameanenergy
level.A40-Hzsignalhasone-halfthefrequency ofan80-Hzsignal;itcompletes 1cyclein
twicethetimeofthe80-Hzsignal,soeachcyclealsotakestwiceaslongtochangefromits
lowesttoitshighestvoltagelevels.Frequency, therefore, thoughdescribed incyclespersec­
ond(hertz),isageneralmeasurement oftherateofchangeofasignalwithrespecttotime."
778,"Frequency istherateofchangewithrespecttotime.Changeinashortspanoftime
meanshighfrequency."
779,Changeoveralongspanoftimemeanslowfrequency.
780,"Ifthevalueofasignalchanges overaveryshortspanoftime,itsfrequency is
high.Ifitchangesoveralongspanoftime,itsfrequency islow."
781,"TwoExtremes
Whatifasignaldoesnotchangeatall?Whatifitmaintains aconstantvoltagelevelforthe
entiretimeitisactive?Insuchacase,itsfrequency iszero.Conceptually, thisideaisasim­
pleone.Ifasignaldoesnotchangeatall,itnevercompletes acycle,soitsfrequency isaHz.
Butwhatifasignalchanges instantaneously?"
782,"Whatifitjumpsfromonelevelto
anotherinnotime?Thenitsfrequency isinfinite.Inotherwords,whenasignalchanges
instantaneously, itsperiodiszero;sincefrequency istheinverseofperiod,inthiscase,
thefrequency is1/0,orinfinite(unbounded).SECTION 3.2PERiODIC ANALOG SIGNALS 63
Ifasignaldoesnotchangeatall,itsfrequency iszero."
783,"Ifasignalchangesinstantaneously, itsfrequency isinfinite."
784,"Phase
Thetermphasedescribes thepositionofthewaveform relativetotimeO.Ifwethinkof
thewaveassomething thatcanbeshiftedbackward orforwardalongthetimeaxis,
phasedescribes theamountofthatshift.Itindicates thestatusofthefirstcycle."
785,Phasedescribes thepositionofthewaveform relativetotimeO.
786,"Phaseismeasured indegreesorradians[360°is2nrad;1°is2n/360rad,and1rad
is360/(2n)]."
787,"Aphaseshiftof360°corresponds toashiftofacomplete period; aphase
shiftof180°corresponds toashiftofone-halfofaperiod;andaphaseshiftof90°cor­
responds toashiftofone-quarter ofaperiod(seeFigure3.5)."
788,"Figure3.5Threesinewaveswiththesameamplitude andfrequency, butdifferentphases
a.0degrees
*AAL
1!4TO\J~
b.90degrees
c.180degrees•Time
~
Time
)I
Time
Looking atFigure3.5,wecansaythat
I.Asinewavewithaphaseof0°startsattime0withazeroamplitude."
789,"The
amplitude isincreasing."
790,2.Asinewavewithaphaseof90°startsattime0withapeakamplitude.
791,"The
amplitude isdecreasing.64CHAPTER 3DATAANDSIGNALS
3.Asinewavewithaphaseof180°startsattime0withazeroamplitude."
792,"The
amplitude isdecreasing."
793,"Anotherwaytolookatthephaseisintermsofshiftoroffset.Wecansaythat
1.Asinewavewithaphaseof0°isnotshifted."
794,"2.Asinewavewithaphaseof90°isshiftedtotheleftby!cycle.However, note4thatthesignaldoesnotreallyexistbeforetimeO."
795,"3.Asinewavewithaphaseof180°isshiftedtotheleftby~cycle.However, note
thatthesignaldoesnotreallyexistbeforetimeO."
796,"Example 3.6
Asinewaveisoffset ~cyclewithrespecttotimeO.Whatisitsphaseindegreesandradians?"
797,"Solution
Weknowthat1complete cycleis360°.Therefore,icycleis
!x360;::;60°=60x2ntad;::;~fad;::;1.046rad6 360 3
Wavelength
Wavelength isanothercharacteristic ofasignaltraveling through atransmission
medium."
798,"Wavelength bindstheperiodorthefrequency ofasimplesinewavetothe
propagation speedofthemedium(seeFigure3.6)."
799,"Figure3.6Wavelength andperiod
Wavelength"""""":.': Transmission medium /'-~ /'-
Direction of
propagation
Whilethefrequency ofasignalisindependent ofthemedium, thewavelength
dependsonboththefrequency andthemedium."
800,"Wavelength isaproperty ofanytype
ofsignal.Indatacommunications, weoftenusewavelength todescribe thetransmis­
sionoflightinanopticalfiber.Thewavelength isthedistanceasimplesignalcantravel
inoneperiod."
801,"Wavelength canbecalculated ifoneisgiventhepropagation speed(thespeedof
light)andtheperiodofthesignal.However, sinceperiodandfrequency arerelatedto
eachother,ifwerepresent wavelength byA,propagation speedbyc(speedoflight),and
frequency by1,weget
."
802,"•propagation speedWavelength =propagatJon speedxperJod ;::;{\requencySECTION 3.2PERIODIC ANALOG SIGNALS 6S
Thepropagation speedofelectromagnetic signalsdependsonthemediumandon
thefrequency ofthesignal.Forexample, inavacuum, lightispropagated withaspeed
of3 x108mls.Thatspeedislowerinairandevenlowerincable."
803,Thewavelength isnormally measured inmicrometers (microns) insteadofmeters.
804,"Forexample, thewavelength ofredlight(frequency=4 x1014)inairis
8c3xlO -6A=- = =0.75x10m=0.75!J.m
f4x1014
Inacoaxialorfiber-optic cable,however, thewavelength isshorter(0.5!Jm)becausethe
propagation speedinthecableisdecreased."
805,"TimeandFrequency Domains
Asinewaveiscomprehensively definedbyitsamplitude, frequency, andphase.We
havebeenshowing asinewavebyusingwhatiscalledatime-domain plot.The
time-domain plotshowschanges insignalamplitude withrespecttotime(itisan
amplitude-versus-time plot).Phaseisnotexplicitly shownonatime-domain plot."
806,"Toshowtherelationship between amplitude andfrequency, wecanusewhatis
calledafrequency-domain plot.Afrequency-domain plotisconcerned withonlythe
peakvalueandthefrequency."
807,Changes ofamplitude duringoneperiodarenotshown.
808,Figure3.7showsasignalinboththetimeandfrequency domains.
809,"Figure3.7Thetime-domain andfrequency-domain plotsofasinewave
Amplitude
Frequency: 6Hz
Peakvalue:5V5----------
Time
(s)
a.Asinewaveinthetimedomain(peakvalue:5V,frequency: 6Hz)
Amplitude
rPeakvalue:5 V
5--;-1-1--;--1--1'--+-1 -----111--+1-----111--+1-+-1-+1-+-1 ~."
810,"1 2 3 4 5 6 7 8 9 1011121314 Frequency
(Hz)
b.Thesamesinewaveinthefrequency domain(peakvalue:5V,frequency: 6Hz)66CHAPTER 3DATAANDSIGNALS
Itisobviousthatthefrequency domainiseasytoplotandconveystheinformation
thatonecanfindinatimedomainplot.Theadvantage ofthefrequency domainisthat
wecanimmediately seethevaluesofthefrequency andpeakamplitude."
811,"Acomplete
sinewaveisrepresented byonespike.Thepositionofthespikeshowsthefrequency;
itsheightshowsthepeakamplitude."
812,"Acomplete sinewaveinthetimedomaincanberepresented
byonesinglespikeinthefrequency domain."
813,"Example 3.7
Thefrequency domainismorecompactandusefulwhenwearedealingwithmorethanonesine
wave.Forexample, Figure3.8showsthreesinewaves,eachwithdifferentamplitude andfre­
quency.Allcanberepresented bythreespikesinthefrequency domain."
814,"Figure3.8Thetimedomainandfrequency domainofthreesinewaves
Amplitude
15-
10-I5-
o 8 16Frequency
a.Time-domain representation ofthreesinewaveswith
frequencies 0,8,and16b.Frequency-domain representation of
thesamethreesignals
---------------------------------------
Composite Signals
Sofar,wehavefocusedonsimplesinewaves.Simplesinewaveshavemanyapplica­
tionsindailylife.Wecansendasinglesinewavetocarryelectricenergyfromone
placetoanother.Forexample, thepowercompany sendsasinglesinewavewithafre­
quencyof60Hztodistribute electricenergytohousesandbusinesses."
815,"Asanother
example, wecanuseasinglesinewavetosendanalarmtoasecuritycenterwhena
burglaropensadoororwindowinthehouse.Inthefirstcase,thesinewaveiscarrying
energy;inthesecond,thesinewaveisasignalofdanger."
816,"Ifwehadonlyonesinglesinewavetoconveyaconversation overthephone,it
wouldmakenosenseandcarrynoinformation."
817,"Wewouldjusthearabuzz.Aswewill
seeinChapters 4and5,weneedtosendacomposite signaltocommunicate data.A
composite signalismadeofmanysimplesinewaves."
818,"Asingleafrequency sinewaveisnotusefulindatacommunications;
weneedtosendacomposite signal,asignalmadeofmanysimplesinewaves.SECTION 3.2PERIODIC ANALOG SIGNALS 67
Intheearly1900s,theFrenchmathematician Jean-Baptiste Fouriershowedthat
anycomposite signalisactuallyacombination ofsimplesinewaveswithdifferent fre­
quencies, amplitudes, andphases.Fourieranalysisisdiscussed inAppendix C;forour
purposes, wejustpresenttheconcept."
819,"According toFourieranalysis, anycomposite signalisacombination of
simplesinewaveswithdifferent frequencies, amplitudes, andphases."
820,Fourieranalysis isdiscussed inAppendix C.
821,Acomposite signalcanbeperiodicornonperiodic.
822,"Aperiodiccomposite signal
canbedecomposed intoaseriesofsimplesinewaveswithdiscretefrequencies­
frequencies thathaveintegervalues(1,2,3,andsoon).Anonperiodic composite sig­
nalcanbedecomposed intoacombination ofaninfinitenumberofsimplesinewaves
withcontinuous frequencies, frequencies thathaverealvalues."
823,"Ifthecomposite signalisperiodic, thedecomposition givesaseriesofsignalswith
discretefrequencies; ifthecomposite signalisnonperiodic, thedecomposition
givesacombination ofsinewaveswithcontinuous frequencies."
824,"Example 3.8
Figure3.9showsaperiodiccomposite signalwithfrequencyfThistypeofsignalisnottypical
ofthosefoundindatacommunications.We canconsider ittobethreealarmsystems, eachwitha
different frequency."
825,"Theanalysisofthissignalcangiveusagoodunderstanding ofhowto
decompose signals."
826,"Figure3.9Acomposite periodic signal
..."
827,"Time
Itisverydifficulttomanually decompose thissignalintoaseriesofsimplesinewaves."
828,"However, therearetools,bothhardware andsoftware, thatcanhelpusdothejob.Wearenotcon­
cernedabouthowitisdone;weareonlyinterested intheresult.Figure3.10showstheresultof
decomposing theabovesignalinboththetimeandfrequency domains."
829,"Theamplitude ofthesinewavewithfrequencyfisalmostthesameasthepeakamplitude of
thecomposite signal.Theamplitude ofthesinewavewithfrequency 3fisone-third ofthatofthe
first,andtheamplitude ofthesinewavewithfrequency 9fisone-ninth ofthefirst.Thefrequency68CHAPTER 3DATAANDSIGNALS
Figure3.10Decomposition ofacomposite periodic signalinthetimeandfrequency domains
Amplitude
a.Time-domain decomposition ofacomposite signal-Frequency1
-Frequency 31
-Frequency 91
Time
Amplitude
WL...-----'3~L...-------9L-'!---------T~i~e
b.Frequency-domain decomposition ofthecomposite signal
ofthesinewavewithfrequencyfisthesameasthefrequency ofthecomposite signal;itiscalled
thefundamental frequency, orfirstharmonic."
830,"Thesinewavewithfrequency 3fhasafrequency
of3timesthefundamental frequency; itiscalledthethirdharmonic."
831,"Thethirdsinewavewithfre­
quency9fhasafrequency of9timesthefundamental frequency; itiscalledtheninthharmonic."
832,"Notethatthefrequency decomposition ofthesignalisdiscrete; ithasfrequenciesf, 3f,and
9fBecause fisanintegralnumber,3fand9farealsointegralnumbers."
833,"Therearenofrequencies
suchas1.2for2.6fThefrequency domainofaperiodiccomposite signalisalwaysmadeofdis­
cretespikes."
834,"Example 3.9
Figure3.11showsanonperiodic composite signal.Itcanbethesignalcreatedbyamicrophone ora
telephone setwhenawordortwoispronounced."
835,"Inthiscase,thecomposite signalcannotbeperi­
odic,becausethatimpliesthatwearerepeating thesamewordorwordswithexactlythesametone."
836,"Figure3.11Thetimeandfrequency domainsofanonperiodic signal
Amplitude Amplitude
Amplitude forsine
waveoffrequency1
IAIA
a.Timedomain,
vTime 1
b.Frequency domain4kHzFrequencySECTION 3.2PERIODIC ANALOG SIGNALS 69
Inatime-domain representation ofthiscomposite signal,thereareaninfinitenum­
berofsimplesinefrequencies."
837,"Although thenumberoffrequencies inahumanvoiceis
infinite,therangeislimited.Anormalhumanbeingcancreateacontinuous rangeof
frequencies between 0and4kHz.
Notethatthefrequency decomposition ofthesignalyieldsacontinuous curve."
838,"Thereareaninfinitenumberoffrequencies between 0.0and4000.0(realvalues).Tofind
theamplitude relatedtofrequency J,wedrawaverticallineatftointersect theenvelope
curve.Theheightoftheverticallineistheamplitude ofthecorresponding frequency."
839,"Bandwidth
Therangeoffrequencies contained inacomposite signalisitsbandwidth."
840,"Theband­
widthisnormally adifference between twonumbers."
841,"Forexample, ifacomposite signal
contains frequencies between 1000and5000,itsbandwidth is5000-1000,or4000."
842,"Thebandwidth ofacomposite signalisthedifference betweenthe
highestandthelowestfrequencies contained inthatsignal."
843,Figure3.12showstheconceptofbandwidth.
844,"Thefiguredepictstwocomposite
signals,oneperiodic andtheothernonperiodic."
845,"Thebandwidth oftheperiodic signal
containsallintegerfrequencies between 1000and5000(1000,100I,1002,...).Theband­
widthofthenonperiodic signalshasthesamerange,butthefrequencies arecontinuous."
846,"Figure3.12Thebandwidth ofperiodicandnonperiodic composite signals
Amplitude
1000
I·Bandwidth =5000-1000=4000Hz5000Frequency
·1
a.Bandwidth ofaperiodic signal
Amplitude
1000
I·Bandwidth=5000-1000=4000Hz5000Frequency
·1
b.Bandwidth ofanonperiodic signal70CHAPTER 3DATAANDSIGNALS
Example 3.10
Ifaperiodic signal isdecomposed intofivesinewaveswithfrequencies of100,300,500,700,
and900Hz,whatisitsbandwidth?"
847,"Drawthespectrum, assuming allcomponents haveamaxi­
mumamplitude of10V."
848,"Solution
Letfhbethehighestfrequency,flthelowestfrequency, andBthebandwidth."
849,"Then
B=fh-it=900-100=800Hz
Thespectrum hasonlyfivespikes,at100,300,500,700,and900Hz(seeFigure3.13)."
850,"Figure3.13Thebandwidthfor Example 3.10
Amplitude
10+-----]
Bandwidth=900-100=800Hz100
I,300 500 700 900
-IFrequency
Example 3.11
Aperiodic signal hasabandwidth of20Hz.Thehighestfrequency is60Hz.Whatisthelowest
frequency?"
851,Drawthespectrum ifthesignalcontains allfrequencies ofthesameamplitude.
852,"Solution
Letfhbethehighestfrequency,fz thelowestfrequency, andBthebandwidth."
853,"Then
B=fh-fz:::::}20=60-it=}.ft=60-20=40Hz
Thespectrum containsallintegerfrequencies."
854,Weshowthisbyaseriesofspikes(seeFigure3.14).
855,"Figure3.14Thebandwidth forExample 3.11
III
404142
I,Bandwidth =60-40=20Hz585960
·1Frequency
(Hz)
Example 3.12
Anonperiodic composite signalhasabandwidth of200kHz,withamiddlefrequency of
140kHzandpeakamplitude of20V.Thetwoextremefrequencies haveanamplitude of0.Draw
thefrequency domainofthesignal.SECT/ON 3.3DIGITAL SIGNALS 71
Solution
Thelowestfrequency mustbeat40kHzandthehighestat240kHz.Figure3.15showsthefre­
quencydomainandthebandwidth."
856,"Figure3.15Thebandwidth forExample 3.12
Amplitude
40kHz 140kHz 240kHz Frequency
Example 3.J3
Anexampleofanonperiodic composite signalisthesignalpropagated byanAMradiostation,In
theUnitedStates,eachAMradiostationisassignedalO-kHzbandwidth."
857,"Thetotalbandwidth ded­
icatedtoAMradiorangesfrom530to1700kHz.Wewillshowtherationale behindthislO-kHz
bandwidth inChapter5."
858,"Example 3.J4
Anotherexampleofanonperiodic composite signalisthesignalpropagated byanFMradiosta­
tion.IntheUnitedStates,eachFMradiostationisassigned a200-kHz bandwidth."
859,"Thetotal
bandwidth dedicated toFMradiorangesfrom88to108MHz.Wewillshowtherationale behind
this200-kHz bandwidth inChapter5."
860,"Example 3./5
Anotherexampleofanonperiodic composite signalisthesignalreceived byanold-fashioned
analogblack-and-white TV.ATVscreenismadeupofpixels(pictureelements) witheachpixel
beingeitherwhiteorblack.Thescreenisscanned30timespersecond.(Scanning isactually
60timespersecond,butoddlinesarescannedinoneroundandevenlinesinthenextandthen
interleaved.) Ifweassumearesolution of525x700(525verticallinesand700horizontal lines),
whichisaratioof3:4,wehave367,500pixelsperscreen.Ifwescanthescreen30timespersec­
ond,thisis367,500x30=11,025,000 pixelspersecond.Theworst-case scenarioisalternating
blackandwhitepixels.Inthiscase,weneedtorepresent onecolorbytheminimum amplitude
andtheothercolorbythemaximum amplitude."
861,"Wecansend2pixelspercycle.Therefore, we
need11,025,000/2 =5,512,500 cyclespersecond,orHz.Thebandwidth neededis5.5124MHz.
Thisworst-case scenariohassuchalowprobability ofoccurrence thattheassumption isthatwe
needonly70percentofthisbandwidth, whichis3.85MHz.Sinceaudioandsynchronization sig­
nalsarealsoneeded,a4-MHzbandwidth hasbeensetasideforeachblackandwhiteTVchan­
nel.AnanalogcolorTVchannelhasa6-MHzbandwidth."
862,"3.3DIGITAL SIGNALS
Inadditiontobeingrepresented byananalogsignal,information canalsoberepre­
sentedbyadigitalsignal.Forexample, a Icanbeencodedasapositivevoltageanda0
aszerovoltage.Adigitalsignalcanhavemorethantwolevels.Inthiscase,wecan72CHAPTER 3DATAANDSIGNALS
sendmorethan1bitforeachlevel.Figure3.16showstwosignals,onewithtwolevels
andtheotherwithfour."
863,"Figure3.16Twodigitalsignals:onewithtwosignallevelsandtheotherwithfoursignallevels
Amplitude 8bitssentinIs,
Levell
LevellBitrate=8bps
1I0I1III0I0I0I1I
I I I I I I I I
I I
I I I
I I I
I I I
I I I..."
864,"I I I I I I IIsI I I I I I I Tim
I I I I I I Ie
a.Adigitalsignalwithtwolevels
e6b""""1 IItssentIIIs,
Bitrate=16bps
III10I01[01I00 00[00I10I
I I I I I I I
el4,I I I I I III I I I I I
I I I I I Iel3 [ I II...I I I [
I I I IIsI I I I Timell III
I I [ [
ellI I [ I
I I I
[ I I I I ILevAmplitude
LevLevLev
b.Adigitalsignalwithfourlevels
Wesend1bitperlevelinpartaofthefigureand2bitsperlevelinpartbofthe
figure.Ingeneral,ifasignalhasLlevels,eachlevelneedslog2Lbits."
865,Appendix Creviewsinformation aboutexponential andlogarithmic functions.
866,"Example 3.16
Adigitalsignalhaseightlevels.Howmanybitsareneededperlevel?Wecalculate thenumber
ofbitsfromtheformula
Numberofbitsperlevel=log28=3
Eachsignallevelisrepresented by3bits."
867,"Example 3.17
Adigitalsignalhasninelevels.Howmanybitsareneededperlevel?Wecalculate thenumberof
bitsbyusingtheformula."
868,"Eachsignal level isrepresented by3.17bits.However, thisansweris
notrealistic."
869,"Thenumberofbitssentperlevelneedstobeanintegeraswellasapowerof2.For
thisexample, 4bitscanrepresent onelevel.SECTION 3.3DIGITAL SIGNALS 73
BitRate
Mostdigitalsignalsarenonperiodic, andthusperiodandfrequency arenotappropri­
atecharacteristics."
870,"Anotherterm-bit rate(insteadofjrequency)-is usedtodescribe
digitalsignals.ThebitrateisthenumberofbitssentinIs,expressed inbitsper
second(bps).Figure3.16showsthebitratefortwosignals."
871,"Example 3.18
Assumeweneedtodownload textdocuments attherateof100pagesperminute.Whatisthe
requiredbitrateofthechannel?"
872,"Solution
Apageisanaverageof24lineswith80characters ineachline.Ifweassumethatonecharacter
requires8bits,thebitrateis
100x24x80x8=1,636,000 bps=1.636Mbps
Example 3.19
Adigitized voicechannel, aswewillseeinChapter4,ismadebydigitizing a4-kHzbandwidth
analogvoicesignal.Weneedtosamplethesignalattwicethehighestfrequency (twosamples
perhertz).Weassumethateachsamplerequires8bits.Whatistherequiredbitrate?"
873,"Solution
Thebitratecanbecalculated as
2x4000x8=64,000bps=64kbps
Example 3.20
Whatisthebitrateforhigh-definition TV(HDTV)?"
874,"Solution
HDTVusesdigitalsignalstobroadcast highqualityvideosignals.TheHDTVScreenisnormally
aratioof16:9(incontrastto4:3forregularTV),whichmeansthescreeniswider.Thereare
1920by1080pixelsperscreen,andthescreenisrenewed 30timespersecond.Twenty-four bits
represents onecolorpixel.Wecancalculate thebitrateas
1920x1080x30x24=1,492,992,000 or1.5Gbps
TheTVstationsreducethisrateto20to40Mbpsthroughcompression."
875,"BitLength
Wediscussed theconceptofthewavelength forananalogsignal:thedistanceonecycle
occupies onthetransmission medium."
876,"Wecandefinesomething similarforadigital
signal:thebitlength.Thebitlengthisthedistanceonebitoccupies onthetransmis­
sionmedium."
877,"Bitlength=propagation speedxbitduration74CHAPTER 3DATAANDSIGNALS
DigitalSignalasaComposite AnalogSignal
BasedonFourieranalysis, adigitalsignalisacomposite analogsignal.Thebandwidth
isinfinite,asyoumayhaveguessed."
878,"Wecanintuitively corneupwiththisconceptwhen
weconsider adigitalsignal.Adigitalsignal,inthetimedomain, comprises connected
verticalandhorizontal linesegments."
879,"Averticallineinthetimedomainmeansafre­
quencyofinfinity(suddenchangeintime);ahorizontal lineinthetimedomainmeansa
frequency ofzero(nochangeintime).Goingfromafrequency ofzerotoafrequency of
infinity(andviceversa)impliesallfrequencies inbetween arepartofthedomain."
880,"Fourieranalysis canbeusedtodecompose adigitalsignal.Ifthedigitalsignalis
periodic, whichisrareindatacommunications, thedecomposed signalhasafrequency­
domainrepresentation withaninfinitebandwidth anddiscretefrequencies."
881,"Ifthedigital
signalisnonperiodic, the decomposed signalstillhasaninfinitebandwidth, butthefre­
quencies arecontinuous."
882,"Figure3.17showsaperiodic andanonperiodic digitalsignal
andtheirbandwidths."
883,"Figure3.17Thetimeandfrequency domainsofperiodic andnonperiodic digitalsignals
----------------
-.---.---
Lu...IIII....."
884,"Time/3/5f7f9fIlfI3f Frequency
'--- '--- '---
a.Timeandfrequency domains ofperIodicdigitalsignal
o
b~)
Time
~~~-----=------+-."
885,"Frequency
b.Timeandfrequency domains ofnonperiodicdigitalsignal
Notethatbothbandwidths areinfinite,buttheperiodic signalhasdiscretefrequen­
cieswhilethenonperiodic signalhascontinuous frequencies."
886,"Transmission ofDigitalSignals
Theprevious discussion assertsthatadigitalsignal,periodic ornonperiodic, isacom­
positeanalogsignalwithfrequencies between zeroandinfinity.Fortheremainder of
thediscussion, letusconsider thecaseofanonperiodic digitalsignal,similartothe
onesweencounter indatacommunications."
887,"Thefundamental question is,Howcanwe
sendadigitalsignalfrompointAtopointB?Wecantransmit adigitalsignalbyusing
oneoftwodifferent approaches: baseband transmission orbroadband transmission
(usingmodulation).SECTION 3.3DIGITAL SIGNALS 75
Baseband Transmission
Baseband transmission meanssendingadigitalsignaloverachannelwithoutchanging
thedigitalsignaltoananalogsignal.Figure3.18showsbaseband transmission."
888,"Figure3.18Baseband transmission
-----D •
Digitalsignal
&i;;~;;;;_;;;~a
Channel
Adigitalsignalisacomposite analogsignalwithaninfinitebandwidth."
889,"Baseband transmission requiresthatwehavealow-pass channel, achannelwitha
bandwidth thatstartsfromzero.Thisisthecaseifwehaveadedicated mediumwitha
bandwidth constituting onlyonechannel.Forexample, theentirebandwidth ofacable
connecting twocomputers isonesinglechannel.Asanotherexample, wemayconnect
severalcomputers toabus,butnotallowmorethantwostationstocommunicate ata
time.Againwehavealow-pass channel,andwecanuseitforbaseband communication."
890,"Figure3.19showstwolow-pass channels: onewithanarrowbandwidth andtheother
withawidebandwidth."
891,"Weneedtoremember thatalow-pass channelwithinfiniteband­
widthisideal,butwecannothavesuchachannelinreallife.However, wecangetclose."
892,"Figure3.19Bandwidths oftwolow-pass channels
o
a.Low-pass channel, widebandwidth
o
b.Low-pass channel, narrowbandwidth
Letusstudytwocasesofabaseband communication: alow-pass channelwitha
widebandwidth andonewithalimitedbandwidth.76CHAPTER 3DATAANDSIGNALS
Case1:Low-Pass Channel withWideBandwidth
Ifwewanttopreservetheexactformofanonperiodic digitalsignalwithverticalseg­
mentsverticalandhorizontal segments horizontal, weneedtosendtheentirespectrum,
thecontinuous rangeoffrequencies between zeroandinfinity.Thisispossibleifwe
haveadedicated mediumwithaninfinitebandwidth betweenthesenderandreceiver
thatpreserves theexactamplitude ofeachcomponent ofthecomposite signal."
893,"Although thismaybepossibleinsideacomputer (e.g.,betweenCPUandmemory), it
isnotpossiblebetweentwodevices.Fortunately, theamplitudes ofthefrequencies at
theborderofthebandwidth aresosmallthattheycanbeignored.Thismeansthatifwe
haveamedium, suchasacoaxialcableorfiberoptic,withaverywidebandwidth, two
stationscancommunicate byusingdigitalsignalswithverygoodaccuracy, asshownin
Figure3.20.Notethat!iisclosetozero,andhisveryhigh."
894,"Figure3.20Baseband transmission usingadedicated medium
Inputsignalbandwidth
,<::;S>:,:,,...-,:."">~
o
InputsignalBandwidth supported bymediumJw_,,"",L
~.~:~''"",,""...'-.;:.~ ""
Wide-bandwidth channelOutputsignalbandwidth
_C c:~::.:.~.•.•..c<l
II h
Outputsignal
Although theoutputsignalisnotanexactreplicaoftheoriginalsignal,thedata
canstillbededucedfromthereceivedsignal.Notethatalthough someofthefrequen­
ciesareblockedbythemedium, theyarenotcritical."
895,"Baseband transmission ofadigitalsignalthatpreserves theshapeofthedigitalsignalis
possibleonlyifwehavealow-pass channelwithaninfiniteorverywidebandwidth."
896,"Example 3.21
Anexampleofadedicated channelwheretheentirebandwidth ofthemediumisusedasonesingle
channelisaLAN.AlmosteverywiredLANtodayusesadedicated channelfortwostationscom­
municating witheachother.Inabustopology LANwithmultipoint connections, onlytwostations
cancommunicate witheachotherateachmomentintime(timesharing); theotherstationsneedto
refrainfromsendingdata.Inastartopology LAN,theentirechannelbetweeneachstationandthe
hubisusedforcommunication betweenthesetwoentities.WestudyLANsinChapter14."
897,"Case2:Low-Pass Channel withLimitedBandwidth
Inalow-pass channelwithlimitedbandwidth, weapproximate thedigitalsignalwith
ananalogsignal.Thelevelofapproximation dependsonthebandwidth available."
898,"RoughApproximation LetusassumethatwehaveadigitalsignalofbitrateN.Ifwe
wanttosendanalogsignalstoroughlysimulatethissignal,weneedtoconsidertheworst
case,amaximum numberofchangesinthedigitalsignal.ThishappenswhenthesignalSECTION 3.3DIGITAL SIGNALS 77
carriesthesequence 01010101...orthesequence 10101010· ...Tosimulatethesetwo
cases,weneedananalogsignaloffrequencyf=N12.Let1bethepositivepeakvalueand
obethenegativepeakvalue.Wesend2bitsineachcycle;thefrequency oftheanalog
signalisone-halfofthebitrate,orN12.However, justthisonefrequency cannotmakeall
patterns; weneedmorecomponents."
899,"Themaximum frequency isNI2.Asanexample of
thisconcept,letusseehowadigital signal witha3-bitpatterncanbesimulated byusing
analogsignals.Figure3.21showstheidea.Thetwosimilarcases(000and111)aresimu­
latedwithasignalwithfrequencyf=0andaphaseof180°for000andaphaseof0°for
111.Thetwoworstcases(010and101)aresimulated withananalogsignalwithfre­
quencyf=NI2andphasesof180°and0°.Theotherfourcasescanonlybesimulated with
ananalogsignalwithf=NI4andphasesof180°,270°,90°,and0°.Inotherwords,we
needachannelthatcanhandlefrequencies 0,N14,andNI2.Thisroughapproximation is
referredtoasusingthefirstharmonic (NI2)frequency."
900,"Therequiredbandwidth is
Bandwidth =lJ.-0=lJ.2 2
Figure3.21Roughapproximation ofadigitalsignalusingthefirstharmonic forworstcase
Amplitude
Bandwidth ==~
o N/4 N/2Frequency
Digital:bitrateN
1°10I01
I1I1
I1I1
I1!! , ,
1 1 I1
1II1
iiiI
II.,, ,, ,
Analog:f =0,p=180
Digital:bitrateN
1IIo101
-A=±i:• ~1
1III~1~,.,,
Analog:f=N/4, p=90Digital:bitrateN
I01o~ I 1::,, , ,
II I I
I In~l I, ,,."
901,"Analog:f==N/4,p= 180
Digital:bitrateN
I1Io11I
-R=R-
AA
IM I,,.,
Analog:j== N/2,P=0Digital:bitrateN
~I I-I--
I 1
J I I I
1{""'\j:1MM, , , ,
Analog:j==N/2, p==180
Digital:bitrateN
11I1
I°I:,8-I
1I, ,
I I jI~II:~N
J,J,
Analog:f=N/4,p== 0Digital:bitrateN
*I I, ,,
I~I I I I
~~~,,, ,
Analog:j==N/4, p==270
Digital: bit rateN
I11III1
iiIi
I I I I
I1I1, , , ,
I!1,
III I
IIiI
I1II,, , ,
Analog:j==0,p=0
BetterApproximation Tomaketheshapeoftheanalogsignallookmorelikethat
ofadigitalsignal,weneedtoaddmoreharmonics ofthefrequencies."
902,"Weneedto
increasethebandwidth."
903,"Wecanincreasethebandwidth to3N12,5N12,7NI2,andsoon."
904,"Figure3.22showstheeffectofthisincreaseforoneoftheworstcases,thepattern010.78CHAPTER 3DATAANDSIGNALS
Figure3.22Simulating adigitalsignalwiththreefirstharmonics
I1.."
905,"5N/4 5N12 Frequency oN/4NI2
W_I I'---~
3N/4 3N12Amplitude 5NBandwidth =T
Digital:bitrateN Analog:/= NI2and3N12
0 1I0I I I
I I
I I
I I
I I
I I
I I
I
I I I
Iv=s.\2:V
II
cf':.U~U__
I
I
ft.~~-
1
Analog:! =N/2 Analog:!= N12,3N12,and5NI2
Notethatwehaveshownonlythehighestfrequency foreachhannonic."
906,"Weusethefirst,
third,andfifthhannonics."
907,"Therequiredbandwidth isnow5NJ2,thedifference betweenthe
lowestfrequency 0andthehighestfrequency 5NJ2.Asweemphasized before,weneed
toremember thattherequired bandwidth isproportional tothebitrate."
908,"Inbaseband transmission, therequired bandwidth isproportional tothebitrate;
ifweneedtosendbitsfaster,weneedmorebandwidth."
909,"Byusingthismethod,Table3.2showshowmuchbandwidth weneedtosenddata
atdifferent rates."
910,"Table3.2Bandwidth requirements
Bit Harmonic Harmonics Harmonics
Rate 1 1,3 1,3,5
n=1kbps B=500Hz B=1.5kHz B=2.5kHz
n=10kbps B=5kHz B=15kHz B=25kHz
n=100kbps B=50kHz B=150kHz B=250kHz
Example 3.22
Whatistherequired bandwidth ofalow-pass channelifweneedtosend1Mbpsbyusingbase­
bandtransmission?Bandpass channelSECTION 3.3DIGITAL SIGNALS 79
Solution
Theanswerdependsontheaccuracy desired."
911,"a.Theminimum bandwidth, aroughapproximation, isB=:bitrate/2,or500kHz.Weneed
alow-pass channelwithfrequencies between0and500kHz.
b.Abetterresultcanbeachieved byusingthefirstandthethirdharmonics withtherequired
bandwidth B=:3x500kHz=:1.5MHz.
c.Stillabetterresultcanbeachieved byusingthe first, third,andfifthharmonics with
B=:5 x500kHz =02.5MHz.
Example 3.23
Wehavealow-pass channelwithbandwidth 100kHz.Whatisthemaximum bitrateofthis
channel?"
912,"Solution
Themaximum bitratecanbeachieved ifweusethefirstharmonic."
913,"Thebitrateis2timesthe
available bandwidth, or200kbps."
914,"Broadband Transmission (UsingModulation)
Broadband transmission ormodulation meanschanging thedigitalsignaltoananalog
signalfortransmission."
915,"Modulation allowsustouseabandpass channel-a channelwith
abandwidth thatdoesnotstartfromzero.Thistypeofchannelismoreavailable thana
low-pass channel.Figure3.23showsabandpass channel."
916,"Figure3.23Bandwidth ofabandpass channel
Amplitude
1_~~."
917,"Frequency
Notethatalow-pass channelcanbeconsidered abandpass channelwiththelower
frequency startingatzero."
918,"Figure3.24showsthemodulation ofadigitalsignal.Inthefigure,adigitalsignalis
converted toacomposite analogsignal.Wehaveusedasingle-frequency analogsignal
(calledacarrier);theamplitude ofthecarrierhasbeenchanged tolooklikethedigital
signal.Theresult,however, isnotasingle-frequency signal;itisacomposite signal,as
wewillseeinChapter5.Atthereceiver,thereceivedanalogsignalisconverted todigital,
andtheresultisareplicaofwhathasbeensent."
919,"Iftheavailable channelisabandpass channel~ wecannotsendthedigitalsignaldirectlyto
thechannel; weneedtoconvertthedigitalsignaltoananalogsignalbeforetransmission.80CHAPTER 3DATAANDSIGNALS
Figure3.24Modulation ofadigitalsignalfortransmission onabandpass channel
0 _D'-- ~."
920,"Inputdigitalsignal Outputdigitalsignal
Inputanalogsignalbandwidth
L""Outputanalogsignalbandwidth
/ -,>:~,;:>~Analog/digital
converter t--~'>'''''''--
Available bandwidthDigitaUanalog
converter
--IBandpass channel
Inputanalogsignal Inputanalogsignal
Example 3.24
Anexampleofbroadband transmission usingmodulation isthesendingofcomputer datathrough
atelephone subscriber line,thelineconnecting aresidenttothecentraltelephone office.These
lines,installed manyyearsago,aredesigned tocarryvoice(analogsignal)withalimitedband­
width(frequencies between0and4kHz).Although thischannelcanbeusedasalow-pass chan­
nel,itisnormally considered abandpass channel."
921,"Onereasonisthatthebandwidth issonarrow
(4kHz)thatifwetreatthechannelaslow-pass anduseitforbaseband transmission, themaximum
bitratecanbeonly8kbps.Thesolutionistoconsiderthechannelabandpass channel,convertthe
digitalsignalfromthecomputer toananalogsignal,andsendtheanalogsignal.Wecaninstalltwo
converters tochangethedigitalsignaltoanalogandviceversaatthereceiving end.Theconverter,
inthiscase,iscalledamodem(modulator/demodulator), whichwediscussindetailinChapter5."
922,"Example 3.25
Asecondexample isthedigitalcellulartelephone."
923,"Forbetterreception, digitalcellularphones
converttheanalogvoicesignaltoadigitalsignal(seeChapter16).Although thebandwidth allo­
catedtoacompany providing digitalcellularphoneserviceisverywide,westillcannotsendthe
digitalsignalwithoutconversion."
924,"Thereasonisthatweonlyhaveabandpass channelavailable
betweencallerandcallee.Forexample, iftheavailable bandwidth isWandweallowlOOOcou­
plestotalksimultaneously, thismeanstheavailable channelisWIlOOO, justpartoftheentire
bandwidth."
925,Weneedtoconvertthedigitized voicetoacomposite analogsignalbeforesending.
926,"Thedigitalcellularphonesconverttheanalogaudiosignaltodigitaland then convertitagainto
analogfortransmission overabandpass channel."
927,"3.4TRANSMISSION IMPAIRMENT
Signalstravelthroughtransmission media,whicharenotpetfect.Theimpetfection causes
signalimpairment."
928,"Thismeansthatthesignalatthebeginning ofthemedium isnotthe
sameasthesignalattheendofthemedium."
929,Whatissentisnotwhatisreceived.
930,"Three
causesofimpairment areattenuation, distortion, andnoise(seeFigure3.25).SECTION 3.4TRANSMISSION IMPAIRMENT 81
Figure3.25Causesofimpairment
Attenuation
Attenuation meansalossofenergy.Whenasignal,simpleorcomposite, travels
throughamedium, itlosessomeofitsenergyinovercoming theresistance ofthe
medium."
931,"Thatiswhyawirecarrying electricsignalsgetswarm,ifnothot,aftera
while.Someoftheelectrical energyinthesignalisconverted toheat.Tocompensate
forthisloss,amplifiers areusedtoamplifythesignal.Figure3.26showstheeffectof
attenuation andamplification."
932,"Figure3.26Attenuation
Original Attenuated Amplified
-Affi
Point1Transmission mediumPoint2 Point3
Decibel
Toshowthatasignalhaslostorgainedstrength, engineers usetheunitofthedecibel."
933,"Thedecibel(dB)measures therelativestrengths oftwosignalsoronesignalattwodif­
ferentpoints.Notethatthedecibelisnegativeifasignalisattenuated andpositiveifa
signalisamplified."
934,"Variables PIandP2arethepowersofasignalatpoints1and2,respectively."
935,"Notethat
someengineering booksdefinethedecibelintermsofvoltageinsteadofpower.Inthis
case,becausepowerisproportional tothesquareofthevoltage,theformulaisdB=
20log10(V2IV1).Inthistext,weexpressdBintermsofpower.82CHAPTER 3DATAANDSIGNALS
Example 3.26
Suppose asignaltravelsthroughatransmission medium anditspowerisreducedtoone-half."
936,"ThismeansthatP2=~PI'Inthiscase,theattenuation (lossofpower)canbecalculated as
Pz 0.5PI1010glO- =1010gl0--=10Ioglo0.5=10(-0.3)=-3dB
PI PI
A lossof3dB(-3dB)isequivalent tolosingone-halfthepower."
937,"Example 3.27
Asignaltravelsthroughanamplifier, anditspowerisincreased 10times.ThismeansthatPz=
1OPI'Inthiscase,theamplification (gainofpower)canbecalculated as
Example 3.28
Onereasonthatengineers usethedecibeltomeasurethechangesinthestrengthofasignalisthat
decibelnumbers canbeadded(orsubtracted) whenwearemeasuring severalpoints(cascading)
insteadofjusttwo.InFigure3.27asignaltravelsfrompoint1topoint4.Thesignalisattenuated
bythetimeitreachespoint2.Between points2and3,thesignalisamplified."
938,"Again,between
points3and4,thesignalisattenuated."
939,"Wecanfindtheresultant decibelvalueforthesignaljust
byaddingthedecibelmeasurements betweeneachsetofpoints."
940,"Figure3.27DecibelsforExample 3.28
IdB
:17dB'I'-3dB
Point3Transmission Point4
mediumPoint2 Transmission
mediumPoint11_:_---'--'-=-.3dB__ •
1•----'----
Inthiscase,thedecibelvaluecanbecalculated as
dB=-3+7-3=+1
Thesignalhasgainedinpower."
941,"Example 3.29
Sometimes thedecibelisusedtomeasuresignalpowerinmilliwatts."
942,"Inthiscase, itisreferredto
asdBmandiscalculated asdBm=10loglOPm'wherePmisthepowerinmilliwatts."
943,"Calculate
thepowerofasignalifitsdBm=-30.SECTION 3.4TRANSMISSION IMPAIRMENT 83
Solution
Wecancalculate thepowerinthesignalas
dBm=10log10Pm=-30
loglOPm:=-3Pm=10-3rnW
Example 3.30
Thelossinacableisusuallydefinedindecibels perkilometer (dB/km).Ifthesignalatthe
beginning ofacablewith-0.3dBlkmhasapowerof2mW,whatisthepowerofthesignal
at5km?"
944,"Solution
Thelossinthecableindecibelsis5x(-0.3):::-1.5dB.Wecancalculate thepoweras
Distortion
Distortion meansthatthesignalchangesitsformorshape.Distortion canoccurina
composite signalmadeofdifferent frequencies."
945,"Eachsignalcomponent hasitsown
propagation speed(seethenextsection)throughamedium and,therefore, itsown
delayinarrivingatthefinaldestination."
946,"Differences indelaymaycreateadifference in
phaseifthedelayisnotexactlythesameastheperiodduration."
947,"Inotherwords,signal
components atthereceiverhavephasesdifferent fromwhattheyhadatthesender.The
shapeofthecomposite signalistherefore notthesame.Figure3.28showstheeffectof
distortion onacomposite signal."
948,"Figure3.28Distortion
Composite signal
sent
AtthesenderComponents,
inphaseComposite signal
received
Components,
outofphase
Atthereceiver84CHAPTER 3DATAANDSIGNALS
Noise
Noiseisanothercauseofimpairment."
949,"Severaltypesofnoise,suchasthermalnoise,
induced noise,crosstalk, andimpulse noise,maycorruptthesignal.Thermal noiseis
therandommotionofelectrons inawirewhich creates anextrasignalnotoriginally
sentbythetransmitter."
950,"Induced noisecomes from sourcessuchasmotorsandappli­
ances.Thesedevicesactasasendingantenna, andthetransmission medium actsasthe
receiving antenna."
951,"Crosstalk istheeffectofonewireontheother.Onewireactsasa
sendingantennaandtheotherasthereceiving antenna."
952,"Impulse noiseisaspike(asig­
nalwithhighenergyinaveryshorttime)thatcomes from powerlines,lightning, andso
on.Figure3.29showstheeffectofnoiseonasignal.WediscusserrorinChapter10."
953,"Figure3.29Noise
Transmitted
I
II•Point1Noise
Transmission mediumI
I
I•Point2
Signal-to-Noise Ratio(SNR)
Aswewillseelater,tofindthetheoretical bitratelimit,weneedtoknowtheratioof
thesignalpowertothenoisepower.Thesignal-to-noise ratioisdefinedas
SNR=averagesignalpower
averagenoisepower
Weneedtoconsider theaveragesignalpowerandtheaveragenoisepowerbecause
thesemaychangewithtime.Figure3.30showstheideaofSNR."
954,SNRisactuallytheratioofwhatiswanted(signal)towhatisnotwanted(noise).
955,"AhighSNRmeansthesignalislesscorrupted bynoise;alowSNRmeansthesignalis
morecorrupted bynoise."
956,"Because SNRistheratiooftwopowers, itisoftendescribed indecibelunits,
SNRdB,definedas
SNRcm=lOlogloSNR
Example 3.31
Thepowerofasignalis10mWandthepowerofthenoiseis1/lW;whatarethevaluesofSNR
andSNRdB?SECTION 3.5DATARATELIMITS 85
Figure3.30TwocasesofSNR:ahighSNRandalowSNR
Signal
-
a.LargeSNR
b.SmallSNRNoise
Noise Signal+noise
Solution
ThevaluesofSNRandSN~Bcanbecalculated asfollows:
SNR=10.000flW=10000
ImW '
SNRdB=10loglO10,000=10loglO104=40
Example 3.32
ThevaluesofSNRandSNRdBforanoiseless channelare
SNR=signalpower=<>0o
SNRdB=10loglO 00=<>0
Wecanneverachievethisratioinreallife;itisanideal."
957,"3.5DATARATELIMITS
Averyimportant consideration indatacommunications ishowfastwecansenddata,in
bitspersecond.overachannel.Dataratedependsonthreefactors:
1.Thebandwidth available
2.Thelevelofthesignalsweuse
3.Thequalityofthechannel(thelevelofnoise)
Twotheoretical formulas weredeveloped tocalculate thedatarate:onebyNyquistfor
anoiseless channel."
958,"anotherbyShannon foranoisychannel.86CHAPTER 3DATAANDSIGNALS
Noiseless Channel: NyquistBitRate
Foranoiseless channel, theNyquistbitrateformuladefinesthetheoretical maximum
bitrate
BitRate=2xbandwidth x10g2L
Inthisformula, bandwidth isthebandwidth ofthechannel, Lis thenumberofsignal
levelsusedtorepresent data,andBitRateisthebitrateinbitspersecond."
959,"According totheformula, wemightthinkthat,givenaspecificbandwidth, wecan
haveanybitratewewantbyincreasing thenumberofsigna11eve1s."
960,"Although theidea
istheoretically correct,practically thereisalimit.Whenweincreasethenumberofsig­
nal1eve1s, weimposeaburdenonthereceiver.Ifthenumberoflevelsinasignalisjust2,
thereceivercaneasilydistinguish between a 0anda1.Ifthelevelofasignalis64,the
receivermustbeverysophisticated todistinguish between 64different levels.Inother
words,increasing thelevelsofasignalreducesthereliability ofthesystem."
961,Increasing thelevelsofasignalmayreducethereliability ofthesystem.
962,"Example 3.33
DoestheNyquist theorem bitrateagreewiththeintuitive bitratedescribed inbaseband
transmission?"
963,"Solution
Theymatchwhenwehaveonlytwolevels.Wesaid,inbaseband transmission, thebitrateis2
timesthebandwidth ifweuseonlythefirstharmonic intheworstcase.However, theNyquist
formulaismoregeneralthanwhatwederivedintuitively; itcanbeappliedtobaseband transmis­
sionandmodulation."
964,"Also,itcanbeappliedwhenwehavetwoormorelevelsofsignals."
965,"Example 3.34
Consider anoiseless channelwithabandwidth of3000Hztransmitting asignalwithtwosignal
levels.Themaximum bitratecanbecalculated as
BitRate=2 x3000xlog22=6000bps
Example 3.35
Consider thesamenoiseless channeltransmitting asignalwithfoursignallevels(foreachlevel,
wesend2bits).Themaximum bitratecanbecalculated as
BitRate=2 x3000Xlog24=12,000bps
Example 3.36
Weneedtosend265kbpsoveranoiseless channelwithabandwidth of20kHz.Howmanysig­
nallevels doweneed?SECTION 3.5DATARATELIMITS 87
Solution
WecanusetheNyquistformulaasshown:
265,000=2X20,000XlogzL
log2L=6.625 L=26.625=98.7levels
Sincethisresultisnotapowerof2,weneedtoeitherincrease thenumberoflevelsorreduce
thebitrate.Ifwehave128levels,thebitrateis280kbps.Ifwehave64levels,thebitrateis
240kbps."
966,"NoisyChannel: Shannon Capacity
Inreality,wecannothaveanoiseless channel; thechannelisalwaysnoisy.In1944,
ClaudeShannon introduced aformula, calledtheShannon capacity, todetermine the
theoretical highestdatarateforanoisychannel:
Capacity=bandwidth Xlog2(1+SNR)
Inthisformula, bandwidth isthebandwidth ofthechannel, SNRisthesignal-to­
noiseratio,andcapacityisthecapacityofthechannelinbitspersecond.Notethatinthe
Shannon formulathereisnoindication ofthesignallevel,whichmeansthatnomatter
howmanylevelswehave,wecannotachieveadataratehigherthanthecapacityofthe
channel.Inotherwords,theformuladefinesacharacteristic ofthechannel,notthemethod
oftransmission."
967,"Example 3.37
Consider anextremely noisychannelinwhichthevalueofthesignal-to-noise ratioisalmost
zero.Inotherwords,thenoiseissostrongthatthesignalisfaint.Forthischannelthecapacity C
iscalculated as
C=Blog2(1+SNR)=B10gz(l+0)=Blog21::;;:Bx0:;;;;0
Thismeansthatthecapacity ofthischanneliszeroregardless ofthebandwidth."
968,"Inother
words,wecannotreceiveanydatathroughthischannel."
969,"Example 3.38
Wecancalculate thetheoretical highestbitrateofaregulartelephone line.Atelephone linenor­
mallyhasabandwidth of3000Hz(300to3300Hz)assigned fordatacommunications."
970,"Thesig­
nal-to-noise ratioisusually3162.Forthischannelthecapacity iscalculated as
C=Blog2(1+SNR)=3000log2(l+3162)=3000log23163
::::::3000x11.62=34,860bps
Thismeansthatthehighestbitrateforatelephone lineis34.860kbps.Ifwewanttosend
datafasterthanthis,wecaneitherincrease thebandwidth ofthelineorimprove thesignal-to­
noiseratio.88CHAPTER 3DATAANDSIGNALS
Example 3.39
Thesignal-to-noise ratioisoftengivenindecibels."
971,"AssumethatSN~B=36andthechannel
bandwidth is2MHz.Thetheoretical channelcapacitycanbecalculated as
SNRdB=10loglOSNR...SNR=lOSNRoB/10 ...SNR::;103.6=3981
C=Blog2(1+SNR)= 2X106Xlog23982=24Mbps
Example 3.40
Forpractical purposes, whentheSNRisveryhigh,wecanassumethatSNR+Iisalmostthe
sameasSNR.Inthesecases,thetheoretical channelcapacitycanbesimplified to
SNRdBC=BX--=3
Forexample, wecancalculate thetheoretical capacityoftheprevious exampleas
36C=2MHzX -=24Mbps3
UsingBothLimits
Inpractice, weneedtousebothmethods tofindthelimitsandsignallevels.Letusshow
thiswithanexample."
972,"Example 3.41
WehaveachannelwithaI-MHzbandwidth."
973,"TheSNRforthischannelis63.Whataretheappro­
priatebitrateandsignallevel?"
974,"Solution
First,weusetheShannon formulatofindtheupperlimit."
975,"C=Blog2(l+SNR)=106log2(1+63)=10610g264=6Mbps
TheShannon formulagivesus6Mbps,theupperlimit.Forbetterperformance wechoose
something lower,4Mbps,forexample."
976,"ThenweusetheNyquistformulatofindthenumberof
signallevels."
977,"4Mbps=2x 1MHzxlog2L...L=4
TheShannon capacity givesustheupperlimit;
theNyquistformulatellsushowmanysignallevelsweneed.SECTION 3.6PERFORMANCE 89
3.6PERFORMANCE
Uptonow,wehavediscussed thetoolsoftransmitting data(signals) overanetwork
andhowthedatabehave.Oneimportant issueinnetworking istheperformance ofthe
network-how goodisit?Wediscussqualityofservice,anoverallmeasurement of
network performance, ingreaterdetailinChapter24.Inthissection,weintroduce
termsthatweneedforfuturechapters."
978,"Bandwidth
Onecharacteristic thatmeasures networkperformance isbandwidth."
979,"However, theterm
canbeusedintwodifferent contextswithtwodifferent measuring values:bandwidth in
hertzandbandwidth inbitspersecond."
980,"Bandwidth inHertz
Wehavediscussed thisconcept."
981,"Bandwidth inhertzistherangeoffrequencies con­
tainedinacomposite signalortherangeoffrequencies achannelcanpass.Forexam­
ple,wecansaythebandwidth ofasubscriber telephone lineis4kHz.
Bandwidth inBitsperSeconds
Thetermbandwidth canalsorefertothenumberofbitspersecondthatachannel, a
link,orevenanetworkcantransmit."
982,"Forexample, onecansaythebandwidth ofaFast
Ethernet network(orthelinksinthisnetwork) isamaximum of100Mbps.Thismeans
thatthisnetworkcansend100Mbps."
983,"Relationship
Thereisanexplicitrelationship betweenthebandwidth inhertzandbandwidth inbits
perseconds.Basically, anincreaseinbandwidth inhertzmeansanincreaseinbandwidth
inbitspersecond.Therelationship dependsonwhetherwehavebaseband transmission
ortransmission withmodulation."
984,Wediscussthisrelationship inChapters 4and5.
985,"Innetworking, weusethetermbandwidth intwocontexts."
986,"oThefirst,bandwidth inhertz,referstotherangeoffrequencies inacomposite
signalortherangeoffrequencies thatachannelcanpass."
987,"oThesecond,bandwidth inbitspersecond,referstothespeedofbittransmis­
sioninachannelorlink."
988,"Example 3.42
Thebandwidth ofasubscriber lineis4kHzforvoiceordata.Thebandwidth ofthislinefordatatrans­
missioncanbeupto56,000bpsusingasophisticated modemtochangethedigitalsignaltoanalog."
989,"Example 3.43
Ifthetelephone company improves thequalityofthelineandincreases thebandwidth to8kHz,
wecansend112,000bpsbyusingthesametechnology asmentioned inExample 3.42.90CHAPTER 3DATAANDSIGNALS
Throughput
Thethroughput isameasureofhowfastwecanactuallysenddatathroughanetwork."
990,"Although, atfirstglance,bandwidth inbitspersecondandthroughput seemthesame,
theyaredifferent."
991,"Alinkmayhaveabandwidth ofBbps,butwecanonlysendTbps
throughthislinkwithTalwayslessthanB.Inotherwords,thebandwidth isapotential
measurement ofalink;thethroughput isanactualmeasurement ofhowfastwecan
senddata.Forexample, wemayhavealinkwithabandwidth of1Mbps,butthe
devicesconnected totheendofthelinkmayhandleonly200kbps.Thismeansthatwe
cannotsendmorethan200kbpsthroughthislink."
992,"Imagine ahighway designed totransmit 1000carsperminutefromonepoint
toanother.However, ifthereiscongestion ontheroad,thisfiguremaybereducedto
100carsperminute.Thebandwidth is1000carsperminute;thethroughput is100cars
perminute."
993,"Example 3.44
Anetworkwithbandwidth of10Mbpscanpass only anaverageof12,000framesperminute
witheachframecarryinganaverageof10,000bits.Whatisthethroughput ofthisnetwork?"
994,"Solution
Wecancalculate thethroughput as
Throughput=12,000x10,000=2Mbps
60
Thethroughput isalmostone-fifthofthebandwidth inthiscase."
995,"Latency(Delay)
Thelatencyordelaydefineshowlongittakesforanentiremessage tocompletely
arriveatthedestination fromthetimethefirstbitissentoutfromthesource.Wecan
saythat latency ismadeoffourcomponents: propagation time,transmission time,
queuingtimeandprocessing delay."
996,"Latency=propagation time+transmission time+queuingtime+processing delay
Propagation Time
Propagation timemeasures thetimerequired forabittotravelfromthesourcetothe
destination."
997,"Thepropagation timeiscalculated bydividingthedistancebythepropaga­
tionspeed."
998,"Propagation time=Dist:mce
Propagation speed
Thepropagation speedofelectromagnetic signalsdependsonthemediumandon
thefrequency ofthesignaLForexample, inavacuum, lightispropagated withaspeed
of3 x108mfs.Itislowerinair;itismuchlowerincable.SECTION 3.6PERFORMANCE 91
Example 3.45
Whatisthepropagation timeifthedistancebetween thetwopointsis12,000km?Assumethe
propagation speedtobe2.4x108mlsincable."
999,"Solution
Wecancalculate thepropagation timeas
.."
1000,"12000x1000Propagation tIme= ' =50ms
2.4x108
Theexample showsthatabitcangoovertheAtlanticOceaninonly50msifthereisadirect
cablebetweenthesourceandthedestination."
1001,"Tra/lsmissio/l Time
Indatacommunications wedon'tsendjust1bit,wesendamessage."
1002,"Thefirstbitmay
takeatimeequaltothepropagation timetoreachitsdestination; thelastbitalsomay
takethesameamountoftime.However, thereisatimebetween thefirstbitleavingthe
senderandthelastbitarrivingatthereceiver."
1003,"Thefirstbitleavesearlierandarrivesear­
lier;thelastbitleaveslaterandarriveslater.Thetimerequired fortransmission ofa
message depends onthesizeofthemessage andthebandwidth ofthechannel."
1004,"Transmission time=Message size
Bandwidth
Example 3.46
Whatarethepropagation timeandthetransmission timefora2.5-kbyte message (ane-mail)if
thebandwidth ofthenetworkis1Gbps?Assumethatthedistancebetweenthesenderandthe
receiveris12,000kmandthatlighttravelsat2.4x108mls."
1005,"Solution
Wecancalculate thepropagation andtransmission timeas
.."
1006,"12000x1000PropagatIon Hme=~.4x108=50ms
T..."
1007,"2500x80020ranSIlllSSlOn tIme= 9=.ms
10
Notethatinthiscase,because themessage isshortandthebandwidth ishigh,the
dominant factoristhepropagation time,notthetransmission time.Thetransmission
timecanbeignored."
1008,"Example 3.47
Whatarethepropagation timeandthetransmission timefora5-Mbyte message(animage)ifthe
bandwidth ofthenetwork is1Mbps?Assumethatthedistance between thesenderandthe
receiveris12,000kmandthatlighttravelsat2.4x108mls.92CHAPTER 3DATAANDSIGNALS
Solution
Wecancalculate thepropagation andtransmission timesas
., 12000X1000PropagatIon tIme::::' 8::::50ms
2.4x10
T...5,000,000x840ranSffilSSlOn tIme:::: 6 ::::S
10
Notethatinthiscase,becausethemessage isverylongandthebandwidth isnotvery
high,thedominant factoristhetransmission time,notthepropagation time.Thepropa­
gationtimecanbeignored."
1009,"Queuing Time
Thethirdcomponent inlatencyisthequeuingtime,thetimeneededforeachinterme­
diateorenddevicetoholdthemessage beforeitcanbeprocessed."
1010,"Thequeuingtimeis
notafixedfactor;itchanges withtheloadimposed onthenetwork."
1011,"Whenthereis
heavytrafficonthenetwork, thequeuingtimeincreases."
1012,"Anintermediate device,such
asarouter,queuesthearrivedmessages andprocesses themonebyone.Ifthereare
manymessages, eachmessage willhavetowait."
1013,"Bandwidth-Delay Product
Bandwidth anddelayaretwoperformance metricsofalink.However, aswewillseein
thischapterandfuturechapters, whatisveryimportant indatacommunications isthe
productofthetwo,thebandwidth-delay product."
1014,"Letuselaborate onthisissue,using
twohypothetical casesasexamples."
1015,oCase1.Figure3.31showscase1.
1016,"Figure3.31Fillingthelinkwithbitsforcase1
Sender Receiver
1sBandwidth: 1bpsDelay:5 s
Bandwidth xdelay=5bits
1stbit ~_..."
1017,"1stbit
1s
LetUSassumethatwehavealinkwithabandwidth of1bps(unrealistic, butgood
fordemonstration purposes)."
1018,"Wealsoassumethatthedelayofthelinkis5 s(also
unrealistic)."
1019,"Wewanttoseewhatthebandwidth-delay productmeansinthiscase.SECTION 3.6PERFORMANCE 93
Looking atfigure,wecansaythatthisproduct1x 5isthemaximum numberof
bitsthatcanfillthelink.Therecanbenomorethan5bitsatanytimeonthelink."
1020,"oCase2.Nowassumewehaveabandwidth of4bps.Figure3.32showsthatthere
canbemaximum 4 x 5=20bitsontheline.Thereasonisthat,ateachsecond,
thereare4bitsontheline;thedurationofeachbitis0.25s."
1021,"Figure3.32Fillingthelinkwithbitsincase2
Bandwidth: 4bps Delay:5 s
Bandwidth xdelay=20bits
After1sI---'-----'----.l..-.L-l
After2 s
After4 s
1s 1s 1s 1s 1sReceiver
r
Theabovetwocasesshowthattheproductofbandwidth anddelayisthenumberof
bitsthatcanfillthelink.Thismeasurement isimportant ifweneedtosenddatainbursts
andwaitfortheacknowledgment ofeachburstbeforesendingthenextone.Tousethe
maximum capability ofthelink,weneedtomakethesizeofourburst2timestheproduct
ofbandwidth anddelay;weneedtofillupthefull-duplex channel(twodirections)."
1022,"The
sendershouldsendaburstofdataof(2xbandwidth xdelay)bits.Thesenderthenwaits
forreceiver acknowledgment forpartoftheburstbeforesendinganotherburst.The
amount2 xbandwidth xdelayisthenumberofbitsthatcanbeintransition atanytime."
1023,Thebandwidth~delay productdefinesthenumberofbitsthatcanrdlthelink.
1024,"Example 3.48
Wecanthinkaboutthelinkbetween twopointsasapipe.Thecrosssectionofthepiperepresents
thebandwidth, andthelengthofthepiperepresents thedelay.Wecansaythevolumeofthepipe
definesthebandwidth-delay product,asshowninFigure3.33."
1025,"Figure3.33Conceptofbandwidth-delay product
Length:delay
Crosssection:bandwidth94CHAPTER 3DATAANDSIGNALS
Jitter
Anotherperformance issuethatisrelatedtodelayisjitter.Wecanroughlysaythatjitter
isaproblemifdifferent packetsofdataencounter different delaysandtheapplication
usingthedataatthe receiver siteistime-sensitive (audioandvideodata,forexample)."
1026,"Ifthedelayforthefirstpacketis20ms,forthesecondis45ms,andforthethirdis
40ms,thenthereal-time application thatusesthepacketsenduresjitter.Wediscussjitter
ingreaterdetailinChapter29."
1027,"3.7RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
1028,"Books
Dataandsignalsareelegantly discussed inChapters 1to6of[Pea92]."
1029,"[CouOl]gives
anexcellent coverage aboutsignalsinChapter 2.Moreadvanced materials canbe
foundin[Ber96]."
1030,[Hsu03]givesagoodmathematical approach tosignaling.
1031,"Complete
coverage ofFourierAnalysis canbefound in [Spi74].Dataand signals arediscussed in
Chapter3of[Sta04]andSection2.1of[Tan03]."
1032,"3.8KEYTERMS
analog
analogdata
analogsignal
attenuation
bandpass channel
bandwidth
baseband transmission
bitrate
bitspersecond(bps)
broadband transmission
composite signal
cycle
decibel(dB)
digital
digitaldata
digitalsignal
distortionFourieranalysis
frequencyfrequency-domain
fundamental frequency
harmonic
Hertz(Hz)
jitter
low-pass channel
noise
nonperiodic signal
Nyquistbitrate
peakamplitude
periodperiodicsignal
phase
processing delay
propagation speedpropagation time
queuingtime
Shannon capacity
signal
signal-to-noise ratio(SNR)SECTION 3.9SUMMARY 95
sinewave
throughput
time-domain
transmission time
wavelength
3.9SUMMARY
oDatamustbetransformed toelectromagnetic signalstobetransmitted."
1033,"oDatacanbeanalogordigital.Analogdataarecontinuous andtakecontinuous
values.Digitaldatahavediscretestatesandtakediscretevalues."
1034,"oSignalscanbeanalogordigital.Analogsignalscanhaveaninfinitenumberof
valuesinarange;digital,signalscanhaveonlyalimitednumberofvalues."
1035,"oIndatacommunications, wecommonly useperiodic analogsignalsandnonperi-
odicdigitalsignals."
1036,oFrequency andperiodaretheinverseofeachother.
1037,oFrequency istherateofchangewithrespecttotime.
1038,oPhasedescribes thepositionofthewaveform relativetotimeO.
1039,"oAcomplete sinewaveinthetimedomaincanberepresented byonesinglespikein
thefrequency domain."
1040,"oAsingle-frequency sinewaveisnotusefulindatacommunications; weneedto
sendacomposite signal,asignalmadeofmanysimplesinewaves."
1041,"oAccording toFourieranalysis, anycomposite signalisacombination ofsimple
sinewaveswithdifferent frequencies, amplitudes, andphases."
1042,"oThebandwidth ofacomposite signalisthedifference between thehighestandthe
lowestfrequencies contained inthatsignal."
1043,oAdigitalsignalisacomposite analogsignalwithaninfinitebandwidth.
1044,"oBaseband transmission ofadigitalsignalthatpreserves theshapeofthedigital
signalispossibleonlyifwehavealow-pass channelwithaninfiniteorverywide
bandwidth."
1045,"oIftheavailable channelisabandpass channel, wecannotsendadigitalsignal
directlytothechannel; weneedtoconvertthedigitalsignaltoananalogsignal
beforetransmission."
1046,"oForanoiseless channel, theNyquistbitrateformuladefinesthetheoretical maxi­
mumbitrate.Foranoisychannel, weneedtousetheShannon capacity tofindthe
maximum bitrate."
1047,"oAttenuation, distortion, andnoisecanimpairasignal."
1048,oAttenuation isthelossofasignal'senergyduetotheresistance ofthemedium.
1049,"oDistortion isthealteration ofasignalduetothediffering propagation speedsof
eachofthefrequencies thatmakeupasignal."
1050,oNoiseistheexternalenergythatcorruptsasignal.
1051,"oThebandwidth-delay productdefinesthenumberofbits thatcanfillthelink.96CHAPTER 3DATAANDSIGNALS
3.10PRACTICE SET
ReviewQuestions
1.Whatistherelationship between periodandfrequency?"
1052,2.Whatdoestheamplitude ofasignalmeasure?
1053,"Whatdoesthefrequency ofasignal
measure?"
1054,Whatdoesthephaseofasignalmeasure?
1055,3.Howcanacomposite signalbedecomposed intoitsindividual frequencies?
1056,4.Namethreetypesoftransmission impairment.
1057,5.Distinguish between baseband transmission andbroadband transmission.
1058,6.Distinguish between alow-pass channelandaband-pass channel.
1059,7.WhatdoestheNyquisttheorem havetodowithcommunications?
1060,8.WhatdoestheShannon capacity havetodowithcommunications?
1061,9.Whydoopticalsignalsusedinfiberopticcableshaveaveryshortwavelength?
1062,"10.Canwesayifasignalisperiodic or nonperiodic byjustlookingatitsfrequency
domainplot?How?"
1063,11.Isthefrequency domainplotofavoicesignaldiscreteorcontinuous?
1064,12.Isthefrequency domainplotofanalarmsystemdiscreteorcontinuous?
1065,13.Wesendavoicesignalfromamicrophone toarecorder.
1066,"Isthisbaseband orbroad­
bandtransmission?"
1067,"14.WesendadigitalsignalfromonestationonaLANtoanotherstation.Isthisbase­
bandorbroadband transmission?"
1068,"15.Wemodulate severalvoicesignalsandsendthemthroughtheair.Isthisbaseband
orbroadband transmission?"
1069,"Exercises
16.Giventhefrequencies listedbelow,calculate thecorresponding periods."
1070,"a.24Hz
b.8MHz
c.140KHz
17.Giventhefollowing periods,calculate thecorresponding frequencies."
1071,"a.5s
b.12Jls
c.220ns
18.WhatisthephaseshiftforthefoIlowing?"
1072,"a.Asinewavewiththemaximum amplitude attimezero
b.Asinewavewithmaximum amplitude after1/4cycle
c.Asinewavewithzeroamplitude after3/4cycleandincreasing
19.Whatisthebandwidth ofasignalthatcanbedecomposed intofivesinewaves
with frequencies at0,20,50,100,and200Hz?Allpeakamplitudes arethesame."
1073,"Drawthebandwidth.SECTION 3.10PRACTICE SET 97
20.Aperiodiccomposite signalwithabandwidth of2000Hziscomposed oftwosine
waves.Thefirstonehasafrequency of100Hzwithamaximum amplitude of20V;
thesecondonehasamaximum amplitude of5V.Drawthebandwidth."
1074,"21.Whichsignalhasawiderbandwidth, asinewavewithafrequency of100Hzora
sine wave withafrequency of200Hz?"
1075,22.Whatisthebitrateforeachofthefollowing signals?
1076,"a.Asignalinwhich1bitlasts0.001s
b.Asignalinwhich1bitlasts2ms
c.Asignalinwhich10bitslast20J-ls
23.Adeviceissendingoutdataattherateof1000bps."
1077,a.Howlongdoesittaketosendout10bits?
1078,b.Howlongdoesittaketosendoutasinglecharacter (8bits)?
1079,"c.Howlongdoesittaketosendafileof100,000characters?"
1080,24.WhatisthebitrateforthesignalinFigure3.34?
1081,"Figure3.34Exercise 24
16ns
---t=:i--J~-...;..---+-.....;.--.;....-d ...~
1 TI~
25.Whatisthefrequency ofthesignalinFigure3.35?"
1082,"Figure3.35Exercise 25
Time \TVVVVV V~I, 4ms .1
1 I
V\f\f\f\f\f\f\f\:..."
1083,26.Whatisthebandwidth ofthecomposite signalshowninFigure3.36.
1084,"Figure3.36Exercise 26
Frequency
5 5 5 55I9SCHAPTER 3DATAANDSIGNALS
27.Aperiodiccomposite signalcontainsfrequencies from10to30KHz,eachwithan
amplitude of10V.Drawthefrequency spectrum."
1085,"2K.Anon-periodic composite signalcontains frequencies from10to30KHz.The
peakamplitude is10Vforthelowestandthehighestsignalsandis30Vforthe
20-KHzsignal.Assuming thattheamplitudes changegradually fromtheminimum
tothemaximum, drawthefrequency spectrum."
1086,"20.ATVchannelhasabandwidth of6MHz.Ifwesendadigitalsignalusingone
channel,whatarethedataratesifweuseoneharmonic, threeharmonics, andfive
harmonics?"
1087,"30.AsignaltravelsfrompointAtopointB.AtpointA,thesignalpoweris100W.At
pointB,thepoweris90W.Whatistheattenuation indecibels?"
1088,"31.Theattenuation ofasignalis-10dB.Whatisthefinalsignalpowerifitwasorigi­
nally5W?"
1089,"32.Asignalhaspassedthroughthreecascaded amplifiers, eachwitha 4dBgain."
1090,Whatisthetotalgain?Howmuchisthesignalamplified?
1091,"33.Ifthebandwidth ofthechannelis5Kbps,howlongdoesittaketosendaframeof
100,000bitsoutofthisdevice?"
1092,"3cf.Thelightofthesuntakesapproximately eightminutestoreachtheearth.Whatis
thedistancebetweenthesunandtheearth?"
1093,"35.Asignalhasawavelength of111minair.Howfarcanthefrontofthewavetravel
during1000periods?"
1094,"36.Alinehasasignal-to-noise ratioof1000andabandwidth of4000KHz.Whatis
themaximum dataratesupported bythisline?"
1095,37.Wemeasuretheperformance ofatelephone line(4KHzofbandwidth).
1096,"Whenthe
signalis10V,thenoiseis5 mV.Whatisthemaximum dataratesupported bythis
telephone line?"
1097,"3X.Afilecontains2millionbytes.Howlongdoesittaketodownload thisfileusinga
56-Kbps channel?"
1098,1-Mbpschannel?
1099,"39.Acomputer monitorhasaresolution of1200by1000pixels.Ifeachpixeluses
1024colors,howmanybitsareneededtosendthecomplete contentsofascreen?"
1100,"40.Asignalwith200milliwatts powerpassesthrough10devices,eachwithanaverage
noiseof2microwatts."
1101,WhatistheSNR?WhatistheSNRdB?
1102,"4I.Ifthepeakvoltagevalueofasignalis20timesthepeakvoltagevalueofthenoise,
whatistheSNR?WhatistheSNRdB?"
1103,"42.Whatisthetheoretical capacityofachannelineachofthefollowing cases:
a.Bandwidth: 20KHzSNRdB=40
b.Bandwidth: 200KHzSNRdB=4
c.Bandwidth: 1MHz SNRdB=20
43.Weneedtoupgrade achanneltoahigherbandwidth."
1104,"Answerthefollowing
questions:
a.Howistherateimproved ifwedoublethebandwidth?"
1105,"b.Howistherateimproved ifwedoubletheSNR?SECTION 3.10PRACTICE SET99
44.Wehaveachannelwith4KHzbandwidth."
1106,"Ifwewanttosenddataat100Kbps,
whatistheminimum SNRdB?WhatisSNR?"
1107,"45.Whatisthetransmission timeofapacketsentbyastationifthelengthofthe
packetis1millionbytesandthebandwidth ofthechannelis200Kbps?"
1108,"46.Whatisthelengthofabitinachannelwithapropagation speedof2 x108mlsif
thechannel bandwidth is
a.1Mbps?"
1109,h.10Mbps?
1110,c.100Mbps?
1111,"-1-7.Howmanybitscanfitonalinkwitha 2msdelayifthebandwidth ofthelinkis
a.1Mbps?"
1112,h.10Mbps?
1113,c.100Mbps?
1114,"-1-X.Whatisthetotaldelay(latency) foraframeofsize5millionbitsthatisbeingsent
onalinkwith10routerseachhavingaqueuingtimeof2Ilsandaprocessing time
of1Ils.Thelengthofthelinkis2000Km.Thespeedoflightinsidethelinkis2 x
108mls.Thelinkhasabandwidth of5Mbps.Whichcomponent ofthetotaldelay
isdominant?"
1115,"Whichoneisnegligible?CHAPTER 4
DigitalTransmission
Acomputer network isdesigned tosendinformation fromonepointtoanother.This
information needstobeconverted toeitheradigitalsignalorananalogsignalfortrans­
mission."
1116,"Inthischapter,wediscussthefirstchoice,conversion todigitalsignals;in
Chapter5,wediscussthesecondchoice,conversion toanalogsignals."
1117,"Wediscussed theadvantages anddisadvantages ofdigitaltransmission overanalog
transmission inChapter3.Inthischapter,weshowtheschemes andtechniques that
weusetotransmit datadigitally."
1118,"First,wediscussdigital-to-digital conversion tech­
niques,methodswhichconvertdigitaldatatodigitalsignals.Second,wediscussanalog­
to-digital conversion techniques, methods whichchangeananalogsignaltoadigital
signaLFinally,wediscusstransmission modes."
1119,"4.1
DIGITAL~TO~DIGITAL CONVERSION
InChapter3,wediscussed dataandsignals.Wesaidthatdatacanbeeitherdigitalor
analog.Wealsosaidthatsignalsthatrepresent datacanalsobedigitaloranalog.Inthis
section,weseehowwecanrepresent digitaldatabyusingdigitalsignals.Theconver­
sioninvolvesthreetechniques: linecoding,blockcoding,andscrambling."
1120,"Linecoding
isalways needed~blockcodingandscrambling mayormaynotbeneeded."
1121,"LineCoding
Linecodingistheprocessofconverting digitaldatatodigitalsignals.Weassumethat
data,intheformoftext,numbers, graphical images,audio,orvideo,arestoredincom­
putermemoryassequences ofbits(seeChapter 1).Linecodingconverts asequence of
bitstoadigitalsignal.Atthesender,digitaldataareencodedintoadigitalsignal;atthe
receiver, thedigitaldataarerecreated bydecoding thedigitalsignal.Figure4.1shows
theprocess."
1122,"Characteristics
Beforediscussing differentlinecoding schemes, weaddresstheircommon characteristics."
1123,"101102CHAPTER 4DIGITAL TRANSMISSION
Figure4.1Linecodinganddecoding
Sender Receiver
Digitaldata
1°101""."
1124,"1011DigitalsignalDigitaldata
1°101••'1011
SignalElement VersusDataElement Letusdistinguish between adataelement
andasignalelement."
1125,"Indatacommunications, ourgoalistosenddataelements."
1126,"A
dataelementisthesmallestentitythatcanrepresent apieceofinformation: thisisthe
bit.Indigitaldata communications, asignalelementcarriesdataelements."
1127,"Asignal
elementistheshortestunit(timewise) ofadigitalsignal.Inotherwords,dataelements
arewhatweneedtosend;signalelements arewhatwecansend.Dataelements are
beingcarried;signalelements arethecarriers."
1128,"Wedefinearatiorwhichisthenumberofdataelements carriedbyeachsignalele­
ment.Figure4.2showsseveralsituations withdifferentvaluesofr."
1129,"Figure4.2Signalelementversusdataelement
Idataelement Idataelement
o o
~-
element 2signal
elements
a.Onedataelementperonesignal
element(r=1)b.Onedataelementpertwosignal
elements(r=t)
2dataelements 4dataelements
1101
---16_­
3signal
elementsIsignal
elementIII01II
I---'
-l=:F
c.Twodataelements peronesignal
element(r=2)d.Fourdataelements perthreesignal
elements(r=1)
Inpartaofthefigure,onedataelementiscarriedbyonesignalelement(r=1).In
partbofthefigure,weneedtwosignalelements (twotransitions) tocarryeachdataSECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 103
element(r=!).Wewillseelaterthattheextrasignalelementisneededtoguarantee2synchronization."
1130,"Inpartcofthefigure,asignalelementcarriestwodataelements (r=2)."
1131,"Finally,inpartd,agroupof4bitsisbeingcarriedbyagroupofthreesignalelements
(r=~).Foreverylinecodingschemewediscuss,wewillgivethevalueofr."
1132,"3 .Ananalogymayhelphere.Supposeeachdataelement ISapersonwhoneedstobe
carriedfromoneplacetoanother.Wecanthinkofasignalelementasavehiclethatcan
carrypeople.Whenr=1,itmeanseachpersonisdrivingavehicle.Whenr>1,it
meansmorethanonepersonistravelling inavehicle(acarpool,forexample)."
1133,"Wecan
alsohavethecasewhereonepersonisdrivingacarandatrailer(r=~)."
1134,"DataRateVersusSignalRateThedataratedefinesthenumberofdataelements
(bits)sentinIs.Theunitisbitspersecond(bps).Thesignalrateisthenumberofsig­
nalelements sentinIs.Theunitisthebaud.Thereareseveralcommon terminologies
usedintheliterature."
1135,"Thedatarateissometimes calledthebitrate;thesignalrateis
sometimes calledthepulserate,themodulation rate,orthebaudrate."
1136,"Onegoalindatacommunications istoincreasethedataratewhile decreasing the
signalrate.Increasing thedatarateincreases thespeedoftransmission; decreasing the
signalratedecreases thebandwidth requirement."
1137,"Inourvehicle-people analogy, we
needtocarrymorepeopleinfewervehiclestopreventtrafficjams.Wehavealimited
bandwidth inourtransportation system."
1138,"Wenowneedtoconsidertherelationship betweendatarateandsignalrate(bitrate
andbaudrate).Thisrelationship, ofcourse,dependsonthevalueofr.Italsodepends
onthedatapattern.Ifwehaveadatapatternofall1sorallOs,thesignalratemaybe
different fromadatapatternofalternating OsandIs.Toderiveaformulafortherela­
tionship, weneedtodefinethreecases:theworst,best,andaverage.Theworstcaseis
whenweneedthemaximum signalrate;thebestcaseiswhenweneedtheminimum."
1139,"Indatacommunications, weareusuallyinterested intheaveragecase.Wecanformu­
latetherelationship betweendatarateandsignalrateas
1S=cxNx-baudr
whereNisthedatarate(bps);cisthecasefactor,whichvariesforeachcase;Sisthe
numberofsignalelements; andristhepreviously definedfactor."
1140,"Example 4.1
Asignaliscarrying datain which onedataelementisencoded asonesignalelement(r=1).If
thebitrateis100kbps,whatistheaveragevalueofthebaudrateifcisbetween0andl?"
1141,"Solution
Weassumethattheaveragevalueofcis~.Thebaudrateisthen
111S=cxNx -= -x100,000x-1=50,000=50kbaudr 2
Bandwidth Wediscussed inChapter3thatadigitalsignalthatcarriesinfonnation is
nonperiodic."
1142,"Wealsoshowedthatthebandwidth ofanonperiodic signaliscontinuous
withaninfiniterange.However, mostdigitalsignalsweencounter inreallifehavea104CHAPTER 4DIGITAL TRANSMISSION
bandwidth withfinitevalues.Inotherwords,thebandwidth istheoretically infinite,but
manyofthecomponents havesuchasmallamplitude thattheycanbeignored."
1143,"The
effective bandwidth isfinite.Fromnowon,whenwetalkaboutthebandwidth ofadig­
italsignal,weneedtoremember thatwearetalkingaboutthiseffective bandwidth."
1144,"Although theactualbandwidth ofadigitalsignalisinfinite,theeffectivebandwidth isfinite."
1145,"Wecansaythatthebaudrate,notthebitrate,determines therequired bandwidth
foradigitalsignal.IfweusethetranspOltation analogy,thenumberofvehiclesaffects
thetraffic,notthenumberofpeoplebeingcarried.Morechangesinthesignalmean
injecting morefrequencies intothesignal.(Recallthatfrequency meanschangeand
changemeansfrequency.) Thebandwidth reflectstherangeoffrequencies weneed."
1146,Thereisarelationship between thebaudrate(signalrate)andthebandwidth.
1147,"Band­
widthisacomplex idea.Whenwetalkaboutthebandwidth, wenormally definea
rangeoffrequencies."
1148,"Weneedtoknowwherethisrangeislocatedaswellasthevalues
ofthelowestandthehighestfrequencies."
1149,"Inaddition, theamplitude (ifnotthephase)
ofeachcomponent isanimpOltant issue.Inotherwords,weneedmoreinformation
aboutthebandwidth thanjustitsvalue;weneedadiagramofthebandwidth."
1150,"Wewill
showthebandwidth formostschemes wediscussinthechapter.Forthemoment, we
cansaythatthebandwidth (rangeoffrequencies) isproportional tothesignalrate
(baudrate).Theminimum bandwidth canbegivenas
1Bmin=:c><N><­r
Wecansolveforthemaximum datarateifthebandwidth ofthechannelisgiven."
1151,"1Nmax=-xBxrc
Example 4.2
Themaximum datarateofachannel(seeChapter3)isNmax=2><B><log2L(definedbythe
Nyquistformula)."
1152,Doesthisagreewiththeprevious formulaforNmax?
1153,"Solution
AsignalwithLlevelsactuallycancarrylog2Lbitsperlevel.Ifeachlevelcorresponds toonesig­
nalelementandweassumetheaveragecase(c=~),thenwehave
Baseline Wandering Indecoding adigitalsignal,thereceivercalculates arunning
averageofthereceived signalpower.Thisaverageiscalledthebaseline."
1154,"Theincoming
signalpowerisevaluated againstthisbaseline todetermine thevalueofthedataele­
ment.AlongstringofOsor1scancauseadriftinthebaseline(baseline wandering)
andmakeitdifficultforthereceivertodecodecorrectly."
1155,"Agoodlinecodingscheme
needstopreventbaselinewandering.SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 105
DCComponents Whenthevoltagelevelinadigitalsignalisconstant forawhile,
thespectrum createsverylowfrequencies (resultsofFourieranalysis)."
1156,"Thesefre­
quencies aroundzero,calledDC(direct-current) components, presentproblems fora
systemthatcannotpasslowfrequencies orasystemthatuseselectrical coupling
(viaatransformer)."
1157,"Forexample, atelephone linecannotpassfrequencies below
200Hz.Alsoalong-distance linkmayuseoneormoretransformers toisolate
different partsofthelineelectrically."
1158,"Forthesesystems, weneedaschemewithno
DCcomponent."
1159,"Self-synchronization Tocorrectly interpret thesignalsreceived fromthesender,
thereceiver's bitintervals mustcorrespond exactlytothesender's bitintervals.Ifthe
receiverclockisfasterorslower,thebitintervals arenotmatched andthereceivermight
misinterpret thesignals.Figure4.3showsasituation inwhichthereceiverhasashorter
bitduration."
1160,"Thesendersends10110001,whilethereceiverreceives110111000011."
1161,"Figure4.3Effectoflackofsynchronization
a.SentJoI
I
IoJ I
o :0 :
J I
I1""""'""----;
I
Time
I
I
1I
I
b.ReceivedII
1I1 0 0 0 0
III
1I1
I
Time
Aself-synchronizing digitalsignalincludes timinginformation inthedatabeing
transmitted."
1162,"Thiscanbeachieved iftherearetransitions inthesignalthatalertthe
receivertothebeginning, middle,orendofthepulse.Ifthereceiver's clockisoutof
synchronization, thesepointscanresettheclock."
1163,"Example 4.3
Inadigitaltransmission, thereceiverclockis0.1percentfasterthanthesenderclock.Howmany
extrabitsperseconddoesthereceiver receiveifthedatarateis1kbps?Howmanyifthedata
rateis1Mbps?"
1164,"Solution
At1kbps,thereceiverreceives1001bpsinsteadof1000bps."
1165,"1000bitssent 1001bitsreceived 1extrabps106CHAPTER 4DIGITAL TRANSMISSION
At1Mbps,thereceiverreceives 1,001,000 bpsinsteadof1,000,000 bps."
1166,"1,000,000 bitssent 1,001,000 bitsreceived 1000extrabps
Built-inErrorDetection Itisdesirable tohaveabuilt-inerror-detecting capability
inthegenerated codetodetectsomeoforalltheerrorsthatoccurred duringtransmis­
sion.Someencoding schemes thatwewilldiscusshavethiscapability tosomeextent."
1167,"Immunity toNoiseandInterference Anotherdesirable codecharacteristic isacode I
thatisimmunetonoiseandotherinterferences."
1168,"Someencoding schemes thatwewill
discusshavethiscapability."
1169,"Complexity Acomplex schemeismorecostlytoimplement thanasimpleone.For
example, aschemethatusesfoursignallevelsismoredifficulttointerpret thanonethat
usesonlytwolevels."
1170,"LineCodingSchemes
Wecanroughlydividelinecodingschemes intofivebroadcategories, asshownin
Figure4.4.
Figure4.4Linecodingschemes
Multitransition--MLT-3Multilevel--2B/IQ,8B/6T,and4U-PAM5LinecodingUnipolar
Polar
Bipolar--NRZ
NRZ,RZ,andbiphase(Manchester."
1171,"anddifferential Manchester)
--AMIandpseudoternary
Thereareseveralschemes ineachcategory."
1172,"Weneedtobefamiliar withall
schemes discussed inthissectiontounderstand therestofthebook.Thissectioncanbe
usedasareference forschemes encountered later."
1173,"Unipolar Scheme
Inaunipolar scheme,allthesignallevelsareononesideofthetimeaxis,eitherabove
orbelow."
1174,"NRZ(Non-Return-to-Zero) Traditionally, aunipolar schemewasdesigned asa
non-return-to-zero (NRZ)schemeinwhichthepositivevoltagedefinesbitIandthe
zerovoltagedefinesbitO.ItiscalledNRZbecausethesignaldoesnotreturntozeroat
themiddleofthebit.Figure4.5showaunipolar NRZscheme.SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 107
Figure4.5Unipolar NRZscheme
Amplitude
v1f0
f: 1I0
I
o1------'1---1---1--+---.-- __
ITime Nonnalized power
Compared withitspolarcounterpart (seethenextsection), thisschemeisvery
costly.Aswewillseeshortly,thenormalized power(powerneededtosend1bitper
unitlineresistance) isdoublethatforpolarNRZ.Forthisreason,thisschemeisnor­
mallynotusedindatacommunications today."
1175,"PolarSchemes
Inpolarschemes, thevoltagesareonthebothsidesofthetimeaxis.Forexample, the
voltagelevelfor0canbepositiveandthevoltagelevelforIcanbenegative."
1176,"Non-Return-to-Zero (NRZ) InpolarNRZencoding, weusetwolevelsofvoltage
amplitude."
1177,"WecanhavetwoversionsofpolarNRZ:NRZ-LandNRZ-I,asshownin
Figure4.6.Thefigurealsoshowsthevalueofr,theaveragebaudrate,andtheband­
width.Inthefirstvariation, NRZ-L(NRZ-Level), thelevelofthevoltagedetermines
thevalueofthebit.Inthesecondvariation, NRZ-I(NRZ-Invert), thechangeorlackof
changeinthelevelofthevoltagedetermines thevalueofthebit.Ifthereisnochange,
thebitis0;ifthereisachange,thebitis1."
1178,"Figure4.6PolarNRZ-LandNRZ-Ischemes
T=:=1 Save""'NIl
p
0:
~illdWidth
o
G""""Iil""""""""'~I=-=-""""""'r' -----'l..~
o I 2fINTime
Time1 : 1 0
I
I011
I
I
NRZ-If-----I----J---I---+--+--+----+----'--~NRZ-L f--+--1---I---+--I---1------t----'--~
oNoinversion: Nextbitis0 •Inversion: Nextbitis1
InNRZ-Lthelevelofthevoltagedetermines thevalueofthebit.InNRZ-I
theinversion orthelackofinversion determines thevalueofthebit."
1179,Letuscompare thesetwoschemes basedonthecriteriawepreviously defined.
1180,"Although baselinewandering isaproblemforbothvariations, itistwiceasseverein
NRZ-L.Ifthereisalongsequence ofOsorIsinNRZ-L,theaveragesignalpower108CHAPTER 4DIGITAL TRANSMISSION
becomes skewed.Thereceiver mighthavedifficulty discerning thebitvalue.InNRZ-I
thisproblem occursonly for alongsequence ofas.Ifsomehow wecaneliminate the
longsequence ofas,wecanavoidbaseline wandering."
1181,"Wewillseeshortlyhowthiscan
bedone."
1182,"Thesynchronization problem (senderandreceiver clocksarenotsynchronized)
alsoexistsinbothschemes."
1183,"Again,thisproblem ismoreseriousinNRZ-Lthanin
NRZ-I.Whilealongsequence ofascancauseaproblem inbothschemes, along
sequence of1saffectsonlyNRZ-L."
1184,"Another problem withNRZ-Loccurswhenthereisasuddenchangeofpolarityin
thesystem.Forexample, iftwisted-pair cableisthemedium, achangeinthepolarityof
thewireresultsinallasinterpreted asIsandallIsinterpreted asas.NRZ-Idoesnot
havethisproblem."
1185,"Bothschemes haveanaveragesignalrateofNI2Bd.
NRZ-LandNRZ-JbothhaveanaveragesignalrateofNI2Bd.
Letusdiscussthebandwidth."
1186,"Figure4.6alsoshowsthenormalized bandwidth for
bothvariations."
1187,"Theverticalaxisshowsthepowerdensity(thepowerforeachIHzof
bandwidth); thehorizontal axisshowsthefrequency."
1188,"Thebandwidth revealsavery
seriousproblem forthistypeofencoding."
1189,"ThevalueofthepowerdensityisvelYhigh
aroundfrequencies closetozero.ThismeansthatthereareDCcomponents thatcarrya
highlevelofenergy.Asamatteroffact,mostoftheenergyisconcentrated infrequen­
ciesbetween aandNIl.Thismeansthatalthough theaverageofthesignalrateisN12,
theenergyisnotdistributed evenlybetween thetwohalves."
1190,NRZ-LandNRZ-JbothhaveaDCcomponent problem.
1191,"Example 4.4
AsystemisusingNRZ-Itotransfer10-Mbps data.Whataretheaveragesignalrateandmini­
mumbandwidth?"
1192,"Solution
TheaveragesignalrateisS=NI2=500kbaud.Theminimum bandwidth forthisaveragebaud
rateisBnlin=S=500kHz.
ReturntoZero(RZ)Themainproblem withNRZencoding occurswhenthesender
andreceiver clocksarenotsynchronized."
1193,"Thereceiver doesnotknowwhenonebithas
endedandthenextbitisstarting."
1194,"Onesolution isthereturn-to-zero (RZ)scheme,
whichusesthreevalues:positive, negative, andzero.InRZ,thesignalchanges not
between bitsbutduringthebit.InFigure4.7weseethatthesignalgoesto0inthemid­
dleofeachbit.Itremains thereuntilthebeginning ofthenextbit.Themaindisadvan­
tageofRZencoding isthatitrequires twosignalchanges toencodeabitandtherefore
occupies greaterbandwidth."
1195,"Thesameproblem wementioned, asuddenchangeof
polarity resulting inallasinterpreted as1sandall1sinterpreted asas,stillexisthere,
butthereisnoDCcomponent problem."
1196,"Another problem isthecomplexity: RZuses
threelevelsofvoltage, whichismorecomplex tocreateanddiscern.Asaresultofall
thesedeficiencies, theschemeisnotusedtoday.Instead, ithasbeenreplaced bythe
better-performing Manchester anddifferential Manchester schemes (discussed next).SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 109
Figure4.7PolarRZscheme
Amplitude
ol
l
l1l
1
l
Timep
o:lLo I~o 1 2 fiN
Biphase: Manchester andDifferential Manchester TheideaofRZ(transition at
themiddleofthebit)andtheideaofNRZ-Larecombined intotheManchester scheme."
1197,"InManchester encoding, thedurationofthebitisdividedintotwohalves.Thevoltage
remainsatonelevelduringthefirsthalfandmovestotheotherlevelinthesecondhalf."
1198,Thetransition atthemiddleofthebitprovidessynchronization.
1199,"Differential Manchester,
ontheotherhand,combines theideasofRZandNRZ-I.Thereisalwaysatransition at
the middle ofthebit,butthebitvaluesaredetermined atthebeginning ofthebit.Ifthe
nextbitis0,thereisatransition; ifthenextbitis1,thereisnone.Figure4.8shows
bothManchester anddifferential Manchester encoding."
1200,"Figure4.8Polarbiphase: Manchester anddifferential Manchester schemes
(OisL lisS)
0I1I0I0I1I1I
I I I I I I
I I I I I I.....Ir+-1,...-I_,--4 I 1
I I I I
Manchester
I I I ITimel..+-I-I-+-I-I
I I
I I l I I I
r¢-I,...."
1201,"1,...-Irt-I
I I
DifferentialI I I
Manchester I I I ITime1 L...¢-I I~1~-I
1 I I I I I
oNoinversion: Nextbitis1•Inversion: Nextbitis0p
11Bandwidth
O.~~~
o 1)0
2fiN
InManchester anddifferential Manchester encoding, thetransition
atthemiddleofthebitisusedforsynchronization."
1202,"TheManchester schemeovercomes severalproblems associated withNRZ-L,and
differential Manchester overcomes severalproblems associated withNRZ-I.First,there
isnobaselinewandering."
1203,"ThereisnoDCcomponent becauseeachbithasapositiveand110CHAPTER 4DIGITAL TRANSMISSION
negativevoltagecontribution."
1204,"Theonlydrawback isthesignalrate.Thesignalratefor
Manchester anddifferential Manchester isdoublethatforNRZ.Thereasonisthatthereis
alwaysonetransition atthemiddleofthebitandmaybeonetransition attheendofeach
bit.Figure4.8showsbothManchester anddifferential Manchester encoding schemes."
1205,"NotethatManchester anddifferential Manchester schemes arealsocalledbiphase
schemes."
1206,Theminimum bandwidth ofManchester anddifferential Manchester is2timesthatofNRZ.
1207,"BipolarSchemes
Inbipolarencoding (sometimes calledmultilevel binary),therearethreevoltagelev­
els:positive,negative, andzero.Thevoltagelevelforonedataelementisatzero,while
thevoltagelevelfortheotherelementalternates betweenpositiveandnegative."
1208,"Inbipolarencoding, weusethreelevels:positive, zero,andnegative."
1209,"AMIandPseudoternary Figure4.9showstwovariations ofbipolarencoding: AMI
andpseudoternary."
1210,"Acommon bipolarencoding schemeiscalledbipolaralternate
markinversion (AMI).Inthetermalternate markinversion, thewordmarkcomes
fromtelegraphy andmeans1.SoAMImeansalternate I inversion."
1211,"A neutralzerovolt­
agerepresents binaryO.BinaryIsarerepresented byalternating positiveandnegative
voltages."
1212,"Avariation ofAMIencoding iscalledpseudoternary inwhichthe1bitis
encoded asazerovoltageandthe0bitisencodedasalternating positiveandnegative
voltages."
1213,"Figure4.9Bipolarschemes: AMIandpseudoternary
Amplitude
oI
II(I
IoI
I
I
I:(I
I
Ir=1
p
Time
TimeAMIr--~-~--1--+----+---;-+
Pseudoternary I-----+--~----If----t--...,....-____r--+
Thebipolarschemewasdeveloped asanalternative toNRZ.Thebipolarscheme
hasthesamesignalrateasNRZ,butthereisnoDCcomponent."
1214,"TheNRZschemehas
mostofitsenergyconcentrated nearzerofrequency, whichmakesitunsuitable for
transmission overchannels withpoorperformance aroundthisfrequency."
1215,"Theconcen­
trationoftheenergyinbipolarencoding isaroundfrequency N12.Figure4.9showsthe
typicalenergyconcentration forabipolarscheme.SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 111
OnemayaskwhywedonothaveDCcomponent inbipolarencoding."
1216,"Wecan
answerthisquestionbyusingtheFouriertransform, butwecanalsothinkaboutitintu­
itively.Ifwehavealongsequence of1s,thevoltagelevelalternates between positive
andnegative; itisnotconstant."
1217,"Therefore, thereisnoDCcomponent."
1218,"Foralong
sequence ofOs,thevoltageremainsconstant, butitsamplitude iszero,whichisthe
sameashavingnoDCcomponent."
1219,"Inotherwords,asequence thatcreatesaconstant
zerovoltagedoesnothaveaDCcomponent."
1220,"AMIiscommonly usedforlong-distance communication, butithasasynchroniza­
tionproblemwhenalongsequence ofOsispresentinthedata.Laterinthechapter,we
willseehowascrambling technique cansolvethisproblem."
1221,"Multilevel Schemes
Thedesiretoincreasethedataspeedordecrease therequiredbandwidth hasresultedin
thecreationofmanyschemes."
1222,"Thegoalistoincreasethenumberofbitsperbaudby
encoding apatternofmdataelements intoapatternofnsignalelements."
1223,"Weonlyhave
twotypesofdataelements (OsandIs),whichmeansthatagroupofmdataelements
canproduceacombination of2mdatapatterns."
1224,"Wecanhavedifferent typesofsignal
elements byallowing different signallevels.IfwehaveLdifferent levels,thenwecan
produce Lncombinations ofsignalpatterns."
1225,"If2m=Ln,theneachdatapatternis
encodedintoonesignalpattern.If2m<Ln,datapatterns occupyonlyasubsetofsignal
patterns."
1226,"Thesubsetcanbecarefully designed topreventbaseline wandering, topro­
videsynchronization, andtodetecterrorsthatoccurred duringdatatransmission."
1227,"Data
encoding isnotpossible if2m>Lnbecause someofthedatapatterns cannotbe
encoded."
1228,"Thecodedesigners haveclassified thesetypesofcodingasmBnL,wheremisthe
lengthofthebinarypattern,Bmeansbinarydata,nisthelengthofthesignalpattern,
andListhenumberoflevelsinthesignaling."
1229,"AletterisoftenusedinplaceofL:B
(binary)forL=2,T(ternary) forL=3,andQ(quaternary) forL=4.Notethatthefirst
twolettersdefinethedatapattern,andthesecondtwodefinethesignalpattern."
1230,"InmBnLschemes, apatternofmdataelements isencodedasapatternofnsignal
elements inwhich2m::::;Ln.
2BIQThefirstmBnLschemewediscuss,twobinary,onequaternary (2BIQ),uses
datapatternsofsize2andencodesthe2-bitpatternsasonesignalelementbelonging
toafour-level signal.Inthistypeofencoding m=2,n=1,andL=4(quatemary)."
1231,"Fig­
ure4.10showsanexampleofa2B1Qsignal."
1232,"Theaveragesignalrateof2BlQisS=N/4.Thismeansthatusing2BIQ,wecan
senddata2timesfasterthanbyusingNRZ-L.However, 2BlQusesfourdifferent sig­
nallevels,whichmeansthereceiver hastodiscernfourdifferent thresholds."
1233,"The
reducedbandwidth comeswithaprice.Therearenoredundant signalpatternsinthis
schemebecause22=41."
1234,"AswewillseeinChapter9,2BIQisusedinDSL(DigitalSubscriber Line)tech­
nologytoprovideahigh-speed connection totheInternetbyusingsubscriber telephone
lines.112CHAPTER 4DIGITAL TRANSMISSION
Figure4.10Multilevel: 2B1Qscheme
Previous level:Previous level:
positive negative
Next Next Next
bits level level
00 +1 -I
01 +3 -3
10 -I +1
II -3 +3
Transition table
2fiNSave=N14
o1/2p
1 \ Bandwidth
0.5
o-me00III0]IHII0]
I I I
I I
I I
I I
I I
ITi I
I
I
I
I I I
I I I,~1+3
-3+1
Assuming positiveoriginallevel
8B6TAveryinteresting schemeiseightbinary,sixternary(8B6T).Thiscodeisused
with100BASE-4T cable,aswewillseeinChapter13.Theideaistoencodeapatternof
8bitsasapatternof6signalelements, wherethesignalhasthreelevels(ternary)."
1235,"Inthis
typeofscheme,wecanhave28=256different datapatternsand36=478different signal
patterns.Themapping tableisshowninAppendix D.Thereare478-256=222redundant
signalelements thatprovidesynchronization anderrordetection."
1236,"Partoftheredundancy is
alsousedtoprovide DCbalance.Eachsignalpatternhasaweightof0or+1DCvalues.This
meansthatthereisnopatternwiththeweight-1.TomakethewholestreamDc-balanced,
thesenderkeepstrackoftheweight.Iftwogroupsofweight1areencountered oneafter
another,thefirstoneissentasis,whilethenextoneistotallyinvertedtogiveaweightof-1."
1237,"Figure4.11showsanexample ofthreedatapatternsencoded asthreesignalpat­
terns.Thethreepossible signallevelsarerepresented as-,0,and+.Thefirst8-bitpat­
tern00010001 isencoded asthesignalpattern-0-0++ withweight0;thesecond8-bit
pattern01010011isencoded as- + - + + 0 withweight+1.Thethirdbitpatternshould
beencoded as+ - - + 0+withweight+1.TocreateDCbalance, thesenderinvertsthe
actualsignal.Thereceivercaneasilyrecognize thatthisisaninverted patternbecause
theweightis-1.Thepatternisinvertedbeforedecoding."
1238,"Figure4.11Multilevel: 8B6Tscheme
Time01()10011 OOOIO()O( O!OIOO()() I
I
Inverted:
pattern:o+----.--,--..,.....---l---I-+--I--I----L---r--t----- ..--r-----It---r----..+v
-v
-0-0++ -+-++0 +--+0+SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 113
Theaveragesignalrateoftheschemeistheoretically Save=!XNX§;inpractice
theminimum bandwidth isverycloseto6N18."
1239,"2 8
4D-PAMS Thelastsignaling schemewediscussinthiscategory iscalledfour­
dimensional five-level pulseamplitude modulation (4D-PAM5)."
1240,"The4Dmeansthatdata
issentoverfourwiresatthesametime.Itusesfivevoltagelevels,suchas-2,-1,0,1,and2."
1241,"However, onelevel,level0,isusedonlyforforwarderrordetection (discussed inChap­
ter10).Ifweassumethatthecodeisjustone-dimensional, thefourlevelscreatesomething
similarto8B4Q.Inotherwords,an8-bitwordistranslated toasignalelementoffourdiffer­
entlevels.Theworstsignalrateforthisimaginary one-dimensional versionisNX4/8,orN12."
1242,"Thetechnique isdesigned tosenddataoverfourchannels (fourwires).Thismeans
thesignalratecanbereducedtoN18,asignificant achievement."
1243,"All8bitscanbefedintoa
wiresimultaneously andsentbyusingonesignalelement."
1244,"Thepointhereisthatthefour
signalelements comprising onesignalgrouparesentsimultaneously inafour-dimensional
setting.Figure4.12showstheimaginary one-dimensional andtheactualfour-dimensional
implementation."
1245,"GigabitLANs(seeChapter13)usethistechnique tosend1-Gbpsdata
overfourcoppercablesthatcanhandle125Mbaud.Thisschemehasalotofredundancy
inthesignalpatternbecause28datapatternsarematched to44=256signalpatterns."
1246,"The
extrasignalpatternscanbeusedforotherpurposes suchaserrordetection."
1247,"Figure4.12Multilevel: 4D-PAM5 scheme
00011110 1Gbps
250Mbps
Wire1(125MBd)
250Mbps
Wire2(125MBd)
+2
+1
250Mbps
Wire3(125MBd)-1
-2
250Mbps
Wire4(125MBd)
Multiline Transmission: MLT-3
NRZ-Ianddifferential Manchester areclassified asdifferential encoding butusetwotransi­
tionrulestoencodebinarydata(noinversion, inversion).Ifwehaveasignalwithmorethan
twolevels,wecandesignadifferential encoding schemewithmorethantwotransition
rules.MLT-3isoneofthem.Themultiline transmission, threelevel(MLT-3) scheme
usesthreelevels(+v,0,and-V)andthreetransition rulestomovebetweenthelevels."
1248,"1.Ifthenextbitis0,thereisnotransition."
1249,"2.Ifthenextbitis1andthecurrentlevelisnot0,thenextlevelis0."
1250,"3.Ifthenextbitis1andthecutTentlevelis0,thenextlevelistheopposite ofthelast
nonzerolevel.114CHAPTER 4DIGITAL TRANSMISSION
Thebehavior ofMLT-3canbestbedescribed bythestatediagramshowninFigure4.13."
1251,"Thethreevoltagelevels(-V,0,and+V)areshownbythreestates(ovals).Thetransition
fromonestate(level)toanotherisshownbytheconnecting lines.Figure4.13also
showstwoexamples ofanMLT-3signal."
1252,"Figure4.13Multitransition: MLT-3scheme
Last
non-zero non-zero
Nextbit:0level:+Vlevel:-VNextbit:0Nextbit:0
Nextbit:1
c.Transition states:Time
1
I011101111011111I I I I1
+V I I
I I
I IOVr--__---t- --t--+-------j-- _ __+_~
1
OVl----+O---i--r--+v
-v-v
b.Worsecasea.Typicalcase
OnemightwonderwhyweneedtouseMLT-3,aschemethatmapsonebittoone
signalelement."
1253,"ThesignalrateisthesameasthatforNRZ-I,butwithgreatercomplexity
(threelevelsandcomplex transition rules).Itturnsoutthattheshapeofthesignalinthis
schemehelpstoreducetherequired bandwidth."
1254,"Letuslookattheworst-case scenario, a
sequence ofIs.Inthiscase,thesignalelementpattern+VO-VOisrepeated every4bits."
1255,"Anonperiodicsignalhaschanged toaperiodicsignalwiththeperiodequalto4timesthe
bitduration."
1256,"Thisworst-case situation canbesimulated asananalogsignalwithafre­
quencyone-fourth ofthebitrate.Inotherwords,thesignalrateforMLT-3isone-fourth
thebitrate.ThismakesMLT-3asuitablechoicewhenweneedtosend100Mbpsona
copperwirethatcannotsupportmorethan32MHz(frequencies abovethislevelcreate
electromagnetic emissions)."
1257,MLT-3andLANsarediscussed inChapter13.
1258,"Summary ofLineCodingSchemes
Wesummarize inTable4.1thecharacteristics ofthedifferent schemes discussed."
1259,"Table4.1Summary oflinecodingschemes
Bandwidth
Category Scheme (average) Characteristics
Unipolar NRZ B=N/2 Costly,noself-synchronization iflongOsorIs,DC
NRZ-L B=N/2 Noself-synchronization iflongOsor1s,DC
Unipolar NRZ-I B=N/2 Noself-synchronization forlongaS,DC
Biphase B=N Self-synchronization, noDC,highbandwidthSECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 115
Table4.1Summary oflinecodingschemes (continued)
Bandwidth
Category Scheme (average) Characteristics
Bipolar AMI B=NI2 Noself-synchronization forlongOS,DC
2BIQ B=N/4 Noself-synchronization forlongsamedoublebits
Multilevel 8B6T B=3N/4 Self-synchronization, noDC
4D-PAM5 B=N/8 Self-synchronization, noDC
Multiline MLT-3 B=N/3 Noself-synchronization forlongOs
BlockCoding
Weneedredundancy toensuresynchronization andtoprovidesomekindofinherent
errordetecting."
1260,"Blockcodingcangiveusthisredundancy andimprove theperfor­
manceoflinecoding.Ingeneral,blockcodingchangesablockofmbitsintoablock
ofnbits,wherenislargerthanm.BlockcodingisreferredtoasanmB/nBencoding
technique."
1261,"Blockcodingisnormally referred toasmBlnBcoding;
itreplaces each m~bitgroupwithann~bitgroup."
1262,"Theslashinblockencoding (forexample, 4B/5B)distinguishes blockencoding
frommultilevel encoding (forexample, 8B6T),whichiswrittenwithoutaslash.Block
codingnormally involves threesteps:division, substitution, andcombination."
1263,"Inthe
divisionstep,asequence ofbitsisdividedintogroupsofmbits.Forexample, in4B/5B
encoding, theoriginalbitsequence isdividedinto4-bitgroups.Theheartofblockcod­
ingisthesubstitution step.Inthisstep,wesubstitute anm-bitgroupforann-bitgroup."
1264,"Forexample, in4B/5Bencoding wesubstitute a4-bitcodefora5-bitgroup.Finally,
then-bitgroupsarecombined togethertoformastream.Thenewstreamhasmorebits
thantheoriginalbits.Figure4.14showstheprocedure."
1265,"Figure4.14Blockcodingconcept
Division ofastreamintom-bitgroups
mbits mbits mbits
[110""'111000'''11 •••1010'''11
11
m&-to-nB
substitution
Jl
1010""'10111000'''00 11...1°11''.1111
nbits nbits nbits
Combining n-bitgroupsintoastream116CHAPTER 4DIGITAL TRANSMISSION
4B/5B
Thefourbinary/five binary(4B/5B)codingschemewasdesigned tobeusedincom­
bination withNRZ-I.RecallthatNRZ-Ihasagoodsignalrate,one-half thatofthe
biphase, butithasasynchronization problem."
1266,"Alongsequence ofascanmakethe
receiverclocklosesynchronization."
1267,"Onesolutionistochangethebitstream,priorto
encoding withNRZ-I,sothatitdoesnothavealongstreamofas.The4B/5Bscheme
achieves thisgoal.Theblock-codedstreamdoesnothavemore that threeconsecutive
as,aswewillseelater.Atthereceiver, theNRZ-Iencoded digitalsignalisfirst
decoded intoastreamofbitsandthendecoded toremovetheredundancy."
1268,"Figure4.15
showstheidea."
1269,"Figure4.15Usingblockcoding4B/5BwithNRZ-Ilinecodingscheme
Sender Receiver
Digitalsignal
--::Ft:F-
Link
In4B/5B,the5-bitoutputthatreplacesthe4-bitinputhasnomorethanoneleading
zero(leftbit)andnomorethantwotrailingzeros(rightbits).Sowhendifferent groups
arecombined tomakeanewsequence, therearenevermorethanthreeconsecutive as."
1270,"(NotethatNRZ-Ihasnoproblem withsequences ofIs.)Table4.2showsthecorre­
sponding pairsusedin4B/5Bencoding."
1271,"Notethatthefirsttwocolumns paira4-bit
groupwitha5-bitgroup.Agroupof4bitscanhaveonly16different combinations
whileagroupof5bitscanhave32different combinations."
1272,"Thismeansthatthereare16
groupsthatarenotusedfor4B/5Bencoding."
1273,"Someoftheseunusedgroupsareusedfor
controlpurposes; theothersarenotusedatall.Thelatterprovideakindoferrordetec­
tion.Ifa5-bitgrouparrivesthatbelongstotheunusedportionofthetable,thereceiver
knowsthatthereisanerrorinthetransmission."
1274,"Table4.24B/5Bmapping codes
DataSequence Encoded Sequence ControlSequence Encoded Sequence
0000 11110 Q(Quiet) 00000
0001 01001 I(Idle) 11111
0010 10100 H(Halt) 00100
0011 10101 J(Startdelimiter) 11000
0100 01010 K(Startdelimiter) 10001
0101 01011 T(Enddelimiter) 01101SECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 117
Table4.24B/5Bmapping codes(continued)
DataSequence Encoded Sequence ControlSequence Encoded Sequence
0110 01110 S(Set) 11001
0111 01111 R(Reset) 00111
1000 10010
1001 10011
1010 10110
1011 10111
1100 11010
1101 11011
1110 11100
1111 11101
Figure4.16showsanexampleofsubstitution in4B/5Bcoding.4B/5Bencoding
solvestheproblemofsynchronization andovercomes oneofthedeficiencies ofNRZ-1."
1275,"However, weneedtoremember thatitincreases thesignalrateofNRZ-1.Theredun­
dantbitsadd20percentmorebaud.Still,theresultislessthanthebiphasescheme
whichhasasignalrateof2timesthatofNRZ-1.However, 4B/5Bblockencoding does
notsolvetheDCcomponent problemofNRZ-1.IfaDCcomponent isunacceptable, we
needtousebiphaseorbipolarencoding."
1276,"Figure4.16Substitution in48/5Bblockcoding
4-bitblocks
I1111I•••I000III00001
I
11111~l11110I
LI11101
': ""0'I
oooo~r
5-bitblocks
Example 4.5
Weneedtosenddataata1-Mbpsrate.Whatistheminimum required bandwidth, usingacombi­
nationof4B/5BandNRZ-IorManchester coding?"
1277,"Solution
First4B/5Bblockcodingincreases thebitrateto1.25Mbps.Theminimum bandwidth using
NRZ-IisNI2or625kHz.TheManchester schemeneedsaminimum bandwidth of1MHz.The
firstchoiceneedsalowerbandwidth, buthasaDCcomponent problem; thesecondchoiceneeds
ahigherbandwidth, butdoesnothaveaDCcomponent problem.118CHAPTER 4DIGITAL TRANSMISSION
8RIlOR
Theeightbinary/ten binary(SBIlOB) encoding issimilarto4B/5Bencoding except
thatagroupof8bitsofdataisnowsubstituted byalO-bitcode.Itprovides greater
errordetection capability than4B/5B.The8BIlOBblockcodingisactuallyacombina­
tionof5B/6Band3B/4Bencoding, asshowninFigure4.17."
1278,"Figure4.178B/lOBblockencoding
8B/IOBencoder
8-bitblock&-+--+-IO-bit block
Themostfivesignificant bitsofa10-bitblockisfedintothe5B/6Bencoder; the
least3significant bitsisfedintoa3B/4Bencoder."
1279,"Thesplitisdonetosimplify the
mapping table.Topreventalongrunofconsecutive OsorIs,thecodeusesadisparity
controller whichkeepstrackofexcessOsoverIs(orIsoverOs).Ifthebitsinthecur­
rentblockcreateadisparity thatcontributes totheprevious disparity (eitherdirection),
theneachbitinthecodeiscomplemented (a0ischangedtoa 1anda 1ischangedtoa0)."
1280,"Thecodinghas210-28=768redundant groupsthatcanbeusedfordisparity checking
anderrordetection."
1281,"Ingeneral,thetechnique issuperior to4B/5Bbecauseofbetter
built-inerror-checking capability andbettersynchronization."
1282,"Scramblin~
Biphaseschemes thataresuitable for dedicated linksbetweenstationsinaLANarenot
suitableforlong-distance communication becauseoftheirwidebandwidth requirement."
1283,"Thecombination ofblockcodingandNRZlinecodingisnotsuitableforlong-distance
encoding either,becauseoftheDCcomponent."
1284,"BipolarAMIencoding, ontheother
hand,hasanarrowbandwidth anddoesnotcreateaDCcomponent."
1285,"However, along
sequence ofOsupsetsthesynchronization."
1286,"Ifwecanfindawaytoavoidalongsequence
ofOsintheoriginalstream,wecanusebipolarAMIforlong distances."
1287,"Wearelooking
foratechnique thatdoesnotincreasethenumberofbitsanddoesprovidesynchroniza­
tion.Wearelookingforasolutionthatsubstitutes longzero-level pulseswithacombi­
nationofotherlevelstoprovidesynchronization."
1288,Onesolutioniscalledscrambling.
1289,"We
modifypartoftheAMIruletoincludescrambling, asshowninFigure4.18.Notethat
scrambling, asopposed toblockcoding,isdoneatthesametimeasencoding."
1290,"The
systemneedstoinserttherequired pulsesbasedonthedefinedscrambling rules.Two
common scrambling techniques areB8ZSandHDB3."
1291,"R8ZS
Bipolar withS-zerosubstitution (BSZS)iscommonly usedinNorthAmerica."
1292,"In
thistechnique, eightconsecutive zero-level voltages arereplaced bythesequenceSECTION 4.1DIGITAL-TO-DIGITAL CONVERSION 119
Figure4.18AMIusedwithscrambling
Sender Receiver
Violated digitalsignal
--=ftF-
OOOVBOVB."
1293,"TheVinthesequence denotesviolation; thisisanonzero voltagethat
breaksanAMIruleofencoding (opposite polarityfromtheprevious)."
1294,"TheBinthe
sequence denotesbipolm;whichmeansanonzerolevelvoltageinaccordance withthe
AMIrule.Therearetwocases,asshowninFigure4.19."
1295,"Figure4.19TwocasesofB8ZSscrambling technique
I000000 0~:i::: ~~i,'"":
t""jtI'tj11
1tI IBI IVI':1
I{II 11010101 0 I
a.Previous levelispositive."
1296,b.Previous levelisnegative.
1297,"Notethatthescrambling inthiscasedoesnotchangethebitrate.Also,thetech­
niquebalances thepositiveandnegative voltagelevels(twopositives andtwonega­
tives),whichmeansthattheDCbalanceismaintained."
1298,"Notethatthesubstitution may
changethepolarityofa 1because, afterthesubstitution, AMIneedstofollowitsrules."
1299,B8ZSsubstitutes eightconsecutive zeroswithOOOVBOVB.
1300,Onemorepointisworthmentioning.
1301,"TheletterV(violation) orB(bipolar) here is
relative.TheVmeansthesamepolarityasthepolarityoftheprevious nonzero pulse; B
meansthepolarityoppositetothepolarityoftheprevious nonzeropulse."
1302,"HDB3
High-density bipolar3-zero(HDB3)iscommonly usedoutsideofNorthAmerica."
1303,"Inthis
technique, whichismoreconservative thanB8ZS,fourconsecutive zero-level voltagesare
replacedwithasequence ofOOOVorBOO\:Thereasonfortwodifferentsubstitutions isto120CHAPTER 4DIGITAL TRANSMISSION
maintain theevennumberofnonzeropulsesaftereachsubstitution."
1304,"Thetworulescanbe
statedasfollows:
1.Ifthenumberofnonzeropulsesafterthelastsubstitution isodd,thesubstitution
patternwillbeOOOV,whichmakesthetotalnumberofnonzeropulseseven."
1305,"2.Ifthenumberofnonzeropulsesafterthelastsubstitution iseven,thesubstitution
patternwillbeBOOV,whichmakesthetotalnumberofnonzeropulseseven."
1306,Figure4.20showsanexample.
1307,"Figure4.20Different situations inHDB3scrambling technique
First
substitutionSecond Third
substitution substitution
t
Event t
EvenOdd Even Even
Thereareseveralpointsweneedtomentionhere.First,beforethefirstsubstitu­
tion,thenumberofnonzeropulsesiseven,sothefirstsubstitution isBODY.Afterthis
substitution, thepolarityofthe1bitischanged becausetheAMIscheme, aftereach
substitution, mustfollowitsownrule.Afterthisbit,weneedanothersubstitution,
whichisOOOVbecausewehaveonlyonenonzeropulse(odd)afterthelastsubstitution."
1308,"Thethirdsubstitution isBOOVbecausetherearenononzeropulsesafterthesecond
substitution (even)."
1309,"HDB3substitutes fourconsecutive zeroswithOOOVorBOOVdepending
onthenumberofnonzeropulsesafterthelastsubstitution."
1310,"4.2ANALOG- TO-DIGITAL CONVERSION
Thetechniques described inSection4.1convertdigitaldatatodigitalsignals.Some­
times,however, wehaveananalogsignalsuchasonecreatedbyamicrophone orcam­
era.WehaveseeninChapter3thatadigitalsignalissuperiortoananalogsignal.The
tendency todayistochangeananalogsignaltodigitaldata.Inthissectionwedescribe
twotechniques, pulsecodemodulation anddeltamodulation."
1311,"Afterthedigitaldataare
created(digitization), wecanuseoneofthetechniques described inSection4.1tocon­
vertthedigitaldatatoadigitalsignal.SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 121
PulseCodeModulation (PCM)
Themostcommon technique tochangeananalogsignaltodigitaldata(digitization)
iscalledpulsecodemodulation (PCM).APCMencoderhasthreeprocesses, asshown
inFigure4.21."
1312,"Figure4.21Components ofPCMencoder
Quantized signal
~'-'-T
!.•··1······:ti~'i
t=lJl::I::=t=J;.:;=~,
peMencoder
~.HSampling;IQuantizingJ- EncodingJ411""'11°°1
Digitaldata
Analogsignal
tuL I.II.,
PAMsignal
1.Theanalogsignalissampled."
1313,2.Thesampledsignalisquantized.
1314,3.Thequantized valuesareencodedasstreamsofbits.
1315,"Sampling
ThefirststepinPCMissampling."
1316,"TheanalogsignalissampledeveryTss,whereTsis
thesampleintervalorperiod.Theinverseofthesampling intervaliscalledthesam­
plingrateorsampling frequency anddenotedbyis,whereis=IITs'Therearethree
sampling methods-ideal, natural,andflat-top-as showninFigure4.22."
1317,"Inideal sampling, pulsesfromtheanalogsignalaresampled."
1318,"Thisisanidealsam­
plingmethodandcannotbeeasilyimplemented."
1319,"Innaturalsampling, ahigh-speed
switchisturnedonforonlythesmallperiodoftimewhenthesampling occurs.The
resultisasequence ofsamplesthatretainstheshapeoftheanalogsignal.Themost
common sampling method,calledsampleandhold,however, createsflat-topsamples
byusingacircuit."
1320,"Thesampling processissometimes referredtoaspulseamplitude modulation
(PAM).Weneedtoremember, however, thattheresultisstillananalogsignalwith
nonintegral values."
1321,Sampling RateOneimportant consideration isthesampling rateorfrequency.
1322,"What
aretherestrictions onTs?Thisquestionwaselegantly answered byNyquist.According
totheNyquisttheorem, toreproduce theoriginalanalogsignal,onenecessary condition
isthatthesampling ratebeatleasttwicethehighestfrequency intheoriginalsignal.122 CHAPTER 4DIGITAL TRANSMISSION
Figure4.22Threedifferent sampling methodsforPCM
Amplitude Amplitude
,~Analog signal
..."
1323,"""~s
a.Idealsampling
Amplitude
c.Flat-top samplingTime
b.Naturalsampling/Analogsignal
..."
1324,"According totheNyquisttheorem, thesampling ratemustbe
atleast2timesthehighestfrequency contained inthesignal."
1325,"Weneedtoelaborate onthetheorem atthispoint.First,wecansampleasignal
onlyifthesignalisband-limited."
1326,"Inotherwords,asignalwithaninfinitebandwidth
cannotbesampled."
1327,"Second,thesampling ratemustbeatleast2timesthehighestfre­
quency,notthebandwidth."
1328,"Iftheanalogsignalislow-pass, thebandwidth andthe
highestfrequency arethesamevalue.Iftheanalogsignalisbandpass, thebandwidth
valueislowerthanthevalueofthemaximum frequency."
1329,"Figure4.23showsthevalue
ofthesampling ratefortwotypesofsignals."
1330,"Figure4.23Nyquistsampling rateforlow-pass andbandpass signals-------------------------------------
Amplitude
Nyquistrate=2xfm""x
Low-pass signal
frnin
Amplitude
oNyquistrate=2 xfmax
Bandpass signal
fminfmaxFrequency
FrequencySECTION 4.2ANALOG-TO-DIGITAL CONVERSION 123
Example 4.6
ForanintuitiveexampleoftheNyquisttheorem, letussampleasimplesinewaveatthreesam­
plingrates:fs=4f(2timestheNyquist rate)'/s=2f(Nyquist rate),andfs=f(one-half the
Nyquistrate).Figure4.24showsthesampling andthesubsequent recovery ofthesignal."
1331,"Figure4.24Recovery ofasampled sinewavefordifferent sampling rates
,,,,,.,
¥,,,,,
'"".'a.Nyquistratesampling:fs=2f
b.Oversampling:fs=4f•,.,.,.,.."
1332,",.,
,.,,,'•,.,.,.,.,."
1333,""",."
1334,";,,,•,.,.,.,.,
•,,,,,,,,
c.Undersampling: fs=f.....,
""
'.....'
Itcanbeseenthatsampling attheNyquistratecancreateagoodapproximation oftheorig­
inalsinewave(parta).Oversampling inpartbcanalsocreatethesameapproximation, butitis
redundant andunnecessary."
1335,"Sampling belowtheNyquistrate(partc)doesnotproduceasignal
thatlooksliketheoriginalsinewave."
1336,"Example 4.7
Asaninteresting example, letusseewhathappensifwesampleaperiodiceventsuchastherevolu­
tionofahandofaclock.Thesecondhandofaclockhasaperiodof60s.According totheNyquist
theorem, weneedtosamplethehand(takeandsendapicture)every30s(Ts=~Torfs=2f).In
Figure4.25a,thesamplepoints,inorder,are12,6,12,6,12,and6.Thereceiverofthesamples
cannottelliftheclockismovingforwardorbackward."
1337,"Inpartb,wesampleatdoubletheNyquist
rate(every15s).Thesamplepoints,inorder,are12,3,6,9,and12.Theclockismovingforward."
1338,"Inpartc,wesamplebelowtheNyquistrate(Ts=~Torfs=~f).Thesamplepoints,inorder,are12,
9,6,3,and12.Although theclockismovingforward, thereceiverthinksthattheclockismoving
backward.124CHAPTER 4DIGITAL TRANSMISSION
Figure4.25Sampling ofaclockwithonlyonehand
a.Sampling atNyquistrate:Ts=!T
rnG2
~~rn
U9:-3
\JY~U
b.Oversampling (aboveNyquistrate):Ts=~T
rn~~~rn
ug\J)~U
c.Undersampling (belowNyquistrate):Ts=~TSamples canmeanthat
theclockismoving
eitherforwardor
backward."
1339,"(12-6-12-6-12)
Samples showclock
ismovingforward."
1340,"(12·3-6-9-12)
Samples showclock
ismovingbackward."
1341,"(12-9-6-3-12)
Example 4.8
AnexamplerelatedtoExample 4.7istheseemingly backward rotationofthewheelsofaforward­
movingcarinamovie.Thiscanbeexplained byundersampling."
1342,"Amovieisfilmedat24frames
persecond.Ifawheelisrotatingmorethan12timespersecond,theundersampling createsthe
impression ofabackward rotation."
1343,"Example 4.9
Telephone companies digitizevoicebyassuming amaximum frequency of4000Hz.Thesam­
plingratetherefore is8000samplespersecond."
1344,"Example 4.10
Acomplex low-pass signalhasabandwidth of200kHz.Whatistheminimum sampling ratefor
thissignal?"
1345,"Solution
Thebandwidth ofalow-pass signalisbetween0andj,wherefisthemaximum frequency inthe
signal.Therefore, wecansamplethissignalat2timesthehighestfrequency (200kHz).Thesam­
plingrateistherefore 400,000samplespersecond."
1346,"Example 4.1J
Acomplex bandpass signalhasabandwidth of200kHz.Whatistheminimum sampling ratefor
thissignal?SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 125
Solution
Wecannotfindtheminimum sampling rateinthiscasebecausewedonotknowwheretheband­
widthstartsorends.Wedonotknowthemaximum frequency inthesignal."
1347,"Quantization
Theresultofsampling isaseriesofpulseswithamplitude valuesbetween themaxi­
mumandminimum amplitudes ofthesignal.Thesetofamplitudes canbeinfinitewith
nonintegral valuesbetweenthetwolimits.Thesevaluescannotbeusedintheencoding
process.Thefollowing arethestepsinquantization:
1.Weassumethattheoriginalanalogsignalhasinstantaneous amplitudes between
VminandVmax'
2.WedividetherangeintoLzones,eachofheight ~(delta)."
1348,"Vmax-Vrnin~=-==-:::--=L
3.Weassignquantized valuesof0toL-Itothemidpoint ofeachzone."
1349,4.Weapproximate thevalueofthesampleamplitude tothequantized values.
1350,"Asasimpleexample, assumethatwehaveasampled signalandthesampleampli­
tudesarebetween-20and+20V.Wedecidetohaveeightlevels(L=8).Thismeans
that~=5V.Figure4.26showsthisexample."
1351,"Figure4.26Quantization andencoding ofasampled signal
Quantization Normalized
codes amplitude
746.19.7
36."
1352,526.
1353,"7.511.0
-5.5
Ol--------L...---L...------lL...-----''------,,---,-----,-----,_1,1Time
-6,0
-9.4-11.3'-6.-6.1
-26.2
-36."
1354,"-4.11
Normalized -1.22
PAMvalues
Normalized -1.50
quantized values1.50 3.24 3.94 2.20-1.10 -2.26 -1.88 -1.20
1.50 3.50 3.50 2.50-1.50 -2.50 -1.50 -1.50
Normalized -0.38
erroro+0.26 -0.44 +0.30 -0.40 -0.24 +0.38 -0.30
Quantization code 2 5 7 7 6 2 2 2
Encoded words 010 101 111 111 110 010 001 010ow126CHAPTER 4DIGITAL TRANSMISSION
Wehaveshownonlyninesamples usingidealsampling (forsimplicity)."
1355,"The
valueatthetopofeachsampleinthegraphshowstheactualamplitude."
1356,"Inthechart,
thefirstrowisthenormalized valueforeachsample(actualamplitude/.:1)."
1357,"Thequan­
tizationprocessselectsthequantization valuefromthemiddleofeachzone.This
meansthatthenormalized quantized values(secondrow)aredifferent fromthenor­
malizedamplitudes."
1358,"Thedifference iscalledthenormalized error(thirdrow).The
fourthrowisthequantization codeforeachsamplebasedonthequantization levels
attheleftofthegraph.Theencoded words(fifthrow)arethefinalproducts ofthe
conversion."
1359,"Quantization Levels Intheprevious example, weshowedeightquantization levels."
1360,"ThechoiceofL,thenumberoflevels,depends ontherangeoftheamplitudes ofthe
analogsignalandhowaccurately weneedtorecoverthesignal.Iftheamplitude ofa
signalfluctuates between twovaluesonly,weneedonlytwolevels;ifthesignal,like
voice,hasmanyamplitude values,weneedmorequantization levels.Inaudiodigitiz­
ing,Lisnormally chosentobe256;invideoitisnormally thousands."
1361,"Choosing
lowervaluesofLincreases thequantization errorifthereisalotoffluctuation inthe
signal."
1362,"Quantization ErrorOneimportant issueistheerrorcreatedinthequantization pro­
cess.(Later,wewillseehowthisaffectshigh-speed modems.) Quantization isan
approximation process.Theinputvaluestothequantizer aretherealvalues;theoutput
valuesaretheapproximated values.Theoutputvaluesarechosentobethemiddle
valueinthezone.Iftheinputvalueisalsoatthemiddleofthezone,thereisnoquanti­
zationerror;otherwise, thereisanerror.Intheprevious example, thenormalized
amplitude ofthethirdsampleis3.24,butthenormalized quantized valueis3.50.This
meansthatthereisanerrorof+0.26.Thevalueoftheerrorforanysampleislessthan
.:112.Inotherwords,wehave-.:112-::;;error-::;;.:112."
1363,"Thequantization errorchangesthesignal-to-noise ratioofthesignal,whichinturn
reducestheupperlimitcapacityaccording toShannon."
1364,"Itcanbeproventhatthecontribution ofthequantization errortotheSNRdBof
thesignaldependsonthenumberofquantization levelsL,orthebitspersamplenb'as
showninthefollowing formula:
SNRdB=6.02nb+1.76dB
Example 4.12
WhatistheSNRdBintheexampleofFigure4.26?"
1365,"Solution
Wecanusetheformulatofindthequantization."
1366,"Wehaveeightlevelsand3bitspersample,so
SNRdB=6.02(3)+1.76=19.82dB.Increasing thenumberoflevelsincreases theSNR."
1367,"Example 4.13
Atelephone subscriber linemusthaveanSN~Babove40.Whatistheminimum numberofbits
persample?SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 127
Solution
Wecancalculate thenumberofbitsas
SN~:::: 6.02nb+1.76::::40.....n::::6.35
Telephone companies usuallyassign7or8bitspersample."
1368,"Uniform VersusNonuniform Quantization Formanyapplications, thedistribu­
tionoftheinstantaneous amplitudes intheanalogsignalisnotuniform."
1369,"Changes in
amplitude oftenoccurmorefrequently intheloweramplitudes thaninthehigher
ones.Forthesetypesofapplications itisbettertousenonuniform zones.Inother
words,theheightof~isnotfixed;itisgreaterneartheloweramplitudes andless
nearthehigheramplitudes."
1370,"Nonuniform quantization canalsobeachieved byusinga
processcalledcompanding andexpanding."
1371,"Thesignaliscompanded atthesender
beforeconversion; itisexpanded atthereceiverafterconversion."
1372,"Companding means
reducing theinstantaneous voltageamplitude forlargevalues;expanding istheoppo­
siteprocess."
1373,"Companding givesgreaterweighttostrongsignalsandlessweightto
weakones.Ithasbeenprovedthatnonuniform quantization effectively reducesthe
SNRdBofquantization."
1374,"Encoding
ThelaststepinPCMisencoding."
1375,"Aftereachsampleisquantized andthenumberof
bitspersampleisdecided, eachsamplecanbechangedtoanllb-bitcodeword.InFig­
ure4.26theencoded wordsareshowninthelastrow.Aquantization codeof2is
encoded as010;5isencoded as101;andsoon.Note that thenumberofbitsforeach
sampleisdetermined fromthenumberofquantization levels.Ifthenumberofquanti­
zationlevelsisL,thenumberofbitsisllb=log2L.Inourexample Lis8andllbis
therefore 3.Thebitratecanbefoundfromtheformula
Bitrate::::sampling ratexnumberofbitspersample::::isxnb
Example 4.14
Wewanttodigitizethehumanvoice.Whatisthebitrate,assuming 8bitspersample?"
1376,"Solution
Thehumanvoicenormally containsfrequencies from0to4000Hz.Sothesampling rateandbit
ratearecalculated asfollows:
Sampling rate::::4000x 2::::8000samples/s
Bitrate==8000x 8::::64,000bps==64kbps
Original SignalRecovery
Therecovery oftheoriginalsignalrequires thePCMdecoder."
1377,"Thedecoderfirstuses
circuitry toconvertthecodewordsintoapulsethatholdstheamplitude untilthenext
pulse.Afterthestaircase signaliscompleted, itispassedthroughalow-pass filterto128CHAPTER 4DIGITAL TRANSMISSION
smooththestaircase signalintoananalogsignal.Thefilterhasthesamecutofffre­
quencyastheoriginalsignalatthesender.Ifthesignalhasbeensampled at(or
greaterthan)theNyquistsampling rateandifthereareenoughquantization levels,
theoriginalsignalwillberecreated."
1378,"Notethatthemaximum andminimum valuesof
theoriginalsignalcanbeachieved byusingamplification."
1379,"Figure4.27showsthe
simplified process."
1380,"Figure4.27Components ofaPCMdecoder
Amplitude
~TI~'
PCMdecoder
AmplitudeAnalogsignal""%'
Makeand.........,
!lloool100r-'.-+Low-pass '.connect "",Timefilter' ,
samples,."
1381,"Digitaldata , ,,..',-.-..,
PCMBandwidth
Supposewearegiventhebandwidth ofalow-pass analogsignal.Ifwethendigitizethe
signal,whatisthenewminimum bandwidth ofthechannelthatcanpassthisdigitized
signal?Wehavesaidthattheminimum bandwidth ofaline-encoded signalisBmin=ex
Nx(lIr).Wesubstitute thevalueofNinthisformula:
111Bmin=cxNx -=cXnbxisx -=c xnbx 2 xBanalogx -r r r
WhenlIr=I(foraNRZorbipolarsignal)andc=(12)(theaveragesituation), the
minimum bandwidth is
Thismeanstheminimum bandwidth ofthedigitalsignalisnbtimesgreaterthanthe
bandwidth oftheanalogsignal.Thisisthepricewepayfordigitization."
1382,"Example 4.15
Wehavealow-pass analog signal of4kHz.Ifwesendtheanalogsignal,weneedachannelwith
aminimum bandwidth of4kHz.Ifwedigitizethesignalandsend8bitspersample,weneeda
channelwithaminimum bandwidth of8X4kHz=32kHz.SECTION 4.2ANALOG-TO-DIGITAL CONVERSION 129
Maximum DataRateofaChannel
InChapter3,wediscussed theNyquisttheorem whichgivesthedatarateofachannel
asNmax=2 xBxlog2L.WecandeducethisratefromtheNyquistsampling theorem
byusingthefollowing arguments."
1383,1.Weassumethattheavailable channelislow-pass withbandwidth B.
1384,"2.WeassumethatthedigitalsignalwewanttosendhasLlevels,whereeachlevelis
asignalelement."
1385,Thismeansr=1/10g2L.
1386,"3.Wefirstpassthedigitalsignalthroughalow-pass filtertocutoffthefrequencies
aboveBHz.
4.Wetreattheresulting signalasananalogsignalandsampleitat2 xBsamplesper
secondandquantize itusingLlevels.Additional quantization levelsareuseless
becausethesignaloriginally hadLlevels."
1387,"S.Theresulting bitrateisN=fsxnb=2 xBxlog2L.Thisisthemaximum band­
width;ifthecasefactorcincreases, thedatarateisreduced."
1388,"Nmax:::::2xBxlogzLbps
Minimum Required Bandwidth
Theprevious argument cangiveustheminimum bandwidth ifthedatarateandthe
numberofsignallevelsarefixed.Wecansay
B.=NHz
mm2xlogzL
DeltaModulation (DM)
PCMisaverycomplex technique."
1389,"Othertechniques havebeendeveloped toreduce
thecomplexity ofPCM.Thesimplest isdeltamodulation."
1390,"PCMfindsthevalueofthe
signalamplitude foreachsample;DMfindsthechangefromtheprevious sample.Fig­
ure4.28showstheprocess."
1391,"Notethattherearenocodewordshere;bitsaresentone
afteranother."
1392,"Figure4.28Theprocessofdeltamodulation
Amplitude
~.oT
?enerated 1_~_1 1_1Timebmarydata."
1393,"0 0 0 0 0 0 .130CHAPTER 4DIGITAL TRANSMISSION
Modulator
Themodulator isusedatthesendersitetocreateastreamofbitsfromananalogsignal."
1394,"Theprocessrecordsthesmallpositiveornegative changes, calleddeltaO.Ifthedeltais
positive, theprocessrecordsaI;ifitisnegative, theprocessrecordsaO.However, the
processneedsabaseagainstwhichtheanalogsignaliscompared."
1395,"Themodulator
buildsasecondsignalthatresembles astaircase."
1396,"Findingthechangeisthenreducedto
comparing theinputsignalwiththegradually madestaircase signal.Figure4.29shows
adiagramoftheprocess."
1397,"Figure4.29Deltamodulation components
OMmodulator
DigitaldataAnalogsignalt~ I---+---~c at...-----.-+-~ I I•..I100 ~.."
1398,"ompraor
Themodulator, ateachsampling interval, compares thevalueoftheanalogsignal
withthelastvalueofthestaircase signal.Iftheamplitude oftheanalogsignalislarger,
thenextbitinthedigitaldatais1;otherwise, itisO.Theoutputofthecomparator, how­
ever,alsomakesthestaircase itself.IfthenextbitisI,thestaircase makermovesthe
lastpointofthestaircase signal0up;itthenextbitis0,itmovesit0down.Notethatwe
needadelayunittoholdthestaircase functionforaperiodbetweentwocomparisons."
1399,"Demodulator
Thedemodulator takesthedigitaldataand,usingthestaircase makerandthedelay
unit,createstheanalogsignal.Thecreatedanalogsignal,however, needstopass
throughalow-pass filterforsmoothing."
1400,Figure4.30showstheschematic diagram.
1401,"Figure4.30Deltademodulation components
OMdemodulator
11""'1100
Digitaldata
AnalogsignalSECTION 4.3TRANSMISSION MODES 131
Adaptive DA1
Abetterperformance canbeachieved ifthevalueof0isnotfixed.Inadaptive delta
modulation, thevalueof0changesaccording totheamplitude oftheanalogsignal."
1402,"Quantization Error
ItisobviousthatDMisnotperfect.Quantization errorisalwaysintroduced inthepro­
cess.Thequantization errorofDM,however, ismuchlessthanthatforPCM."
1403,"4.3TRANSMISSION MODES
Ofprimaryconcernwhenweareconsidering thetransmission ofdatafromonedevice
toanotheristhewiring,andofprimaryconcernwhenweareconsidering thewiringis
thedatastream.Dowesend1bitatatime;ordowegroupbitsintolargergroupsand,
ifso,how?Thetransmission ofbinarydataacrossalinkcanbeaccomplished ineither
parallelorserialmode.Inparallelmode,multiple bitsaresentwitheachclocktick."
1404,"Inserialmode,1bitissentwitheachclocktick.Whilethereisonlyonewaytosend
paralleldata,therearethreesubclasses ofserialtransmission: asynchronous, synchro­
nous,andisochronous (seeFigure4.31)."
1405,"Figure4.31Datatransmission andmodes
Datatransmission
ParallelTransmission
Binarydata,consisting ofIsandOs,maybeorganized intogroupsofnbitseach."
1406,"Computers produceandconsume dataingroupsofbitsmuchasweconceive ofanduse
spokenlanguage intheformofwordsratherthanletters.Bygrouping, wecansend
datanbitsatatimeinsteadof1.Thisiscalledparalleltransmission."
1407,"Themechanism forparalleltransmission isaconceptually simpleone:Usenwires
tosendnbitsatonetime.Thatwayeachbithasitsownwire,andallnbitsofone
groupcanbetransmitted witheachclocktickfromonedevicetoanother.Figure4.32
showshowparalleltransmission worksforn=8.Typically, theeightwiresarebundled
inacablewithaconnector ateachend."
1408,"Theadvantage ofparalleltransmission isspeed.Allelsebeingequal,parallel
transmission canincreasethetransferspeedbyafactorofnoverserialtransmission.132CHAPTER 4DIGITAL TRANSMISSION
Figure4.32Paralleltransmission
The8bitsaresenttogether
,--""j/ ,/'-,."
1409,"Iv\ I\
f<I\1
<1I
SenderIvI Receiver
Ivj
vI\ \
<I A'\/ \'::/ //""-J
Weneedeightlines
Butthereisasignificant disadvantage: cost.Paralleltransmission requiresncommuni­
cationlines(wiresintheexample) justtotransmit thedatastream.Because thisis
expensive, paralleltransmission isusuallylimitedtoshortdistances."
1410,"SerialTransmission
Inserialtransmission onebitfollowsanother, soweneedonlyonecommunica­
tionchannelratherthanntotransmitdatabetween twocommunicating devices(see
Figure4.33)."
1411,"Figure4.33Serialtransmission
Weneedonly
oneline(wire).o
1
1
Sender 0oo
1oThe8bitsaresent
oneafteranother.o
1
o00010 1
-1-----------+1 gReceiver
o
1o
Parallel/serial
converterSerial/parallel
converter
Theadvantage ofserialoverparalleltransmission isthatwithonlyonecommuni­
cationchannel, serialtransmission reducesthecostoftransmission overparallelby
roughlyafactorofn."
1412,"Sincecommunication withindevicesisparallel,conversion devicesarerequiredat
theinterface between thesenderandtheline(parallel-to-serial) andbetween theline
andthereceiver(serial-to-parallel)."
1413,"Serialtransmission occursinoneofthreeways:asynchronous, synchronous, and
isochronous.SECTION 4.3TRANSMISSION MODES 133
Asynchronous Transmission
Asynchronous transmission issonamedbecausethetimingofasignalisunimportant."
1414,"Instead,information isreceivedandtranslated byagreeduponpatterns.Aslongasthose
patternsarefollowed, thereceiving devicecanretrievetheinformation withoutregard
totherhythminwhichitissent.Patternsarebasedongrouping thebitstreaminto
bytes.Eachgroup,usually8bits,issentalongthelinkasaunit.Thesendingsystem
handleseachgroupindependently, relayingittothelinkwhenever ready,withoutregard
toatimer."
1415,"Withoutsynchronization, thereceivercannotusetimingtopredictwhenthenext
groupwillarrive.Toalertthereceivertothearrivalofanewgroup,therefore, anextra
bitisaddedtothebeginning ofeachbyte.Thisbit,usuallya0,iscalledthestartbit."
1416,"Toletthereceiverknowthatthebyteisfinished, 1ormoreadditional bitsareappended
totheendofthebyte.Thesebits,usuallyIs,arecalledstopbits.Bythismethod,each
byteisincreased insizetoatleast10bits,ofwhich8bitsisinformation and2bitsor
morearesignalstothereceiver."
1417,"Inaddition, thetransmission ofeachbytemaythenbe
followed byagapofvaryingduration."
1418,"Thisgapcanberepresented eitherbyanidle
channelorbyastreamofadditional stopbits."
1419,"Inasynchronous transmission, wesend1startbit(0)atthebeginning and1ormore
stopbits(Is)attheendofeachbyte.Theremaybeagapbetweeneach byte."
1420,"Thestartandstopbitsandthegapalertthereceivertothebeginning andendof
eachbyteandallowittosynchronize withthedatastream.Thismechanism iscalled
asynchronous because, atthebytelevel,thesenderandreceiverdonothavetobesyn­
chronized."
1421,"Butwithineachbyte,thereceiver must still besynchronized with the
incoming bitstream.Thatis,somesynchronization isrequired, butonlyforthedura­
tionofasinglebyte.Thereceiving deviceresynchronizes attheonsetofeachnewbyte."
1422,"Whenthereceiverdetectsastartbit,itsetsatimerandbeginscounting bitsasthey
comein.Afternbits,thereceiverlooksforastopbit.Assoonasitdetectsthestopbit,
itwaitsuntilitdetectsthenextstartbit."
1423,"Asynchronous heremeans""asynchronous atthebytelevel;'
butthebitsarestillsynchronized; theirdurations arethesame."
1424,Figure4.34isaschematic illustration ofasynchronous transmission.
1425,"Inthisexam­
ple,thestartbitsareas,thestopbitsare1s,andthegapisrepresented byanidleline
ratherthanbyadditional stopbits."
1426,"Theaddition ofstopandstartbitsandtheinsertion ofgapsintothebitstream
makeasynchronous transmission slowerthanformsoftransmission thatcanoperate
withouttheadditionofcontrolinformation."
1427,"Butitischeapandeffective, twoadvan­
tagesthatmakeitanattractive choiceforsituations suchaslow-speed communication."
1428,"Forexample, theconnection ofakeyboard toacomputer isanaturalapplication for
asynchronous transmission."
1429,"Ausertypesonlyonecharacter atatime,typesextremely
slowlyindataprocessing terms,andleavesunpredictable gapsoftimebetween each
character.134CHAPTER 4DIGITAL TRANSMISSION
Figure4.34Asynchronous transmission
Direction offlow
""or~n"",~rtbit
~1'_111l1011 0
Sender
01101I0I@j1111101 10W000101 11011111
~~ r~~
Gapsbetween
dataunitsReceiver
Synchronous Transmission
Insynchronous transmission, thebitstreamiscombined intolonger""frames,"" which
maycontainmultiple bytes.Eachbyte,however, isintroduced ontothetransmission
linkwithoutagapbetween itandthenextone.Itislefttothereceivertoseparatethe
bitstreamintobytesfordecoding purposes."
1430,"Inotherwords,dataaretransmitted asan
unbroken stringof1s andOs,andthereceiverseparates thatstringintothebytes,or
characters, itneedstoreconstruct theinformation."
1431,"Insynchronous transmission, wesendbitsoneafteranotherwithoutstartorstop
bitsorgaps.Itistheresponsibility ofthereceivertogroupthebits."
1432,Figure4.35givesaschematic illustration ofsynchronous transmission.
1433,"Wehave
drawninthedivisions betweenbytes.Inreality,thosedivisions donotexist;thesender
putsitsdataontothelineasonelongstring.Ifthesenderwishestosenddatainseparate
bursts,thegapsbetweenburstsmustbefilledwithaspecialsequence ofOsandIsthat
meansidle.Thereceivercountsthebitsastheyarriveandgroupsthemin8-bitunits."
1434,"Figure4.35Synchronous transmission
Direction offlow
Sender 1101IIIFrame
111111011111110110 I···j111101111Frame
1,----tReceiver
11111
Without gapsandstartandstopbits,thereisnobuilt-inmechanism tohelpthe
receiving deviceadjustitsbitsynchronization midstream."
1435,"Timingbecomes veryimpor­
tant,therefore, becausetheaccuracy ofthereceivedinformation iscompletely dependent
ontheabilityofthereceiving devicetokeepanaccuratecountofthebitsastheycomein.SECTION 4.5KEYTERMS 135
Theadvantage ofsynchronous transmission isspeed.Withnoextrabitsorgapsto
introduce atthesendingendandremoveatthereceiving end,and,byextension, with
fewerbitstomove across thelink,synchronous transmission isfasterthanasynchro­
noustransmission."
1436,"Forthisreason,itismoreusefulforhigh-speed applications suchas
thetransmission ofdatafromonecomputer toanother.Bytesynchronization isaccom­
plishedinthedatalinklayer."
1437,"Weneedtoemphasize onepointhere.Although thereisnogapbetweencharacters
insynchronous serialtransmission, theremaybeunevengapsbetweenframes."
1438,"Isochronous
Inreal-time audioandvideo,inwhichunevendelaysbetween framesarenotaccept­
able,synchronous transmission fails.Forexample, TVimagesarebroadcast attherate
of30imagespersecond;theymustbeviewedatthesamerate.Ifeachimageissent
byusingoneormoreframes,thereshouldbenodelaysbetween frames.Forthistype
ofapplication, synchronization between characters isnotenough;theentirestreamof
bitsmustbesynchronized."
1439,"Theisochronous transmission guarantees thatthedata
arriveatafixedrate."
1440,"4.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
1441,"Books
Digitaltodigitalconversion isdiscussed inChapter 7of[Pea92], Chapter 3of
[CouOl], andSection5.1of[Sta04].Sampling isdiscussed inChapters 15,16, 17,and
18of[Pea92],Chapter3of[CouO!], andSection5.3of[Sta04].[Hsu03]givesagood
mathematical approach tomodulation andsampling."
1442,"Moreadvanced materials canbe
foundin[Ber96]."
1443,"4.5KEYTERMS
adaptivedeltamodulation
alternate markinversion (AMI)
analog-to-digital conversion
asynchronous transmission
baseline
baselinewandering
baudrate
biphase
bipolar
bipolarwith8-zerosubstitution (B8ZS)bitrate
blockcoding
companding andexpanding
dataelement
datarate
DCcomponent
deltamodulation (DM)
differential Manchester
digital-to-digital conversion
digitization136CHAPTER 4DIGITAL TRANSMISSION
eightbinary/ten binary(8B/lOB)
eight-binary, six-ternary (8B6T)
fourbinary/five binary(4B/5B)
fourdimensional, five-level pulse
amplitude modulation (4D-PAM5)
high-density bipolar3-zero(HDB3)
isochronous transmission
linecoding
Manchester
modulation rate
multilevel binary
multiline transmission, 3level(MLT-3)
nonreturn tozero(NRZ)
nonreturn tozero,invert(NRZ-I)
nonreturn tozero,level(NRZ-L)
Nyquisttheorem
paralleltransmission
polar
pseudoternarypulseamplitude modulation (PAM)
pulsecodemodulation (PCM)
pulserate
quantization
quantization error
returntozero(RZ)
sampling
sampling rate
scrambling
self-synchronizing
serialtransmission
signalelement
signalrate
startbit
stopbit
synchronous transmission
transmission mode
two-binary, onequaternary (2BIQ)
unipolar
4.6SUMMARY
oDigital-to-digital conversion involves threetechniques: linecoding,blockcoding,
andscrambling."
1444,oLinecodingistheprocessofconverting digitaldatatoadigitalsignal.
1445,"oWecanroughlydividelinecodingschemes intofivebroadcategories: unipolar,
polar,bipolar,multilevel, andmultitransition."
1446,"oBlockcodingprovides redundancy toensuresynchronization andinherent error
detection."
1447,"Blockcodingisnormally referredtoasmB/nBcoding;itreplaces each
m-bitgroupwithann-bitgroup."
1448,"oScrambling provides synchronization withoutincreasing thenumberofbits.Two
common scrambling techniques areB8ZSandHDB3."
1449,"oThemostcommon technique tochangeananalogsignaltodigitaldata(digitiza­
tion)iscalledpulsecodemodulation (PCM)."
1450,oThefirststepinPCMissampling.
1451,"TheanalogsignalissampledeveryTss,whereTs
isthesampleintervalorperiod.Theinverseofthesampling intervaliscalledthe
sampling rateorsampling frequency anddenotedbyfs,wherefs=lITs.Thereare
threesampling methods-ideal, natural,andflat-top."
1452,"oAccording totheNyquisttheorem, toreproduce theoriginalanalogsignal,one
necessary condition isthatthesampling ratebeatleasttwicethehighestfrequency
intheoriginalsignal.SECTION 4.7PRACTICE SET137
oOthersampling techniques havebeendeveloped toreducethecomplexity ofPCM."
1453,Thesimplest isdeltamodulation.
1454,"PCMfindsthevalueofthesignalamplitude for
eachsample;DMfindsthechangefromtheprevious sample."
1455,"oWhilethereisonlyonewaytosendparalleldata,therearethreesubclasses of
serialtransmission: asynchronous, synchronous, andisochronous."
1456,"oInasynchronous transmission, wesend1startbit(0)atthebeginning and1or
morestopbits(1s)attheendofeachbyte."
1457,"oInsynchronous transmission, wesendbitsoneafteranotherwithoutstartorstop
bitsorgaps.Itistheresponsibility ofthereceivertogroupthebits."
1458,"oTheisochronous modeprovides synchronized fortheentirestreamofbitsmust.In
otherwords,itguarantees thatthedataarriveatafixedrate."
1459,"4.7PRACTICE SET
ReviewQuestions
1.Listthreetechniques ofdigital-to-digital conversion."
1460,2.Distinguish between asignalelementandadataelement.
1461,3.Distinguish between datarateandsignalrate.
1462,4.Definebaseline wandering anditseffectondigitaltransmission.
1463,5.DefineaDCcomponent anditseffectondigitaltransmission.
1464,6.Definethecharacteristics ofaself-synchronizing signal.
1465,7.Listfivelinecodingschemes discussed inthisbook.
1466,8.Defineblockcodingandgiveitspurpose.
1467,9.Definescrambling andgiveitspurpose.
1468,10.Compare andcontrastPCMandDM.
1469,11.Whatarethedifferences between parallelandserialtransmission?
1470,12.Listthreedifferent techniques inserialtransmission andexplainthedifferences.
1471,"Exercises
13.Calculate thevalueofthesignalrateforeachcaseinFigure4.2ifthedatarateis
1Mbpsandc=1/2."
1472,"14.Inadigitaltransmission, thesenderclockis0.2percentfasterthanthereceiverclock."
1473,Howmanyextrabitsperseconddoesthesendersendifthedatarateis1Mbps?
1474,"15.DrawthegraphoftheNRZ-Lschemeusingeachofthefollowing datastreams,
assuming thatthelastsigna11evel hasbeenpositive."
1475,"Fromthegraphs,guessthe
bandwidth forthisschemeusingtheaveragenumberofchangesinthesignallevel."
1476,"Compare yourguesswiththecorresp.onding entryinTable4.1.
a.00000000
b.11111111
c.01010101
d.00110011138 CHAPTER 4DIGITAL TRANSMISSION
16.RepeatExercise 15fortheNRZ-Ischeme."
1477,17.RepeatExercise 15fortheManchester scheme.
1478,18.RepeatExercise 15forthedifferential Manchester scheme.
1479,"19.RepeatExercise 15forthe2B1Qscheme,butusethefollowing datastreams."
1480,"a.0000000000000000
b.1111111111111111
c.0101010101010101
d.0011001100110011
20.RepeatExercise 15fortheMLT-3scheme,butusethefollowing datastreams."
1481,"a.00000000
b.11111111
c.01010101
d.00011000
21.Findthe8-bitdatastreamforeachcasedepictedinFigure4.36."
1482,"Figure4.36Exercise 21
t
Time
a.NRZ-I
Time
b.differential Manchester
Time
c.AMI
22.AnNRZ-Isignalhasadatarateof100Kbps.UsingFigure4.6,calculate thevalue
ofthenormalized energy(P)forfrequencies at0Hz,50KHz,and100KHz.
23.AManchester signalhasadatarateof100Kbps.UsingFigure4.8,calculate the
valueofthenormalized energy(P)forfrequencies at0Hz,50KHz,100KHz.SECTION 4.7PRACTICE SET 139
24.Theinputstreamtoa4B/5Bblockencoderis01000000000000000000OOOI."
1483,"Answerthefollowing questions:
a.Whatistheoutputstream?"
1484,b.Whatisthelengthofthelongestconsecutive sequence ofOsintheinput?
1485,c.Whatisthelengthofthelongestconsecutive sequence ofOsintheoutput?
1486,25.Howmanyinvalid(unused) codesequences canwehavein5B/6Bencoding?
1487,"How
manyin3B/4Bencoding?"
1488,"26.Whatistheresultofscrambling thesequence 11100000000000 usingoneofthe
following scrambling techniques?"
1489,"Assume thatthelastnon-zero signallevelhas
beenpositive."
1490,"a.B8ZS
b.HDB3(Thenumberofnonzeropulesisoddafterthelastsubstitution)
27.WhatistheNyquistsampling rateforeachofthefollowing signals?"
1491,a.Alow-pass signalwithbandwidth of200KHz?
1492,"b.Aband-pass signalwithbandwidth of200KHzifthelowestfrequency is
100KHz?"
1493,"28.Wehavesampledalow-pass signalwithabandwidth of200KHzusing1024levels
ofquantization."
1494,a.Calculate thebitrateofthedigitized signal.
1495,b.Calculate theSNRdBforthissignal.
1496,c.Calculate thePCMbandwidth ofthissignal.
1497,"29.Whatisthemaximum datarateofachannelwithabandwidth of200KHzifwe
usefourlevelsofdigitalsignaling."
1498,"30.Ananalogsignalhasabandwidth of20KHz.Ifwesamplethissignalandsendit
througha30KbpschannelwhatistheSNRdB?"
1499,31.Wehaveabaseband channelwithaI-MHzbandwidth.
1500,"Whatisthedataratefor
thischannelifweuseoneofthefollowing linecodingschemes?"
1501,"a.NRZ-L
b.Manchester
c.MLT-3
d.2B1Q
32.Wewanttotransmit 1000characters witheachcharacter encoded as8bits."
1502,a.Findthenumberoftransmitted bitsforsynchronous transmission.
1503,b.Findthenumberoftransmitted bitsforasynchronous transmission.
1504,"c.Findtheredundancy percentineachcase.CHAPTERS
AnalogTransmission
InChapter3,wediscussed theadvantages anddisadvantages ofdigitalandanalogtrans­
mission."
1505,"Wesawthatwhiledigitaltransmission isverydesirable, alow-pass channelis
needed.Wealsosawthatanalogtransmission istheonlychoiceifwehaveabandpass
channel."
1506,"Digitaltransmission wasdiscussed inChapter4;wediscussanalogtransmis­
sioninthischapter."
1507,"Converting digitaldatatoabandpass analogsignal.is traditionally calleddigital­
to-analog conversion."
1508,"Converting alow-pass analogsignaltoabandpass analogsignal
istraditionally calledanalog-to-analog conversion."
1509,"Inthischapter,wediscussthesetwo
typesofconversions."
1510,"5.1DIGITAL-TO-ANALOG CONVERSION
Digital-to-analog conversion istheprocessofchanging oneofthecharacteristics of
ananalogsignalbasedontheinformation indigitaldata.Figure5.1showstherela­
tionship between thedigitalinformation, thedigital-to-analog modulating process,
andtheresultant analog signal."
1511,"Figure5.1Digital-to-analog conversion
DigitaldataSender
Analogsignal
LinkReceiver
Digitaldata
1°101...1011
141142CHAPTER 5ANALOG TRANSMISSION
Asdiscussed inChapter3,asinewaveisdefinedbythreecharacteristics: amplitude,
frequency, andphase.Whenwevaryanyoneofthesecharacteristics, wecreateadiffer­
entversionofthatwave.So,bychanging onecharacteristic ofasimpleelectricsignal,we
canuseittorepresent digitaldata.Anyofthethreecharacteristics can bealteredinthis
way,givingusatleastthreemechanisms formodulating digitaldataintoananalogsignal:
amplitude shiftkeying(ASK),frequency shiftkeying(FSK),andphaseshiftkeying
(PSK).Inaddition, thereisafourth(andbetter)mechanism thatcombines changing both
theamplitude andphase,calledquadrature amplitude modulation (QAM)."
1512,"QAM
isthemostefficient oftheseoptionsandisthemechanism commonly usedtoday(see
Figure5.2)."
1513,"Figure5.2Typesofdigital-to-analog conversion
""'------Digital-to-analog
conversion
Quadrature amplitude modulation
(QAM)
AspectsofDigital-to-Analog Conversion
Beforewediscussspecificmethods ofdigital-to-analog modulation, twobasicissues
mustbereviewed: bitandbaudratesandthecarriersignal."
1514,"DataElementVersusSignalElement
InChapter4,wediscussed theconceptofthedataelementversusthesignalelement."
1515,"Wedefinedadataelement asthesmallest pieceofinformation tobeexchanged, the
bit.Wealsodefinedasignalelement asthesmallest unitofasignalthatisconstant."
1516,"Although wecontinue tousethesametermsinthischapter,wewillseethatthenature
ofthesignalelementisalittlebitdifferent inanalogtransmission."
1517,"DataRateVersusSignalRate
Wecandefinethedatarate(bitrate)andthesignalrate(baudrate)aswedidfordigital
transmission."
1518,"Therelationship between themis
S=Nx! baudr
whereNisthedatarate(bps)andristhenumberofdataelements carriedinonesignal
element."
1519,"Thevalueofrinanalogtransmission isr=log2L,whereListhetypeofsig­
nalelement, notthelevel.Thesamenomenclature isusedtosimplify thecomparisons.SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 143
Bitrateisthenumberofbitspersecond.Baudrateisthenumberofsignal
elements persecond.Intheanalogtransmission ofdigitaldata,
thebaudrateislessthanorequaltothebitrate."
1520,"ThesameanalogyweusedinChapter4forbitrateandbaudrateapplieshere.In
transportation, abaudisanalogous toavehicle,andabitisanalogous toapassenger."
1521,Weneedtomaximize thenumberofpeoplepercartoreducethetraffic.
1522,"Example 5.1
Ananalogsignalcarries4bitspersignalelement."
1523,"If1000signalelements aresentpersecond,
findthebitrate."
1524,"Solution
Inthiscase,r=4,S=1000,andNisunknown."
1525,"WecanfindthevalueofNfrom
S=Nx!
rorN=Sxr= 1000x4=4000bps
Example 5.2
Ananalogsignalhasabitrateof8000bpsandabaudrateof1000baud.Howmanydataelements
arecarriedbyeachsignalelement?"
1526,Howmanysignalelements doweneed?
1527,"Solution
Inthisexample, S=1000,N=8000,andrandLareunknown."
1528,"Wefindfirstthevalueofrand
thenthevalueofL."
1529,"1S=Nx­
r
r=logzLN8000 .r=-=--=8bltslbaudS1000
L=y=28=256
Bandwidth
Therequired bandwidth foranalogtransmission ofdigitaldataisproportional tothe
signalrateexceptforFSK,inwhichthedifference between thecarriersignalsneedsto
beadded.Wediscussthebandwidth foreachtechnique."
1530,"CarrierSignal
Inanalogtransmission, thesendingdeviceproduces ahigh-frequency signalthatacts
asabasefortheinformation signal.Thisbasesignaliscalledthecarriersignalorcar­
rierfrequency."
1531,"Thereceiving deviceistunedtothefrequency ofthecarriersignalthatit
expectsfromthesender.Digitalinformation thenchangesthecarriersignalbymodify­
ingoneormoreofitscharacteristics (amplitude, frequency, orphase).Thiskindof
modification iscalledmodulation (shiftkeying)."
1532,"Amplitude ShiftKeying
Inamplitude shiftkeying,theamplitude ofthecarriersignalisvariedtocreatesignal
elements."
1533,"Bothfrequency andphaseremainconstantwhiletheamplitude changes.144CHAPTER 5ANALOG TRANSMISSION
BinaryASK(BASK)
Although wecanhaveseverallevels(kinds)ofsignalelements, eachwithadifferent
amplitude, ASKisnormally implemented usingonlytwolevels.Thisisreferredtoas
binaryamplitude shiftkeyingoron-offkeying(OOK).Thepeakamplitude ofonesig­
nallevelis0;theotheristhesameastheamplitude ofthecarrierfrequency."
1534,"Figure5.3
givesaconceptual viewofbinaryASK."
1535,"Figure5.3Binmyamplitude shiftkeying
Amplitude Bitrate:5
1signal
elemento
1signal
element1
Isignal
element
1s
Baudrate:5Isignal
elemento
Isignal
elementI
ITime
I
I
I
Ir=:=1S=N B=(I+d)S
Bandwidth forASKFigure5.3alsoshowsthebandwidth forASK.Although the
carriersignalisonlyonesimplesinewave,theprocessofmodulation produces a
nonperiodic composite signal.Thissignal,aswasdiscussed inChapter3,hasacontin­
uoussetoffrequencies."
1536,"Asweexpect,thebandwidth isproportional tothesignalrate
(baudrate).However, thereisnormally anotherfactorinvolved, calledd,which
dependsonthemodulation andfilteringprocess.Thevalueofdisbetween0and1.This
meansthatthebandwidth canbeexpressed asshown,where5isthesignalrateandtheB
isthebandwidth."
1537,"B=(1+d)xS
Theformulashowsthattherequired bandwidth hasaminimum valueof5anda
maximum valueof25.Themostimportant pointhereisthelocationofthebandwidth."
1538,"Themiddleofthebandwidth iswhereIethecarrierfrequency, islocated.Thismeansif
wehaveabandpass channelavailable, wecanchooseourIesothatthemodulated
signaloccupies thatbandwidth."
1539,"Thisisinfactthemostimportant advantage ofdigital­
to-analog conversion."
1540,Wecanshifttheresulting bandwidth tomatchwhatisavailable.
1541,"Implementation Thecomplete discussion ofASKimplementation isbeyondthe
scopeofthisbook.However, thesimpleideasbehindtheimplementation mayhelpus
tobetterunderstand theconceptitself.Figure5.4showshowwecansimplyimplement
binaryASK."
1542,"Ifdigitaldataarepresented asaunipolarNRZ(seeChapter4)digitalsignalwitha
highvoltageofIVandalowvoltageof0V,theimplementation canachieved by
multiplying theNRZdigitalsignalbythecarriersignalcomingfromanoscillator."
1543,"Whentheamplitude oftheNRZsignalis1,theamplitude ofthecarrierfrequency isSECTION 5.1DIGITAL-TO-ANALOG CONVERSION 145
Figure5.4Implementation ofbinaryASK
o
Carriersignal
II0
I
held;whentheamplitude oftheNRZsignalis0,theamplitude ofthecarrierfrequency
ISzero."
1544,"Example 5.3
Wehaveanavailable bandwidth of100kHzwhichspansfrom200to300kHz.Whatarethecar­
rierfrequency andthebitrateifwemodulated ourdatabyusingASKwithd=I?"
1545,"Solution
Themiddleofthebandwidth islocatedat250kHz.Thismeansthatourcarrierfrequency canbe
atfe=250kHz.Wecanusetheformulaforbandwidth tofindthebitrate(withd=1andr=1)."
1546,"B=(l+d)xS=2xNX!=2XN=100kHz......N=50kbps
r
Example 5.4
Indatacommunications, wenormally usefull-duplex linkswithcommunication inbothdirec­
tions.Weneedtodividethebandwidth intotwowithtwocarrierfrequencies, asshowninFig­
ure5.5.Thefigureshowsthepositions oftwocarrierfrequencies andthebandwidths."
1547,"The
available bandwidth foreachdirection isnow50kHz,whichleavesuswithadatarateof25kbps
ineachdirection."
1548,"Figure5.5Bandwidth offull-duplex ASKusedinExample 5.4
I'B=50kHz'11B=50kHz'I
~""~~~ ~,~Jf:L
200(225) (275) 300
Multilevel ASK
Theabovediscussion usesonlytwoamplitude levels.Wecanhavemultilevel ASKin
whichtherearemorethantwolevels.Wecanuse4,8,16,ormoredifferent amplitudes
forthesignalandmodulate thedatausing2,3,4,ormorebitsatatime.Inthesecases,146CHAPTER 5ANALOG TRANSMISSION
r=2,r=3,r=4,andsoon.Although thisisnotimplemented withpureASK,itis
implemented withQAM(aswewillseelater)."
1549,"Frequency ShiftKeying
Infrequency shiftkeying,thefrequency ofthecarriersignalisvariedtorepresent data."
1550,"Thefrequency ofthemodulated signalisconstant forthedurationofonesignalele­
ment,butchangesforthenextsignalelementifthedataelementchanges."
1551,"Bothpeak
amplitude andphaseremainconstantforallsignalelements."
1552,"BinaryFSK(BFSK)
OnewaytothinkaboutbinaryFSK(orBFSK)istoconsidertwocarrierfrequencies."
1553,"In
Figure5.6,wehaveselectedtwocarrierfrequencies,f} and12.Weusethefirstcarrierif
thedataelementis0;weusethesecondifthedataelementis1.However, notethatthis
isanunrealistic example usedonlyfordemonstration purposes."
1554,"Normally thecarrier
frequencies areveryhigh,andthedifference betweenthemisverysmall."
1555,"Figure5.6Binaryfrequency shiftkeying
AmplitudeBitrate:5 r=lS=NB=(1+d)S+2t-.j
1signal 1signal 1signal 1signal 1signal
element element element element element
Is Ith
I'21-.!-Io+-~--1-L....JL..--l--..I...-_oIl Il 1
Baudrate:5
AsFigure5.6shows,themiddleofonebandwidth isJIandthemiddleoftheother
ish.BothJIand12areil/apartfromthemidpoint betweenthetwobands.Thediffer­
encebetweenthetwo frequencies is211f
Bandwidth forBFSKFigure5.6alsoshowsthebandwidth ofFSK.Againthecar­
riersignalsareonlysimplesinewaves,butthemodulation createsanonperiodiccom­
positesignalwithcontinuous frequencies."
1556,"WecanthinkofFSKastwoASKsignals,
eachwithitsowncarrierfrequency Cilorh).Ifthedifference between thetwofre­
quencies is211j,thentherequiredbandwidth is
B=(l+d)xS+2iij
Whatshouldbetheminimum valueof211/?InFigure5.6,wehavechosenavalue
greaterthan(l+d)S.Itcanbeshownthattheminimum valueshouldbeatleastSfor
theproperoperation ofmodulation anddemodulation.SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 147
Example 5.5
Wehaveanavailable bandwidth of100kHzwhichspansfrom200to300kHz.Whatshouldbe
thecarrierfrequency andthebitrateifwemodulated ourdatabyusingFSKwithd=1?"
1557,"Solution
Thisproblem issimilartoExample 5.3,butwearemodulating byusingFSK.Themidpoint of
thebandisat250kHz.Wechoose 2~ftobe50kHz;thismeans
B=(1+d)x S+28f=100-.2S=50kHzS=25kbaud N;;;;25kbps
Compared toExample 5.3,wecanseethebitrateforASKis50kbpswhilethebitrateforFSKis
25kbps."
1558,"Implementation Therearetwoimplementations ofBFSK:noncoherent andcoher­
ent.Innoncoherent BFSK,theremaybediscontinuity inthephasewhenonesignal
elementendsandthenextbegins.Incoherent BFSK,thephasecontinues throughthe
boundary oftwosignalelements."
1559,"Noncoherent BFSKcanbeimplemented bytreating
BFSKastwoASKmodulations andusingtwocarrierfrequencies."
1560,"Coherent BFSKcan
beimplemented byusingonevoltage-controlled oscillator (VeO)thatchangesitsfre­
quencyaccording totheinputvoltage.Figure5.7showsthesimplified ideabehindthe
secondimplementation."
1561,"Theinputtotheoscillator istheunipolar NRZsignal.When
theamplitude ofNRZiszero,theoscillator keepsitsregularfrequency; whenthe
amplitude ispositive, thefrequency isincreased."
1562,"Figure5.7Implementation ofBFSK
1o 1o
_lD1_I_I_I_-;""~1 veo
I~
Voltage-controlled
oscillator
Multilevel FSK
Multilevel modulation (MFSK) isnotuncommon withtheFSKmethod."
1563,"Wecanuse
morethantwofrequencies."
1564,"Forexample, wecanusefourdifferent frequenciesfIJ2,!3,
and14tosend2bitsatatime.Tosend3bitsatatime,wecanuseeightfrequencies."
1565,"Andsoon.However, weneedtoremember thatthefrequencies needtobe2~1apart."
1566,"Fortheproperoperation ofthemodulator anddemodulator, itcanbeshownthatthe
minimum valueof2~lneeds tobeS.Wecanshowthatthebandwidth withd=0is
B;;;;(l+d)xS+(L-1)24{-.B=LxS148CHAPTER 5ANALOG TRANSMISSION
Example 5.6
Weneedtosenddata3bitsatatimeatabitrateof3Mbps.Thecarrierfrequency is
10MHz.Calculate thenumberoflevels(different frequencies), thebaudrate,andthe
bandwidth."
1567,"Solution
WecanhaveL=23=8.ThebaudrateisS=3MHz/3=1000Mbaud.Thismeansthatthecarrier
frequencies mustbe1MHzapart(211f=1MHz).Thebandwidth isB=8x1000=8000.Figure5.8
showstheallocation offrequencies andbandwidth."
1568,"Figure5.8Bandwidth ofMFSKusedinExample 5.6
'I
r~~'¥'::L
is
13.5
MHzI
h
12.5
MHzBandwidth =8MHz
II
6.5
MHzI'
-(.-----..""--,,I~~~lf5~~1I:
I--Ji~~l~;~r'·'
 ·t':~
hh 14j~15 16
7.5 8.5 9.5HI10.5 11.5
MHz MHz MHz MHzMHz MHz
PhaseShiftKeying
Inphaseshiftkeying,thephaseofthecarrierisvariedtorepresent twoormorediffer­
entsignalelements."
1569,"Bothpeakamplitude andfrequency remainconstant asthephase
changes."
1570,"Today,PSKismorecommon thanASKorFSK.However, wewillsee
Sh0l1lythatQAM,whichcombines ASKandPSK,isthedominant methodofdigital­
to-analog modulation."
1571,"BinaryPSK(BPSK)
ThesimplestPSKisbinaryPSK,inwhichwehaveonlytwosignalelements, onewith
aphaseof0°,andtheotherwithaphaseof180°.Figure5.9givesaconceptual view
ofPSK.BinaryPSKisassimpleasbinaryASKwithonebigadvantage-it isless
Figure5.9Binaryphaseshiftkeying
Amplitude Bitrate:5
o 1 I) r=1 S=N B={I+d)S
Isignal Isignal Isignal Isignal Isignal
element element element element element
Is
Baudrate:5SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 149
susceptible tonoise.InASK,thecriterion forbitdetection istheamplitude ofthesig­
nal;inPSK,itisthephase.Noisecanchangetheamplitude easierthanitcanchange
thephase.Inotherwords,PSKislesssusceptible tonoisethanASK.PSKissuperiorto
FSKbecausewedonotneedtwocarriersignals."
1572,"Bandwidth Figure5.9alsoshowsthebandwidth forBPSK.Thebandwidth isthe
sameasthatforbinaryASK,butlessthanthatforBFSK.Nobandwidth iswastedfor
separating twocarriersignals."
1573,"Implementation Theimplementation ofBPSKisassimpleasthatforASK.Therea­
sonisthatthesignalelementwithphase180°canbeseenasthecomplement ofthesig­
nalelementwithphase0°.Thisgivesusaclueonhowtoimplement BPSK.Weuse
thesameideaweusedforASKbutwithapolarNRZsignalinsteadofaunipolarNRZ
signal,asshowninFigure5.10.ThepolarNRZsignalismultiplied bythecarrierfre­
quency;the1bit(positive voltage)isrepresented byaphasestartingat0°;theabit
(negative voltage)isrepresented byaphasestartingat180°."
1574,"Figure5.10Implementation ofBASK
o 1
I
I
Carrie~signalo-=t:f=tt Multiplier~
------.tX I---'-;';';"""";"";""':"":""';"";';'~
*fc
Quadrature PSK(QPSK)
Thesimplicity ofBPSKenticeddesigners touse2bitsatatimeineachsignalelement,
therebydecreasing thebaudrateandeventually therequiredbandwidth."
1575,"Theschemeis
calledquadrature PSKorQPSKbecauseitusestwoseparateBPSKmodulations; one
isin-phase, theotherquadrature (out-of-phase)."
1576,"Theincoming bitsarefirstpassed
throughaserial-to-parallel conversion thatsendsonebittoonemodulator andthenext
bittotheothermodulator.Iftheduration ofeachbitintheincoming signalisT,the
durationofeachbitsenttothecorresponding BPSKsignalis2T.Thismeansthatthe
bittoeachBPSKsignalhasone-half thefrequency oftheoriginalsignal.Figure5.11
showstheidea."
1577,"Thetwocomposite signalscreatedbyeachmultiplier aresinewaveswiththe
samefrequency, butdifferent phases.Whentheyareadded,theresultisanother sine
wave,withoneoffourpossible phases:45°,-45°,135°,and-135°.Therearefour
kindsofsignalelements intheoutputsignal(L=4),sowecansend2bitspersignal
element(r=2).150 CHAPTER 5ANALOG TRANSMISSION
Figure5.11QPSKanditsimplementation
00
o1 U
101
o1 I
1
I I I
I I I
·p·,J\-:/YfAf\f~-tPtj'}/f'J\-lllJ~
I I I I
I I I I
I I I Io:0I I I
I
-135 -45 135 45
Example 5.7
Findthebandwidth forasignaltransmitting at12MbpsforQPSK.Thevalueofd=O."
1578,"Solution
ForQPSK,2bitsiscarriedbyonesignalelement."
1579,"Thismeansthatr=2.Sothesignalrate(baud
rate)isS=Nx(lIr)=6Mbaud.Withavalueofd=0,wehaveB=S=6MHz.
Constellation Diagram
Aconstellation diagram canhelpusdefinetheamplitude andphaseofasignalelement,
particularly whenweareusingtwocarriers(onein-phase andonequadrature), The
diagram isusefulwhenwearedealingwithmultilevel ASK,PSK,orQAM(seenext
section)."
1580,"Inaconstellation diagram, asignalelementtypeisrepresented asa dot.The
bitorcombination ofbitsitcancarryisoftenwrittennexttoit."
1581,"Thediagramhastwoaxes.Thehorizontal Xaxisisrelatedtothein-phase carrier;
theverticalYaxisisrelatedtothequadrature carrier.Foreachpointonthediagram,
fourpiecesofinformation canbededuced."
1582,"Theprojection ofthepointontheXaxis
definesthepeakamplitude ofthein-phase component; theprojection ofthepointon
theYaxisdefinesthepeakamplitude ofthequadrature component."
1583,"Thelengthofthe
line(vector)thatconnects thepointtotheoriginisthepeakamplitude ofthesignal
element(combination oftheXandYcomponents); theanglethelinemakeswiththe
Xaxisis thephaseofthesignalelement.Alltheinformation weneed,caneasilybefound
onaconstellation diagram."
1584,"Figure5.12showsaconstellation diagram.SECTION 5.1DIGITAL-TO-ANALOG CONVERSION 151
Figure5.12Conceptofaconstellation diagram
Y(Quadrature carrier)
-----------~,
,I
f+-<--' ~e.~~ Iol=: •..:S5~ I
~~ ?f"" I
B8.."
1585,"~<$'/ I:.:::E ., I
0..0#1""', IE0 ~:<::>,' I«C)lV, I
""Angle:phase I
, I__---L+_-----.J'---- ---'--~ X(In-phase carrier)
Amplitude of
Icomponent
Example 5.8
Showtheconstellation diagrams foranASK(OOK),BPSK,andQPSKsignals."
1586,"Solution
Figure5.13showsthethreeconstellation diagrams."
1587,"Figure5.13Threeconstellation diagrams
~--,
01'-.11
/ \
-."
1588,-.
1589,".-1 \
0---\I 0 1 \I
00.,__~1O
a.ASK(OOK) b.BPSK c.QPSK
Letusanalyzeeachcaseseparately:
a.ForASK,weareusingonlyanin-phase carrier.Therefore, thetwopointsshouldbeonthe
Xaxis.Binary0hasanamplitude of0V;binary1hasanamplitude of1V(forexample)."
1590,Thepointsarelocatedattheoriginandat1unit.
1591,"h.BPSKalsousesonlyanin-phase carrier.However, weuseapolarNRZsignalformodu­
lation.Itcreatestwotypesofsignalelements, onewithamplitude 1andtheotherwith
amplitude -1.Thiscanbestatedinotherwords:BPSKcreatestwodifferent signalelements,
onewithamplitude I Vandinphaseandtheotherwithamplitude 1Vand1800outofphase."
1592,"c.QPSKusestwocarriers,onein-phase andtheotherquadrature."
1593,"Thepointrepresenting 11is
madeoftwocombined signalelements, bothwithanamplitude of1V.Oneelementisrep­
resentedbyanin-phasecarrier,theotherelementbyaquadrature carrier.Theamplitude of
thefinalsignalelementsentforthis2-bitdataelementis2112,andthephaseis45°.The
argument issimilarfortheotherthreepoints.Allsignalelements haveanamplitude of2112,
buttheirphasesaredifferent (45°,135°,-135°,and-45°).Ofcourse,wecouldhavechosen
theamplitude ofthecarriertobe1/(21/2)tomakethefinalamplitudes 1V.152CHAPTER 5ANALOG TRANSMISSION
Quadrature Amplitude Modulation
PSKislimitedbytheabilityoftheequipment todistinguish smalldifferences inphase."
1594,"Thisfactorlimitsitspotential bitrate.Sofar,wehavebeenalteringonlyoneofthe
threecharacteristics ofasinewaveatatime;butwhatifwealtertwo?Whynotcom­
bineASKandPSK?Theideaofusingtwocarriers,onein-phase andtheotherquadra­
ture,withdifferent amplitude levelsforeachcarrieristheconceptbehindquadrature
amplitude modulation (QAM)."
1595,Quadrature amplitude modulation isacombination ofASKandPSK.
1596,Thepossiblevariations ofQAMarenumerous.
1597,"Figure5.14showssomeofthese
schemes."
1598,"Figure5.14ashowsthesimplest 4-QAMscheme(fourdifferent signal ele­
menttypes)usingaunipolar NRZsignaltomodulate eachcarrier.Thisisthesame
mechanism weusedforASK(OOK).Partbshowsanother4-QAMusingpolarNRZ,
butthisisexactlythesameasQPSK.PartcshowsanotherQAM-4inwhichweuseda
signalwithtwopositivelevelstomodulate eachofthetwocarriers.Finally,Figure5.14d
showsa16-QAM constellation ofasignalwitheightlevels,fourpositiveandfour
negative."
1599,"Figure5.14Constellation diagrams forsomeQAMs
t•• • ••••• •L•• • • ••••
I~ • •••• • ••••
a.4·QAM b.4-QAM c.4.QAM d.16·QAM
Bandwidth forQAM
Theminimum bandwidth requiredforQAMtransmission isthesameasthatrequired
forASKandPSKtransmission."
1600,QAMhasthesameadvantages asPSKoverASK.
1601,"5.2ANALOG-TO-ANALOG CONVERSION
Analog-to-analog conversion, oranalogmodulation, istherepresentation ofanalog
information byananalogsignal.Onemayaskwhyweneedtomodulate ananalogsig­
nal;itisalreadyanalog.Modulation isneededifthemediumisbandpass innatureorif
onlyabandpass channelisavailable tous.Anexampleisradio.Thegovernment assigns
anarrowbandwidth toeachradiostation.Theanalogsignalproduced byeachstationis
alow-pass signal,allinthesamerange.Tobeabletolistentodifferent stations,the
low-pass signalsneedtobeshifted,eachtoadifferentrange.SECTION 5.2ANALOG-TO-ANALOG CONVERSION 153
Analog-to-analog conversion canbeaccomplished inthreeways:amplitude
modulation (AM),frequency modulation (FM),andphasemodulation (PM).FM
andPMareusuallycategorized together."
1602,SeeFigure5.15.
1603,"Figure5.15Typesofanalog-to-analog modulation
Analog-lo-analog
conversion
Frequency modulation
Amplitude Modulation
InAMtransmission, thecarriersignalismodulated sothatitsamplitude varieswiththe
changing amplitudes ofthemodulating signal.Thefrequency andphaseofthecarrier
remainthesame;onlytheamplitude changestofollowvariations intheinformation."
1604,"Fig­
ure5.16showshowthisconceptworks.Themodulating signalistheenvelope ofthecarrier."
1605,"Figure5.16Amplitude modulation
JjBAM=2B
:Lo I
1;
AsFigure5.16shows,AMisnormally implemented byusingasimplemultiplier
becausetheamplitude ofthecarriersignalneedstobechangedaccording totheampli­
tudeofthemodulating signal."
1606,"AMBandwidth
Figure5.16alsoshowsthebandwidth ofanAMsignal.Themodulation createsaband­
widththatistwicethebandwidth ofthemodulating signalandcoversarangecentered
onthecarrierfrequency."
1607,"However, thesignalcomponents aboveandbelowthecarrier154CHAPTER 5ANALOG TRANSMISSION
frequency carryexactlythesameinformation."
1608,"Forthisreason,someimplementations
discardone-halfofthesignalsandcutthebandwidth inhalf."
1609,"ThetotalbandwIdth required forAMcanbedetermined
fromthebandwidth oftheaudiosignal:BAM=2B."
1610,"------------------_~-~,~_-
Stalldard Balldwidth Allocatioll forAiHl(adio
Thebandwidth ofanaudiosignal(speechandmusic)isusually5kHz.Therefore, an
AMradiostationneedsabandwidth of10kHz.Infact,theFederalCommunications
Commission (FCC)allows10kHzforeachAMstation."
1611,"AMstationsareallowedcarrierfrequencies anywhere between530and1700kHz
(1.7MHz).However, eachstation'scarrierfrequency mustbeseparated fromthoseon
eithersideofitbyatleast10kHz(oneAMbandwidth) toavoidinterference."
1612,"Ifone
stationusesacarrierfrequency of1100kHz,thenextstation'scarrierfrequency cannot
belowerthan1110kHz(seeFigure5.17)."
1613,"Figure5.17AMbandallocation
__*_*_*_....I....- .....t-'""....=u.;[IJ
530 I',I 1700
kHz 10kHz kHz
Frequency Modulation
InFMtransmission, thefrequency ofthecarriersignalismodulated tofollowthechang­
ingvoltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude andphaseof
thecarriersignalremainconstant, butastheamplitude oftheinformation signal
changes, thefrequency ofthecarrierchangescorrespondingly."
1614,"Figure5.18showsthe
relationships ofthemodulating signal,thecarriersignal,andtheresultantFMsignal."
1615,"AsFigure5.18shows,FMisnOimalIy implemented byusingavoltage-controlled
oscillator aswithFSK.Thefrequency oftheoscillator changesaccording totheinput
voltagewhichistheamplitude ofthemodulating signal."
1616,"FiHBalldwidth
Figure5.18alsoshowsthebandwidth ofanFMsignal.Theactualbandwidth isdiffi­
culttodetermine exactly,butitcanbeshownempirically thatitisseveraltimesthat
oftheanalogsignalor2(1+~)Bwhere ~isafactordependsonmodulation technique
withacommon valueof4."
1617,"Thetotalbandwidth required forFMcanbedetermined from
thebandwidth oftheaudiosignal:BFM=2(1+j3)B.SECTION 5.2ANALOG-TO-ANALOG CONVERSION 155
:Figure5.1gFrequency modulation------------ ----------
Amplitude
Modulating signal(audio)
DB,""=2(1+filR
:Lo I
IeC"".I
I~ ___ ""0-----,J~~veo .-
VOltage-controlled
oscillator
Time
TimeTime
FMsignal
n!
------ ------_._-----------------
,c.,'twllhm! Bandwidth A.llo('((tiOll forF,\fRadio
Thebandwidth ofanaudiosignal(speechandmusic)broadcast instereoisalmost
15kHz.TheFCCallows200kHz(0.2MHz)foreachstation.Thismean ~=4with
someextraguardband.FMstationsareallowedcarrierfrequencies anywhere between
88and108MHz.Stationsmustbeseparated byatleast200kHztokeeptheirband­
widthsfromoverlapping."
1618,"Tocreateevenmoreprivacy,theFCCrequiresthatinagiven
area,onlyalternate bandwidth allocations maybeused.Theothersremainunusedtopre­
ventanypossibility oftwostationsinterfering witheachother.Given88to108MHzas
arange,thereare100potential PM bandwidths inanarea,ofwhich50canoperateat
anyonetime.Figure5.19illustrates thisconcept."
1619,"Figure5.19FMbandallocation
,--_t,-e_Ist~~on
88
MHzIe
t
I-200kHz,I...Iet------_."
1620,"__._--
No
station
108
MHz
Phast',\loduiation
InPMtransmission, thephaseofthecarriersignalismodulated tofollowthechanging
voltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude andfrequency
ofthecarriersignalremainconstant, butastheamplitude oftheinformation signal
changes, thephaseofthecarrierchangescorrespondingly."
1621,"Itcanprovedmathemati­
cally(seeAppendix C)thatPMisthesameasFMwithonedifference."
1622,"InFM,the
instantaneous changeinthecarrierfrequency isproportional totheamplitude ofthe156CHAPTER 5ANALOG TRANSMISSION
modulating signal;inPMtheinstantaneous changeinthecarrierfrequency ispropor­
tionaltothederivative oftheamplitude ofthemodulating signal.Figure5.20showsthe
relationships ofthemodulating signal,thecarriersignal,andtheresultant PMsignal."
1623,"Figure5.20Phasemodulation
Amplitude
Modulating signal(audio)
PMsignalTime
Time
Time
VCOI~Ir
~I'J1dldtI 1
AsFigure5.20shows,PMisnormally implemented byusingavoltage-controlled
oscillator alongwithaderivative."
1624,"Thefrequency oftheoscillator changesaccording to
thederivative oftheinputvoltagewhichistheamplitude ofthemodulating signal."
1625,"PMBandwidth
Figure5.20alsoshowsthebandwidth ofaPMsignal.Theactualbandwidth isdifficult
todetermine exactly,butitcanbeshownempirically thatitisseveraltimesthatofthe
analogsignal.Although, theformulashowsthesamebandwidth forFMandPM,the
valueof~islowerinthecaseofPM(around1fornarrowband and3forwideband)."
1626,"Thetotalbandwidth required forPMcanbedetermined fromthebandwidth and
maximum amplitude ofthemodulating signal:BpM=2(1+~)B."
1627,"5.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
1628,"Books
Digital-to-analog conversion isdiscussed inChapter 14of[Pea92], Chapter 5of
[CouOl], andSection5.2of[Sta04].Analog-to-analog conversion isdiscussed in
Chapters 8to13of[Pea92],Chapter5of[CouOl], andSection5.4of[Sta04].[Hsu03]SECTION 5.5SUMMARY 157
givesagoodmathematical approach toallmaterials discussed inthischapter.More
advanced materials canbefoundin[Ber96]."
1629,"5.4KEYTERMS
amplitude modulation (AM)
amplitude shiftkeying(ASK)
analog-to-analog conversion
carriersignal
constellation diagram
digital-to-analog conversionfrequency modulation (PM)
frequency shiftkeying(FSK)
phasemodulation (PM)
phaseshiftkeying(PSK)
quadrature amplitude modulation
(QAM)
5.5SUMMARY
oDigital-to-analog conversion istheprocessofchanging oneofthecharacteristics
ofananalogsignalbasedontheinformation inthedigitaldata."
1630,"oDigital-to-analog conversion canbeaccomplished inseveralways:amplitude shift
keying(ASK),frequency shiftkeying(FSK),andphaseshiftkeying(PSK)."
1631,Quadrature amplitude modulation (QAM)combines ASKandPSK.
1632,"oInamplitude shiftkeying,theamplitude ofthecarriersignalisvariedtocreatesignal
elements."
1633,Bothfrequency andphaseremainconstantwhiletheamplitude changes.
1634,"oInfrequency shiftkeying,thefrequency ofthecarriersignalisvariedtorepresent
data.Thefrequency ofthemodulated signalisconstantforthedurationofonesig­
nalelement, butchangesforthenextsignalelementifthedataelementchanges."
1635,Bothpeakamplitude andphaseremainconstantforallsignalelements.
1636,"oInphaseshiftkeying,thephaseofthecarrierisvariedtorepresent twoormoredif­
ferentsignalelements."
1637,"Bothpeakamplitude andfrequency remainconstant asthe
phasechanges."
1638,"oAconstellation diagram showsustheamplitude andphaseofasignalelement,
particularly whenweareusingtwocarriers(onein-phase andonequadrature)."
1639,oQuadrature amplitude modulation (QAM)isacombination ofASKandPSK.
1640,"QAMusestwocarriers, onein-phase andtheotherquadrature, withdifferent
amplitude levelsforeachcarrier."
1641,"oAnalog-to-analog conversion istherepresentation ofanaloginformation byan
analogsignal.Conversion isneededifthemediumisbandpass innatureorifonly
abandpass bandwidth isavailable tous."
1642,"oAnalog-to-analog conversion canbeaccomplished inthreeways:amplitude modu­
lation(AM),frequency modulation (FM),andphasemodulation (PM)."
1643,"oInAMtransmission, thecarriersignalismodulated sothatitsamplitude varieswiththe
changing amplitudes ofthemodulating signal.Thefrequency andphaseofthecarrier
remainthesame;onlytheamplitude changestofollowvariations intheinformation."
1644,"oInPMtransmission, thefrequency ofthecarriersignalismodulated tofollowthe
changing voltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude158CHAPTER 5ANALOG TRANSMISSION
andphaseofthecarriersignalremainconstant, butastheamplitude oftheinfor­
mationsignalchanges, thefrequency ofthecarrierchanges correspondingly."
1645,"oInPMtransmission, thephaseofthecarriersignalismodulated tofollowthe
changing voltagelevel(amplitude) ofthemodulating signal.Thepeakamplitude
andfrequency ofthecarriersignalremainconstant, butastheamplitude ofthe
information signalchanges, thephaseofthecarrierchanges correspondingly."
1646,"5.6PRACTICE SET
ReviewQuestions
1.Defineanalogtransmission."
1647,2.Definecarriersignalanditsroleinanalogtransmission.
1648,3.Definedigital-to-analog conversion.
1649,"4.Whichcharacteristics ofananalogsignalarechanged torepresent thedigitalsignal
ineachofthefollowing digital-to-analog conversion?"
1650,"a.ASK
b.FSK
c.PSK
d.QAM
5.Whichofthefourdigital-to-analog conversion techniques (ASK,FSK,PSKor
QAM)isthemostsusceptible tonoise?Defendyouranswer."
1651,6.Defineconstellation diagram anditsroleinanalogtransmission.
1652,7.Whatarethetwocomponents ofasignalwhenthesignalisrepresented onacon-.
1653,stellation diagram?
1654,"Whichcomponent isshownonthehorizontal axis?Whichis
shownontheverticalaxis?"
1655,8.Defineanalog-to-analog conversion?
1656,"9.Whichcharacteristics ofananalogsignalarechangedtorepresent thelowpassanalog
signalineachofthefollowing analog-to-analog conversions?"
1657,"a.AM
b.FM
c.PM
]0.Whichofthethreeanalog-to-analog conversion techniques (AM,FM,orPM)is
themostsusceptible tonoise?Defendyouranswer."
1658,"Exercises
11.Calculate thebaudrateforthegivenbitrateandtypeofmodulation."
1659,"a.2000bps,FSK
b.4000bps,ASK
c.6000bps,QPSK
d.36,000bps,64-QAMSECTION 5.6PRACTICE SET 159
12.Calculate thebitrateforthegivenbaudrateandtypeofmodulation."
1660,"a.1000baud,FSK
b.1000baud,ASK
c.1000baud,BPSK
d.1000baud,16-QAM
13.Whatisthenumberofbitsperbaudforthefollowing techniques?"
1661,"a.ASKwithfourdifferent amplitudes
b.FSKwith8different frequencies
c.PSKwithfourdifferent phases
d.QAMwithaconstellation of128points."
1662,"14.Drawtheconstellation diagramforthefollowing:
a.ASK,withpeakamplitude valuesof1and3
b.BPSK,withapeakamplitude valueof2
c.QPSK,withapeakamplitude valueof3
d.8-QAMwithtwodifferent peakamplitude values,Iand3,andfourdifferent
phases."
1663,"15.Drawtheconstellation diagram forthefollowing cases.Findthepeakamplitude
valueforeachcaseanddefinethetypeofmodulation (ASK,FSK,PSK,orQAM)."
1664,Thenumbers inparentheses definethevaluesofIandQrespectively.
1665,"a.Twopointsat(2,0)and(3,0)."
1666,"b.Twopointsat(3,0)and(-3,0)."
1667,"c.Fourpointsat(2,2),(-2,2),(-2,-2),and(2,-2)."
1668,"d.Twopointsat(0,2)and(0,-2)."
1669,"16.Howmanybitsperbaudcanwesendineachofthefollowing casesifthesignal
constellation hasoneofthefollowing numberofpoints?"
1670,"a.2
b.4
c.16
d.1024
17.Whatistherequiredbandwidth forthefollowing casesifweneedtosend4000bps?"
1671,Letd=1.
1672,"a.ASK
b.FSKwith2~f=4KHz
c.QPSK
d.16-QAM
18.Thetelephone linehas4KHzbandwidth."
1673,"Whatisthemaximum numberofbitswe
cansendusingeachofthefollowing techniques?"
1674,Letd=O.
1675,"a.ASK
b.QPSK
c.16-QAM
d.64-QAM160CHAPTER 5ANALOG TRANSMISSION
19.Acorporation hasamedium withaI-MHzbandwidth (lowpass)."
1676,"Thecorporation
needstocreate10separate independent channels eachcapableofsendingatleast
10Mbps.Thecompany hasdecidedtouseQAMtechnology."
1677,"Whatisthemini­
mumnumberofbitsperbaudforeachchannel?"
1678,"Whatisthenumberofpointsin
theconstellation diagram foreachchannel?"
1679,Letd=O.
1680,"20.Acablecompany usesoneofthecableTVchannels (withabandwidth of6MHz)
toprovidedigitalcommunication foreachresident."
1681,"Whatistheavailable datarate
foreachresidentifthecompany usesa64-QAM technique?"
1682,"21.Findthebandwidth forthefollowing situations ifweneedtomodulate a5-KHz
voice."
1683,"a.AM
b.PM(set~=5)
c.PM(set~=1)
22.Findthetotalnumberofchannels inthecorresponding bandallocated byFCC."
1684,"a.AM
b.FMCHAPTER 6
Bandwidth Utilization:
Multiplexing andSpreading
Inreallife,wehavelinkswithlimitedbandwidths."
1685,"Thewiseuseofthesebandwidths
hasbeen,andwillbe,oneofthemainchallenges ofelectronic communications."
1686,"How­
ever,themeaningofwisemaydependontheapplication."
1687,"Sometimes weneedtocombine
severallow-bandwidth channels tomakeuseofonechannelwithalargerbandwidth."
1688,"Sometimes weneedtoexpandthebandwidth ofachanneltoachievegoalssuchas
privacyandantijamming."
1689,"Inthischapter, weexplorethesetwobroadcategories of
bandwidth utilization: multiplexing andspreading."
1690,"Inmultiplexing, ourgoaliseffi­
ciency;wecombine severalchannels intoone.Inspreading, ourgoalsareprivacyand
antijamming; weexpandthebandwidth ofachanneltoinsertredundancy, whichis
necessary toachievethesegoals."
1691,Bandwidth utilization isthewiseuseofavailable bandwidth toachievespecificgoals.
1692,"Efficiency canbeachieved bymultiplexing;
privacyandantijamming canbeachieved byspreading."
1693,"6.1MULTIPLEXING
Whenever thebandwidth ofamedium linkingtwodevicesisgreaterthantheband­
widthneedsofthedevices,thelinkcanbeshared.Multiplexing is thesetoftechniques
thatallowsthesimultaneous transmission ofmultiple signalsacrossasingledatalink."
1694,"Asdataandtelecommunications useincreases, sodoestraffic.Wecanaccommodate
thisincreasebycontinuing toaddindividual linkseachtimeanewchannelisneeded;
orwecaninstallhigher-bandwidth linksanduseeachtocarrymultiple signals.As
described inChapter 7,today'stechnology includes high-bandwidth mediasuchas
opticalfiberandterrestrial andsatellitemicrowaves."
1695,"Eachhasabandwidth farinexcess
ofthatneededfortheaveragetransmission signal.Ifthebandwidth ofalinkisgreater
thanthebandwidth needsofthedevicesconnected toit,thebandwidth iswasted.An
efficient system maximizes theutilization ofallresources; bandwidth isoneofthe
mostprecious resources wehaveindatacommunications."
1696,"161162CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Inamultiplexed system,nlinessharethebandwidth ofonelink.Figure6.1shows
thebasicformatofamultiplexed system.Thelinesontheleftdirecttheirtransmission
streamstoamultiplexer (MUX),whichcombines themintoasinglestream(many-to­
one).Atthereceiving end,thatstreamisfedintoademultiplexer (DEMUX), which
separates thestreambackintoitscomponent transmissions (one-to-many) and
directsthemtotheircorresponding lines.Inthefigure,thewordlinkreferstothe
physicalpath.Thewordchannelreferstotheportionofalinkthatcarriesatransmis­
sionbetweenagivenpairoflines.Onelinkcanhavemany(n)channels."
1697,"Figure6.1Dividing alinkintochannels
nInput
lines~MUX:Multiplexer /
DEMUX: Demultiplexer D
M E
•U ,M· ·X U· · X· Ilink,11channels
/ ~nOutput
lines
Therearethreebasicmultiplexing techniques: frequency-division multiplexing,
wavelength-division multiplexing, andtime-division multiplexing."
1698,"Thefirsttwoare
techniques designed foranalogsignals,thethird,fordigitalsignals(seeFigure6.2)."
1699,"Figure6.2Categories ofmultiplexing
Multiplexing
I
I I I
Frequency-divisionIWavelength-division Time-division
multiplexing multiplexing multiplexing
Analog Analog Digital
Although sometextbooks consider carrierdivisionmultipleaccess(COMA) asa
fourthmultiplexing category, wediscussCOMAasanaccessmethod(seeChapter12)."
1700,"Frequency -Division Multiplexing
Frequency-division multiplexing (FDM)isananalogtechnique thatcanbeapplied
whenthebandwidth ofalink(inhertz)isgreaterthanthecombined bandwidths of
thesignalstobetransmitted."
1701,"InFOM,signalsgenerated byeachsendingdevice modu­
latedifferentcarrierfrequencies."
1702,"Thesemodulated signalsarethencombined intoasingle
composite signalthatcanbetransported bythelink.Carrierfrequencies areseparated by
sufficient bandwidth toaccommodate themodulated signal.Thesebandwidth rangesare
thechannels throughwhichthevarioussignalstravel.Channels canbeseparated bySECTION 6.1MULTIPLEXING 163
stripsofunusedbandwidth-guard bands-to preventsignalsfromoverlapping."
1703,"In
addition, carrierfrequencies mustnotinterferewiththeoriginaldatafrequencies."
1704,"Figure6.3givesaconceptual viewofFDM.Inthisillustration, thetransmission path
isdividedintothreeparts,eachrepresenting achannelthatcarriesonetransmission."
1705,"Figure6.3Frequency-division multiplexing
D
MChannel J EInputU Chanllel2 MOutput
lines JinesX U
X
Weconsider FDMtobeananalogmultiplexing technique; however, thisdoesnot
meanthatFDMcannotbeusedtocombine sourcessendingdigitalsignals.Adigital
signalcanbeconverted toananalogsignal(withthetechniques discussed inChapter5)
beforeFDMisusedtomultiplex them."
1706,FDMisananalogmultiplexing technique thatcombines analogsignals.
1707,"Multiplexing Process
Figure6.4isaconceptual illustration ofthemultiplexing process.Eachsourcegener­
atesasignalofasimilarfrequency range.Insidethemultiplexer, thesesimilarsignals
modulates different carrierfrequencies (/1,12,andh).Theresulting modulated signals
arethencombined intoasinglecomposite signalthatissentoutoveramedialinkthat
hasenoughbandwidth toaccommodate it."
1708,"Figure6.4FDMprocess
Modulator
U!UUUUA!!!Amvmvmnm
CarrierhModulator
flOflflflflflflVVlJl)l)VVV
Carrierh
Baseband
analogsignalsModulator/\/\/\/\V\TV\)
Carrier!1164CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Demultiplexing Process
Thedemultiplexer usesaseriesoffilterstodecompose themultiplexed signalintoits
constituent component signals.Theindividual signalsarethenpassedtoademodulator
thatseparates themfromtheircarriersandpassesthemtotheoutputlines.Figure6.5is
aconceptual illustration ofdemultiplexing process."
1709,"Figure6.5FDMdemultiplexing example
DemodulatorAAAAVVVV
Carrier!l
Baseband
analogsignalsDemodulator
AA!!AAAAAAAAAA!!mvmvmmn
Carrierh
~/-- ,
\ '
\""-
•:==D=e=m=o=d=ul=at=or==~
"" \AAAAAnAAvvvvvvvv
'----~ ....~'./1' ~~ Carrierh
Example 6.1
Assumethatavoicechanneloccupies abandwidth of4kHz.Weneedtocombine threevoice
channels intoalinkwithabandwidth of12kHz,from20to32kHz.Showtheconfiguration,
usingthefrequency domain.Assumetherearenoguardbands."
1710,"Solution
Weshift(modulate) eachofthethreevoicechannels toadifferent bandwidth, asshowninFig­
ure6.6.Weusethe20-to24-kHzbandwidth forthefirstchannel, the24-to28-kHzbandwidth
forthesecondchannel, andthe28-to32-kHzbandwidth forthethirdone.Thenwecombine
themasshowninFigure6.6.Atthereceiver, eachchannelreceivestheentiresignal,usinga
filtertoseparate outitsownsignal.Thefirstchannelusesafilterthatpassesfrequencies
between 20and24kHzandfiltersout(discards) anyotherfrequencies."
1711,"Thesecondchannel
usesafilterthatpassesfrequencies between 24and28kHz,andthethirdchannelusesafilter
thatpassesfrequencies between28and32kHz.Eachchannelthenshiftsthefrequency tostart
fromzero."
1712,"Example 6.2
Fivechannels, eachwithalOa-kHz bandwidth, aretobemultiplexed together."
1713,"Whatisthemini­
mumbandwidth ofthelinkifthereisaneedforaguardbandof10kHzbetweenthechannels to
preventinterference?"
1714,"Solution
Forfivechannels, weneedatleastfourguardbands.Thismeansthattherequiredbandwidth isat
least5x100+4x10=540kHz,asshowninFigure6.7.SECTION 6.1MULTIPLEXING 165
Figure6.6Example 6.1
Shiftandcombine
Higher-bandwidth link
Bandpass
filter
Bandpass
filter
Figure6.7Example 6.2
Guardband
of10kHz
I.100kHz-Ill'100kHz_I
I·2024-_.._-
2428
540kHz
Example 6.3
Fourdatachannels (digital), eachtransmitting atIMbps,useasatellitechannelofIMHz.
Designanappropriate configuration, usingFDM."
1715,"Solution
Thesatellitechannelisanalog.Wedivideitintofourchannels, eachchannelhavinga2S0-kHz
bandwidth."
1716,"EachdigitalchannelofIMbpsismodulated suchthateach4bitsismodulated to
1Hz.Onesolutionis16-QAM modulation."
1717,Figure6.8showsonepossibleconfiguration.
1718,"TheAnalogCarrierSystem
Tomaximize theefficiency oftheirinfrastructure, telephone companies havetradition­
allymultiplexed signalsfromlower-bandwidth linesontohigher-bandwidth lines.Inthis
way,manyswitched orleasedlinescanbecombined intofewerbutbiggerchannels."
1719,"For
analoglines,FDMisused.166 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.8Example 6.3
IMbps 250kHz
Digital Analog
IMbps 250kHz
Digital AnalogIMHz
IMbps 250kHz
Digital Analog
IMbps 250kHz
Digital Analog
Oneofthesehierarchical systems usedbyAT&Tismadeupofgroups,super­
groups,mastergroups,andjumbogroups(seeFigure6.9)."
1720,"Figure6.9Analoghierarchy
48kHz
12voicechannels
Jumbo
group16.984MHz
3600voicechannels
§.- ~F
~-..-jD
!:l M
~-.....~E
'.Q-.....~en
g.----i~ FMastergroup
~ D
~----:l.~1 M
:=:F
Dt------i~
MGroup
Inthisanaloghierarchy, 12voicechannels aremultiplexed ontoahigher-bandwidth
linetocreateagroup.Agrouphas48kHzofbandwidth andsupports 12voicechannels."
1721,"Atthenextlevel,uptofivegroupscanbemultiplexed tocreateacomposite signal
calledasupergroup."
1722,"Asupergroup hasabandwidth of240kHzandsupports upto
60voicechannels."
1723,"Supergroups canbemadeupofeitherfivegroupsor60independent
voicechannels."
1724,"Atthenextlevel,10supergroups aremultiplexed tocreateamastergroup.A
mastergroupmusthave2.40MHzofbandwidth, buttheneedforguardbands between
thesupergroups increases thenecessary bandwidth to2.52MHz.Mastergroupssupport
upto600voicechannels."
1725,"Finally,sixmastergroupscanbecombined intoajumbogroup.Ajumbogroup
musthave15.12MHz(6x2.52MHz)butisaugmented to16.984MHztoallowfor
guard bands betweenthemastergroups.SECTION 6.1MULTIPLEXING 167
OtherApplications ofFDM
Averycommon application ofFDMisAMandFMradiobroadcasting."
1726,"Radiousesthe
airasthetransmission medium."
1727,"Aspecialbandfrom530to1700kHzisassignedtoAM
radio.Allradiostationsneedtosharethisband."
1728,"As discussed inChapter5,eachAMsta­
tionneeds10kHzofbandwidth."
1729,"Eachstationusesadifferent carrierfrequency, which
meansitisshiftingitssignalandmultiplexing."
1730,"Thesignalthatgoestotheairisacombi­
nationofsignals.Areceiverreceivesallthesesignals,butfilters(bytuning)onlytheone
whichisdesired.Withoutmultiplexing, onlyoneAMstationcouldbroadcast tothecom­
monlink,theair.However, weneedtoknowthatthereisphysicalmultiplexer ordemulti­
plexerhere.AswewillseeinChapter12multiplexing isdoneatthedatalinklayer."
1731,Thesituation issimilarinFMbroadcasting.
1732,"However, FMhasawiderbandof88
to108MHzbecauseeachstationneedsabandwidth of200kHz.
Anothercommon useofFDMisintelevision broadcasting."
1733,"EachTVchannelhas
itsownbandwidth of6MHz.
Thefirstgeneration ofcellulartelephones (stillinoperation) alsousesFDM.Each
userisassigned two30-kHzchannels, oneforsendingvoiceandtheotherforreceiving."
1734,"Thevoicesignal,whichhasabandwidth of3kHz(from300to3300Hz),ismodulated by
usingFM.Remember thatanFMsignalhasabandwidth 10timesthatofthemodulating
signal,whichmeanseachchannelhas30kHz(10x3)ofbandwidth."
1735,"Therefore, eachuser
isgiven,bythebasestation,a60-kHzbandwidth inarangeavailable atthetimeofthecall."
1736,"Example 6.4
TheAdvanced MobilePhoneSystem(AMPS) usestwobands.Thefirstbandof824to849MHz
isusedforsending, and869to894MHzisusedforreceiving."
1737,"Eachuserhasabandwidth of
30kHzineachdirection."
1738,"The3-kHzvoiceismodulated usingFM,creating30kHzofmodulated
signal.Howmany people canusetheircellularphonessimultaneously?"
1739,"Solution
Eachbandis25MHz.Ifwedivide25MHzby30kHz,weget833.33.Inreality,thebandisdivided
into832channels."
1740,"Ofthese,42channels areusedforcontrol,whichmeansonly790channels are
available forcellularphoneusers.WediscussAMPSingreaterdetailinChapter16."
1741,"Implementation
FDMcanbeimplemented veryeasily.Inmanycases,suchasradioandtelevision
broadcasting, thereisnoneedforaphysical multiplexer ordemultiplexer."
1742,"Aslongas
thestations agree tosendtheirbroadcasts totheairusingdifferent carrierfrequencies,
multiplexing isachieved."
1743,"Inothercases,suchasthecellulartelephone system,abase
stationneedstoassignacarrierfrequency tothetelephone user.Thereisnotenough
bandwidth inacelltopermanently assignabandwidth rangetoeverytelephone user."
1744,"Whenauserhangsup,herorhisbandwidth isassigned toanothercaller."
1745,"Wavelength -Division Multiplexing
Wavelength-division multiplexing (WDM) isdesigned tousethehigh-data-rate
capability offiber-optic cable.Theopticalfiberdatarateishigherthanthedatarateof
metallictransmission cable.Usingafiber-optic cableforonesinglelinewastesthe
available bandwidth."
1746,"Multiplexing allowsustocombine severallinesintoone.168 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
WDMisconceptually thesameasFDM,exceptthatthemultiplexing anddemulti­
plexinginvolveopticalsignalstransmitted throughfiber-optic channels."
1747,"Theideaisthe
same:Wearecombining different signalsofdifferent frequencies."
1748,"Thedifference is
thatthefrequencies areveryhigh."
1749,Figure6.10givesaconceptual viewofaWDMmultiplexer anddemultiplexer.
1750,"Verynarrowbandsoflightfromdifferent sourcesarecombined tomakeawiderband
oflight.Atthereceiver, thesignalsareseparated bythedemultiplexer."
1751,"Figure6.10Wavelength-division multiplexing
AIfl f\."
1752,"AI
AZflflflfl flAzAi+Az+A3fl fl
A:J A:J
WDMisananalogmultiplexing technique tocombineopticalsignals."
1753,"Although WDMtechnology isverycomplex, thebasicideaisverysimple.We
wanttocombine multiplelightsourcesintoonesinglelightatthemultiplexer anddo
thereverseatthedemultiplexer."
1754,"Thecombining andsplittingoflightsourcesareeasily
handledbyaprism.Recallfrombasicphysicsthataprismbendsabeamoflightbased
ontheangleofincidence andthefrequency."
1755,"Usingthistechnique, amultiplexer canbe
madetocombine severalinputbeamsoflight,eachcontaining anarrowbandoffre­
quencies, intooneoutputbeamofawiderbandoffrequencies."
1756,"Ademultiplexer can
alsobemadetoreversetheprocess.Figure6.11showstheconcept."
1757,":Figure6.11Prismsinwavelength-division multiplexing anddemultiplexing
MultiplexerFiber-optic cable
Demultiplexer
Oneapplication ofWDMistheSONET network inwhichmultiple optical
fiberlinesaremultiplexed anddemultiplexed."
1758,WediscussSONETinChapter17.
1759,"Anewmethod,calleddenseWDM(DWDM), canmultiplex averylargenumber
ofchannels byspacingchannels veryclosetooneanother.Itachieves evengreater
efficiency.SECTION 6.1MULTIPLEXING 169
Synchronous Time-Division Multiplexing
Time-division multiplexing (TDM)isadigitalprocessthatallowsseveralconnections
tosharethehighbandwidth ofalinleInsteadofsharingaportionofthebandwidth asin
FDM,timeisshared.Eachconnection occupies aportionoftimeinthelink.Figure6.12
givesaconceptual viewofTDM.NotethatthesamelinkisusedasinFDM;here,how­
ever,thelinkisshownsectioned bytimeratherthanbyfrequency."
1760,"Inthefigure,portions
ofsignals1,2,3,and4occupythelinksequentially."
1761,"Figure6.12TDM
Dataflow
."
1762,"D 2EJ--..::--{§:~
l'4321M
U 3Xt---~=~-~_t--L-L-.l...--'--= .........-""'=..L...;;...J...-...l...-...l...-...J.........j2
M ~,
U 4 3 2 1t'3
3 X
r=:~---l
NotethatinFigure6.12weareconcerned withonlymultiplexing, notswitching."
1763,"Thismeansthatallthedatainamessage fromsource1alwaysgotoonespecificdesti­
nation,beit1,2,3,or4.Thedelivery isfixedandunvarying, unlikeswitching."
1764,"Wealsoneedtoremember thatTDMis,inprinciple, adigitalmultiplexing technique."
1765,"Digitaldatafromdifferent sourcesarecombined intoonetimesharedlink.However, this
doesnotmeanthatthesourcescannotproduceanalogdata;analogdatacanbesampled,
changed todigitaldata,andthenmultiplexed byusingTDM."
1766,"TDMisadigitalmultiplexing technique forcombining
severallow-ratechannels intoonehigh-rate one."
1767,WecandivideTDMintotwodifferent schemes: synchronous andstatistical.
1768,"Wefirst
discusssynchronous TDMandthenshowhowstatistical TDMdiffers.Insynchronous
TDM,eachinputconnection hasanallotment intheoutputevenifitisnotsendingdata."
1769,"TimeSlotsandFrames
Insynchronous TDM,thedataflowofeachinputconnection isdividedintounits,where
eachinputoccupies oneinputtimeslot.Aunitcanbe1bit,onecharacter, oroneblockof
data.Eachinputunitbecomes oneoutputunitandoccupies oneoutputtimeslot.How­
ever,thedurationofanoutputtimeslotisntimesshorterthantheduration ofaninput
timeslot.IfaninputtimeslotisTs,theoutputtimeslotisTins,wherenisthenumber
ofconnections."
1770,"Inotherwords,aunitintheoutputconnection hasashorterduration; it
travelsfaster.Figure6.13showsanexample ofsynchronous TDMwherenis3.170 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.13Synchronous time-division multiplexing
Dataaretakenfromeach
lineeveryTs.Eachframeis3timeslots."
1771,"EachtimeslotdurationisTf3s.BlT
Al
ClJil
A2
B2T
C2JlfT
C3A3
B3If
Insynchronous TDM,aroundofdataunitsfromeachinputconnection iscollected
intoaframe(wewillseethereasonforthisshortly).Ifwehavenconnections, aframe
isdividedintontimeslotsandoneslotisallocated foreachunit,oneforeachinput
line.IfthedurationoftheinputunitisT,thedurationofeachslotisTinandthedura­
tionofeachframeisT(unlessaframecarriessomeotherinformation, aswewillsee
shortly)."
1772,"Thedatarateoftheoutputlinkmustbentimesthedatarateofaconnection to
guarantee theflowofdata.InFigure6.13,thedatarateofthelinkis3timesthedata
rateofaconnection; likewise, theduration ofaunitonaconnection is3timesthatof
thetimeslot(duration ofaunitonthelink).Inthefigurewerepresent thedatapriorto
multiplexing as3timesthesizeofthedataaftermultiplexing."
1773,"Thisisjusttoconveythe
ideathateachunitis3timeslongerindurationbeforemultiplexing thanafter."
1774,"Insynchronous TDM,thedatarateofthelinkisntimesfaster,
andtheunitduration isntimesshorter."
1775,"Timeslotsaregrouped intoframes.Aframeconsistsofonecomplete cycleof
timeslots,withone slotdedicated toeachsendingdevice.Inasystemwithninput
lines,eachframehasnslots,witheachslotallocated tocarrying datafromaspecific
inputline."
1776,"Example 6.5
InFigure6.13,thedatarateforeachinputconnection is3kbps.If1bitatatimeismultiplexed (a
unitis1bit),whatisthedurationof(a)eachinputslot,(b)eachoutputslot,and(c)eachframe?"
1777,"Solution
Wecananswerthequestions asfollows:
a.Thedatarateofeachinputconnection is1kbps.Thismeansthatthebitdurationis111000s
or1ms.Thedurationoftheinputtimeslotis1ms(sameasbitduration)."
1778,"b.Thedurationofeachoutputtimeslotisone-third oftheinputtimeslot.Thismeansthatthe
durationoftheoutputtimeslotis1/3ms."
1779,"c.Eachframecarriesthreeoutputtimeslots.Sothedurationofaframeis3x113ms,or1ms."
1780,"Thedurationofaframeisthesameasthedurationofaninputunit.SECTION 6.1MULTIPLEXING 171
Example 6.6
Figure6.14showssynchronous TOMwithadatastreamforeachinputandonedatastreamfor
theoutput.Theunitofdatais1bit.Find(a)theinputbitduration, (b)theoutputbitduration,
(c)theoutputbitrate,and(d)theoutputframerate."
1781,"Figure6.14Example 6.6
IMbps•••1
1Mbps•••00 0 0
1Mbps•••10 0
1Mbps•••00 0o
oFrames
•••ffilQI!][Q]QJQliJ1III[Q[QJQli]""
Solution
Wecananswerthequestions asfollows:
a.Theinputbitdurationistheinverseofthebitrate:1/1Mbps=1lls."
1782,"b.Theoutputbitdurationisone-fourth oftheinputbitduration, or1/411s."
1783,"c.Theoutputbitrateistheinverseoftheoutputbitdurationor1/4lls,or4Mbps.Thiscanalso
bededucedfromthefactthattheoutputrateis4timesasfastasanyinputrate;sotheoutput
rate=4 x 1Mbps=4Mbps."
1784,"d.Theframerateisalwaysthesameasanyinputrate.Sotheframerateis1,000,000 framesper
second.Becausewearesending4bitsineachframe,wecanverifytheresultoftheprevious
questionbymultiplying theframeratebythenumberofbitsperframe."
1785,"Example 6.7
Fourl-kbpsconnections aremultiplexed together."
1786,"AunitisIbit.Find(a)theduration ofIbit
beforemultiplexing, (b)thetransmission rateofthelink,(c)theduration ofatimeslot,and
(d)thedurationofaframe."
1787,"Solution
Wecananswerthequestions asfollows:
a.Thedurationof1bitbeforemultiplexing is1/1kbps,or0.001s(lms)."
1788,"b.Therateofthelinkis4timestherateofaconnection, or4kbps."
1789,"c.Theduration ofeachtimeslotisone-fourth ofthedurationofeachbitbeforemultiplexing,
or1/4msor250I.ls.Notethatwecanalsocalculate thisfromthedatarateofthelink,4kbps."
1790,"Thebitdurationistheinverseofthedatarate,or1/4kbpsor250I.ls."
1791,"d.Theduration ofaframeisalwaysthesameasthedurationofaunitbeforemultiplexing, or
Ims.Wecanalsocalculate thisinanotherway.Eachframeinthiscasehasfouftimeslots."
1792,"Sothedurationofaframeis4times250I.ls,orIms."
1793,"Interleaving
TDMcanbevisualized astwofast-rotating switches, oneonthemultiplexing sideand
theotheronthedemultiplexing side.Theswitches aresynchronized androtateatthe
samespeed,butinopposite directions."
1794,"Onthemultiplexing side,astheswitchopens172CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
infrontofaconnection, thatconnection hastheopportunity tosendaunitontothe
path.Thisprocessiscalledinterleaving."
1795,"Onthedemultiplexing side,astheswitch
opensinfrontofaconnection, thatconnection hastheopportunity toreceiveaunit
fromthepath."
1796,Figure6.15showstheinterleaving processfortheconnection showninFigure6.13.
1797,"Inthisfigure,weassumethatnoswitching isinvolved andthatthedatafromthefirst
connection atthemultiplexer sitegotothefirstconnection atthedemultiplexer."
1798,"We
discussswitching inChapter8."
1799,"Figure6.15Interleaving
A3 A2Alc=J[==:Jc::::::J
B3B2Bl~~~
C3C2CI
c=:::J[==:Jc::::::Jr - - - - - - - - - - Synchronization - - - - - - - - - ,
I
IIIIA3 A2 Al
[==:J[==:Jc:::J
B3B2Bl~~~
C3C2Clc:::Jr:::::Jc=:::J
Example 6.8
Fourchannels aremultiplexed usingTDM.Ifeachchannelsends100bytesisandwemultiplex
1byteperchannel, showtheframetraveling onthelink,thesizeoftheframe,theduration ofa
frame,theframerate,andthebitrateforthelink."
1800,"Solution
Themultiplexer isshowninFigure6.16.Eachframecarries1bytefromeachchannel;thesizeof
eachframe,therefore, is4bytes,or32bits.Becauseeachchannelissending100bytes/sanda
framecarries1bytefromeachchannel,theframeratemustbe100framespersecond.Thedura­
tionofaframeistherefore 11100s.Thelinkiscarrying 100framespersecond,andsinceeach
framecontains32bits,thebitrateis100x32,or3200bps.Thisisactually4timesthebitrateof
eachchannel,whichis100x 8=800bps."
1801,"Figure6.16Example 6.8
-100bytes/sFrame4bytes Frame4bytes
32bits 32bits
II1,*""tiJ'I...IIg~II
100frames/s
3200bps
Frameduration ==160sSECTION 6.1MULTIPLEXING 173
Example 6.9
Amultiplexer combines four100-kbps channels usingatimeslotof2bits.Showtheoutputwith
fourarbitrary inputs.Whatistheframerate?Whatistheframeduration?"
1802,Whatisthebitrate?
1803,Whatisthebitduration?
1804,"Solution
Figure6.17showstheoutputforfourarbitrary inputs.Thelinkcarries50,000framespersecond
sinceeachframecontains2bitsperchannel.Theframedurationistherefore 1/50,000 sor20~s."
1805,"Theframerateis50,000framespersecond,andeachframecarries8bits;thebitrateis50,000x
8=400,000bitsor400kbps.Thebitdurationis1/400,000 s,or2.5IJ.s.Notethattheframedura­
tionis8timesthebitdurationbecauseeachframeiscarrying8bits."
1806,"Figure6.17Example 6.9
·..110010100kbps...001010100kbps·..101101
100kbps·..000111100kbpsFrameduration=lI50,000 s=20Ils
Frame:8bitsFrame:8bitsFrame:8bits..."
1807,"~~~
50,000frames/s
400kbps
EmptySlots
Synchronous TDMisnotasefficientasitcouldbe.Ifasourcedoesnothavedatato
send,thecorresponding slotintheoutputframeisempty.Figure6.18showsacasein
whichoneoftheinputlineshasnodatatosendandoneslotinanotherinputlinehas
discontinuous data."
1808,"Figure6.18Emptyslots
II II
I~0110 DII~01
Thefirstoutputframehasthreeslotsfilled,thesecondframehastwoslotsfilled,
andthethirdframehasthreeslotsfilled.Noframeisfull.Welearninthenextsection
thatstatistical TDMcanimprovetheefficiency byremoving theemptyslotsfromthe
frame."
1809,"DataRateManagement
Oneproblem withTDMishowtohandleadisparity intheinputdatarates.Inallour
discussion sofar,weassumedthatthedataratesofallinputlineswerethesame.However,174CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
ifdataratesarenotthesame,threestrategies, oracombination ofthem,canbeused."
1810,"Wecallthesethreestrategies multilevel multiplexing, multiple-slot allocation, and
pulsestuffing."
1811,"Multilevel Multiplexing Multilevel multiplexing isatechnique usedwhenthedata
rateofaninputlineisamultipleofothers.Forexample, inFigure6.19,wehavetwo
inputsof20kbpsandthreeinputsof40kbps.Thefirsttwoinputlinescanbemulti­
plexedtogethertoprovideadatarateequaltothelastthree.Asecondlevelofmulti­
plexingcancreateanoutputof160kbps."
1812,"Figure6.19Multilevel multiplexing
20kbps----;""\>------t20kbps----I
40kbps--------1
40kbps--------1
40kbps--------1160kbps
Multiple-Slot Allocation Sometimes itismoreefficienttoallotmorethanoneslotin
aframetoasingleinputline.Forexample, wemighthaveaninputlinethathasadata
ratethatisamultipleofanotherinput.InFigure6.20,theinputlinewithaSO-kbpsdata
ratecanbegiventwoslotsintheoutput.Weinsertaserial-to-parallel converter inthe
linetomaketwoinputsoutofone."
1813,"Figure6.20Multiple-slot multiplexing
50kbps
25kbps-------1
25kbps-------1
25kbps-------1/Theinputwitha
50-kHzdataratehastwo
slotsineachframe."
1814,"PulseStuffing Sometimes thebitratesofsourcesarenotmultiple integersofeach
other.Therefore, neitherofthe above twotechniques canbeapplied.Onesolutionisto
makethehighestinputdataratethedominant datarateandthenadddummybitstothe
inputlineswithlowerrates.Thiswillincreasetheirrates.Thistechnique iscalledpulse
stuffing,bitpadding, orbitstuffing.TheideaisshowninFigure6.21.Theinputwitha
datarateof46ispulse-stuffed toincreasetherateto50kbps.Nowmultiplexing can
takeplace.SECTION 6.1MULTIPLEXING 175
Figure6.21Pulsestuffing
50kbps----------1
50kbps----------1
46kbps---I150kbps
FrameSynchronizing
Theimplementation ofTDMisnotassimpleasthatofFDM.Synchronization between
themultiplexer anddemultiplexer isamajorissue.Ifthe.multiplexer andthedemulti­
plexerarenotsynchronized, abitbelonging toonechannelmaybe received bythe
wrongchannel."
1815,"Forthisreason,oneormoresynchronization bitsareusuallyaddedto
thebeginning ofeachframe.Thesebits,calledframing bits,followapattern,frameto
frame,thatallowsthedemultiplexer tosynchronize withtheincoming streamsothatit
canseparatethetimeslotsaccurately."
1816,"Inmostcases,thissynchronization information
consistsof1bitperframe,alternating between0andI,asshowninFigure6.22."
1817,"Figure6.22Framing bits
I1 0 1ISynchronization
pattern
Frame3 Frame2 Frame1
C3IB3IA3 182IA2 CIIIAl.:11II:00I I I:0 :11I:0I
I
Example 6.10
Wehavefoursources,eachcreating250characters persecond.Iftheinterleaved unitisacharacter
and1synchronizing bitisaddedtoeachframe,find(a)thedatarateofeachsource,(b)theduration
ofeachcharacter ineachsource,(c)theframerate,(d)theduration ofeachframe,(e)thenumberof
bitsineachframe,and(f)thedatarateofthelink."
1818,"Solution
Wecananswerthequestions asfollows:
a.Thedatarateofeachsourceis250x8=2000bps=2kbps."
1819,"b.Eachsourcesends250characters persecond;therefore, thedurationofacharacter is1/250s,
or4ms."
1820,"c.Eachframehasonecharacter fromeachsource,whichmeansthelinkneedstosend
250framespersecondtokeepthetransmission rateofeachsource."
1821,"d.Theduration ofeachframeis11250s,or4ms.Notethatthedurationofeachframeisthe
sameasthedurationofeachcharacter comingfromeachsource."
1822,"e.Eachframecarries4characters andIextrasynchronizing bit.Thismeansthateachframeis
4 x 8+1=33bits.176CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
f.Thelinksends250framespersecond,andeachframecontains 33bits.Thismeansthatthe
datarateofthelinkis250x33,or8250bps.Notethatthebitrateofthelinkisgreaterthan
thecombined bitratesofthefourchannels."
1823,"Ifweaddthebitratesoffourchannels, weget
8000bps.Because 250framesaretraveling persecondandeachcontains 1extrabitfor
synchronizing, weneedtoadd250tothesumtoget8250bps."
1824,"Example 6.11
Twochannels, onewithabitrateof100kbpsandanotherwithabitrateof200kbps,aretobe
multiplexed."
1825,Howthiscanbeachieved?
1826,Whatistheframerate?Whatistheframeduration?
1827,Whatisthebitrateofthelink?
1828,"Solution
Wecanallocateoneslottothefirstchannelandtwoslotstothesecondchannel.Eachframecar­
ries3bits.Theframerateis100,000framespersecondbecauseitcarries1bitfromthefirst
channel.Theframe duration is1/100,000 s,or10ms.Thebitrateis100,000frames/sx 3bitsper
frame,or300kbps.Notethatbecauseeachframecarries1bitfromthefirstchannel,thebitrate
forthefirstchannelispreserved."
1829,"Thebitrateforthesecondchannelisalsopreserved because
eachframecarries2bitsfromthesecondchannel."
1830,"DigitalSignalService
Telephone companies implement TDMthroughahierarchy ofdigitalsignals,called
digitalsignal(DS)serviceordigitalhierarchy."
1831,"Figure6.23showsthedataratessup­
portedbyeachlevel."
1832,"Figure6.23Digitalhierarchy
OS-4•274.176Mbps
60S-3
OS-3
T
D
M--+-\6.312Mbps
405-1
T
D:--- ......~
--~MOS-2T
D
M
1.544Mbps
24DS-OOS-1os-o
oADS-Oserviceisasingledigitalchannelof64kbps."
1833,"ODS-I isa1.544-Mbps service;1.544Mbpsis24times64kbpsplus8kbpsof
overhead."
1834,"Itcanbeusedasasingleservicefor1.544-Mbps transmissions, oritcan
beusedtomultiplex 24DS-Ochannels ortocarryanyothercombination desired
bytheuserthatcanfitwithinits1.544-Mbps capacity."
1835,"oDS-2isa6.312-Mbps service;6.312Mbpsis96times64kbpsplus168kbpsof
overhead.Itcanbeusedasasingleservicefor6.312-Mbps transmissions; oritcanSECTION 6.1MULTIPLEXING 177
beusedtomultiplex 4DS-lchannels, 96DS-Ochannels, oracombination ofthese
servicetypes."
1836,"oDS-3isa44.376-Mbps service;44.376Mbps is672times64kbpsplus1.368Mbps
ofoverhead.Itcanbeusedasasingleservicefor44.376-Mbps transmissions; orit
canbeusedtomultiplex 7DS-2channels, 28DS-lchannels, 672DS-Ochannels,
oracombination oftheseservicetypes."
1837,"oDS-4isa274.176-Mbps service;274.176is4032times64kbpsplus16.128Mbpsof
overhead.Itcanbeusedtomultiplex 6DS-3channels, 42DS-2channels, 168DS-l
channels, 4032DS-Ochannels, oracombination oftheseservicetypes."
1838,"TLines
DS-O,DS-l,andsoonarethenamesofservices."
1839,"Toimplement thoseservices, thetele­
phonecompanies useTlines(T-ltoT-4).Thesearelineswithcapacities precisely
matched tothedataratesoftheDS-ltoDS-4services(seeTable6.1).SofaronlyT-l
andT-3linesarecommercially available."
1840,"Table6.1DSandTlinerates
Sen/ice Line Rate(Mbps) VoiceChannels
DS-1 T-1 1.544 24
DS-2 T-2 6.312 96
DS-3 T-3 44.736 672
DS-4 T-4 274.176 4032
TheT-llineisusedtoimplement DS-l;T-2isusedtoimplement DS-2;andsoon."
1841,"AsyoucanseefromTable6.1,DS-Oisnotactuallyofferedasaservice,butithasbeen
definedasabasisforreference purposes."
1842,"TLinesforAnalogTransmission
Tlinesaredigitallinesdesigned forthetransmission ofdigitaldata,audio,orvideo."
1843,"However, theyalsocanbeusedforanalogtransmission (regulartelephone connec­
tions),provided theanalogsignalsarefirstsampled, thentime-division multiplexed."
1844,"Thepossibility ofusingTlinesasanalogcarriersopenedupanewgeneration of
servicesforthetelephone companies."
1845,"Earlier,whenanorganization wanted24separate
telephone lines,itneededtorun24twisted-pair cablesfromthecompany tothecentral
exchange."
1846,"(Remember thoseoldmoviesshowing abusyexecutive with10telephones
lineduponhisdesk?Ortheoldofficetelephones withabigfatcablerunningfrom
them?Thosecablescontained abundleofseparatelines.)Today,thatsameorganization
cancombine the24linesintooneT-llineandrunonlytheT-llinetotheexchange."
1847,"Figure6.24showshow24voicechannels canbemultiplexed ontooneT-Iline.(Refer
toChapter5forPCMencoding.)
TheT-1Frame Asnotedabove,DS-lrequires8kbpsofoverhead."
1848,"Tounderstand how
thisoverhead iscalculated, wemustexaminetheformatofa24-voice-channel frame."
1849,"TheframeusedonaT-llineisusually193bitsdividedinto24slotsof8bitseach
plus1extrabitforsynchronization (24x 8+1=193);seeFigure6.25.Inotherwords,178CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.24T-llineformultiplexing telephone lines
Sampling at8000sampJes/s
Llsing8bitspersample
t
I)
MT-Iline1.544Mbps
24x64kbps+8kbpsoverhead
Figure6.25T-lframestructure
Samplen
I
1frame=193bitsIChannelI···1ChannelIIChannelI24 2 I
1bit8bits 8bits 8bits
FrameIFrameIIFrame ..."
1850,"...n 2 1
T-I:8000frames/s=8000x193bps=1.544Mbps
eachslotcontains onesignalsegmentfromeachchannel; 24segments areinterleaved
inoneframe.IfaT-llinecarries8000frames,thedatarateis1.544Mbps(193x8000=
1.544Mbps)-the capacityoftheline."
1851,"ELines
Europeans useaversionofTlinescalledElines.Thetwosystemsareconceptually iden­
tical,buttheircapacities differ.Table6.2showstheElinesandtheircapacities.SECTION 6.1MULTIPLEXING 179
Table6.2Elinerates
Line Rate(Mbps) VoiceChannels
E-1 2.048 30
E-2 8.448 120
E-3 34.368 480
E-4 139.264 1920
MoreSynchronous TDMApplications
Somesecond-generation cellulartelephone companies usesynchronous TDM.For
example, thedigitalversionofcellulartelephony dividestheavailable bandwidth into
3D-kHzbands.Foreachband,TDMisappliedsothatsixuserscansharetheband.This
meansthateach3D-kHzbandisnowmadeofsixtimeslots,andthedigitized voicesig­
nalsoftheusersareinsertedintheslots.UsingTDM,thenumberoftelephone usersin
eachareaisnow6timesgreater.Wediscusssecond-generation cellulartelephony in
Chapter16."
1852,"Statistical Time-Division Multiplexing
Aswesawintheprevious section,insynchronous TDM,eachinputhasareserved slot
intheoutputframe.Thiscanbeinefficient ifsomeinputlineshavenodatatosend.In
statistical time-division multiplexing, slotsaredynamically allocated toimprove band­
widthefficiency."
1853,"Onlywhenaninputlinehasaslot'sworthofdatatosendisitgivena
slotintheoutputframe.Instatistical multiplexing, thenumberofslotsineachframeis
lessthanthenumberofinputlines.Themultiplexer checkseachinput line inround­
robinfashion;itallocates aslotforaninputlineifthelinehasdatatosend;otherwise,
itskipsthelineandchecksthenextline."
1854,Figure6.26showsasynchronous andastatistical TDMexample.
1855,"Intheformer,
someslotsareemptybecause thecorresponding linedoesnothavedatatosend.In
thelatter,however, noslotisleftemptyaslongastherearedatatobesentbyany
inputline."
1856,"Addressing
Figure6.26alsoshowsamajordifference between slotsinsynchronous TDMand
statistical TDM.Anoutputslotinsynchronous TDMistotallyoccupied bydata;in
statistical TDM,aslotneedstocarrydataaswellastheaddressofthedestination."
1857,"Insynchronous TDM,thereisnoneedfor addressing; synchronization andpreassigned
relationships between theinputsandoutputsserveasanaddress.Weknow,forexam­
ple,thatinput1alwaysgoestoinput2.Ifthemultiplexer andthedemultiplexer are
synchronized, thisisguaranteed."
1858,"Instatistical multiplexing, thereisnofixedrelation­
shipbetween theinputsandoutputsbecause therearenopreassigned orreserved
slots.Weneedtoincludetheaddressofthereceiverinsideeachslottoshowwhereit
istobedelivered."
1859,"Theaddressing initssimplest formcanbenbitstodefineNdifferent
outputlineswithn=10g2N.Forexample, foreightdifferent outputlines,weneeda
3-bitaddress.180CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.26TDMslotcomparison
LineA----[:3:0
LineB
LineC--------{
Line0--i.iI~=~LineE
a.Synchronous TDM
LineA-----[=:ACH
LineB
LineC--------i
Line0
---:~~
LineE--I
b.Statistical TDM
SlotSize
Sinceaslotcarriesbothdataandanaddressinstatistical TDM,theratioofthedatasize
toaddresssizemustbereasonable tomaketransmission efficient."
1860,"Forexample, it
wouldbeinefficient tosend1bitperslotasdatawhentheaddressis3bits.Thiswould
meananoverhead of300percent.Instatistical TDM,ablockofdataisusuallymany
byteswhiletheaddressisjustafewbytes."
1861,"NoSynchronization Bit
Thereisanotherdifference betweensynchronous andstatistical TDM,butthistimeitis
attheframelevel.Theframesinstatistical TDMneednotbesynchronized, sowedonot
needsynchronization bits."
1862,"Bandwidth
Instatistical TDM,thecapacityofthelinkisnormally lessthanthesumofthecapaci­
tiesofeachchannel."
1863,"Thedesigners ofstatistical TDMdefinethecapacity ofthelink
basedonthestatistics oftheloadforeachchannel.Ifonaverageonlyxpercentofthe
inputslotsarefilled,thecapacityofthelinkreflectsthis.Ofcourse,duringpeaktimes,
someslotsneedtowait."
1864,"6.2SPREAD SPECTRUM
Multiplexing combines signalsfromseveralsourcestoachievebandwidth efficiency; the
available bandwidth ofalinkisdividedbetweenthesources.Inspreadspectrum (88),we
alsocombine signalsfromdifferent sourcestofitintoalargerbandwidth, butourgoalsSECTION 6.2SPREAD SPECTRUM 181
aresomewhat different."
1865,"Spreadspectrum isdesigned tobeusedinwirelessapplications
(LANsandWANs).Inthesetypesofapplications, wehavesomeconcerns thatoutweigh
bandwidth efficiency."
1866,"Inwirelessapplications, allstationsuseair(oravacuum) asthe
mediumforcommunication."
1867,"Stationsmustbeabletosharethismediumwithoutintercep­
tionbyaneavesdropper andwithoutbeingsubjecttojamming fromamalicious intruder
(inmilitaryoperations, forexample)."
1868,"Toachievethesegoals,spreadspectrum techniques addredundancy; theyspread
theoriginalspectrum neededforeachstation.Iftherequiredbandwidth foreachstation
isB,spreadspectrum expandsittoBss'suchthatBss»B.Theexpanded bandwidth
allowsthesourcetowrapitsmessage inaprotective envelope foramore secure trans­
mission.Ananalogyisthesendingofadelicate,expensive gift.Wecaninsertthegiftin
aspecialboxtopreventitfrombeingdamaged duringtransportation, andwecanusea
superiordeliveryservicetoguarantee thesafetyofthepackage."
1869,Figure6.27showstheideaofspreadspectrum.
1870,"Spreadspectrum achieves itsgoals
throughtwoprinciples:
1.Thebandwidth allocated toeachstationneedstobe,byfar,largerthanwhatis
needed.Thisallowsredundancy."
1871,"2.Theexpanding oftheoriginalbandwidth Btothebandwidth Bssmustbedonebya
processthatisindependent oftheoriginalsignal.Inotherwords,thespreading
processoccursafterthesignaliscreatedbythesource."
1872,"Figure6.27Spreadspectrum
BSSI' >I
Spreading
process
i
Spreading
code
Afterthesignaliscreatedbythesource,thespreading processusesaspreading
codeandspreadsthebandwidth."
1873,"Thefigureshowstheoriginalbandwidth Bandthe
spreaded bandwidth Bss.Thespreading codeisaseriesofnumbers thatlookrandom,
butareactuallyapattern."
1874,"Therearetwotechniques tospreadthebandwidth: frequency hoppingspreadspec­
trum(FHSS)anddirectsequence spreadspectrum (DSSS)."
1875,"Frequency Hopping SpreadSpectrum (FHSS)
Thefrequency hopping spreadspectrum (FHSS)technique usesMdifferent carrier
frequencies thataremodulated bythesourcesignal.Atonemoment, thesignalmodu­
latesonecarrierfrequency; atthenextmoment, thesignalmodulates anothercarrier182CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
frequency."
1876,"Although themodulation isdoneusingonecarrierfrequency atatime,
Mfrequencies areusedinthelongrun.Thebandwidth occupied byasourceafter
spreading isBpHSS»B."
1877,"Figure6.28showsthegenerallayoutforFHSS.Apseudorandom codegenerator,
calledpseudorandom noise(PN),createsak-bitpatternforeveryhopping periodTh•
Thefrequency tableusesthepatterntofindthefrequency tobeusedforthishopping
periodandpassesittothefrequency synthesizer."
1878,"Thefrequency synthesizer createsa
carriersignalofthatfrequency, andthesourcesignalmodulates thecarriersignal."
1879,"Figure6.28Frequency hoppingspreadspectrum (FHSS)
Modulator
t- --lt-~Spread
signalOriginal --I----------'l~
signal
Frequency table
Supposewehavedecidedtohaveeighthoppingfrequencies."
1880,"Thisisextremely low
forrealapplications andisjustforillustration."
1881,"Inthiscase,Mis8andkis3.Thepseudo­
randomcodegenerator willcreateeightdifferent 3-bitpatterns."
1882,"Thesearemappedto
eightdifferentfrequencies inthefrequency table(seeFigure6.29)."
1883,"Figure6.29Frequency selection inFHSS
First-hop frequencyt
k-bitFrequency
k-bilpatterns000200kHz
001300kHz
1101111001000010110011100I010400kHz
011500kHz
I Firstselection100600kHz
101700kHz--UQ800kHz
III900kHz
Frequency tableSECTION 6.2SPREAD SPECTRUM 183
Thepatternforthisstationis101,111,001, 000, 010,all,100.Notethatthepat­
ternispseudorandom itisrepeated aftereighthoppings."
1884,"Thismeansthatathopping
period1,thepatternis101.Thefrequency selectedis700kHz;thesourcesignalmod­
ulatesthiscarrierfrequency."
1885,"Thesecondk-bitpatternselectedis111,whichselectsthe
900-kHz carrier;theeighthpatternis100,thefrequency is600kHz.Aftereighthop­
pings,thepatternrepeats,startingfrom101again.Figure6.30showshowthesignalhops
aroundfromcarriertocarrier.Weassumetherequiredbandwidth oftheoriginalsignal
is100kHz.
Figure6.30FHSScycles
Carrier
frequencies
(kHz)
••..Cycle1
D
cPCycle2
D••900
800
700
600
500
400
300
200
1 2 3 4 5 6 7 8 9 10111213 14 l516Hop
periods
Itcanbeshownthatthisschemecanaccomplish thepreviously mentioned goals."
1886,"Iftherearemanyk-bitpatternsandthehoppingperiodisshort,asenderandreceiver
canhaveprivacy.Ifanintrudertriestointercept thetransmitted signal,shecanonly
accessasmallpieceofdatabecause shedoesnotknowthespreading sequence to
quicklyadaptherselftothenexthop.Theschemehasalsoanantijamming effect.A
malicious sendermaybeabletosendnoisetojamthesignalforonehoppingperiod
(randomly), butnotforthewholeperiod."
1887,"Bandwidth Sharing
Ifthenumberofhoppingfrequencies isM,wecanmultiplex Mchannelsintoonebyusing
thesameBssbandwidth."
1888,"Thisispossiblebecauseastationusesjustonefrequency ineach
hoppingperiod;M-1otherfrequencies canbeusedbyotherM-1stations.Inother
words,MdifferentstationscanusethesameBssifanappropriate modulation technique
suchasmultipleFSK(MFSK)isused.FHSSissimilartoFDM,asshowninFigure6.31."
1889,"Figure6.31showsanexample offourchannels usingFDMandfourchannels
usingFHSS.InFDM,eachstationuses11Mofthebandwidth, buttheallocation is
fixed;inFHSS,eachstationuses11Mofthebandwidth, buttheallocation changeshop
tohop.184CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
Figure6.31Bandwidth sharing
Frequency
a.FDMFrequency
14
h
f1
Time Time
b.FHSS
DirectSequence SpreadSpectrum
Thedirectsequence spreadspectrum (nSSS)technique alsoexpandsthebandwidth
oftheoriginalsignal,buttheprocessisdifferent."
1890,"InDSSS,wereplaceeachdatabit
with11bitsusingaspreading code.Inotherwords,eachbitisassigned acodeof11bits,
calledchips,wherethechiprateis11timesthatofthedatabit.Figure6.32showsthe
conceptofDSSS."
1891,"Figure6.32DSSS
Modulator
Original-+-------+i
signalr--------ll-~ Spread
signal
Asanexample, letusconsider thesequence usedinawireless LAN,thefamous
Barkersequence where 11is11.Weassumethattheoriginalsignalandthechipsinthe
chipgenerator usepolarNRZencoding."
1892,"Figure6.33showsthechipsandtheresultof
multiplying theoriginaldatabythechipstogetthespreadsignal."
1893,"InFigure6.33,thespreading codeis11chipshavingthepattern10110111000 (in
thiscase).IftheoriginalsignalrateisN,therateofthespreadsignalislIN.This
meansthattherequired bandwidth forthespreadsignalis11timeslargerthanthe
bandwidth oftheoriginalsignal.Thespreadsignalcanprovideprivacyiftheintruder
doesnotknowthecode.Itcanalsoprovideimmunity againstinterference ifeachsta­
tionusesadifferent code.SECTION 6.4KEYTERMS 185
Figure6.33DSSSexample
Original1-- _
signal
Spreading1---+--+--1-+--1--­
code
Spreadf----t-+-+-i--+--­signal
Bandwidth Sharing
Canweshareabandwidth inDSSSaswedidinFHSS?Theanswerisnoandyes.Ifwe
useaspreading codethatspreadssignals(fromdifferentstations)thatcannotbecombined
andseparated, wecannotshareabandwidth."
1894,"Forexample, aswewillseeinChapter14,
somewirelessLANsuseDSSS and thespreadbandwidth cannotbeshared.However, if
weuseaspecialtypeofsequence codethatallowsthecombining andseparating ofspread
signals,wecansharethebandwidth."
1895,"AswewillseeinChapter16,aspecialspreading code
allowsustouseDSSSincellulartelephony andshareabandwidth betweenseveralusers."
1896,"6.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
1897,"Books ,'-
Multiplexing iselegantly discussed inChapters 19of[Pea92]."
1898,"[CouOI]givesexcellent
coverage ofTDMandFDMinSections 3.9to3.11.Moreadvanced materials canbe
foundin[Ber96].Multiplexing isdiscussed inChapter8of[Sta04].Agoodcoverage of
spreadspectrum canbefoundinSection5.13of[CouOl]andChapter9of[Sta04]."
1899,"6.4KEYTERMS
analoghierarchy
Barkersequence
channel
chip
demultiplexer (DEMUX)
denseWDM(DWDM)digitalsignal(DS)service
directsequence spreadspectrum (DSSS)
Eline
framingbit
frequency hoppingspreadspectrum
(FSSS)186 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
frequency-division multiplexing (FDM)
group
guardband
hoppingperiod
interleaving
jumbogroup
link
mastergroup
multilevel multiplexing
multiple-slot multiplexing
multiplexer (MUX)
6.5SUMMARYmultiplexing
pseudorandom codegenerator
pseudorandom noise(PN)
pulsestuffing
spreadspectrum (SS)
statistical TDM
supergroup
synchronous TDM
Tline
time-division multiplexing (TDM)
wavelength-division multiplexing (WDM)
oBandwidth utilization istheuseofavailable bandwidth toachievespecificgoals."
1900,"Efficiency canbeachieved byusingmultiplexing; privacyandantijamming canbe
achieved byusingspreading."
1901,"oMultiplexing isthesetoftechniques thatallows the simultaneous transmission of
multiplesignalsacrossasingledatalink.Inamultiplexed system,nlinessharethe
bandwidth ofonelink.Thewordlinkreferstothephysicalpath.Thewordchannel
referstotheportionofalinkthatcarriesatransmission."
1902,"oTherearethreebasicmultiplexing techniques: frequency-division multiplexing,
wavelength-division multiplexing, andtime-division multiplexing."
1903,"Thefirsttwoare
techniques designed foranalogsignals,thethird,fordigitalsignals
oFrequency-division multiplexing (FDM)isananalogtechnique thatcanbeapplied
whenthebandwidth ofalink(inhertz)isgreaterthanthecombined bandwidths of
thesignalstobetransmitted."
1904,"oWavelength-division multiplexing (WDM)isdesigned tousethehighbandwidth
capability offiber-optic cable.WDMisananalogmultiplexing technique tocom­
bineopticalsignals."
1905,"oTime-division multiplexing (TDM)isadigitalprocessthatallowsseveralconnec­
tionstosharethehighbandwidth ofalink.TDMisadigitalmultiplexing technique
forcombining severallow-ratechannels intoonehigh-rate one."
1906,oWecandivideTDMintotwodifferent schemes: synchronous orstatistical.
1907,"Insyn­
chronous TDM,eachinputconnection hasanallotment intheoutputevenifitis
notsendingdata.Instatistical TDM,slotsaredynamically allocated toimprove
bandwidth efficiency."
1908,"oInspreadspectrum (SS),wecombine signalsfromdifferent sourcestofitintoa
largerbandwidth."
1909,"Spreadspectrum isdesigned tobeusedinwirelessapplications
inwhichstationsmustbeabletosharethemedium withoutinterception byan
eavesdropper andwithoutbeingsubjecttojamming fromamalicious intruder.oThefrequency hoppingspreadspectrum (FHSS)technique usesMdifferent carrier
frequencies thataremodulated bythesourcesignal.Atonemoment, thesignalSECTION 6.6PRACTICE SET 187
modulates onecarrierfrequency; atthenextmoment, thesignalmodulates another
carrierfrequency."
1910,"oThedirectsequence spreadspectrum (DSSS)technique expandsthebandwidth of
asignalbyreplacing eachdatabitwithnbitsusingaspreading code.Inotherwords,
eachbitisassigned acodeofnbits,calledchips."
1911,"6.6PRACTICE SET
ReviewQuestions
1.Describe thegoalsofmultiplexing."
1912,2.Listthreemainmultiplexing techniques mentioned inthischapter.
1913,3.Distinguish betweenalinkandachannelinmultiplexing.
1914,4.Whichofthethreemultiplexing techniques is(are)usedtocombine analogsignals?
1915,Whichofthethreemultiplexing techniques is(are)usedtocombine digitalsignals?
1916,"5.Definetheanaloghierarchy usedbytelephone companies andlistdifferent levels
ofthehierarchy."
1917,"6.Definethedigitalhierarchy usedbytelephone companies andlistdifferent levels
ofthehierarchy."
1918,7.Whichofthethreemultiplexing techniques iscommon forfiberopticlinks?
1919,Explainthereason.
1920,"8.Distinguish betweenmultilevel TDM,multipleslotTDM,andpulse-stuffed TDM."
1921,9.Distinguish betweensynchronous andstatistical TDM.
1922,"10.Definespreadspectrum anditsgoal.Listthetwospreadspectrum techniques dis­
cussedinthischapter."
1923,11.DefineFHSSandexplainhowitachieves bandwidth spreading.
1924,12.DefineDSSSandexplainhowitachieves bandwidth spreading.
1925,"Exercises
13.Assumethatavoicechanneloccupies abandwidth of4kHz.Weneedtomultiplex
10voicechannels withguard bands of500HzusingFDM.Calculate therequired
bandwidth."
1926,"14.Weneedtotransmit 100digitized voicechannels usingapass-band channelof
20KHz.Whatshouldbetheratioofbits/Hzifweusenoguardband?"
1927,"15.Intheanaloghierarchy ofFigure6.9,findtheoverhead (extrabandwidth forguard
bandorcontrol)ineachhierarchy level(group,supergroup, mastergroup,and
jumbogroup)."
1928,"16.Weneedtousesynchronous TDMandcombine20digitalsources,eachof100Kbps."
1929,"Eachoutputslotcarries1bitfromeachdigitalsource,butoneextrabitisaddedto
eachframeforsynchronization."
1930,"Answerthefollowing questions:
a.Whatisthesizeofanoutputframeinbits?"
1931,"b.Whatistheoutputframerate?188CHAPTER 6BANDWIDTH UTIUZATION: MULTIPLEXING ANDSPREADING
c.Whatisthedurationofanoutputframe?"
1932,d.Whatistheoutputdatarate?
1933,e.Whatistheefficiency ofthesystem(ratioofusefulbitstothetotalbits).
1934,17.RepeatExercise 16ifeachoutputslotcarries2bitsfromeachsource.
1935,"18.Wehave14sources,eachcreating5008-bitcharacters persecond.Sinceonlysome
ofthesesourcesareactiveatanymoment, weusestatistical TDMtocombine these
sourcesusingcharacter interleaving."
1936,"Eachframecarries6slotsatatime,butweneed
toaddfour-bitaddresses toeachslot.Answerthefollowing questions:
a.Whatisthesizeofanoutputframeinbits?"
1937,b.Whatistheoutputframerate?
1938,c.Whatisthedurationofanoutputframe?
1939,d.Whatistheoutputdatarate?
1940,"19.Tensources,sixwithabitrateof200kbpsandfourwithabitrateof400kbpsare
tobecombined usingmultilevel TDMwithnosynchronizing bits.Answerthefol­
lowingquestions aboutthefinalstageofthemultiplexing:
a.Whatisthesizeofaframeinbits?"
1941,b.Whatistheframerate?
1942,c.Whatisthedurationofaframe?
1943,d.Whatisthedatarate?
1944,"20.Fourchannels, twowithabitrateof200kbpsandtwowithabitrateof150kbps,are
tobemultiplexed usingmultiple slotTDMwithnosynchronization bits.Answer
thefollowing questions:
a.Whatisthesizeofaframeinbits?"
1945,b.Whatistheframerate?
1946,c.Whatisthedurationofaframe?
1947,d.Whatisthedatarate?
1948,"21.Twochannels, onewithabitrateof190kbpsandanotherwithabitrateof180kbps,
aretobemultiplexed usingpulsestuffingTDMwithnosynchronization bits.Answer
thefollowing questions:
a.Whatisthesizeofaframeinbits?"
1949,b.Whatistheframerate?
1950,c.Whatisthedurationofaframe?
1951,d.Whatisthedatarate?
1952,"22.Answerthefollowing questions aboutaT-1line:
a.Whatisthedurationofaframe?"
1953,b.Whatistheoverhead (numberofextrabitspersecond)?
1954,"23.Showthecontentsofthefiveoutputframesforasynchronous TDMmultiplexer
thatcombines foursourcessendingthefollowing characters."
1955,"Notethatthecharacters
aresentinthesameorderthattheyaretyped.Thethirdsourceissilent."
1956,"a.Source1message: HELLO
b.Source2message: HISECTION 6.6PRACTICE SET 189
c.Source3message:
d.Source4message: BYE
24.Figure6.34showsamultiplexer inasynchronous TDMsystem.Eachoutputslotis
only10bitslong(3bitstakenfromeachinputplus1framingbit).Whatistheoutput
stream?Thebitsarriveatthemultiplexer asshownbythearrows."
1957,"Figure6.34Exercise 24
101110111101~
11111110000~
1010000001111~IFrameof10bitsI
25.Figure6.35showsademultiplexer inasynchronous TDM.Iftheinputslotis16bits
long(noframingbits),whatisthebitstreamineachoutput?Thebitsarriveatthe
demultiplexer asshownbythearrows."
1958,"Figure6.35Exercise 25
101000001110101010101000011101110000011110001
•
26.Answerthefollowing questions aboutthedigitalhierarchy inFigure6.23:
a.Whatistheoverhead (number ofextrabits)intheDS-lservice?"
1959,b.Whatistheoverhead (number ofextrabits)intheDS-2service?
1960,c.Whatistheoverhead (number ofextrabits)intheDS-3service?
1961,d.Whatistheoverhead (number ofextrabits)intheDS-4service?
1962,"27.Whatistheminimum numberofbitsinaPNsequence ifweuseFHSSwitha
channelbandwidth ofB=4KHzandBss=100KHz?"
1963,28.AnFHSSsystemusesa4-bitPNsequence.
1964,"IfthebitrateofthePNis64bitsper
second,answerthefollowing questions:
a.Whatisthetotalnumberofpossiblehops?"
1965,"b.Whatisthetimeneededtofinishacomplete cycle ofPN?190 CHAPTER 6BANDWIDTH UTILIZATION: MULTIPLEXING ANDSPREADING
29.Apseudorandom numbergenerator usesthefollowing formulatocreatearandom
series:
Ni+1=(5+7Ni)mod17-1
InwhichNjdefinesthecurrentrandomnumberandNj+1definesthenextrandom
number.Thetermmodmeansthevalueoftheremainder whendividing (5+7Nj)
by17."
1966,"30.Wehaveadigitalmedium withadatarateof10Mbps.Howmany64-kbpsvoice
channels canbecarriedbythismediumifweuseDSSSwiththeBarkersequence?CHAPTER 7
Transmission Media
Wediscussed manyissuesrelatedtothephysical layerinChapters 3through6.Inthis
chapter,wediscusstransmission media.Transmission mediaareactuallylocatedbelow
thephysical layerandaredirectlycontrolled bythephysical layer.Youcouldsaythat
transmission mediabelongtolayerzero.Figure7.1showsthepositionoftransmission
mediainrelationtothephysicallayer."
1967,"Figure7.1Transmission mediumandphysical layer
SenderIPhysical layerI
L...Transmission medium
CableorairIPhysical layer
.....JIReceiver
Atransmission medium canbebroadlydefinedasanything thatcancarryinfor­
mationfromasourcetoadestination."
1968,"Forexample, thetransmission mediumfortwo
peoplehavingadinnerconversation istheair.Theaircanalsobeusedtoconveythe
message inasmokesignalorsemaphore."
1969,"Forawrittenmessage, thetransmission
mediummightbeamailcarrier,atruck,oranairplane."
1970,"Indatacommunications thedefinition oftheinformation andthetransmission
mediumismorespecific.Thetransmission mediumisusuallyfreespace,metalliccable,
orfiber-optic cable.Theinformation isusuallyasignalthatistheresultofaconversion
ofdatafromanotherform."
1971,"The useoflong-distance communication usingelectricsignalsstartedwiththe
invention ofthetelegraph byMorseinthe19thcentury.Communication bytelegraph
wasslowanddependent onametallicmedium."
1972,"Extending therangeofthehumanvoicebecamepossiblewhenthetelephone was
invented in1869.Telephone communication atthattimealsoneededametallicmedium
tocarrytheelectricsignalsthatweretheresultofaconversion fromthehumanvoice."
1973,"191192CHAPTER 71RANSMISSION MEDIA
Thecommunication was,however, unreliable duetothepoorqualityofthewires.The
lineswereoftennoisyandthetechnology wasunsophisticated."
1974,"Wireless communication started in1895whenHertzwasabletosendhigh­
frequency signals.Later,Marconi devisedamethodtosendtelegraph-type messages
overtheAtlanticOcean."
1975,"Wehavecomealongway.Bettermetallicmediahavebeeninvented (twisted­
pairandcoaxialcables,forexample)."
1976,"Theuseofopticalfibershasincreased thedata
rateincredibly."
1977,"Freespace(air,vacuum, andwater)isusedmoreefficiently, inpart
duetothetechnologies (suchasmodulation andmultiplexing) discussed intheprevious
chapters."
1978,"Asdiscussed inChapter3,computers andothertelecommunication devicesuse
signalstorepresent data.Thesesignalsaretransmitted fromonedevicetoanotherinthe
formofelectromagnetic energy,whichispropagated throughtransmission media."
1979,"Electromagnetic energy,acombination ofelectricandmagnetic fieldsvibrating in
relationtoeachother,includespower,radiowaves,infraredlight,visiblelight,ultraviolet
light,andX,gamma,andcosmicrays.Eachoftheseconstitutes aportionoftheelectro­
magnetic spectrum."
1980,"Notallportionsofthespectrum arecurrently usablefortelecommu­
nications, however."
1981,"Themediatoharnessthosethatareusablearealsolimitedtoafew
types."
1982,"Intelecommunications, transmission mediacanbedividedintotwobroadcatego­
ries:guidedandunguided."
1983,"Guidedmediaincludetwisted-pair cable,coaxialcable,and
fiber-optic cable.Unguided mediumisfreespace.Figure7.2showsthistaxonomy."
1984,"Figure7.2Classesoftransmission media
7.1GUIDED MEDIA
Guidedmedia,whicharethosethatprovideaconduitfromonedevicetoanother,
includetwisted-pair cable,coaxialcable,andfiber-optic cable.Asignaltraveling
alonganyofthesemediaisdirected andcontained bythephysical limitsofthe
medium."
1985,"Twisted-pair andcoaxialcableusemetallic(copper) conductors that accept
andtransport signalsintheformofelectriccurrent.Opticalfiberisacablethataccepts
andtransports signalsintheformoflight.SECTION 7.1GUIDED MEDIA 193
Twisted-Pair Cable
Atwistedpairconsistsoftwo conductors (normally copper),eachwithitsownplastic
insulation, twistedtogether, asshowninFigure7.3.
Figure7.3Twisted-pair cable
'""""il""""'<
Oneofthewiresisusedtocarrysignalstothereceiver, andtheotherisusedonly
asagroundreference."
1986,Thereceiverusesthedifference betweenthetwo.
1987,"Inadditiontothesignalsentbythesenderononeofthewires,interference (noise)
andcrosstalk mayaffectbothwiresandcreateunwanted signals."
1988,"Ifthetwowiresareparallel,theeffectoftheseunwanted signalsisnotthesamein
bothwiresbecausetheyareatdifferentlocations relativetothenoiseorcrosstalk sources
(e,g.,oneiscloserandtheotherisfarther).Thisresultsinadifference atthereceiver.By
twist,ingthepairs,abalanceismaintained."
1989,"Forexample, supposeinonetwist,onewire
isclosertothenoisesourceandtheotherisfarther;inthenexttwist,thereverseistrue."
1990,"Twisting makesitprobable thatbothwiresareequallyaffectedbyexternalinfluences
(noiseorcrosstalk)."
1991,"Thismeansthatthereceiver,whichcalculates thedifference between
thetwo,receivesnounwanted signals.Theunwanted signalsaremostlycanceled out."
1992,"Fromtheabovediscussion, itisclearthatthenumberoftwistsperunitoflength
(e.g.,inch)hassomeeffectonthequalityofthecable."
1993,"Unshielded VersusShielded Twisted-Pair Cable
Themostcommon twisted-pair cableusedincommunications isreferred toas
unshielded twisted-pair (UTP).IBMhasalsoproduced aversionoftwisted-pair cable
foritsusecalledshieldedtwisted-pair (STP).STPcablehasametalfoilorbraided­
meshcovering thatencaseseachpairofinsulated conductors."
1994,"Although metalcasing
improves thequalityofcablebypreventing thepenetration ofnoiseorcrosstalk, itis
bulkierandmoreexpensive."
1995,Figure7.4showsthedifference between UTPandSTP.
1996,Ourdiscussion focusesprimarily onUTPbecauseSTPisseldomusedoutsideofIBM.
1997,"Categories
TheElectronic Industries Association (EIA)hasdeveloped standards toclassify
unshielded twisted-pair cableintosevencategories."
1998,"Categories aredetermined bycable
quality,with1asthelowestand7asthehighest.EachEIAcategory issuitablefor
specificuses.Table7.Ishowsthesecategories."
1999,"Connectors
Themostcommon UTPconnector isRJ45(RJstandsforregistered jack),asshown
inFigure7.5.TheRJ45isakeyedconnector, meaning theconnector canbeinsertedin
onlyoneway.194CHAPTER 7TRANSMISSION MEDIA
Figure7.4UTPandSTPcables
Metalshield
Plasticcover
a.UTPPlasticcover
b.STP
Table7.1Categories ofunshielded twisted-pair cables
DataRate
Category Specification (Mbps) Use
I Unshielded twisted-pair usedintelephone <0.1 Telephone
2 Unshielded twisted-pair originally usedin 2 T-llines
T-lines
3 Improved CAT2usedinLANs 10 LANs
4 Improved CAT3usedinTokenRingnetworks 20 LANs
5 Cablewireisnormally 24AWGwithajacket 100 LANs
andoutsidesheath
SE An extension tocategory 5thatincludes 125 LANs
extrafeaturestominimize thecrosstalk and
electromagnetic interference
6 A newcategory withmatched components 200 LANs
comingfromthesamemanufacturer."
2000,"The
cablemustbetestedata200-Mbps datarate."
2001,"7 Sometimes calledSSTP(shielded screen 600 LANs
twisted-pair)."
2002,"Eachpairisindividually
wrapped inahelicalmetallicfoilfollowed by
ametallicfoilshieldinadditiontotheoutside
sheath.Theshielddecreases theeffectof
crosstalk: andincreases thedatarate."
2003,"Performance
Onewaytomeasure theperformance oftwisted-pair cableistocompare attenuation
versusfrequency anddistance."
2004,Atwisted-pair cablecanpassawiderangeoffrequencies.
2005,"However, Figure7.6showsthatwithincreasing frequency, theattenuation, measured in
decibelsperkilometer (dB/km), sharplyincreases withfrequencies above100kHz.Note
thatgaugeisameasureofthethickness ofthewire.SECTION 7.1GUIDED MEDIA 195
Figure7.5UTPconnector
nrnln
12345678
RJ-45Male
Figure7.6UTPperformance
18gauge26gaugeGauge Diameter (inches)
18 0.0403
22 0.02320
24 0.02010
26 0.015918
2E::::::::..------420
16
]'14
iIi
::3-12
<::.g
'""10:I
<::""~8
6
10 100 1000
!(kHz)
Applications
Twisted-pair cablesareusedintelephone linestoprovidevoiceanddatachannels."
2006,"The
localloop-the linethatconnects subscribers tothecentraltelephone office---commonly
consistsofunshielded twisted-pair cables.Wediscusstelephone networks inChapter9."
2007,"TheDSLlinesthatareusedbythetelephone companies toprovidehigh-data-rate
connections alsousethehigh-bandwidth capability ofunshielded twisted-pair cables."
2008,WediscussDSLtechnology inChapter9.
2009,"Local-area networks, suchaslOBase-T andlOOBase-T, alsousetwisted-pair cables."
2010,Wediscussthesenetworks inChapter13.
2011,"CoaxialCable
Coaxialcable(orcoax)carriessignalsofhigherfrequency rangesthanthoseintwisted­
paircable,inpartbecausethetwomediaareconstructed quitedifferently."
2012,"Insteadof196CHAPTER 7TRANSMISSION MEDIA
havingtwowires,coaxhasacentralcoreconductor ofsolidorstranded wire(usually
copper)enclosed inaninsulating sheath,whichis,inturn,encasedinanouterconductor
ofmetalfoil,braid,oracombination ofthetwo.Theoutermetallic wrapping serves
bothasashieldagainstnoiseandasthesecondconductor, whichcompletes thecircuit."
2013,"Thisouterconductor isalsoenclosed inaninsulating sheath,andthewholecableis
protected byaplasticcover(seeFigure7.7)."
2014,"Figure7.7Coaxialcable
Insulator
Outerconductor
(shield)
CoaxialCableStandards
Coaxialcablesarecategorized bytheirradiogovernment (RG)ratings.EachRGnum­
berdenotesauniquesetofphysical specifications, including thewiregaugeofthe
innerconductor, thethickness andtypeoftheinnerinsulator, theconstruction ofthe
shield,andthesizeandtypeoftheoutercasing.EachcabledefinedbyanRGratingis
adaptedforaspecialized function, asshowninTable7.2.
Table7.2Categories ofcoaxialcables
Category Impedance Use
RG-59 75n CableTV
RG-58 50n ThinEthernet
RG-ll 50n ThickEthernet
CoaxialCableConnectors
Toconnectcoaxialcabletodevices, weneedcoaxialconnectors."
2015,"Themostcommon
typeofconnector usedtodayistheBayone-Neill-Concelman (BNe),connector."
2016,"Figure7.8showsthreepopulartypesoftheseconnectors: theBNCconnector, the
BNCTconnector, andtheBNCterminator."
2017,"TheBNCconnector isusedtoconnecttheendofthecabletoadevice,suchasa
TVset.TheBNCTconnector isusedinEthernet networks (seeChapter 13)tobranch
outtoaconnection toacomputer orotherdevice.TheBNCterminator isusedatthe
endofthecabletopreventthereflection ofthesignal.SECTION 7.1GUIDED MEDIA 11)7
----------------------------_."
2018,"------
Figure7.8BNCconnectors
BNCT
Cable
t
BNCconnector 50-a
BNeterminatorGround
wire
---------------------------~- --
Performance
Aswedidwithtwisted-pair cables,wecanmeasuretheperformance ofacoaxialcable."
2019,"WenoticeinFigure7.9thattheattenuation ismuchhigherincoaxialcablesthanin
twisted-pair cable.Inotherwords,although coaxialcablehasamuchhigherbandwidth,
thesignalweakens rapidlyandrequiresthefrequentuseofrepeaters."
2020,"Figure7.9Coaxialcablepeiformance
100 IO0.712.9mm
!
/I/1.2/4.4mm!
/
/
1.0
j(kHz)0.135
30
a25
~
a:l
:2-20.:0
.~
;::l.:15~
~
10
5
0.01
Applications
Coaxialcablewaswidelyusedinanalogtelephone networks whereasinglecoaxialnet­
workcouldcarry10,000voicesignals.Lateritwasusedindigitaltelephone networks
whereasinglecoaxialcablecouldcarrydigitaldataupto600Mbps.However, coaxial
cableintelephone networks haslargelybeenreplaced todaywithfiber-optic cable."
2021,"CableTVnetworks (seeChapter9)alsousecoaxialcables.Inthetraditional cable
TVnetwork, theentirenetworkusedcoaxialcable.Later,however, cableTVproviders198 CHAPTER 7TRANSMISSION MEDIA
replaced mostofthemediawithfiber-optic cable;hybridnetworks usecoaxialcable
onlyatthenetwork boundaries, neartheconsumer premises."
2022,"CableTVusesRG-59
coaxialcable."
2023,"Anothercommon application ofcoaxialcableisintraditional Ethernet LANs(see
Chapter13).Becauseofitshighbandwidth, andconsequently highdatarate,coaxial
cablewaschosenfordigitaltransmission inearlyEthernetLANs.The10Base-2, orThin
Ethernet, usesRG-58coaxialcablewithBNeconnectors totransmitdataat10Mbps
witharangeof185m.ThelOBase5, orThickEthernet, usesRG-11(thickcoaxialcable)
totransmit 10Mbpswitharangeof5000m.ThickEthernethasspecialized connectors."
2024,"Fiber-Optic Cable
Afiber-optic cableismadeofglassorplasticandtransmits signalsintheformoflight."
2025,"Tounderstand opticalfiber,wefirstneedtoexploreseveralaspectsofthenatureoflight."
2026,"Lighttravelsinastraightlineaslongasitismovingthroughasingleuniformsub­
stance.Ifarayoflighttraveling throughonesubstance suddenly entersanothersubstance
(ofadifferent density), theraychangesdirection."
2027,"Figure7.10showshowarayoflight
changesdirection whengoingfromamoredensetoalessdensesubstance."
2028,"Figure7.10Bendingoflightray
Less
dense
More
denseMore
denseLess
dense
I>criticalangle,
reflectionLess
denseI
I
I
More,A
densezj."
2029,"~
[ I
II
I
rII
I
I=criticalangle,
refraction/
AI
I<criticalangle,
refraction
Asthefigureshows,iftheangleofincidence I(thearIgletheraymakeswiththe
lineperpendicular totheinterface between thetwosubstances) islessthanthecritical
angle,therayrefracts andmovesclosertothesurface.Iftheangleofincidence is
equaltothecriticalangle,thelightbendsalongtheinterface.Iftheangleisgreaterthan
thecriticalangle,therayreflects(makesaturn)andtravelsagaininthedensersub­
stance.Notethatthecriticalangleisaproperty ofthesubstance, anditsvaluediffers
fromonesubstance toanother."
2030,"Opticalfibersusereflection toguidelightthroughachannel.Aglassorplasticcore
issurrounded byacladding oflessdenseglassorplastic.Thedifference indensityofthe
twomaterials mustbesuchthatabeamoflightmovingthroughthecoreisreflected off
thecladding insteadofbeingrefracted intoit.SeeFigure7.11."
2031,"Propagation Modes
Currenttechnology supportstwomodes(multimode andsinglemode)forpropagating light
alongopticalchannels, eachrequiring fiberwithdifferentphysicalcharacteristics."
2032,"Multi­
modecanbeimplemented intwoforms:step-index orgraded-index (seeFigure7.12).SECTION 7.1GUlDED MEDIA 199
Figure7.11Opticaljiber
Cladding
Sender
Figure7.12Propagation modesCladdingReceiverL.-_....J
Multimode Multimode issonamedbecause multiple beamsfromalightsource
movethroughthecoreindifferent paths.Howthesebeamsmovewithinthecable
dependsonthestructure ofthecore,asshowninFigure7.13."
2033,"Inmultimode step-index fiber,thedensityofthecoreremainsconstantfromthe
centertotheedges.Abeamoflightmovesthroughthisconstant densityinastraight
lineuntilitreachestheinterface ofthecoreandthecladding."
2034,"Attheinterface, thereis
anabruptchangeduetoalowerdensity;thisalterstheangleofthebeam'smotion.The
termstepindexreferstothesuddenness ofthischange,whichcontributes tothedistor­
tionofthesignalasitpassesthroughthefiber."
2035,"Asecondtypeoffiber,calledmultimode graded-index fiber,decreases thisdistor­
tionofthesignalthroughthecable.Thewordindexherereferstotheindexofrefraction."
2036,"Aswesawabove,theindexofrefraction isrelatedtodensity.Agraded-index fiber,
therefore, isonewithvaryingdensities."
2037,"Densityishighestatthecenterofthecoreand
decreases gradually toitslowestattheedge.Figure7.13showstheimpactofthisvari­
abledensityonthepropagation oflightbeams."
2038,"Single-Mode Single-mode usesstep-index fiberand ahighlyfocusedsourceoflight
thatlimitsbeamstoasmallrangeofangles,allclosetothehorizontal."
2039,"Thesingle­
modefiberitselfismanufactured withamuchsmallerdiameter thanthatofmultimode
fiber,andwithsubstantiallY lowerdensity(indexofrefraction)."
2040,"Thedecrease indensity
resultsinacriticalanglethatiscloseenoughto90°tomakethepropagation ofbeams
almosthorizontal."
2041,"Inthiscase,propagation ofdifferent beamsisalmostidentical, and
delaysarenegligible."
2042,"Allthebeamsarriveatthedestination ""together"" andcanbe
recombined withlittledistortion tothesignal(seeFigure7.13).200CHAPTER 7TRANSMISSION MEDIA
Figure7.13Modes
JlJ1
Source
a.Multimode, stepindexDestination
JlJ1
Source Destination
b.Multimode, gradedindex
JlJ1
Source
c.SinglemodeDestination
FiberSizes
Opticalfibersaredefinedbytheratioofthediameter oftheircoretothediameter of
theircladding, bothexpressed inmicrometers."
2043,"Thecommon sizesareshowninTable7.3.
Notethatthelastsizelistedisforsingle-mode only."
2044,"Table7.3Fibertypes
Type Core(~) Cladding (Jlm) Mode
501125 50.0 125 Multimode, gradedindex
62.51125 62.5 125 Multimode, gradedindex
100/125 100.0 125 Multimode, gradedindex
7/125 7.0 125 Singlemode
CableComposition
Figure7.14showsthecomposition ofatypicalfiber-optic cable.Theouterjacketismade
ofeitherPVCorTeflon.InsidethejacketareKevlarstrandstostrengthen thecable.Kevlar
isastrongmaterialusedinthefabrication ofbulletproof vests.BelowtheKevlarisanother
plasticcoatingtocushionthefiber.Thefiberisatthecenterofthecable,anditconsistsof
cladding andcore."
2045,"Fiber-Optic CableConnectors
Therearethreetypesofconnectors forfiber-optic cables,asshowninFigure7.15.SECTION 7.1GUIDED MEDIA 201
Figure7.14Fiberconstruction
DuPontKevlar
/forstrength
Glassor
plasticcore
Figure7.15Fiber-optic cableconnectors
SCconnector STconnector
RX
TX
MT-RJconnector
Thesubscriber channel (SC)connector isusedforcableTV.Itusesapush/pull
lockingsystem.Thestraight-tip (ST)connector isusedforconnecting cableto
networking devices.ItusesabayonetlockingsystemandismorereliablethanSC."
2046,MT-RJisaconnector thatisthesamesizeasRJ45.
2047,"Performance
Theplotofattenuation versuswavelength inFigure7.16showsaveryinteresting
phenomenon infiber-optic cable.Attenuation isflatterthaninthecaseoftwisted-pair
cableandcoaxialcable.Theperformance issuchthatweneedfewer(actually 10times
less)repeaters whenweusefiber-optic cable."
2048,"Applications
Fiber-optic cableisoftenfoundinbackbone networks becauseitswidebandwidth is
cost-effective."
2049,"Today,withwavelength-division multiplexing (WDM), wecantransfer202CHAPTER 7IRANSMISSION MEDIA
Figure7.16Opticalfiberperformance
100
50
IO
~5
~
~
00100
0..l0.5
0.1
0.05
0.01
800 1000 1200 1400 1600 1800
Wavelength (urn)
dataatarateof1600Gbps.TheSONETnetworkthatwediscussinChapter17provides
suchabackbone."
2050,"SomecableTVcompanies useacombination ofopticalfiberandcoaxialcable,
thuscreatingahybridnetwork."
2051,"Opticalfiberprovides thebackbone structure while
coaxialcableprovides theconnection totheuserpremises."
2052,"Thisisacost-effective con­
figuration sincethenarrowbandwidth requirement attheuserenddoesnotjustifythe
useofopticalfiber."
2053,"Local-area networks suchas100Base-FX network(FastEthernet) and1000Base-X
alsousefiber-optic cable."
2054,"Advantages andDisadvantages ofOpticalFiber
Advantages Fiber-optic cablehasseveraladvantages overmetalliccable(twisted­
pairorcoaxial)."
2055,DHigherbandwidth.
2056,"Fiber-optic cablecansupportdramatically higherbandwidths
(andhencedatarates)thaneithertwisted-pair orcoaxialcable.Currently, datarates
andbandwidth utilization overfiber-optic cablearelimitednotbythemediumbut
bythesignalgeneration andreception technology available."
2057,DLesssignalattenuation.
2058,"Fiber-optic transmission distanceissignificantly greater
thanthatofotherguidedmedia.Asignalcanrunfor50kmwithoutrequiring
regeneration."
2059,Weneedrepeaters every5kmforcoaxialortwisted-pair cable.
2060,DImmunity toelectromagnetic interference.
2061,"Electromagnetic noisecannotaffect
fiber-optic cables."
2062,oResistance tocorrosive materials.
2063,"Glassismoreresistanttocorrosive materials
thancopper.SECTION 7.2UNGUIDED MEDIA: WIRELESS 203
oLightweight.Fiber-optic cablesaremuchlighterthancoppercables."
2064,oGreaterimmunity totapping.
2065,"Fiber-optic cablesaremoreimmunetotappingthan
coppercables.Coppercablescreateantennaeffectsthatcaneasilybetapped."
2066,Disadvantages Therearesomedisadvantages intheuseofopticalfiber.
2067,oInstallation andmaintenance.
2068,Fiber-optic cableisarelatively newtechnology.
2069,"Its
installation andmaintenance requireexpertise thatisnotyetavailable everywhere."
2070,oUnidirectional lightpropagation.
2071,Propagation oflightisunidirectional.
2072,"Ifwe
needbidirectional communication, twofibersareneeded."
2073,"oCost.Thecableandtheinterfaces arerelatively moreexpensive thanthoseofother
guidedmedia.Ifthedemandforbandwidth isnothigh,oftentheuseofopticalfiber
cannotbejustified."
2074,"7.2UNGUIDED MEDIA: WIRELESS
Unguided mediatransport electromagnetic waveswithoutusingaphysical conductor."
2075,Thistypeofcommunication isoftenreferredtoaswireless communication.
2076,"Signals
arenormally broadcast throughfreespaceandthusareavailable toanyonewhohasa
devicecapableofreceiving them."
2077,"Figure7.17showsthepartoftheelectromagnetic spectrum, rangingfrom3kHzto
900THz,usedforwirelesscommunication."
2078,"Figure7.17Electromagnetic spectrumfor wirelesscommunication
3
kHzRadiowaveandmicrowave
300 400900
GHz THzTHz
Unguided signalscantravelfromthesourcetodestination inseveralways:ground
propagation, skypropagation, andline-of-sight propagation, asshowninFigure7.18."
2079,"Ingroundpropagation, radiowavestravelthroughthelowestportionofthe
atmosphere, huggingtheearth.Theselow-frequency signalsemanate inalldirections
fromthetransmitting antennaandfollowthecurvature oftheplanet.Distance depends
ontheamountofpowerinthesignal:Thegreaterthepower,thegreaterthedistance."
2080,"In
skypropagation, higher-frequency radiowavesradiateupwardintotheionosphere
(thelayerofatmosphere whereparticles existasions)wheretheyarereflected backto
earth.Thistypeoftransmission allows for greaterdistances withloweroutputpower."
2081,"Inline-or-sight propagation, veryhigh-frequency signalsaretransmitted instraight
linesdirectlyfromantennatoantenna.Antennas mustbedirectional, facingeachother,204CHAPTER 7TRANSMISSION MEDIA
Figure7.18Propagation methods
Ionosphere
Groundpropagation
(below2MHz)Ionosphere
Skypropagation
(2-30MHz)Ionosphere
Line-af-sight propagation
(above30MHz)
andeithertallenoughorcloseenoughtogether nottobeaffectedbythecurvature of
theearth.Line-of-sight propagation istrickybecauseradiotransmissions cannotbe
completely focused."
2082,"Thesectionoftheelectromagnetic spectrum definedasradiowavesandmicrowaves
isdividedintoeightranges,calledbands,eachregulated bygovernment authorities."
2083,Thesebandsareratedfromverylowfrequency (VLF)toextremely highfrequency (EHF).
2084,"Table7.4liststhesebands,theirranges,propagation methods, andsomeapplications."
2085,"Table7.4Bands
Band Range Propagation Application
VLF(verylowfrequency) 3-30kHz Ground Long-range radio
navigation
LF(lowfrequency) 30-300kHz Ground Radiobeaconsand
navigational locators
MF(middlefrequency) 300kHz-3MHzSky AMradio
HF(highfrequency) 3-30MHz Sky Citizensband(CB),
shipiaircraft
communication
VHF(veryhighfrequency) 30-300MHz Skyand VHFTV,FMradio
line-of-sight
UHF(ultrahigh frequency) 300MHz-3GHzLine-of-sight UHFTV,cellularphones,
paging,satellite
SHF(superhigh frequency) 3-30GHz Line-of-sight Satellitecommunication
EHF(extremely high 30-300GHz Line-of-sight Radar,satellite
frequency)
Wecandividewireless transmission intothreebroadgroups:radiowaves,micro­
waves,andinfraredwaves.SeeFigure7.19.SECTION 7.2UNGUIDED MEDIA: WIRELESS 205
Figure7.19Wireless transmission waves
RadioWaves
Although thereisnoclear-cut demarcation betweenradiowavesandmicrowaves, elec­
tromagnetic wavesranginginfrequencies between3kHzand1GHzarenormally called
radiowaves;wavesranginginfrequencies between 1and300GHzarecalledmicro­
waves.However, thebehavior ofthewaves,ratherthanthefrequencies, isabetter
criterion forclassification."
2086,"Radiowaves,forthemostpart,areomnidirectional."
2087,"Whenanantennatransmits
radiowaves,theyarepropagated inalldirections."
2088,"Thismeansthatthesendingand
receiving antennas donothavetobealigned.Asendingantennasendswavesthatcan
bereceivedbyanyreceiving antenna.Theomnidirectional property hasadisadvantage,
too.Theradiowavestransmitted byoneantennaaresusceptible tointerference by
anotherantennathatmaysendsignalsusingthesamefrequency orband."
2089,"Radiowaves,particularly thosewavesthatpropagate intheskymode,cantravel
longdistances."
2090,"Thismakesradiowavesagoodcandidate forlong-distance broadcast­
ingsuchasAMradio."
2091,"Radiowaves,particularly thoseoflowandmediumfrequencies, canpenetrate walls."
2092,Thischaracteristic canbebothanadvantage andadisadvantage.
2093,"Itisanadvantage
because,forexample, anAMradiocanreceivesignalsinsideabuilding.Itisadisadvan­
tagebecausewecannotisolateacommunication tojustinsideoroutsideabuilding."
2094,"The
radiowavebandisrelatively narrow,justunder1GHz,compared tothemicrowave
band.Whenthisbandisdividedintosubbands, thesubbands arealsonarrow,leadingtoa
lowdataratefordigitalcommunications."
2095,"Almosttheentirebandisregulated byauthorities (e.g.,theFCCintheUnited
States).Usinganypartofthebandrequirespermission fromtheauthorities."
2096,"Omnidirectional Antenna
Radiowavesuseomnidirectional antennas thatsendoutsignalsinalldirections."
2097,"Basedonthewavelength, strength, andthepurposeoftransmission, wecanhavesev­
eraltypesofantennas."
2098,Figure7.20showsanomnidirectional antenna.
2099,"Applications
Theomnidirectional characteristics ofradiowavesmakethemusefulformulticasting,
inwhichthereisonesenderbutmanyreceivers."
2100,"AMandFMradio,television, mari­
timeradio,cordlessphones,andpagingareexamples ofmulticasting.206 CHAPTER 7TRANSMISSION MEDIA
Figure7.20Omnidirectional antenna
Radiowavesareusedformulticast communications,
suchasradioandtelevision, andpagingsystems."
2101,"Microwaves
Electromagnetic waveshavingfrequencies between Iand300GHzarecalledmicro­
waves."
2102,Microwaves areunidirectional.
2103,"Whenanantennatransmits microwave waves,they
canbenarrowly focused."
2104,"Thismeansthatthesendingandreceiving antennas needto
bealigned.Theunidirectional property hasanobviousadvantage."
2105,"Apairofantennas
canbealignedwithoutinterfering withanotherpairofalignedantennas."
2106,"Thefollowing
describes somecharacteristics ofmicrowave propagation:
oMicrowave propagation isline-of-sight."
2107,"Sincethetowerswiththemounted antennas
needtobeindirectsightofeachother,towersthatarefarapartneedtobeverytall."
2108,"Thecurvature oftheearthaswellasotherblocking obstacles donotallowtwoshort
towerstocommunicate byusingmicrowaves."
2109,"Repeaters areoftenneededforlong­
distancecommunication."
2110,"oVeryhigh-frequency microwaves cannotpenetrate walls.Thischaracteristic canbe
adisadvantage ifreceivers areinsidebuildings."
2111,"oThemicrowave bandisrelatively wide,almost299GHz.Therefore widersubbands
canbeassigned, andahighdatarateispossible
oUseofcertainportionsofthebandrequirespermission fromauthorities."
2112,"Unidirectional Antenna
Microwaves needunidirectional antennas thatsendoutsignalsinonedirection."
2113,"Two
typesofantennas areusedformicrowave communications: theparabolic dishandthe
hom(seeFigure7.21)."
2114,"Aparabolic dishantenna isbasedonthegeometry ofaparabola: Everyline
paralleltothelineofsymmetry (lineofsight)reflectsoffthecurveatanglessuchthat
allthelinesintersect inacommon pointcalledthefocus.Theparabolic dishworksasaSECTION 7.2UNGUIDED MEDIA: WIRELESS 207
Figure7.21Unidirectional antennas
Focus ~,,*=:::I
a.Dishantenna b.Hornantenna
funnel,catching awiderangeofwavesanddirecting themtoacommon point.In
thisway,moreofthesignalisrecovered thanwouldbepossible withasingle-point
receiver."
2115,"Outgoing transmissions arebroadcast throughahornaimedatthedish.Themicro­
waveshitthedishandaredeflected outwardinareversalofthereceiptpath."
2116,"Ahornantenna lookslikeagiganticscoop.Outgoing transmissions arebroadcast
upastem(resembling ahandle)anddeflected outward inaseriesofnarrowparallel
beamsbythecurvedhead.Received transmissions arecollected bythescoopedshapeof
thehorn,inamannersimilartotheparabolic dish,andaredeflected downintothestem."
2117,"Applications
Microwaves, duetotheirunidirectional properties, areveryusefulwhenunicast
(one-to-one) communication isneededbetween thesenderandthereceiver."
2118,"Theyare
usedincellularphones(Chapter 16),satellitenetworks (Chapter 16),andwirelessLANs
(Chapter 14)."
2119,"Microwaves areusedforunicastcommunication suchascellulartelephones,
satellitenetworks, andwirelessLANs.
Infrared
Infrared waves,withfrequencies from300GHzto400THz(wavelengths from1mm
to770nm),canbeusedforshort-range communication."
2120,"Infraredwaves,havinghigh
frequencies, cannotpenetrate walls.Thisadvantageous characteristic prevents interfer­
encebetweenonesystemandanother;ashort-range communication systeminoneroom
cannotbeaffectedbyanothersysteminthenextroom.Whenweuseourinfraredremote
control,wedonotinterfere withtheuseoftheremotebyourneighbors."
2121,"However, this
samecharacteristic makesinfraredsignalsuselessforlong-range communication."
2122,"In
addition, wecannotuseinfraredwavesoutsideabuildingbecausethesun'srayscontain
infraredwavesthatcaninterferewiththecommunication.208CHAPTER 7TRANSMISSION MEDIA
Applications
Theinfraredband,almost400THz,hasanexcellent potential fordatatransmission."
2123,Suchawidebandwidth canbeusedtotransmit digitaldatawithaveryhighdatarate.
2124,"TheInfraredDataAssociation (IrDA),anassociation forsponsoring the useofinfrared
waves,hasestablished standards forusingthesesignalsforcommunication between
devicessuchaskeyboards, mice,PCs,andprinters."
2125,"Forexample, somemanufacturers
provideaspecialportcalledtheIrDAportthatallowsawireless keyboard tocommu­
nicatewithaPC.Thestandard originally definedadatarateof75kbpsforadistance
upto8m.Therecentstandard definesadatarateof4Mbps."
2126,"Infrared signalsdefinedbyIrDAtransmit throughlineofsight;theIrDAporton
thekeyboard needstopointtothePCfortransmission tooccur."
2127,"Infrared signalscanbeusedforshort-range communication
inaclosedareausingline-of-sight propagation."
2128,"7.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
2129,"Books
Transmission mediaisdiscussed inSection3.8of[GW04], Chapter4of[Sta04],Sec­
tion2.2and2.3of[Tan03]."
2130,[SSS05] givesafullcoverage oftransmission media.
2131,"7.4KEYTERMS
angleofincidence
Bayone-Neil-Concelman (BNC)
connector
cladding
coaxialcable
core
criticalangle
electromagnetic spectrum
fiber-optic cable
gauge
groundpropagation
guidedmedia
horn antenna
infraredwaveIrDAport
line-of-sight propagation
microwave
MT-RJ
multimode graded-index fiber
multimode step-index fiber
omnidirectional antenna
opticalfiber
parabolic dishantenna
RadioGovernment (RG)number
radiowave
reflection
refraction
RJ45shieldedtwisted-pair (STP)
single-mode fiber
skypropagation
straight-tip (ST)connector
subscriber channel(SC)connector
transmission mediumSECTION 7.6PRACTICE SET 209
twisted-pair cable
unguided medium
unidirectional antenna
unshielded twisted-pair
(UTP)
wirelesscommunication
7.5SUMMARY
oTransmission medialiebelowthephysicallayer."
2132,"DAguidedmediumprovides aphysicalconduitfromonedevicetoanother.Twisted­
paircable,coaxialcable,andopticalfiberarethemostpopulartypesofguided
media."
2133,DTwisted-pair cableconsistsoftwoinsulated copperwirestwistedtogether.
2134,"Twisted­
paircableisusedforvoiceanddatacommunications."
2135,"DCoaxialcableconsistsofacentralconductor andashield.Coaxialcablecancarry
signalsofhigherfrequency rangesthantwisted-pair cable.Coaxialcableisusedin
cableTVnetworks andtraditional EthernetLANs.
oFiber-optic cablesarecomposed ofaglassorplasticinnercoresurrounded by
cladding, allencasedinanoutsidejacket.Fiber-optic cablescarrydatasignalsin
theformoflight.Thesignalispropagated alongtheinnercorebyreflection."
2136,"Fiber­
optictransmission isbecoming increasingly popularduetoitsnoiseresistance, low
attenuation, andhigh-bandwidth capabilities."
2137,"Fiber-optic cableisusedinbackbone
networks, cableTVnetworks, andFastEthernet networks."
2138,"DUnguided media(freespace)transport electromagnetic waveswithouttheuseofa
physicalconductor."
2139,"oWirelessdataaretransmitted throughgroundpropagation, skypropagation, andline­
of-sightpropagation.Wireless wavescanbeclassified asradiowaves,microwaves, or
infraredwaves.Radiowavesareomnidirectional; microwaves areunidirectional."
2140,"Microwaves areusedforcellularphone,satellite,andwirelessLANcommunications."
2141,"DInfraredwavesareusedforshort-range communications suchasthosebetween a
PCandaperipheral device.ItcanalsobeusedforindoorLANs.
7.6PRACTICE SET
ReviewQuestions
1.Whatisthepositionofthetransmission mediaintheOSIortheInternetmodel?"
2142,2.Namethetwomajorcategories oftransmission media.
2143,3.Howdoguidedmediadifferfromunguided media?
2144,4.Whatarethethreemajorclassesofguidedmedia?
2145,"5.Whatisthesignificance ofthetwistingintwisted-pair cable?210CHAPTER 7TRANSMISSION MEDIA
6.Whatisrefraction?"
2146,Whatisreflection?
2147,7.Whatisthepurposeofcladding inanopticalfiber?
2148,8.Nametheadvantages ofopticalfiberovertwisted-pair andcoaxialcable.
2149,9.Howdoesskypropagation differfromline-of-sight propagation?
2150,10.Whatisthedifference betweenomnidirectional wavesandunidirectional waves?
2151,"Exercises
11.UsingFigure7.6,tabulatetheattenuation (indB)ofa18-gauge UTPfortheindicated
frequencies anddistances."
2152,"Table7.5Attenuation/or I8-gauge UTP
Distance dBat1KHz dRat10KHz dBat100KHz
1Krn
lOKm
15Krn
20Km
12.UsetheresultofExercise 11toinferthatthebandwidth ofaUTPcabledecreases
withanincreaseindistance."
2153,"13.Ifthepoweratthebeginning ofa 1KIn18-gauge UTPis200mw,whatisthe
powerattheendforfrequencies 1KHz,10KHz,and100KHz?Usetheresultof
Exercise 11."
2154,"14.UsingFigure7.9,tabulatetheattenuation (indB)ofa2.6/9.5mmcoaxialcablefor
theindicated frequencies anddistances."
2155,"Table7.6Attenuation/or 2.6/9.5mmcoaxialcable
Distance dBat1KHz dBat10KHz dBat100KHz
1Km
lOKrn
15Km
20Km
15.UsetheresultofExercise 14toinferthatthebandwidth ofacoaxialcable
decreases withtheincreaseindistance."
2156,"16.Ifthepoweratthebeginning ofa 1KIn2.6/9.5mmcoaxialcableis200mw,what
isthepowerattheendforfrequencies 1KHz,10KHz, and100KHz?Usethe
resultofExercise 14."
2157,"17.Calculate thebandwidth ofthelightforthefollowing wavelength ranges(assumea
propagation speed of2 x108m):
a.1000to1200nm
b.1000to1400nmSECTION 7.6PRACTICE SET 211
18.Thehorizontal axesinFigure7.6and7.9represent frequencies."
2158,"Thehorizontal
axisinFigure7.16represents wavelength."
2159,"Canyouexplainthereason?lftheprop­
agationspeedinanopticalfiberis2 x108ill,canyouchangetheunitsinthehori­
zontalaxistofrequency?"
2160,"Shouldthevertical-axis unitsbechangedtoo?Shouldthe
curvebechangedtoo?"
2161,"19.UsingFigure7.16,tabulatetheattenuation (indB)ofanopticalfiberfortheindicated
wavelength anddistances."
2162,"Table7.7Attenuation foropticalfiber
Distance dBat800nm dBat1000nmdBat1200nm
1Km
lOKm
15Km
20Km
20.Alightsignalistravelling throughafiber.Whatisthedelayinthesignalifthe
lengthofthefiber-optic cableis10m,100m,and1Km(assume apropagation
speedof2 x108ill)?"
2163,"21.Abeamoflightmovesfromonemediumtoanothermediumwithlessdensity.The
criticalangleis60°.Dowehaverefraction orreflection foreachofthefollowing
incidentangles?Showthebendingofthelightrayineachcase."
2164,"a.40°
b.60°
c.800CHAPTER 8
Switching
Anetworkisasetofconnected devices.Whenever wehavemultiple devices,wehave
theproblem ofhowtoconnectthemtomakeone-to-one communication possible."
2165,"One
solutionistomakeapoint-to-point connection between eachpairofdevices(amesh
topology) orbetween acentraldeviceandeveryotherdevice(astartopology)."
2166,"These
methods, however, areimpractical andwasteful when appliedtoverylargenetworks."
2167,"Thenumberandlengthofthelinksrequiretoomuchinfrastructure tobecost-efficient,
andthemajority ofthoselinkswouldbeidlemostofthetime.Othertopologies
employing multipoint connections, suchasabus,areruledoutbecausethedistances
between devicesandthetotalnumberofdevicesincrease beyondthecapacities ofthe
mediaandequipment."
2168,Abettersolutionisswitching.
2169,"Aswitched networkconsistsofaseriesofinterlinked
nodes,calledswitches."
2170,"Switches aredevicescapableofcreatingtemporary connections
betweentwoormoredeviceslinkedtotheswitch.Inaswitched network, someofthese
nodesareconnected totheendsystems(computers ortelephones, forexample)."
2171,"Others
areusedonlyforrouting.Figure8.1showsaswitched network."
2172,"Figure8.1Switched network
Theendsystems(communicating devices)arelabeledA,B, C,D,andsoon,andthe
switches arelabeledI,II,III,IV,andV.Eachswitchisconnected tomultiple links."
2173,"213214 CHAPTER 8SWITCHING
Traditionally, threemethods ofswitching havebeenimportant: circuitswitching,
packetswitching, andmessage switching."
2174,"Thefirsttwoarecommonly usedtoday.The
thirdhasbeenphasedoutingeneralcommunications butstillhasnetworking applications."
2175,"Wecanthendividetoday'snetworks intothreebroadcategories: circuit-switched networks,
packet-switched networks, andmessage-switched."
2176,"Packet-switched networks canfunher
bedividedintotwosubcategories-virtual-circuit networks anddatagram networks­
asshowninFigure8.2.
Figure8.2Taxonomy ofswitched networks
Wecansaythatthevirtual-circuit networks havesomecommon characteristics
withcircuit-switched anddatagram networks."
2177,"Thus,wefirstdiscusscircuit-switched
networks, thendatagram networks, andfinallyvirtual-circuit networks."
2178,"Todaythetendency inpacketswitching istocombinedatagram networks andvirtual­
circuitnetworks."
2179,"Networks routethefirstpacketbasedonthedatagram addressing idea,
butthencreateavirtual-circuit networkfortherestofthepacketscomingfromthesame
sourceandgoingtothesamedestination."
2180,"Wewillseesomeofthesenetworks infuture
chapters."
2181,"Inmessage switching, eachswitchstoresthewholemessage andforwards ittothe
nextswitch.Although, wedon'tseemessage switching atlowerlayers,itisstillusedin
someapplications likeelectronic mail(e-mail).Wewillnotdiscussthistopicinthisbook."
2182,"8.1CIRCUIT-SWITCHED NETWORKS
Acircuit-switched network consistsofasetofswitches connected byphysical links."
2183,"Aconnection betweentwostationsisadedicated pathmadeofoneormorelinks.How­
ever,eachconnection usesonlyonededicated channeloneachlink.Eachlinkisnor­
mallydividedintonchannels byusingFDMorTDMasdiscussed inChapter6."
2184,"Acircuit-switched networkismadeofasetofswitches connected byphysicallinks,
inwhicheachlinkisdividedintonchannels."
2185,"Figure8.3showsatrivialcircuit-switched network withfourswitches andfour
links.Eachlinkisdividedinton(nis3inthefigure)channels byusingFDMorTDM.SECTION 8.1CIRCUIT-SWITCHED NETWORKS 215
Figure8.3Atrivialcircuit-switched network
Onelink,IIchannels
Path
Wehaveexplicitly shownthemultiplexing symbols toemphasize thedivisionofthe
linkintochannels eventhoughmultiplexing canbeimplicitly included intheswitch
fabric."
2186,"Theendsystems, suchascomputers ortelephones, aredirectlyconnected toa
switch.Wehaveshownonlytwoendsystemsforsimplicity."
2187,"WhenendsystemAneeds
tocommunicate withendsystemM,systemAneedstorequestaconnection toMthat
mustbeaccepted byallswitches aswellasbyMitself.Thisiscalledthesetupphase;
acircuit(channel) isreserved oneachlink,andthecombination ofcircuitsorchannels
definesthededicated path.Afterthededicated pathmadeofconnected circuits(channels)
isestablished, datatransfer cantakeplace.Afteralldatahavebeentransferred, the
circuitsaretomdown."
2188,"Weneedtoemphasize severalpointshere:
DCircuitswitching takesplaceatthephysical layer."
2189,"DBeforestartingcommunication, thestationsmustmakeareservation fortheresources
tobeusedduringthecommunication."
2190,"Theseresources, suchaschannels (bandwidth
inFDMandtimeslotsinTDM),switchbuffers,switchprocessing time,andswitch
input/output ports,mustremaindedicated duringtheentiredurationofdatatransfer
untiltheteardown phase."
2191,"DDatatransferred betweenthetwostationsarenotpacketized (physical layertransfer
ofthesignal).Thedataareacontinuous flowsentbythesourcestationandreceived
bythedestination station,although theremaybeperiodsofsilence."
2192,"DThereisnoaddressing involved duringdatatransfer.Theswitches routethedata
basedontheiroccupied band(FDM)ortimeslot(TDM).Ofcourse,thereisend-to­
endaddressing usedduringthesetupphase,aswewillseeshortly."
2193,"Incircuitswitching, theresources needtobereservedduringthesetupphase;
theresources remaindedicated fortheentireduration
ofdatatransferuntiltheteardown phase.216 CHAPTER 8SWITCHING
Example 8.1
Asatrivialexample, letususeacircuit-switched networktoconnecteighttelephones inasmall
area.Communication isthrough4-kHzvoicechannels."
2194,"WeassumethateachlinkusesFDMto
connectamaximum oftwovoicechannels."
2195,"Thebandwidth ofeachlinkisthen8kHz.Figure8.4
showsthesituation."
2196,"Telephone 1isconnected totelephone 7;2to5;3to8;and4to6.Ofcourse
thesituationmaychangewhennewconnections aremade.Theswitchcontrolstheconnections."
2197,"Figure8.4Circuit-switched networkusedinExample 8.1
Circuit-switched network
Example 8.2
Asanotherexample, consideracircuit-switched networkthatconnects computers intworemote
officesofaprivatecompany."
2198,"Theofficesareconnected usingaT-llineleasedfromacommuni­
cationserviceprovider."
2199,Therearetwo4X8(4inputsand8outputs)switches inthisnetwork.
2200,"For
eachswitch,fouroutputportsarefoldedintotheinputportstoallowcommunication between
computers inthesameoffice.Fourotheroutputportsallowcommunication between thetwo
offices.Figure8.5showsthesituation."
2201,"Figure8.5Circuit-switched networkusedinExample 8.2
Circuit-switched network
4x8
swItch T-llinewith
1.544Mbps4x8
switchSECTION 8.1CIRCUIT-SWITCHED NEIWORKS 217
ThreePhases
Theactualcommunication inacircuit-switched networkrequiresthreephases:connec­
tionsetup,datatransfer,andconnection teardown."
2202,"SetupPhase
Beforethetwoparties(ormultiple partiesinaconference call)cancommunicate, a
dedicated circuit(combination ofchannels inlinks)needstobeestablished."
2203,"Theendsys­
temsarenormally connected throughdedicated linestotheswitches, soconnection setup
meanscreatingdedicated channels between theswitches."
2204,"Forexample, inFigure8.3,
whensystemAneedstoconnecttosystemM,itsendsasetuprequestthatincludesthe
addressofsystemM,toswitchI.SwitchIfindsachannelbetweenitselfandswitchIV
thatcanbededicated forthispurpose."
2205,"SwitchIthensendstherequesttoswitchIV,
whichfindsadedicated channelbetween itselfandswitchIII.SwitchIIIinformssys­
temMofsystemA'sintention atthistime."
2206,"Inthenextsteptomakingaconnection, anacknowledgment fromsystemMneeds
tobesentintheopposite direction tosystemA.OnlyaftersystemAreceives this
acknowledgment istheconnection established."
2207,"Notethatend-to-end addressing isrequired forcreatingaconnection between the
twoendsystems."
2208,"Thesecanbe,forexample, theaddresses ofthecomputers assigned
bytheadministrator inaTDMnetwork, ortelephone numbers inanFDMnetwork."
2209,"DataTransfer Phase
Aftertheestablishment ofthededicated circuit(channels), thetwopartiescantransferdata."
2210,"Teardown Phase
Whenoneofthepartiesneedstodisconnect, asignalissenttoeachswitchtorelease
theresources."
2211,"Efficiency
Itcanbearguedthatcircuit-switched networks arenotasefficient astheothertwo
typesofnetworks becauseresources areallocated duringtheentiredurationofthecon­
nection.Theseresources areunavailable tootherconnections."
2212,"Inatelephone network,
peoplenormally terminate thecommunication whentheyhavefinishedtheirconversation."
2213,"However, incomputer networks, acomputer canbeconnected toanothercomputer
evenifthereisnoactivityforalongtime.Inthiscase,allowing resources tobededicated
meansthatotherconnections aredeprived."
2214,"Delay
Although acircuit-switched networknormally haslowefficiency, thedelayinthistype
ofnetworkisminimal."
2215,"Duringdatatransferthedataarenotdelayedateachswitch;the
resources areallocated forthedurationoftheconnection."
2216,"Figure8.6showstheideaof
delayinacircuit-switched networkwhenonlytwoswitches areinvolved."
2217,"AsFigure8.6shows,thereisnowaitingtimeateachswitch.Thetotaldelayisdue
tothetimeneededtocreatetheconnection, transferdata,anddisconnect thecircuit.The218CHAPTER 8SWITCHING
Figure8.6Delayinacircuit-switched network
Datatransfer1I-------1.}\."
2218,"f------l
ui[------------------
Q
Time Time Time Time
delaycausedbythesetupisthesumoffourparts:thepropagation timeofthesource
computer request(slopeofthefirstgraybox),therequestsignaltransfertime(heightof
thefirstgraybox),thepropagation timeoftheacknowledgment fromthedestination
computer (slopeofthesecondgraybox),andthesignaltransfertimeoftheacknowledg­
ment(heightofthesecondgraybox).Thedelayduetodatatransferisthesumoftwo
parts:thepropagation time(slopeofthecoloredbox)anddatatransfertime(heightof
thecoloredbox),whichcanbeverylong.Thethirdboxshowsthetimeneededtotear
downthecircuit.Wehaveshownthecaseinwhichthereceiverrequestsdisconnection,
whichcreatesthemaximum delay."
2219,"Circuit-Switched Technology inTelephone Networks
AswewillseeinChapter9,thetelephone companies havepreviously chosenthecircuit­
switched approach toswitching inthephysical layer;todaythetendency ismoving
towardotherswitching techniques."
2220,"Forexample, thetelephone numberisusedasthe
globaladdress,andasignaling system(calledSS7)isusedforthesetupandteardown
phases."
2221,"Switching atthephysicallayerinthetraditional telephone
networkusesthecircuit-switching approach."
2222,"8.2DATAGRAM NETWORKS
Indatacommunications, weneedtosendmessages fromoneendsystemtoanother.If
themessageisgoingtopassthroughapacket-switched network, itneedstobedivided
intopacketsoffixedorvariablesize.Thesizeofthepacketisdetermined bythenet­
workandthegoverning protocol."
2223,"Inpacketswitching, thereisnoresource allocation forapacket.Thismeansthat
thereisnoreservedbandwidth onthelinks,andthereisnoscheduled processing timeSECTION 8.2DATAGRAM NETWORKS 219
foreachpacket.Resources areallocated ondemand."
2224,"Theallocation isdoneonafirst­
come,first-served basis.Whenaswitchreceivesapacket,nomatterwhatisthesource
ordestination, thepacketmustwaitifthereareotherpacketsbeingprocessed."
2225,"Aswith
othersystemsinourdailylife,thislackofreservation maycreatedelay.Forexample, if
wedonothaveareservation atarestaurant, wemighthavetowait."
2226,"Inapacket-switched network, thereisnoresource reservation;
resources areallocated ondemand."
2227,"Inadatagram network, eachpacketistreatedindependently ofallothers.Evenif
apacketispartofamultipacket transmission, thenetworktreatsitasthoughitexisted
alone.Packetsinthisapproach arereferredtoasdatagrams."
2228,"Datagram switching isnormally doneatthenetwork layer.Webrieflydiscuss
datagram networks hereasacomparison withcircuit-switched andvirtual-circuit­
switched networks."
2229,"InPart4ofthistext,wegointogreaterdetail."
2230,"Figure8.7showshowthedatagram approach isusedtodeliverfourpacketsfrom
stationAtostationX.Theswitches inadatagram networkaretraditionally referredto
asrouters.Thatiswhyweuseadifferent symbolfortheswitches inthefigure."
2231,"Figure8.7Adatagram networkwithfourswitches (routers)
Datagram network
A
Inthisexample, allfourpackets(ordatagrams) belongtothesamemessage, but
maytraveldifferent pathstoreachtheirdestination."
2232,"Thisissobecausethelinksmaybe
involvedincarryingpacketsfromothersourcesanddonothavethenecessary bandwidth
available tocarryallthepacketsfromAtoX.Thisapproach cancausethedatagrams of
atransmission toarriveattheirdestination outoforderwithdifferentdelaysbetweenthe
packets.Packetsmayalsobelostordropped becauseofalackofresources."
2233,"Inmost
protocols, itistheresponsibility ofanupper-layer protocol toreorderthedatagrams or
askforlostdatagrams beforepassingthemontotheapplication."
2234,Thedatagram networks aresometimes referredtoasconnectionless networks.
2235,"The
termconnectionless heremeansthattheswitch(packetswitch)doesnotkeepinformation
abouttheconnection state.Therearenosetuporteardown phases.Eachpacketistreated
thesamebyaswitchregardless ofitssourceordestination.220 CHAPTER 8SWITCHING
Routing Table
Iftherearenosetuporteardown phases,howarethepacketsroutedtotheirdestinations
inadatagram network?"
2236,"Inthistypeofnetwork, eachswitch(orpacketswitch)hasarout­
ingtablewhichisbasedonthedestination address.Theroutingtablesaredynamic and
areupdatedperiodically."
2237,"Thedestination addresses andthecorresponding forwarding
outputportsarerecorded inthetables.Thisisdifferent fromthetableofacircuit­
switched networkinwhicheachentryiscreatedwhenthesetupphaseiscompleted and
deletedwhentheteardown phaseisover.Figure8.8showstheroutingtablefora
switch."
2238,"Figure8.8Routingtableinadatagram network
Destination Output
address port
1232 I
4150 2
.."
2239,"9130 3
-......;..,:7
----
1 4
213
Aswitchinadatagram networkusesaroutingtablethatisbasedonthedestination address."
2240,"Destination Address
Everypacketinadatagram networkcarriesaheaderthatcontains, amongotherinfor­
mation,thedestination addressofthepacket.Whentheswitchreceivesthepacket,this
destination addressisexamined; theroutingtableisconsulted tofindthecorresponding
portthroughwhichthepacketshouldbeforwarded."
2241,"Thisaddress, unliketheaddress
inavirtual-circuit-switched network, remainsthesameduringtheentirejourneyofthe
packet."
2242,"Thedestination addressintheheaderofapacketinadatagram network
remainsthesameduringtheentirejourneyofthepacket."
2243,"Efficiency
Theefficiency ofadatagram networkisbetterthanthatofacircuit-switched network;
resources areallocated onlywhentherearepacketstobetransferred."
2244,"Ifasourcesends
apacketandthereisadelayofafewminutesbeforeanotherpacketcanbesent,the
resources canbereallocated duringtheseminutesforotherpacketsfromothersources.SECTION 8.3VIRTUAL-CIRCUIT NETWORKS 221
Delay
Theremaybegreaterdelayinadatagram network thaninavirtual-circuit network."
2245,"Although therearenosetupandteardown phases,eachpacketmayexperience awaitata
switchbeforeitisforwarded."
2246,"Inaddition, sincenotallpacketsinamessage necessarily
travelthroughthesameswitches, thedelayisnotuniform forthepacketsofamessage."
2247,Figure8.9givesanexample ofdelayinadatagram networkforonesinglepacket.
2248,"Figure8.9Delayinadatagram network
Wai~ing[
timei------J
Am---------tl~I_----_~_----_____1
Transmis~ion [
limer----=:--,-,---J
Waiting[
time,------1B
Time Time Time Time
Thepackettravelsthroughtwoswitches."
2249,"Therearethreetransmission times(3T),
threepropagation delays(slopes3'tofthelines),andtwowaitingtimes(WI+w2)'We
ignoretheprocessing timeineachswitch.Thetotaldelayis
Totaldelay=3T+3t+WI+W2
Datagram Networks intheInternet
Aswewillseeinfuturechapters, theInternet haschosenthedatagram approach to
switching atthenetwork layer.Itusestheuniversal addresses definedinthenetwork
layertoroutepacketsfromthesourcetothedestination."
2250,"Switching intheInternetisdonebyusingthedatagram
approach topacketswitching atthenetworklayer."
2251,"8.3VIRTUAL-CIRCUIT NETWORKS
Avirtual-circuit network isacrossbetween acircuit-switched network andadatagram
network.Ithassomecharacteristics ofboth."
2252,"1.Asinacircuit-switched network, therearesetupandteardown phasesinaddition
tothedatatransferphase.222CHAPTER 8SWITCHING
2.Resources canbeallocated duringthesetupphase,asinacircuit-switched network,
orondemand, asinadatagram network."
2253,"3.Asinadatagram network, dataarepacketized andeachpacketcarriesanaddressin
theheader.However, theaddressintheheaderhaslocaljurisdiction (itdefineswhat
shouldbethenextswitchandthechannelonwhichthepacketisbeingcanied), not
end-to-end jurisdiction."
2254,"Thereadermayaskhowtheintermediate switches know
wheretosendthepacketifthereisnofinaldestination addresscarriedbyapacket."
2255,Theanswerwillbeclearwhenwediscussvirtual-circuit identifiers inthenextsection.
2256,"4.Asinacircuit-switched network, allpacketsfollowthesamepathestablished during
theconnection."
2257,"5.Avirtual-circuit network isnormally implemented inthedatalinklayer,whilea
circuit-switched network isimplemented inthephysical layerandadatagram net­
workinthenetwork layer.Butthismaychangeinthefuture."
2258,Figure8.10isanexample ofavirtual-circuit network.
2259,"Thenetwork hasswitches that
allowtrafficfromsourcestodestinations."
2260,"Asourceordestination canbeacomputer,
packetswitch,bridge,oranyotherdevicethatconnects othernetworks."
2261,"Figure8.10Virtual-circuit network
Addressing
Inavirtual-circuit network, twotypesofaddressing areinvolved: globalandlocal
(virtual-circuit identifier)."
2262,"GlobalAddressing
Asourceoradestination needstohaveaglobaladdress-an addressthatcanbeunique
inthescopeofthenetwork orinternationally ifthenetwork ispartofaninternational
network."
2263,"However, wewillseethataglobaladdressinvirtual-circuit networks isused
onlytocreateavirtual-circuit identifier, asdiscussed next."
2264,"Virtual-Circuit Identifier
Theidentifier thatisactuallyusedfordatatransferiscalledthevirtual-circuit identifier
(Vel).Avel,unlikeaglobaladdress, isasmallnumberthathasonlyswitchscope;itSECTION 8.3VIRTUAL-CIRCUIT NETWORKS 223
isusedbyaframebetween twoswitches."
2265,"Whenaframearrivesataswitch,ithasa
VCI;whenitleaves,ithasadifferent VCl.Figure8.11showshowtheVCIinadata
framechangesfromoneswitchtoanother.NotethataVCIdoesnotneedtobealarge
numbersinceeachswitchcanuseitsownuniquesetofVCls."
2266,"Figure8.11Virtual-circuit identifier
VCII VCI
IDatatEJ~ IDataI~~
-----===::::=------~..I'.."
2267,"~=====----
ThreePhases
Asinacircuit-switched network, asourceanddestination needtogothroughthree
phasesinavirtual-circuit network: setup,datatransfer, andteardown."
2268,"Inthesetup
phase,thesourceanddestination usetheirglobaladdresses tohelpswitches maketable
entriesfortheconnection."
2269,"Intheteardown phase,thesourceanddestination informthe
switches todeletethecorresponding entry.Datatransferoccursbetween thesetwo
phases.Wefirstdiscussthedatatransferphase,whichismorestraightforward; wethen
talkaboutthesetupandteardown phases."
2270,"DataTransfer Phase
Totransferaframefromasourcetoitsdestination, allswitches needtohaveatable
entryforthisvirtualcircuit.Thetable,initssimplest form,hasfourcolumns."
2271,"This
meansthattheswitchholdsfourpiecesofinformation foreachvirtualcircuitthatis
alreadysetup.Weshowlaterhowtheswitches maketheirtableentries,butforthe
momentweassumethateachswitchhasatablewithentriesforallactivevirtualcir­
cuits.Figure8.12showssuchaswitchanditscorresponding table."
2272,"Figure8.12showsaframearrivingatport1withaVCIof14.Whentheframe
arrives,theswitchlooksinitstabletofindport1andaVCIof14.Whenitisfound,the
switchknowstochangetheVCIto22andsendouttheframefromport3."
2273,"Figure8.13showshowaframefromsourceAreachesdestination Bandhowits
VCIchangesduringthetrip.EachswitchchangestheVCIandroutestheframe."
2274,"Thedata transferphaseisactiveuntilthesourcesendsallitsframestothedestina­
tion.Theprocedure attheswitchisthesameforeachframeofamessage."
2275,"Theprocess
createsavirtualcircuit,notarealcircuit,betweenthesourceanddestination."
2276,"SetupPhase
Inthesetupphase,aswitchcreatesanentryforavirtualcircuit.Forexample, suppose
sourceAneedstocreateavirtualcircuittoB.Twostepsarerequired: thesetuprequest
andtheacknowledgment.224CHAPTER 8SWITCHING
Figure8.12Switchandtablesinavirtual-circuit network
Incoming Outgoing
PortVClPortVCl
114322
177241
~'~
IData~IData[EJ-+lA3IData@]-+
2
~t
Figure8.13Source-to-destination datatransferinavirtual-circuit network
Incoming Outgoing
PortVClPortVCl
I14366Incoming Outgoing
PortVClPortVCI
222377
Incoming Outgoing
PortVCIPortVCl
166222
SetupRequest Asetuprequestframeissentfromthesourcetothedestination."
2277,Figure8.14showstheprocess.
2278,a.SourceAsendsasetupframe toswitch1.
2279,"b.Switch1receivesthesetuprequestframe.ItknowsthataframegoingfromAtoB
goesoutthroughport3.Howtheswitchhasobtained thisinformation isapoint
coveredinfuturechapters."
2280,"Theswitch,inthesetupphase,actsasapacketswitch;
ithasaroutingtablewhichisdifferent fromtheswitching table.Forthemoment,
assumethatitknowstheoutputport.TheswitchcreatesanentryinitstableforSECTION 8.3VIRTUAL-CIRCUIT NETWORKS 225
Figure8.14Setuprequestinavirtual-circuit network
Incoming Outgoing
PortIvcIPortIVCI
1I143IIncoming Outgoing
PortIVCIPortIVCI
21223IVCI=77
Incoming Outgoing
PortIVCIPortIVCI
I I662I
thisvirtualcircuit,butitisonlyabletofillthreeofthefourcolumns."
2281,"Theswitch
assignstheincoming port(1)andchooses anavailable incoming VCI(14)andthe
outgoing port(3).Itdoesnotyetknowtheoutgoing VCI,whichwillbefounddur­
ingtheacknowledgment step.Theswitchthenforwards theframethroughport3
toswitch2."
2282,"c.Switch2receives thesetuprequestframe.Thesameeventshappenhereasat
switch1;threecolumns ofthetablearecompleted: inthiscase,incoming port(l),
incoming VCI(66),andoutgoing port(2)."
2283,"d.Switch3receives thesetuprequestframe.Again,threecolumns arecompleted:
incoming port(2),incoming VCI(22),andoutgoing port(3)."
2284,"e.Destination Breceives thesetupframe,andifitisreadytoreceiveframesfromA,
itassignsaVCItotheincoming framesthatcomefromA,inthiscase77.This
VCIletsthedestination knowthattheframescomefromA,andnotothersources."
2285,"Acknowledgment Aspecialframe,calledtheacknowledgment frame,completes
theentriesintheswitching tables.Figure8.15showstheprocess."
2286,"a.Thedestination sendsanacknowledgment toswitch3.Theacknowledgment carries
theglobalsourceanddestination addresses sotheswitchknowswhichentryinthe
tableistobecompleted."
2287,"TheframealsocarriesVCI77,chosenbythedestination as
theincoming VCIforframesfromA.Switch3usesthisVCItocomplete theoutgoing
VCIcolumnforthisentry.Notethat77istheincoming VCIfordestination B,but
theoutgoing VCIforswitch3."
2288,"b.Switch3sendsanacknowledgment toswitch2thatcontains itsincoming VCIinthe
table,chosenintheprevious step.Switch2usesthisastheoutgoing VCIinthetable."
2289,"c.Switch2sendsanacknowledgment toswitch1thatcontains itsincoming VCIinthe
table,chosenintheprevious step.Switch1usesthisastheoutgoing VCIinthetable."
2290,"d.Finallyswitch1sendsanacknowledgment tosourceAthatcontains itsincoming
VCIinthetable,chosenintheprevious step."
2291,"e.Thesourceusesthisastheoutgoing VCIforthedataframestobesenttodestination B.226CHAPTER 8SWITCHING
Figure8.15Setupacknowledgment inavirtual-circuit network
Incoming Outgoing
PortIVCIPortIVCI
21223 I77Incoming Outgoing
PortIVCIPortIVCI
II143166VCI==14 VCI==77
A1--==--;~o@B
Incoming Outgoing
PortIVCIPortIVCI
II662122
Teardowil Phase
Inthisphase,sourceA,aftersendingallframestoB,sendsaspecialframecalleda
teardown request.Destination Bresponds withateardown confirmation frame.All
switches deletethecorresponding entryfromtheirtables."
2292,"Efficiency
Aswesaidbefore,resource reservation inavirtual-circuit networkcanbemadeduring
thesetuporcanbeondemandduringthedatatransferphase.Inthefirstcase,thedelay
foreachpacketisthesame;inthesecondcase,eachpacketmayencounter different
delays.Thereisonebigadvantage inavirtual-circuit networkevenifresourceallocation
isondemand."
2293,"Thesourcecanchecktheavailability oftheresources, withoutactually
reserving it.Consider afamilythatwantstodineatarestaurant."
2294,"Although therestaurant
maynotaccept reservations (allocation ofthetablesisondemand), thefamilycancall
andfindoutthewaitingtime.Thiscansavethefamilytimeandeffort."
2295,"Invirtual-circuit switching, allpacketsbelonging tothesamesourceanddestination
travelthesamepath;butthepacketsmayarriveatthedestination
withdifferent delaysifresourceallocation isondemand."
2296,"DelayinVirtual-Circuit Networks
Inavirtual-circuit network, thereisaone-time delayforsetupandaone-time delayfor
teardown.Ifresources areallocated duringthesetupphase,thereisnowaittimefor
individual packets."
2297,"Figure8.16showsthedelayforapackettraveling throughtwo
switches inavirtual-circuit network."
2298,Thepacketistraveling throughtwoswitches (routers).
2299,"Therearethreetransmis­
siontimes(3T),threepropagation times(3't),datatransferdepicted bythesloping
lines,asetupdelay(whichincludes transmission andpropagation intwodirections),SECTION 8.4STRUCTURE OFASWITCH 227
Figure8.16Delayinavirtual-circuit network
I~I
""~[--~---------------
~ ,
~]1;'ransmission
tIme
Time Time Time Time
andateardown delay(whichincludestransmission andpropagation inonedirection)."
2300,"Weignoretheprocessing timeineachswitch.Thetotaldelaytimeis
Totaldelay=3T+3't+setupdelay+teardown delay
Circuit-Switched Technology inWANs
AswewillseeinChapter18,virtual-circuit networks areusedinswitched WANssuch
asFrameRelayandATMnetworks."
2301,"Thedatalinklayerofthesetechnologies iswell
suitedtothevirtual-circuit technology."
2302,"Switching atthedatalinklayerinaswitched WANisnormally
implemented byusingvirtual-circuit techniques."
2303,"8.4STRUCTURE OFASWITCH
Weuseswitches incircuit-switched andpacket-switched networks."
2304,"Inthissection,we
discussthestructures oftheswitches usedineachtypeofnetwork."
2305,"Structure ofCircuitSwitches
Circuitswitching todaycanuseeitheroftwotechnologies: thespace-division switchor
thetime-division switch."
2306,"Space-Division Switch
Inspace-division switching, thepathsinthecircuitareseparated fromoneanother
spatially."
2307,"Thistechnology wasoriginally designed foruseinanalognetworks butis
usedcurrently inbothanaloganddigitalnetworks.Ithasevolvedthroughalonghistory
ofmanydesigns.228CHAPTER 8SWITCHING
Crossbar Switch Acrossbar switchconnects ninputstomoutputsinagrid,using
electronic microswitches (transistors) ateachcrosspoint (seeFigure8.17).Themajor
limitation ofthisdesignisthenumberofcrosspoints required."
2308,"Toconnectninputsto
moutputsusingacrossbar switchrequiresnxmcrosspoints."
2309,"Forexample, toconnect
1000inputsto1000outputsrequiresaswitchwith1,000,000 crosspoints."
2310,"Acrossbar
withthisnumberofcrosspoints isimpractical."
2311,"Suchaswitchisalsoinefficient because
statistics showthat,inpractice, fewerthan25percentofthecrosspoints areinuseat
anygiventime.Therestareidle."
2312,"Figure8.17Crossbar switchwiththreeinputsandfouroutputs
2
30-+-· .....--4.---.--."
2313,"IIIIIIV
Multistage Switch Thesolution tothelimitations ofthecrossbar switchisthe
multistage switch,whichcombines crossbar switches inseveral(normally three)
stages,asshowninFigure8.18.Inasinglecrossbar switch,onlyoneroworcolumn
(onepath)isactiveforanyconnection."
2314,SoweneedNx Ncrosspoints.
2315,"Ifwecanallow
multiple pathsinsidetheswitch,wecandecrease thenumberofcrosspoints."
2316,"Each
crosspoint inthemiddlestagecanbeaccessed bymultiple crosspoints inthefirstor
thirdstage."
2317,"Figure8.18Multistage switch
Nln k Nln
Crossbars Crossbars Crossbars
n[ In
n[ In N N
n[ In
Stage1 Stage2 Stage3SECTION 8.4STRUCTURE OFASWITCH 229
Todesignathree-stage switch,wefollowthesesteps:
1.WedividetheNinputlinesintogroups,eachofnlines.Foreachgroup,weuse
onecrossbarofsizenxk,wherekisthenumberofcrossbars inthemiddlestage."
2318,"Inotherwords,thefirststagehasN/ncrossbars ofnxkcrosspoints."
2319,"2.Weusekcrossbars, eachofsize(N/n)x(N/n)inthemiddlestage."
2320,"3.WeuseN/ncrossbars, eachofsizekxnatthethirdstage."
2321,"Wecancalculate thetotalnumberofcrosspoints asfollows:
N(NN)N (N)2 -enxk)+k-x -+ -(kxn)=2kN+k -n n n n n
Inathree-stage switch,thetotalnumberofcrosspoints is
2kN+k(~Y
whichismuchsmallerthanthenumberofcrosspoints inasingle-stage switch(N2)."
2322,"Example 8.3
Designathree-stage, 200x200switch(N=200)withk=4andn=20."
2323,"Solution
InthefirststagewehaveN/nor10crossbars, eachofsize20x4.Inthesecondstage,wehave
4crossbars, eachofsize10x10.Inthethirdstage,wehave10crossbars, eachofsize4 x20."
2324,"Thetotalnumberofcrosspoints is2kN+k(N/n)2,or2000crosspoints."
2325,"Thisis5percentofthe
numberofcrosspoints inasingle-stage switch(200x200=40,000)."
2326,"Themultistage switchinExample 8.3hasonedrawback-blocking duringperiods
ofheavytraffic:Thewholeideaofmultistage switching istosharethecrosspoints in
themiddle-stage crossbars."
2327,"Sharingcancausealackofavailability iftheresources are
limitedandall userswantaconnection atthesametime.Blocking referstotimeswhen
oneinputcannotbeconnected toanoutputbecausethereisnopathavailable between
them-all thepossibleintermediate switches areoccupied."
2328,"Inasingle-stage switch,blocking doesnotoccurbecauseeverycombination of
inputandoutputhasitsowncrosspoint; thereisalwaysapath.(Casesinwhichtwo
inputsaretryingtocontactthesameoutputdonotcount.Thatpathisnotblocked; the
outputismerelybusy.)Inthemultistage switchdescribed inExample 8.3,however,
only4ofthefirst20inputscanusetheswitchatatime,only4ofthesecond 20 inputs
canusetheswitchatatime,andsoon.Thesmallnumberofcrossbars atthemiddle
stagecreatesblocking."
2329,"Inlargesystems, suchasthosehaving10,000inputsandoutputs,thenumberof
stagescanbeincreased tocutdownonthenumberofcrosspoints required."
2330,"Asthenum­
berofstagesincreases, however, possibleblocking increases aswell.Manypeoplehave
experienced blocking onpublictelephone systemsinthewakeofanaturaldisaster
whenthecallsbeingmadetocheckonorreassurerelatives faroutnumber theregular
loadofthesystem.230CHAPTER 8SWITCHING
Closinvestigated thecondition ofnonblocking inmultistage switches andcameup
withthefollowing formula."
2331,"Inanonblocking switch,thenumberofmiddle-stage
switches mustbeatleast2n-1.Inotherwords,weneedtohavek22n-1."
2332,"Notethatthenumberofcrosspoints isstillsmallerthanthatinasingle-stage
switch.Nowweneedtominimize thenumberofcrosspoints withafixedNbyusing
theCloscriteria.Wecantakethederivative oftheequation withrespectton(theonly
variable) andfindthevalueofnthatmakestheresultzero.Thisnmustbeequaltoor
greaterthan(N/2)1/2.Inthiscase,thetotalnumberofcrosspoints isgreaterthanorequal
to4N[(2N)112-1].Inotherwords,theminimum numberofcrosspoints according tothe
Closcriteriaisproportional toN3/2."
2333,"According toCloscriterion:
n=(NI2)1/2
k>2n-1
Totalnumberofcrosspoints 24N[(2N)1/2-1]
Example 8.4
Redesign theprevious three-stage, 200x200switch,usingtheCloscriteriawithaminimum
numberofcrosspoints."
2334,"Solution
Weletn=(200/2) 1/2,orn=10.Wecalculate k=2n-1=19.Inthefirststage,wehave200/10,
or20,crossbars, eachwithlOX19crosspoints."
2335,"Inthesecondstage,wehave19crossbars,
eachwith10X10crosspoints."
2336,"Inthethirdstage,wehave20crossbars eachwith19X10
crosspoints."
2337,"Thetotalnumberofcrosspoints is20(10X19)+19(10X10)+20(19XlO)=
9500.Ifweuseasingle-stage switch,weneed200X200=40,000crosspoints."
2338,"Thenumber
ofcrosspoints inthisthree-stage switchis24percentthatofasingle-stage switch.More
pointsareneededthaninExample 8.3(5percent)."
2339,"Theextracrosspoints areneededtoprevent
blocking."
2340,"Amultistage switchthatusestheCloscriteriaandaminimum numberofcrosspoints
stillrequiresahugenumberofcrosspoints."
2341,"Forexample, tohavea100,000input/output
switch,weneedsomething closeto200millioncrosspoints (insteadof10billion).This
meansthatifatelephone company needstoprovideaswitchtoconnect100,000tele­
phonesinacity,itneeds200millioncrosspoints."
2342,"Thenumbercanbereducedifwe
acceptblocking."
2343,"Today,telephone companies usetime-division switching oracombina­
tionofspace-andtime-division switches, aswewillseeshortly."
2344,"Time-Division Switch
Time-division switching usestime-division multiplexing (TDM)insideaswitch.The
mostpopulartechnology iscalledthetime-slot interchange (TSI)."
2345,"Time-Slot Interchange Figure8.19showsasystemconnecting fourinputlinesto
fouroutputlines.Imagine thateachinputlinewantstosenddatatoanoutputline
according tothefollowing pattern:SECTION 8.4STRUCTURE OFASWITCH 231
Figure8.19Time-slot interchange
Time-division switch
TSI ,C{Jnt!ol unit
1~3
2~4
3~1
4~2
Thefigurecombines aTDMmultiplexer, aTDMdemultiplexer, andaTSIconsist­
ingofrandomaccessmemory(RAM)withseveralmemorylocations."
2346,"Thesizeofeach
locationisthesameasthesizeofasingletimeslot.Thenumberoflocations isthesame
asthenumberofinputs(inmostcases,thenumbers ofinputsandoutputsareequal)."
2347,TheRAMfillsupwithincoming datafromtimeslotsintheorderreceived.
2348,"Slotsare
thensentoutinanorderbasedonthedecisions ofacontrolunit."
2349,"Time-andSpace-Division SwitchCombinations
Whenwecompare space-division andtime-division switching, someinteresting facts
emerge.Theadvantage ofspace-division switching isthatitisinstantaneous."
2350,"Itsdisadvan­
tageisthenumberofcrosspoints requiredtomakespace-division switching acceptable in
termsofblocking."
2351,Theadvantage oftime-division switching isthatit needsnocrosspoints.
2352,"Itsdisad­
vantage,inthecaseofTSI,isthatprocessing eachconnection createsdelays.Eachtime
slotmustbestoredbytheRAM,thenretrieved andpassedon."
2353,"Inathirdoption,wecombine space-division andtime-division technologies to
takeadvantage ofthebestofboth.Combining thetworesultsinswitches thatare
optimized bothphysically (thenumberofcrosspoints) andtemporally (theamount
ofdelay).Multistage switches ofthissortcanbedesigned astime-space-time (TST)
switch."
2354,"Figure8.20showsasimpleTSTswitchthatconsistsoftwotimestagesandone
spacestageandhas12inputsand12outputs.Insteadofonetime-division switch,it
dividestheinputsintothreegroups(offourinputseach)anddirectsthemtothreetime­
slotinterchanges."
2355,"Theresultisthattheaveragedelayisone-third ofwhatwouldresult
fromusingonetime-slot interchange tohandleall12inputs."
2356,"Thelaststageisamirrorimageofthefirststage.Themiddlestageisaspace­
divisionswitch(crossbar) thatconnects theTSIgroupstoallowconnectivity between
allpossibleinputandoutputpairs(e.g.,toconnectinput3ofthefirstgrouptooutput7
ofthesecondgroup).232CHAPTER 8SWITCHING
Figure8.20Time-space-time switch
TST
Space
Structure ofPacketSwitches
Aswitchusedinapacket-switched networkhasadifferent structure fromaswitchused
inacircuit-switched network.We cansaythatapacketswitchhasfourcomponents:
inputports,outputports,theroutingprocessor, andtheswitching fabric,asshown
inFigure8.21."
2357,"Figure8.21Packetswitchcomponents
--------------------------------------1
Outputports
Switching fabricRouting
processor
Inputports
1'--__----'
IL _
InputPorts
Aninputportperforms thephysicalanddatalinkfunctions ofthepacketswitch.The
bitsareconstructed fromthereceivedsignal.Thepacketisdecapsulated fromtheframe."
2358,Errorsaredetectedandcorrected.
2359,"Thepacketisnowreadytoberoutedbythenetwork
layer.Inadditiontoaphysicallayerprocessor and adatalinkprocessor, theinputport
hasbuffers(queues) toholdthepacketbeforeitisdirectedtotheswitching fabric."
2360,"Figure8.22showsaschematic diagramofaninputport.SECTION 8.4STRUCTURE OFASWITCH 233
Figure8.22Inputport
Inputport
Physical layer
processorDatalinklayer
processor
OutputPort
Theoutputportperforms thesamefunctions astheinputport,butinthereverseorder."
2361,"Firsttheoutgoing packetsarequeued,thenthepacketisencapsulated inaframe,and
finallythephysical layerfunctions areappliedtotheframetocreatethesignaltobe
sentontheline.Figure8.23showsaschematic diagramofanoutputport."
2362,"Figure8.23Outputport
Outputport
Datalinklayer
processorPhysical layer
processor
ROllting Processor
Theroutingprocessor performs thefunctions ofthenetwork layer.Thedestination
addressisusedtofindtheaddressofthenexthopand,atthesametime,theoutputport
numberfromwhichthepacketissentout.Thisactivityissometimes referredtoas
tablelookupbecausetheroutingprocessor searches theroutingtable.Inthenewer
packetswitches, thisfunctionoftheroutingprocessor isbeingmovedtotheinputports
tofacilitate andexpedite theprocess."
2363,"Switching ""Fabrics
Themostdifficulttaskinapacketswitchistomovethepacketfromtheinputqueueto
theoutputqueue.Thespeedwithwhichthisisdoneaffectsthesizeoftheinput/output
queueandtheoveralldelayinpacketdelivery."
2364,"Inthepast,whenapacketswitchwas
actuallyadedicated computer, thememoryofthecomputer orabuswasusedasthe
switching fabric.Theinputportstoredthepacketinmemory; theoutputportretrieved
thepacketfrommemory."
2365,"Today,packetswitches arespecialized mechanisms thatusea
varietyofswitching fabrics.Webrieflydiscusssomeofthesefabricshere."
2366,"Crossbar Switch The simplest typeofswitching fabricisthecrossbar switch,dis­
cussedintheprevious section."
2367,"BanyanSwitch Amorerealisticapproach thanthecrossbar switchisthebanyan
switch(namedafterthebanyantree).Abanyanswitchisamultistage switchwith234CHAPTER 8SWITCHING
microswitchesateachstage that routethepacketsbasedontheoutputportrepresented as
abinarystring.Forninputsandnoutputs,wehavelog2nstageswithnl2microswitches
ateachstage.Thefirststageroutesthepacketbasedonthehigh-order bitofthebinary
string.Thesecondstageroutesthepacketbasedonthesecondhigh-order bit,andsoon."
2368,"Figure8.24showsabanyanswitchwitheightinputsandeightoutputs.Thenumberof
stagesisIog2(8)=3."
2369,"Figure8.24Abanyanswitch
Leftbit Middlebit Rightbit
O~
l~
~6
~7
Figure8.25showstheoperation."
2370,"Inparta,apackethasarrivedatinputport1and
mustgotooutputport6(110inbinary).Thefirstmicroswitch (A-2)routesthepacket
basedonthefirstbit(1),thesecondmicroswitch (B-4)routesthepacketbasedonthe
secondbit(1),andthethirdmicroswitch(C-4)routesthepacketbasedonthethirdbit(0)."
2371,"Inpartb,apackethasarrivedatinputport5andmustgotooutputport2(010in
binary).Thefirstmicroswitch (A-2)routesthepacketbasedonthefirstbit(0),thesec­
ondmicroswitch (B-2)routesthepacketbasedonthesecondbit(l),andthethird
microswitch (C-2)routesthepacketbasedonthethirdbit(0)."
2372,"Figure8.25Examples ofroutinginabanyanswitch
0 0 0 0
1 1 1 I
2 2 2 2
3 3 3 3
4 4 4 4
5 5 5 5
6 6 6 6
7 7 7 7
a.Input1sending acelltooutput6(110) b.Input5sendingacelltooutput2(010)SECTION 8.6KEYTERMS 235
Figure8.26Batcher-banyan switch
Banyanswitch
O~
l~
6~
7~Batcher
switchTrap
module~2
~3
~--+ro ~""'lr-r~4
~5
~6
~7
Batcher-Banyan Switch Theproblem withthebanyanswitchisthepossibility of
internalcollision evenwhentwopacketsarenotheadingforthesameoutputport.We
cansolvethisproblembysortingthearrivingpacketsbasedontheirdestination port."
2373,"K.E.Batcherdesigned aswitchthatcomesbeforethebanyanswitchandsortsthe
incoming packetsaccording totheirfinaldestinations."
2374,"Thecombination iscalledthe
Batcher-banyan switch.Thesortingswitchuseshardware mergingtechniques, butwe
donotdiscussthedetailshere.Normally, anotherhardware module calledatrapis
addedbetween theBatcherswitchandthebanyanswitch(seeFigure8.26)Thetrap
moduleprevents duplicate packets(packets withthesameoutputdestination) from
passingtothebanyanswitchsimultaneously."
2375,"Onlyonepacketforeachdestination is
allowedateachtick;ifthereismorethanone,theywaitforthenexttick."
2376,"8.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
2377,"Books
Switching isdiscussed inChapter10of[Sta04]andChapters 4 and7of[GW04]."
2378,"Circuit­
switching isfullydiscussed in[BELOO]."
2379,"8.6KEYTERMS
banyanswitch
Batcher-banyan switch
blocking
circuitswitching
circuit-switched network
crossbarswitchcrosspoint
datatransferphase
datagram
datagram network
endsystem
inputport236CHAPTER 8SWITCHING
multistage switch
outputport
packet-switched network
routingprocessor
setupphase
space-division switching
switch
switching
switching fabrictablelookup
teardown phase
time-division switching
time-slot interchange (TSI)
time-space-time (TST)
switch
trap
virtual-circuit identifier (VCI)
virtual-circuit network
8.7SUMMARY
oAswitched networkconsistsofaseriesofinterlinked nodes,calledswitches."
2380,"Tradi­
tionally'threemethodsofswitching havebeenimportant: circuitswitching, packet
switching, andmessageswitching."
2381,"oWecandividetoday'snetworks intothreebroadcategories: circuit-switched networks,
packet-switched networks, andmessage-switched."
2382,"Packet-switched networks canalso
bedividedintotwosubcategories: virtual-circuit networks anddatagram networks
oAcircuit-switched networkismadeofasetofswitchesconnected byphysicallinks,
inwhicheachlinkisdividedintonchannels."
2383,"Circuitswitching takesplaceatthe
physical layer.Incircuitswitching, theresources needtobereserved duringthe
setupphase;theresources remaindedicated fortheentiredurationofdatatransfer
phaseuntiltheteardown phase."
2384,"oInpacketswitching, thereisnoresource allocation forapacket.Thismeansthat
thereisnoreserved bandwidth onthelinks,andthereisnoscheduled processing
timeforeachpacket.Resources areallocated ondemand."
2385,"oInadatagram network, eachpacketistreatedindependently ofallothers.Packetsin
thisapproach arereferredtoasdatagrams."
2386,Therearenosetuporteardown phases.
2387,"oAvirtual-circuit networkisacrossbetweenacircuit-switched networkandadata­
gramnetwork."
2388,Ithassomecharacteristics ofboth.
2389,"oCircuitswitching useseitheroftwotechnologies: thespace-division switchorthe
time-division switch."
2390,"oAswitchinapacket-switched networkhasadifferentstructure fromaswitchusedin
acircuit-switched network.We cansaythatapacketswitchhasfourtypesofcompo­
nents:inputports,outputports,aroutingprocessor, andswitching fabric."
2391,"8.8PRACTICE SET
ReviewQuestions
I.Describe theneedforswitching anddefineaswitch."
2392,2.Listthethreetraditional switching methods.
2393,"Whatarethemostcommon today?SECTION 8.8PRACTICE SET 237
3.Whatarethetwoapproaches topacket-switching?"
2394,4.Compare andcontrastacircuit-switched network andapacket-switched network.
2395,"5.Whatistheroleoftheaddressfieldinapackettraveling through adatagram
network?"
2396,"6.Whatistheroleoftheaddressfieldinapackettraveling throughavirtual-circuit
network?"
2397,7.Compare space-division andtime-division switches.
2398,8.WhatisTSIanditsroleinatime-division switching?
2399,9.Defineblocking inaswitched network.
2400,10.Listfourmajorcomponents ofapacketswitchandtheirfunctions.
2401,"Exercises
11.Apathinadigitalcircuit-switched networkhasadatarateofIMbps.Theexchange
of1000bitsisrequired forthesetupandteardown phases.Thedistance between
twopartiesis5000km.Answerthefollowing questions ifthepropagataion speedis
2X108m:
a.Whatisthetotaldelayif1000bitsofdataareexchanged duringthedatatransfer
phase?"
2402,"b.Whatisthetotaldelayif100,000 bitsofdataareexchanged duringthedata
transferphase?"
2403,"c.Whatisthetotaldelayif1,000,000 bitsofdataareexchanged duringthedata
transferphase?"
2404,"d.Findthedelayper1000bitsofdataforeachoftheabovecasesandcompare
them.Whatcanyouinfer?"
2405,"12.Fiveequal-size datagrams belonging tothesamemessage leaveforthedestina­
tiononeafteranother."
2406,"However, theytravelthrough different pathsasshownin
Table8.1.
Table8.1Exercise 12
Datagram PathLength VisitedSwitches
1 3200Km 1,3,5
2 11,700Km 1,2,5
3 12,200Km 1,2,3,5
4 10,200Km 1,4,5
5 10,700Km 1,4,3,5
Weassumethatthedelayforeachswitch(including waitingandprocessing) is3,
10,20,7,and20msrespectively."
2407,"Assuming thatthepropagation speedis2 x108m,
findtheorderthedatagrams arriveatthedestination andthedelayforeach.Ignore
anyotherdelaysintransmission.238CHAPTER 8SWITCHING
13.Transmission ofinformation inanynetwork involves end-to-end addressing and
sometimes localaddressing (suchasYCI).Table8.2showsthetypesofnetworks
andtheaddressing mechanism usedineachofthem."
2408,"Table8.2Exercise 13
Network Setup DataTransfer Teardown
Circuit-switched End-ta-end End-ta-end
Datagram End-ta-end
Virtual-circuit End-to-end Local End-to-end
Answerthefollowing questions:
a.Whydoesacircuit-switched networkneedend-to-end addressing duringthesetup
andteardown phases?Whyarenoaddresses neededduringthedatatransferphase
forthistypeofnetwork?"
2409,"b.Whydoesadatagram networkneedonlyend-to-end addressing duringthedata
transferphase,butnoaddressing duringthesetupandteardown phases?"
2410,c.Whydoesavirtual-circuit networkneedaddresses duringallthreephases?
2411,"14.Wementioned thattwotypesofnetworks, datagram andvirtual-circuit, needa
routingorswitching tabletofindtheoutputportfromwhichtheinformation
belonging toadestination shouldbesentout,butacircuit-switched network has
noneedforsuchatable.Givethereasonforthisdifference."
2412,"15.Anentryintheswitching tableofavirtual-circuit network isnormally created
duringthesetupphaseanddeletedduringtheteardown phase.Inotherwords,the
entriesinthistypeofnetwork reflectthecurrentconnections, theactivityinthe
network."
2413,"Incontrast, theentriesinaroutingtableofadatagram network donot
dependonthecurrentconnections; theyshowtheconfiguration ofthenetworkand
howanypacketshouldberoutedtoafinaldestination."
2414,"Theentriesmayremain
thesameevenifthereisnoactivityinthenetwork."
2415,"Theroutingtables,however, are
updatediftherearechangesinthenetwork."
2416,"Canyouexplainthereasonforthese
twodifferent characteristics?"
2417,"Canwesaythatavirtual-circuit isaconnection­
orientednetworkandadatagram networkisaconnectionLess networkbecauseofthe
abovecharacteristics?"
2418,"16.Theminimum numberofcolumnsinadatagram networkistwo;theminimum num­
berofcolumns inavirtual-circuit networkisfour.Canyouexplainthereason?Isthe
difference relatedtothetypeofaddresses carriedinthepacketsofeachnetwork?"
2419,17.Figure8.27showsaswitch(router)inadatagram network.
2420,"Findtheoutputportforpacketswiththefollowing destination addresses:
Packet1:7176
Packet2:1233
Packet3:8766
Packet4:9144
18.Figure8.28showsaswitchinavirtualcircuitnetwork.SECTION 8.8PRACTICE SET 239
Figure8.27Exercise 17
Destination Output
address port
1233 3
1456 2
3255 1
4470 4
7176 2
8766 3
9144 24
2 3
Figure8.28Exercise 18
Incoming Outgoing
Port VCI Port VCI
114 322
271441
292 145
358 243
378 270
456 3 1124
FindtheoutputportandtheoutputVCIforpacketswiththefollowing inputport
andinputVCIaddresses:
Packet1:3,78
Packet2:2,92
Packet3:4,56
Packet4:2,71
19.Answerthefollowing questions:
a.Canaroutingtableinadatagram networkhavetwoentrieswiththesamedestina­
tionaddress?"
2421,Explain.
2422,"b.Canaswitching tableinavirtual-circuit networkhavetwoentrieswiththesame
inputportnumber?"
2423,Withthesameoutputportnumber?
2424,"Withthesameincoming
VCls?WiththesameoutgoingVCls?Withthesameincoming values(port,VCI)?"
2425,"Withthesameoutgoing values(port,VCI)?"
2426,"20.Itisobviousthatarouteroraswitchneedstodosearching tofindinformation in
thecorresponding table.Thesearching inaroutingtableforadatagram networkis
basedonthedestination address; thesearching inaswitching tableinavirtual­
circuitnetworkisbasedonthecombination ofincoming portandincoming VCI."
2427,"Explainthereasonanddefinehowthesetablesmustbeordered(sorted)basedon
thesevalues."
2428,2].Consider annXkcrossbarswitchwithninputsandkoutputs.
2429,a.Canwesaythatswitchactsasamultiplexer ifn>k?
2430,"b.Canwesaythatswitchactsasademultiplexer ifn<k?240CHAPTER 8SWITCHING
22.Weneedathree-stage space-division switchwithN=100.Weuse10crossbars at
thefirstandthirdstagesand 4crossbars atthemiddlestage."
2431,a.Drawtheconfiguration diagram.
2432,b.Calculate thetotalnumberofcrosspoints.
2433,c.Findthepossiblenumberofsimultaneous connections.
2434,"d.Findthepossiblenumberofsimultaneous connections ifweuseonesinglecross­
bar(100x100)."
2435,"e.Findtheblocking factor,theratioofthenumberofconnections incandind."
2436,23.RepeatExercise 22ifweuse6crossbars atthemiddlestage.
2437,24.Redesign theconfiguration ofExercise 22usingtheCloscriteria.
2438,"25.Weneedtohaveaspace-division switchwith1000inputsandoutputs.Whatisthe
totalnumberofcrosspoints ineachofthefollowing cases?"
2439,a.Usingonesinglecrossbar.
2440,"b.Usingamulti-stage switchbasedontheCloscriteria
26.Weneedathree-stage time-space-time switchwithN=100.Weuse10TSIsatthe
firstandthirdstagesand 4crossbars atthemiddlestage."
2441,a.Drawtheconfiguration diagram.
2442,b.Calculate thetotalnumberofcrosspoints.
2443,"c.Calculate thetotalnumberofmemorylocations weneedfortheTSIs.CHAPTER 9
UsingTelephone andCableNetworks
forDataTransmission
Telephone networks wereoriginally createdtoprovidevoicecommunication."
2444,"Theneed
tocommunicate digitaldataresultedintheinvention ofthedial-upmodem.Withthe
adventoftheInternetcametheneedforhigh-speed downloading anduploading; the
modemwasjusttooslow.Thetelephone companies addedanewtechnology, thedigital
subscriber line(DSL).Although dial-upmodems stillexistinmanyplacesalloverthe
world,DSLprovides muchfasteraccesstotheInternetthroughthetelephone network."
2445,"Inthischapter,wefirstdiscussthebasicstructure ofthetelephone network."
2446,"Wethensee
howdial-upmodems andDSLtechnology usethesenetworks toaccesstheInternet."
2447,"Cablenetworks wereoriginally createdtoprovideaccesstoTVprograms forthose
subscribers whohadnoreception becauseofnaturalobstructions suchasmountains."
2448,"Laterthecablenetworkbecamepopularwithpeoplewhojustwantedabettersignal.In
addition, cablenetworks enabledaccesstoremotebroadcasting stationsviamicrowave
connections."
2449,"CableTValsofoundagoodmarketinInternetaccessprovision using
someofthechannels originally designed forvideo.Afterdiscussing thebasicstructure
ofcablenetworks, wediscusshowcablemodems canprovideahigh-speed connection
totheInternet."
2450,"9.1TELEPHONE NETWORK
Telephone networks usecircuitswitching."
2451,"Thetelephone network haditsbeginnings
inthelate1800s.Theentirenetwork, whichisreferredtoastheplainoldtelephone
system(POTS), wasoriginally ananalogsystemusinganalogsignalstotransmitvoice."
2452,"Withtheadventofthecomputer era,thenetwork, inthe1980s,begantocarrydatain
additiontovoice.Duringthelastdecade,thetelephone network hasundergone many
technical changes."
2453,Thenetworkisnowdigitalaswellasanalog.
2454,"MajorComponents
Thetelephone network, asshowninFigure9.1,ismadeofthreemajorcomponents:
localloops,trunks,andswitching offices.Thetelephone networkhasseverallevelsof
switching officessuchasendoffices,tandemoffices,andregionaloffices."
2455,"241242CHAPTER 9USING1ELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.1Atelephone system
Trunk
Tandem
officesTrunk
Regional offices
LocalLoops
Onecomponent ofthetelephone networkisthelocalloop,atwisted-pair cablethatcon­
nectsthesubscriber telephone tothenearestendofficeorlocalcentraloffice.Thelocal
loop,whenusedforvoice,hasabandwidth of4000Hz(4kHz).Itisinteresting toexamine
thetelephone numberassociated witheachlocalloop.Thefirstthreedigitsofalocaltele­
phonenumberdefinetheoffice,andthenextfourdigitsdefinethelocalloopnumber."
2456,"Trunks
Trunksaretransmission mediathathandlethecommunication between offices.A
trunknormally handleshundreds orthousands ofconnections throughmultiplexing."
2457,Transmission isusuallythroughopticalfibersorsatellitelinks.
2458,"Switching Offices
Toavoidhavingapermanent physical linkbetween anytwosubscribers, thetelephone
company hasswitches locatedinaswitching office.Aswitchconnects severallocal
loopsortrunksandallowsaconnection between different subscribers."
2459,"LATAs
Afterthedivestiture of1984(seeAppendix E),theUnitedStateswasdividedintomore
than200local-access transport areas(LATAs)."
2460,"ThenumberofLATAshasincreased
sincethen.ALATAcanbeasmallorlargemetropolitan area.Asmallstatemayhaveone
singleLATA;alargestatemayhaveseveralLATAs.ALATAboundary mayoverlapthe
boundary ofastate;partofaLATAcanbeinonestate,partinanotherstate."
2461,"Intra-LATA Services
Theservicesofferedbythecommon carriers (telephone companies) insideaLATAare
calledintra-LATA services."
2462,"Thecarrierthathandlestheseservices iscalledalocal
exchange carrier(LEC).BeforetheTelecommunications Actof1996(seeAppendix E),
intra-LATA servicesweregrantedtoonesinglecarrier.Thiswasamonopoly."
2463,"After1996,
morethanonecarriercouldprovideservicesinsideaLATA.Thecarrierthatprovided ser­
vicesbefore1996ownsthecablingsystem(localloops)andiscalledtheincumbent local
exchange carrier(ILEC)."
2464,"Thenewcarriers thatcanprovide services arecalled
competitive localexchange carriers(CLECs)."
2465,"Toavoidthecostsofnewcabling, itSECTION 9.1TELEPHONE NETWORK 243
wasagreedthattheILECswouldcontinue toprovidethemainservices, andtheCLECs
wouldprovideotherservicessuchasmobiletelephone service,tollcallsinsideaLATA,
andsoon.Figure9.2showsaLATAandswitching offices."
2466,Intra-LATA servicesareprovided bylocalexchange carriers.
2467,"Since1996,therearetwo
typesofLECs: incumbent localexchange carriersandcompetitive localexchange carriers."
2468,"Figure9.2Switching officesinaLATA
Tandem (toll)offices
Communication insideaLATAishandledbyendswitches andtandemswitches."
2469,"A
callthatcanbecompleted byusingonlyendofficesisconsidered toll-free."
2470,"Acallthat
hastogothroughatandemoffice(intra-LATA tolloffice)ischarged."
2471,"Inter-LATA Services
Theservicesbetween LATAsarehandledbyinterexchange carriers (IXCs).These
carriers,sometimes calledlong-distance companies, providecommunication services
between twocustomers indifferent LATAs.Aftertheactof1996(seeAppendix E),
theseservicescanbeprovided byanycarrier,including thoseinvolved inintra-LATA
services."
2472,"Thefieldiswideopen.Carriersproviding inter-LATA servicesincludeAT&T,
MCI,WorldCom, Sprint,andVerizon."
2473,"TheIXCsarelong-distance carriersthatprovidegeneraldatacommunications ser­
vicesincluding telephone service.Atelephone callgoingthroughanIXCisnormally
digitized, withthecarriersusingseveraltypesofnetworks toprovideservice."
2474,"PointsofPresence
Aswediscussed, intra-LATA servicescanbeprovided byseveralLECs(oneILECand
possibly morethanoneCLEC).Wealsosaidthatinter-LATA servicescanbeprovided
byseveralIXCs.Howdothesecarriersinteractwithoneanother?"
2475,"Theansweris,viaa
switching officecalledapointofpresence (POP).EachIXCthatwantstoprovideinter­
LATAservicesinaLATAmusthaveaPOPinthatLATA.TheLECsthatprovideservices
insidetheLATAmustprovideconnections sothateverysubscriber canhaveaccesstoall
POPs.Figure9.3illustrates theconcept."
2476,"Asubscriber whoneedstomakeaconnection withanothersubscriber isconnected
firsttoanendswitchandthen,eitherdirectlyorthroughatandemswitch,toaPOP.The244CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.3Pointofpresences (POPs)
LATA
callnowgoesfromthePOPofanIXC(theonethesubscriber haschosen)inthesource
LATAtothePOPofthesameIXCinthedestination LATA.Thecallispassedthrough
thetollofficeoftheIXCandiscarriedthroughthenetworkprovided bytheIXC."
2477,"Signaling
Thetelephone network, atitsbeginning, usedacircuit-switched networkwithdedicated
links(multiplexing hadnotyetbeeninvented) totransfervoicecommunication."
2478,"Aswe
sawinChapter8,acircuit-switched network needsthesetupandteardown phasesto
establish andterminate pathsbetweenthetwocommunicating parties.Inthebeginning,
thistaskwasperformed byhumanoperators."
2479,"Theoperator roomwasacentertowhich
allsubscribers wereconnected."
2480,"Asubscriber whowishedtotalktoanothersubscriber
pickedupthereceiver(off-hook) andrangtheoperator."
2481,"Theoperator, afterlistening to
thecallerandgettingtheidentifier ofthecalledparty,connected thetwobyusingawire
withtwoplugsinsertedintothecorresponding twojacks.Adedicated circuitwascreated
inthisway.Oneoftheparties,aftertheconversation ended,informed theoperator to
disconnect thecircuit.Thistypeofsignaling iscalledin-bandsignaling becausethesame
circuitcanbeusedforbothsignaling andvoicecommunication."
2482,"Later,thesignaling systembecameautomatic."
2483,"Rotarytelephones wereinventedthat
sentadigitalsignaldefiningeachdigitinamultidigit telephone number.Theswitchesin
thetelephone companies usedthedigitalsignalstocreateaconnection betweenthecaller
andthe called parties.Bothin-bandandout-of-band signaling wereused.Inin-band
signaling, the4-kHzvoicechannelwasalsousedtoprovidesignaling."
2484,"Inout-of-band
signaling, aportionofthevoicechannelbandwidth wasusedforsignaling; thevoice
bandwidth andthesignaling bandwidth wereseparate.SECTION 9.1TELEPHONE NETWORK 245
Astelephone networks evolvedintoacomplex network, thefunctionality ofthesig-
nalingsystemincreased."
2485,"Thesignaling systemwasrequiredtoperformothertaskssuchas
1.Providing dialtone,ringtone,andbusytone
2.Transferring telephone numbers betweenoffices
3.Maintaining andmonitoring thecall
4.Keepingbillinginformation
5.Maintaining andmonitoring thestatusofthetelephone networkequipment
6.Providing otherfunctions suchascallerID,voicemail,andsoon
Thesecomplex tasksresultedintheprovision ofaseparatenetworkforsignaling."
2486,"This
meansthatatelephone networktodaycanbethoughtofastwonetworks: asignaling
networkandadatatransfernetwork."
2487,"Thetasksofdatatransferandsignaling areseparated inmoderntelephone networks:
datatransferisdonebyonenetwork, signaling byanother."
2488,"However, weneedtoemphasize apointhere.Although thetwonetworks areseparate,
thisdoesnotmeanthatthereareseparatephysical linkseverywhere; thetwonetworks
mayuseseparatechannels ofthesamelinkinpartsofthesystem."
2489,"DataTransfer Network
Thedatatransfernetworkthatcancarrymultimedia information todayis,forthemost
part,acircuit-switched network, although itcanalsobeapacket-switched network."
2490,"This
networkfollowsthesametypeofprotocols andmodelasothernetworks discussed in
thisbook."
2491,"SignalingNetwork
Thesignaling network, whichisourmainconcerninthissection,isapacket-switched
networkinvolving thelayerssimilartothoseintheOSImodelorInternetmodel,dis­
cussedinChapter2.Thenatureofsignaling makesitmoresuitedtoapacket-switching
networkwithdifferentlayers.Forexample, theinformation neededtoconveyatelephone
addresscaneasilybeencapsulated inapacketwithalltheerrorcontrolandaddressing
information."
2492,"Figure9.4showsasimplified situation ofatelephone networkinwhichthe
twonetworks areseparated."
2493,"Theusertelephone orcomputer isconnected tothesignalpoints(SPs).Thelink
between thetelephone setandSPiscommon forthetwonetworks."
2494,"Thesignaling net­
workusesnodescalledsignaltransport ports(STPs)thatreceiveandforwardsignaling
messages."
2495,"Thesignaling networkalsoincludesaservicecontrolpoint(SCP)thatcon­
trolsthewholeoperation ofthenetwork."
2496,"Othersystemssuchasadatabase centermay
beincluded toprovidestoredinformation abouttheentiresignaling network."
2497,"Signaling SystemSeven (5S7)
Theprotocolthatisusedinthesignaling networkiscalledSignaling SystemSeven(SS7)."
2498,"Itisverysimilartothefive-layer InternetmodelwesawinChapter2,butthelayershave
differentnames,asshowninFigure9.5.246 CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.4Datatransferandsignaling networks
SP:Signalpoint
STP:SignaltransferpointDatabase
Figure9.5LayersinSS7Signaling network
Datatransfernetwork
Upperlayers,',T(;~ __
Network layer
Datalinklayer
Physical layerTUP
SCCP
MTPlevel3
MTPIevel2
MTPlevell~SNP,I,
r,;"":~-MTP:Message transferpart
SCCP:Signaling connection controlpoint
TeAP:Transaction capabilities application port
TUP:Telephone userport
ISUP:ISDNuserport
Physical Layer:MTPLevel1ThephysicallayerinSS7calledmessage transport
part(MTP)levelIusesseveralphysicallayerspecifications suchasT-l(1.544Mbps)
andDCa(64kbps)."
2499,"DataLinkLayer:MTPLevel2TheMTPlevel2layerprovides typicaldatalink
layerservicessuchaspacketizing, usingsourceanddestination addressinthepacket
header,andCRCforerrorchecking."
2500,"Network Layer:MTPLevel3TheMTPlevel3layerprovidesend-to-end connectivity
byusingthedatagram approach toswitching."
2501,"Routersandswitchesroutethesignalpackets
fromthesourcetothedestination."
2502,"Transport Layer:SCCPThesignaling connection controlpoint(SCCP)isused
forspecialservicessuchasSaO-callprocessing."
2503,"UpperLayers: TUP, TCAP,andISUPTherearethreeprotocols attheupperlayers."
2504,"Telephone userport(TUP)isresponsible forsettingupvoicecalls.ItreceivesthedialedSECTION 9.1TELEPHONE NETWORK 247
digitsandroutesthecalls.Transaction capabilities application port(TCAP)provides
remotecallsthatletanapplication programonacomputer invokeaprocedure onanother
computer."
2505,"ISDNuserport(ISUP)canreplaceTUPtoprovide services similartothose
ofanISDNnetwork."
2506,"Services Provided byTelephone Networks
Telephone companies providetwotypesofservices: analoganddigital."
2507,"AnalogServices
Inthebeginning, telephone companies provided theirsubscribers withanalogservices."
2508,"Theseservicesstillcontinue today.Wecancategorize theseservicesaseitheranalog
switched services oranalogleasedservices."
2509,"AnalogSwitched Services Thisisthefamiliardial-upservicemostoftenencountered
whenahometelephone isused.Thesignalonalocalloopisanalog,andthebandwidth is
usuallybetween0and4000Hz.Alocalcallserviceisnormally provided foraflatmonthly
rate,althoughinsomeLATAs,thecarrierchargesforeachcallorasetofcalls.Therationale
foranonflat-ratechargeistoprovidecheaperserviceforthosecustomers whodonot
makemanycalls.Atollcallcanbeintra-LATA orinter-LATA."
2510,"IftheLATAisgeographi­
callylarge,acallmaygothroughatandemoffice(tolloffice)andthesubscriber willpaya
feeforthecall.Theinter-LATA callsarelong-distance callsandarechargedassuch."
2511,"Another serviceiscalled800service.Ifasubscriber (normally anorganization)
needstoprovidefreeconnections forothersubscribers (normally customers), itcan
requestthe800service.Inthiscase,thecallisfreeforthecaller,butitispaidbythe
callee.Anorganization usesthisservicetoencourage customers tocall.Therateisless
expensive thanthatforanormallong-distance call."
2512,"Thewide-area telephone service(WATS) istheopposite ofthe800service.The
latterareinboundcallspaidbytheorganization; theformerareoutbound callspaidby
theorganization."
2513,"Thisserviceisalessexpensive alternative toregulartollcalls;
chargesarebasedonthenumberofcalls.Theservicecanbespecified asoutbound
callstothesamestate,toseveralstates,ortothewholecountry, withratescharged
accordingly."
2514,"The900services arelikethe800service,inthattheyareinbound callstoasub­
scriber.However, unlikethe800service,thecallispaidbythecallerandisnormally
muchmoreexpensive thananormallong-distance call.Thereasonisthatthecarrier
chargestwofees:thefirstisthelong-distance toll,andthesecondisthefeepaidtothe
calleeforeachcall."
2515,"AnalogLeasedService Ananalogleasedserviceofferscustomers theopportunity
toleasealine,sometimes calledadedicated line,thatispermanently connected to
anothercustomer."
2516,"Although theconnection stillpassesthroughtheswitches inthetele­
phonenetwork, subscribers experience itasasinglelinebecausetheswitchisalways
closed;nodialingisneeded."
2517,"DigitalServices
Recently telephone companies beganofferingdigitalservicestotheirsubscribers."
2518,"Digital
servicesarelesssensitive thananalogservicestonoiseandotherformsofinterference.248CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Thetwomostcommon digitalservicesareswitched/56 serviceanddigitaldataservice
(DDS).Wealreadydiscussed high-speed digitalservices-the Tlines-in Chapter6.We
discusstheotherservicesinthischapter."
2519,"Switched/56 Service Switched/56 serviceisthedigitalversionofananalogswitched
line.Itisaswitched digitalservicethatallowsdataratesofupto56kbps.Tocommuni­
catethroughthisservice,bothpartiesmustsubscribe."
2520,"Acallerwithnormaltelephone
servicecannotconnecttoatelephone orcomputer withswitched/56 serviceevenifthe
callerisusingamodem.Onthewhole,digitalandanalogservicesrepresent twocom­
pletelydifferent domains forthetelephone companies."
2521,"Becausethelineinaswitched!
56serviceisalreadydigital,subscribers donotneedmodems totransmitdigitaldata."
2522,"However, theydoneedanotherdevicecalledadigitalserviceunit(DSU)."
2523,"DigitalDataService Digitaldataservice(DDS)isthedigitalversionofananalog
leasedline;itisadigitalleasedlinewithamaximum datarateof64kbps."
2524,"9.2DIAL~UP MODEMS
Traditional telephone linescancarryfrequencies between 300and3300Hz,giving
themabandwidth of3000Hz.Allthisrangeisusedfortransmitting voice,wherea
greatdealofinterference anddistortion canbeaccepted withoutlossofintelligibility."
2525,"Aswehaveseen,however, datasignalsrequireahigherdegreeofaccuracy toensure
integrity."
2526,"Forsafety'ssake,therefore, theedgesofthisrangearenotusedfordatacom­
munications."
2527,"Ingeneral,wecansaythatthesignalbandwidth mustbesmallerthanthe
cablebandwidth."
2528,"Theeffective bandwidth ofatelephone linebeingusedfordatatrans­
missionis2400Hz,covering therangefrom600to3000Hz.Notethattodaysome
telephone linesarecapableofhandling greaterbandwidth thantraditional lines.How­
ever,modemdesignisstillbasedontraditional capability (seeFigure9.6)."
2529,"Figure9.6Telephone linebandwidth
Usedforvoice
3006002400Hzfordata3300
I I I
I I"" I
I3000HzforvoiceI
I."
2530,"..I
I I
Thetermmodemisacomposite wordthatreferstothetwofunctional entitiesthat
makeupthedevice:asignalmodulator andasignaldemodulator."
2531,"Amodulator creates
abandpass analogsignalfrombinarydata.Ademodulator recovers thebinarydata
fromthemodulated signal."
2532,"Modemstandsformodulator/demodulator.SECTION 9.2DIAL-UP MODEMS 249
Figure9.7showstherelationship ofmodems toacommunications linleThecomputer
ontheleftsendsadigitalsignaltothemodulator portionofthemodem; thedataaresentas
ananalogsignalonthetelephone lines.Themodemontherightreceivestheanalogsignal,
demodulates itthroughitsdemodulator, anddeliversdatatothecomputer ontheright.The
communication canbebidirectional, whichmeansthecomputer ontherightcansimulta­
neouslysenddatatothecomputer ontheleft,usingthesamemodulation/demodulation
processes."
2533,"Figure9.7Modulation/demodulation
TELCO: Telephone company
A
ModemStandardsc=JnB
r<
........."
2534,"Today,manyofthemostpopularmodems available arebasedontheV-series standards
published bytheITU-T.Wediscussjustthemostrecentseries."
2535,"V.32andV.32bis
TheV.32modemusesacombined modulation andencoding technique calledtrellis­
codedmodulation."
2536,"Trellisisessentially QAMplusaredundant bit.Thedatastreamis
dividedinto4-bitsections."
2537,"Insteadofaquadbit(4-bitpattern), however, apentabit (5-bit
pattern) istransmitted."
2538,"Thevalueoftheextrabitiscalculated fromthevaluesofthe
databits.Theextrabitisusedforerrordetection."
2539,"TheY.32callsfor32-QAM withabaudrateof2400.Because only4bitsofeach
pentabit represent data,theresulting datarateis4 x2400=9600bps.Theconstellation
diagram andbandwidth areshowninFigure9.8.
TheV.32bis modemwasthefirstoftheITU-Tstandards tosupport 14,400-bps
transmission."
2540,"TheY.32bisuses128-QAM transmission (7bits/baud withIbitforerror
control) atarateof2400baud(2400x 6=14,400bps)."
2541,"Anadditional enhancement provided byY.32bisistheinclusion ofanautomatic
fall-back andfall-forward featurethatenablesthemodemtoadjustitsspeedupwardor
downward depending onthequalityofthelineorsignal.Theconstellation diagram and
bandwidth arealsoshowninFigure9.8.
V.34bis
TheV.34bismodemprovides abitrateof28,800witha960-point constellation anda
bitrateof33,600bpswitha1664-point constellation.250CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.8TheV.32andV.32bisconstellation andbandwidth
90Full-duplex 2400-baud01'• •9600-bps 2-wire
• • • •• • • •
180•·i·•0600 1800 3000• • • •••1••• •• I•270
a.Constellation andbandwidth forV.32
90
•l•• • • ••• ••• • • • ••••••••• • • • • •••••••••••• • • • • • • •••••••••••180• •••••••0••••••••••• ••••••••••••••• ••••••••••••••••••••• •270Full-duplex."
2542,"2400-baud
14,400-bps 4-wire
600 1800 3000
1--:90b.Constellation andbandwidth forV.32bis
Traditional modems haveadataratelimitation of33.6kbps,asdetermined bythe
Shannon capacity(seeChapter3).However, V.90modems withabitrateof56,000bps
areavailable; thesearecalled56Kmodems."
2543,"Thesemodems maybeusedonlyifone
partyisusingdigitalsignaling (suchasthroughanInternetprovider)."
2544,"Theyareasym­
metricinthatthedownloading rate(flowofdatafromtheInternetserviceprovider to
thePC)isamaximum of56kbps,whiletheuploading rate(flowofdatafromthePCto
theInternetprovider) canbeamaximum of33.6kbps.Dothesemodems violatethe
Shannon capacity principle?"
2545,"No,inthedownstream direction, theSNRratioishigher
becausethereisnoquantization error(seeFigure9.9)."
2546,"Inuploading, theanalogsignalmuststillbesampled attheswitching station.In
thisdirection, quantization noise(aswesawinChapter4)isintroduced intothesignal,
whichreducestheSNRratioandlimitstherateto33.6kbps."
2547,"However, thereisnosampling inthedownloading."
2548,"Thesignalisnotaffectedby
quantization noiseandnotsubjecttotheShannoncapacitylimitation."
2549,"Themaximum data
rateintheuploading direction isstill33.6kbps,butthedatarateinthedownloading
direction isnow56kbps."
2550,"Onemaywonderhowwearriveatthe56-kbpsfigure.Thetelephone companies
sample8000timespersecondwith8bitspersample.Oneofthebitsineachsampleis
usedforcontrolpurposes, whichmeanseachsampleis7bits.Therateistherefore
8000x7,or56,000bpsor56kbps.SECTION 9.3DIGITAL SUBSCRIBER LINE 251
Figure9.9Uploading anddownloading in56Kmodems
-=tP-~~Quantization noiselimits
thedatarate1--------1
1PCM I
1--.- I1 I
Uploading,
quantization noiseISP
server
1--------1
1Inverse I
1PCM I1 I-=tP-
~ -=tP-~
""'--~~ ~
ISP
server
Downloading,
noquantization noise
1':92
Thestandard aboveV90iscalled ~92.Thesemodems canadjusttheirspeed,andif
thenoiseallows,theycanuploaddataattherateof48kbps.Thedownloading rateis
still56kbps.Themodemhasadditional features."
2551,"Forexample, themodemcaninter­
rupttheInternetconnection whenthereisanincoming callifthelinehascall-waiting
service."
2552,"9.3DIGITAL SUBSCRIBER LINE
Aftertraditional modemsreachedtheirpeakdatarate,telephone companies developed
anothertechnology, DSL,toprovidehigher-speed accesstotheInternet.Digitalsub­
scriberline(DSL)technology isoneofthemostpromising forsupporting high-speed
digitalcommunication overtheexistinglocalloops.DSLtechnology isasetoftech­
nologies, eachdiffering inthefirstletter(ADSL,VDSL,HDSL,andSDSL).Thesetis
oftenreferredtoasxDSL,wherexcanbereplacedbyA,V,H,orS.252 CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
ADSL
Thefirsttechnology inthesetisasymmetric DSL(ADSL)."
2553,"ADSL,likea56Kmodem,
provides higherspeed(bitrate)inthedownstream direction (fromtheInternettothe
resident) thanintheupstream direction (fromtheresidenttotheInternet)."
2554,"Thatisthe
reasonitiscalledasymmetric."
2555,"Unlike theasymmetry in56Kmodems, thedesigners of
ADSLspecifically dividedtheavailable bandwidth ofthelocalloopunevenly forthe
residential customer."
2556,"Theserviceisnotsuitableforbusiness customers whoneeda
largebandwidth inbothdirections."
2557,"ADSLisanasymmetric communication technology designed forresidential users;
itisnotsuitableforbusinesses."
2558,"UsingExisting LocalLoops
Oneinteresting pointisthatADSLusestheexistinglocalloops.ButhowdoesADSL
reachadataratethatwasneverachieved withtraditional modems?"
2559,"Theansweristhatthe
twisted-pair localloopisactuallycapableofhandling bandwidths upto1.1MHz,butthe
filterinstalled attheendofficeofthetelephone company whereeachlocallooptermi­
nateslimitsthebandwidth to4kHz(sufficient forvoicecommunication)."
2560,"Ifthefilteris
removed, however, theentire1.1MHzisavailable fordataandvoicecommunications."
2561,"Theexistinglocalloopscanhandlebandwidths upto1.1MHz.
Adaptive Technology
Unfortunately, 1.1MHzisjustthetheoretical bandwidth ofthelocalloop.Factorssuch
asthedistancebetween theresidence andtheswitching office,thesizeofthecable,the
signaling used,andsoonaffectthebandwidth."
2562,"Thedesigners ofADSLtechnology
wereawareofthisproblemandusedanadaptivetechnology thatteststhecondition and
bandwidth availability ofthelinebeforesettlingonadatarate.ThedatarateofADSL
isnotfixed;itchangesbasedonthecondition andtypeofthelocalloopcable."
2563,ADSLisanadaptive technology.
2564,"Thesystemusesadatarate
basedonthecondition ofthelocalloopline."
2565,"DiscreteMultitone Technique
Themodulation technique thathasbecomestandard forADSLiscalledthediscrete
multitone technique (DMT)whichcombines QAMandFDM.Thereisnosetway
thatthebandwidth ofasystemisdivided.Eachsystemcandecideonitsbandwidth
division."
2566,"Typically, anavailable bandwidth of1.104MHzisdividedinto256channels."
2567,"Eachchannelusesabandwidth of4.312kHz,asshowninFigure9.10.Figure9.11shows
howthebandwidth canbedividedintothefollowing:
oVoice.Channel0isreserved forvoicecommunication."
2568,"oIdle.Channels 1to5arenotusedandprovideagapbetween voiceanddata
communication.SECTION 9.3DIGITAL SUBSCRIBER LINE 253
Figure9.10Discrete multitone technique
Upstream
bits
Downstream
bits
Figure9.11Bandwidth divisioninADSL
Voice Upstream Downstream
""""'\ / I''"" ,;d
Not""-
used
o426 108 138 1104 kHz
oUpstream dataandcontrol."
2569,"Channels 6to30(25channels) areusedforupstream
datatransferandcontrol.Onechannelisforcontrol,and24channels arefordata
transfer.Ifthereare24channels, eachusing4kHz(outof4.312kHzavailable)
withQAMmodulation, wehave24x4000x15,ora1.44-Mbps bandwidth, in
theupstream direction."
2570,"However, thedatarateisnormally below500kbpsbecause
someofthecarriersaredeletedatfrequencies wherethenoiselevelislarge.Inother
words,someofchannels maybeunused."
2571,oDownstream dataandcontrol.
2572,"Channels 31to255(225channels) areusedfor
downstream datatransferandcontrol.Onechannelisforcontrol,and224channels
arefordata.Ifthereare224channels, wecanachieveupto224x4000x15,or
13.4Mbps.However, thedatarateisnormally below8Mbpsbecausesomeofthe
carriersaredeletedatfrequencies wherethenoiselevelislarge.Inotherwords,
someofchannels maybeunused."
2573,"Customer Site:ADSLModem
Figure9.12showsanADSLmodeminstalled atacustomer's site.Thelocalloop
connects toasplitterwhichseparates voiceanddatacommunications."
2574,"TheADSL254CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
modemmodulates anddemodulates thedata,usingDMT,andcreatesdownstream
andupstream channels."
2575,"Figure9.12ADSLmodem
Splitter
LocalloopVoice
Data
ADSLmodem
Notethatthesplitterneedstobeinstalled atthecustomer's premises, normally bya
technician fromthetelephone company."
2576,"Thevoicelinecanusetheexistingtelephone
wiringinthehouse,butthedatalineneedstobeinstalled byaprofessional."
2577,"Allthis
makestheADSLlineexpensive."
2578,"Wewillseethatthereisanalternative technology,
Universal ADSL(orADSLLite)."
2579,"Telephone Company Site:DSLAM
Atthetelephone company site,thesituation isdifferent."
2580,"InsteadofanADSLmodem,a
devicecalledadigitalsubscriber lineaccessmultiplexer (DSLAM) isinstalled that
functions similarly."
2581,"Inaddition, itpacketizes thedatatobesenttotheInternet(ISP
server).Figure9.13showstheconfiguration."
2582,"Figure9.13DSLAM
Splitter
Totelephone ~ V_o_ic_e__-+--i
networkLow-pass
filter
Localloop
High-pass
filterPacketized
Tothe~__~d~at~a_---i~d~Internet UIIM---I--""""
"",_,"",!"""",,_..u."
2583,"ADSLLite
Theinstallation ofsplittersattheborderofthepremises andthenewwiringforthedata
linecanbeexpensive andimpractical enoughtodissuade mostsubscribers."
2584,"Anewver­
sionofADSLtechnology calledADSLLite(orUniversal ADSLorsplitterless ADSL)is
available forthesesubscribers."
2585,"Thistechnology allowsanASDLLitemodemtobe
pluggeddirectlyintoatelephone jackandconnected tothecomputer."
2586,"Thesplittingis
doneatthetelephone company."
2587,"ADSLLiteuses256DMTcarrierswith8-bitmodulationSECTION 9.3DIGITAL SUBSCRIBER LINE 255
(insteadof15-bit).However, someofthecarriersmaynotbeavailable becauseerrors
createdbythevoicesignalmightminglewiththem.Itcanprovideamaximum down­
streamdatarateof1.5Mbpsandanupstream datarateof512kbps."
2588,"HDSL
Thehigh-bit-rate digitalsubscriber line(HDSL) wasdesigned asanalternative to
theT-lline(1.544Mbps).TheT-1lineusesalternate markinversion (AMI)encoding,
whichisverysusceptible toattenuation athighfrequencies."
2589,"Thislimitsthelengthof
aT-llineto3200ft(1km).Forlongerdistances, arepeaterisnecessary, whichmeans
increased costs."
2590,"HDSLuses2B1Qencoding (seeChapter4),whichislesssusceptible toattenuation."
2591,"Adatarateof1.544Mbps(sometimes upto2Mbps)canbeachieved withoutrepeaters
uptoadistanceof12,000ft(3.86km).HDSLusestwotwistedpairs(onepairforeach
direction) toachievefull-duplex transmission."
2592,"SDSL
Thesymmetric digitalsubscriber line(SDSL)isaonetwisted-pair versionofHDSL."
2593,"Itprovides full-duplex symmetric communication supporting upto768kbpsineach
direction."
2594,"SDSL,whichprovides symmetric communication, canbeconsidered an
alternative toADSL.ADSLprovides asymmetric communication, withadownstream
bitratethatismuchhigherthantheupstream bitrate.Although thisfeaturemeetsthe
needsofmostresidential subscribers, itisnotsuitableforbusinesses thatsendand
receivedatainlargevolumesinbothdirections."
2595,"VDSL
Theveryhigh-bit-rate digitalsubscriber line(VDSL), analternative approach thatis
similartoADSL,usescoaxial,fiber-optic, ortwisted-pair cableforshortdistances."
2596,"The
modulating technique isDMT.Itprovides arangeofbitrates(25to55Mbps)for
upstream communication atdistances of3000to10,000ft.Thedownstream rateisnor­
mally3.2Mbps."
2597,"Summary
Table9.1showsasummary ofDSLtechnologies."
2598,"Notethatthedatarateanddistances
areapproximations andcanvaryfromoneimplementation toanother."
2599,"Table9.1Summary ofDSLtechnologies
Downstream Upstream Distance Twisted Line
Technology Rate Rate (jt) Pairs Code
ADSL 1.5-6.1Mbps 16-640kbps 12,000 1 DMT
ADSLLite1.5Mbps 500kbps 18,000 1 DMT
HDSL 1.5-2.0Mbps 1.5-2.0Mbps 12,000 2 2B1Q
SDSL 768kbps 768kbps 12,000 1 2B1Q
VDSL 25-55Mbps 3.2Mbps 3000-10,000 1 DMT256CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
9.4CABLETVNETWORKS
ThecableTVnetwork startedasavideoserviceprovider, butithasmovedtothebusiness
ofInternetaccess.Inthissection,wediscusscableTVnetworks perse;inSection9.5we
discusshowthisnetworkcanbeusedtoprovidehigh-speed accesstotheInternet."
2600,"Traditional CableNetworks
CableTVstartedtodistribute broadcast videosignalstolocations withpoororno
reception inthelate1940s.Itwascalledcommunity antennaTV(CATV) becausean
antennaatthetopofatallhillorbuildingreceivedthesignalsfromtheTVstationsand
distributed them,viacoaxialcables,tothecommunity."
2601,"Figure9.14showsaschematic
diagramofatraditional cableTVnetwork."
2602,"Figure9.14Traditional cableTVnetwork
Splitter
Tap
ThecableTVoffice,calledtheheadend,receivesvideosignalsfrombroadcasting
stationsandfeedsthesignals into coaxialcables.Thesignalsbecameweakerand
weakerwithdistance, soamplifiers wereinstalled throughthenetwork torenewthe
signals.Therecouldbeupto35amplifiers between theheadendandthesubscriber
premises."
2603,"Attheotherend,splitterssplitthecable,andtapsanddropcablesmakethe
connections tothesubscriber premises."
2604,"Thetraditional cableTVsystemusedcoaxialcableendtoend.Duetoattenuation of
thesignalsandtheuseofalargenumberofamplifiers, communication inthetraditional
networkwasunidirectional (one-way)."
2605,"Videosignalsweretransmitted downstream, from
theheadendtothesubscriber premises."
2606,Communication inthetraditional cableTVnetwork isunidirectional.
2607,"HybridFiber-Coaxial (HFC)Network
Thesecondgeneration ofcablenetworks iscalledahybridfiber-coaxial (HFC)net­
work.Thenetworkusesacombination offiber-optic andcoaxialcable.ThetransmissionSECTION 9.5CABLETVFORDATATRANSFER 257
mediumfromthecableTVofficetoabox,calledthefibernode,isopticalfiber;fromthe
fibernodethroughtheneighborhood andintothehouseisstillcoaxialcable.Figure9.15
showsaschematic diagramofanHFCnetwork."
2608,"Figure9.15Hybridfiber-coaxial (HFC)network
RCHHigh-bandwidth
fiber
Theregional cablehead(RCH)normally servesupto400,000subscribers."
2609,"The
RCHsfeedthedistribution hubs,eachofwhichservesupto40,000subscribers."
2610,"The
distribution hubplaysanimportant roleinthenewinfrastructure."
2611,"Modulation anddis­
tribution ofsignalsaredonehere;thesignalsarethenfedtothefibernodesthrough
fiber-optic cables.Thefibernodesplitstheanalogsignalssothatthesamesignalissent
toeachcoaxialcable.Eachcoaxialcableservesupto1000subscribers."
2612,"Theuseof
fiber-optic cablereducestheneedforamplifiers downtoeightorless."
2613,"Onereasonformovingfromtraditional tohybridinfrastructure istomakethecable
networkbidirectional (two-way)."
2614,Communication inanHFCcableTVnetworkcanbebidirectional.
2615,"9.5CABLETVFORDATATRANSFER
Cablecompanies arenowcompeting withtelephone companies fortheresidential
customer whowantshigh-speed datatransfer.DSLtechnology provides high-data-rate
connections forresidential subscribers overthelocalloop.However, DSLusesthe
existingunshielded twisted-pair cable,whichisverysusceptible tointerference."
2616,"This
imposesanupperlimitonthedatarate.AnothersolutionistheuseofthecableTVnet­
work.Inthissection,webrieflydiscussthistechnology."
2617,"Bandwidth
EveninanHFCsystem,thelastpartofthenetwork, fromthefibernodetothesub­
scriberpremises, isstillacoaxialcable.Thiscoaxialcablehasabandwidth thatranges258CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
from5to750MHz(approximately)."
2618,"ToprovideInternetaccess,thecablecompany has
dividedthisbandwidth intothreebands:video,downstream data,andupstream data,as
showninFigure9.16."
2619,"Figure9.16DivisionofcoaxialcablebandbyCATV
Frequency, MHz 5.~::2i
Data:~
l1PStf~~~
4254Video
bapd
550Data
downstream
750
Downstream VideoBand
Thedownstream videobandoccupies frequencies from54to550MHz.Sinceeach
TVchanneloccupies 6MHz,thiscanaccommodate morethan80channels."
2620,"Downstream DataBand
Thedownstream data(fromtheInternettothesubscriber premises) occupies theupper
band,from550to750MHz.Thisbandisalsodividedinto6-MHzchannels."
2621,"Modulation Downstream databandusesthe64-QAM (orpossibly 256-QAM)
modulation technique."
2622,Downstream dataaremodulated usingthe64-QAM modulation technique.
2623,DataRateThereis6bits/baudin64-QAM.
2624,"Onebitisusedforforwarderrorcorrection;
thisleaves5bitsofdataperbaud.ThestandardspecifiesIHzforeachbaud;thismeansthat,
theoretically, downstream datacanbereceivedat30Mbps(5bitslHzx6MHz).Thestan­
dardspecifiesonly27Mbps.However, sincethecablemodemisnormally connected tothe
computer throughalOBase-T cable(seeChapter13),thislimitsthedatarateto10Mbps."
2625,Thetheoretical downstream datarateis30Mbps.
2626,"Upstream DataBand
Theupstream data(fromthesubscriber premises totheInternet) occupies thelower
band,from5to42MHz.Thisbandisalsodividedinto6-MHzchannels."
2627,"Modulation Theupstream databanduseslowerfrequencies thataremoresuscepti­
bletonoiseandinterference."
2628,"Forthisreason,theQAMtechnique isnotsuitableforthis
band.AbettersolutionisQPSK."
2629,"Upstream dataaremodulated usingtheQPSKmodulation technique.SECTION 9.5CABLETVFORDATATRANSFER 259
DataRateThereare2bitslbaud inQPSK.Thestandard specifies 1Hzforeachbaud;
thismeansthat,theoretically, upstream datacanbesentat12Mbps(2bitslHzx 6MHz)."
2630,"However, thedatarateisusuallylessthan12Mbps."
2631,Thetheoretical upstream datarateis12Mbps.
2632,"Sharing
Bothupstream anddownstream bandsaresharedbythesubscribers."
2633,"Upstream Sharing
Theupstream databandwidth is37MHz.Thismeansthatthereareonlysix6-MHz
channels available intheupstream direction."
2634,"Asubscriber needstouseonechannelto
senddataintheupstream direction."
2635,"Thequestion is,""Howcansixchannels besharedin
anareawith1000,2000, oreven100,000subscribers?"" Thesolutionistimesharing."
2636,"The
bandisdividedintochannels usingFDM;thesechannels mustbesharedbetween sub­
scribersinthesameneighborhood."
2637,"Thecableprovider allocates onechannel, statically
ordynamically, foragroupofsubscribers."
2638,"Ifonesubscriber wantstosenddata,sheor
hecontends forthechannelwithotherswhowantaccess;thesubscriber mustwaituntil
thechannelisavailable."
2639,"Downstream Sharing
Wehaveasimilarsituation inthedownstream direction."
2640,"Thedownstream bandhas
33channelsof6MHz.Acableproviderprobably hasmorethan33subscribers; therefore,
eachchannelmustbesharedbetweenagroupofsubscribers."
2641,"However, thesituation isdif­
ferentforthedownstream direction; herewehaveamulticasting situation.Iftherearedata
foranyofthesubscribers inthegroup,thedataaresenttothatchannel.Eachsubscriber is
sentthedata.Butsinceeachsubscriber alsohasanaddressregistered withtheprovider; the
cablemodemforthegroupmatchestheaddresscarriedwiththedatatotheaddressassigned
bytheprovider."
2642,"Iftheaddressmatches, thedataarekept;otherwise, theyarediscarded."
2643,"CMandCMTS
Touseacablenetworkfordatatransmission, weneedtwokeydevices:acablemodem
(CM)andacablemodemtransmission system(CMTS)."
2644,"CM
Thecablemodem(CM)isinstalled onthesubscriber premises."
2645,"ItissimilartoanADSL
modem.Figure9.17showsitslocation."
2646,"CMTS
Thecablemodemtransmission system(CMTS) isinstalled insidethedistribution
hubbythecablecompany.Itreceives datafromtheInternetandpassesthemtothe
combiner, whichsendsthemtothesubscriber."
2647,"TheCMTSalsoreceives datafromthe
subscriber andpassesthemtotheInternet."
2648,"Figure9.18showsthelocationoftheCMTS.260CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
Figure9.17Cablemodem(CM)
Cable
Customer residencer------------------------I
I I
I V~OO I
Thp""~~ I
I
1
1
1
r- 1
Data 1=- 1
1
1 Cablemodem 1
1 ..J
Figure9.18Cablemodemtransmission system(CMTS)
Fromheadend
Toandfrom
theInternetDistribution hub-------------------I
IVideoI I Fiber
IICombinerI ~,"",,""-,,<.-::-."
2649,"-'-_~
I I
I I
I I
I I
:Data '-c', :
I I
I CMTS IL ~
DataTransmission Schemes: DOeSIS
Duringthelastfewdecades,severalschemeshavebeendesigned tocreatea standard for
datatransmission overanHFCnetwork."
2650,"Prevalent istheonedevisedbyMultimedia
CableNetwork Systems(MCNS), calledDataOverCableSystemInterface Specifi­
cation(DOCSIS)."
2651,"DOCSIS definesalltheprotocols necessary totransport datafroma
CMTStoaCM."
2652,"Upstream Communication
Thefollowing isaverysimplified versionoftheprotocol definedbyDOCSIS for
upstream communication."
2653,"Itdescribes thestepsthatmustbefollowed byaCM:
1.TheCMchecksthedownstream channels foraspecificpacketperiodically sentby
theCMTS.ThepacketasksanynewCMtoannounce itselfonaspecificupstream
channel."
2654,"2.TheCMTSsendsapackettotheCM,defining itsallocated downstream and
upstream channels."
2655,"3.TheCMthenstartsaprocess, calledranging, whichdetermines thedistance
betweentheCMandCMTS.Thisprocessisrequiredforsynchronization betweenallSECTION 9.7KEYTERMS 261
CMsandCMTSsfortheminislots usedfortimesharing oftheupstream channels."
2656,"Wewilllearnaboutthistimesharing whenwediscusscontention protocols in
Chapter12."
2657,"4.TheCMsendsapackettotheISP,askingfortheInternetaddress."
2658,"5.TheCMandCMTSthenexchange somepacketstoestablish securityparameters,
whichareneededforapublicnetworksuchascableTV."
2659,6.TheCMsendsitsuniqueidentifier totheCMTS.
2660,"7.Upstream communication canstartintheallocated upstream channel;theCMcan
contendfortheminislots tosenddata."
2661,"Downstream Communication
Inthedownstream direction, thecommunication ismuchsimpler.Thereisnoconten­
tionbecausethereisonlyonesender.TheCMTSsendsthepacketwiththeaddressof
thereceiving eM,usingtheallocated downstream channel."
2662,"9.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext."
2663,"Books
[CouOl] givesaninteresting discussion abouttelephone systems, DSLtechnology,
andCATVinChapter8.[Tan03]discusses telephone systemsandDSLtechnology in
Section2.5andCATVinSection2.7.[GW04]discusses telephone systemsinSec­
tion1.1.1andstandard modems inSection3.7.3.Acomplete coverage ofresidential
broadband (DSLandCATV)canbefoundin[Max99]."
2664,"9.7KEYTERMS
56Kmodem
800service
900service
ADSLLite
ADSLmodem
analogleasedservice
analogswitched service
asymmetric DSL(ADSL)
cablemodem(CM)
cablemodemtransmission system
(CMTS)
cableTVnetwork
common carriercommunity antennaTV(CATV)
competitive localexchange carrier
(CLEC)
DataOverCable SystemInterface
Specification (DOCSIS)
demodulator
digitaldataservice(DDS)
digitalservice
digitalsubscriber line(DSL)
digitalsubscriber lineaccessmultiplexer
(DSLAM)
discretemultitone technique (DMT)
distribution hub262CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
downloading
downstream databand
endoffice
fibernode
headend
high-bit-rate DSL(HDSL)
hybridfiber-coaxial (HFC)network
in-bandsignaling
incumbent localexchange carrier
(ILEC)
interexchange carrier(IXC)
ISDNuserport(ISUP)
localaccesstransport area(LATA)
localexchange carrier(LEC)
localloop
longdistancecompany
message transport port(MTP)level
modem
modulator
out-of-band signaling
plainoldtelephone system(POTS)
pointofpresence (POP)
ranging
regionalcablehead(RCH)
regionalofficeservercontrolpoint(SCP)
signalpoint(SP)
signaltransport port(STP)
signaling connection controlpoint
(SCep)
Signaling SystemSeven(SS7)
switched/56 service
switching office
symmetric DSL(SDSL)
tandemoffice
telephone userport(TUP)
transaction capabilities application port
(TCAP)
trunk
uploading
upstream databand
Y.32
Y.32bis
Y.34bis
Y.90
Y.92
very-high-bit-rate DSL(VDSL)
videoband
V-series
wide-area telephone service(WATS)
9.8SUMMARY
oThetelephone, whichisreferred toastheplainoldtelephone system(POTS),
wasoriginally ananalogsystem.Duringthelastdecade,thetelephone network
hasundergone manytechnical changes."
2665,"Thenetwork isnowdigitalaswellas
analog."
2666,"oThetelephone network ismadeofthreemajorcomponents: localloops,trunks,
andswitching offices.Ithasseverallevelsofswitching officessuchasendoffices,
tandemoffices,andregionaloffices."
2667,oTheUnitedStatesisdividedintomanylocalaccesstransport areas(LATAs).
2668,"The
services offeredinsideaLATAarecalledintra-LATA services."
2669,"Thecarrierthat
handlestheseservices iscalledalocalexchange carrier(LEC).Theservices
between LATAsarehandledbyinterexchange carriers(lXCs)."
2670,"oInin-bandsignaling, thesamecircuitisusedforbothsignaling anddata.Inout-of­
bandsignaling, aportionofthebandwidth isusedforsignaling andanotherportionSECTION 9.9PRACTICE SET 263
fordata.Theprotocol thatisusedforsignaling inthetelephone networkiscalled
Signaling SystemSeven(SS7)."
2671,"oTelephone companies providetwotypesofservices: analoganddigital.Wecan
categorize analogservicesaseitheranalogswitched servicesoranalogleasedser­
vices.Thetwomostcommon digitalservicesareswitched/56 serviceanddigital
dataservice(DDS)."
2672,"oDatatransferusingthetelephone localloopwastraditionally doneusingadial-up
modem.Thetermmodemisacomposite wordthatreferstothetwofunctional
entitiesthatmakeupthedevice:asignalmodulator andasignaldemodulator."
2673,oMostpopularmodemsavailable arebasedontheV-seriesstandards.
2674,"TheV.32modem
hasadatarateof9600bps.TheV32bismodemsupports 14,400-bps transmission."
2675,"V90modems, called56Kmodems, withadownloading rateof56kbpsandupload­
ingrateof33.6kbpsareverycommon."
2676,"ThestandardaboveV90iscalledV92.These
modemscanadjusttheirspeed,andifthenoiseallows,theycanuploaddataattherate
of48kbps."
2677,"oTelephone companies developed anothertechnology, digitalsubscriber line(DSL),to
providehigher-speed accesstotheInternet.DSLtechnology isasetoftechnologies,
eachdiffering inthefirstletter(ADSL,VDSL,HDSL,andSDSL.ADSLprovides
higherspeedinthedownstream direction thanintheupstream direction."
2678,"Thehigh-bit­
ratedigitalsubscriber line(HDSL) wasdesigned asanalternative totheT-lline
(1.544Mbps).Thesymmetric digitalsubscriber line(SDSL)isaonetwisted-pair ver­
sionofHDSL.Theveryhigh-bit-rate digitalsubscriber line(VDSL)isanalternative
approach thatissimilartoADSL."
2679,"oCommunity antennaTV(CATV)wasoriginally designed toprovidevideoservices
forthecommunity."
2680,Thetraditional cableTVsystemusedcoaxialcableendto end.
2681,"Thesecondgeneration ofcablenetworks iscalledahybridfiber-coaxial (HFC)
network."
2682,Thenetworkusesacombination offiber-optic andcoaxialcable.
2683,"oCablecompanies arenowcompeting withtelephone companies fortheresidential
customer whowantshigh-speed accesstotheInternet."
2684,"Touseacablenetworkfor
datatransmission, weneedtwokeydevices:acablemodem(CM)andacablemodem
transmission system(CMTS)."
2685,"9.9PRACTICE SET
ReviewQuestions
1.Whatarethethreemajorcomponents ofatelephone network?"
2686,2.Givesomehierarchical switching levelsofatelephone network.
2687,3.WhatisLATA?Whatareintra-LATA andinter-LATA services?
2688,4.Describe theSS7serviceanditsrelationtothetelephone network.
2689,"S.Whatarethetwomajorservicesprovided bytelephone companies intheUnited
States?"
2690,6.Whatisdial-upmodemtechnology?
2691,"Listsomeofthecommon modemstandards
discussed inthischapterandgivetheirdatarates.264CHAPTER 9USINGTELEPHONE ANDCABLENETWORKS FORDATATRANSMISSION
7.WhatisDSLtechnology?"
2692,"Whataretheservicesprovided bythetelephone companies
usingDSL?Distinguish betweenaDSLmodemandaDSLAM."
2693,8.Compare andcontrastatraditional cablenetworkwithahybridfiber-coaxial network.
2694,9.Howisdatatransferachieved usingCATVchannels?
2695,10.Distinguish between CMandCMTS.
2696,"Exercises
11.Usingthediscussion ofcircuit-switching inChapter 8,explainwhythistypeof
switching was chosenfortelephone networks."
2697,"12.InChapter8,wediscussed thethreecommunication phasesinvolved inacircuit­
switched network."
2698,"Matchthesephaseswiththephasesinatelephone callbetween
twoparties."
2699,"13.InChapter8,welearnedthatacircuit-switched networkneedsend-to-end addressing
duringthesetupandteardown phases.Defineend-to-end addressing inatelephone
networkwhentwopartiescommunicate."
2700,"14.Whenwehaveanoverseas telephone conversation, wesometimes experience a
delay.Canyouexplainthereason?"
2701,15.Drawabarcharttocomparethedifferentdownloading dataratesofcommon modems.
2702,"16.Drawabarchart tocompare thedifferent downloading dataratesofcommon DSL
technology implementations (useminimum datarates)."
2703,"17.Calculate theminimum timerequiredtodownload onemillionbytesofinformation
usingeachofthefollowing technologies:
a.V32modem
b.V32bismodem
c.V90modem
18.RepeatExercise 17usingdifferent DSLimplementations (consider theminimum
rates)."
2704,19.RepeatExercise 17usingacablemodem(consider theminimum rates).
2705,"20.Whattypeoftopology isusedwhencustomers inanareauseDSLmodems for
datatransferpurposes?"
2706,Explain.
2707,"21.Whattypeoftopology isusedwhencustomers inanareausecable modems for
datatransferpurposes?"
2708,"Explain.DataLinkLayer
Objectives
Thedatalinklayertransforms thephysical layer,arawtransmission facility,toalink
responsible fornode-to-node (hop-to-hop) communication."
2709,"Specificresponsibilities of
thedatalinklayerincludeframing, addressing, flowcontrol,errorcontrol,andmedia
accesscontrol.Thedatalinklayerdividesthestreamofbitsreceivedfromthenetwork
layerintomanageable dataunitscalledframes.Thedatalinklayeraddsaheadertothe
frametodefinetheaddresses ofthesenderandreceiveroftheframe.Iftherateat
whichthedataareabsorbed bythereceiverislessthantherateatwhichdataarepro­
ducedinthesender,thedatalinklayerimposes aflowcontrolmechanism toavoid
overwhelming thereceiver.Thedatalinklayeralsoaddsreliability tothephysicallayer
byaddingmechanisms todetectandretransmit damaged, duplicate, orlostframes."
2710,"Whentwoormoredevicesareconnected tothesamelink,datalinklayerprotocols are
necessary todetermine whichdevicehascontroloverthelinkatanygiventime."
2711,"InPart3ofthebook,wefirstdiscussservicesprovided bythedatalinklayer.We
thendiscusstheimplementation oftheseservicesinlocalareanetworks (LANs).Finally
wediscusshowwideareanetworks (WANs)usetheseservices."
2712,"Part3ofthebookisdevotedtothedatalinklayerand
theservicesprovided bythislayer."
2713,"Chapters
Thispartconsistsofninechapters: Chapters 10to18."
2714,"Chapter 10
Chapter10discusses errordetection andcorrection."
2715,"Although thequalityofdevicesand
mediahavebeenimproved duringthelastdecade,westillneedtocheckforerrorsand
correcttheminmostapplications.Chapter11
Chapter 11isnameddatalinkcontrol,whichinvolves flowanderrorcontrol.Itdis­
cusses some protocols thataredesigned tohandlethe services required fromthedata
linklayerinrelationtothenetworklayer."
2716,"Chapter12
Chapter12isdevotedtoaccesscontrol,thedutiesofthedatalinklayerthatarerelated
totheuseofthephysicallayer."
2717,"Chapter13
Thischapterintroduces wiredlocalareanetworks."
2718,"AwiredLAN,viewedasalink,is
mostlyinvolved inthephysicalanddatalinklayers.Wehavedevotedthechaptertothe
discussion ofEthernet anditsevolution, adominant technology today."
2719,"Chapter14
Thischapterintroduces wirelesslocalareanetworks."
2720,"ThewirelessLANisagrowing
technology intheInternet.Wedevoteonechaptertothistopic."
2721,"Chapter15
Afterdiscussing wiredandwirelessLANs,weshowhowtheycanbeconnected together
usingconnecting devices."
2722,"Chapter16
Thisisthefirstchapteronwideareanetworks (WANs)."
2723,"WestartwithwirelessWANs
andthenmoveontosatellitenetworks andmobiletelephone networks."
2724,"Chapter17
Todemonstrate theoperation ofahigh-speed wideareanetworkthatcanbeusedasa
backbone forotherWANsorfortheInternet,wehavechosentodevoteallofChapter17
toSONET,awideareanetworkthatusesfiber-optic technology."
2725,"Chapter18
Thischapterconcludes ourdiscussion onwideareanetworks."
2726,"Twoswitched WANs,
FrameRelayandATM,arediscussed here.CHAPTER 10
ErrorDetection andCorrection
Networks mustbeabletotransferdatafromonedevicetoanotherwithacceptable accu­
racy.Formostapplications, asystemmustguarantee thatthedatareceivedareidenticalto
thedatatransmitted."
2727,"Anytimedataaretransmitted fromonenodetothenext,theycan
becomecorrupted inpassage.Manyfactorscanalteroneormorebitsofamessage."
2728,"Some
applications requireamechanism fordetecting andcorrecting errors."
2729,Datacanbecorrupted duringtransmission.
2730,Someapplications requirethaterrorsbedetectedandcorrected.
2731,"Someapplications cantolerateasmallleveloferror.Forexample, randomerrors
inaudioorvideotransmissions maybetolerable, butwhenwetransfertext,weexpect
averyhighlevelofaccuracy."
2732,"10.1INTRODUCTION
Letusfirstdiscusssomeissuesrelated,directlyorindirectly, toerrordetection and
correcion."
2733,"TypesofErrors
Whenever bitsflowfromonepointtoanother, theyaresubjecttounpredictable
changesbecauseofinterference."
2734,Thisinterference canchangetheshapeofthesignal.
2735,"Inasingle-bit error,a 0ischangedtoa 1ora 1toaO.Inabursterror,multiplebitsare
changed."
2736,"Forexample, a11100sburstofimpulsenoiseonatransmission withadata
rateof1200bpsmightchangeallorsomeofthe12bitsofinformation."
2737,"Single-Bit Error
Thetermsingle-bit errormeansthatonly1bitofagivendataunit(suchasabyte,
character, orpacket)ischangedfrom1to0orfrom0to1."
2738,"267268CHAPTER 10ERRORDETECTION ANDCORRECTION
Inasingle-bit error,only1bitinthedataunithaschanged."
2739,"Figure10.1showstheeffectofasingle-bit erroronadataunit.Tounderstand the
impactofthechange,imaginethateachgroupof8bitsisanASCIIcharacter witha 0bit
addedtotheleft.InFigure10.1,00000010 (ASCIISTX)wassent,meaning startof
text,but00001010 (ASCIILF)wasreceived, meaning linefeed.(Formoreinformation
aboutASCIIcode,seeAppendix A.)
:Figure10.1Single-bit error
ochangedtoI
Sent Received
Single-bit errorsaretheleastlikelytypeoferrorinserialdatatransmission."
2740,"Tounder­
standwhy,imaginedatasentat1Mbps.Thismeansthateachbitlastsonly1/1,000,000 s,
or1)ls.Forasingle-bit errortooccur,thenoisemusthaveadurationofonly1)ls,which
isveryrare;noisenormally lastsmuchlongerthanthis."
2741,"BurstError
Thetermbursterrormeansthat2ormorebitsinthedataunithavechanged from1to0
orfrom0to1."
2742,Abursterrormeansthat2ormorebitsinthedataunithavechanged.
2743,"Figure10.2showstheeffectofabursterroronadataunit.Inthiscase,
0100010001000011 wassent,but0101110101100011 wasreceived."
2744,"Notethataburst
errordoesnotnecessarily meanthattheerrorsoccurinconsecutive bits.Thelengthof
theburstismeasured fromthefirstcorrupted bittothelastcorrupted bit.Somebitsin
between maynothavebeencorrupted."
2745,"Figure10.2Bursterroroflength8
Lengthofburst
error(8bits)SECTION 10.1INTRODUCTION 269
Abursterrorismorelikelytooccurthanasingle-bit error.Theduration ofnoiseis
normally longerthantheduration of1bit,whichmeansthatwhennoiseaffectsdata,it
affectsasetofbits.Thenumberofbitsaffecteddepends onthedatarateandduration
ofnoise.Forexample, ifwearesendingdataatIkbps,anoiseof11100scanaffect
10bits;ifwearesendingdataatIMbps,thesamenoise can affect10,000bits."
2746,"Redundancy
Thecentralconceptindetecting orcorrecting errorsisredundancy."
2747,"Tobeableto
detectorcorrecterrors,weneedtosendsomeextrabitswithourdata.Theseredundant
bitsareaddedbythesenderandremoved bythereceiver."
2748,"Theirpresence allowsthe
receivertodetectorcorrectcorrupted bits."
2749,"Todetectorcorrecterrors,weneedtosendextra(redundant) bitswithdata."
2750,"Detection VersusCorrection
Thecorrection oferrorsismoredifficultthanthedetection."
2751,"Inerrordetection, weare
lookingonlytoseeifanyerrorhasoccurred."
2752,"Theanswerisasimpleyesorno.Weare
noteveninterested inthenumberoferrors.Asingle-bit erroristhesameforusasa
bursterror."
2753,"Inerrorcorrection, weneedtoknowtheexactnumberofbitsthatarecorrupted and
moreimportantly, theirlocationinthemessage."
2754,"Thenumberoftheerrorsandthesizeof
themessage areimportant factors.Ifweneedtocorrectonesingleerrorinan8-bitdata
unit,weneedtoconsider eightpossible errorlocations; ifweneedtocorrecttwoerrors
inadataunitofthesamesize,weneedtoconsider 28possibilities."
2755,"Youcanimaginethe
receiver's difficulty infinding10errorsinadataunitof1000bits."
2756,"Forward ErrorCorrection VersusRetransmission
Therearetwomainmethods oferrorcorrection."
2757,"Forward errorcorrection isthepro­
cessinwhichthereceivertriestoguessthemessage byusingredundant bits.Thisis
possible, asweseelater,ifthenumberoferrorsissmall.Correction byretransmission
isatechnique inwhichthereceiverdetectstheoccurrence ofanerrorandasksthesender
toresendthemessage."
2758,"Resending isrepeated untilamessage arrivesthatthereceiver
believesiserror-free (usually, notallerrorscanbedetected)."
2759,"Coding
Redundancy isachieved throughvariouscodingschemes."
2760,"Thesenderaddsredundant
bitsthroughaprocessthatcreatesarelationship between theredundant bitsandthe
actualdatabits.Thereceiver checkstherelationships between thetwosetsofbitsto
detectorcorrecttheerrors.Theratioofredundant bitstothedatabitsandtherobust­
nessoftheprocessareimportant factorsinanycodingscheme."
2761,"Figure10.3showsthe
generalideaofcoding."
2762,"Wecandividecodingschemes intotwobroadcategories: blockcodingandconvo­
lutioncoding.Inthisbook,weconcentrate onblockcoding;convolution codingis
morecomplex andbeyondthescopeofthisbook.270CHAPTER 10ERRORDETECTION ANDCORRECTION
Figure10.3Thestructureofencoderanddecoder
Sender Receiver
Encoder Decoder
~e8sage IMessageI
tcorrector
discardlGeneratorI ICheckerI
~ t
[~es~~~~u~~y<;lHl-u.::..:n:.;;.re:.;;.li;,:;ab:.:le:..t::.:ra:.;;.ns:.::Iill.::..:·s;;;;'si;;;;on~~:~:~~~~~~f~~o,~=l
Inthisbook,weconcentrate onblockcodes;weleaveconvolution codestoadvanced texts."
2763,"Modular Arithmetic
Beforewefinishthissection,letusbrieflydiscussaconceptbasictocomputer science
ingeneralandtoerrordetection andcorrection inparticular: modular arithmetic."
2764,"Our
intenthereisnottodelvedeeplyintothemathematics ofthistopic;wepresentjust
enoughinformation toprovideabackground tomaterials discussed inthischapter."
2765,"Inmodular arithmetic, weuseonlyalimitedrangeofintegers."
2766,"Wedefineanupper
limit,calledamodulus N.Wethenuseonlytheintegers0toN-I,inclusive."
2767,"Thisis
modulo-N arithmetic."
2768,"Forexample, ifthemodulus is12,weuseonlytheintegers0to
11,inclusive."
2769,"Anexample ofmoduloarithmetic isourclocksystem.Itisbasedon
modulo-12 arithmetic, substituting thenumber12forO.Inamodulo-N system,ifa
numberisgreaterthanN,itisdividedbyNandtheremainder istheresult.Ifitisneg­
ative,asmanyNsasneededareaddedtomakeitpositive."
2770,"Consider ourclocksystem
again.Ifwestartajobat11A.M.andthejobtakes5h,wecansaythatthejobistobe
finishedat16:00ifweareinthemilitary,orwecansaythatitwillbefinishedat4P.M.
(theremainder of16/12is4)."
2771,"Inmodulo-N arithmetic, weuseonlytheintegersintherange0toN-1,inclusive."
2772,"Addition andsubtraction inmoduloarithmetic aresimple.Thereisnocarrywhen
youaddtwodigitsinacolumn.Thereisnocarrywhenyousubtractonedigitfrom
anotherinacolumn."
2773,"Modulo-2 Arithmetic
Ofparticular interestismodulo-2 arithmetic."
2774,"Inthisarithmetic, themodulusNis2.We
canuseonly0and1.Operations inthisarithmetic areverysimple.Thefollowing
showshowwecanaddorsubtract2bits."
2775,"Adding:
Subtracting:0+0=0
0-0=00+1=1
0-1=11+0=1
1-0=11+1=0
1-1=0SECTION 10.2BLOCK CODING 271
Noticeparticularly thatadditionandsubtraction givethesameresults.Inthisarith­
meticweusetheXOR(exclusive OR)operation forbothadditionandsubtraction."
2776,"The
resultofanXORoperation is0iftwobitsarethesame;theresultisIiftwobitsare
different."
2777,Figure10.4showsthisoperation.
2778,"Figure10.4XORingoftwosinglebitsortwowords
a.Twobitsarethesame,theresultisO."
2779,"loeB1=1 leBO
b.Twobitsaredifferent, theresultis1.ooI I 0
eB I0°
° ° °
c.ResultofXORingtwopatterns
OtherModuloArithmetic
Wealsouse,modulo-N arithmetic throughthebook.Theprinciple isthesame;weuse
numbersbetween0andN-1.Ifthemodulusisnot2,additionandsubtraction aredistinct."
2780,"Ifwegetanegativeresult,weaddenoughmultiples ofNtomakeitpositive."
2781,"10.2BLOCK CODING
Inblockcoding,wedivideourmessageintoblocks,eachofkbits,calleddatawords.We
addrredundant bitstoeachblocktomakethelengthn=k+r.Theresulting n-bitblocks
arecalledcodewords.Howtheextrarbitsischosenorcalculated issomething wewill
discusslater.Forthemoment, itisimportant toknowthatwehaveasetofdatawords,
eachofsizek,andasetofcodewords, eachofsizeofn.Withkbits,wecancreateacom­
binationof2kdatawords; withnbits,wecancreateacombination of2ncodewords."
2782,"Sincen>k,thenumberofpossiblecodewords islargerthanthenumberofpossibledata­
words.Theblockcodingprocessisone-to-one; thesamedataword isalwaysencodedas
thesamecodeword."
2783,"Thismeansthatwehave2n-2kcodewords thatarenotused.We
callthesecodewords invalidorillegal.Figure10.5showsthesituation."
2784,"Figure10.5Datawords andcodewords inblockcoding
IIHitsIIHitsI•eoIHitsII
2kDatawords, eachofkbits
IIIIbitsIIIIbits nbitsII
2nCodewords, eachofnbits(only2kofthemarevalid)272CHAPTER 10ERRORDETECTION ANDCORRECTION
Example 10.1
The4B/5Bblockcodingdiscussed inChapter4isagoodexample ofthistypeofcoding.Inthis
codingscheme,k=4andn=5.Aswesaw,wehave2k=16datawords and2n=32codewords."
2785,"Wesawthat16outof32codewords areusedformessage transferandtherestareeitherusedfor
otherpurposes orunused."
2786,"ErrorDetection
Howcanerrorsbedetected byusingblockcoding?Ifthefollowing twoconditions are
met,thereceivercandetectachangeintheoriginalcodeword."
2787,1.Thereceiverhas(orcanfind)alistofvalidcodewords.
2788,2.Theoriginalcodeword haschanged toaninvalidone.
2789,Figure10.6showstheroleofblockcodinginerrordetection.
2790,"Figure10.6Processoferrordetection inblockcoding
Sender Receiver
Encoder Decoder
kbitsID,at:aword 1 IDat~~ord·1 kbits
I tExtract
IGeneratorI IChecker
Discard
+ i
nbitsICodewordUnreliable transmission r·CodewordInbitsI r
Thesendercreatescodewords outofdatawords byusingagenerator thatappliesthe
rulesandprocedures ofencoding (discussed later).Eachcodeword senttothereceivermay
changeduringtransmission."
2791,"Ifthereceivedcodeword isthesameasoneofthevalidcode­
words,thewordisaccepted; thecorresponding dataword isextracted foruse.Ifthereceived
codeword isnotvalid,itisdiscarded."
2792,"However, ifthecodeword iscorrupted duringtrans­
missionbutthereceivedwordstillmatchesavalidcodeword, theerrorremainsundetected."
2793,Thistype ofcodingcandetectonlysingleerrors.Twoormoreerrorsmayremainundetected.
2794,"Example 10.2
Letusassumethatk=2andn=3.Table10.1showsthelistofdatawords andcodewords."
2795,"Later,
wewillseehowtoderiveacodeword fromadataword."
2796,"Table10.1Acodeforerrordetection (Example 10.2)
Datawords Codewords
00 000
01 011
10 101
11 110SECTION 10.2BLOCKCODING 273
Assumethesenderencodesthedataword 01as011andsendsittothereceiver."
2797,"Consider the
following cases:
1.Thereceiver receivesOIl.Itisavalidcodeword."
2798,"Thereceiverextractsthedataword 01
fromit."
2799,"2.Thecodeword iscorrupted duringtransmission, and111isreceived (theleftmostbitiscor­
rupted).Thisisnotavalidcodeword andisdiscarded."
2800,"3.Thecodeword iscorrupted duringtransmission, and000isreceived (therighttwobitsare
corrupted)."
2801,Thisisavalidcodeword.
2802,"Thereceiverincorrectly extractsthedataword 00.Two
corrupted bitshavemadetheerrorundetectable."
2803,"Anerror-detecting codecandetectonlythetypesoferrorsforwhichitisdesigned;
othertypesoferrorsmayremainundetected."
2804,"ErrorCorrection
Aswesaidbefore,errorcorrection ismuchmoredifficultthanerrordetection."
2805,"Inerror
detection, thereceiver needstoknowonlythatthereceived codeword isinvalid;in
errorcorrection thereceiverneedstofind(orguess)theoriginal codeword sent.Wecan
saythatweneedmoreredundant bitsforerrorcorrection thanforerrordetection."
2806,Figure10.7showstheroleofblockcodinginerrorcorrection.
2807,"Wecanseethattheidea
isthesameaserrordetection butthecheckerfunctions aremuchmorecomplex."
2808,"Figure10.7Structure ofencoderanddecoderinerrorcorrection
Sender Receiver
Encoder Decoder
kbitsIDatawordI IDatawordIkbits
I tCorrect
IGeneratorI ICheckerI
~ i
nbitsIIUnreliable transmissionInbits CodewordI ICodeword
Example 10.3
Letusaddmoreredundant bitstoExample 10.2toseeifthereceivercancorrectanerrorwithout
knowing whatwasactuallysent.Weadd3redundant bitstothe2-bitdataword tomake5-bit
codewords."
2809,"Again,laterwewillshowhowwechosetheredundant bits.Forthemoment letus
concentrate ontheerrorcorrection concept."
2810,Table10.2showsthedatawords andcodewords.
2811,"Assumethedataword is01.Thesenderconsultsthetable(orusesanalgorithm) tocreatethe
codeword 01011.Thecodeword iscorrupted duringtransmission, and01001isreceived (errorin
thesecondbitfromtheright).First,thereceiverfindsthatthereceivedcodeword isnotinthetable."
2812,Thismeansanerrorhasoccurred.
2813,"(Detection mustcomebeforecorrection.) Thereceiver,assuming
thatthereisonly1bitcorrupted, usesthefollowing strategytoguessthecorrectdataword.274CHAPTER 10ERRORDETECTION ANDCORRECTION
Table10.2Acodeforerrorcorrection (Example 10.3)
Dataword Codeword
00 00000
01 01011
10 10101
11 11110
I.Comparing thereceived codeword withthefirstcodeword inthetable(01001versus00000),
thereceiverdecidesthatthefirstcodeword isnottheonethatwassentbecausetherearetwo
different bits."
2814,"2.Bythesamereasoning, theoriginalcodeword cannotbethethirdorfourthoneinthetable."
2815,"3.Theoriginalcodeword mustbethesecondoneinthetablebecausethisistheonlyonethat
differsfromthereceived codeword by1bit.Thereceiverreplaces 01001with01011and
consultsthetabletofindthedataword 01."
2816,"Hamming Distance
Oneofthecentralconcepts incodingforerrorcontrolistheideaoftheHamming dis­
tance.TheHamming distance betweentwowords(ofthesamesize)isthenumberof
differences between thecorresponding bits.WeshowtheHamming distancebetween
twowordsxandyasd(x,y)."
2817,"TheHamming distancecaneasilybefoundifwcapplytheXORoperation (ffi)onthe
twowordsandcountthenumberofIsintheresult.NotethattheHamming distanceis
avaluegreaterthanzero."
2818,"TheHamming distancebetweentwowordsisthenumber
ofdifferences betweencorresponding bits."
2819,"Example 10.4
LetusfindtheHamming distancebetweentwopairsofwords."
2820,"1.TheHamming distance d(OOO,011)is2because000ffi011is011(twoIs)."
2821,"2.TheHamming distanced(10101, 11110)is3because10101ffi11110is01011(threeIs)."
2822,"Minimum Hamming Distance
Although theconceptoftheHamming distanceisthecentralpointindealingwitherror
detection andcorrection codes,themeasurement thatisusedfordesigning acodeisthe
minimum Hamming distance."
2823,"Inasetofwords,theminimum Hamming distance isthe
smallestHamming distancebetweenallpossiblepairs.Weusedmintodefinethemini­
mumHamming distanceinacodingscheme.Tofindthisvalue,wefindtheHamming
distances betweenallwordsandselectthesmallestone."
2824,"Theminimum Hamming distanceisthesmallestHamming
distancebetweenallpossiblepairsinasetofwords.SECTION iO.2BLOCKCODiNG 275
Example 10.5
Findtheminimum Hamming distance ofthecodingschemeinTable10.1.
Solution
WefirstfindallHamming distances."
2825,"d(OOO,011)=2
d(Oll,110)=2
Thedmininthiscaseis2.d(OOO,101)=2
d(W1,110)=2d(OaO,110)=2d(Oll,101)=2
Example 10.6
Findtheminimum Hamming distanceofthecodingschemeinTable10.2.
Solution
WefirstfindalltheHamming distances."
2826,"d(OOOOO, 01011)=3
d(01011, 10101)=4
Thedmininthiscaseis3.d(OOOOO, 10101)=3
d(OlO11, 11110)=3d(OOOOO, 11110)=4
d(10101, 11110)=3
ThreeParameters
Beforewecontinue withourdiscussion, weneedtomention thatanycodingscheme
needstohaveatleastthreeparameters: thecodeword sizen,thedataword sizek,and
theminimum Hamming distancedmin.AcodingschemeCiswrittenasC(n,k)witha
separate expression fordmin-Forexample, wecancallourfirstcodingschemeC(3,2)
withdmin=2andoursecondcodingschemeC(5,2)withdmin::=3."
2827,"Hamming Distance andError
Beforeweexplorethecriteriaforerrordetection orcorrection, letusdiscusstherelationship
betweentheHamming distanceanderrorsoccurring duringtransmission."
2828,"Whenacodeword
iscorrupted duringtransmission, theHamming distancebetweenthesentandreceivedcode­
wordsisthenumberofbitsaffectedbytheerror.Inotherwords,theHamming distance
betweenthereceivedcodeword andthesentcodeword isthenumberofbitsthatarecorrupted
duringtransmission."
2829,"Forexample, ifthecodeword 00000issentand01101isreceived, 3bits
areinerrorandtheHamming distancebetweenthetwoisd(OOOOO, 01101)=3."
2830,"Minimum Distance forErrorDetection
Nowletusfindtheminimum Hamming distanceinacodeifwewanttobeabletodetect
uptoserrors.Ifserrorsoccurduringtransmission, theHamming distance between the
sentcodeword andreceivedcodeword iss.Ifourcodeistodetectuptoserrors,themini­
mumdistancebetween thevalidcodesmustbes+1,sothatthereceived codeword does
notmatchavalidcodeword."
2831,"Inotherwords,iftheminimum distance between allvalid
codewords iss+1,thereceived codeword cannotbeerroneously mistaken foranother
codeword."
2832,"Thedistances arenotenough(s+1)forthereceivertoacceptitasvalid.The
errorwillbedetected."
2833,"Weneedtoclarifyapointhere:Although acodewithdmin=s+1276CHAPTER 10ERRORDETECTION ANDCORRECTION
maybeabletodetectmorethanserrorsinsomespecialcases,onlysorfewererrorsare
guaranteed tobedetected."
2834,"Toguarantee thedetection ofuptoserrorsinallcases,theminimum
Hamming distanceinablockcodemustbedmin=S+1."
2835,"Example 10.7
Theminimum Hamming distanceforourfirstcodescheme(Table10.1)is2.Thiscodeguarantees
detection ofonlyasingleerror.Forexample, ifthethirdcodeword (l01)issentandoneerror
occurs,thereceivedcodeword doesnotmatchanyvalidcodeword.Iftwoerrorsoccur,however,
thereceivedcodeword maymatchavalidcodeword andtheerrorsarenotdetected."
2836,"Example 10.8
Oursecondblockcodescheme(Table10.2) has dmin=3.Thiscodecandetectuptotwoerrors."
2837,"Again,weseethatwhenanyofthevalidcodewords issent,twoerrorscreateacodeword which
isnotinthetableofvalidcodewords."
2838,"Thereceivercannotbefooled.However, somecombina­
tionsofthreeerrorschangeavalidcodeword toanothervalidcodeword."
2839,"Thereceiveracceptsthe
receivedcodeword andtheerrorsareundetected."
2840,Wecanlookatthisgeometrically.
2841,"Letusassumethatthesentcodeword xisatthe
centerofacirclewithradiuss.Allotherreceived codewords thatarecreatedby1tos
errorsarepointsinsidethecircleorontheperimeter ofthecircle.Allothervalidcode­
wordsmustbeoutsidethecircle,asshowninFigure10.8.
Figure10.8Geometric conceptforfindingdmininerrordetection
.y
I
I
I
I
I
I
I
I
I
'1Legend
•Anyvalidcodeword
•Anycorrupted codeword
with0toserrors
InFigure10.8,dminmustbeanintegergreaterthans;thatis,dmin=s+1."
2842,"Minimum Distance forErrorCorrection
Errorcorrection ismorecomplex thanerrordetection; adecision isinvolved."
2843,"Whena
received codeword isnotavalidcodeword, thereceiver needstodecidewhichvalid
codeword wasactuallysent.Thedecision isbasedontheconceptofterritory, anexclu­
siveareasurrounding thecodeword."
2844,Eachvalidcodeword hasitsownterritory.
2845,Weuseageometric approach todefineeachterritory.
2846,"Weassumethateachvalid
codeword hasacircularterritory witharadiusoftandthatthevalidcodeword isattheSECTION 10.3LINEAR BLOCKCODES 277
center.Forexample, supposeacodeword xiscorrupted bytbitsorless.Thenthiscor­
ruptedcodeword islocatedeitherinsideorontheperimeter ofthiscircle.Ifthereceiver
receivesacodeword thatbelongstothisterritory, itdecidesthattheoriginalcodeword is
theoneatthecenter.Notethatweassumethatonlyuptoterrorshaveoccurred; other­
wise,thedecisioniswrong.Figure10.9showsthisgeometric interpretation."
2847,"Sometexts
useaspheretoshowthedistancebetween allvalidblockcodes."
2848,"Figure10.9 Geometric conceptforfindingdmininerrorcorrection
•Territory ofx
•
e
x
I'dmin>2tTerritory ofy
eoLegendy:..•Anyvalidcodeword •••Anycorrupted codeword
with1toterrors••
InFigure10.9,dmin>2t;sincethenextintegerincrement is1,wecansaythat
dmin=2t+1."
2849,"Toguarantee correction ofuptoterrorsinallcases,theminimum
Hamming distanceinablockcodemustbedmin==2t+1."
2850,"Example 10.9
AcodeschemehasaHamming distancedmin==4.Whatistheerrordetection andcorrection
capability ofthisscheme?"
2851,"Solution
Thiscodeguarantees thedetection ofuptothreeerrOrs(s==3),butitcancorrectuptooneerror."
2852,"Inotherwords,ifthiscodeisusedforerrorcorrection, partofitscapability iswasted.Errorcor­
rectioncodesneedtohaveanoddminimum distance(3,5,7,...)."
2853,"10.3LINEAR BLOCK CODES
Almostallblockcodesusedtodaybelongtoasubsetcalledlinearblockcodes.Theuseof
nonlinear blockcodesforerrordetection andcorrection isnotaswidespread because
theirstructure makestheoretical analysisandimplementation difficult.Wetherefore con­
centrateonlinearblockcodes."
2854,"Theformaldefinition oflinearblockcodesrequirestheknowledgeofabstractalgebra
(particularly Galoisfields),whichisbeyondthescopeofthisbook.Wetherefore givean
informal definition."
2855,"Forourpurposes, alinearblockcodeisacodeinwhichtheexclusive
OR(addition modulo-2) oftwovalidcodewords createsanothervalidcodeword.278CHAPTER 10ERRORDETECTION ANDCORRECTION
Inalinearblockcode,theexclusive OR(XOR)ofany
twovalidcodewordscreatesanother validcodeword."
2856,"Example 10.10
LetusseeifthetwocodeswedefinedinTable10.1andTable10.2belongtotheclassoflinear
blockcodes."
2857,"1.TheschemeinTable10.1isalinearblockcodebecausetheresultofXORing anycodeword
withanyothercodeword isavalidcodeword."
2858,"Forexample, theXORingofthesecondand
thirdcodewords createsthefourthone."
2859,"2.TheschemeinTable10.2isalsoalinearblockcode.Wecancreateallfourcodewords by
XORing twoothercodewords."
2860,"Minimum Distance forLinearBlockCodes
Itissimpletofindtheminimum Hamming distanceforalinearblockcode.Themini­
mumHamming distanceisthenumberofIsinthenonzerovalidcodeword withthe
smallestnumberofIs.
Example 10.11
Inourfirstcode(Table10.1),thenumbers ofIsinthenonzerocodewords are2,2,and2.Sothe
minimum Hamming distanceisdmin=2.Inoursecondcode(Table10.2),thenumbers ofIsin
thenonzero codewords are3, 3,and4.Sointhiscodewehavedmin=3."
2861,"SomeLinearBlockCodes
Letusnowshowsomelinearblockcodes.Thesecodesaretrivialbecausewecaneasily
findtheencoding anddecoding algorithms andchecktheirperformances."
2862,"SimpleParity-Check Code
Perhapsthemostfamiliarerror-detecting codeisthesimpleparity-check code.Inthis
code,ak-bitdataword ischangedtoann-bitcodeword wheren=k+1.Theextrabit,
calledtheparitybit,isselectedtomakethetotalnumberofIsinthecodeword even."
2863,"Although someimplementations specifyanoddnumberofIs,wediscusstheeven
case.Theminimum Hamming distanceforthiscategory isdmin=2,whichmeansthat
thecodeisasingle-bit error-detecting code;itcannotcorrectanyerror."
2864,"Asimpleparity-check codeisasingle-bit error-detecting
codeinwhichn=k+1withdmin=2."
2865,"Ourfirstcode(Table10.1)isaparity-check codewithk-=2 andn=3.Thecodein
Table10.3isalsoaparity-check codewithk=4 andn=5."
2866,"Figure10.10showsapossiblestructure ofanencoder(atthesender)andadecoder
(atthereceiver)."
2867,"Theencoderusesagenerator thattakesacopyofa4-bitdataword (ao,aI'a2'and
a3)andgenerates aparitybitrooThedataword bitsandtheparitybitcreatethe5-bit
codeword."
2868,"TheparitybitthatisaddedmakesthenumberofIsinthecodeword even.SECTION 10.3LINEAR BLOCKCODES 279
Table10.3Simpleparity-check codeC(5,4)
Datawords Codewords Datawords Codewords
0000 00000 1000 10001
0001 00011 1001 10010
0010 00101 1010 10100
0011 00110 1011 10111
0100 01001 1100 11000
0101 01010 1101 11011
0110 01100 1110 11101
0111 01111 1111 11110
Figure10.10Encoder anddecoderforsimpleparity-check code
Sender Receiver
Encoder Decoder
Dataword Dataword
la31a21allaol la31a21adaol
Accept
SYUdmm,r1""0
Decision<-<
'""0
logic '""
t~lC;
IGeneratorI ICheckerI
J tlParitybitUnreliable
la31a21allaolrotransmission
b3lb2lbllboTq~
Codeword Codeword
Thisisnormally donebyaddingthe4bitsofthedataword (modulo-2); theresultisthe
paritybit.Inotherwords,
Ifthenumberof1siseven,theresultis0;ifthenumberof1sisodd,theresultis1."
2869,"Inbothcases,thetotalnumberof1sinthecodeword iseven."
2870,Thesendersendsthecodeword whichmaybecorrupted duringtransmission.
2871,"The
receiverreceivesa5-bitword.Thecheckeratthereceiverdoesthesamethingasthegen­
eratorinthesenderwithoneexception: Theadditionisdoneoverall5bits.Theresult,
whichiscalledthesyndrome, isjust1bit.Thesyndrome is0whenthenumberofIsinthe
receivedcodeword iseven;otherwise, itis1.280CHAPTER 10ERRORDETECTION ANDCORRECTION
Thesyndrome ispassedtothedecisionlogicanalyzer."
2872,"Ifthesyndrome is0,thereis
noerrorinthereceivedcodeword; thedataportionofthereceivedcodeword isaccepted
asthedataword; ifthesyndrome is1,thedataportionofthereceived codeword isdis­
carded.Thedataword isnotcreated."
2873,"Example 10.12
Letuslookatsometransmission scenarios."
2874,"Assumethesendersendsthedataword 1011.Thecode­
wordcreatedfromthisdataword is10111,whichissenttothereceiver.Weexamine fivecases:
1.Noerroroccurs;thereceived codeword is10111.Thesyndrome isO.Thedataword 1011is
created."
2875,"2.Onesingle-bit errorchangesaI'Thereceived codeword is10011.Thesyndrome is1.No
dataword iscreated."
2876,"3.Onesingle-bit errorchanges rooThereceived codeword is10110.Thesyndrome is1.Nodata­
wordiscreated.Notethatalthough noneofthedataword bitsarecorrupted, nodataword is
createdbecausethecodeisnotsophisticated enoughtoshowthepositionofthecorrupted bit."
2877,"4.Anerrorchanges roandaseconderrorchangesa3'Thereceived codeword is00110.Thesyn­
dromeisO.Thedataword 0011iscreatedatthereceiver."
2878,"Notethatherethedataword is
wronglycreatedduetothesyndrome value.Thesimpleparity-check decodercannotdetectan
evennumberoferrors.Theerrorscanceleachotheroutandgivethesyndrome avalueofO."
2879,"5.Threebits-a3, az,andaI-arechanged byerrors.Thereceived codeword is01011.The
syndrome is1.Thedataword isnotcreated.Thisshowsthatthesimpleparitycheck,guaran­
teedtodetectonesingleerror,canalsofindanyoddnumberoferrors."
2880,Asimpleparity-check codecandetectanoddnumberoferrors.
2881,"Abetterapproach isthetwo-dimensional paritycheck.Inthismethod,thedata­
wordisorganized inatable(rowsandcolumns)."
2882,"InFigure10.11,thedatatobesent,five
7-bitbytes,areputinseparaterows.Foreachrowandeachcolumn,1parity-check bitis
calculated."
2883,"Thewholetableisthensenttothereceiver,whichfindsthesyndrome foreach
rowandeachcolumn.AsFigure10.11shows,thetwo-dimensional paritycheckcan
detectuptothreeerrorsthatoccuranywhere inthetable(arrowspointtothelocations of
thecreatednonzerosyndromes)."
2884,"However, errorsaffecting 4bitsmaynotbedetected."
2885,"Hamming Codes
Nowletusdiscussacategory oferror-correcting codescalledHamming codes.These
codeswereoriginally designed withdmin=3,whichmeansthattheycandetectuptotwo
errorsorcorrectonesingleerror.Although therearesomeHamming codesthatcancor­
rectmorethanoneerror,ourdiscussion focusesonthesingle-bit error-correcting code."
2886,"Firstletusfindtherelationship between nandkinaHamming code.Weneedto
chooseanintegerm>=3.Thevaluesofnandkarethencalculated frommasn=2m-1
andk:::n-m.Thenumberofcheckbitsr=m."
2887,AllHamming codesdiscussed inthisbookhavedmin=3.
2888,Therelationship betweenmandninthesecodesisn=2m-1.
2889,"Forexample, ifm=3,thenn:::7andk:::4.ThisisaHamming codeC(7,4)withdmin=3."
2890,"Table10.4showsthedatawords andcodewords forthiscode.SECTION 10.3LINEAR BLOCKCODES 281
Figure10.11 Two-dimensional parity-check code
J
Columnparities
a.Designofrowandcolumnparities
t
b.Oneerroraffectstwoparities
~~fJfji:;f;ji,~!tt~~I'~iij;f~~s~&fi1.i~--+­
rij~~J~I'tr~~;~*~i~
d.Threeerrorsaffectfourparities
Table10.4Hamming codeC(7,4)c.Twoerrorsaffecttwoparities
e.Fourerrorscannotbedetected
Datawords Codewords Datawords Codewords
0000 0000000 1000 1000110
0001 0001101 1001 1001011
0010 0010111 1010 1010001
0011 0011010 1011 1011100
0100 0100011 1100 1100101
0101 0101110 1101 1101000
0110 0110100 1110 1110010
0111 0111001 1111 1111111282CHAPTER 10ERRORDETECTION ANDCORRECTION
Figure10.12showsthestructure oftheencoderanddecoderforthisexample."
2891,"Figure10.12ThestructureoftheencoderanddecoderforaHamming code
Sender Receiver
Encoder Decoder
Dataword Dataword
Ia31azla1IaoI la31azlatlaol
d.CDlTeCtiOi:1,1:199ie."
2892,"ttlSyndromeISzStlSoI',
I
IfGeneratorI lCheckerI'ttt
lUnreliable
la3lazlatlaolr2hITOtransmission
b31bzlbtlboIq21qllqol
Codeword Codeword
Acopyofa4-bitdataword isfedintothegenerator thatcreatesthreeparitychecks
ro,rl'andr2'asshownbelow:
TO=;aZ+al +ao
Tl=a3+az+al
T2=aI+aO+a3modulo-2
modulo-2
modulo-2
Inotherwords,eachoftheparity-check bitshandles3outofthe4bitsofthedata­
word.Thetotalnumberof1sineach4-bitcombination (3dataword bitsand1parity
bit)mustbeeven.Wearenotsayingthatthesethreeequations areunique;anythree
equations thatinvolve3ofthe4bitsinthedataword andcreateindependent equations
(acombination oftwocannotcreatethethird)arevalid."
2893,"Thecheckerinthedecodercreatesa3-bitsyndrome (s2s1s0)inwhicheachbitis
theparitycheckfor4outofthe7bitsinthereceived codeword:
So==bz+bi+bo+qo
Sl=b3+bz+bI+ql
8Z==bl+bo+b3+qzmodulo-Z
modulo-2
modulo-2
Theequations usedbythecheckerarethesameasthoseusedbythegenerator with
theparity-check bitsaddedtotheright-hand sideoftheequation."
2894,"The3-bitsyndrome
createseightdifferent bitpatterns(000to111)thatcanrepresent eightdifferent condi­
tions.Theseconditions definealackoferrororanerrorin1ofthe7bitsofthereceived
codeword, asshowninTable10.5.SECTION 10.3LINEAR BLOCKCODES 283
Table10.5Logicaldecision madebythecorrection logicanalyzer a/thedecoder
Syndrome 000 001 010 011 100 101 110 111
Error None % ql b2q2 bob3bl
Notethatthegenerator isnotconcerned withthefourcasesshadedinTable10.5
because thereiseithernoerrororanerrorintheparitybit.Intheotherfourcases,1of
thebitsmustbeflipped(changed from0to1or1to0)tofindthecorrectdataword."
2895,Thesyndrome valuesinTable10.5arebasedonthesyndrome bitcalculations.
2896,"For
example, ifqoisinerror,Soistheonlybitaffected; thesyndrome, therefore, is001.If
b2isinerror,Soands1arethebitsaffected; thesyndrome, therefore isOIl.Similarly, if
bIisinerror,all3syndrome bitsareaffected andthesyndrome is111."
2897,"Therearetwopointsweneedtoemphasize here.First,iftwoerrorsoccurduring
transmission, thecreateddataword mightnotbetherightone.Second,ifwewantto
usetheabovecodeforerrordetection, weneedadifferent design."
2898,"Example 10.13
Letustracethepathofthreedatawords fromthesendertothedestination:
1.Thedataword 0100becomes thecodeword 0100011."
2899,Thecodeword 0100011isreceived.
2900,"Thesyndrome is000(noerror),thefinaldataword is0100."
2901,2.Thedataword 0111becomes thecodeword 0111001.
2902,Thecodeword 0011001 isreceived.
2903,"Thesyndrome is011.According toTable10.5,b2isinerror.Afterflippingb2(changing the
1to0),thefinaldataword is0111."
2904,3.Thedataword 1101becomes thecodeword 1101000.
2905,"Thecodeword 0001000 isreceived
(twoerrors).Thesyndrome is101,whichmeansthatboisinerror.Afterflippingba,weget
0000,thewrongdataword."
2906,Thisshowsthatourcodecannot correct twoerrors.
2907,"Example 10.14
Weneedadataword ofatleast7bits.Calculate valuesofkandnthatsatisfythisrequirement."
2908,"Solution
Weneedtomakek=n-mgreaterthanorequalto7,or21n-1-m~7."
2909,"1.Ifwesetm=3,theresultisn=23-1andk=7 -3,or4,whichisnotacceptable."
2910,"2.Ifwesetm=4,thenn=24-1=15andk=15-4=11,whichsatisfiesthecondition."
2911,"Sothe
codeisC(l5,11).Therearemethodstomakethedataword aspecificsize,butthediscussion
andimplementation arebeyondthescopeofthisbook."
2912,"Performance
AHamming codecanonlycorrectasingleerrorordetectadoubleerror.However,
thereisawaytomakeitdetectabursterror,asshowninFigure10.13."
2913,"Thekeyistosplitabursterrorbetween severalcodewords, oneerrorforeach
codeword."
2914,"Indatacommunications, wenormally sendapacketoraframeofdata.To
maketheHamming coderespondtoabursterrorofsizeN,weneedtomakeNcodewords out
ofourframe.Then,insteadofsendingonecodeword atatime,wearrangethecodewords ina
tableandsendthebitsinthetableacolumnatatime.InFigure10.13,thebitsaresentcolunm
bycolumn(fromtheleft).Ineachcolumn,thebitsaresentfromthebottomtothetop.Inthis
way,aframeismadeoutofthefourcodewords andsenttothereceiver."
2915,"Figure10.13shows284CHAPTER 10ERRORDETECTION ANDCORRECTION
Figure10.13Bursterrorcorrection usingHamming code
Sender
Codeword 4
Codeword 3Receiver
Codeword 4
Codeword 3
Codeword 2 1
Codeword 1 1
BurstelTor
-------------------------------------~~~---------------------------,
-r---r---r---r---r--,...--...---,,----.,:
Adataunitintransit
COlTUpted bits
thatwhenabursterrorofsize4corruptstheframe,only1bitfromeachcodeword iscor­
rupted.Thecorrupted bitineachcodeword cantheneasilybecorrected atthereceiver."
2916,"10.4CYCLIC CODES
Cycliccodesarespeciallinearblockcodeswithoneextraproperty."
2917,"Inacycliccode,if
acodeword iscyclically shifted(rotated), theresultisanothercodeword."
2918,"Forexample,
if1011000 isacodeword andwecyclically left-shift, then0110001 isalsoacodeword."
2919,"Inthiscase,ifwecallthebitsinthefirstwordaotoa6'andthebitsinthesecondword
botob6,wecanshiftthebitsbyusingthefollowing:
Intherightmost equation, thelastbitofthefirstwordiswrapped aroundand
becomes thefirstbitofthesecondword."
2920,"CyclicRedundancy Check
Wecancreatecycliccodestocorrecterrors.However, thetheoretical background
required isbeyondthescopeofthisbook.Inthissection,wesimplydiscussacategory
ofcycliccodescalledthecyclicredundancy check(CRC)thatisusedinnetworks
suchasLANsandWANs.SECTION 10.4CYCUC CODES 285
Table10.6showsanexample ofaCRCcode.Wecanseeboththelinearandcyclic
properties ofthiscode."
2921,"Table10.6ACRCcodewithC(7,4)
Dataword Codeword Dataword Code~rord
0000 0000000 1000 1000101
0001 0001011 1001 1001110
0010 0010110 1010 1010011
0011 0011101 1011 1011000
0100 0100111 1100 1100010
0101 0101100 1101 1101001
0110 0110001 1110 1110100
0111 0111010 1111 1111111
Figure10.14showsonepossibledesignfortheencoderanddecoder."
2922,"Figure10.14CRCencoderanddecoder
Sender Receiver
DatawordDecoder
Unreliable
transmissionDataword
000Encoder
Intheencoder, thedataword haskbits(4here);thecodeword hasnbits(7here)."
2923,"Thesizeofthedataword isaugmented byaddingn-k(3here)Ostotheright-hand side
oftheword.Then-bitresultisfedintothegenerator."
2924,"Thegenerator usesadivisorof
sizen-k+I(4here),predefined andagreedupon.Thegenerator dividestheaug­
menteddataword bythedivisor(modulo-2 division)."
2925,"Thequotientofthedivisionisdis­
carded;theremainder (r2rlro)isappended tothedataword tocreatethecodeword."
2926,Thedecoderreceivesthepossiblycorrupted codeword.
2927,"Acopyofallnbitsisfedto
thecheckerwhichisareplicaofthegenerator."
2928,"Theremainder produced bythechecker286CHAPTER 10ERRORDETECTION ANDCORRECTiON
isasyndrome ofn-k(3here)bits,whichisfedtothedecisionlogicanalyzer."
2929,"Theana­
lyzerhasasimplefunction."
2930,"Ifthesyndrome bitsareallas,the4leftmostbitsofthe
codeword areaccepted asthedataword (interpreted asnoerror);otherwise, the4bits
arediscarded (error)."
2931,"Encoder
Letustakeacloserlookattheencoder.Theencodertakesthedataword andaugments
itwithn-knumberofas.Itthendividestheaugmented dataword bythedivisor,as
showninFigure10.15."
2932,"Figure10.15Division inCRCencoder
DivisionDalaword11001I
~
Quotient
1 0 1 0
Divisor 1 0 11)I 0 0 1 L..T--i'------T--'
1011Dividend:
augmenled
dataword
Leftmost bit0:
use0000divisor
Leftmost bit0:
use0000divisoro100
o0 0 0
1000
101 1
o1 1 0
000 0
I110IRemainder
Codeword11001'-1-1-0-1
Dataword Remainder
Theprocessofmodulo-2 binarydivisionisthesameasthefamiliardivisionpro­
cessweusefordecimal numbers."
2933,"However, asmentioned atthebeginning ofthe
chapter,inthiscaseadditionandsubtraction arethesame.WeusetheXORoperation
todoboth."
2934,"Asindecimaldivision, theprocessisdonestepbystep.Ineachstep,acopyofthe
divisorisXORedwiththe4bitsofthedividend."
2935,"TheresultoftheXORoperation
(remainder) is3bits(inthiscase),whichisusedforthenextstepafter1extrabitis
pulleddowntomakeit4bitslong.Thereisoneimportant pointweneedtoremember
inthistypeofdivision.Iftheleftmostbitofthedividend (orthepartusedineachstep)
is0,thestepcannotusetheregulardivisor;weneedtouseanall-Osdivisor."
2936,"Whentherearenobitslefttopulldown,wehavearesult.The3-bitremainder
formsthecheckbits(r2'rl'andro).Theyareappended tothedataword tocreatethe
codeword.SECTION 10.4CYCLIC CODES 287
Decoder
Thecodeword canchangeduringtransmission."
2937,"Thedecoderdoesthesamedivision
processastheencoder.Theremainder ofthedivisionisthesyndrome.Ifthesyndrome
isallOs,thereisnoerror;thedataword isseparated fromthereceived codeword and
accepted."
2938,"Otherwise, everything isdiscarded."
2939,"Figure10.16showstwocases:Theleft­
handfigureshowsthevalueofsyndrome whennoerrorhasoccurred; thesyndrome is
000.Theright-hand partofthefigureshowsthecaseinwhichthereisonesingleerror."
2940,Thesyndrome isnotallOs(itisOIl).
2941,"Figure10.16Division intheCRCdecoderfortwocases
Codeword 11o00111 0I
Divisiont
I 0 I 0
1 0 11)10 0o1 1o_Codeword
101
1+10II 1
00o()
1I
01
o0 0
011
~Syndrome
tDataword_
discarded
Divisor
Youmaybewondering howthedivisor]011ischosen.Laterinthechapterwepresent
somecriteria,butingeneralitinvolvesabstractalgebra."
2942,"Hardware Implementation
Oneoftheadvantages ofacycliccodeisthattheencoderanddecodercaneasilyand
cheaplybeimplemented inhardware byusingahandfulofelectronic devices.Also,a
hardware implementation increases therateofcheckbitandsyndrome bitcalculation."
2943,"Inthissection,wetrytoshow,stepbystep,theprocess."
2944,"Thesection,however, is
optionalanddoesnotaffecttheunderstanding oftherestofthechapter."
2945,"Divisor
Letusfirstconsider thedivisor.Weneedtonotethefollowing points:
1.Thedivisorisrepeatedly XORedwithpartofthedividend.288CHAPTER 10ERRORDETECTION ANDCORRECTION
2.Thedivisorhasn-k+1bitswhicheitherarepredefined orareallOs.Inother
words,the bitsdonotchangefromonedataword toanother.Inourprevious exam­
ple,thedivisorbitswereeither1011or0000.Thechoicewasbasedontheleftmost
bitofthepartoftheaugmented databitsthatareactiveintheXORoperation."
2946,3.Acloselookshowsthatonlyn-kbitsofthedivisorisneededintheXORoperation.
2947,"Theleftmost bitisnotneededbecausetheresultoftheoperation isalways0,no
matterwhatthevalueofthisbit.ThereasonisthattheinputstothisXORoperation
areeitherbothOsorboth1s.Inourprevious example, only3bits,not4,isactually
usedintheXORoperation."
2948,"Usingthesepoints,wecanmakeafixed(hardwired) divisorthatcanbeusedforacyclic
codeifweknowthedivisorpattern.Figure10.17showssuchadesignforourprevious
example."
2949,WehavealsoshowntheXORdevicesusedfortheoperation.
2950,"Figure10.17Hardwired designofthedivisorinCRC
Leftmost bitofthepart
ofdividend involved
inXORoperation
•
Brokenline:
thisbitisalways0+(±)
XOR
Notethatiftheleftmost bitofthepartofdividend tobeusedinthisstepis1,the
divisorbits(d2d1do)areall;iftheleftmostbitis0,thedivisorbitsarc000.Thedesign
provides theright choice basedontheleftmostbit."
2951,"Augmented Dataword
Inourpaper-and-pencil divisionprocessinFigure10.15,weshowtheaugmented data­
wordasfixedinposition withthedivisorbitsshiftingtotheright,1bitineachstep."
2952,Thedivisorbitsarealignedwiththeappropriate partoftheaugmented dataword.
2953,"Now
thatourdivisorisfixed,weneedinsteadtoshiftthebitsoftheaugmented dataword tothe
left(opposite direction) toalignthedivisorbitswiththeappropriate part.Thereisno
needtostoretheaugmented dataword bits."
2954,"Remainder
Inourprevious example, theremainder is3bits(n-kbitsingeneral)inlength.Wecan
usethreeregisters (single-bit storagedevices) toholdthesebits.Tofindthefinal
remainder ofthedivision, weneedtomodifyourdivisionprocess.Thefollowing isthe
step-by-step processthatcanbeusedtosimulate thedivisionprocessinhardware (or
eveninsoftware)."
2955,"1.Weassumethattheremainder isoriginally allOs(000inourexample).SECTION 10.4CYCLIC CODES 289
2.Ateachtimeclick(arrivalof1bitfromanaugmented dataword), werepeatthe
following twoactions:
a.Weusetheleftmostbittomakeadecisionaboutthedivisor(011or000)."
2956,"b.Theother2bitsoftheremainder andthenextbitfromtheaugmented dataword
(totalof3bits)areXORedwiththe3-bitdivisortocreatethenextremainder."
2957,"Figure10.18showsthissimulator, butnotethatthisisnotthefinaldesign;therewillbe
moreimprovements."
2958,"Figure10.18Simulation ofdivision inCRCencoder
.C;/~~~/~I~o~Augmented dataword
,-(B~I0 0 0 0 0 TIme:I.iLk' ,, , ,
Time:2L:1i,t-',~l~o ot~/-@ 0/~@~ 0 000,o?:-'mMft ,
/ , ,
Time:3L:i!&,
°t',~1~0 °t--dJ/-(B 1/-@~ 000'p' ~~~ ,
/ , ,
Time:4L:1i,
/~I~ ,~1~1 ot~/-(B0 000
8~:<8?::<8ffi) ,
/ , ,
Time:5L::Ii/~~--dJt',~l~o /~l±)~ 0 0 ,
/ , ,
Time:6~.It-',!1~0 ot~/-l±) 0/-l±)~ 0 ,
/ , ,
Time:7l1' °t--dJ°t'ol/-0 1,'-0~,-(B~o
~- /
/ / ,
/ / /IIoJIT]\~.''""'-<
I
Finalremainder
Ateachclocktick,shownasdifferent times,oneofthebitsfromtheaugmented
dataword isusedintheXORprocess.Ifwelookcarefully atthedesign,wehave seven
stepshere,whileinthepaper-and-pencil methodwehadonlyfoursteps.Thefirstthree
stepshavebeenaddedheretomakeeachstepequalandtomakethedesignforeachstep
thesame.Steps1,2,and3pushthefirst3bitstotheremainder registers; steps4,5,6,
and7matchthepaper-and-pencil design.Notethatthevaluesintheremainder register
insteps4to7exactlymatchthevaluesinthepaper-and-pencil design.Thefinalremain­
derisalsothesame."
2959,"Theabovedesignisfordemonstration purposes only.Itneedssimplification tobe
practical."
2960,"First,wedonotneedtokeeptheintermediate valuesoftheremainder bits;
weneedonlythefinalbits.Wetherefore needonly3registers insteadof24.Afterthe
XORoperations, wedonotneedthebitvaluesoftheprevious remainder."
2961,"Also,wedo290CHAPTER 10ERRORDETECTION ANDCORRECTION
notneed21XORdevices;twoareenoughbecausetheoutputofanXORoperation in
whichoneofthebitsis0issimplythevalueoftheotherbit.Thisotherbitcanbeused
astheoutput.Withthesetwomodifications, thedesignbecomes tremendously simpler
andlessexpensive, asshowninFigure10.19."
2962,"Figure10.19TheCRCencoderdesignusingshiftregisters
Lillf-ol.f-----~lAugmented dataword
o0 1000
Weneed,however, tomaketheregisters shiftregisters."
2963,"AI-bitshiftregisterholds
abitforadurationofoneclocktime.Atatimeclick,theshiftregisteraccepts the bitat
itsinputport,storesthenewbit,anddisplaysitontheoutputport.Thecontentandthe
outputremainthesameuntilthenextinputarrives.WhenweconnectseveralI-bitshift
registers together, itlooksasifthecontentsoftheregisterareshifting."
2964,"GeneralDesign
AgeneraldesignfortheencoderanddecoderisshowninFigure10.20."
2965,"Figure10.20GeneraldesignofencoderanddecoderofaCRCcode
Note:
ThedivisorlineandXORare
missingifthecorresponding
bitinthedivisorisO."
2966,"Dataword
rn_k_l rl Yo
a.Encoder
L{;b Received ...codeword..+
sn-k-l sl So
b.Decoder
Notethatwehaven-kI-bitshiftregisters inboththeencoderanddecoder."
2967,"We
haveupton-kXORdevices,butthedivisorsnormally haveseveralOsintheirpattern,
whichreducesthenumberofdevices.Alsonotethat,insteadofaugmented datawords,
weshowthedataword itselfastheinputbecauseafterthebitsinthedataword areall
fedintotheencoder,theextrabits,whichallareOs,donothaveanyeffectontheright­
mostXOR.Ofcourse,theprocessneedstobecontinued foranothern-kstepsbeforeSECTION 10.4CYCLIC CODES 291
thecheckbitsareready.Thisfactisoneofthecriticisms ofthisdesign.Betterschemes
havebeendesigned toeliminate thiswaitingtime(thecheckbitsarereadyafterksteps),
butweleavethisasaresearch topicforthereader.Inthedecoder, however, theentire
codeword mustbefedtothedecoderbeforethesyndrome isready."
2968,"Polynomials
Abetterwaytounderstand cycliccodesandhowtheycanbeanalyzed istorepresent
themaspolynomials."
2969,"Again,thissectionisoptional."
2970,"ApatternofOsand1scanberepresented asapolynomial withcoefficients of0and
1.Thepowerofeachtermshowsthepositionofthebit;thecoefficient showsthevalue
ofthebit.Figure10.21showsabinarypatternanditspolynomial representation."
2971,"InFig­
ure10.21aweshowhowtotranslateabinarypatterntoapolynomial; inFigure1O.21b
weshowhowthepolynomial canbeshortened byremoving alltermswithzerocoeffi­
cientsandreplacing xlbyxandxOby1."
2972,"Figure10.21Apolynomial torepresent abinaryword
I1I0I0I0I0I1I1I
Iiii+oX'+ox4+o~+o?+Ixl+IxoI
a.Binarypatternandpolynomial b.Shortform
Figure10.21showsoneimmediate benefit;a7-bitpatterncanbereplaced bythree
terms.Thebenefitisevenmoreconspicuous whenwehaveapolynomial suchasx23+
X3+1.Herethebitpatternis24bitsinlength(threeIsandtwenty-one Os)whilethe
polynomial isjustthreeterms."
2973,"DegreeofaPolynomial
Thedegreeofapolynomial isthehighestpowerinthepolynomial."
2974,"Forexample, the
degreeofthepolynomial x6+x+1is6.Notethatthedegreeofapolynomial is1less
thatthenumberofbitsinthepattern.Thebitpatterninthiscasehas7bits."
2975,"AddingandSubtracting Polynomials
Addingandsubtracting polynomials inmathematics aredonebyaddingorsubtracting
thecoefficients oftermswiththesamepower.Inourcase,thecoefficients areonly0
and1,andaddingisinmodulo-2."
2976,Thishastwoconsequences.
2977,"First,additionandsub­
tractionarethesame.Second,addingorsubtracting isdonebycombining termsand
deletingpairsofidentical terms.Forexample, addingx5+x4+x2andx6+x4+x2gives
justx6+x5.Thetermsx4andx2aredeleted.However, notethatifweadd,forexample,
threepolynomials andwegetx2threetimes,wedeleteapairofthemandkeepthethird.292CHAPTER 10ERRORDETECTION ANDCORRECTION
Multiplying orDividing Terms
Inthisarithmetic, multiplying atermbyanothertermisverysimple;wejustaddthe
powers.Forexample, x3xx4isx7,Fordividing, wejustsubtractthepowerofthesec­
ondtermfromthepowerofthefirst.Forexample, x51x2isx3."
2978,"Multiplying TwoPolynomials
Multiplying apolynomial byanotherisdonetermbyterm.Eachtermofthefirstpolyno­
mialmustbemultiplied byalltermsofthesecond.Theresult,ofcourse,isthensimplified,
andpairsofequaltermsaredeleted.Thefollowing isanexample:
(~+X3 +~+x)(~+x+1)
=~+~+~+~+0+~+0+~+~+~+~+x
=x7+x6+x3+x
Dividing OnePolynomial byAnother
Division ofpolynomials isconceptually thesameasthebinarydivisionwediscussed
foranencoder."
2979,"Wedividethefirsttermofthedividend bythefirsttermofthedivisorto
getthefirsttermofthequotient."
2980,"Wemultiply theterminthequotientbythedivisorand
subtracttheresultfromthedividend."
2981,"Werepeattheprocessuntilthedividend degreeis
lessthanthedivisordegree.Wewillshowanexampleofdivisionlaterinthischapter."
2982,"Shifting
Abinarypatternisoftenshiftedanumberofbitstotherightorleft.Shiftingtotheleft
meansaddingextraOsasrightmost bits;shiftingtotherightmeansdeletingsomeright­
mostbits.Shiftingtotheleftisaccomplished bymultiplying eachtermofthepolynomial
byxn,wheremisthenumberofshiftedbits;shiftingtotherightisaccomplished by
dividingeachtermofthepolynomial byxn.Thefollowing showsshiftingtotheleftand
totheright.Notethat wedonothavenegativepowersinthepolynomial representation."
2983,"Shiftingleft3bits:
Shiftingright3bits:10011becomes 10011000
10011becomes 10x4+x+1becomes x7+x4+~
x4+x+1becomes x
Whenweaugmented thedataword intheencoderofFigure10.15,weactually
shiftedthebitstotheleft.Alsonotethatwhenweconcatenate twobitpatterns, weshift
thefirstpolynomial totheleftandthenaddthesecondpolynomial."
2984,"CyclicCodeEncoder UsingPolynomials
Nowthatwehavediscussed operations onpolynomials, weshowthecreationofacode­
wordfromadataword."
2985,"Figure10.22isthepolynomial versionofFigure10.15.Wecan
seethattheprocessisshorter.Thedataword 1001isrepresented asx3+1.Thedivisor
1011isrepresented asx3+x+1.Tofindtheaugmented dataword, wehaveleft-shifted
thedataword 3bits(multiplying byx\Theresultisx6+x3.Divisionisstraightforward."
2986,"Wedividethefirsttermofthedividend, x6,bythefirsttermofthedivisor,x3.Thefirst
termofthequotientisthenx6/x3,orx3.Thenwemultiply x3bythedivisorandsubtract
(according toourprevious definition ofsubtraction) theresultfromthedividend."
2987,"TheSECTION 10.4CYCLiC CODES 293
resultisx4,withadegreegreaterthanthedivisor's degree;wecontinue todivideuntil
thedegreeoftheremainder islessthanthedegreeofthedivisor."
2988,"Figure10.22CRCdivisionusingpolynomials
DatawordIx3+1
t
Divisor x3+xDividend:
x3+x+I )x6+ x3 augmented
x6+.0+x3 dataword
.0
.0+x2+x
Ix2+xIRemainder
CodewordIx6+x3Ixl+xI
Dataword Remainder
Itcanbeseenthatthepolynomial representation caneasilysimplifytheoperation
ofdivisioninthiscase,becausethetwostepsinvolving all-Osdivisorsarenotneeded
here.(Ofcourse,onecouldarguethattheall-Osdivisorstepcanalsobeeliminated in
binarydivision.) Inapolynomial representation, thedivisorisnormally referredtoas
thegenerator polynomial t(x)."
2989,"Thedivisorinacycliccodeisnormally calledthegenerator polynomial
orsimplythegenerator."
2990,"CyclicCodeAnalysis
Wecananalyzeacycliccodetofinditscapabilities byusingpolynomials."
2991,"Wedefine
thefollowing, wheref(x) isapolynomial withbinarycoefficients."
2992,"Dataword: d(x)
Syndrome: sex)Codeword: c(x)
Error:e(x)Generator: g(x)
Ifsex)isnotzero,thenoneormorebitsiscorrupted."
2993,"However, ifsex)iszero,either
nobitiscorrupted orthedecoderfailedtodetectanyerrors."
2994,"Inacycliccode,
I.Ifs(x)""*0,oneormorebitsiscorrupted."
2995,"2.Ifsex)=0,either
a.Nobitiscorrupted."
2996,"or
b.Somebitsarecorrupted, butthedecoderfailedtodetectthem.294CHAPTER 10ERRORDETECTION ANDCORRECTION
Inouranalysiswewanttofindthecriteriathatmustbeimposed onthegenerator,
g(x)todetectthetypeoferrorweespecially wanttobedetected."
2997,"Letusfirstfindthe
relationship amongthesentcodeword, error,received codeword, andthegenerator."
2998,"Wecansay
Received codeword=c(x)+e(x)
Inotherwords,thereceivedcodeword isthesumofthesentcodeword andtheerror."
2999,Thereceiverdividesthereceived codeword byg(x)togetthesyndrome.
3000,"Wecanwrite
thisas
Received codeword=c(x)+e(x)
g(x) g(x) g(x)
Thefirsttermattheright-hand sideoftheequality doesnothavearemainder
(according tothedefinition ofcodeword)."
3001,"Sothesyndrome isactuallytheremainder of
thesecondtermontheright-hand side.Ifthistermdoesnothavearemainder (syn­
drome=0),eithere(x)is0ore(x)isdivisible byg(x).Wedonothavetoworryabout
thefirstcase(thereisnoerror);thesecondcaseisveryimportant."
3002,"Thoseerrorsthatare
divisible byg(x)arenotcaught."
3003,"Inacycliccode,thosee(x)errorsthataredivisible byg(x)arenotcaught."
3004,"Letusshowsomespecificerrorsandseehowtheycanbecaughtbyawell­
designedg(x)."
3005,"Single-Bit Error
Whatshouldbethestructure ofg(x)toguarantee thedetection ofasingle-bit error?A
single-bit errorise(x)=xi,whereiisthepositionofthebit.Ifasingle-bit erroriscaught,
thenxiisnotdivisible byg(x).(Notethatwhenwesaynotdivisible, wemeanthatthere
isaremainder.) Ifg(x)ha~atleasttwoterms(whichisnormally thecase)andthecoeffi­
cientofxOisnotzero(therightmost bitis1),thene(x)cannotbedividedbyg(x)."
3006,"Hthegenerator hasmorethanonetermandthecoefficient ofxOis1,
allsingleerrorscanbecaught."
3007,"Example 10.15
Whichofthefollowing g(x)valuesguarantees thatasingle-bit erroriscaught?Foreachcase,
whatistheerrorthatcannotbecaught?"
3008,"a.x+1
b.x3
c.1SECTION 10.4CYCLIC CODES 295
Solution
a.Noxicanbedivisible byx+1.Inotherwords,xi/ex+1)alwayshasaremainder."
3009,"Sothe
syndrome isnonzero."
3010,Anysingle-bit errorcanbecaught.
3011,"b.Ifiisequaltoorgreaterthan3,xiisdivisible byg(x).Theremainder ofxi/x3iszero,and
thereceiver isfooledintobelieving thatthereisnoerror,although theremightbeone."
3012,"Notethatinthiscase,thecorrupted bitmustbeinposition 4orabove.Allsingle-bit
errorsinpositions Ito3arecaught."
3013,"c.Allvaluesofimakejdivisible byg(x).Nosingle-bit errorcanbecaught.Inaddition, this
g(x)isuselessbecauseitmeansthecodeword isjustthedataword augmented withn-kzeros."
3014,"TwoIsolatedSingle-Bit Errors
Nowimagine therearetwosingle-bit isolatederrors.Underwhatconditions canthis
typeoferrorbecaught?Wecanshowthistypeoferrorase(x)=:xl+xi.Thevaluesofi
andjdefinethepositions oftheerrors,andthedifference j-idefinesthedistance
between thetwoerrors,asshowninFigure10.23."
3015,"Figure10.23 Representation o/twoisolatedsingle-bit errorsusingpolynomials
I'Difference: j-i
Wecanwritee(x)=1(xj-i+1).Ifg(x)hasmorethanonetermandonetermisxo,it
cannotdivide1,aswesawintheprevioussection.Soifg(x)istodividee(x),itmustdivide
xj-i+1.Inotherwords,g(x)mustnotdivideY!+1,wheretisbetween0andn-1.However,
t=:Oismeaningless andt=Iisneededaswewillseelater.Thismeanstshouldbebetween
2andn-1."
3016,"Hagenerator cannotdivider+1(tbetween0andn-1),
thenallisolateddoubleerrorscanbedetected."
3017,"Example 10.16
Findthestatusofthefollowing generators relatedtotwoisolated, single-bit errors."
3018,"a.x+1
b.x4+I
c.x7+x6+1
d.xls+xI4+1
Solution
a.Thisisaverypoorchoiceforagenerator."
3019,Anytwoerrorsnexttoeachothercannotbedetected.
3020,"b.Thisgenerator cannotdetecttwoerrorsthatarefourpositions apart.Thetwoerrorscan
beanywhere, butiftheirdistance is4,theyremainundetected."
3021,c.Thisisagoodchoiceforthispurpose.
3022,"d.Thispolynomial cannotdivide any erroroftypext+1iftislessthan32,768.Thismeans
thatacodeword withtwoisolatederrorsthatarenexttoeachotherorupto32,768bits
apartcanbedetected bythisgenerator.296CHAPTER 10ERRORDETECTION ANDCORRECTION
OddNumbers ofErrors
Agenerator withafactorofx+1cancatchalloddnumbers oferrors.Thismeansthat
weneedtomakex+1 afactorofanygenerator."
3023,"Notethatwearenotsayingthatthe
generator itselfshouldbex+1;wearesayingthatitshouldhaveafactorofx+1.Ifit
isonlyx+1,itcannotcatchthetwoadjacentisolatederrors(seetheprevious section)."
3024,"Forexample, x4+x2+X+1cancatchallodd-numbered errorssinceitcanbewritten
asaproductofthetwopolynomials x+1andx3+x2+1."
3025,Agenerator thatcontains afactorofx+1candetectallodd-numbered errors.
3026,"BurstErrors
Nowletusextendouranalysistothebursterror,whichisthemostimportant ofall.A
bursterrorisoftheforme(x)=eJ+...+xi).Notethedifference betweenabursterror
andtwoisolatedsingle-bit errors.Thefirstcanhavetwotermsormore;thesecondcan
onlyhavetwoterms.Wecanfactoroutxiandwritetheerrorasxi(xJ-i+...+1).Ifour
generator candetectasingleerror(minimum condition foragenerator), thenitcannot
dividexi.Whatweshouldworryaboutarethosegenerators thatdividexJ-i+...+1.In
otherwords,theremainder of(xJ-i+...+1)/(xr+...+1)mustnotbezero.Notethat
thedenominator isthegenerator polynomial."
3027,"Wecanhavethreecases:
1.Ifj-i<r,theremainder canneverbezero.Wecanwritej-i=L-1,whereLis
thelengthoftheerror.SoL-1<rorL<r+1orL:::;:r.Thismeansallbursterrors
withlengthsmallerthanorequaltothenumberofcheckbitsrwillbedetected."
3028,"2.Insomerarecases,ifj-i=r,orL=r+1,thesyndrome is0andtheerrorisunde­
tected.Itcanbeprovedthatinthesecases,theprobability ofundetected bursterrorof
lengthr+1is(ll2r-l.Forexample, ifourgenerator isxl4+~+1,inwhichr=14,a
bursterroroflengthL=15canslipbyundetected withtheprobability of(1/2)14-1 or
almost1in10,000."
3029,"3.Insomerarecases,ifj-i>r,orL>r+1,thesyndrome is0andtheerrorisunde­
tected.Itcanbeprovedthatinthesecases,theprobability ofundetected bursterror
oflengthgreaterthanr+1is(112tForexample, ifourgenerator isx14+x3+1,in
whichr=14,abursterroroflengthgreaterthan15canslipbyundetected withthe
probability of(112)14oralmost1in16,000cases."
3030,"oAllbursterrorswithL::::;rwillbedetected.oAllbursterrorswithL=r+1willbedetected withprobability 1-(112/-1•
oAllbursterrorswithL>r+1willbedetected withprobability 1-(1/2[."
3031,"Example 10.17
Findthesuitability ofthefollowing generators inrelationtobursterrorsofdifferent lengths."
3032,"a.x6+1
b.xI8+x7+x+1
c.x32+~3+x7+1SECTION 10.4CYCLIC CODES 297
Solution
a.Thisgenerator candetectallbursterrorswithalengthlessthanorequalto6bits;3out
of100bursterrorswithlength7willslipby;16outof1000bursterrorsoflength8or
morewillslipby."
3033,"b.Thisgenerator candetectallbursterrorswithalengthlessthanorequalto18bits;8out
of1millionbursterrorswithlength19willslipby;4outofImillionbursterrorsof
length20ormorewillslipby."
3034,"c.Thisgenerator candetectallbursterrorswithalengthlessthanorequalto32bits;5out
of10billionbursterrorswithlength33willslipby;3outof10billionbursterrorsof
length34ormorewillslipby."
3035,"Summary
Wecansummarize thecriteriaforagoodpolynomial generator:
Agoodpolynomial generator needstohavethefollowing characteristics:
1.Itshouldhaveatleasttwoterms."
3036,2.Thecoefficient ofthetermxOshouldbe1.
3037,"3.ItshouldnotdivideXl+1,fortbetween2andn-1."
3038,4.Itshouldhavethefactorx+1.
3039,"Standard Polynomials
Somestandard polynomials usedbypopularprotocols foreRegeneration areshown
inTable10.7.
Table10.7Standard polynomials
Name Polynomial Application
CRC-8 xS+x2+x+1 ATMheader
CRC-lO xIO+x9+~+x4+x2+ I ATMAAL
CRC-16 x16+x12+~+1 HDLC
CRC-32 x32+26+23+x22+x16+x12+xlI+xlO+ LANs
x8+x7+x5+x4+x2+x+1
Advantages ofCyclicCodes
Wehaveseenthatcycliccodeshaveaverygoodperformance indetecting single-bit
errors,doubleerrors,anoddnumberoferrors,andbursterrors.Theycaneasilybe
implemented inhardware andsoftware."
3040,"Theyareespecially fastwhenimplemented in
hardware."
3041,Thishasmadecycliccodesagoodcandidate formanynetworks.
3042,"OtherCyclicCodes
Thecycliccodeswehavediscussed inthissectionareverysimple.Thecheckbitsand
syndromes canbecalculated bysimplealgebra.Thereare,however, morepowerful
polynomials thatarebasedonabstractalgebrainvolving Galoisfields.Thesearebeyond298CHAPTER 10ERRORDETECTION ANDCORRECTION
thescopeofthisbook.Oneofthemostinteresting ofthesecodesistheReed-Solomon
codeusedtodayforbothdetection andcorrection."
3043,"10.5CHECKSUM
Thelasterrordetection methodwediscusshereiscalledthechecksum."
3044,"Thechecksum
isusedintheInternetbyseveralprotocols although notatthedatalinklayer.However,
webrieflydiscussitheretocomplete ourdiscussion onerrorchecking."
3045,"Likelinearandcycliccodes,thechecksum isbasedontheconceptofredundancy."
3046,"Severalprotocols stillusethechecksum forerrordetection aswewillseeinfuture
chapters, although thetendency istoreplaceitwithaCRe.ThismeansthattheCRCis
alsousedinlayersotherthanthedatalinklayer."
3047,"Idea
Theconceptofthechecksum isnotdifficult."
3048,Letusillustrate itwithafewexamples.
3049,"Example 10.18
Supposeourdataisalistoffive4-bitnumbers thatwewanttosendtoadestination."
3050,"Inaddition
tosendingthesenumbers, wesendthesumofthenumbers."
3051,"Forexample, ifthesetofnumbers is
(7,11, 12,0,6),wesend(7,11,12,0,6,36), where36isthesumoftheoriginalnumbers."
3052,"The
receiveraddsthefivenumbers andcompares theresultwiththesum.Ifthetwoarethesame,
thereceiverassumesnoerror,acceptsthefivenumbers, anddiscardsthesum.Otherwise, thereis
anerrorsomewhere andthedataarenotaccepted."
3053,"Example 10.19
Wecanmakethejobofthereceivereasierifwesendthenegative (complement) ofthesum,
calledthechecksum."
3054,"Inthiscase,wesend(7,11,12,0,6,-36).Thereceivercanaddallthenum­
bersreceived (including thechecksum)."
3055,"Iftheresultis0,itassumesnoerror;otherwise, thereis
anerror."
3056,"One'sComplement
Theprevious example hasonemajordrawback."
3057,"Allofourdatacanbewrittenasa4-bit
word(theyarelessthan15)exceptforthechecksum."
3058,"Onesolutionistouseone'scom­
plement arithmetic."
3059,"Inthisarithmetic, wecanrepresent unsigned numbers between 0
and2n-1usingonlynbits.tIfthenumberhasmorethannbits,theextraleftmostbits
needtobeaddedtothenrightmost bits(wrapping)."
3060,"Inone'scomplement arithmetic, a
negativenumbercanberepresented by inverting allbits(changing a 0toa 1anda 1to
a0).Thisisthesameassubtracting thenumberfrom2n-1."
3061,"Example 10.20
Howcanwerepresent thenumber21inone'scomplement arithmetic usingonlyfourbits?"
3062,"tAlthough one'scomplement canrepresent bothpositiveandnegative numbers, weareconcerned onlywith
unsigned representation here.SECTION 10.5CHECKSUM 299
Solution
Thenumber21inbinaryis10101(itneedsfivebits).Wecanwraptheleftmostbitand additto
thefourrightmost bits.Wehave(0101+1)=0110or6."
3063,"Example 10.21
Howcanwerepresent thenumber-6inone'scomplement arithmetic usingonlyfourbits?"
3064,"Solution
Inone'scomplement arithmetic, thenegative orcomplement ofanumberisfoundbyinverting
allbits.Positive6is0110;negative6is100I.Ifweconsider onlyunsigned numbers, thisis9.In
otherwords,thecomplement of6is9.Anotherwaytofindthecomplement ofanumberinone's
complement arithmetic istosubtractthenumberfrom 2n-I(16- 1inthiscase)."
3065,"Example 10.22
LetusredoExercise 10.19usingone'scomplement arithmetic."
3066,"Figure10.24showstheprocessat
thesenderandatthereceiver."
3067,"Thesenderinitializes thechecksum to0andaddsalldataitemsand
thechecksum (thechecksum isconsidered asonedataitemandisshownincolor).Theresultis
36.However, 36cannotbeexpressed in4bits.Theextratwobitsarewrapped andaddedwith
thesumtocreatethewrapped sumvalue6.Inthefigure,wehaveshownthedetailsinbinary.The
sumisthencomplemented, resulting inthechecksum value9(15- 6=9).Thesendernowsends
sixdataitemstothereceiverincluding thechecksum 9.Thereceiverfollowsthesameprocedure
asthesender.Itaddsalldataitems(including thechecksum); theresultis45.Thesumis
wrapped andbecomes 15.Thewrapped sumiscomplemented andbecomes O.Sincethevalueof
thechecksum is0,thismeansthatthedataisnotcorrupted."
3068,"Thereceiverdropsthechecksum and
keepstheotherdataitems.Ifthechecksum isnotzero,theentirepacketisdropped."
3069,"Figure10.24
Sendersite Receiver site
7 7
11 11
12 12
0 0
6 6
0~7,II,12,0,6,9~9
Sum~ 36 Sum~ 45
Wrapped sum~6 Packet Wrapped sum~15
Checksum~9 Checksum~0
L!.J!JO1 0 0
~10
o1 1 0
100136
6
9L!....Q.J1 1 0 1
~10
1 1 1 1
o0 0 045
15
o
Detailsofwrapping
andcomplementingDetailsofwrapping
andcomplementing
Internet Checksum
Traditionally, theInternethasbeenusinga16-bitchecksum."
3070,"Thesendercalculates the
checksum byfollowing thesesteps.300CHAPTER 10ERRORDETECTION ANDCORRECTION
Sendersite:
1.Themessageisdividedinto16-bitwords."
3071,2.Thevalueofthechecksum wordissettoO.
3072,3.Allwordsincluding thechecksum areaddedushtgone'scomplement addition.
3073,4.Thesumiscomplemented andbecomes thechecksum.
3074,5.Thechecksum issentwiththedata.
3075,Thereceiverusesthefollowing steps forerrordetection.
3076,"Receiver site:
1.Themessage(including checksum) isdividedinto16-bitwords."
3077,2.Allwordsareaddedusingone'scomplement addition.
3078,3.Thesumiscomplemented andbecomes thenewchecksum.
3079,"4.Ifthevalueofchecksum is0,themessage isaccepted; otherwise, itisrejected."
3080,"Thenatureofthechecksum (treating wordsasnumbers andaddingandcomple­
mentingthem)iswell-suited forsoftwareimplementation."
3081,"Shortprograms canbewritten
tocalculate thechecksum atthe receiver siteortocheckthevalidityofthemessage at
thereceiversite."
3082,"Example 10.23
Letuscalculate thechecksum foratextof8characters (""Forouzan"")."
3083,"Thetextneedstobedivided
into2-byte(l6-bit)words.WeuseASCII(seeAppendix A)tochangeeachbytetoa2-digithexa­
decimalnumber.Forexample, Fisrepresented asOx46and0isrepresented asOx6F.Figure10.25
showshowthechecksum iscalculated atthesenderandreceiver sites.Inpartaofthefigure,
thevalueofpartialsumforthefirstcolumnisOx36.Wekeeptherightmost digit(6)andinsertthe
Figure10.25
I013 Carries
46 6F (Fo)
726F (ro)
757A luz)
616E (an)
00 0 0 Checksum (initial)
8FC6Sum(partial)
1
8FC7Sum
7038Checksum (tosend)
a.Checksum atthesendersite1()13 Carries
4 66F IFo)
726F (ro)
757A (uz)
616E (an)
7038Checksum (received)
FFFESum(partial)
1
FFFFSum
0 00()Checksum (new}
b.Checksum atthereceiver siteSECTION fO.7KEYTERMS 301
leftmostdight(3)asthecarryinthesecondcolumn.Theprocessisrepeatedforeachcolumn."
3084,Hexadecimal numbersarereviewed inAppendix B.
3085,"Notethatifthereisanycorruption, thechecksum recalculated bythereceiverisnotallas."
3086,Weleavethisanexercise.
3087,"Performance
Thetraditional checksum usesasmallnumberofbits(16)todetecterrorsinamessage
ofanysize(sometimes thousands ofbits).However, itisnotasstrongastheCRCin
error-checking capability."
3088,"Forexample, ifthevalueofonewordisincremented andthe
valueofanotherwordisdecremented bythesameamount, thetwoerrorscannotbe
detected becausethesumandchecksum remainthesame.Alsoifthevaluesofseveral
wordsareincremented butthetotalchangeisamultiple of65535,thesumandthe
checksum doesnotchange,whichmeanstheerrorsarenotdetected."
3089,"FletcherandAdler
haveproposed someweighted checksums, inwhicheachwordismultiplied byanum­
ber(itsweight)thatisrelatedtoitsposition inthetext.Thiswilleliminate thefirst
problem wementioned."
3090,"However, thetendency intheInternet, particularly indesigning
newprotocols, istoreplacethechecksum withaCRC."
3091,"10.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
3092,"Books
Severalexcellent bookaredevoted toerrorcoding.Amongthemwerecommend [Ham80],
[Zar02], [Ror96], and[SWE04]."
3093,"RFCs
Adiscussion oftheuseofthechecksum intheInternetcanbefoundinRFC1141."
3094,"10.7KEYTERMS
blockcode
bursterror
checkbit
checksum
codeword
convolution code
cycliccode
cyclicredundancy check(CRC)
dataword
errorerrorcorrection
errordetection
forwarderrorcorrection
generator polynomial
Hamming code
Hamming distance
interference
linearblockcode
minimum Hamming distance
modular arithmetic302CHAPTER 10ERRORDETECTION ANDCORRECTION
modulus
one'scomplement
paritybit
parity-check code
polynomial
redundancy
Reed-Solomonregister
retransmission
shiftregister
single-bit error
syndrome
two-dimensional parity
check
10.8SUMMARY
oDatacanbecorrupted duringtransmission."
3095,"Someapplications requirethaterrorsbe
detected andcorrected."
3096,"oInasingle-bit error,onlyonebitinthedataunithaschanged."
3097,"Abursterrormeans
thattwoormorebitsinthedataunithavechanged."
3098,"oTodetectorcorrecterrors,weneedtosendextra(redundant) bitswithdata."
3099,"oTherearetwomainmethodsoferrorcorrection: forwarderrorcorrection andcorrec­
tionbyretransmission."
3100,"oWecandividecodingschemes intotwobroadcategories: blockcodingandconvo­
lutioncoding."
3101,"oIncoding,weneedtousemodulo-2 arithmetic."
3102,"Operations inthisarithmetic arevery
simple;additionandsubtraction givethesameresults.weusetheXOR(exclusive
OR)operation forbothadditionandsubtraction."
3103,"oInblockcoding,wedivideourmessageintoblocks,eachofkbits,calleddatawords."
3104,"Weaddrredundant bitstoeachblocktomakethelengthn:::k+r.Theresulting n-bit
blocksarecalledcodewords."
3105,"oInblockcoding,errorsbedetectedbyusingthefollowing twoconditions:
a.Thereceiverhas(orcanfind)alistofvalidcodewords."
3106,b.Theoriginalcodeword haschangedtoaninvalidone.
3107,"oTheHamming distance between twowordsisthenumberofdifferences between
corresponding bits.Theminimum Hamming distance isthesmallest Hamming
distancebetween allpossiblepairsinasetofwords."
3108,"oToguarantee thedetection ofuptoserrorsinallcases,theminimum Hamming dis­
tanceinablockcodemustbedmin:::s+1.Toguarantee correction ofuptoterrorsin
allcases,theminimum Hamming distanceinablockcodemustbedmin:::2t+1."
3109,"oInalinearblockcode,theexclusive OR(XOR)ofanytwovalidcodewords creates
anothervalidcodeword."
3110,"oAsimpleparity-check codeisasingle-bit error-detecting codeinwhichn:::k+1
withdmin:::2.Asimpleparity-check codecandetectanoddnumberoferrors."
3111,"oAllHamming codesdiscussed inthisbookhavedmin:::3.Therelationship between
mandninthesecodesisn:::2m-1."
3112,oCycliccodesarespeciallinearblockcodeswithoneextraproperty.
3113,"Inacycliccode,
ifacodeword iscyclically shifted(rotated), theresultisanothercodeword.SECTION 10.9PRACTICE SET303
oAcategory ofcycliccodescalledthecyclicredundancy check(CRC)isusedin
networks suchasLANsandWANs.
oApatternofOsandIscanberepresented asapolynomial withcoefficients of0and1."
3114,"oTraditionally, theInternethasbeenusingaI6-bitchecksum, whichusesone'scom­
plementarithmetic."
3115,"Inthisarithmetic, wecanrepresent unsigned numbers between
oand2n-1usingonlynbits."
3116,"10.9PRACTICE SET
ReviewQuestions
1.Howdoesasingle-bit errordifferfromabursterror?"
3117,2.Discusstheconceptofredundancy inerrordetection andcorrection.
3118,3.Distinguish betweenforwarderrorcorrection versuserrorcorrection byretransmission.
3119,4.Whatisthedefinition ofalinearblockcode?Whatisthedefinition ofacycliccode?
3120,5.WhatistheHamming distance?
3121,Whatistheminimum Hamming distance?
3122,6.Howisthesimpleparitycheckrelatedtothetwo-dimensional paritycheck?
3123,"7.InCRC,showtherelationship betweenthefollowing entities(sizemeansthenumber
ofbits):
a.Thesizeofthedataword andthesizeofthecodeword
b.Thesizeofthedivisorandtheremainder
c.Thedegreeofthepolynomial generator andthesizeofthedivisor
d.Thedegreeofthepolynomial generator andthesizeoftheremainder
8.Whatkindofarithmetic isusedtoadddataitemsinchecksum calculation?"
3124,9.Whatkindoferrorisundetectable bythechecksum?
3125,10.Canthevalueofachecksum beallOs(inbinary)?
3126,"Defendyouranswer.Canthe
valuebeallIs(inbinary)?"
3127,Defendyouranswer.
3128,"Exercises
11.Whatisthemaximum effectofa2-msburstofnoiseondatatransmitted atthefol­
lowingrates?"
3129,"a.1500bps
b.12kbps
c.100kbps
d.100Mbps
12.Applytheexclusive-or operation onthefollowing pairofpatterns(thesymbol EB
meansXOR):
a.(10001) EB(10000)
b.(10001) EB(10001) (Whatdoyouinferfromtheresult?)
c.(11100) EB(00000) (Whatdoyouinferfromtheresult?)
d.(10011) EEl(11111) (Whatdoyouinferfromtheresult?)304CHAPTER 10ERRORDETECTION ANDCORRECTION
13.InTable10.1,thesendersendsdataword 10.A3-bitbursterrorcorrupts thecode­
word.Canthereceiverdetecttheerror?Defendyouranswer."
3130,"14.InTable10.2,thesendersendsdataword 10.Ifa3-bitbursten-orcon-upts thefirst
threebitsofthecodeword, canthereceiverdetecttheerror?Defendyouranswer."
3131,"15.WhatistheHamming distance foreachofthefollowing codewords:
a.d(10000,00000)
b.d(10101,10000)
c.d(11111,11111)
d.d(000,000)
16.Findtheminimum Hamming distance forthefollowing cases:
a.Detection oftwoen-ors."
3132,b.Correction oftwoerrors.
3133,c.Detection of3errorsorcorrection of2errors.
3134,d.Detection of6errorsorcorrection of2errors.
3135,"17.UsingthecodeinTable10.2,whatisthedataword ifoneofthefollowing code­
wordsisreceived?"
3136,"a.01011
b.11111
c.00000
d.11011
18.Provethatthecoderepresented byTable10.8isnotalinearcode.Youneedtofind
onlyonecasethatviolatesthelinearity."
3137,"Table 10.8 TableforExercise 18
Dataword Codeword
00 00000
01 01011
10 10111
11 11111
19.Although itcanmathematically beprovedthatasimpleparitycheckcodeisalinear
code,usemanualtestingoflinearity forfivepairsofthecodewords inTable10.3to
partially provethisfact."
3138,"20.ShowthattheHamming codeC(7,4)ofTablelOAcandetecttwo-biten-orsbutnot
necessarily three-biterrorbytestingthecodeinthefollowing cases.Thecharacter ""V""
inthebursten-ormeansnoen-or;thecharacter ""E""meansanerror."
3139,"a.Dataword: 0100 Bursterror:VEEVVVV
b.Dataword: 0111 Bursterror:EVVVVVE
c.Dataword: 1111 Bursterror:EVEVVVE
d.Dataword: 0000 Bursten-or:EEVEVVVSECTION 10.9PRACTICE SET 305
21.ShowthattheHamming codeC(7,4)ofTablelOAcancorrectone-biterrorsbut
notmorebytestingthecodeinthefollowing cases.Thecharacter ""V""intheburst
errormeansnoerror;thecharacter ""E""meansanerror."
3140,"a.Dataword: 0100 Bursterror:EVVVVVV
b.Dataword: 0111 Bursterror:VEVVVVV
c.Dataword: 1111 Bursterror:EVVVVVE
d.Dataword: 0000 Bursterror:EEVVVVE
22.Although itcanbeprovedthatcodeinTable10.6isbothlinearandcyclic,use
onlytwoteststopartially provethefact:
a.Testthecyclicproperty oncodeword 0101100."
3141,b.Testthelinearproperty oncodewords 0010110 and1111111.
3142,"23.Weneedadataword ofatleast11bits.FindthevaluesofkandnintheHamming
codeC(n,k)withdmin:::3."
3143,"24.Applythefollowing operations onthecorresponding polynomials:
a.(x3+xl+X+1)+(x4+xl+x+1)
b.(x3+xl+x+1)-(x4+xl+x+1)
c.(x3+xl)X(x4+x2+x+1)
d.(x3+x2+x+1)/(x2+1)
25.Answerthefollowing questions:
a.Whatisthepolynomial representation of10111O?"
3144,b.Whatistheresultofshifting101110threebitstotheleft?
3145,c.Repeatpartbusingpolynomials.
3146,d.Whatistheresultofshifting101110fourbitstotheright?
3147,e.Repeatpartdusingpolynomials.
3148,"26.Whichofthefollowing CRCgenerators guarantee thedetection ofasinglebit
error?"
3149,"a.x3+x+1
b.x4+xl
c.1
d.x2+1
27.Referring totheCRC-8polynomial inTable10.7,answerthe following questions:
a.Doesitdetectasingleerror?Defendyouranswer."
3150,b.Doesitdetectabursterrorofsize6?Defendyouranswer.
3151,c.Whatistheprobability ofdetecting abursterrorofsize9?
3152,d.Whatistheprobability ofdetecting abursterrorofsize15?
3153,"28.Referring totheCRC-32 polynomial inTable10.7,answerthefollowing questions:
a.Doesitdetectasingleerror?Defendyouranswer."
3154,b.Doesitdetectabursterrorofsize16?Defendyouranswer.
3155,c.Whatistheprobability ofdetecting abursterrorofsize33?
3156,"d.Whatistheprobability ofdetecting abursterrorofsize55?306CHAPTER 10ERRORDETECTION ANDCORRECTION
29.Assuming evenparity,findtheparitybitforeachofthefollowing dataunits."
3157,"a.1001011
b.0001100
c.1000000
d.1110111
30.Giventhedataword 1010011110 andthedivisor10111,
a.Showthegeneration ofthecodeword atthesendersite(usingbinarydivision)."
3158,h.Show the checking ofthecodeword atthereceiversite(assumenoerror).
3159,3I.RepeatExercise 30usingpolynomials.
3160,"32.AsenderneedstosendthefourdataitemsOx3456,OxABCC, Ox02BC, andOxEEEE."
3161,"Answerthefollowing:
a.Findthechecksum atthesendersite."
3162,b.Findthechecksum atthe receiver siteifthereisnoerror.
3163,"c.Findthechecksum atthereceiversiteiftheseconddataitemischanged to
OxABCE."
3164,"d.Findthechecksum atthereceiversiteiftheseconddataitemischanged to
OxABCE andthethirddataitemischanged toOx02BA."
3165,33.Thisproblem showsaspecialcaseinchecksum handling.
3166,"Asenderhastwodata
itemstosend:Ox4567andOxBA98."
3167,"Whatisthevalueofthechecksum?CHAPTER 11
DataLinkControl
Thetwomainfunctions ofthedatalinklayeraredatalinkcontrolandmediaaccess
control.Thefirst,datalinkcontrol,dealswiththedesignandprocedures forcommuni­
cationbetween twoadjacent nodes:node-to-node communication."
3168,"Wediscussthis
functionality inthischapter.Thesecondfunctionofthedatalinklayerismediaaccess
control,orhowtosharethelink.Wediscussthisfunctionality inChapter12."
3169,"Datalinkcontrolfunctions includeframing, flowanderrorcontrol,andsoftware­
implemented protocols thatprovide smoothandreliable transmission offrames
betweennodes.Inthischapter,wefirstdiscussframing, orhowtoorganize thebitsthat
arecarriedbythephysical layer.Wethendiscussflowanderrorcontrol.Asubsetof
thistopic,techniques forerrordetection andcorrection, wasdiscussed inChapter10."
3170,"Toimplement datalinkcontrol,weneedprotocols."
3171,"Eachprotocol isasetofrules
thatneedtobeimplemented insoftware andrunbythetwonodesinvolved indata
exchange atthedatalinklayer.Wediscussfiveprotocols: twofornoiseless (ideal)
channels andthreefornoisy(real)channels."
3172,"Thoseinthefirstcategory arenotactually
implemented, butprovideafoundation forunderstanding theprotocols inthesecond
category."
3173,"Afterdiscussing thefiveprotocol designs,weshowhowabit-oriented protocol is
actuallyimplemented byusingtheHigh-level DataLinkControl(HDLC)Protocolasan
example."
3174,"Wealsodiscussapopularbyte-oriented protocol, Point-to-Point Protocol(PPP)."
3175,"11.1FRAMING
Datatransmission inthephysical layermeansmovingbitsintheformofasignalfrom
thesourcetothedestination."
3176,"Thephysicallayerprovides bitsynchronization toensure
thatthesenderandreceiverusethesamebitdurations andtiming."
3177,"Thedatalinklayer,ontheotherhand,needstopackbitsintoframes,sothateach
frameisdistinguishable fromanother.Ourpostalsystempractices atypeofframing."
3178,"Thesimpleactofinserting aletterintoanenvelope separates onepieceofinformation
fromanother;theenvelope servesasthedelimiter."
3179,"Inaddition, eachenvelope defines
thesenderandreceiver addresses sincethepostalsystemisamany-to-many carrier
facility."
3180,"307308 CHAPTER 11DATALINKCONTROL
Framing inthedatalinklayerseparates amessage fromonesourcetoadestina­
tion,orfromothermessages tootherdestinations, byaddingasenderaddressanda
destination address.Thedestination addressdefineswherethepacketistogo;thesender
addresshelpstherecipient acknowledge thereceipt."
3181,"Although thewholemessage couldbepackedinoneframe,thatisnotnormally
done.Onereasonisthataframecanbeverylarge,makingflowanderrorcontrolvery
inefficient."
3182,"Whenamessage iscarriedinoneverylargeframe,evenasingle-bit error
wouldrequiretheretransmission ofthewholemessage."
3183,"Whenamessage isdivided
intosmallerframes,asingle-bit erroraffectsonlythatsmallframe."
3184,"Fixed-Size Framing
Framescanbeoffixedorvariablesize.Infixed-size framing, thereisnoneedfordefin­
ingtheboundaries oftheframes;thesizeitselfcanbeusedasadelimiter."
3185,"Anexample
ofthistypeofframingistheATMwide-area network, whichusesframesoffixedsize
calledcells.WediscussATMinChapter18."
3186,"Variable-Size Framing
Ourmaindiscussion inthischapterconcerns variable-size framing, prevalent inlocal­
areanetworks."
3187,"Invariable-size framing, weneedawaytodefinetheendoftheframe
andthebeginning ofthenext.Historically, twoapproaches wereusedforthispurpose:
acharacter-oriented approach andabit-oriented approach."
3188,"Character-Oriented Protocols
Inacharacter-oriented protocol, datatobecarriedare8-bitcharacters fromacoding
systemsuchasASCII(seeAppendix A).Theheader,whichnormally carriesthesource
anddestination addresses andothercontrolinformation, andthetrailer, which carries
errordetection orerrorcorrection redundant bits,arealsomultiples of8bits.Toseparate
oneframefromthenext,an8-bit(I-byte)flagisaddedatthebeginning andtheendofa
frame.Theflag,composed ofprotocol-dependent specialcharacters, signalsthestartor
endofaframe.Figure11.1showstheformatofaframeinacharacter-oriented protocol."
3189,"Figure11.1Aframeinacharacter-oriented protocol
Datafromupperlayer
Character-oriented framingwaspopularwhenonlytextwasexchanged bythedata
linklayers.Theflagcouldbeselectedtobeanycharacter notusedfortextcommunica­
tion.Now,however, wesendothertypesofinformation suchasgraphs,audio,and
video.Anypatternusedfortheflagcouldalsobepartoftheinformation."
3190,"Ifthishap­
pens,thereceiver,whenitencounters thispatterninthemiddleofthedata,thinksithas
reachedtheendoftheframe.Tofixthisproblem, abyte-stuffing strategywasaddedtoSECTION 11.1FRAMING 309
character-oriented framing."
3191,"Inbytestuffing(orcharacter stuffing), aspecialbyteis
addedtothedatasectionoftheframewhenthereisacharacter withthesamepatternas
theflag.Thedatasectionisstuffedwithanextrabyte.Thisbyteisusuallycalledthe
escapecharacter (ESC),whichhasapredefined bitpattern.Whenever thereceiver
encounters theESCcharacter, itremoves itfromthedatasectionandtreatsthenext
character asdata,notadelimiting flag."
3192,"Bytestuffingbytheescapecharacter allowsthepresence oftheflaginthedatasec­
tionoftheframe,butitcreatesanotherproblem."
3193,"Whathappensifthetextcontainsoneor
moreescapecharacters followed byaflag?Thereceiverremoves theescapecharacter,
butkeepstheflag,whichisincorrectly interpreted astheendoftheframe.Tosolvethis
problem, theescapecharacters thatarepartofthetextmustalsobemarkedbyanother
escapecharacter."
3194,"Inotherwords,iftheescapecharacter ispartofthetext,anextraoneis
addedtoshowthatthesecondoneispartofthetext.Figure11.2showsthesituation."
3195,"Figure11.2Bytestuffingandunstuffing
Framesent
Flag HeaderStuffed
Extra2
bytes
Framereceived
Flag Header
Unstuffed
Bytestuffingistheprocessofadding1extrabytewhenever
thereisaflagorescapecharacter inthetext."
3196,Character-oriented protocols presentanotherproblem indatacommunications.
3197,"Theuniversal codingsystemsinusetoday,suchasUnicode, have16-bitand32-bit
characters thatconflictwith8-bitcharacters."
3198,"Wecansaythatingeneral,thetendency is
movingtowardthebit-oriented protocols thatwediscussnext."
3199,"Bit-Oriented Protocols
Inabit-oriented protocol, thedatasectionofaframeisasequence ofbitstobeinter­
pretedbytheupperlayerastext,graphic,audio,video,andsoon.However, inaddition
toheaders(andpossibletrailers), westillneedadelimiter toseparateoneframefrom
theother.Mostprotocols useaspecial8-bitpatternflag01111110 asthedelimiter to
definethebeginning andtheendoftheframe,asshowninFigure11.3.310CHAPTER 11DATALINKCONTROL
Figure11.3Aframeinabit-oriented protocol
I'Datafromupperlayer
Variablenumberofbits'I
Header
Flag
Thisflagcancreatethesametypeofproblem wesawinthebyte-oriented proto­
cols.Thatis,iftheflagpatternappearsinthedata,weneedtosomehow informthe
receiverthatthisisnottheendoftheframe.Wedothisbystuffing1singlebit(instead
ofIbyte)topreventthepatternfromlookinglikeaflag.Thestrategyiscalledbit
stuffing."
3200,"Inbitstuffing,ifa 0andfiveconsecutive Ibitsareencountered, anextra0is
added.Thisextrastuffedbitiseventually removed fromthedatabythereceiver."
3201,"Note
thattheextrabitisaddedafterone0followed byfive1sregardless ofthevalueofthe
nextbit.Thisguarantees thattheflagfieldsequence doesnotinadvertently appearin
theframe."
3202,"Bitstuffingistheprocessofaddingoneextra0whenever fiveconsecutive 18followa 0
inthedata,sothatthereceiverdoesnotmistakethepattern0111110foraflag."
3203,"Figure11.4showsbitstuffingatthesenderandbitremovalatthereceiver.Notethat
evenifwehavea 0afterfive1s,westillstuffaO.The0willberemoved bythereceiver."
3204,"Figure11.4Bitstuffingandunstuffing
Framesent
IFlag!Header
FramereceivedDatafromupperlayer
100011111110011111010001
Stuffedt
10001111101100111110010001 TrailerIFlagI
Extra2
bits
IFlag1Header 10001111101100111110010001 Trailer1FlagI
Unsroffedt
I0001l11l1100 1111101000I
Datatoupperlayer
Thismeansthatiftheflaglikepattern01111110 appearsinthedata,itwillchange
to011111010 (stuffed)andisnotmistaken asaflagbythereceiver.Therealflag01111110
isnotstuffedbythesenderandisrecognized bythereceiver.SECTION II.3PROTOCOLS 311
11.2FLOWANDERROR CONTROL
Datacommunication requiresatleasttwodevicesworkingtogether, onetosendandthe
othertoreceive.Evensuchabasicarrangement requiresagreatdealofcoordination
foranintelligible exchange tooccur.Themost important responsibilities ofthedata
linklayerareflowcontrolanderrorcontrol."
3205,"Collectively, thesefunctions areknown
asdatalinkcontrol."
3206,"FlowControl
Flowcontrolcoordinates theamountofdatathatcanbesentbeforereceiving anacknowl­
edgmentandisoneofthemostimportant dutiesofthedatalinklayer.Inmostprotocols,
flowcontrolisasetofprocedures thattellsthesenderhowmuchdataitcantransmit
beforeitmustwaitforanacknowledgment fromthereceiver."
3207,"Theflowofdatamustnot
beallowedtooverwhelm thereceiver.Anyreceiving devicehasalimitedspeedatwhich
itcanprocessincoming dataandalimitedamountofmemory inwhichtostoreincom­
ingdata.Thereceiving devicemustbeabletoinformthesendingdevicebeforethose
limitsarereachedandtorequestthatthetransmitting devicesendfewerframesorstop
temporarily."
3208,"Incoming datamustbecheckedandprocessed beforetheycanbeused.The
rateofsuchprocessing isoftenslowerthantherateoftransmission."
3209,"Forthisreason,
eachreceiving devicehasablockofmemory, calledabuffer,reservedforstoringincom­
ingdatauntiltheyareprocessed."
3210,"Ifthebufferbeginstofillup,thereceivermustbeable
totellthesendertohalttransmission untilitisonceagainabletoreceive."
3211,"Flowcontrolreferstoasetofprocedures usedtorestricttheamountofdata
thatthesendercansendbeforewaitingforacknowledgment."
3212,"ErrorControl
Errorcontrolisbotherrordetection anderrorcorrection."
3213,"Itallowsthereceiver to
informthesenderofanyframeslostordamaged intransmission andcoordinates the
retransmission ofthoseframesbythesender.Inthedatalinklayer,thetermerrorcon­
trolrefersprimarily tomethodsoferrordetection andretransmission."
3214,"Errorcontrolin
thedatalinklayerisoftenimplemented simply:Anytimeanerrorisdetected inan
exchange, specified framesareretransmitted."
3215,"Thisprocessiscalledautomatic repeat
request(ARQ)."
3216,"Errorcontrolinthedatalinklayerisbasedonautomatic
repeatrequest,whichistheretransmission ofdata."
3217,"11.3PROTOCOLS
Nowletusseehowthedatalinklayercancombineframing,flowcontrol,anderrorcontrol
toachievethedeliveryofdatafromonenodetoanother.Theprotocols arenormally imple­
mentedinsoftware byusingoneofthecommon programming languages."
3218,"Tomakeour312 CHAPTER 11DATALINKCONTROL
discussions language-free, wehavewritteninpseudocode aversionofeachprotocolthat
concentrates mostlyontheprocedure insteadofdelvingintothedetailsoflanguage rules."
3219,"Wedividethediscussion ofprotocols intothosethatcanbeusedfornoiseless
(error-free) channels andthosethatcanbeusedfornoisy(error-creating) channels."
3220,"The
protocols inthefirstcategory cannotbeusedinreallife,buttheyserveasabasisfor
understanding theprotocols ofnoisychannels."
3221,Figure11.5showstheclassifications.
3222,"Figure11.5Taxonomy ofprotocols discussed inthischapter
Simplest
Stop-and- WaitStop-and-Wait ARQ
Go-Hack-N ARQ
Selective RepeatARQ
Thereisadifference between theprotocols wediscusshereandthoseusedinreal
networks."
3223,"Alltheprotocols wediscussareunidirectional inthesensethatthedataframes
travelfromonenode,calledthesender,toanothernode,calledthereceiver."
3224,"Although
specialframes,calledacknowledgment (ACK)andnegative acknowledgment (NAK)
canflowintheopposite direction forflowanderrorcontrolpurposes, dataflowinonly
onedirection."
3225,"Inareal-life network, thedatalinkprotocols areimplemented asbidirectional;
dataflowinbothdirections."
3226,"Intheseprotocols theflowanderrorcontrolinformation such
asACKsandNAKsisincluded inthedataframesinatechnique calledpiggybacking."
3227,"Becausebidirectional protocols aremorecomplex thanunidirectional ones,wechosethe
latterforourdiscussion."
3228,"Iftheyareunderstood, theycanbeextended tobidirectional
protocols."
3229,Weleavethisextension asanexercise.
3230,"11.4NOISELESS CHANNELS
Letusfirstassumewehaveanidealchannelinwhichnoframesarelost,duplicated, or
corrupted."
3231,Weintroduce twoprotocols forthistypeofchannel.
3232,"Thefirstisaprotocol
thatdoesnotuseflowcontrol;thesecondistheonethatdoes.Ofcourse,neitherhaserror
controlbecausewehaveassumed thatthechannelisaperfectnoiseless channel."
3233,"Simplest Protocol
Ourfirstprotocol, whichwecalltheSimplest Protocol forlackofanyothername,isone
thathasnofloworen'orcontrol.Likeotherprotocols wewilldiscussinthischapter,itisa
unidirectional protocolinwhichdataframesaretraveling inonlyonedirection-from theSECTION 11.4NOISELESS CHANNELS 313
sendertoreceiver."
3234,"Weassumethatthereceivercanimmediately handleanyframeit
receives withaprocessing timethatissmallenoughtobenegligible."
3235,"Thedatalink
layerofthereceiverimmediately removestheheaderfromtheframeandhandsthedata
packettoitsnetwork layer,whichcanalsoacceptthepacketimmediately."
3236,"Inother
words,thereceivercanneverbeoverwhelmed withincoming frames."
3237,"Design
Thereisnoneedforflowcontrolinthisscheme.Thedatalinklayeratthesendersite
getsdatafromitsnetworklayer,makesaframeoutofthedata, and sendsit.Thedata
linklayeratthereceiversitereceivesaframefromitsphysicallayer,extractsdatafrom
theframe,anddeliversthedatatoitsnetworklayer.Thedatalinklayersofthesender
andreceiverprovidetransmission servicesfortheirnetworklayers.Thedatalinklayers
usetheservicesprovided bytheirphysicallayers(suchassignaling, multiplexing, and
soon)forthephysicaltransmission ofbits.Figure11.6showsadesign."
3238,"Figure11.6Thedesignofthesimplestprotocol withnofloworerrorcontrol
Sender Receiver
Network
Datalink
PhysicalGetdata Delivrdata
tI
I ..."
3239,"tI
Sendframe Receiveframe
Dataframes-+-
I~~~~~~~ INetwork
Datalink
Physical
Repeatforever
Event:)\{otifu:ation from
physlclUiaye]""
Weneedtoelaborate ontheprocedure usedbybothdatalinklayers.Thesendersite
cannotsendaframeuntilitsnetworklayerhasadatapackettosend.Thereceiversite
cannotdeliveradatapackettoitsnetworklayeruntilaframearrives.Iftheprotocol is
implemented asaprocedure, weneedtointroduce theideaofeventsintheprotocol."
3240,"The
procedure atthesendersiteisconstantly running;thereisnoactionuntilthereisarequest
fromthenetworklayer.Theprocedure atthereceiversiteisalsoconstantly rulming,but
thereisnoactionuntilnotification fromthephysicallayerarrives.Bothprocedures are
constantly runningbecausetheydonotknowwhenthecorresponding eventswilloccur.314 CHAPTER 11DATALINKCONTROL
Algorithms
Algorithm 11.1showstheprocedure atthesendersite."
3241,"Algorithm 11.1Sender-site algorithm forthesimplestprotocol
//SendtheframeIISleepuntilaneventoccurs
//Thereisapacket tosend
GetData()i
MakeFrame()i
SendFrame()i
}WaitForEvent()i
if(Event(RequestToSend»
{1while(true) IIRepeat forever
2 {
3
4
5
6
7
8
9
10}
Analysis Thealgorithm hasaninfiniteloop,whichmeanslines3to9arerepeated forever
oncetheprogram starts.Thealgorithm isanevent-driven one,whichmeansthatitsleeps(line3)
untilaneventwakesitup(line4).Thismeansthattheremaybeanundefined spanoftime
betweentheexecution ofline3andline4;thereisagapbetweentheseactions.Whentheevent,
arequestfromthenetworklayer,occurs,lines6though8areexecuted."
3242,"Theprogramthenrepeats
theloopandagainsleepsatline3untilthenextoccurrence oftheevent.Wehavewritten
pseudocode forthemainprocess.Wedonotshowanydetailsforthemodules GetData, Make­
Frame,andSendFrame."
3243,"GetDataO takesadatapacketfromthenetworklayer,MakeFrameO adds
aheaderanddelimiter flagstothedatapackettomakeaframe,andSendFrameO deliversthe
frametothephysicallayerfortransmission."
3244,Algorithm 11.2showstheprocedure atthereceiversite.
3245,"Algorithm 11.2Receiver-site algorithm forthesimplestprotocol
//Deliverdatatonetwork layezReceiveFrame()i
ExtractData()i
DeliverData ()i
}1while(true) IIRepeat forever
2 {
3WaitForEvent()i IISleepuntilaneventoccurs
4if(Event(ArrivalNotification» IIData framearrived
5 {
6
7
8
9
10}
Analysis Thisalgorithm hasthesameformatasAlgorithm 11.1,exceptthatthedirection of
theframesanddataisupward.Theeventhereisthearrivalofadataframe.Aftertheevent
occurs,thedatalinklayerreceivestheframefromthephysicallayerusingtheReceiveFrameO
process,extractsthedatafromtheframeusingtheExtractDataO process,anddeliversthedatato
thenetworklayerusingtheDeliverDataO process.Here,wealsohavean event-driven algorithm
becausethealgorithm neverknowswhenthedataframewillarrive.SECTION 11.4NOISELESS CHANNELS 315
Example 11.1
Figure11.7showsanexample ofcommunication usingthisprotocol.Itisverysimple.The
sendersendsasequence offrameswithouteventhinkingaboutthereceiver."
3246,"Tosendthreeframes,
threeeventsoccuratthesendersiteandthreeeventsatthereceiversite.Notethatthedataframes
areshownbytiltedboxes;theheightoftheboxdefinesthetransmission timedifference between
thefirstbitandthelastbitintheframe."
3247,"Figure11.7FlowdiagramforExample 11.1
Sender ReceiverGJ [i""""1
I I
I I
Request~r=am:-e---------1 ."
3248,"I ~Arri""al
Request~ratne ~
: ~Arr~
Request~ame :
: ~Arrival
t t
Time Time
Stop-and- WaitProtocol
Ifdataframesarriveatthereceiversitefasterthantheycanbeprocessed, theframes
mustbestoreduntiltheiruse.Normally, thereceiver doesnothaveenoughstorage
space,especially ifitisreceiving datafrommanysources.Thismayresultineitherthe
discarding offramesordenialofservice.Topreventthereceiverfrombecoming over­
whelmed withframes,we somehow needtotellthesendertoslowdown.Theremustbe
feedback fromthereceivertothesender."
3249,"Theprotocol wediscussnowiscalledtheStop-and- WaitProtocol becausethe
sendersendsoneframe,stopsuntilitreceivesconfirmation fromthereceiver(okayto
goahead),andthensendsthenextframe.Westillhaveunidirectional communication
fordataframes,butauxiliary ACKframes(simpletokensofacknowledgment) travel
fromtheotherdirection."
3250,Weaddflowcontroltoourprevious protocol.
3251,"Design
Figure11.8illustrates themechanism."
3252,"Comparing thisfigurewithFigure11.6,wecan
seethetrafficontheforwardchannel(fromsendertoreceiver) andthereversechannel."
3253,"Atanytime,thereiseitheronedataframeontheforwardchanneloroneACKframeon
thereversechannel.Wetherefore needahalf-duplex link."
3254,"Algorithms
Algorithm 11.3isforthesendersite.316 CHAPTER 11DATALINKCONTROL
Figure11.8DesignofStop-and- WaitProtocol
Sender Receiver
Network
Datalink:
PhysicalDeliver
Gettata data.."
3255,"T I
..I ~I
RI.TRI.,TecelveSend ecelVe Send
frame frame frame frame
Dataframe
I~~ I
~DACKframeNetwork
Datalink
Physical
Repeatforever
Algorithm 11.3Sender-site algorithm forStop-and- WaitProtocol
Iwhile(true)
canSend=true
IISleepuntilaneventoccurs
ANDcanSend}
IISleepuntilaneventoccurs
/1AnACKhasarrivedI/Sendthedataframe
I/cannot senduntil ACKarrivesIIRepeat forever
IIAllow thefirstframetogo
I/Receive theACK£r~e ReceiveFrame();
canSend ~true;GetDataO i
MakeFrame();
SendFrame()i
canSend=false;
}}
WaitForEvent()i
if(Event(ArrivalNotification)
{{
WaitForEvent()i
if(Event(RequestToSend)
{1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18}
Analysis Heretwoeventscanoccur:arequestfromthenetworklayeroranarrivalnotifica­
tionfromthephysicallayer.Theresponses totheseeventsmustalternate."
3256,"Inotherwords,aftera
frameissent,thealgorithm mustignoreanothernetwork layerrequestuntilthatframeisSECTION 1I.4NOISELESS CHANNELS 317
acknowledged."
3257,"Weknowthattwoarrivaleventscannothappenoneafteranotherbecausethe
channeliserror-free anddoesnotduplicate theframes.Therequests fromthenetworklayer,
however, mayhappenoneafteranotherwithoutanarrivaleventinbetween."
3258,"Weneedsomehow to
preventtheimmediate sendingofthedataframe.Although thereareseveralmethods, wehave
usedasimplecanSendvariablethatcaneitherbetrueorfalse.Whenaframeissent,thevariable
issettofalsetoindicatethatanewnetworkrequestcannotbesentuntilcanSendistrue.Whenan
ACKisreceived, canSendissettotruetoallowthesendingofthenextframe."
3259,Algorithm 11.4showstheprocedure atthereceiversite.
3260,"Algorithm 11.4Receiver-site algorithm forStop-and- WaitProtocol
WaitForEvent(); IISleepuntilaneventoccurf
if(Event(ArrivalNotification)} IIData framearrives
{
/IDeliver datatonetwork layex
IISend anACKframeIIRepeat forever
ReceiveFrame(};
ExtractData(}i
Deliver(data};
SendFrame();
}1while(true)
2 {
3
4
5
6
7
8
9
10
11}
Analysis ThisisverysimilartoAlgorithm 11.2withoneexception."
3261,"Afterthedataframe
arrives,thereceiversendsanACKframe(line9)toacknowledge thereceiptandallowthesender
tosendthenextframe."
3262,"Example 11.2
Figure11.9showsanexampleofcommunication usingthisprotocol.Itisstillverysimple.The
sendersendsoneframeandwaitsforfeedback fromthereceiver."
3263,"WhentheACKarrives,the
sendersendsthenextframe.Notethatsendingtwoframesintheprotocolinvolvesthesenderin
foureventsandthereceiverintwoevents."
3264,"Figure11.9Flowdiagramfor Example 1I.2
Sender
INA]Receiver
rIJ
ArrivalFrame
Arrival :
IRequest
ReqUest~~ :I Arrival
I1."
3265,AC'i..
3266,"Arrival' I
• 1
t t
Time Time318 CHAPTER 11DATALINKCONTROL
11.5NOISYCHANNELS
Although theStop-and- WaitProtocol givesusanideaofhowtoaddflowcontroltoits
predecessor, noiseless channels arenonexistent."
3267,"Wecanignoretheerror(aswesome­
timesdo),orweneedtoadderrorcontroltoourprotocols."
3268,"Wediscussthreeprotocols
inthissectionthatuseerrorcontrol."
3269,"Stop-and- WaitAutomatic RepeatRequest
Ourfirstprotocol, calledtheStop-and- WaitAutomatic RepeatRequest (Stop-and­
WaitARQ),addsasimpleerrorcontrolmechanism totheStop-and- WaitProtocol."
3270,"Let
usseehowthisprotocol detectsandcorrectserrors."
3271,"Todetectandcorrectcorrupted frames,weneedtoaddredundancy bitstoourdata
frame(seeChapter10).Whentheframearrivesatthereceiversite,itischeckedandif
itiscorrupted, itissilentlydiscarded."
3272,"Thedetection oferrorsinthisprotocol ismani­
festedbythesilenceofthereceiver."
3273,"Lostframesaremoredifficulttohandlethancorrupted ones.Inourprevious proto­
cols,therewasnowaytoidentifyaframe.Thereceived framecouldbethecorrectone,
oraduplicate, oraframeoutoforder.Thesolutionistonumbertheframes.Whenthe
receiverreceives adataframethatisoutoforder,thismeansthatframeswereeither
lostorduplicated."
3274,Thecomlpted andlostframesneedtoberesentinthisprotocol.
3275,"Ifthereceiverdoes
notrespondwhenthereisanerror,howcanthesenderknowwhichframetoresend?To
remedythisproblem, thesenderkeepsacopyofthesentframe.Atthesametime,itstarts
atimer.IfthetimerexpiresandthereisnoACKforthesentframe,theframeisresent,the
copyisheld,andthetimerisrestarted."
3276,"Sincetheprotocolusesthestop-and-wait mecha­
nism,thereisonlyonespecificframethatneedsanACKeventhoughseveralcopiesof
thesameframecanbeinthenetwork."
3277,"Errorcorrection inStop-and-Wait ARQisdonebykeepingacopyofthesentframe
andretransmitting ofthe frame whenthetimerexpires."
3278,"SinceanACKframecanalsobecorrupted andlost,ittooneedsredundancy bits
andasequence number.TheACKframeforthisprotocol hasasequence numberfield."
3279,"Inthisprotocol, thesendersimplydiscards acorrupted ACKframeorignoresan
out-of-order one."
3280,"Sequence Numbers
Aswediscussed, theprotocol specifies thatframesneedtobenumbered."
3281,"Thisisdone
byusingsequence numbers."
3282,"Afieldisaddedtothedataframetoholdthesequence
numberofthatframe."
3283,Oneimportant consideration istherangeofthesequence numbers.
3284,"Sincewewant
tominimize theframesize,welookforthesmallestrangethatprovides unambiguousSECTION 11.5NOISYCHANNELS 319
communication."
3285,"Thesequence numbers ofcoursecanwraparound.Forexample, ifwe
decidethatthefieldismbitslong,thesequence numbers startfrom0,goto2m-1,and
thenarerepeated."
3286,"Letusreasonouttherangeofsequence numbers weneed.Assumewehaveusedxas
asequence number; weonlyneedtousex+1afterthat.Thereisnoneedforx+2.To
showthis,assumethatthesenderhassenttheframenumbered x.Threethingscanhappen."
3287,"1.Theframearrivessafeandsoundatthereceiversite;thereceiversendsanacknowl­
edgment."
3288,"Theacknowledgment arrivesatthesendersite,causingthesendertosend
thenextframenumbered x+1."
3289,"2.Theframearrivessafeandsoundatthereceiversite;thereceiversendsanacknowl­
edgment, buttheacknowledgment iscorrupted orlost.Thesenderresendstheframe
(numbered x)afterthetime-out."
3290,Notethattheframehereisaduplicate.
3291,"Thereceiver
canrecognize thisfactbecauseitexpectsframex+Ibutframexwasreceived."
3292,"3.Theframeiscorrupted orneverarrivesatthereceiversite;thesenderresendsthe
frame(numbered x)afterthetime-out."
3293,"Wecanseethatthereisaneedforsequence numbersxandx+Ibecausethereceiver
needstodistinguish between case1andcase2.Butthereisnoneedforaframetobe
numbered x+2.Incase1,theframecanbenumbered xagainbecauseframesxandx+1
areacknowledged andthereisnoambiguity ateithersite.Incases2and3,thenewframe
isx+I,notx+2.Ifonlyxandx+1areneeded,wecanletx=0andx+I==1.This
meansthatthesequence is0,I,0,I,0,andsoon.Isthispatternfamiliar?"
3294,"Thisismodulo-2
arithmetic aswesawinChapter10."
3295,InStop-and- WaitARQ~weusesequence numbers tonumbertheframes.
3296,Thesequence numbers arebasedonmodul0-2 arithmetic.
3297,"Acknowledgment Numbers
Sincethesequence numbers mustbesuitableforbothdataframesandACKframes,we
usethisconvention: Theacknowledgment numbers alwaysannounce thesequence
numberofthenextframeexpected bythereceiver."
3298,"Forexample, ifframe0hasarrived
safeandsound,thereceiver sendsanACKframe with acknowledgment 1(meaning
frame1isexpected next).Ifframe1hasarrivedsafeandsound,thereceiversendsan
ACKframewithacknowledgment 0(meaning frame0isexpected)."
3299,"InStop-and-WaitARQ~ theacknowledgment numberalwaysannounces in
modul0-2 arithmetic thesequence numberofthenextframeexpected."
3300,"Design
Figure11.10showsthedesignoftheStop-and- WaitARQProtocol."
3301,"Thesendingdevice
keepsacopyofthelastframetransmitted untilitreceives anacknowledgment forthat
frame.AdataframesusesaseqNo(sequence number); anACKframeusesanackNo
(acknowledgment number)."
3302,"Thesenderhasacontrolvariable, whichwecallSn(sender,
nextframetosend),thatholdsthesequence numberforthenextframetobesent(0or1).320CHAPTER 11DATALINKCONTROL
Figure11.10DesignoftheStop-and-WaitARQ Protocol
SIINextframe
J;0send
r---r--- ---r---,'0'101'0'···L ~___ ___1 J
Sender Receiver
Network
Datalink
PhysicalDataframe ACKframeDeliver'1* *""-rr- Getdata data
I seqNo ackNo ..."
3303,"T I
•I ...I
RI.TRI.T
ecelveSend ecelve Send
frame frame frame frame
I!liM ~ I
~~Network
Datalink
Physical
Event:IRequestfromInetworklayer
I0Repeatforevert
.~--~--
,.C;;~AIgmnhm forsender'site.-Time-outI
..;._,,,:,,:,,'.:"" ,Event:
1.."
3304,"I
Et:INotification fromIven.physical layerRepeatforever
."".'
~-.--.AJ:go.rlt,bm forreceiverSite...."
3305,1..
3306,"I
Et:INotification fromIven.h'allPySlCayer
Thereceiverhasacontrolvariable, whichwecallRn(receiver, nextframeexpected),
thatholdsthenumberofthenextframeexpected."
3307,"Whenaframeissent,thevalueofSn
isincremented (modulo-2), whichmeansifitis0,itbecomes 1andviceversa.Whena
frameisreceived, thevalueofRnisincremented (modulo-2), whichmeansifitis0,it
becomes 1andviceversa.Threeeventscanhappenatthesendersite;oneeventcan
happenatthereceiversite.Variable Snpointstotheslotthatmatches thesequence
numberoftheframethathasbeensent,butnotacknowledged; Rnpointstotheslotthat
matchesthesequence numberoftheexpected frame."
3308,"Algorithms
Algorithm 11.5isforthesendersite."
3309,"Algorithm 11.5Sender-site algorithm forStop-and- WaitARQ
WaitForEvent();1n=0;
2anSend=true;
3hile(true)
4 {
5IIFrame 0should besentfirst
IIAllowthefirstrequest togo
IIRepeat forever
IISleepuntilaneventoccursSECTION 11.5NOISYCHANNELS 321
//Resend acopycheck//Copyisnotneeded
IIThetimerexpired//TheseqNoisSn
//Keep copy
IISleep
IIAnACKhasarrived
//Receive theACEfram
80)//Valid ACK
Stoptimer{};
PurgeFrame(Sn_l);
canSend=true;
}ReceiveFrame(ackNo);
if(notcorrupted ANDackNo
{
}GetData()i
MakeFrame (Sn);
StoreFrame(Sn);
SendFrame(Sn) ;
StartTimerO;
Sn=Sn+1;
canSend=false;
if(Event(TimeOUt)
{
StartTimer();
ResendFrame(Sn_l);
}}
WaitForEvent();
if(Event(ArrivaINotification)
{Algorithm 11.5Sender-site algorithm forStop-and- WaitARQ(continued)
6if(Event(RequestToSend) ANDcanSend)
7 {
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33}
Analysis Wefirstnoticethepresence ofSn'thesequence numberofthenextframetobesent."
3310,"Thisvariableisinitialized once(line1),butitisincremented everytimeaframeissent(line13)in
preparation forthenextframe.However, sincethisismodulo-2 arithmetic, thesequence numbers are
0,1,0,1,andsoon.Notethattheprocessesinthefirstevent(SendFrame, StoreFrame, andPurge­
Frame)useanSndefining theframesentout.Weneedatleastonebuffertoholdthisframeuntil
wearesurethatitisreceivedsafeandsound.Line10showsthatbeforetheframeissent,itisstored."
3311,"Thecopyisusedforresending acorruptorlostframe.WearestillusingthecanSend variabletopre­
ventthenetworklayerfrommakingarequestbeforetheprevious frameisreceivedsafeandsound.If
theframeisnotcorrupted andtheackNooftheACKframematchesthesequence numberofthenext
frametosend,westopthetimerandpurgethecopyofthedataframewesaved.Otherwise, wejust
ignorethiseventandwaitforthenexteventtohappen.Aftereachframeissent,atimerisstarted."
3312,"Whenthetimerexpires(line28),theframeisresentandthetimerisrestarted."
3313,Algorithm 11.6showstheprocedure atthereceiversite.
3314,"Algorithm 11.6Receiver-site algorithm forStop-and- WaitARQProtocol
1=0;
2hile(true)
3 {
4WaitForEvent();IIFrame 0expected toarrivefirs
IISleepuntilaneventoccurs322CHAPTER 11DATALINKCONTROL
Algorithm 11.6Receiver-site algorithm forStop-and- WaitARQProtocol (continued)
5
6
7
8
9
10
11
12
13
14
15
16
17
18}if(Event(Arriva1Notification»
{
ReceiveFrame()i
if(corrupted(frame»i
sleep()i
if(seqNo ;;;;:;;;;Rn)
{
ExtractData();
De1iverData()i
Ru;;;;Ru+1;
}
SendFrame (Rn);
}//Data framearrives
//Valid dataframe
//Deliver data
//Send anACK
Analysis Thisisnoticeably differentfromAlgorithm 11.4.First,allarriveddataframesthatare
corrupted areignored.IftheseqNooftheframeistheonethatisexpected (Rn),theframeis
accepted, thedataaredelivered tothenetworklayer,andthevalueofRnisincremented."
3315,"How­
ever,thereisonesubtlepointhere.Evenifthesequence numberofthedataframedoesnotmatch
thenextframeexpected, anACKissenttothesender.ThisACK,however, justreconfirms the
previous ACKinsteadofconfirming theframereceived."
3316,"Thisisdonebecause thereceiver
assumesthattheprevious ACKmighthavebeenlost;thereceiverissendingaduplicate frame."
3317,TheresentACKmaysolvetheproblembeforethetime-outdoesit.
3318,"Example 11.3
Figure11.11showsanexample ofStop-and-Wait ARQ.Frameaissentandacknowledged."
3319,Frame1islostandresentafterthetime-out.
3320,"Theresentframe1isacknowledged andthetimer
stops.Frameaissentandacknowledged, buttheacknowledgment islost.Thesenderhasnoidea
iftheframeortheacknowledgment islost,soafterthetime-out, itresendsframe0,whichis
acknowledged."
3321,"Efficiency
TheStop-and-WaitARQ discussed intheprevious sectionisveryinefficient ifourchan­
nelisthickandlong.Bythick,wemeanthatourchannelhasalargebandwidth; bylong,
wemeantheround-trip delayislong.Theproductofthesetwoiscalledthebandwidth­
delayproduct, aswediscussed inChapter3.Wecanthinkofthechannelasapipe.The
bandwidth-delay productthenisthevolumeofthepipeinbits.Thepipeisalwaysthere."
3322,"Ifwedonotuseit,weareinefficient."
3323,"Thebandwidth-delay productisameasureofthe
numberofbitswecansendoutofoursystemwhilewaitingfornewsfromthereceiver."
3324,"Example 11.4
Assumethat,inaStop-and-Wait ARQ system,thebandwidth ofthelineis1Mbps,and1bit
takes20mstomakearoundtrip.Whatisthebandwidth-delay product?Ifthesystemdataframes
are1000bitsinlength,whatistheutilization percentage ofthelink?"
3325,"Solution
Thebandwidth-delay productisSECTION 11.5NOISYCHANNELS 323
Figure11.11FlowdiagramforExample 11.3
Sender Receiver
Rn
~9_ET9Ihql!J ArrivalRn
:~~[nQIrIqUJ Arrival
Rn
~o:-(:-o+o~-(: Arrival
1__1__:_J...!.1_!.._.!
Discard, duplicatem
I
I
I
ACK1]
---------1
1
1
t
Time5n
Request f9""1iJ-9J]~3iff~Sn
Request@rU9I(~qn~
5n
Time-out f9""rtr9n_:_qff~
StopStartcp
Stopl
Stop
StartIt
5""
Time-out ItTime-out:-6~i+f~0i""1-'restart ,__!._l£J__'__1__1Time-out
restart
Thesystemcansend20,000bitsduringthetimeittakesforthedatatogofromthesendertothe
receiverandthenbackagain.However, thesystemsendsonly1000bits.Wecansaythatthelink
utilization isonly1000/20,000, or5percent.Forthisreason,foralinkwithahighbandwidth or
longdelay,theuseofStop-and- WaitARQwastesthecapacityofthelink."
3326,"Example 11.5
Whatistheutilization percentage ofthelinkinExample 11.4ifwehaveaprotocolthatcansend
upto15framesbeforestopping andworrying abouttheacknowledgments?"
3327,"Solution
Thebandwidth-delay productisstill20,000bits.Thesystemcansendupto15framesor
15,000bitsduringaroundtrip.Thismeanstheutilization is15,000/20,000, or75percent.Of
course,iftherearedamaged frames,theutilization percentage ismuchlessbecauseframes
havetoberesent."
3328,"Pipelining
Innetworking andinotherareas,ataskisoftenbegunbeforetheprevioustaskhasended."
3329,Thisisknownaspipelining.
3330,"Thereisnopipelining inStop-and-Wait ARQbecausewe
needtowaitforaframetoreachthedestination andbeacknowledged beforethenext
framecanbesent.However, pipelining doesapplytoournexttwoprotocols because324CHAPTER 11DATALINKCONTROL
severalframescanbesentbeforewereceivenewsabouttheprevious frames.Pipelining
improves theefficiency ofthetransmission ifthenumberofbitsintransition islargewith
respecttothebandwidth-delay product."
3331,"Go-Back-N Automatic RepeatRequest
Toimprove theefficiency oftransmission (fillingthepipe),multiple framesmustbein
transition whilewaitingforacknowledgment."
3332,"Inotherwords,weneedtoletmorethan
oneframebeoutstanding tokeepthechannel busywhilethesenderiswaitingfor
acknowledgment."
3333,"Inthissection,wediscussoneprotocol thatcanachievethisgoal;in
thenextsection,wediscussasecond."
3334,"ThefirstiscalledGo-Back-N Automatic RepeatRequest (therationale forthe
namewillbecome clearlater).Inthisprotocol wecansendseveralframesbefore
receiving acknowledgments; wekeepacopyoftheseframesuntiltheacknowledg­
mentsarrive."
3335,"Sequence Numbers
Framesfromasendingstationarenumbered sequentially."
3336,"However, because weneed
toincludethesequence numberofeachframeintheheader,weneedtosetalimit.If
theheaderoftheframeallowsmbitsforthesequence number, thesequence numbers
rangefrom0to2m-1.Forexample, ifmis4,theonlysequence numbers are0
through 15inclusive."
3337,"However, wecanrepeatthesequence."
3338,"Sothesequence num­
bersare
0,1,2,3,4,5,6, 7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10, 11,..."
3339,"Inotherwords,thesequence numbers aremodulo-2m."
3340,"IntheGo-Back-N Protocol, thesequence numbers aremodulo1!"",
wheremisthesizeofthesequence numberfieldinbits."
3341,"SlidingWindow
Inthisprotocol (andthenext),theslidingwindow isanabstractconceptthatdefinesthe
rangeofsequence numbers thatistheconcernofthesenderandreceiver."
3342,"Inotherwords,
thesenderandreceiverneedtodealwithonlypartofthepossiblesequence numbers."
3343,"The
rangewhichistheconcernofthesenderiscalledthesendslidingwindow; therangethat
istheconcernofthereceiveriscalledthereceiveslidingwindow."
3344,Wediscussbothhere.
3345,"Thesendwindowisanimaginary boxcovering thesequence numbers ofthedata
frameswhichcanbeintransit.Ineachwindowposition, someofthesesequence numbers
definetheframesthathavebeensent;othersdefinethosethatcanbesent.Themaximum
sizeofthewindowis2m-1forreasonsthatwediscusslater.Inthischapter,weletthesize
befixedandsettothemaximum value,butwewillseeinfuturechaptersthatsomeprotocols
mayhaveavariablewindowsize.Figure11.12showsaslidingwindowofsize15(m=4)."
3346,Thewindow atanytimedividesthepossible sequence numbers intofourregions.
3347,"Thefirstregion,fromthefarlefttotheleftwallofthewindow, definesthesequenceSECTION 11.5NOISYCHANNELS 325
Figure11.12 SendwindowforGo-Back-N ARQ
SfSendwindow,
~'~d;""g '""m,
:)Xf)!~r(5~~Z;! 31415!6
Framesalready
acknowledgedFramessent,butnot
acknowledged (outstanding)Framesthatcanbesent,
butnotreceived fromupperlayerFramesthat
cannotbesent
Sendwindow, sizeSSilC'""2m-1
a.Sendwindowbeforesliding
5""
---w:±J:m:w:L:l12 i13i14iISi0CIl
b.Sendwindowaftersliding
numbers belonging toframesthatarealreadyacknowledged."
3348,"Thesenderdoesnot
worryabouttheseframesand keeps nocopiesofthem.Thesecondregion,coloredin
Figure11.12a,definestherangeofsequence numbers belonging totheframesthatare
sentandhaveanunknown status.Thesenderneedstowaittofindoutiftheseframes
havebeenreceived orwerelost.Wecalltheseoutstanding frames.Thethirdrange,
whiteinthefigure,definestherangeofsequence numbers forframesthatcanbesent;
however, thecorresponding datapacketshavenotyetbeenreceived fromthenetwork
layer.Finally,thefourthregiondefinessequence numbers thatcannotbeuseduntilthe
windowslides,asweseenext."
3349,"Thewindowitselfisanabstraction; threevariables defineitssizeandlocationat
anytime.Wecallthesevariables Sf(sendwindow,thefirstoutstanding frame),Sn(send
window,thenextframetobesent),andSsize(sendwindow,size).ThevariableSfdefines
thesequence numberofthefirst(oldest)outstanding frame.Thevariable Snholdsthe
sequence numberthatwillbeassigned tothenextframetobesent.Finally,thevariable
Ssizedefinesthesizeofthewindow,whichisfixedinourprotocol."
3350,"Thesendwindowisanabstract conceptdefininganimaginary
boxofsize2m~1withthreevariables: SpSmandSsize'
Figure11.12bshowshowasendwindowcanslideoneormoreslotstotheright
whenanacknowledgment arrivesfromtheotherend.Aswewillseeshortly,theacknowl­
edgments inthisprotocol arecumulative, meaning thatmorethanoneframecanbe
acknowledged byanACKframe.InFigure11.12b,frames0,I,and2areacknowledged,
sothewindowhasslidtotherightthreeslots.Note that thevalueofSfis3becauseframe3
isnowthefirstoutstanding frame."
3351,"Thesendwindowcanslideoneormoreslotswhenavalidacknowledgment arrives.326CHAPTER 11DATALINKCONTROL
Thereceivewindowmakessurethatthecorrectdataframesarereceived andthat
thecorrectacknowledgments aresent.ThesizeofthereceivewindowisalwaysI.The
receiverisalwayslookingforthearrivalofaspecificframe.Anyframearrivingoutof
orderisdiscarded andneedstoberesent.Figure11.13showsthereceivewindow."
3352,"Figure11.13 ReceivewindowforGo-Back-N ARQ
RIIReceivewindow,nextframeexpected
""---,---r---,---,---,---~---,---,---,---,---,---,---,---,---,---,---,---,---,---,,13I14IISI0I1I2 , 3 I4I5I6I7I8 , 9 I10III,12,13I14,15I0I1Il .I J l l 1 ""' J."
3353,"l 1 1 .1 1~__1 1 1 .L J J J ~
Framesalreadyreceived Framesthatcannotbereceived
andacknowledged untilthewindowslides
a.Receivewindow
RII
""---,- - -,---,- --,---,---,-- -~- --,---,---,---,- --,---""---,---,- --""- --,- - -,---,---,
,13I14I15I0I1I2 ' 3 ' 4 I5I6 ' 7 I8 ' 9 I10IIII12I13,14I15I0I1 ,~ J J ~ J."
3354,1 1 ~ .1.
3355,1 .1 ...
3356,1 1 1 1 1 J.
3357,".J .I ~
b.Window aftersliding
Thereceivewindowisanabstractconceptdefininganimaginary
boxofsize1withonesinglevariableRn•Thewindowslides
whenacorrectframehasarrived;slidingoccursoneslotatatime."
3358,"NotethatweneedonlyonevariableRn(receivewindow, nextframeexpected) to
definethisabstraction."
3359,"Thesequence numbers totheleftofthewindowbelongtothe
framesalreadyreceived andacknowledged; thesequence numbers totherightofthis
windowdefinetheframesthatcannotbereceived."
3360,"Anyreceivedframewithasequence
numberinthesetworegionsisdiscarded."
3361,"Onlyaframewithasequence numbermatch­
ingthevalueofRnisaccepted andacknowledged."
3362,"Thereceivewindowalsoslides,butonlyoneslotatatime.Whenacorrectframe
isreceived (andaframeisreceived onlyoneatatime),thewindowslides."
3363,"Timers
Although therecanbeatimerforeachframethatissent,inourprotocol weuseonly
one.Thereasonisthatthetimerforthefirstoutstanding framealwaysexpiresfirst;we
sendalloutstanding frameswhenthistimerexpires."
3364,"Acknowledgment
Thereceiversendsapositiveacknowledgment ifaframehasarrivedsafeandsound
andinorder.Ifaframeisdamaged orisreceived outoforder,thereceiverissilentand
willdiscardallsubsequent framesuntilitreceivestheoneitisexpecting."
3365,"ThesilenceofSECTION 11.5NOISYCHANNELS 327
thereceivercausesthetimeroftheunacknowledged frameatthesendersitetoexpire."
3366,"This,inturn,causesthesendertogobackandresendallframes,beginning withtheone
withtheexpiredtimer.Thereceiverdoesnothavetoacknowledge eachframereceived."
3367,Itcansendonecumulative acknowledgment forseveralframes.
3368,"Resending aFrame
Whenthetimerexpires,thesenderresendsalloutstanding frames.Forexample, suppose
thesenderhasalreadysentframe6,butthetimerforframe3expires.Thismeansthat
frame3hasnotbeenacknowledged; thesendergoesbackandsendsframes3,4,5,and6
again.ThatiswhytheprotocoliscalledGo-Back-N ARQ."
3369,"Design
Figure11.14showsthedesignforthisprotocol."
3370,"Aswecansee,multiple framescan
beintransitintheforwarddirection, andmUltiple acknowledgments inthereverse
direction."
3371,"TheideaissimilartoStop-and- WaitARQ;thedifference isthatthesend
Figure11.14DesignofGo-Back-N ARQ
SNext
!i~nd
IiI!
Sender Receiver
Network
Datalink
PhysicalDataframe ACKframeDeliver
Getdata '1 ~ data
I seqNo ackNo ...,.I
...I ...I
RI,T I,t
ecelveSend ReceIve Send
frame frame frame frame
•Ii&f&§,M¥ !'¥§w,'#,M# I
I -+--~ ~ I:::l\'aINetwork
Datalink
Physical
Event:
Repeatforever
Event:Repeatforever328CHAPTER 11DATALINKCONTROL
windowallowsustohaveasmanyframesintransition asthereareslotsinthesend
window."
3372,"SendWindowSize
Wecannowshowwhythesizeofthesendwindow mustbelessthan2m.Asan
example, wechoosem=2,whichmeansthesizeofthewindowcanbe2m-1,or3."
3373,"Figure11.15compares awindowsizeof3againstawindowsizeof4.Ifthesizeof
thewindowis3(lessthan22)andallthreeacknowledgments arelost,theframe°
timerexpiresandallthreeframesareresent.Thereceiverisnowexpecting frame3,
notframe0,sotheduplicate frameiscorrectly discarded."
3374,"Ontheotherhand,ifthe
sizeofthewindowis4(equalto22)andallacknowledgments arelost,thesender
willsendaduplicate offrame0.However, thistimethewindowofthereceiver
expectstoreceiveframe0,soitacceptsframe0,notasaduplicate, butasthefirst
frameinthenextcycle.Thisisanerror."
3375,"Figure11.15WindowsizeforGo-Back-N ARQ
Sender Receiver Sender Receiver
a.Window size<2mb.Window size=2m
InGo-Back-N ARQ,thesizeofthesendwindowmustbelessthanr;
thesizeofthereceiverwindowisalways1."
3376,"Algorithms
Algorithm 11.7showstheprocedure forthesenderinthisprotocol.SECTION 11.5NOISYCHANNELS 329
Algorithm 11.7Go-Back-N senderalgorithm
if{Event{ArrivalNotification» IIACKarrives
{~hile(true)
{
WaitForEvent();
if(Event(RequestToSend»
{
if{Event{TimeOut»
{
StartTimer() ;
Temp=Sf;
while{Temp <Sn);
{
SendFrame(Sf);
Sf=Sf+1;
}//Apacket tosend//Repeat forever
IIIfwindowisfull
liThetimerexpiresIIIfavalidACKReceive (ACK);
if{corrupted{ACK»
Sleep();
if{{ackNo>sf)&&{ackNO<=Sn»
While(Sf <=ackNo)
{
PurgeFrame{Sf);
Sf=Sf+1;
}
StopTimer();if(Sn-Sf >=Sw)
Sleep();
GetData() ;
MakeFrame (Sn);
StoreFrame (Sn);
SendFrame(Sn) ;
Sn=Sn+1;
if(timer notrunning)
StartTimer{);
}}}1Sw=2'""-1;
2Sf=0;
3Sn=OJ
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45}
Analysis Thisalgorithm firstinitializes threevariables."
3377,"UnlikeStop-and- WaitARQ,thispro­
tocolallowsseveralrequestsfromthenetworklayerwithouttheneedforothereventstooccur;
wejustneedtobesurethatthewindowisnotfull(line12).Inourapproach, ifthewindowisfull,330CHAPTER J1DATALINKCONTROL
therequestisjustignoredandthenetworklayerneedstotryagain.Someimplementations useother
methods suchasenabling ordisabling thenetworklayer.Thehandling ofthearrivaleventismore
complex thanintheprevious protocol."
3378,"Ifwereceiveacorrupted ACK,weignoreit.IftheadeNa
belongstooneoftheoutstanding frames,weusealooptopurgethebuffersandmovetheleftwall
totheright.Thetime-outeventisalsomorecomplex."
3379,"Wefirststartanewtimer.Wethenresendall
outstanding frames."
3380,Algorithm 11.8istheprocedure atthereceiversite.
3381,"Algorithm 11.8Go-Back-N receiveralgorithm
if(Event{ArrivalNotification» /Dataframearrives
(WaitForEvent();
IIIfexpected frameIIRepeat forever
IIDeliver data
IISlide windowDeliverData()i
Ru=~+1;
SendACK (Ru);
}Receive(Frame);
if(corrupted(Frame»
Sleep(};
if(seqNo ==Ru}
{
}1~n=0;
2
3~hile(true)
4 {
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19}
Analysis Thisalgorithm issimple.Weignoreacorruptorout-of-order frame.Ifaframe
arriveswithanexpected sequence number,wedeliverthedata,updatethevalueofRn,andsend
anACKwiththeackNashowingthenextframeexpected."
3382,"Example 11.6
Figure11.16showsanexample ofGo-Back -N.Thisisanexample ofacasewheretheforward
channelisreliable,butthereverseisnot.Nodataframesarelost,butsomeACKsaredelayedand
oneislost.Theexamplealsoshowshowcumulative acknowledgments canhelpifacknowledgments
aredelayedorlost."
3383,"Afterinitialization, therearesevensenderevents.Request eventsaretriggered bydata
fromthenetwork layer;arrivaleventsaretriggered byacknowledgments fromthephysical
layer.Thereisnotime-out eventherebecause alloutstanding framesareacknowledged
beforethetimerexpires.Notethatalthough ACK2islost,ACK3servesasbothACK2and
ACK3."
3384,"Therearefourreceiver events,alltriggered bythearrivalofframesfromthephysical
layer.SECTION 11.5NOISYCHANNELS 331
Figure11.16 FlowdiagramforExample 11.6
Arrival
Request
Reque~tRI1
ArrivalL....L---'-.L...j,..,J---'------l.......JReceiverL!l RI1
~I1213141516171 Initial
i--------.::::?,.j-~~.!J2~l±i~l2J Arrival
:-----==::;~+-..-@1Itill:ffiill~ Arrival
TimeSender
LP
ArrivalArrivalSf~
Initial~-7r:lo""l 1--'1-'21
Sf
Reque~t P.O~I""""2.3""4'1""'5""'1""""'61- 7'0-'-1'2'
RequestStart
timer
l-
Stop
timer
Example 11.7
Figure11.17showswhathappenswhenaframeislost.Frames0,1,2,and3aresent.However,
frame1islost.Thereceiverreceivesframes2and3,buttheyarediscarded becausetheyare
received outoforder(frame1isexpected)."
3385,"Thesenderreceives noacknowledgment about
frames1,2,or3.Itstimerfinallyexpires.Thesendersendsalloutstanding frames(1,2,and3)
becauseitdoesnotknowwhatiswrong.Notethattheresending offramesl,2,and3isthe
response toonesingleevent.Whenthesenderisresponding tothisevent,itcannotacceptthe
triggering ofotherevents.ThismeansthatwhenACK2arrives,thesenderisstillbusywithsend­
ingframe3.Thephysica1layer mustwaituntilthiseventiscompleted andthedatalinklayer
goesbacktoitssleepingstate.Wehaveshownaverticallinetoindicatethedelay.Itisthesame
storywithACK3;butwhenACK3arrives,thesenderisbusyresponding toACK2.Ithappens
againwhenACK4arrives.Notethatbeforethesecondtimerexpires,alloutstanding frameshave
beensentandthetimerisstopped."
3386,"Go-Back-N ARQVersusStop-and- WaitARQ
Thereadermayfindthatthereisasimilarity betweenGo-Back-N ARQandStop-and-Wait
ARQ.WecansaythattheStop-and-WaitARQ Protocol isactuallyaGo-Back-N ARQ
inwhichthereareonlytwosequence numbers andthesendwindowsizeis1.Inother
words,m=1,2m-1=1.InGo-Back-N ARQ,wesaidthattheadditionismodulo-2m;in
Stop-and- WaitARQitis2,whichisthesameas2mwhenm=1.332CHAPTER 11DATALINKCONTROL
Figure11.17FlowdiagramforExample 11.7
Sender
L!JStart
timerSf~
Initial~
SfSn
Request 0I23456701Receiver
crJRn
:
~Initial
I
I
r:q;::::::::-A---_: Rn1Frame0
I
Stop-and-WaitARQ isaspecialcaseofGo-Back-N ARQ
inwhichthesizeofthesendwindowis1."
3387,"Selective RepeatAutomatic RepeatRequest
Go-Back-N ARQsimplifies theprocessatthereceiversite.Thereceiverkeepstrackof
onlyonevariable, andthereisnoneedtobufferout-of-order frames;theyaresimply
discarded."
3388,"However, thisprotocol isveryinefficient foranoisylink.Inanoisylinka
framehasahigherprobability ofdamage, whichmeanstheresending ofmultipleframes."
3389,Thisresending usesupthebandwidth andslowsdownthetransmission.
3390,"Fornoisylinks,
thereisanothermechanism thatdoesnotresendNframeswhenjustoneframeisdam­
aged;onlythedamaged frameisresent.Thismechanism iscalledSelective RepeatARQ."
3391,"Itismoreefficientfornoisylinks,buttheprocessing atthereceiverismorecomplex.SECTION 11.5NOISYCHANNELS 333
Windows
TheSelective RepeatProtocolalsousestwowindows: asendwindowandareceivewin­
dow.However, therearedifferences betweenthewindows inthisprotocolandtheonesin
Go-Back-N."
3392,"First,thesizeofthesendwindowismuchsmaller;itis2m-I.Thereasonfor
thiswillbediscussed later.Second,thereceivewindowisthesamesizeasthesendwindow."
3393,"Thesendwindow maximum sizecanbe2m-I.Forexample, ifm=4,the
sequence numbers gofrom0to15,butthesizeofthewindowisjust8(itis15in
theGo-Back-N Protocol)."
3394,"Thesmallerwindowsizemeanslessefficiency infillingthe
pipe,butthefactthattherearefewer duplicate framescancompensate forthis."
3395,Theprotocol usesthesamevariables aswediscussed forGo-Back-N.
3396,"Weshowthe
Selective RepeatsendwindowinFigure11.18toemphasize thesize.Compare itwith
Figure11.12."
3397,"Figure11.18SendwindowforSelective RepeatARQ
L___J___ J___~___ 1___ 1___ 1___ 1___ 1___ ~___J___ j___ J___
Framesalready Framessent,butFramesthatcan Framesthat
acknowledged notacknowledged besent cannotbesent
'\iLC'=2m-1
ThereceivewindowinSelective Repeatistotallydifferent fromtheoneinGo­
Back-N.First,thesizeofthereceivewindowisthesameasthesizeofthesendwindow
(2m-I).TheSelective RepeatProtocol allowsasmanyframesasthesizeofthereceive
windowtoarriveoutoforderandbekeptuntilthereisasetofin-orderframestobe
delivered tothenetworklayer.Becausethesizesofthesendwindowandreceivewin­
dowarethesame,alltheframesinthesendframecanarriveoutoforderandbestored
untiltheycanbedelivered."
3398,"Weneed,however, tomentionthatthereceiverneverdelivers
packetsoutofordertothenetworklayer.Figure11.19showsthereceivewindowinthis
Figure11.19ReceivewindowforSelective RepeatARQ
RReceivewindow•.t:.nextframeexpected
:))~rl~~f)]5~rfI~!~f~~~tn 4!5ru--71111! 11811'9
Framesthatcanbereceived
Framesalready andstoredforlaterdelivery."
3399,"received Coloredboxes,alreadyreceivedFramesthat
cannotbereceived334 CHAPTER IIDATALINKCONTROL
protocol."
3400,"Thoseslotsinsidethewindowthatarecoloreddefineframesthathavearrived
outoforderandarewaitingfortheirneighbors toarrivebeforedeliverytothenetwork
layer."
3401,"Design
Thedesigninthiscaseistosomeextentsimilartotheonewedescribed forthe00­
Back-N,butmorecomplicated, asshowninFigure11.20."
3402,"Figure11.20DesignofSelective RepeatARQ
SFirst SNext
6oo:io:i6'o ""0""
SenderRNextn '
~
Receiver
Network
Datalink
PhysicalDataframe ACKorNAKDeliver
Getdata ') ~ data
I seqNo ackNo .+ror InakNo
.+1 .+I
RI,TRI,T
ecelveSend ecelve Send
frameframe frame frame
)0
IIP&¥ IJd,if%*&WE** IF5f?i¥*%W I
I ~~ e::- ~Network
Datalink
Physical
Event:IRequestfromI
networklayer
I
I
EINotification fromjvent:physicallayerRepeatforever
WindowSizes
Wecannowshowwhythesizeofthesenderandreceiverwindows mustbeatmostone­
halfof2m.Foranexample, wechoosem=2,whichmeansthesizeofthewindowis2m/2,
or2.Figure11.21compares awindowsizeof2withawindowsizeof3."
3403,"Ifthesizeofthewindowis2andallacknowledgments arelost,thetimerforframe0
expiresandframe0isresent.However, thewindowofthereceiverisnowexpectingSECTION 11.5NOISYCHANNELS 335
Figure11.21 Selective RepeatARQ,windowsize
Sender
Sf_Ito1 2 3
Time-out
a.Window size=2m-1Receiver Sender
Sf~~
Sf~l
~
Sf~l~ Time-out
b.Window size>2m-1Receiver
frame2,notframe0,sothisduplicate frameiscorrectly discarded."
3404,"Whenthesizeof
thewindow is3andallacknowledgments arelost,thesendersendsaduplicate of
frameO.However, thistime,thewindowofthereceiverexpectstoreceiveframe0(0is
partofthewindow), soitacceptsframe0,notasaduplicate, butasthefirstframein
thenextcycle.Thisisclearlyanerror."
3405,"InSelective RepeatARQ,thesizeofthesenderandreceiverwindow
mustbeatmostone-halfof2m•
Algorithms
Algorithm 11.9showstheprocedure forthesender."
3406,"Algorithm 11.9Sender-site Selective Repeatalgorithm
WaitForEvent()i
if(Event(RequestToSend)}
{1=2m-1i
2=Oi
3=Oi
4
5hile(true)
6 {
7
8
9//Repeat forever
//There isapacket tosen336CHAPTER 11DATALINKCONTROL
Algorithm 11.9Sender-site Selective Repeatalgorithm (continued)
}while{sf <ackNo)
{
Purge(sf);
stopTimer (Sf);
Sf=Sf+1;
}if(Event{ArrivalNotification» IIACKarrives
{
Receive{frame); I/Receive ACKorNAK
if{corrupted{frame»
Sleep();
if(FrameType ==NAK)
if(nakNo between SfandSo)
{
resend{nakNo);
StartTimer{nakNo);
}
if(FrameType ==ACK)
if(ackNo between SfandSo)
{10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48}if{Sn-S;E >=Sw)
Sleep{);
GetData{) ;
MakeFrame (Sn);
StoreFrame{Sn);
SendFrame (Sn);
Sn=Sn+1;
StartTimer{Sn);
}
}
if(Event{TimeOut{t»)
{
StartTimer{t);
SendFrame{t);
}I/Ifwindowisfull
liThetimerexpires
Analysis Thehandling oftherequesteventissimilartothatoftheprevious protocolexcept
thatonetimerisstartedforeachframesent.Thearrivaleventismorecomplicated here.AnACK
oraNAKframemayarrive.IfavalidNAKframearrives,wejustresendthecorresponding
frame.IfavalidACKarrives,weusealooptopurgethebuffers,stopthecorresponding timer."
3407,"andmovetheleftwallofthewindow.Thetime-outeventissimplerhere;onlytheframewhich
timesoutisresent."
3408,"Algorithm 11.10showstheprocedure forthereceiver.SECTION 11.5NOISYCHANNELS 337
AI~orithm 11.10Receiver-site Selective Repeatalgorithm
jDataframearrivesIIRepeat forever
}
if(AckNeeded) ;
{
SendAck(Rn) ;
AckNeeded =false;
NakSent=false;
}
}
}Receive(Frame);
if(corrupted(Frame»&& (NOTNakSent)
{
SendNAK(Rn) ;
NakSent=true;
Sleep{);
}
if(seqNo <>Rn)&& (NOTNakSent)
{
SendNAK(Rn) ;
NakSent =true;
if{(seqNo inwindow)&&(IMarked(seqNo»
{
StoreFrame{seqNo)
Marked(seqNo)= true;
whi1e(Marked(Rn»
{
DeliverData (Rn);
Purge(Rn);
Rn=Rn+1;
AckNeeded =true;
}WaitForEvent()i
if{Event{ArrivalNotification»
{1~n=0;
2~akSent =false;
3~ckNeeded =false;
4~epeat(for allslots)
5Marked(slot) =false;
6
7!while(true)
8 {
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44}'-------l"":~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~___l
Analysis Hereweneedmoreinitialization."
3409,"Inordernottooverwhelm theothersidewith
NAKs,weuseavariablecalledNakSent."
3410,"ToknowwhenweneedtosendanACK,weuseavari­
ablecalledAckNeeded."
3411,"Bothoftheseareinitialized tofalse.Wealsouseasetofvariables to338CHAPTER 11DATALINKCONTROL
marktheslotsinthereceivewindowoncethecorresponding framehasarrivedandisstored.If
wereceiveacorrupted frameandaNAKhasnotyetbeensent,wesendaNAKtotelltheother
sitethatwehavenotreceived theframeweexpected.Iftheframeisnotcorrupted andthe
sequence numberisinthewindow, westoretheframeandmarktheslot.Ifcontiguous frames,
startingfromRnhavebeenmarked,wedelivertheir data tothenetworklayerandslidethewin­
dow.Figure11.22showsthissituation."
3412,"Figure11.22DeliveryofdatainSelective RepeatARQ
RackNosent:3
~
a.Beforedelivery b.Afterdelivery
Example 11.8
ThisexampleissimilartoExample 11.3inwhichframe1islost.WeshowhowSelective Repeat
behavesinthiscase.Figure11.23showsthesituation."
3413,"Figure11.23Flowdiagramfor Example 11.8
Arrival
ArrivalArrival
""----D......"
3414,"~--'--JL.......JReceiver
L!JRn
i
~Initial
I
I
I
Arrival
""----D~~--'--JL.......J
."
3415,"Rn
I\C~4m~01112134 5 6 7 Arrival
: Frames1,2,3t deliveredJ
ItSender
C!l
RequestRequestRequest
ArrivalSf~
Initial~
SfSn
Request 012345670o1SECTION 11.5NOISYCHANNELS 339
Onemaindifference isthenumberoftimers.Here,eachframesentorresentneedsatimer,
whichmeansthatthetimersneedtobenumbered (0,1,2,and3).Thetimerforframe°starts
atthefirstrequest,butstopswhentheACKforthisframearrives.ThetimerforframeIstartsat
thesecondrequest,restartswhenaNAKarrives,andfinallystopswhenthelastACKarrives."
3416,"Theothertwotimersstartwhenthecorresponding framesaresentandstopatthelastarrival
event."
3417,"Atthereceiver siteweneedtodistinguish between theacceptance ofaframeandits
delivery tothenetwork layer.Atthesecondarrival,frame2arrivesandisstoredandmarked
(coloredslot),butitcannotbedelivered becauseframeIismissing.Atthenextarrival,frame3
arrivesandismarkedandstored,butstillnoneoftheframescanbedelivered."
3418,"Onlyatthelast
arrival,whenfinallyacopyofframe1arrives,canframesI,2,and3bedelivered tothenet­
worklayer.Therearetwoconditions forthedeliveryofframestothenetworklayer:First,aset
ofconsecutive framesmusthavearrived.Second,thesetstartsfromthebeginning ofthewin­
dow.AfterthefirstalTival,therewasonlyoneframeanditstartedfromthebeginning ofthe
window."
3419,"Afterthelastarrival,therearethreeframesandthefirstonestartsfromthebeginning
ofthewindow."
3420,"Anotherimportant pointisthataNAKissentafterthesecondarrival,butnotafterthethird,
although bothsituations lookthesame.Thereasonisthattheprotocoldoesnotwanttocrowdthe
networkwithunnecessary NAKsandunnecessary resentframes.ThesecondNAKwouldstillbe
NAKItoinformthesendertoresendframe1again;thishasalreadybeendone.ThefirstNAK
sentisremembered (usingthenakSentvariable) andisnotsentagainuntiltheframeslides.A
NAKissentonceforeachwindowpositionanddefinesthefirstslotinthewindow."
3421,"ThenextpointisabouttheACKs.NoticethatonlytwoACKsaresenthere.Thefirstone
acknowledges onlythefirstframe;thesecondoneacknowledges threeframes.InSelective
Repeat,ACKsaresentwhendataaredelivered tothenetwork layer.Ifthedatabelonging ton
framesaredelivered inoneshot,onlyoneACKissentforallofthem."
3422,"Piggybacking
Thethreeprotocols wediscussed inthissectionareallunidirectional: dataframesflow
inonlyonedirection although controlinformation suchasACKandNAKframescan
travelintheotherdirection."
3423,"Inreallife,dataframesarenormally flowinginbothdirec­
tions:fromnodeAtonodeBandfromnodeBtonodeA.Thismeansthatthecontrol
information alsoneedstoflowinbothdirections."
3424,"Atechnique calledpiggybacking is
usedtoimprovetheefficiency ofthebidirectional protocols."
3425,"Whenaframeiscarrying
datafromAtoB,itcanalsocarrycontrolinformation aboutarrived(orlost)frames
fromB;whenaframeiscarryingdatafromBtoA,itcanalsocarrycontrolinformation
aboutthearrived(orlost)framesfromA."
3426,Weshowthedesign for aGo-Back-N ARQusingpiggybacking inFigure11.24.
3427,Notethateachnodenowhastwowindows: onesendwindowandonereceivewindow.
3428,"Bothalsoneedtouseatimer.Bothareinvolved inthreetypesofevents:request,arrival,
andtime-out."
3429,"However, thearrivaleventhereiscomplicated; whenaframearrives,the
siteneedstohandlecontrolinformation aswellastheframeitself.Bothoftheseconcerns
mustbetakencareofinoneevent,thearrivalevent.Therequesteventusesonlythesend
windowateachsite;thearrivaleventneedstousebothwindows."
3430,"Animportant point aboutpiggybacking isthatbothsitesmustusethesamealgo­
rithm.Thisalgorithm iscomplicated becauseitneedstocombine twoarrivalevents
intoone.Weleavethistaskasanexercise.340CHAPTER 11DATALINKCONTROL
Figure11.24Designofpiggybacking inGo-Back-N ARQ
Send
windowReceive
windowReceive Send
window windowC 11m'~1_1 1IJIIJIl
Network
Datalink
PhysicalackNo
Deliver Get I-FrameDeliver Get..II'f ~I
IT seqNo IT
..I ~I
RI,T RI,T
ecelveSend ecelveSend
frameframe frameframe
I,bed.lIrs)_I I@@-~ I
~, f¥fI_I1""""'3-,FB¥i-Network
Datalink
Physical
Event:IRequestfromI'networklayer
I
Repeatforevert 0
Algorithm for
f-'oO----iTime-outIsendingandreceiving
Event:.."
3431,"I
E.1Notification fromIvent:physical layerAlgorithm for
sendingandreceiving
11.6HDLC
High-level DataLinkControl(HDLC) isabit-oriented protocol forcommunication
overpoint-to-point andmultipoint links.Itimplements theARQmechanisms we dis­
cussedinthischapter."
3432,"Configurations andTransfer Modes
HDLCprovides twocommon transfermodesthatcanbeusedindifferent configura­
tions:normalresponse mode(NRM)andasynchronous balanced mode(ABM)."
3433,"NormalResponse Mode
Innormalresponse mode(NRM),thestationconfiguration isunbalanced."
3434,"Wehaveone
primarystationandmultiplesecondary stations.Aprimarystationcansendcommands;
asecondary stationcanonlyrespond."
3435,"TheNRMisusedforbothpoint-to-point and
multiple-point links,asshowninFigure11.25.SECTION 11.6HDLC 341
Figure11.25Normalresponse mode
Primary
ICommandt------
a.Point-to-pointSecondary
~ ResponseI
Secondary Secondary
Primary
ICommandt------
b.Multipoint~ ResponseI~ ResponseI
Asynchronous Balanced Mode
Inasynchronous balanced mode(ABM),theconfiguration isbalanced."
3436,"Thelinkis
point-to-point, andeachstationcanfunction asaprimaryandasecondary (actingas
peers),asshowninFigure11.26.Thisisthecommon modetoday."
3437,"Figure11.26Asynchronous balanced mode
Combined Combined
ICommand/responset------
~ Command/responseI
Frames
Toprovidetheflexibility necessary tosupportalltheoptionspossibleinthemodesand
configurations justdescribed, HDLCdefinesthreetypesofframes:information frames
(I-frames), supervisory frames(S-frames), andunnumbered frames(V-frames)."
3438,"Each
typeofframeservesasanenvelope forthetransmission ofadifferent typeofmessage."
3439,"I-frames areusedtotransport userdataandcontrolinformation relatingtouserdata
(piggybacking)."
3440,S-frames areusedonlytotransport controlinformation.
3441,"V-frames are
reservedforsystemmanagement."
3442,"Information carriedbyV-frames isintendedformanag­
ingthelinkitself.342 CHAPTER 11DATALINKCONTROL
FrameFormat
EachframeinHDLCmaycontainuptosixfields,asshowninFigure11.27:abegin­
ningflagfield,anaddressfield,acontrolfield,aninformation field,aframecheck
sequence (FCS)field,andanendingflagfield.Inmultiple-frame transmissions, the
endingflagofoneframecanserveasthebeginning flagofthenextframe."
3443,"Figure11.27 HDLCframes
FlagAddress Control FCSFlagS-frameFlagAddress Control
FlagAddress ControlUser
infonnation
Management
infonnatlonPCSFlagI-frame
FCSFlagU-frame
Fields
Letusnow discuss thefieldsandtheiruseindifferent frametypes."
3444,"oFlagfield.TheflagfieldofanHDLCframeisan8-bitsequence withthebitpattern
01111110 thatidentifies boththebeginning andtheendofaframeandservesasa
synchronization patternforthereceiver."
3445,"oAddress field.ThesecondfieldofanHDLCframecontains theaddressofthe
secondary station.Ifaprimarystationcreatedtheframe,itcontainsatoaddress.If
asecondary createstheframe,itcontains afromaddress.Anaddressfieldcanbe
1byteorseveralbyteslong,depending ontheneedsofthenetwork."
3446,"Onebytecan
identifyupto128stations(lbitisusedforanotherpurpose)."
3447,"Largernetworks
requiremultiple-byte addressfields.Iftheaddressfieldisonly1byte,thelastbit
isalwaysa1.Iftheaddressismorethan1byte,allbytesbutthelastonewillend
with0;onlythelastwillendwith1.Endingeachintermediate bytewith0indi­
catestothereceiverthattherearemoreaddressbytestocome."
3448,"oControl field.Thecontrolfieldisa1-or2-bytesegmentoftheframeusedfor
flowanderrorcontrol.Theinterpretation ofbitsinthisfielddependsontheframe
type.Wediscussthisfieldlateranddescribe itsformatforeachframetype."
3449,"oInformation field.Theinformation fieldcontains theuser'sdatafromthenet­
worklayerormanagement information."
3450,"Itslengthcanvaryfromonenetwork to
another."
3451,"oFCSfield.Theframechecksequence (FCS)istheHDLCerrordetection field.It
cancontaineithera2-or4-byteITU-TCRC.SECTION 11.6HDLC 343
ControlField
Thecontrolfielddetermines thetypeofframeanddefinesitsfunctionality."
3452,"Soletus
discusstheformatofthisfieldingreaterdetail.Theformatisspecificforthetypeof
frame,asshowninFigure11.28."
3453,"Figure11.28 Controlfieldformatforthedifferentframetypes
~I-frame
N(S) N(R)
~s-frarne
Code N(R)
~U-frame
Code Code
ControlFieldforI-Frames
I-frames aredesigned tocarryuserdatafromthenetworklayer.Inaddition, theycan
includeflowanderrorcontrolinformation (piggybacking)."
3454,"Thesubfields inthecontrol
fieldareusedtodefinethesefunctions."
3455,"Thefirstbitdefinesthetype.Ifthefirstbitof
thecontrolfieldis0,thismeanstheframeisanI-frame.Thenext3bits,calledN(S),
definethesequence numberoftheframe.Notethatwith3bits,wecandefinea
sequence numberbetween°and7;butintheextension format,inwhichthecontrol
fieldis2bytes,thisfieldislarger.Thelast3bits,calledN(R),correspond tothe
acknowledgment numberwhenpiggybacking isused.ThesinglebitbetweenN(S)and
N(R)iscalledthePIFbit.ThePIPfieldisasinglebitwithadualpurpose.Ithasmean­
ingonlywhenitisset(bit=1)andcanmeanpollorfinal.Itmeanspollwhentheframe
issentbyaprimarystationtoasecondary (whentheaddressfieldcontainstheaddress
ofthereceiver).Itmeansfinalwhentheframeissentbyasecondary toaprimary
(whentheaddressfieldcontainstheaddressofthesender)."
3456,"ControlFieldfor S-Frames
Supervisory framesareusedforflowanderrorcontrolwhenever piggybacking iseither
impossible orinappropriate (e.g.,whenthestationeitherhasnodataofitsowntosendor
needstosendacommand orresponse otherthananacknowledgment)."
3457,"S-frames donot
haveinformation fields.Ifthefirst2bitsofthecontrolfieldis10,thismeanstheframe
isanS-frame.Thelast3bits,calledN(R),corresponds totheacknowledgment number
(ACK)ornegativeacknowledgment number(NAK)depending onthetypeofS-frame."
3458,"The2bitscalledcodeisusedtodefinethetypeofS-frameitself.With2bits,wecan
havefourtypesofS-frames, asdescribed below:
oReceiveready(RR).Ifthevalueofthecodesubfieldis00,itisanRRS-frame."
3459,"Thiskindofframeacknowledges thereceiptofasafeandsoundframeor
groupofframes.Inthiscase,thevalueN(R)fielddefinestheacknowledgment
number.344 CHAPTER 11DATALINKCONTROL
oReceivenotready(RNR).Ifthevalueofthecodesubfieldis10,itisanRNR
S-frame."
3460,ThiskindofframeisanRRframewithadditional functions.
3461,"It
acknowledges thereceiptofaframeorgroupofframes,anditannounces that
thereceiverisbusyandcannotreceivemoreframes.Itactsasakindofconges­
tioncontrolmechanism byaskingthesendertoslowdown.ThevalueofNCR)
istheacknowledgment number."
3462,"oReject(REJ).Ifthevalueofthecodesubfieldis01,itisaREJS-frame."
3463,"Thisisa
NAKframe,butnotliketheoneusedforSelective RepeatARQ.ItisaNAKthat
canbeusedinGo-Back-N ARQtoimprove theefficiency oftheprocessby
informing thesender,beforethesendertimeexpires,thatthelastframeislostor
damaged."
3464,ThevalueofNCR)isthenegativeacknowledgment number.
3465,oSelective reject(SREJ).
3466,"Ifthevalueofthecodesubfieldis11,itisanSREJS-frame."
3467,"ThisisaNAKframeusedinSelective RepeatARQ.NotethattheHDLCProtocol
usesthetermselectiverejectinsteadofselectiverepeat.ThevalueofN(R)istheneg­
ativeacknowledgment number."
3468,"ControlFieldfor V-Frames
Unnumbered framesareusedtoexchange sessionmanagement andcontrolinfonnation
between connected devices.UnlikeS-frames, U-frames containaninformation field,
butoneusedforsystemmanagement information, notuserdata.AswithS-frames,
however, muchoftheinfonnation carriedbyU-frames iscontained incodesincluded
inthecontrolfield.U-frame codesaredividedintotwosections: a2-bitprefixbefore
thePtFbitand a3-bitsuffixafterthePtFbit.Together, thesetwosegments (5bits)can
beusedtocreateupto32different typesofU-frames."
3469,"Someofthemorecommon types
areshowninTable11.1.
Table11.1 U~frame controlcommand andresponse
Code Command Response Meaning
00001SNRM Setnormalresponse mode
11011SNRME Setnormalresponse mode,extended
11100SABM DM Setasynchronous balanced modeordisconnect mode
11110 SABME Setasynchronous balanced mode,extended
00000UI UI Unnumbered information
00110 UA Unnumbered acknowledgment
00010DISC RD Disconnect orrequestdisconnect
10000SIM RIM Setinitialization modeorrequestinformation mode
00100UP Unnumbered poll
11001RSET Reset
11101XID XID Exchange ID
10001FRMR FRMR FramerejectSECTION 11.6HDLC 345
Example 11.9:Connection/Disconnection
Figure11.29showshowV-frames canbeusedforconnection establishment andconnection
release.NodeAasksforaconnection withasetasynchronous balanced mode(SABM) frame;
nodeBgivesapositiveresponse withanunnumbered acknowledgment (VA)frame.Afterthese
twoexchanges, datacanbetransferred between thetwonodes(notshowninthefigure).After
datatransfer,nodeAsendsaDISC(disconnect) frametoreleasetheconnection; itisconfirmed
bynodeBresponding withaVA(unnumbered acknowledgment)."
3470,"Figure11.29Exampleofconnection anddisconnection
NodeA NodeB
Datatransfer
c:o.-1)
-cf)uos1)1)<=I-S~u
y
TimeI
It
Time
Example 11.10:Piggybacking withoutError
Figure11.30showsanexchange usingpiggybacking."
3471,"NodeAbeginstheexchange of
information withanI-framenumbered 0followed byanotherI-framenumbered 1.NodeB
piggybacks itsacknowledgment ofbothframesontoanI-frameofitsown.NodeB'sfirst
I-frameisalsonumbered 0[N(S)field]andcontains a 2initsN(R)field,acknowledging the
receiptofNsframes1and0andindicating thatitexpectsframe2toarrivenext.NodeB
transmits itssecondandthirdI-frames (numbered 1and2)beforeaccepting further
framesfromnodeA.ItsN(R)information, therefore, hasnotchanged: Bframes1and2
indicate thatnodeBisstillexpecting Nsframe2toarrivenext.NodeAhassentallits
data.Therefore, itcannotpiggyback anacknowledgment ontoanI-frameandsendsanS-frame
instead.TheRRcodeindicates thatAisstillreadytoreceive.Thenumber3intheN(R)field
tellsBthatframes0,1,and2haveallbeenaccepted andthatAisnowexpecting frame
number3.346 CHAPTER 11DATALINKCONTROL
Figure11.30 Exampleofpiggybacking withouterror
NodeA NodeBo
S-frame(RR),anACK3
l'Control F\'r-------., B C.-.------.,a\ORR3Sa
g g
y
Timey
Time
Example 11.11:Piggybacking withError
Figure11.31showsanexchange inwhichaframeislost.NodeBsendsthreedataframes(0,1,
and2),butframe1islost.WhennodeAreceivesframe2,itdiscardsitandsendsaREIframefor
frame1.NotethattheprotocolbeingusedisGo-Back-N withthespecialuseofanREIframeas
aNAKframe.TheNAKframedoestwothingshere:Itconfirms thereceiptofframe°and
declaresthatframe1andanyfollowing framesmustberesent.NodeB,afterreceiving theREI
frame,resendsframes1and2.NodeAacknowledges thereceiptbysendinganRRframe(ACK)
withacknowledgment number3."
3472,"11.7POINT-TO-POINT PROTOCOL
Although HDLCisageneralprotocolthatcanbeusedforbothpoint-to-point andmulti­
pointconfigurations, oneofthemostcommon protocols forpoint-to-point accessisthe
Point-to-Point Protocol (PPP).Today,millionsofInternetuserswhoneedtoconnect
theirhomecomputers totheserverofanInternetserviceproviderusePPP.Themajority
oftheseusershaveatraditional modem;theyareconnected totheInternetthrougha
telephone line,whichprovides theservicesofthephysical layer.ButtocontrolandSECTION 11.7POINT-TO-POINT PROTOCOL 347
Figure11.31 Exampleofpiggybacking witherror
NodeA NodeB
.."
3473,"Lost
Discarded L------<l_-.j
S-frame(REJ1),aNAK
~IcontrOl Fl''----- B C~••l>------'
=IOREJlSg
I-frame(dataframe1)
l'Controlr--......~AI-----1r----.__--(g0 1 0FIResent1------;a
g
Resent 1
1
I
I
'f
TimeS-frame(RR3),anACK
FControl F F1-------1 I B C I~...-----;gtoRR3Sg
'f
Time
managethetransferofdata,thereisaneedforapoint-to-point protocol atthedatalink
layer.PPPisbyfarthemostcommon."
3474,"PPPprovides severalservices:
1.PPPdefinestheformatoftheframetobeexchanged betweendevices."
3475,"2.PPPdefineshowtwodevicescannegotiate theestablishment ofthelinkandthe
exchange ofdata."
3476,3.PPPdefineshownetworklayerdataareencapsulated inthedatalinkframe.
3477,4.PPPdefineshowtwodevicescanauthenticate eachother.
3478,"5.PPPprovides multiplenetworklayerservicessupporting avarietyofnetworklayer
protocols."
3479,6.PPPprovides connections overmultiplelinks.
3480,7.PPPprovidesnetworkaddressconfiguration.
3481,"Thisisparticularly useful whenahome
userneedsatemporary networkaddresstoconnecttotheInternet.348 CHAPTER 11DATALINKCONTROL
Ontheotherhand,tokeepPPPsimple,severalservicesaremissing:
I.PPPdoesnotprovideflowcontrol.Asendercansendseveralframesoneafter
anotherwithnoconcernaboutoverwhelming thereceiver."
3482,"2.PPPhasaverysimplemechanism forerrorcontrol.ACRCfieldisusedtodetect
errors.Iftheframeiscorrupted, itissilentlydiscarded; theupper-layer protocol
needstotakecareoftheproblem."
3483,"Lackoferrorcontrolandsequence numbering
maycauseapackettobereceivedoutoforder."
3484,"3.PPPdoesnotprovideasophisticated addressing mechanism tohandleframesina
multipoint configuration."
3485,"Framing
PPPisabyte-oriented protocol."
3486,"Framing isdoneaccording tothediscussion ofbyte­
orientedprotocols atthebeginning ofthischapter."
3487,"FrameFormat
Figure11.32showstheformatofaPPPframe.Thedescription ofeachfieldfollows:
Figure11.32 PPPframefomwt
1byte1byte 1byte1or2bytesPayload
Variable 2or4bytes1byte
oFlag.APPPframestartsandendswithaI-byteflagwiththebitpattern01111110."
3488,"Although thispatternisthesameasthatusedinHDLC,thereisabigdifference."
3489,PPPisabyte-oriented protocol; HDLCisabit-oriented protocol.
3490,"Theflagistreated
asabyte,aswewillexplainlater."
3491,oAddress.
3492,"Theaddressfieldinthisprotocolisaconstantvalueandsetto11111111
(broadcast address)."
3493,"Duringnegotiation (discussed later),thetwopartiesmayagree
toomitthisbyte."
3494,oControl.
3495,"Thisfieldissettotheconstant value11000000 (imitating unnumbered
framesinHDLC).Aswewilldiscusslater,PPPdoesnotprovideanyflowcontrol."
3496,Errorcontrolisalsolimitedtoerrordetection.
3497,"Thismeansthatthisfieldisnotneeded
atall,andagain,thetwopartiescanagree,duringnegotiation, toomitthisbyte."
3498,oProtocol.
3499,"Theprotocol fielddefineswhatisbeingcarriedinthedatafield:either
userdataorotherinformation."
3500,"Wediscussthisfieldindetailshortly.Thisfieldis
bydefault2byteslong,butthetwopartiescanagreetouseonlyIbyte."
3501,"oPayloadfield.Thisfieldcarrieseithertheuserdataorotherinformation thatwewill
discussshortly.Thedatafieldisasequence ofbyteswiththedefaultofamaximum
of1500bytes;butthiscanbechanged duringnegotiation."
3502,"Thedatafieldisbyte­
stuffediftheflagbytepatternappearsinthisfield.Becausethereisnofielddefining
thesizeofthedatafield,paddingisneededifthesizeislessthanthemaximum
defaultvalueorthemaximum negotiated value."
3503,"oFCS.Theframechecksequence (FCS)issimplya2-byteor4-bytestandardCRe.SECTION 11.7POINT-TO-POINT PROTOCOL 349
ByteStuffing
Thesimilarity betweenPPPandHDLeendsattheframeformat.PPP,aswediscussed
before,isabyte-oriented protocol totallydifferent fromHDLC.Asabyte-oriented
protocol, theflaginPPPisabyteandneedstobeescapedwheneveritappearsinthe
datasectionoftheframe.Theescapebyteis01111101, whichmeansthateverytime
theflaglikepatternappearsinthedata,thisextrabyteisstuffedtotellthereceiverthat
thenextbyteisnotaflag."
3504,PPPisabyte-oriented protocolusingbytestuffingwiththeescapebyte01111101.
3505,"Transition Phases
APPPconnection goesthroughphaseswhichcanbeshowninatransition phase
diagram(seeFigure11.33)."
3506,"Figure11.33 Transition phases
Failed
Carrier
dropped
Tenmnate
DoneCarrier
detected
FailedOptionsagreed
bybothsides
Authenticate
Authentication
successfulIfauthentication
notneeded
Network layer
configurationNetwork
DDead.Inthedeadphasethelinkisnotbeingused.Thereisnoactivecarrier(at
thephysicallayer)andthelineisquiet."
3507,DEstablish.
3508,"Whenoneofthenodesstartsthecommunication, theconnection goesinto
thisphase.Inthisphase,optionsarenegotiated betweenthetwoparties.Ifthenegoti­
ationissuccessful, thesystemgoestotheauthentication phase(ifauthentication is
required) ordirectlytothenetworking phase.Thelinkcontrolprotocolpackets,dis­
cussedshortly,areusedforthispurpose.Severalpacketsmaybeexchanged here."
3509,DAuthenticate.
3510,"Theauthentication phaseisoptional; thetwonodesmay decide,
duringtheestablishment phase,nottoskipthisphase.However, iftheydecideto
proceedwithauthentication, theysendseveralauthentication packets, discussed
later.Iftheresultissuccessful, theconnection goestothenetworking phase;other­
wise,itgoestothetermination phase."
3511,DNetwork.
3512,"Inthenetworkphase,negotiation forthenetworklayerprotocols takes
place.PPPspecifiesthattwonodesestablishanetworklayeragreement beforedataat350CHAPTER 11DATALINKCONTROL
thenetworklayercanbeexchanged."
3513,"ThereasonisthatPPPsupportsmultipleproto­
colsatthenetworklayer.Ifanodeisrunningmultipleprotocols simultaneously atthe
networklayer,thereceiving nodeneedstoknowwhichprotocolwillreceivethedata.oOpen.Intheopenphase,datatransfertakesplace.Whenaconnection reaches
thisphase,theexchange ofdatapacketscanbestarted.Theconnection remainsin
thisphaseuntiloneoftheendpoints wantstoterminate theconnection."
3514,oTerminate.
3515,Inthetermination phasetheconnection isterminated.
3516,"Severalpackets
areexchanged betweenthetwoendsforhousecleaningandclosingthelink."
3517,"Multiplexing
Although PPPisadatalinklayerprotocol, PPPusesanothersetofotherprotocols to
establishthelink,authenticate thepartiesinvolved, andcarrythenetworklayerdata.Three
setsofprotocols aredefinedtomakePPPpowetful: theLinkControlProtocol(LCP),two
Authentication Protocols (APs),andseveralNetwork ControlProtocols (NCPs).Atany
moment, aPPPpacketcancarrydatafromoneoftheseprotocols initsdatafield,asshown
inFigure11.34.Note that thereisoneLCP,twoAPs,andseveralNCPs.Datamayalso
comefromseveraldifferentnetworklayers."
3518,"Figure11.34 Multiplexing inPPP
Network
layer
Datalink
layerDatafromdifferent
networking protocols
NCP
•••
LCP:OxC021
AP:OxC023andOxC223
NCP:Ox8021and."
3519,"Data:Ox0021and.LCP:LinkControlProtocol
AP:Authentication Protocol
NCP:Network ControlProtocol
LinkControlProtocol
TheLinkControlProtocol (LCP)isresponsible forestablishing, maintaining, config­
uring,andterminating links.Italsoprovides negotiation mechanisms tosetoptions
between thetwoendpoints."
3520,"Bothendpoints ofthelinkmustreachanagreement about
theoptionsbeforethelinkcanbeestablished."
3521,SeeFigure11.35.
3522,"AllLCPpacketsarecarriedinthepayloadfieldofthePPPframewiththeprotocol
fieldsettoC021inhexadecimal."
3523,"ThecodefielddefinesthetypeofLCPpacket.Thereare11typesofpacketsas
showninTable11.2.SECTION 11.7POINT-TO-POINT PROTOCOL 351
Figure11.35 LCPpacketencapsulated inaframe
Variable
Infonnation
Payload
(andpadding)
Table11.2LCPpackets
Code PacketType Description
OxOl Coofigure- request Contains thelistofproposed optionsandtheirvalues
Ox02 Configure-ack Acceptsalloptionsproposed
Ox03 Configure-nak Announces thatsomeoptionsareootacceptable
Ox04 Configure-reject Announces thatsomeoptionsarenotrecognized
Ox05 Terminate- request Requesttoshutdowntheline
Ox06 Terminate-ack Accepttheshutdown request
Ox07 Code-reject Announces anunknown code
Ox08 Protocol-reject Announces anunknown protocol
Ox09 Echo-request Atypeofhellomessage tocheckiftheotherendisalive
OxOA Echo-reply Theresponse totheecho-request message
OxOB Discard-request Arequesttodiscardthepacket
Therearethreecategories ofpackets.Thefirstcategory, comprising thefirstfour
packettypes,isusedforlinkconfiguration duringtheestablish phase.Thesecondcate­
gory,comprising packettypes5and6,isusedforlinktennination duringthetermina­
tionphase.Thelastfivepacketsareusedforlinkmonitoring anddebugging."
3524,"TheIDfieldholdsavaluethatmatchesarequestwithareply.Oneendpoint inserts
avalueinthisfield,whichwillbecopiedintothereplypacket.Thelengthfielddefines
thelengthoftheentireLCPpacket.Theinformation fieldcontains information, suchas
options,neededforsomeLCPpackets."
3525,Therearemanyoptionsthatcanbenegotiated between thetwoendpoints.
3526,"Options
areinsertedintheinformation fieldoftheconfiguration packets.Inthiscase,theinfor­
mationfieldisdividedintothreefields:optiontype,optionlength,and option data.We
listsomeofthemostcommon optionsinTable11.3.
Table11.3Common options
Option Default
Maximum receiveunit(payload fieldsize) 1500
Authentication protocol None
Protocol fieldcompression Off
Addressandcontrolfieldcompression Off352CHAPTER 11DATALINKCONTROL
Authentication Protocols
Authentication playsaveryimportant roleinPPPbecausePPPisdesigned foruseover
dial-uplinkswhereverification ofuseridentityisnecessary."
3527,"Authentication meansvali­
datingtheidentityofauserwhoneedstoaccessasetofresources."
3528,"PPPhascreatedtwo
protocols forauthentication: Password Authentication ProtocolandChallenge Handshake
Authentication Protocol."
3529,Notethattheseprotocols areusedduringtheauthentication phase.
3530,"PAPThePassword Authentication Protocol (PAP)isasimpleauthentication pro­
cedurewithatwo-step process:
1.Theuserwhowantstoaccessasystemsendsanauthentication identification
(usuallytheusername)andapassword."
3531,"2.Thesystemchecksthevalidityoftheidentification andpassword andeitheraccepts
ordeniesconnection."
3532,"Figure11.36showsthethreetypesofpackets used byPAPandhowtheyareactually
exchanged."
3533,"WhenaPPPframeiscarrying anyPAPpackets,thevalueoftheprotocol
fieldisOxC023."
3534,"ThethreePAPpacketsareauthenticate-request, authenticate-ack, and
authenticate-nak."
3535,"Thefirstpacketisusedbytheusertosendtheusernameandpass­
word.Thesecondisusedbythesystemtoallowaccess.Thethirdisusedbythesystem
todenyaccess."
3536,"Figure11.36PAPpacketsencapsulated inaPPPframe
System
User
r
Authenticate-request
Authenticate-ack orauthenticate-nak
PAPpackets
Icc__------Flag AddressIControlI~O2316PayloadFeSIFlagI I --(andpadding)
CHAP TheChallenge Handshake Authentication Protocol (CHAP) isathree-way
hand-shaking authentication protocol thatprovides greatersecuritythanPAP.Inthis
method,thepassword iskeptsecret;itisneversentonline.SECTION 11.7POINT-TO-POINT PROTOCOL 353
1.Thesystemsendstheuserachallenge packetcontaining achallenge value,usually
afewbytes."
3537,"2.Theuserappliesapredefined function thattakesthechallenge valueandtheuser's
ownpassword andcreatesaresult.Theusersendstheresultintheresponse packet
tothesystem."
3538,"3.Thesystemdoesthesame.Itappliesthesamefunctiontothepassword oftheuser
(knowntothesystem)andthechallenge valuetocreatearesult.Iftheresultcreatedis
thesameastheresultsentintheresponse packet,accessisgranted;otherwise, itis
denied.CHAPismoresecurethanPAP,especially ifthesystemcontinuously changes
thechallenge value.Eveniftheintruderlearnsthechallenge valueandtheresult,the
password isstillsecret.Figure11.37showsthepacketsandhowtheyareused."
3539,"Figure11.37CHAPpacketsencapsulated inaPPPframe
User
r~
=-
Challenge
Response
SuccessorfailureSystem
~
2 Variable Variable
Address -~J)l{623 s_,
-,:."
3540,":::~~--.:<-....,--Payload
(andpadding)CHAPpackets
FCS Flag
CHAPpacketsareencapsulated inthePPPframewiththeprotocol valueC223in
hexadecimal."
3541,"TherearefourCHAPpackets:challenge, response, success,andfailure."
3542,"Thefirstpacketisusedbythesystemtosendthechallenge value.Thesecondisusedby
theusertoreturntheresultofthecalculation."
3543,"Thethirdisusedbythesystemtoallow
accesstothesystem.Thefourthisusedbythesystemtodenyaccesstothesystem."
3544,"Network ControlProtocols
PPPisamultiple-network layerprotocol."
3545,"Itcancarryanetworklayerdatapacketfrom
protocols definedbytheInternet, OSI,Xerox,DECnet, AppleTalk, Novel,andsoon.354CHAPTER 11DATALINKCONTROL
Todothis,PPPhasdefinedaspecificNetwork ControlProtocol foreachnetworkpro­
tocol.Forexample, IPCP(Internet Protocol ControlProtocol) configures thelinkfor
carrying IPdatapackets.XeroxCPdoesthesamefortheXeroxprotocol datapackets,
andsoon.NotethatnoneoftheNCPpacketscarry network layerdata;theyjust
configure thelinkatthenetworklayerfortheincoming data."
3546,"IPCPOneNCPprotocol istheInternet Protocol Control Protocol (IPCP).This
protocol configures thelinkusedtocarryIPpacketsintheInternet."
3547,"IPCPisespecially
ofinteresttous.TheformatofanIPCPpacketisshowninFigure11.38.Notethatthe
valueoftheprotocolfieldinhexadecimal is8021."
3548,"Figure11.38 fPCPpacketencapsulated inPPPframe
Variable
Payload
(andpadding)FCS Flag
IPCPdefinessevenpackets, distinguished bytheircodevalues,asshownin
Table11.4.
Table11.4CodevalueforIPCPpackets
Code IPCPPacket
OxO! Configure-request
Ox02 Configure-ack
Ox03 Configure- nak
Ox04 Configure-reject
Ox05 Terminate-request
Ox06 Terminate-ack
Ox07 Code-reject
OtherProtocols ThereareotherNCPprotocols forothernetwork layerprotocols."
3549,"TheOSINetwork LayerControlProtocol hasaprotocol fieldvalueof8023;theXerox
NSIDPControlProtocol hasaprotocolfieldvalueof8025;andsoon.Thevalueofthe
codeandtheformatofthepacketsfortheseotherprotocols arethesameasshownin
Table11.4.
Data/rom theNetworkLayer
Afterthenetwork layerconfiguration iscompleted byoneoftheNCPprotocols, the
userscanexchange datapacketsfromthenetworklayer.Hereagain,therearedifferentSECTION 11.7POINT-TO-POINT PROTOCOL 355
protocolfieldsfordifferent networklayers.Forexample, ifPPPiscarrying datafrom
theIPnetworklayer,thefieldvalueis0021(notethatthethreerightmost digitsarethe
sameasforIPCP).IfPPPiscarryingdatafromtheOSInetworklayer,thevalueofthe
protocolfieldis0023,andsoon.Figure11.39showstheframeforIP."
3550,"Figure11.39IPdatagram encapsulated inaPPPframe
Userdata
Payload
(andpadding)FCS Flag
Multilink PPP
PPPwasoriginally designed forasingle-channel point-to-point physicallink.Theavail­
abilityofmultiplechannels inasinglepoint-to-point linkmotivated thedevelopment of
Multilink PPP.Inthiscase,alogicalPPPframeisdividedintoseveralactualPPP
frames.AsegmentofthelogicalframeiscarriedinthepayloadofanactualPPPframe,
asshowninFigure11.40.ToshowthattheactualPPPframeiscarryingafragment ofa
Figure11.40Multilink PPP
Channel 2Channell
PPPLogicalPPP
Or-----
."
3551,"Payload
PPP
Protocol filed:Ox003d
logicalPPPframe,theprotocolfieldissettoOx003d.Thisnewdevelopment addscom­
plexity.Forexample, asequence numberneedstobeaddedtotheactualPPPframeto
showafragment's positioninthelogicalframe."
3552,"Example 11.12
Letusgothroughthephasesfollowed byanetworklayerpacketasitistransmitted througha
PPPconnection."
3553,"Figure11.41showsthesteps.Forsimplicity, weassumeunidirectional move­
mentofdatafromtheusersitetothesystemsite(suchassendingane-mailthroughanISP).356 CHAPTER 11DATALINKCONTROL
Figure11.41Anexample
User[I~System
i
.Configure-request~ Options
.LeI'
Authenticate-ack§ITIr] Name
PAPAuthenticate-request
C023-~ NameO-P-a-ss-w-o-rd-I
PAP
Configure-request· :
gOZL~ Options
IPCp·
Terminate-request
.CQ21:-~ Options
LCP[
y
Timey
TimeSECTION 11.9KEYTERMS 357
Thefirsttwoframesshowlinkestablishment."
3554,"Wehavechosentwooptions(notshowninthe
figure):usingPAPforauthentication andsuppressing theaddresscontrolfields.Frames3and4
areforauthentication."
3555,Frames5and6establish thenetworklayerconnection usingIPCP.
3556,"ThenextseveralframesshowthatsomeIPpacketsareencapsulated inthePPPframe.The
system(receiver) mayhavebeenrunningseveralnetworklayerprotocols, butitknowsthatthe
incoming datamustbedelivered totheIPprotocolbecausetheNCPprotocolusedbeforethedata
transferwasIPCP."
3557,"Afterdatatransfer,theuserthenterminates thedatalinkconnection, whichisacknowledged
bythesystem.OfCOUrsetheuserorthesystemcouldhavechosentoterminate thenetworklayer
IPCPandkeepthedatalinklayerrunningifitwantedtorunanotherNCPprotocol."
3558,"Theexample istrivial,butitpointsoutthesimilarities ofthepacketsinLCP,AP,and
NCP.Italsoshowstheprotocol fieldvaluesandcodenumbers forparticular protocols."
3559,"11.8RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
3560,"Books
Adiscussion ofdatalinkcontrolcanbefoundin[GW04], Chapter3of[Tan03],Chapter7
of[Sta04],Chapter12of[Kes97], andChapter2of[PD03].Moreadvanced materials can
befoundin[KMK04]."
3561,"11.9KEYTERMS
acknowledgment (ACK)
asynchronous balanced mode(ABM)
automatic repeatrequest(ARQ)
bandwidth-delay product
bit-oriented protocol
bitstuffing
bytestuffing
Challenge Handshake Authentication
Protocol (CHAP)
character-oriented protocol
datalinkcontrol
errorcontrol
escapecharacter (ESC)
event
fixed-size framing
flagflowcontrol
framing
Go-Back-N ARQProtocol
High-level DataLinkControl(HDLC)
information frame(I-frame)
InternetProtocol ControlProtocol(IPCP)
LinkControlProtocol (LCP)
negative acknowledgment (NAK)
noiseless channel
noisychannel
normalresponse mode(NRM)
Password Authentication Protocol (PAP)
piggybacking
pipelining
Point-to-Point Protocol (PPP)
primarystation358CHAPTER 11DATALINKCONTROL
receiveslidingwindow
secondary station
Selective RepeatARQ
Protocol
sendslidingwindow
sequence number
Simplest Protocolslidingwindow
Stop-and- WaitARQProtocol
Stop-and- WaitProtocol
supervisory frame(S-frame)
transition phase
unnumbered frame(D-frame)
variable-size framing
11.10SUMMARY
oDatalinkcontroldealswiththedesignandprocedures forcommunication between
twoadjacent nodes:node-to-node communication."
3562,"oFraming inthedatalinklayerseparates amessagefromonesourcetoadestination,
orfromothermessages goingfromothersourcestootherdestinations,
oFramescanbeoffixedorvariablesize.Infixed-size framing, thereisnoneedfor
defining theboundaries offrames;invariable-size framing, weneedadelimiter
(flag)todefinetheboundary oftwoframes."
3563,"oVariable-size framingusestwocategories ofprotocols: byte-oriented (orcharacter­
oriented) andbit-oriented."
3564,"Inabyte-oriented protocol, thedatasectionofaframe
isasequence ofbytes;inabit-oriented protocol, thedatasectionofaframeisa
sequence ofbits."
3565,"oInbyte-oriented (orcharacter-oriented) protocols, weusebytestuffing; aspecial
byteaddedtothedatasectionoftheframewhenthereisacharacter withthesame
patternastheflag."
3566,"oInbit-oriented protocols, weusebitstuffing;anextra0isaddedtothedatasection
oftheframewhenthereisasequence ofbitswiththesamepatternastheflag."
3567,"oFlowcontrolreferstoasetofprocedures usedtorestricttheamountofdatathatthe
sendercansendbeforewaitingforacknowledgment."
3568,"Errorcontrolreferstomethods
oferrordetection andcorrection."
3569,"oForthenoiseless channel, wediscussed twoprotocols: theSimplest Protocol and
theStop-and- WaitProtocol."
3570,"Thefirstprotocol hasneitherflownorerrorcontrol;
thesecondhasnoerrorcontrol.IntheSimplest Protocol, thesendersendsits
framesoneafteranotherwithnoregardstothereceiver."
3571,"IntheStop-and- WaitPro­
tocol,thesendersendsoneframe,stopsuntilitreceives confirmation fromthe
receiver, andthensendsthenextframe."
3572,"DForthenoisychannel, wediscussed threeprotocols: Stop-and-Wait ARQ,00­
Back-N, andSelective RepeatARQ.TheStop-and- WaitARQProtocol, addsa
simpleerrorcontrolmechanism totheStop-and-Wait Protocol."
3573,"IntheOo-Back-N
ARQProtocol, wecansendseveralframesbeforereceiving acknowledgments,
improving theefficiency oftransmission."
3574,"IntheSelective RepeatARQprotocol we
avoidunnecessary transmission bysendingonlyframesthatarecorrupted."
3575,DBothOo-Back-N andSelective-Repeat Protocols useaslidingwindow.
3576,"In00­
Back-NARQ,ifmisthenumberofbitsforthesequence number,thenthesizeofSECTION 11.11PRACTICE SET 359
thesendwindowmustbelessthan2m;thesizeofthereceiverwindowisalways1."
3577,"InSelective RepeatARQ,thesizeofthesenderandreceiverwindowmustbeat
mostone-halfof2m."
3578,"oAtechnique calledpiggybacking isusedtoimprovetheefficiency ofthebidirec­
tionalprotocols."
3579,"WhenaframeiscarryingdatafromAtoB,itcanalsocarrycontrol
information aboutframesfromB;whenaframeiscarryingdatafromBtoA,itcan
alsocarrycontrolinformation aboutframesfromA."
3580,"oHigh-level DataLinkControl(HDLC)isabit-oriented protocolforcommunication
overpoint-to-point andmultipoint links.However, themostcommon protocols for
point-to-point accessisthePoint-to-Point Protocol (PPP),whichisabyte-oriented
protocol."
3581,"11.11PRACTICE SET
ReviewQuestions
1.Brieflydescribetheservicesprovided bythedatalinklayer."
3582,2.Defineframingandthereasonforitsneed.
3583,3.Compare andcontrast byte-oriented andbit-oriented protocols.
3584,"Whichcategory
hasbeenpopularinthepast(explainthereason)?"
3585,"Whichcategory ispopularnow
(explainthereason)?"
3586,4.Compare andcontrastbyte-stuffing andbit-stuffing.
3587,"Whichtechnique isusedin
byte-oriented protocols?"
3588,Whichtechnique isusedinbit-oriented protocols?
3589,5.Compare andcontrastflowcontrolanderrorcontrol.
3590,6.Whatarethetwoprotocols wediscussed fornoiseless channels inthischapter?
3591,7.Whatarethethreeprotocols wediscussed fornoisychannels inthischapter?
3592,"8.ExplainthereasonformovingfromtheStop-and-Wait ARQProtocol tothe00­
Back-NARQProtocol."
3593,9.Compare andcontrasttheGo-Back-N ARQProtocol withSelective-RepeatARQ.
3594,"10.Compare andcontrastHDLCwithPPP.Whichoneisbyte-oriented; whichoneis
bit-oriented?"
3595,11.Definepiggybacking anditsusefulness.
3596,12.Whichoftheprotocols described inthischapterutilizepipelining?
3597,"Exercises
13.Byte-stuff thedatainFigure11.42."
3598,"Figure11.42Exercise 13360 CHAPTER 11DATALINKCONTROL
14.Bit-stuff thedatainFigure11.43."
3599,"Figure11.43Exercise 14
1000111111100111110100011111111111000011111 I
15.Designtwosimplealgorithms forbyte-stuffing."
3600,"Thefirstaddsbytesatthesender;
thesecondremoves bytesatthereceiver."
3601,16.Designtwosimplealgorithms forbit-stuffing.
3602,"Thefirstaddsbitsatthesender;the
secondremoves bitsatthereceiver."
3603,"17.Asendersendsaseriesofpacketstothesamedestination using5-bitsequence
numbers."
3604,"Ifthesequence numberstartswith0,whatisthesequence numberafter
sending100packets?"
3605,"18.Using5-bitsequence numbers, whatisthemaximum sizeofthesendandreceive
windows foreachofthefollowing protocols?"
3606,"a.Stop-and- WaitARQ
b.Go-Back-N ARQ
c.Selective-Repeat ARQ
19.Designabidirectional algorithm fortheSimplest Protocol usingpiggybacking."
3607,Notethatthebothpartiesneedtousethesamealgorithm.
3608,20.Designabidirectional algOIithm fortheStop-and- WaitProtocolusingpiggybacking.
3609,Notethatbothpartiesneedtousethesamealgorithm.
3610,"21.Designabidirectional algorithm fortheStop-and- WaitARQProtocol usingpiggy­
backing."
3611,Notethat bothpartiesneedtousethesamealgorithm.
3612,"22.Designabidirectional algorithm fortheGo-Back-N ARQProtocol usingpiggy­
backing."
3613,Notethatbothpartiesneedtousethesamealgorithm.
3614,"23.Designabidirectional algorithm fortheSelective-Repeat ARQProtocolusingpiggy­
backing.Notethatbothpartiesneedtousethesamealgorithm."
3615,"24.Figure11.44showsastatediagramtosimulatethebehavior ofStop-and-Wait ARQ
atthesendersite."
3616,"Figure11.44Exercise 24
A
ThestateshaveavalueofSn(0or1).Thearrowsshowsthetransitions."
3617,"Explainthe
eventsthatcausethetwotransitions labeledAandB.SECTION 11.11PRACTICE SET361
25.Figure11.45showsastatediagram tosimulate thebehavior ofStop-and-Wait
ARQatthereceiversite."
3618,"Figure11.45Exercise 25
A
ThestateshaveavalueofRn(0or1).Thearrowsshowsthetransitions."
3619,"Explain
theeventsthatcausethetwotransitions labeledAandB."
3620,"26.InStop-and- WaitARQ,wecancombine thestatediagrams ofthesenderand
receiverinExercises 24and25.Onestatedefinesthecombined valuesofRnandSn­
Thismeansthatwecanhavefourstates,eachdefinedby(x,y),wherexdefinesthe
valueofSnandydefinesthevalueofRwInotherwords,wecanhavethefour
statesshowninFigure11.46.Explaintheeventsthatcausethefourtransitions
labeledA,B, C,andD."
3621,"Figure11.46Exercise 26
27.ThetimerofasystemusingtheStop-and- WaitARQProtocolhasatime-outof6ms."
3622,"DrawtheflowdiagramsimilartoFigure11.11forfourframesiftheroundtripdelay
is4ms.Assumenodataframeorcontrolframeislostordamaged."
3623,28.RepeatExercise 27ifthetime-out is4msandtheroundtripdelayis6.
3624,29.RepeatExercise 27ifthefirstframe (frame 0)islost.
3625,30.AsystemusestheStop-and- WaitARQProtocol.
3626,"Ifeachpacketcarries1000bitsof
data,howlongdoesittaketosend1millionbitsofdataifthedistancebetweenthe
senderandreceiveris5000KInandthepropagation speedis2x108m?Ignoretrans­
mission,waiting,andprocessing delays.Weassumenodataorcontrolframeislost
ordamaged."
3627,31.RepeatExercise 30usingtheGo-back-N ARQProtocol withawindowsizeof7.
3628,Ignoretheoverhead duetotheheaderandtrailer.
3629,"32.RepeatExercise 30usingtheSelective-Repeat ARQProtocol withawindow
sizeof4.Ignoretheoverhead duetotheheaderandthetrailer.CHAPTER 12
Multiple Access
InChapter 11wediscussed datalinkcontrol,amechanism whichprovides alinkwith
reliablecommunication."
3630,"Intheprotocols wedescribed, weassumed thatthereisan
available dedicated link(orchannel) betweenthesenderandthereceiver.Thisassump­
tionmayormaynotbetrue.If,indeed,wehaveadedicated link,aswhenweconnect
totheInternetusingPPPasthedatalinkcontrolprotocol, thentheassumption istrue
andwedonotneedanything else."
3631,"Ontheotherhand,ifweuseourcellularphonetoconnecttoanothercellularphone,
thechannel(thebandallocated tothevendorcompany) isnotdedicated."
3632,"Apersonafew
feetawayfromusmaybeusingthesamechanneltotalktoherfriend."
3633,Wecanconsiderthedatalinklayerastwosublayers.
3634,"Theuppersublayerisresponsi­
blefordatalinkcontrol,andthelowersublayerisresponsible forresolving accesstothe
sharedmedia.Ifthechannelisdedicated, wedonotneedthelowersublayer."
3635,"Figure12.1
showsthesetwosublayers inthedatalinklayer."
3636,"Figure12.1Datalinklayerdividedintotwofunctionality-oriented sublayers
Datalinklayer
Datalinkcontrol
Multiple-access resolution
WewillseeinChapter 13thattheIEEEhasactuallymadethisdivisionforLANs.
Theuppersublayer thatisresponsible forflowanderrorcontroliscalledthelogical
linkcontrol(LLC)layer;thelowersublayer thatismostlyresponsible formultiple­
accessresolution iscalledthemediaaccesscontrol(MAC)layer."
3637,"Whennodesorstationsareconnected anduseacommon link,calledamultipoint
orbroadcast link,weneedamultiple-access protocoltocoordinate accesstothelink."
3638,"Theproblemofcontrolling theaccesstothemediumissimilartotherulesofspeaking
363364CHAPTER 12MULTIPLE ACCESS
inanassembly."
3639,"Theprocedures guarantee thattherighttospeakisupheldandensure
thattwopeopledonotspeakatthesametime,donotinterrupt eachother,donot
monopolize thediscussion, andsoon."
3640,Thesituation issimilarformultipoint networks.
3641,"Manyformalprotocols havebeen
devisedtohandleaccesstoasharedlillieWecategorize themintothreegroups.Protocols
belonging toeachgroupareshowninFigure12.2.
Figure12.2Taxonomy ofmultiple-access protocols discussed inthischapter
12.1ALOHA
CSMA
CSMA/CD
CSMA/CA
RANDOM ACCESSReservation
Polling
TokenpassingFDMA
TDMA
CDMA
Inrandom accessorcontention methods, nostationissuperiortoanotherstationand
noneisassigned thecontroloveranother."
3642,"Nostationpermits, ordoesnotpermit,
anotherstationtosend.Ateachinstance, astationthathasdatatosendusesaprocedure
definedbytheprotocol tomakeadecision onwhetherornottosend.Thisdecision
dependsonthestateofthemedium (idleorbusy).Inotherwords,eachstationcan
transmit whenitdesiresonthecondition thatitfollowsthepredefined procedure,
including thetestingofthestateofthemedium."
3643,"Twofeaturesgivethismethoditsname.First,thereisnoscheduled timeforastation
totransmit."
3644,"Transmission israndomamongthestations.Thatiswhythesemethodsare
calledrandomaccess.Second,norulesspecifywhichstationshouldsendnext.Stations
compete withoneanothertoaccessthemedium."
3645,"Thatiswhythesemethods arealso
calledcontention methods."
3646,"Inarandomaccessmethod,eachstationhastherighttothemediumwithoutbeing
controlled byanyotherstation.However, ifmorethanonestationtriestosend,thereis
anaccessconflict-collision-and theframeswillbeeitherdestroyed ormodified."
3647,"To
avoidaccessconflictortoresolveitwhenithappens, eachstationfollowsaprocedure
thatanswersthefollowing questions:
oWhencanthestationaccessthemedium?"
3648,oWhatcanthestationdoifthemediumisbusy?
3649,oHowcanthestationdetermine thesuccessorfailureofthetransmission?
3650,"oWhatcanthestationdoifthereisanaccessconflict?SECTION 12.1RANDOM ACCESS 365
Therandomaccessmethods westudyinthischapterhaveevolvedfromavery
interesting protocol knownasALOHA, whichusedaverysimpleprocedure called
multiple access(MA).Themethodwasimproved withtheadditionofaprocedure that
forcesthestationtosensethemediumbeforetransmitting."
3651,"Thiswascalledcarriersense
multiple access.Thismethodlaterevolvedintotwoparallelmethods: carriersense
multiple accesswithcollisiondetection (CSMAlCD) andcarriersensemultiple access
withcollision avoidance (CSMA/CA)."
3652,"CSMA/CD tellsthestationwhattodowhena
collision isdetected."
3653,CSMA/CA triestoavoidthecollision.
3654,"ALOHA
ALOHA, theearliestrandomaccessmethod,wasdeveloped attheUniversity ofHawaii
inearly1970.Itwasdesigned foraradio(wireless) LAN,butitcanbeusedonany
sharedmedium."
3655,Itisobviousthattherearepotential collisions inthisarrangement.
3656,"Themediumis
sharedbetweenthestations.Whenastationsendsdata,anotherstationmayattemptto
dosoatthesametime.Thedatafromthetwostationscollideandbecomegarbled."
3657,"PureALOHA
TheoriginalALOHA protocol iscalledpureALOHA."
3658,"Thisisasimple,butelegant
protocol."
3659,Theideaisthateachstationsendsaframewhenever ithasaframetosend.
3660,"However, sincethereisonlyonechanneltoshare,thereisthepossibility ofcollision
betweenframesfromdifferentstations.Figure12.3showsanexampleofframecollisions
inpureALOHA."
3661,"Figure12.3FramesinapureALOHAnetwork
[JStation1~I Frame1.11JFrame1.21 ~
Time
[JStation2~ JFrame2.1L -'Frame2.2L ~
Time
[]Station3~ -1Frame3.1 1 JFrame3.2I__~
Time
[]Station4~ JFrame4.1L JFrame4.21 ~
Time
Collision
durationCollision
duration
Therearefourstations(unrealistic assumption) thatcontendwithoneanotherfor
accesstothesharedchannel.Thefigureshowsthateachstationsendstwoframes;there
areatotalofeightframesonthesharedmedium."
3662,"Someoftheseframescollidebecause
multiple framesareincontention forthesharedchannel."
3663,"Figure12.3showsthatonly366CHAPTER 12MULTIPLE ACCESS
twoframessurvive:frame1.1fromstation1 andframe3.2fromstation3.Weneedto
mention thatevenifonebitofaframecoexists onthechannelwithonebitfrom
anotherframe,thereisacollision andbothwillbedestroyed."
3664,"Itisobviousthatweneedtoresendtheframesthathavebeendestroyed during
transmission."
3665,ThepureALOHA protocolreliesonacknowledgments fromthereceiver.
3666,"Whenastationsendsaframe,itexpectsthereceivertosendanacknowledgment."
3667,"Ifthe
acknowledgment doesnotarriveafteratime-out period,thestationassumes thatthe
frame(ortheacknowledgment) hasbeendestroyed andresendstheframe."
3668,"Acollision involves twoormorestations.Ifallthesestationstrytoresendtheir
framesafterthetime-out, theframeswillcollideagain.PureALOHA dictatesthat
whenthetime-out periodpasses,eachstationwaitsarandomamountoftimebefore
resendingitsframe.Therandomness willhelpavoidmorecollisions."
3669,"Wecallthistime
theback-offtimeTB."
3670,"PureALOHA hasasecondmethodtopreventcongesting thechannelwithretrans­
mittedframes.Afteramaximum numberofretransmission attemptsKmax'astation
mustgiveupandtrylater.Figure12.4showstheprocedure forpureALOHA basedon
theabovestrategy."
3671,"Figure12.4Procedure forpureALOHAprotocol
K:Numberofattempts
Tp:Maximum propagation time
Tfr:Averagetransmission timeforaframe
TB:Back-off time
WaitTBtime
(Ta=RxTporRxTfr)
Choosearandom
numberRbetweenoand2K-1Stationhas
___-- aframetosend
Sendtheil:ame
Waittime-Qut time
(2XTp)
Kma,is
normally 15K=K+ 1
Thetime-outperiodisequaltothemaximum possibleround-trip propagation delay,
whichistwicetheamountoftimerequiredtosendaframebetweenthetwomostwidely
separated stations(2xTp)'Theback-offtimeTBisarandomvaluethatnormally depends
onK(thenumberofattempted unsuccessful transmissions)."
3672,"TheformulaforTBdependson
theimplementation."
3673,Onecommon formulaisthebinaryexponential back-off.
3674,"InthisSECTION 12.1RANDOM ACCESS 367
method,foreachretransmission, amultiplier intherange0to2K-1israndomly chosen
andmultiplied byTp(maximum propagation time)orTrr(theaveragetimerequired to
sendoutaframe)tofindTB'Notethatinthisprocedure, therangeoftherandomnumbers
increases aftereachcollision."
3675,ThevalueofKmaxisusuallychosenas 15.
3676,"Example 12.1
ThestationsonawirelessALOHAnetworkareamaximum of600kmapart.Ifweassumethat
signalspropagate at3x108mis,wefindTp=(600x105) /(3x108)=2ms.Nowwecanfindthe
valueofTBfordifferentvaluesofK."
3677,"a.ForK=1,therangeis{O,I}.Thestationneedstogeneratearandomnumberwitha
valueof0or1.ThismeansthatTBiseither°ms(0x2)or2ms(lx2),basedonthe
outcomeoftherandomvariable."
3678,"b.ForK=2,therangeis{O,1,2,3}.ThismeansthatTBcanbe0,2,4,or6ms,basedon
theoutcomeoftherandomvariable."
3679,"c.ForK=3,therangeisto,1,2,3,4,5,6, 7}.ThismeansthatTBcanbe0,2,4,...,14ms,
basedontheoutcomeoftherandomvariable."
3680,"d.WeneedtomentionthatifK>10,itisnormally setto10."
3681,"Vulnerable timeLetusfindthelengthoftime,thevulnerable time,inwhichthere
isapossibility ofcollision."
3682,"Weassumethatthestationssendfixed-length frameswith
eachframetakingTfrStosend.Figure12.5showsthevulnerable timeforstationA."
3683,"Figure12.5Vulnerable timeforpureALOHAprotocol
B'send
collideswith
A'sbeginning
tA'send
collideswith
C'sbeginning
t,,,
IE B ~I j.:...:..-------.,--1 - ,
Ic!~
~c;~c:s~~~J~~~~,~::~~c~cJl
::1
 --:::-~--':------I!.C&1
I·Vulnerable time=2XTfrTime
StationAsendsaframeattimet.Nowimagine stationBhasalreadysentaframe
between t-Tfrandt.Thisleadstoacollision between theframesfromstationAand
stationB.TheendofB'sframecollideswiththebeginning ofA'sframe.Ontheother
hand,suppose thatstationCsendsaframebetween tandt+Tfr.Here,thereisacolli­
sionbetween framesfromstationAandstationC.Thebeginning ofC'sframecollides
withtheendofA'sframe.368CHAPTER 12MULTIPLE ACCESS
Looking atFigure12.5,weseethatthevulnerable time,duringwhichacollision
mayoccurinpureALOHA, is2timestheframetransmission time."
3684,"PureALOHA vulnerable time=2xTfr
Example 12.2
ApureALOHA networktransmits 200-bitframesonasharedchannelof200kbps.Whatisthe
requirement tomakethisframecollision-free?"
3685,"Solution
Average frametransmission timeTfris200bits/200 kbpsor1ms.Thevulnerable timeis2x
1ms=2ms.Thismeansnostationshouldsendlaterthan1msbeforethisstationstartstransmis­
sionandnostationshouldstartsendingduringtheoneI-msperiodthatthisstationissending."
3686,"Throughput LetuscallGtheaveragenumberofframesgenerated bythesystem
duringoneframetransmission time.Thenitcanbeprovedthattheaveragenumberof
successful transmissions forpureALOHA isS=Gxe-2G.Themaximum throughput
Smaxis0.184,forG=1.Inotherwords,ifone-half aframeisgenerated duringone
2frametransmission time(inotherwords,oneframeduringtwoframetransmission
times),then18.4percentoftheseframesreachtheirdestination successfully."
3687,"Thisisan
expected resultbecausethevulnerable timeis2timestheframetransmission time."
3688,"Therefore, ifastationgenerates onlyoneframeinthisvulnerable time(andnoothersta­
tionsgenerateaframeduringthis time), theframewillreachitsdestination successfully."
3689,Thethroughput forpureALOHA isS=Gxe-2G.
3690,Themaximum throughput Smax=0.184whenG=(1/2).
3691,"Example 12.3
ApureALOHA networktransmits 200-bitframesonasharedchannelof200kbps.Whatisthe
throughput ifthesystem(allstationstogether) produces
a.1000framespersecond
b.500framespersecond
c.250framespersecond
Solution
Theframetransmission timeis2001200kbpsor1ms."
3692,"a.Ifthesystemcreates1000framespersecond,thisis1framepermillisecond."
3693,"Theloadis
1.InthiscaseS=Gxe-2GorS=0.135(13.5percent)."
3694,"Thismeansthatthethroughput is
1000X0.135=135frames.Only135framesoutof1000willprobably survive."
3695,"b.Ifthesystemcreates500framespersecond,thisis(1/2)framepermillisecond."
3696,"The load
is(112).InthiscaseS=G xe-2GorS=0.184(18.4percent)."
3697,"Thismeansthatthe
throughput is500x0.184=92andthatonly92framesoutof500willprobably survive."
3698,"Notethatthisisthemaximum throughput case,percentagewise."
3699,"c.Ifthesystemcreates250framespersecond,thisis(1/4)framepermillisecond."
3700,"Theload
is(1/4).InthiscaseS=G xe-2GorS=0.152(15.2percent)."
3701,"Thismeansthatthe
throughput is250x0.152=38.Only38framesoutof250willprobably survive.SECTION /2.1RANDOM ACCESS 369
SlottedALOHA
PureALOHA hasavulnerable timeof2 xTfr.Thisissobecausethereisnorulethat
defineswhenthestationcansend.Astationmaysendsoonafteranotherstationhas
startedorsoonbeforeanotherstationhasfinished."
3702,"SlottedALOHA wasinvented to
improve theefficiency ofpureALOHA."
3703,"InslottedALOHA wedividethetimeintoslotsofTfrsandforcethestationto
sendonlyatthebeginning ofthetimeslot.Figure12.6showsanexample offrame
collisions inslottedALOHA."
3704,"Figure12.6FramesinaslottedALOHA network
Collision Collision
duration duration
[JStation]~_ Frame1.] Frame1.2-------------- ------ ---~
Time
Station2-Frame2.1 Frame2.2-:------ --,....--- ------ ---------+
Timea--Station3 Frame3.1 Frame3.2------...,,_....._---------------- ---~
Time
&--Station4 Frame4.1 Frame4.2------ .....,_......_--- ------ ------ ---~
Time
Slot1510t2 Slot3510t4 Slot5Slot6
Because astationisallowedtosendonlyatthebeginning ofthesynchronized time
slot,ifastationmissesthismoment, itmustwaituntilthebeginning ofthenexttime
slot.Thismeansthatthestationwhichstartedatthebeginning ofthisslothasalready
finishedsendingitsframe.Ofcourse,thereisstillthepossibility ofcollision iftwosta­
tionstrytosendatthebeginning ofthesametimeslot.However, thevulnerable timeis
nowreducedtoone-half, equaltoTfrFigure12.7showsthesituation."
3705,"Figure12.7showsthatthevulnerable timeforslottedALOHA isone-half thatof
pureALOHA."
3706,"SlottedALOHA vulnerable time=Tfr
Throughput Itcanbeprovedthattheaveragenumberofsuccessful transmissions for
slottedALOHA isS=G xe-G.Themaximum throughput Smaxis0.368,whenG=1."
3707,"Inotherwords,ifaframeisgenerated duringoneframetransmission time,then36.8
percentoftheseframesreachtheirdestination successfully."
3708,"Thisresultcanbeexpected
becausethevulnerable timeisequaltotheframetransmission time.Therefore, ifasta­
tiongenerates onlyoneframeinthisvulnerable time(andnootherstationgenerates a
frameduringthistime),theframewillreachitsdestination successfully."
3709,Thethroughput forslottedALOHA isS=:G xe-G.
3710,"Themaximum throughput Smax==0.368whenG=1.370CHAPTER 12MULTIPLE ACCESS
Figure12.7Vulnerable timeforslottedALOHAprotocol
AcollideswithC
tr
I
f
I-..,E.,..-----B----~~l
If...."
3711,"c~I
I,Vulnerable time=TfrTime
Example 12.4
AslottedALOHA network transmits 200-bitframesusingasharedchannelwitha200-kbps
bandwidth."
3712,"Findthethroughput ifthesystem(allstationstogether) produces
a.1000framespersecond
b.500framespersecond
c.250framespersecond
Solution
Thissituation issimilartotheprevious exerciseexceptthatthenetworkisusingslottedALOHA
insteadofpureALOHA."
3713,Theframetransmission timeis200/200kbpsor1ms.
3714,a.InthiscaseGis1.SoS=G xe-GorS=0.368(36.8percent).
3715,"Thismeansthatthe
throughput is1000x0.0368=368frames.Only368outof1000frameswillprobably
survive.Notethatthisisthemaximum throughput case,percentagewise."
3716,b.HereGis~.InthiscaseS=G xe-GorS=0.303(30.3percent).
3717,"Thismeansthatthe
throughput is500x0.0303=151.Only151framesoutof500willprobably survive."
3718,c.NowGis1.InthiscaseS=G xe-GorS=0.195(19.5percent).
3719,"Thismeansthatthe
throughput4is250x0.195=49.Only49framesoutof250willprobably survive."
3720,"CarrierSenseMultiple Access(CSMA)
Tominimize thechanceofcollision and,therefore, increase theperformance, theCSMA
methodwasdeveloped."
3721,"Thechanceofcollision canbereducedifastationsensesthe
medium beforetryingtouseit.Carriersensemultiple access(CSMA) requiresthateach
stationfirstlistentothemedium(orcheckthestateofthemedium) beforesending."
3722,"Inother
words,CSMAisbasedontheprinciple ""sensebeforetransmit"" or""listenbefore talk.""
CSMAcanreducethepossibility ofcollision, butitcannoteliminate it.Thereason
forthisisshowninFigure12.8,aspaceandtimemodelofaCSMAnetwork."
3723,"Stations
areconnected toasharedchannel(usually adedicated medium)."
3724,"Thepossibility ofcollision stillexistsbecauseofpropagation delay;whenastation
sendsaframe,itstilltakestime(although veryshort)forthefirstbittoreacheverystationSECTION 12.1RANDOM ACCESS 371
Figure12.8Space/time modelofthecollision inCSMA
Bstarts
attime11Cstarts
attime12
Areawhere
A'ssignalexists
Areawhere
bothsignalsexist
Time Time
andforeverystationtosenseit.Inotherwords,astationmaysensethemediumandfind
itidle,onlybecausethefirstbitsentbyanotherstationhasnotyetbeenreceived."
3725,"AttimetI'stationBsensesthemediumandfindsitidle,soitsendsaframe.Attime
t2(t2>tI)'stationCsensesthemediumandfindsitidlebecause, atthistime,thefirst
bitsfromstationBhavenotreachedstationC.StationCalsosendsaframe.Thetwo
signalscollideandbothframesaredestroyed."
3726,"Vulnerable Time
Thevulnerable timeforCSMAisthepropagation timeTp.Thisisthetimeneededfor
asignaltopropagate fromoneendofthemediumtotheother.Whenastationsendsa
frame,andanyotherstationtriestosendaframeduringthistime,acollision will
result.Butifthefirstbitoftheframereachestheendofthemedium, everystationwill
alreadyhaveheardthebitandwillrefrainfromsending."
3727,"Figure12.9showstheworst
Figure12.9Vulnerable timeinCSMA
Bsenses
here
Ill~~~~~~~
Framepropagation
Time]Vulnerable time
propagation time
Time372CHAPTER 12MULTIPLE ACCESS
case.The leftmost stationAsendsaframeattimetl'whichreachestherightmost sta­
tionDattimetl+Tp.Thegrayareashowsthevulnerable areaintimeandspace."
3728,"Persistence Methods
Whatshouldastationdoifthechannelisbusy?Whatshouldastationdoifthechannel
isidle?Threemethods havebeendevisedtoanswerthesequestions: theI-persistent
method,thenonpersistent method,andthep-persistent method.Figure12.10showsthe
behavior ofthreepersistence methodswhenastationfindsachannelbusy."
3729,"Figure12.10Behavior ofthreepersistence methods
Sense
andtransmit
~I ------~
 ~ :-Time
Busy
3.I-persistent
SenseSense
andtransmit
Sense I
~:.::::::::w;::::a::::it :::::,~------,w..:..::a::..:.it 't
~C_===
.===!:=J=::J.r------------~ ..Time
Busy
b.Nonpersistent
Transmit
I I I
l l---------------) ..~TimeProbability outcome
doesnotallowtransmission."
3730,"I I I
Continuously sense I I I
~ITimeslotITimeslotITimeslot
I-I .1III .1."
3731,"Busy
c.p-persistent
Figure12.11showstheflowdiagrams forthesemethods."
3732,I-Persistent TheI-persistent methodissimpleandstraightforward.
3733,"Inthismethod,
afterthestationfindsthelineidle,itsendsitsframeimmediately (withprobability I)."
3734,"Thismethodhasthehighestchanceofcollision becausetwoormorestationsmayfind
thelineidleandsendtheirframesimmediately."
3735,"WewillseeinChapter13thatEthernet
usesthismethod."
3736,"Nonpersistent Inthenonpersistent method, astationthathasaframetosend
sensestheline.Ifthelineisidle,itsendsimmediately."
3737,"Ifthelineisnotidle,itwaitsaSECTION 12.1RANDOM ACCESS 373
Figure12.11Flowdiagramforthreepersistence methods
Stationcantransmit."
3738,"a.1-persistent
Useback-off process
asthoughcollision occurred."
3739,c.p-persistentStationcantransmit.
3740,"b.Nonpersistent
Idle
Stationcantransmit."
3741,"randomamountoftime and thensensesthelineagain.Thenonpersistent approach
reducesthechanceofcollision becauseitisunlikelythattwoormorestationswillwait
thesameamountoftimeandretrytosendsimultaneously."
3742,"However, thismethod
reducestheefficiency ofthenetworkbecausethemediumremainsidlewhentheremay
bestationswithframestosend."
3743,"p-Persistent Thep-persistent methodisusedifthechannelhastimeslotswithaslot
durationequaltoorgreaterthanthemaximum propagation time.Thep-persistent approach
combines theadvantages oftheothertwostrategies."
3744,"Itreducesthechanceofcollisionand
improves efficiency."
3745,"Inthismethod,afterthestationfindsthelineidleitfollowsthesesteps:
1.Withprobability p,thestationsendsitsframe."
3746,"2.Withprobability q=1-p,thestationwaitsforthebeginning ofthenexttimeslot
andchecksthelineagain."
3747,"a.Ifthelineisidle,itgoestostep1."
3748,"b.Ifthelineisbusy,itactsasthoughacollision hasoccurred andusestheback­
offprocedure."
3749,"CarrierSenseMultiple AccesswithCollision Detection (CSMA/CD)
TheCSMAmethoddoesnotspecifytheprocedure following acollision."
3750,"Carriersense
multiple accesswithcollision detection (CSMA/CD) augments thealgorithm tohandle
thecollision.374CHAPTER 12MULTIPLEACCESS
Inthismethod,astationmonitors themedium afteritsendsaframetoseeifthe
transmission wassuccessful."
3751,"Ifso,thestationisfinished.If,however, thereisacolli­
sion,theframeissentagain."
3752,"Tobetterunderstand CSMA/CD, letuslookatthefirstbitstransmitted bythetwo
stationsinvolved inthecollision."
3753,"Although eachstationcontinues tosendbitsinthe
frameuntilitdetectsthecollision, weshowwhathappens asthefirstbitscollide.In
Figure12.12,stationsAandCareinvolved inthecollision."
3754,"Figure12.12Collision ofthefirstbitinCSMAlCD
FirstbitofA
~_----FFii;'rs;;t b;it~(JfC C'scollris-io--n;;"";;';;""':""':"":~l
detection and
Collision abortion
occursA'scollision
detection
andabortion[tl
Transmission
time
14
Time Time
Attimet1,stationAhasexecuted itspersistence procedure andstartssendingthe
bitsofitsframe.Attimet2,stationChasnotyetsensedthefirstbitsentbyA.StationC
executes itspersistence procedure andstartssendingthebitsinitsframe,whichpropa­
gatebothtotheleftandtotheright.Thecollisionoccurssometime aftertimet2'StationC
detectsacollision attimet3whenitreceivesthefirstbitofA'sframe.StationCimmedi­
ately(orafterashorttime,butweassumeimmediately) abortstransmission."
3755,"StationA
detectscollision attimet4whenitreceivesthefirstbitofC'sframe;italsoimmediately
abortstransmission."
3756,"Lookingatthefigure,weseethatAtransmits fortheduration t4-tl;
Ctransmits fortheduration t3-t2'Laterweshowthat,fortheprotocol towork,the
lengthofanyframedividedbythebitrateinthisprotocolmustbemorethaneitherof
thesedurations."
3757,"Attimet4,thetransmission ofA:sframe,thoughincomplete, isaborted;
attimet3,thetransmission ofB'sframe,thoughincomplete, isaborted."
3758,"Nowthatweknowthetimedurations forthetwotransmissions, wecanshowa
morecomplete graphinFigure12.13."
3759,"Minimum FrameSize
ForCSMAlCD towork,weneedarestriction ontheframesize.Beforesendingthelast
bitoftheframe,thesendingstationmustdetectacollision, ifany,andabortthetransmis­
sion.Thisissobecausethestation,oncetheentireframeissent,doesnotkeepacopyof
theframeanddoesnotmonitorthelineforcollision detection."
3760,"Therefore, theframetrans­
missiontimeTfrmust beatleasttwotimesthemaximum propagation timeTp.Tounder­
standthereason,letusthinkabouttheworst-case scenario.Ifthetwostationsinvolved in
acollision arethemaximum distanceapart,thesignalfromthefirsttakestimeTptoreach
thesecond,andtheeffectofthecollision takesanothertimeTptoreachthefirst.Sothe
requirement isthatthefirststationmuststillbetransmitting after 2Tp.SECTION 12.1RANDOM ACCESS 375
Figure12.13Collision andabortion inCSMAlCD
Collision
Transmission[1[
~~;!~~i~~i~~~~I~~~~112 ]~ransmissiontIme 13tIme
t4*~~
Adetects
collision and
aborts
TimeCdetects
collision
andaborts Time
Example 12.5
Anetwork usingCSMA/CD hasabandwidth of10Mbps.Ifthemaximum propagation time
(including thedelaysinthedevicesandignoringthetimeneededtosendajamming signal,aswe
seelater)is25.611S,whatistheminimum sizeoftheframe?"
3761,"Solution
Theframetransmission timeisTfr=2 xTp=51.2 ~s.Thismeans,intheworstcase,astation
needstotransmitforaperiodof51.2~stodetectthecollision."
3762,"Theminimum sizeoftheframe
is10Mbpsx51.2!-ls=512bitsor64bytes.Thisisactuallytheminimum sizeoftheframefor
Standard Ethernet, aswewillseeinChapter13."
3763,"Procedure
NowletuslookattheflowdiagramforCSMAlCD inFigure12.14.Itissimilartothe
onefortheALOHA protocol, buttherearedifferences."
3764,"Thefirstdifference istheadditionofthepersistence process.Weneedtosensethe
channelbeforewestartsendingtheframebyusingoneofthepersistence processes we
discussed previously (nonpersistent, I-persistent, orp-persistent)."
3765,"Thecorresponding
boxcanbereplaced byoneofthepersistence processes showninFigure12.11."
3766,Theseconddifference istheframetransmission.
3767,"InALOHA, wefirsttransmitthe
entireframeandthenwaitforanacknowledgment."
3768,"InCSMA/CD, transmission and
collision detection isacontinuous process.Wedonotsendtheentireframeandthen
lookforacollision."
3769,"Thestationtransmits andreceivescontinuously andsimultaneously
(usingtwodifferent ports).Weusealooptoshowthattransmission isacontinuous
process.Weconstantly monitorinordertodetectoneoftwoconditions: eithertrans­
missionisfinishedoracollision isdetected."
3770,Eithereventstopstransmission.
3771,"Whenwe
comeoutoftheloop,ifacollision hasnotbeendetected, itmeansthattransmission is
complete; theentireframeistransmitted."
3772,"Otherwise, acollision hasoccurred."
3773,"Thethirddifference isthe sending ofashortjamming signalthatenforcesthecolli­
sionincaseotherstationshavenotyetsensedthecollision."
3774,"EnergyLevel
Wecansaythatthelevelofenergyinachannelcanhavethreevalues:zero,normal,
andabnormal."
3775,"Atthezerolevel,thechannelisidle.Atthenormallevel,astationhas376CHAPTER 12MULTIPLE ACCESS
Figure12.14Flowdiagramfor theCSMAlCD
K:Numberofattempts
Tp:Maximum propagation time
Tfr:Averagetransmission timeforaframe
Tn:Back-off timeStationhas
aframetosend
Applyoneofthe
persistence methods
(I-persistent, nonpersistent,
orp-persistent)
WaitTBtime
(TB=Rxr""orRXTfr)
Choosearandom
numberRbetweenoand2K-l
Kma\is
normally 15K=K+IEligihlcfurtransmission
Senda
jamming signal
successfully captured thechannelandissendingitsframe.Attheabnormal level,there
isacollision andtheleveloftheenergyistwicethenormallevel.Astationthathasa
frametosendorissendingaframeneedstomonitortheenergyleveltodetermine if
thechannelisidle,busy,orincollision mode.Figure12.15showsthesituation."
3776,"Figure12.15Energylevelduringtransmission, idleness, orcollision
Energy
Collision
Frametransmission
IdleFrametransmission Time
Throughput
Thethroughput ofCSMAlCD isgreaterthanthatofpureorslottedALOHA."
3777,"Themaxi­
mumthroughput occursatadifferentvalueofGandisbasedonthepersistence methodSECTION 12.1RANDOM ACCESS 377
andthevalueofpinthep-persistent approach."
3778,"ForI-persistent methodthemaximum
throughput isaround50percentwhenG=1.Fornonpersistent method,themaximum
throughput cangoupto90percentwhenGisbetween 3and8."
3779,"CarrierSenseMultiple Accesswith
Collision Avoidance (CSMA/CA)
ThebasicideabehindCSMA/CD isthatastationneedstobeabletoreceivewhile
transmitting todetectacollision."
3780,"Whenthereisnocollision, thestationreceives one
signal:itsownsignal.Whenthereisacollision, thestationreceivestwosignals:itsown
signalandthesignaltransmitted byasecondstation.Todistinguish between thesetwo
cases,thereceived signalsinthesetwocasesmustbesignificantly different."
3781,"Inother
words,thesignalfromthesecondstationneedstoaddasignificant amountofenergyto
theonecreatedbythefirststation."
3782,"Inawirednetwork, thereceived signalhasalmostthesameenergyasthesentsig­
nalbecauseeitherthelengthofthecableisshortortherearerepeaters thatamplifythe
energybetween thesenderandthereceiver."
3783,"Thismeansthatinacollision, thedetected
energyalmostdoubles."
3784,"However, inawirelessnetwork, muchofthesentenergyislostintransmission."
3785,"The
receivedsignalhasverylittleenergy.Therefore, acollision mayaddonly5to10percent
additional energy.Thisisnotusefulforeffective collision detection."
3786,Weneedtoavoidcollisions onwirelessnetworks becausetheycannotbedetected.
3787,"Carriersensemultipleaccesswithcollision avoidance (CSMAlCA) wasinventedforthis
network."
3788,"Collisions areavoidedthroughtheuseofCSMAICA's threestrategies: theinter­
framespace,thecontention window,andacknowledgments, asshowninFigure12.16."
3789,"Figure12.16TiminginCSMAICA
Size:-Found
idle
 l1Jillill1binaryexponential
~~~u~,'i ~'~~l.~."
3790,"~__-----,
~ L-."
3791,"-'HC==:J~
Busy Contention window Sendframe Time-out Time
Interframe Space(IFS)
First,collisions areavoidedbydeferring transmission evenifthechannelisfoundidle."
3792,"Whenanidlechannelisfound,thestationdoesnotsendimmediately."
3793,"Itwaitsfora
periodoftimecalledtheinterframe spaceorIFS.Eventhoughthechannelmay
appearidlewhenitissensed,adistantstationmayhavealreadystartedtransmitting."
3794,"Thedistantstation's signalhasnotyetreachedthisstation.TheIFStimeallowsthe
frontofthetransmitted signalbythedistantstationtoreachthisstation.IfaftertheIFS
timethechannelisstillidle,thestationcansend,butitstillneedstowaitatimeequal
tothecontention time(described next).TheIFSvariablecanalsobeusedtoprioritize378CHAPTER 12MULTIPLE ACCESS
stationsorframetypes.Forexample, astationthatisassigned ashorterIFShasa
higherpriority."
3795,"InCSMAlCA, theIFScanalsobeusedtodefine
thepriorityofastationoraframe."
3796,"Contention Window
Thecontention windowisanamountoftimedividedintoslots.Astationthatisready
tosendchoosesarandomnumberofslotsasitswaittime.Thenumberofslotsinthe
windowchangesaccording tothebinaryexponential back-off strategy.Thismeansthat
itissettooneslotthefirsttimeandthendoubleseachtimethestationcannotdetectan
idlechannelaftertheIFStime.Thisisverysimilartothep-persistent methodexcept
thatarandomoutcome definesthenumberofslotstakenbythewaitingstation.One
interesting pointaboutthecontention windowisthatthestationneedstosensethe
channelaftereachtimeslot.However, ifthestationfindsthechannelbusy,itdoesnot
restarttheprocess; itjuststopsthetimerandrestartsitwhenthechannelissensedas
idle.Thisgivesprioritytothestationwiththelongestwaitingtime."
3797,"InCSMAlCA, ifthestationfindsthechannelbusy,
itdoesnotrestartthetimerofthecontention window;
itstopsthetimerandrestartsitwhenthechannelbecomesidle."
3798,"Acknowledgment
Withalltheseprecautions, therestillmaybeacollision resulting indestroyed data."
3799,"Inaddition, thedatamaybecorrupted duringthetransmission."
3800,"Thepositiveacknowl­
edgment andthetime-out timercanhelpguarantee thatthereceiverhasreceived the
frame."
3801,"Procedure
Figure12.17showstheprocedure."
3802,"Notethatthechannelneedstobesensedbeforeand
aftertheIFS.Thechannelalsoneedstobesensedduringthecontention time.Foreach
timeslotofthecontention window, thechannelissensed.Ifitisfoundidle,thetimer
continues; ifthechannelisfoundbusy,thetimerisstoppedandcontinues afterthe
timerbecomes idleagain."
3803,"CSMAICA andWireless Networks
CSMAICA wasmostlyintended foruseinwirelessnetworks."
3804,"Theprocedure described
above,however, isnotsophisticated enoughtohandle some particular issuesrelatedto
wireless networks, suchashiddenterminals orexposed terminals."
3805,"Wewillseehow
theseissuesaresolvedbyaugmenting theaboveprotocol withhand-shaking features."
3806,"TheuseofCSMNCA inwirelessnetworks willbediscussed inChapter14.SECTION 12.2CONTROLLED ACCESS 379
Figure12.17Flowdiagramfor CSMAICA
12.2Contention window
sizeisZK-1."
3807,"Aftereachslot,ifidle,
continue; ifbusy,haltand
continue whenidle."
3808,"No
K=K+I
CONTROLLED ACCESSChoosearandom
numberRbetween
oandZK-I
Incontrolled access,thestationsconsultoneanothertofindwhichstationhastheright
tosend.Astationcannotsendunlessithasbeenauthorized byotherstations.Wediscuss
threepopularcontrolled-access methods."
3809,"Reservation
Inthereservation method,astationneedstomakeareservation beforesendingdata."
3810,Timeisdividedintointervals.
3811,"Ineachinterval, areservation frameprecedes thedata
framessentinthatinterval.380 CHAPTER 12MULTIPLE ACCESS
IfthereareNstationsinthesystem,thereareexactlyNreservation minislots inthe
reservation frame.Eachminislotbelongstoastation.Whenastationneedstosenda
dataframe,itmakesareservation initsownminislot."
3812,"Thestationsthathavemaderes­
ervations cansendtheirdataframesafterthereservation frame."
3813,"Figure12.18showsasituation withfivestationsandafive-minislot reservation
frame.Inthefirstinterval,onlystations1,3,and4havemadereservations."
3814,"Inthesec­
ondinterval,onlystation1hasmadeareservation."
3815,"Figure12.18 Reservation accessmethod
1 2345 1 2345 12345B!m,.------, r,....,--,----,---,,------, r------, '--.-_-J '-T.L...J..,..J-rI-l
Reservation
frame
Polling
Pollingworkswithtopologies inwhichonedeviceisdesignated asaprimary station
andtheotherdevicesaresecondary stations."
3816,"Alldataexchanges mustbemade
throughtheprimarydeviceevenwhentheultimatedestination isasecondary device."
3817,Theprimarydevicecontrolsthelink;thesecondary devicesfollowitsinstructions.
3818,"It
isuptotheprimarydevicetodetermine whichdeviceisallowedtousethechannelat
agiventime.Theprimarydevice,therefore, isalwaystheinitiatorofasession(see
Figure12.19)."
3819,"Figure12.19 Selectandpollfunctions inpollingaccessmethod
Poll
1....------1 ACK1------,Primary Primary
SELr-----'~
1-+----""""1 ACK1-----""""1
Selectr------l Datar----l~
Iftheprimarywantstoreceivedata,itasksthesecondaries iftheyhaveanything to
send;thisiscalledpollfunction."
3820,"Iftheprimarywantstosenddata,ittellsthesecondary
togetreadytoreceive;thisiscalledselectfunction.SECTION 12.2CONTROLLED ACCESS 381
Select
Theselectfunction isusedwhenever theprimary devicehassomething tosend."
3821,"Remember thattheprimarycontrols thelink.Iftheprimaryisneithersendingnor
receiving data,itknowsthelinkisavailable."
3822,"Ifithassomething tosend,theprimarydevicesendsit.Whatitdoesnotknow,
however, iswhetherthetargetdeviceisprepared toreceive.Sotheprimarymustalert
thesecondary totheupcoming transmission andwaitforanacknowledgment ofthe
secondary's readystatus.Beforesendingdata,theprimarycreatesandtransmits a
select(SEL)frame,onefieldofwhichincludestheaddressoftheintended secondary."
3823,"Poll
Thepollfunction isusedbytheprimarydevicetosolicittransmissions fromthesec­
ondarydevices.Whentheprimaryisreadytoreceivedata,itmustask(poll)each
deviceinturnifithasanything tosend.Whenthefirstsecondary isapproached, it
responds eitherwithaNAKframeifithasnothingtosendorwithdata(intheformof
adataframe)ifitdoes.Iftheresponse isnegative (aNAKframe),thentheprimary
pollsthenextsecondary inthesamemanneruntilitfindsonewithdatatosend.When
theresponse ispositive(adataframe),theprimaryreadstheframeandreturnsan
acknowledgment (ACKframe),verifying itsreceipt."
3824,"TokenPassing
Inthetoken-passing method,thestationsinanetworkareorganized inalogicalring."
3825,"Inotherwords,foreachstation,thereisapredecessor andasuccessor."
3826,"Thepredecessor
isthestationwhichislogically beforethestationinthering;thesuccessor isthestation
whichisafterthestationinthering.Thecurrentstationistheonethatisaccessing the
channelnow.Therighttothisaccesshasbeenpassedfromthepredecessor tothecur­
rentstation.Therightwillbepassedtothesuccessor whenthecurrentstationhasno
moredatatosend."
3827,Buthowistherighttoaccessthechannelpassedfromonestationtoanother?
3828,"In
thismethod,aspecialpacketcalledatokencirculates throughthering.Theposses­
sionofthetokengivesthestationtherighttoaccessthechannelandsenditsdata."
3829,"Whenastationhassomedatatosend,itwaitsuntilitreceivesthetokenfromitspre­
decessor.Itthenholdsthetokenandsendsitsdata.Whenthestationhasnomoredata
tosend,itreleasesthetoken,passingittothenextlogicalstationinthering.Thesta­
tioncannotsenddatauntilitreceivesthetokenagaininthenextround.Inthisprocess,
whenastationreceivesthetokenandhasnodatatosend,itjustpasses the datatothe
nextstation."
3830,"Tokenmanagement isneededforthisaccessmethod.Stationsmustbelimitedin
thetimetheycanhavepossession ofthetoken.Thetokenmustbemonitored toensure
ithasnotbeenlostordestroyed."
3831,"Forexample, ifastationthatisholdingthetokenfails,
thetokenwilldisappear fromthenetwork."
3832,"Anotherfunctionoftokenmanagement is
toassignpriorities tothestationsandtothetypesofdatabeingtransmitted."
3833,"Andfinally,
tokenmanagement isneededtomakelow-priority stationsreleasethetokentohigh­
prioritystations.382 CHAPTER 12MULTIPLE ACCESS
LogicalRing
Inatoken-passing network, stationsdonothavetobephysically connected inaring;
theringcanbealogicalone.Figure12.20showfourdifferent physicaltopologies that
cancreatealogicalring."
3834,"Figure12.20Logicalringandphysical topology intoken-passing accessmethod
a.Physical ring
1
11
1
111
1-
c.Busringb.Dualring
d.Starring
Inthephysical ringtopology, whenastationsendsthetokentoitssuccessor, the
tokencannotbeseenbyotherstations;thesuccessor isthenextoneinline.Thismeans
thatthetokendoesnothavetohavetheaddressofthenextsuccessor."
3835,"Theproblemwith
thistopology isthatifoneofthelinks-the mediumbetween twoadjacentstations­
fails,thewholesystemfails."
3836,"Thedualringtopology usesasecond(auxiliary) ringwhichoperatesinthereverse
direction compared withthemainring.Thesecondringisforemergencies only(suchas
asparetireforacar).Ifoneofthelinksinthemainringfails,thesystemautomatically
combines thetworingstoformatemporary ring.Afterthefailedlinkisrestored, the
auxiliary ringbecomes idleagain.Notethatforthistopology towork,eachstationneeds
tohavetwotransmitter portsandtworeceiverports.Thehigh-speed TokenRingnetworks
calledFDDI(FiberDistributed DataInterface) andCDDI(Copper Distributed Data
Interface) usethistopology."
3837,"Inthebusringtopology, alsocalledatokenbus,thestationsareconnected toasin­
glecablecalledabus.They,however, makealogicalring,becauseeachstationknows
theaddressofitssuccessor (andalsopredecessor fortokenmanagement purposes)."
3838,"Whenastationhasfinishedsendingitsdata,itreleasesthetokenandinsertstheaddress
ofitssuccessor inthetoken.Onlythestationwiththeaddressmatching thedestination
addressofthetokengetsthetokentoaccessthesharedmedia.TheTokenBusLAN,
standardized byIEEE,usesthistopology."
3839,"Inastarringtopology, thephysicaltopology isastar.Thereisahub,however, that
actsastheconnector."
3840,"Thewiringinsidethehubmakesthering;thestationsarecon­
nectedtothisringthroughthetwowireconnections."
3841,"Thistopology makesthenetworkSECTION 12.3CHANNELIZATION 383
lesspronetofailurebecauseifalinkgoesdown,itwillbebypassed bythehubandthe
restofthestationscanoperate.Alsoaddingandremoving stationsfromtheringiseasier."
3842,Thistopology isstillusedintheTokenRingLANdesigned byIBM.
3843,"12.3CHANNELIZATION
Channelization isamultiple-access methodinwhichtheavailable bandwidth ofalink
issharedintime,frequency, orthroughcode,betweendifferent stations.Inthissection,
wediscussthreechannelization protocols: FDMA,TDMA,andCDMA."
3844,"Weseetheapplication ofallthesemethods inChapter 16
whenwediscusscellularphonesystems."
3845,"Frequency-Division Multiple Access(FDMA)
Infrequency-division multiple access(FDMA), theavailable bandwidth isdivided
intofrequency bands.Eachstationisallocated abandtosenditsdata.Inotherwords,
eachbandisreserved foraspecificstation,anditbelongstothestationallthetime."
3846,Eachstationalsousesabandpass filtertoconfinethetransmitter frequencies.
3847,"Topre­
ventstationinterferences, theallocated bandsareseparated fromoneanotherbysmall
guardbands.Figure12.21showstheideaofFDMA."
3848,"Figure12.21 Frequency-division multiple access(FDMA)
Data Data
Silentf~ •••~t
f~C--------_______ .J
_______ .J•••
--------
tData""I
f~--------========_______ .J•••-------­_______ ..J
-.--,--""----
tCommon
channel
Data
InFDMA,theavailable bandwidth ofthecommon channel
isdividedintobandsthatareseparated byguardbands.384CHAPTER 12MULTIPLE ACCESS
FDMAspecifies apredetermined frequency bandfortheentireperiodofcommu­
nication."
3849,"Thismeansthatstreamdata(acontinuous flowofdatathatmaynotbepack­
etized)caneasilybeusedwithFDMA.WewillseeinChapter16howthisfeaturecan
beusedincellulartelephone systems."
3850,"Weneedtoemphasize thatalthough FDMAandFDMconceptually seemsimilar,
therearedifferences between them.FDM,aswesawinChapter6,isaphysical layer
technique thatcombines theloadsfromlow-bandwidth channels andtransmits themby
usingahigh-bandwidth channel."
3851,Thechannels thatarecombined arelow-pass.
3852,"The
multiplexer modulates thesignals,combines them,andcreatesabandpass signal.The
bandwidth ofeachchannelisshiftedbythemultiplexer."
3853,"FDMA,ontheotherhand,isanaccessmethodinthedatalinklayer.Thedatalink
layerineachstationtellsitsphysical layertomakeabandpass signalfromthedata
passedtoit.Thesignalmustbecreatedintheallocated band.Thereisnophysicalmul­
tiplexeratthephysical layer.Thesignalscreatedateachstationareautomatically
bandpass-filtered."
3854,Theyaremixedwhentheyaresenttothecommon channel.
3855,"Time-Division Multiple Access(TDMA)
Intime-division multiple access(TDMA), thestationssharethebandwidth ofthe
channelintime.Eachstationisallocated atimeslotduringwhichitcansenddata."
3856,"Eachstationtransmits itsdatainisassigned timeslot.Figure12.22showstheidea
behindTDMA."
3857,"Figure12.22Time-division multipleaccess(TDMA)
Data Data
f
~-.;""-I,--I::::I···
IIII,rf
-, II,"",IIII···
tI'II
DataCommon
channel
f
I
I :•••,'
Silentf
-I~-ll-­
II II
IJIII
IIIII
Data
Themainproblem withTDMAliesinachieving synchronization between thedifferent
stations.Eachstationneedstoknowthebeginning ofitsslotandthelocationofitsslot."
3858,"Thismaybedifficultbecauseofpropagation delaysintroduced inthesystemifthesta­
tionsarespreadoveralargearea.Tocompensate forthedelays,wecaninsertguardSECTION 12.3CHANNELIZATION 385
times.Synchronization isnormally accomplished byhavingsomesynchronization bits
(normally refenedtoaspreamble bits)atthebeginning ofeachslot."
3859,"InTDMA,thebandwidth isjustonechannelthatis
timeshared betweendifferent stations."
3860,"Wealsoneedtoemphasize thatalthough TDMAandTDMconceptually seemthe
same,therearedifferences between them.TDM,aswesawinChapter6,isaphysical
layer technique thatcombines thedatafromslowerchannels andtransmits themby
usingafasterchannel."
3861,"Theprocessusesaphysical multiplexer thatinterleaves data
unitsfromeachchannel."
3862,"TDMA,ontheotherhand,isanaccessmethodinthedatalinklayer.Thedatalink
layerineachstationtellsitsphysical layertousetheallocated timeslot.Thereisno
physicalmultiplexer atthephysicallayer."
3863,"Code-Division Multiple Access(CDMA)
Code-division multiple access(CDMA) wasconceived severaldecadesago.Recent
advances inelectronic technology havefinallymadeitsimplementation possible."
3864,"CDMAdiffersfromFDMAbecauseonlyonechanneloccupies theentirebandwidth of
thelink.ItdiffersfromTDMAbecauseallstationscansenddatasimultaneously; there
isnotimesharing."
3865,"InCDMA,onechannelcarriesalltransmissions simultaneously."
3866,"Analogy
Letusfirstgiveananalogy.CDMAsimplymeanscommunication withdifferent codes."
3867,"Forexample, inalargeroomwithmanypeople,twopeoplecantalkinEnglishif
nobodyelseunderstands English."
3868,"Another twopeoplecantalkinChineseiftheyare
theonlyoneswhounderstand Chinese, andsoon.Inotherwords,thecommon channel,
thespaceoftheroominthiscase,caneasilyallowcommunication between several
couples,butindifferent languages (codes)."
3869,"Idea
Letusassumewehavefourstations1,2,3,and4connected tothesamechannel."
3870,"The
datafromstation1aredl,fromstation2ared2,andsoon.Thecodeassigned tothe
firststationiscI,tothesecondisc2,andsoon.Weassumethattheassigned codeshave
twoproperties."
3871,"1.Ifwemultiply eachcodebyanother,wegetO."
3872,"2.Ifwemultiply eachcodebyitself,weget4(thenumberofstations)."
3873,"Withthesetwoproperties inmind,letusseehowtheabovefourstationscansenddata
usingthesamecommon channel, asshowninFigure12.23."
3874,"Station1mUltiplies (aspecialkindofmultiplication, aswewillsee)itsdatabyits
codetogetdl.Cl'Station2multiplies itsdatabyitscodetogetd2.c2'Andsoon.The386 CHAPTER 12MULTIPLE ACCESS
Figure12.23Simpleideaofcommunication withcode
Id,'(',+d2•c2+d3•('3+d4•('4I
DataCommon
channel
datathatgoonthechannelarethesumofalltheseterms,asshowninthebox.Any
stationthatwants to receivedatafromoneoftheotherthreemultiplies thedataonthe
channelbythecodeofthesender.Forexample, supposestations1and2aretalkingto
eachother.Station2wantstohearwhatstationIissaying.Itmultiplies thedataonthe
channelbycl'thecodeofstation1."
3875,"Because (cl.cl)is4,but(c2.cI),(c3.cI),and(c4.cl)areallOs,station2divides
theresultby4togetthedatafromstation1."
3876,"data=(d}.Cj+dz.Cz+d3.C3+d4.c4).Cl
=dj•Cl.Cj+dz.Cz.Cl+d3.C3.Cl+d4.C4'CI=4Xd1
Chips
CDMAisbasedoncodingtheory.Eachstationisassigned acode,whichisasequence
ofnumbers calledchips,asshowninFigure12.24.Thecodesarefortheprevious
example."
3877,"Figure12.24 Chipsequences
C3
I[+1+1+1+11I1[+1-1+1-I)II[+1+\-I-11II[+\-1-1+IJI
Laterinthischapterweshowhowwechosethesesequences."
3878,"Fornow,weneedto
knowthatwedidnotchoosethesequences randomly; theywerecarefully selected."
3879,"Theyarecalledorthogonal sequences andhavethefollowing properties:
1.Eachsequence ismadeofNelements, whereNisthenumberofstations.SECTION 12.3CHANNELIZATION 387
2.Ifwemultiply asequence byanumber,everyelementinthesequence ismultiplied
bythatelement."
3880,"Thisiscalledmultiplication ofasequence byascalar.Forexample,
2.[+1+1-1-1]=[+2+2-2-2]
3.Ifwemultiply twoequalsequences, elementbyelement, andaddtheresults,we
getN,whereNisthenumberofelements intheeachsequence."
3881,"Thisiscalledthe
innerproduct oftwoequalsequences."
3882,"Forexample,
[+1+1-1-n·[+1+1-1-1]= 1+ 1+ 1+ 1= 4
4.Ifwemultiply twodifferent sequences, elementbyelement, andaddtheresults,
wegetO.Thisiscalledinnerproductoftwodifferent sequences."
3883,"Forexample,
[+1+1-1-1]•[+1+1+1+1]= 1+ 1-1-1=0
5.Addingtwosequences meansaddingthecorresponding elements."
3884,"Theresultis
anothersequence."
3885,"Forexample,
[+1+1-1-1]+[+1+1+1+1]=[+2+2 00]
DataRepresentation
Wefollowtheserulesforencoding:Ifastationneedstosenda 0bit,itencodesitas-1;
ifitneedstosenda 1bit,itencodesitas+1.Whenastationisidle,itsendsnosignal,
whichisinterpreted asaO.TheseareshowninFigure12.25."
3886,"Figure12.25 Datarepresentation inCDMA
IDatabit0--.~-IIIDatabitI----1.~+1I!Silence----I.~ 0I
Encoding andDecoding
Asasimpleexample, weshowhowfourstationssharethelinkduringaI-bitinterval."
3887,Theprocedure caneasilyberepeated foradditional intervals.
3888,"Weassumethatstations1
and2aresendinga 0bitandchannel4issendinga 1bit.Station3issilent.Thedataat
thesendersitearetranslated to-1,-1,0,and+1.Eachstationmultiplies thecorrespond­
ingnumberbyitschip(itsorthogonal sequence), whichisuniqueforeachstation.The
resultisanewsequence whichissenttothechannel."
3889,"Forsimplicity, weassumethatall
stationssendtheresulting sequences atthesametime.Thesequence onthechannelis
thesumofallfoursequences asdefinedbefore.Figure12.26showsthesituation."
3890,"Nowimaginestation3,whichwesaidissilent,islistening tostation2.Station3mul­
tipliesthetotaldataonthechannelbythecodeforstation2,whichis[+1-1+1-1],toget
[-1-1-3 +1]·[+1-1+1-1]=-4/4=-1......bit1388 CHAPTER 12MULTIPLE ACCESS
Figure12.26SharingchannelinCDMA
Bita Bita
C1
1+1+1+1+IJ
d1•c1
[-1-I-I-I]C2
1+1-I+1-1]
[-1-1-3+1]
DataCommon
channel
c.-
[+1+1-1-11C4
1+1-I-1+11
Silent Bit1
SignalLevel
Theprocesscanbebetterunderstood ifweshowthedigitalsignalproduced byeach
stationandthedatarecovered atthedestination (seeFigure12.27).Thefigureshowsthe
corresponding signalsforeachstation(usingNRZ-Lforsimplicity) andthesignalthat
isonthecommon channel."
3891,"Figure12.27DigitalsignalcreatedbyfourstationsinCDMA
BitO~ 1-1-1-I-I]
BitO~ 1-1+1-I+1]
Silent~ [00 00]
BitI~ 1+1-I-I+1]
DataonthechannelTime
Time
Time
Time
Time
Figure12.28showshowstation3candetectthedatasentbystation2byusingthe
codeforstation2.Thetotaldataonthechannelaremultiplied (innerproductopera­
tion)bythesignalrepresenting station2chipcodetogetanewsignal.Thestationthen
integrates andaddstheareaunderthesignal,togetthevalue-4,whichisdividedby4
andinterpreted asbitO.SECTION 12.3CHANNELIZATION 389
Figure12.28 Decoding ofthecomposite signalforoneinCDMA
Dataonthechannel
Time
Station2'scodem [+1-I+1-1]
Innerproductresult
Summing thevaluesTime
Time
Time
-4~-4/4~-I~BitO
Sequence Generation
Togeneratechipsequences, weuseaWalshtable,whichisatwo-dimensional tablewith
anequalnumberofrowsandcolumns, asshowninFigure12.29."
3892,"Figure12.29 General ruleandexamples ofcreating Walshtables
a.Twobasicrules
WI=[+1J+1+1+1+1
+1-1+1-1
W4=
[+1+1J+1 +1 -1 -1
Wz=
+1-1 +1-1-1+1
b.Generation ofWI'Wz,andW4
IntheWalshtable,eachrowisasequence ofchips.WIforaone-chip sequence has
onerowandonecolumn.Wecanchoose-lor+1forthechipforthistrivialtable(we
chose+1).According toWalsh,ifweknowthetableforNsequences WN'wecancreate
thetablefor2Nsequences W2N,asshowninFigure12.29.TheWNwiththeoverbarWN
standsforthecomplement ofWN'whereeach+1ischanged to-1andviceversa."
3893,"Figure12.29alsoshowshowwecancreateW2andW4fromWI'AfterweselectWI,W2390 CHAPTER 12MULTIPLE ACCESS
canbemadefromfourWj's,withthelastonethecomplement ofWl'AfterW2isgener­
ated,W4canbemadeoffourW2's,withthelastonethecomplement ofW2.Ofcourse,
Wsiscomposed offourW4's,andsoon.Note that afterWNismade,eachstationis
assigned achipcorresponding toarow."
3894,"Something weneedtoemphasize isthatthenumberofsequences Nneedstobea
powerof2.Inotherwords,weneedtohaveN=2m."
3895,Thenumberofsequences inaWalshtableneedstobeN=2m.
3896,"Example 12.6
Findthechipsforanetworkwith
a.Twostations
b.Fourstations
Solution
WecanusetherowsofW2andW4inFigure12.29:
a.Foratwo-station network, wehave[+1+1]and[+1-1]."
3897,"b.Forafour-station network wehave[+1+1+1+1],[+1-1+1-1],[+1+1-1-1],and
[+1-1-1 +1]."
3898,"Example 12.7
Whatisthenumberofsequences ifwehave90stationsinournetwork?"
3899,"Solution
Thenumberofsequences needstobe2m.Weneedtochoosem=7andN=27or128.Wecan
thenuse90ofthesequences asthechips."
3900,"Example 12.8
Provethatareceiving stationcangetthedatasentbyaspecificsenderifitmultiplies theentire
dataonthechannelbythesender'schipcodeandthendividesitbythenumberofstations."
3901,"Solution
Letusprovethisforthefirststation,usingourprevious four-station example."
3902,"Wecansaythatthe
dataonthechannelD=Cdl.(""1+d2.(""2+d3.(""3+d4.(""4)'Thereceiverwhichwantstogetthe
datasentbystationImultiplies thesedataby(""I'
D.(""1=(d1•(""1+d2.(""2+d3.(""3+d4.(""4).(""1
=d1.(""1.(""1+d2.(""2.(""1+d3.(""3.(""1+d4.(""4.(""1
=dI XN+d2X0+d3X0+d4X0
=dlxN
WhenwedividetheresultbyN,wegetdI'
12.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...Jrefertothereference listattheendofthetext.SECTION 12.6SUMMARY 391
Books
Multiple accessisdiscussed inChapter4of[Tan03],Chapter16of[Sta04],Chapter6of
[GW04], andChapter8of[For03].Moreadvanced materials canbefoundin[KMK04]."
3903,"12.5KEYTERMS
I-persistent method
ALOHA
binaryexponential backup
carriersensemultiple access(CSMA)
carriersensemultiple accesswith
collision avoidance (CSMAlCA)
carriersensemultiple accesswith
collision detection (CSMAlCD)
channelization
code-division multiple access(CDMA)
collision
contention
controlled access
frequency-division multiple access
(FDMA)
innerproduct
interframe space(IFS)
jamming signalmultiple access(MA)
nonpersistent method
orthogonal sequence
polling
p-persistent method
primarystation
propagation time
pureALOHA
randomaccess
reservation
secondary station
slottedALOHA
time-division multiple access
(TDMA)
token
tokenpassing
vulnerable time
Walshtable
12.6SUMMARY
oWecanconsiderthedatalinklayerastwosublayers."
3904,"Theuppersublayerisresponsible
fordatalinkcontrol,andthelowersublayerisresponsible forresolving accesstothe
sharedmedia."
3905,"UManyformalprotocols havebeendevisedtohandleaccesstoasharedlink.Wecate­
gorizethemintothreegroups:randomaccessprotocols, controlled accessprotocols,
andchannelization protocols."
3906,"oInrandomaccessorcontention methods, nostationissuperiortoanotherstation
andnoneisassigned thecontroloveranother."
3907,"oALOHA allowsmultiple access(MA)tothesharedmedium.There arepotential
collisions inthisarrangement."
3908,"Whenastationsendsdata,anotherstationmayattempt
todosoatthesametime.Thedatafromthetwostationscollideandbecomegarbled."
3909,"oTominimize thechanceofcollision and,therefore, increase theperformance, the
CSMAmethodwasdeveloped."
3910,"Thechanceofcollision canbereducedifastation392CHAPTER 12MULTIPLE ACCESS
sensesthemediumbeforetryingtouseit.Carriersensemultiple access(CSMA)
requiresthateachstationfirstlistentothemediumbeforesending.Threemethods
havebeendevisedforcarriersensing:I-persistent, nonpersistent, andp-persistent."
3911,"oCarriersensemultiple accesswithcollision detection (CSMA/CD) augments the
CSMAalgorithm tohandlecollision."
3912,"Inthismethod,astationmonitors themedium
afteritsendsaframetoseeifthetransmission wassuccessful."
3913,"Ifso,thestationis
finished."
3914,"If,however, thereisacollision, theframeissentagain."
3915,"DToavoidcollisions onwirelessnetworks, carriersensemultipleaccesswithcollision
avoidance (CSMA/CA) wasinvented."
3916,"Collisions areavoidedthroughtheusethree
strategies: theinterframe space,thecontention window, andacknowledgments."
3917,"oIncontrolled access,thestationsconsultoneanothertofindwhichstationhasthe
righttosend.Astationcannotsendunlessithasbeenauthorized byotherstations."
3918,"Wediscussed threepopularcontrolled-access methods: reservation, polling,and
tokenpassing."
3919,"oInthereservation accessmethod, astationneedstomakeareservation before
sendingdata.Timeisdividedintointervals."
3920,"Ineachinterval,areservation frame
precedes thedataframessentinthatinterval."
3921,"oInthepollingmethod,alldataexchanges mustbemadethroughtheprimarydevice
evenwhentheultimatedestination isasecondary device.Theprimarydevicecontrols
thelink;thesecondary devicesfollowitsinstructions."
3922,"DInthetoken-passing method,thestationsinanetworkareorganized inalogical
ring.Eachstationhasapredecessor andasuccessor."
3923,"Aspecialpacketcalleda
tokencirculates throughthering."
3924,"oChannelization isamultiple-access methodinwhichtheavailable bandwidth ofa
linkissharedintime,frequency, orthroughcode,between different stations.We
discussed threechannelization protocols: FDMA,TDMA,andCDMA."
3925,"DInfrequency-division multipleaccess(FDMA), theavailable bandwidth isdivided
intofrequency bands.Eachstationisallocated abandtosenditsdata.Inotherwords,
eachbandisreservedforaspecificstation,anditbelongstothestationallthetime."
3926,"DIntime-division multiple access(TDMA), thestationssharethebandwidth ofthe
channelintime.Eachstationisallocated atimeslotduringwhichitcansenddata."
3927,Eachstationtransmits itsdatainitsassigned timeslot.
3928,"oIncode-division multipleaccess(CDMA), thestationsusedifferentcodestoachieve
multipleaccess.CDMAisbasedoncodingtheoryandusessequences ofnumbers
calledchips.Thesequences aregenerated usingorthogonal codessuchtheWalsh
tables."
3929,"12.7PRACTICE SET
ReviewQuestions
1.Listthreecategories ofmultipleaccessprotocols discussed inthischapter."
3930,"2.Definerandomaccessandlistthreeprotocols inthiscategory.SECTION 12.7PRACTICE SET 393
3.Definecontrolled accessandlistthreeprotocols inthiscategory."
3931,4.Definechannelization andlistthreeprotocols inthiscategory.
3932,"5.Explainwhycollision isanissueinarandomaccessprotocol butnotin controlled
accessorchannelizing protocols."
3933,6.Compare andcontrastarandomaccessprotocol withacontrolled accessprotocol.
3934,7.Compare andcontrastarandomaccessprotocol withachannelizing protocol.
3935,8.Compare andcontrastacontrolled accessprotocol withachannelizing protocol.
3936,"9.Doweneedamultiple accessprotocol whenweusethe1ocalloop ofthetelephone
company toaccesstheInternet?"
3937,Why?
3938,"10.Doweneedamultiple accessprotocol whenweuseoneCATVchanneltoaccess
theInternet?"
3939,Why?
3940,"Exercises
11.WehaveapureALOHA networkwith100stations.IfTfr=1}.is,whatisthenumber
offrames/s eachstationcansendtoachievethemaximum efficiency."
3941,12.RepeatExercise 11forslottedALOHA.
3942,"13.OnehundredstationsonapureALOHA networkshareal-Mbpschannel.Ifframes
are1000bitslong,findthethroughput ifeachstationissending 10framesper
second."
3943,14.RepeatExercise 13forslottedALOHA.
3944,"15.InaCDMAlCD network with adatarateof10Mbps,theminimum framesizeis
foundtobe512bitsforthecorrectoperation ofthecollision detection process.What
shouldbetheminimum framesizeifweincrease thedatarateto100Mbps?To
1Gbps?To10Gbps?"
3945,"16.InaCDMAlCD network withadatarateof10Mbps,themaximum distance
between anystationpairisfoundtobe2500mforthecorrectoperation ofthecol­
lisiondetection process.Whatshouldbethemaximum distanceifweincrease the
datarateto100Mbps?To1Gbps?To10Gbps?"
3946,"17.InFigure12.12,thedatarateis10Mbps,thedistance between stationAandCis
2000m,andthepropagation speedis2 x108mls.StationAstartssendingalong
frameattimet1=0;stationCstartssendingalongframeattimet2=3}.is.The
sizeoftheframeislongenoughtoguarantee thedetection ofcollision byboth
stations."
3947,"Find:
a.ThetimewhenstationChearsthecollision (t3)'
b.ThetimewhenstationAhearsthecollision (t4)'
c.ThenumberofbitsstationAhassentbeforedetecting thecollision."
3948,d.ThenumberofbitsstationChassentbeforedetecting thecollision.
3949,18.RepeatExercise 17ifthedatarateis100Mbps.
3950,19.Calculate theWalshtableWsfromW4inFigure12.29.
3951,"20.Recreate theW2andW4tablesinFigure12.29usingWI=[-1].Compare therecre­
atedtableswiththeonesinFigure12.29."
3952,"21.Provethethirdandfourthorthogonal properties ofWalshchipsforW4inFigure12.29.394CHAPTER 12MULTIPLE ACCESS
22.Provethethirdandfourthorthogonal properties ofWalshchipsforW4recreated in
Exercise 20."
3953,"23.Repeatthescenariodepicted inFigures12.27to12.28ifbothstations1and3are
silent."
3954,"24.Anetworkwithoneprimaryandfoursecondary stationsusespolling.Thesizeofa
dataframeis1000bytes.Thesizeofthepoll,ACK,andNAKframesare32bytes
each.Eachstationhas5framestosend.Howmanytotalbytesareexchanged ifthere
isnolimitation onthenumberofframesastationcansendinresponse toapoll?"
3955,25.RepeatExercise 24ifeachstationcansendonlyoneframeinresponse toapoll.
3956,"Research Activities
26.Canyouexplainwhythevulnerable timeinALOHA dependsonTpf'butinCSMA
dependsonTp?"
3957,"27.Inanalyzing ALOHA, weuseonlyoneparameter, time;inanalyzing CSMA,we
usetwoparameters, spaceandtime.Canyouexplainthereason?CHAPTER 13
WiredLANs:Ethernet
InChapter1,welearnedthatalocalareanetwork(LAN)isacomputer networkthatis
designed foralimitedgeographic areasuchasabuildingoracampus.Although aLAN
canbeusedasanisolatednetworktoconnectcomputers inanorganization forthesole
purposeofsharingresources, mostLANstodayarealsolinkedtoawideareanetwork
(WAN)ortheInternet."
3958,"TheLANmarkethasseenseveraltechnologies suchasEthernet, TokenRing,
TokenBus,FDDI,andATMLAN.Someofthesetechnologies survivedforawhile,but
Ethernet isbyfarthedominant technology."
3959,"Inthischapter,wefirstbrieflydiscusstheIEEEStandard Project802,designed to
regulate themanufacturing andinterconnectivity between different LANs.Wethen
concentrate ontheEthernet LANs.
Although Ethernet hasgonethroughafour-generation evolution duringthelast
fewdecades, themainconcepthasremained."
3960,"Ethernet haschanged tomeetthemarket
needsandtomakeuseofthenewtechnologies."
3961,"13.1IEEESTANDARDS
In1985,theComputer SocietyoftheIEEEstartedaproject,calledProject802,toset
standards toenableintercommunication amongequipment fromavarietyofmanufac­
turers.Project802doesnotseektoreplaceanypartoftheOSIortheInternetmodel."
3962,"Instead,itisawayofspecifying functions ofthephysical layerandthedatalinklayer
ofmajorLANprotocols."
3963,"Thestandard wasadoptedbytheAmerican National Standards Institute(ANSI).In
1987,theInternational Organization forStandardization (ISO)alsoapproved itasan
international standard underthedesignation ISO8802."
3964,"Therelationship ofthe802Standard tothetraditional OSImodelisshowninFig­
ure13.1.TheIEEEhassubdivided thedatalinklayerintotwosublayers: logicallink
control(LLC)andmediaaccesscontrol(MAC).IEEEhasalsocreatedseveralphys­
icallayer standards fordifferent LANprotocols."
3965,"395396CHAPTER 13WIREDLANs:ETHERNET
Figure13.1IEEEstandardfor LANs
LLC:Logicallinkcontrol
MAC:Mediaaccesscontrol
Upperlayers Upperlayers
Datalinklayer
Physical layerEthernet
MAC
Ethernet
physical layers
(several)TokenRing
MAC
TokenRing
physical layerTokenBus
MAC
TokenBus
physical layer....',:""""
OSlorInternetmodel IEEEStandard
DataLinkLayer
Aswementioned before,thedatalinklayerintheIEEEstandard isdividedintotwo
sublayers: LLCandMAC."
3966,"LogicalLinkControl(LLC)
InChapterII,wediscussed datalinkcontrol.Wesaidthatdatalinkcontrolhandles
framing, flowcontrol,anderrorcontrol.InIEEEProject802,flowcontrol,errorcon­
trol,andpartoftheframingdutiesarecollected intoonesublayer calledthelogicallink
control.Framing ishandledinboththeLLCsublayer andtheMACsublayer."
3967,"TheLLCprovides onesingledatalinkcontrolprotocol forallIEEELANs.Inthis
way,theLLCisdifferent fromthemediaaccesscontrolsublayer,whichprovides differ­
entprotocols fordifferent LANs.AsingleLLCprotocol canprovideinterconnectivity
between different LANsbecauseitmakestheMACsublayer transparent."
3968,"Figure13.1
showsonesingleLLCprotocol servingseveralMACprotocols."
3969,"Framing LLCdefinesaprotocol data unit(PDU)thatissomewhat similartothatof
HDLC.Theheadercontains acontrolfieldliketheoneinHDLC;thisfieldisusedfor
flowanderrorcontrol.Thetwootherheaderfieldsdefinetheupper-layer protocol
atthesourceanddestination thatusesLLC.Thesefieldsarecalledthedestination
serviceaccesspoint(DSAP) andthesourceserviceaccesspoint(SSAP)."
3970,"Theother
fieldsdefinedinatypicaldatalinkcontrolprotocol suchasHDLCaremovedtothe
MACsublayer.Inotherwords,aframedefinedinHDLCisdividedintoaPDUatthe
LLCsublayer andaframeattheMACsublayer,asshowninFigure13.2.
NeedforLLCThepurposeoftheLLCistoprovideflowanderrorcontrolforthe
upper-layer protocols thatactuallydemand theseservices."
3971,"Forexample, ifaLANor
severalLANsareusedinanisolatedsystem,LLCmaybeneededtoprovideflowand
errorcontrolfortheapplication layerprotocols."
3972,"However, mostupper-layer protocolsSECTION 13.2STANDARD ETHERNET 397
Figure13.2HDLCframecompared withLLCandMACframes
LLCPDD
I_h...ea...de...r....f...:.......p_y .......·....Hco
SSAP:Sourceserviceacces,point D SUpper-layer SS
A AControldatap p
Upper-layerI ,
Address Control FCS-I I
dataI I
I I
I I
HDLCframe MAC.."
3973,......
3974,"~I...-MACaluadDSAP'Destination serviceaccesspoint
MACframe
suchasIP(discussed inChapter20),donotusetheservicesofLLC.Forthisreason,
weendourdiscussion ofLLC."
3975,"MediaAccessControl(MAC)
InChapter 12,wediscussed multiple accessmethods including randomaccess,con­
trolledaccess,andchannelization."
3976,"IEEEProject802hascreatedasublayer called
mediaaccesscontrolthatdefinesthespecificaccessmethodforeachLAN.Forexam­
ple,itdefinesCSMA/CD asthemediaaccessmethodforEthernet LANsandthetoken­
passingmethodforTokenRingandTokenBusLANs.Aswediscussed intheprevious
section,partoftheframingfunction isalsohandledbytheMAClayer."
3977,"IncontrasttotheLLCsublayer, theMACsublayer contains anumberofdistinct
modules; eachdefinestheaccessmethodandtheframingformatspecifictothecorre­
sponding LANprotocol."
3978,"Physical Layer
Thephysical layerisdependent ontheimplementation andtypeofphysical media
used.IEEEdefinesdetailedspecifications foreachLANimplementation."
3979,"Forexample,
although thereisonlyoneMACsublayerforStandard Ethernet, thereisadifferent
physical layerspecifications foreachEthernet implementations aswewillseelater."
3980,"13.2STANDARD ETHERNET
TheoriginalEthernet wascreatedin1976atXerox'sPaloAltoResearch Center(PARC)."
3981,"Sincethen,ithasgonethroughfourgenerations: Standard Ethernet (lotMbps),Fast
Ethernet (100Mbps),GigabitEthernet (lGbps),andTen-Gigabit Ethernet (l0Gbps),
asshowninFigure13.3.Webrieflydiscussallthesegenerations startingwiththefirst,
Standard (ortraditional) Ethernet."
3982,"tEthernet definedsomeI-Mbpsprotocols, buttheydidnotsurvive.398CHAPTER 13WIREDLANs:ETHERNET
Figure13.3Ethernet evolution throughfourgenerations
HIl\Ibps 100Mbps 10Gbp~
MACSublayer
InStandard Ethernet, theMACsublayergovernstheoperation oftheaccessmethod.It
alsoframesdatareceivedfromtheupperlayerandpassesthemtothephysicallayer."
3983,"FrameFormat
TheEthernet framecontains sevenfields:preamble, SFD,DA,SA,lengthortypeof
protocoldataunit(PDU),upper-layer data,andtheCRe.Ethernetdoesnotprovideany
mechanism foracknowledging receivedframes,makingitwhatisknownasanunreli­
ablemedium."
3984,"Acknowledgments mustbeimplemented atthehigherlayers.Theformat
oftheMACframeisshowninFigure13.4.
Figure13.4802.3MACframe
Pr~amble: 56bitsofalternating 1sandas."
3985,"SFD:Startframedelimiter, flag(10101011)
I.7bytes 1byte.1
Physical layer
header6bytes 6bytesDataandpadding
DPreamble."
3986,"Thefirstfieldofthe802.3framecontains7bytes(56bits)ofalternat­
ingOsandIsthatalertsthereceiving systemtothecomingframeandenablesitto
synchronize itsinputtiming.Thepatternprovides onlyanalertandatimingpulse."
3987,"The56-bitpatternallowsthestationstomisssomebitsatthebeginning ofthe
frame.Thepreamble isactuallyaddedatthephysicallayerandisnot(formally)
partoftheframe."
3988,"DStartframedelimiter (SFD).Thesecondfield(lbyte:10101011) signalsthe
beginning oftheframe.TheSFDwarnsthestationorstationsthatthisisthelast
chanceforsynchronization."
3989,"Thelast2bitsis11andalertsthereceiverthatthenext
fieldisthedestination address.SECTION 13.2STANDARD ETHERNET 399
oDestination address (DA).TheDAfieldis6bytesandcontains thephysical
addressofthedestination stationorstationstoreceivethepacket.Wewilldiscuss
addressing shortly."
3990,"oSourceaddress (SA).TheSAfieldisalso6bytesandcontains thephysical
addressofthesenderofthepacket.Wewilldiscussaddressing shortly."
3991,"oLengthortype.Thisfieldisdefinedasatypefieldorlengthfield.Theoriginal
Ethernetusedthisfieldasthetypefieldtodefinetheupper-layer protocolusingthe
MACframe.TheIEEEstandarduseditasthelengthfieldtodefinethenumberof
bytesinthedatafield.Bothusesarecommon today."
3992,oData.Thisfieldcarriesdataencapsulated fromtheupper-layer protocols.
3993,"Itisa
minimum of46andamaximum of1500bytes,aswewillseelater."
3994,"oCRC.Thelastfieldcontains errordetection information, inthiscaseaCRC-32
(seeChapter10)."
3995,"FrameLength
Ethernethasimposedrestrictions onboththeminimum andmaximum lengthsofaframe,
asshowninFigure13.5.
Figure13.5Minimum andmaximum lengths
Minimum payloadlength:46bytes
I-Maximum payloadlength:1500bytes_I
Destination Source LengthDataandpadding CRCaddress address PDU
6bytes 6bytes 2bytes 4bytes
Minimum framelength:512bitsor64bytes
MaXImum framelength.12,144bItsor1518bytes
Theminimum lengthrestriction isrequiredforthecorrectoperation ofCSMAlCD
aswewillseeshortly.AnEthernet frameneedstohaveaminimum lengthof512bits
or64bytes.Partofthislengthistheheaderandthetrailer.Ifwecount18bytesof
headerandtrailer(6bytesofsourceaddress,6bytesofdestination address,2bytesof
lengthortype,and4bytesofCRC),thentheminimum lengthofdatafromtheupper
layeris64-18=46bytes.Iftheupper-layer packetislessthan46bytes,paddingis
addedtomakeupthedifference."
3996,"Thestandarddefinesthemaximum lengthofaframe(without preamble andSFD
field)as1518bytes.Ifwesubtractthe18bytesofheaderandtrailer,themaximum
lengthofthepayloadis1500bytes.Themaximum lengthrestriction hastwohistorical
reasons.First,memory wasveryexpensive whenEthernet wasdesigned: amaximum
lengthrestriction helpedtoreducethesizeofthebuffer.Second,themaximum length
restriction prevents onestationfrommonopolizing thesharedmedium, blocking other
stationsthathavedatatosend.400 CHAPTER 13WIREDLANs:ETHERNET
Framelength:
Minimum: 64bytes(512bits) Maximum: 1518bytes(12,144bits)
Addressing
EachstationonanEthernet network(suchasaPC,workstation, orprinter)hasitsown
network interface card(NIC).TheNICfitsinsidethestationandprovides thestation
witha6-bytephysicaladdress.AsshowninFigure13.6,theEthernet addressis6bytes
(48bits),nonnally writteninhexadecimal notation, withacolonbetween thebytes."
3997,"Figure13.6ExampleofanEthernet addressinhexadecimal notation
06:01:02:01:2C:4B
6bytes=12hexdigits=48bits
Unicast,Multicast, andBroadcast Addresses Asourceaddressisalwaysaunicast
address-the framecomesfromonlyonestation.Thedestination address, however,
canbeunicast,multicast, orbroadcast."
3998,"Figure13.7showshowtodistinguish aunicast
addressfromamulticast address.Iftheleastsignificant bitofthefirstbyteinadestina­
tionaddressis0,theaddressisunicast;otherwise, itismulticast."
3999,"Figure13.7Unicastandmulticast addresses
Unicast:0;multicast: 1~;""'I¥~~~"" .&W"",.-----ByteI Byte2..."
4000,"Byte6
Theleastsignificant bitofthefirstbytedefinesthetypeofaddress."
4001,"Ifthebitis0,theaddressisunicast;otherwise, itismulticast."
4002,"Aunicastdestination addressdefinesonlyonerecipient; therelationship between
thesenderandthereceiverisone-to-one."
4003,"Amulticast destination addressdefinesagroup
ofaddresses; therelationship between thesenderandthereceivers isone-to-many."
4004,"Thebroadcast addressisaspecialcaseofthemulticast address;therecipients are
allthestationsontheLAN.Abroadcast destination addressisforty-eight Is.
Thebroadcast destination addressisaspecialcaseof
themulticast addressinwhichallbitsareIs.SECTION 13.2STANDARD ETHERNET 401
Example 13.1
Definethetypeofthefollowing destination addresses:
a.4A:30:10:21:1O:1A
b.47:20:1B:2E:08:EE
c.FF:FF:FF:FF:FF:FF
Solution
Tofindthetypeoftheaddress,weneedtolookatthesecondhexadecimal digitfromtheleft.Ifit
iseven,theaddressisunicast.Ifitisodd,theaddressismulticast."
4005,"IfalldigitsareF's,theaddress
isbroadcast."
4006,"Therefore, wehavethefollowing:
a.ThisisaunicastaddressbecauseAinbinaryis1010(even)."
4007,b.Thisisamulticast addressbecause7inbinaryis0111(odd).
4008,c.Thisisabroadcast addressbecausealldigitsareF's.
4009,"Thewaytheaddresses aresentoutonlineisdifferent fromthewaytheyarewritten
inhexadecimal notation."
4010,"Thetransmission isleft-to-right, bytebybyte;however, for
eachbyte,theleastsignificant bitissentfirstandthemostsignificant bitissentlast."
4011,"Thismeansthatthebitthatdefinesanaddressasunicastormulticast arrivesfirstatthe
receIver."
4012,"Example 13.2
Showhowtheaddress47:20:1B:2E:08:EE issentoutonline."
4013,"Solution
Theaddressissentleft-to-right, bytebybyte;for eachbyte,itissentright-to-Ieft, bitbybit,as
shownbelow:
~11100010 00000100 11011000 01110100 00010000 01110111
AccessMethod: CSMAICD
Standard Ethernet usesI-persistent CSMAlCD (seeChapter 12)."
4014,"SlotTimeInanEthernet network, theround-trip timerequired foraframetotravel
fromoneendofamaximum-length network totheotherplusthetimeneededtosend
thejamsequence iscalledtheslottime."
4015,"Slottime=round-trip time+timerequired tosendthejamsequence
TheslottimeinEthernet isdefinedinbits.Itisthetimerequired forastationto
send512bits.Thismeansthattheactualslottimedepends onthedatarate;fortradi­
tional10-MbpsEthernet itis51.2I1s."
4016,SlotTimeandCollision Thechoiceofa512-bitslottimewasnotaccidental.
4017,"Itwas
chosentoallowtheproperfunctioning ofCSMAlCD."
4018,"Tounderstand thesituation, let
usconsider twocases."
4019,"Inthefirstcase,weassumethatthesendersendsaminimum-size packetof512bits."
4020,"Beforethesendercansendtheentirepacketout,thesignaltravelsthroughthenetwork402CHAPTER 13WIREDLANs:ETHERNET
andreachestheendofthenetwork.Ifthereisanothersignalattheendofthenetwork
(worstcase),acollision occurs.Thesenderhastheopportunity toabortthesendingof
theframeandtosenda jamsequence toinformotherstationsofthecollision."
4021,"The
round-trip timeplusthetimerequiredtosendthejamsequence shouldbelessthanthe
timeneededforthesendertosendtheminimum frame,512bits.Thesenderneedsto
beawareofthecollision beforeitistoolate,thatis,beforeithassenttheentireframe."
4022,"Inthesecondcase,thesendersendsaframelargerthantheminimum size
(between 512and1518bits).Inthiscase,ifthestationhassentoutthefirst512bitsand
hasnotheardacollision, itisguaranteed thatcollision willneveroccurduringthe
transmission ofthisframe.Thereasonisthatthesignalwillreachtheendofthenet­
workinlessthanone-half theslottime.IfallstationsfollowtheCSMA/CD protocol,
theyhavealreadysensedtheexistence ofthesignal(carrier) onthelineandhave
refrained fromsending.Iftheysentasignalonthelinebeforeone-half oftheslottime
expired, acollision hasoccurred andthesenderhassensedthecollision."
4023,"Inother
words,collision canonlyoccurduringthefirsthalfoftheslottime,andifitdoes,itcan
besensedbythesenderduringtheslottime.Thismeansthatafterthesendersendsthe
first512bits,itisguaranteed thatcollision willnotoccurduringthetransmission of
thisframe.Themediumbelongstothesender,andnootherstationwilluseit.Inother
words,thesenderneedstolistenforacollision onlyduringthetimethefirst512bits
aresent."
4024,"Ofcourse,alltheseassumptions areinvalidifastationdoesnotfollowtheCSMAlCD
protocol."
4025,"Inthiscase,wedonothaveacollision, wehaveacorrupted station."
4026,"SlotTimeandMaximum Network Length Thereisarelationship between theslot
timeandthemaximum lengthofthenetwork(collision domain)."
4027,"Itisdependent onthe
propagation speedofthesignalintheparticular medium."
4028,"Inmosttransmission media,
thesignalpropagates at2x108rnls(two-thirds oftherateforpropagation inair).For
traditional Ethernet, wecalculate
MaxLength :::::PropagationSpeedx SlotTime
2
MaxLength:::; (2xto8)X(5L2X10-6(2)=5120m
Ofcourse,weneedtoconsider thedelaytimesinrepeaters andinterfaces, andthe
timerequired tosendthejamsequence."
4029,"Thesereducethemaximum-length ofatradi­
tionalEthernet networkto2500m,just48percentofthetheoretical calculation."
4030,"MaxLength=2500ill
Physical Layer
TheStandard Ethernet definesseveralphysical layerimplementations; fourofthemost
common, areshowninFigure13.8.
Encoding andDecoding
Allstandardimplementations usedigitalsignaling (baseband) at10Mbps.Atthesender,
dataareconverted toadigitalsignalusingtheManchester scheme;atthereceiver, theSECTION 13.2STANDARD ETHERNET 403
Figure13.8Categories ofStandard Ethernet
Standard Ethernet
common
implementations
Rus."
4031,"Bus,
thickcoaxial thincoaxialStar,
UTPStar,
fiber
Transceiver cable
maximum 50mreceivedsignalisinterpreted asManchester anddecodedintodata.AswesawinChapter4,
Manchester encoding isself-synchronous, providing atransition ateachbitinterval."
4032,Figure13.9showstheencoding schemeforStandard Ethernet.
4033,"Figure13.9Encoding inaStandard Ethernet implementation
10Mbpsdata 10Mbpsdata
t t
Manchester Manchester
encoder decoder
StationI I
I
I I
Twistedpairsorfibers
lOBase5: ThickEthernet
Thefirstimplementation iscalled10BaseS, thickEthernet, orThicknet."
4034,"Thenick­
namederivesfromthesizeofthecable,whichisroughlythesizeofagardenhose
andtoostifftobendwithyourhands.lOBaseS wasthefirstEthernet specification to
useabustopology withanexternaltransceiver (transmitter/receiver) connected viaa
taptoathickcoaxialcable.Figure13.10showsaschematic diagram ofalOBase5
implementation."
4035,"Figure13.10 IOBase5 implementation
gOBf4l
10Mbps 500m
Baseband Cable Cable
(digital) end
1f;;=.~=.~===h·;;;;k==·====4""'=""''''';;;;jI endTransceiver TICcoaXialcable
maximum 500m404 CHAPTER 13WIREDLANs:ETHERNET
Thetransceiver isresponsible fortransmitting, receiving, anddetecting collisions."
4036,"Thetransceiver isconnected tothestationviaatransceiver cablethatprovides sepa­
ratepathsforsendingandreceiving."
4037,"Thismeansthatcollision canonlyhappeninthe
coaxialcable."
4038,"Themaximum lengthofthecoaxialcablemustnotexceed500m,otherwise, there
isexcessive degradation ofthesignal.Ifalengthofmorethan500misneeded,upto
fivesegments, eachamaximum ofSOO-meter, canbeconnected usingrepeaters."
4039,Repeaters willbediscussed inChapter15.
4040,"10Base2: ThinEthernet
Thesecondimplementation iscalledlOBase2, thinEthernet, orCheapernet."
4041,"IOBase2
alsousesabustopology, butthecableismuchthinnerandmoreflexible.Thecablecan
bebenttopassveryclosetothestations.Inthiscase,thetransceiver isnormally partof
thenetwork interface card(NIC),whichisinstalled insidethestation.Figure13.11
showstheschematic diagramofaIOBase2implementation."
4042,"Figure13.11lOBase2 implementation
gOBa~
10Mbps 185m~
Baseband
(digital)Cable
end
Thincoaxialcable,
maximum 185m
Notethatthecollision hereoccursinthethincoaxialcable.Thisimplementation is
morecosteffective than10BaseSbecausethincoaxialcableislessexpensive thanthick
coaxialandtheteeconnections aremuchcheaperthantaps.Installation issimpler
becausethethincoaxialcableisveryflexible."
4043,"However, thelengthofeachsegment
cannotexceed185m(closeto200m)duetothehighlevelofattenuation inthincoaxial
cable."
4044,"lOBase-T: Twisted-Pair Ethernet
Thethirdimplementation iscalledlOBase-Tortwisted-pair Ethernet."
4045,"1OBase-Tuses
aphysical startopology."
4046,"Thestationsareconnected toahubviatwopairsoftwisted
cable,asshowninFigure13.12."
4047,"Notethattwopairsoftwistedcablecreatetwopaths(oneforsendingandonefor
receiving) between thestationandthehub.Anycollision herehappens inthehub."
4048,"Compared tolOBaseSorlOBase2, wecanseethatthehubactuallyreplacesthecoaxialSECTION 13.2STANDARD ETHERNET 405
Figure13.12IOBase-T implementation
~OBr'Q10Mbps Twistedpair
Baseband
(digital)i
I~I
miTwopairsof
~ ~UTPcable
I[Q][QJ...~I
lOBase-Thub
cableasfarasacollision isconcerned."
4049,"Themaximum lengthofthetwistedcablehere
isdefinedas100m,tominimize theeffectofattenuation inthetwistedcable."
4050,"lOBase-F: FiberEthernet
Although thereareseveraltypesofopticalfiberlO-Mbps Ethernet, themostcommon is
called10Base-F."
4051,"lOBase-F usesastartopology toconnectstationstoahub.Thestations
areconnected tothehubusingtwofiber-optic cables,asshowninFigure13.13."
4052,"Figure13.13IOBase-F implementation
~OBr~]0Mbps Fiber
Baseband
(digital)
lOBase-F hubTwofiber-optic
cables
Summary
Table13.1showsasummary ofStandard Ethernet implementations."
4053,"Table13.1Summary ofStandard Ethernet implementations
Characteristics lOBase5 lOBase2 lOBase-T IOBase-F
Media Thick Thin 2UTP 2Fiber
coaxialcable coaxialcable
Maximum length 500m 185m 100m 2000m
Lineencoding Manchester Manchester Manchester Manchester406 CHAPTER 13WIREDLANs:ETHERNET
13.3CHANGES INTHESTANDARD
The10-MbpsStandard Ethernet hasgonethroughseveralchangesbeforemovingtothe
higherdatarates.Thesechangesactuallyopenedtheroadtotheevolution oftheEthernet
tobecomecompatible withotherhigh-data-rate LANs.Wediscusssomeofthesechanges
inthissection."
4054,"BridgedEthernet
ThefirststepintheEthernet evolution wasthedivisionofaLANbybridges."
4055,"Bridges
havetwoeffectsonanEthernet LAN:Theyraisethebandwidth andtheyseparatecolli­
siondomains."
4056,WediscussbridgesinChapter15.
4057,"RaisingtheBandwidth
Inanunbridged Ethernet network, thetotalcapacity (10Mbps)issharedamongallsta­
tionswithaframetosend;thestationssharethebandwidth ofthenetwork."
4058,"Ifonlyone
stationhasframestosend,itbenefitsfromthetotalcapacity (10Mbps).Butifmore
thanonestationneedstousethenetwork, thecapacity isshared.Forexample, iftwo
stationshavealotofframestosend,theyprobably alternate inusage.Whenonestation
issending, theotheronerefrainsfromsending."
4059,"Wecansaythat,inthiscase,eachsta­
tiononaverage,sendsatarateof5Mbps.Figure13.14showsthesituation."
4060,"Figure13.14 Sharingbandwidth
Rate
One One One One
frameframe frame frame10Mbps-r--r---
5Mbps---------- -..."
4061,"TimeRate
10Mbps
5MbpsOne One One One
frame frame frame frame
Time
a.Firststation b.Secondstation
Thebridge,aswewilllearninChapter15,canhelphere.Abridgedividesthenet­
workintotwoormorenetworks."
4062,"Bandwidth-wise, eachnetwork isindependent."
4063,"For
example, inFigure13.15,anetworkwith12stationsisdividedintotwonetworks, each
with6stations.Noweachnetworkhasacapacityof10Mbps.ThelO-Mbps capacityin
eachsegmentisnowsharedbetween 6stations(actually 7becausethebridgeactsasa
stationineachsegment), not12stations.Inanetworkwithaheavyload,eachstation
theoretically isoffered10/6Mbpsinsteadof10/12Mbps,assuming thatthetrafficis
notgoingthroughthebridge."
4064,"Itisobviousthatifwefurtherdividethenetwork, wecangainmorebandwidth for
eachsegment."
4065,"Forexample, ifweuseafour-port bridge,eachstationisnowoffered
10/3Mbps,whichis4timesmorethananunbridged network.SECTION 13.3CHANGES INTHESTANDARD 407
Figure13.15 Anetworkwithandwithoutabridge
a.Without bridging
b.Withbridging
Separating Collision Domains
Anotheradvantage ofabridgeistheseparation ofthecollision domain."
4066,"Figure13.16
showsthecollision domains foranunbridged andabridgednetwork."
4067,"Youcanseethat
thecollision domainbecomes muchsmallerandtheprobability ofcollision isreduced
tremendously."
4068,"Withoutbridging, 12stationscontendforaccesstothemedium; with
bridgingonly3stationscontendforaccesstothemedium."
4069,"Figure13.16 Collision domains inanunbridged networkandabridgednetwork
Domain
r---~----------~-~-~------------~--~------------------ --------~----------------------------
a.Without bridging
Domain Domain
Domain---------------------,,I,
'aaa', ,, ,
1""""""""'-:' =-:."
4070,=-:.
4071,"1
~ .1
I
'aaa:, , I, ,
1=-1.;; =........=""'"""": 1
~ ~ 1Domain
l--------------~~----J, ,
i-~-a-~-!1--------------------1, ,
:~""a~:, ,1"""""",, =_ I
:_---~~-~- -~--- -~-_:
b.Withbridging
Switched Ethernet
TheideaofabridgedLANcanbeextended toaswitched LAN.Insteadofhavingtwo
tofournetworks, whynothaveNnetworks, whereNisthenumberofstationsonthe
LAN?Inotherwords,ifwecanhaveamultiple-port bridge,whynothaveanN-port408CHAPTER 13WIREDIANs:ETHERNET
switch?Inthisway,thebandwidth issharedonlybetween thestationandtheswitch
(5Mbpseach).Inaddition, thecollision domainisdividedintoNdomains."
4072,"Alayer2switchisanN-portbridgewithadditional sophistication thatallowsfaster
handling ofthepackets.Evolution fromabridgedEthernettoaswitched Ethernet was
abigstepthatopenedthewaytoanevenfasterEthernet, aswewillsee.Figure13.17
showsaswitched LAN."
4073,"Figure13.17 Switched Ethernet
,-\, ---Domain.._--
DomainDomain--,'-....."
4074,"\, , -,-Domain: riiI-""i:-:r----~-+--El C3--I-~--____,,-~- :Domain
, --==""""'''''- --_ I\~~-~- --~__'
Full-Duplex Ethernet
Oneofthelimitations of10Base5 andlOBase2 isthatcommunication ishalf-duplex
(lOBase-T isalwaysfull-duplex); astationcaneithersendorreceive,butmaynotdoboth
atthesametime.Thenextstepintheevolution wastomovefromswitched Ethernet to
full-duplex switched Ethernet."
4075,"Thefull-duplex modeincreases thecapacityofeach
domainfrom10to20Mbps.Figure13.18showsaswitched Ethernet infull-duplex
mode.Notethatinsteadofusingonelinkbetweenthestationandtheswitch,thecon­
figuration usestwolinks:onetotransmitandonetoreceive."
4076,"Figure13.18 Full-duplex switched Ethernet
Switch
~-E-I(_T_ra_ns_m_it_·_1II_ Trno,mit •~_~ Receive Receive~~
Iflf~0~>
a
NoNeedfor CSMAICD
Infull-duplex switched Ethernet, thereisnoneedfortheCSMAICD method.Inafull­
duplexswitched Ethernet, eachstationisconnected totheswitchviatwoseparatelinks.SECTION 13.4FASTETHERNET 409
Eachstationorswitchcansendandreceiveindependently withoutworrying aboutcol­
lision.Eachlinkisapoint-to-point dedicated pathbetween thestationandtheswitch."
4077,"Thereisnolongeraneedforcarriersensing; thereisnolongeraneedforcollision
detection."
4078,"ThejoboftheMAClayerbecomes mucheasier.Thecarriersensingandcol­
lisiondetection functionalities oftheMACsublayer canbeturnedoff."
4079,"MACControlLayer
Standard Ethernet wasdesigned asaconnectionless protocol attheMACsublayer."
4080,"Thereisnoexplicitflowcontrolorerrorcontroltoinformthesenderthattheframehas
arrivedatthedestination withouterror.Whenthereceiverreceivestheframe,itdoes
notsendanypositiveornegative acknowledgment."
4081,"Toprovideforflowanderrorcontrolinfull-duplex switched Ethernet, anew
sublayer, calledtheMACcontrol,isaddedbetween theLLCsublayer andtheMAC
sublayer."
4082,"13.4FASTETHERNET
FastEthernet wasdesigned tocompete withLANprotocols suchasFDDIorFiber
Channel(orFibreChannel, asitissometimes spelled).IEEEcreatedFastEthernetunder
thename802.3u.FastEthernet isbackward-compatible withStandard Ethernet, butit
cantransmitdata10timesfasteratarateof100Mbps.ThegoalsofFastEthernetcanbe
summarized asfollows:
1.Upgrade thedatarateto100Mbps."
4083,2.Makeitcompatible withStandard Ethernet.
4084,3.Keepthesame48-bitaddress.
4085,4.Keepthesameframeformat.
4086,5.Keepthesameminimum andmaximum framelengths.
4087,"MACSublayer
Amainconsideration intheevolution ofEthernet from10to100Mbpswastokeepthe
MACsublayer untouched."
4088,"However, adecision wasmadetodropthebustopologies
andkeeponlythestartopology."
4089,"Forthestartopology, therearetwochoices,aswesaw
before:halfduplexandfullduplex.Inthehalf-duplex approach, thestationsarecon­
nectedviaahub;inthefull-duplex approach, theconnection ismadeviaaswitchwith
buffersateachport."
4090,"Theaccessmethodisthesame(CSMAlCD) forthehalf-duplex approach; forfull­
duplexFastEthernet, thereisnoneedforCSMAlCD."
4091,"However, theimplementations
keepCSMA/CD forbackward compatibility withStandard Ethernet."
4092,"Autonegotiatioll
AnewfeatureaddedtoFastEthernet iscalledautonegotiation."
4093,"Itallowsastationora
hubarangeofcapabilities."
4094,"Autonegotiation allowstwodevicestonegotiate themode410CHAPTER 13WIREDLANs:ETHERNET
ordatarateofoperation."
4095,"Itwasdesigned particularly forthefollowing purposes:
oToallowincompatible devicestoconnecttooneanother.Forexample, adevicewith
amaximum capacityof10Mbpscancommunicate withadevicewitha100Mbps
capacity (butcanworkatalowerrate)."
4096,oToallowonedevicetohavemultiplecapabilities.
4097,oToallowastationtocheckahub'scapabilities.
4098,"Physical Layer
ThephysicallayerinFastEthernetismorecomplicated thantheoneinStandard Ethernet."
4099,Webrieflydiscusssomefeaturesofthislayer.
4100,"Topology
FastEthernet isdesigned toconnecttwoormorestationstogether.Ifthereareonlytwo
stations, theycanbeconnected point-to-point."
4101,"Threeormorestationsneedtobecon­
nectedinastartopology withahuboraswitchatthecenter,asshowninFigure13.19."
4102,"Figure13.19FastEthernet topology
a.Point-to-point
Implementation
FastEthernet implementation atthephysicallayercanbecategorized aseithertwo-wire
orfour-wire."
4103,"Thetwo-wire implementation canbeeithercategory 5UTP(lOOBase-TX)
orfiber-optic cable(lOOBase-FX)."
4104,"Thefour-wire implementation isdesigned only
forcategory 3UTP(l00Base-T4)."
4105,SeeFigure13.20.
4106,"Figure13.20 FastEthernet implementations
Twowires
category 5UTPTwowires
fiberFourwires
category 3UTPSECTION 13.4FASTETHERNET 411
Encoding
Manchester encoding needsa200-Mbaud bandwidth foradatarateof100Mbps,which
makesitunsuitable foramedium suchastwisted-pair cable.Forthisreason,theFast
Ethernet designers soughtsomealternative encoding/decoding scheme.However,itwas
foundthatoneschemewouldnotperformequallywellforallthreeimplementations."
4107,"Therefore, threedifferent encoding schemes werechosen(seeFigure13.21)."
4108,"Figure13.21 Encoding forFastEthernet implementation
100Base-TX 100Base-FX
4x25Mbps 4x25Mbps 4x25Mbps 4x25Mbps
tStation tStation
TwoUTPcategory 5 Twofibers
100Base-T4
100Mbps
~100Mbps
t
,.....:;~~-.."
4109,"~;;;iiR/6T~~ ~,:8B.i~:a~der <~
~~:;C<~~Jl""~A .~~..."
4110,"IL.-....-~I t--------J1I
t
Station1r-
4category 3UTP
lOOBase-TX usestwopairsoftwisted-pair cable(eithercategory 5UTPorSTP)."
4111,"Forthisimplementation, theMLT-3schemewasselectedsinceithasgoodbandwidth
performance (seeChapter4).However, sinceMLT-3isnotaself-synchronous linecod­
ingscheme,4B/5Bblockcodingisusedtoprovidebitsynchronization bypreventing
theoccurrence ofalongsequence ofOsandIs(seeChapter4).Thiscreatesadatarate
of125Mbps,whichisfedintoMLT-3forencoding."
4112,"lOOBase-FX usestwopairsoffiber-optic cables.Opticalfibercaneasilyhandlehigh
bandwidth requirements byusingsimpleencoding schemes."
4113,"Thedesigners of100Base-FX
selectedtheNRZ-Iencoding scheme(seeChapter4)forthisimplementation."
4114,"However,
NRZ-Ihasabitsynchronization problemforlongsequences ofOs(orIs,basedonthe
encoding), aswesawinChapter4.Toovercome thisproblem, thedesigners used4B/5B412CHAPTER 13WIREDLANs:ETHERNET
blockencoding aswedescribed forIOOBase-TX.Theblockencoding increases thebitrate
from100to125Mbps,whichcaneasilybehandledbyfiber-optic cable."
4115,"A 1OOBase-TXnetworkcanprovideadatarateof100Mbps,butitrequirestheuseof
category5UTPorSTPcable.Thisisnotcost-efficient forbuildings thathavealreadybeen
wiredforvoice-grade twisted-pair (category 3).Anewstandard, calledlOOBase-T4, was
designed tousecategory3orhigherUTP.Theimplementation usesfourpairsofUTPfor
transmitting 100Mbps.Encoding/decoding in100Base-T4 ismorecomplicated."
4116,"Asthis
implementation usescategory 3UTP,eachtwisted-pair cannoteasilyhandlemorethan
25Mbaud.Inthisdesign,onepairswitches betweensendingandreceiving."
4117,"Threepairsof
UTPcategory3,however, canhandleonly75Mbaud(25Mbaud)each.Weneedtousean
encoding schemethatconverts100Mbpstoa75Mbaudsignal.AswesawinChapter4,
8B/6Tsatisfiesthisrequirement."
4118,"In8B/6T,eightdataelements areencoded assixsignal
elements."
4119,"Thismeansthat100Mbpsusesonly(6/8)x100Mbps,or75Mbaud."
4120,"Summary
Table13.2isasummary oftheFastEthernet implementations."
4121,"Table13.2Summary ofFastEthernet implementations
Characteristics lOOBase-TX lOOBase-FX 100Base-T4
Media Cat5UTPorSTP Fiber Cat4UTP
Numberofwires 2 2 4
Maximum length 100m 100m 100m
Blockencoding 4B/5B 4B/5B
Lineencoding MLT-3 NRZ-I 8B/6T
13.5GIGABIT ETHERNET
Theneedforanevenhigherdatarateresulted inthedesignoftheGigabitEthernet
protocol (1000Mbps).TheIEEEcommittee callstheStandard 802.3z.Thegoalsofthe
GigabitEthernet designcanbesummarized asfollows:
1.Upgrade thedatarateto1Gbps."
4122,2.Makeitcompatible withStandard orFastEthernet.
4123,3.Usethesame48-bitaddress.
4124,4.Usethesameframeformat.
4125,5.Keepthesameminimum andmaximum framelengths.
4126,6.Tosupportautonegotiation asdefinedinFastEthernet.
4127,"MACSublayer
Amainconsideration intheevolution ofEthernet wastokeeptheMAC sublayer
untouched."
4128,"However, toachieveadatarate1Gbps,thiswasnolongerpossible."
4129,"Gigabit
Ethernet hastwodistinctive approaches formediumaccess:half-duplex andfull-duplex.SECTION 13.5GIGABIT ETHERNET 413
Almostallimplementations ofGigabitEthernet followthefull-duplex approach."
4130,"How­
ever,webrieflydiscussthehalf-duplex approach toshowthatGigabitEthernet canbe
compatible withthepreviousgenerations."
4131,"Full-Duplex Mode
Infull-duplex mode,thereisacentralswitchconnected toallcomputers orother
switches."
4132,"Inthismode,eachswitchhasbuffersforeachinputportinwhichdataare
storeduntiltheyaretransmitted."
4133,"Thereisnocollision inthismode,aswediscussed
before.ThismeansthatCSMAlCD isnotused.Lackofcollision impliesthatthemax­
imumlengthofthecableisdetermined bythesignalattenuation inthecable,notbythe
collision detection process."
4134,"Inthefull-duplex modeofGigabitEthernet, thereisnocollision;
themaximum lengthofthecableisdetermined bythesignalattenuation inthecable."
4135,"Half-Duplex Mode
GigabitEthernet canalsobeusedinhalf-duplex mode,although itisrare.Inthiscase,
aswitchcanbereplaced byahub,whichactsasthecommon cableinwhichacollision
mightoccur.Thehalf-duplex approach usesCSMAlCD."
4136,"However, aswesawbefore,
themaximum lengthofthenetworkinthisapproach istotallydependent ontheminimum
framesize.Threemethods havebeendefined:traditional, carrierextension, andframe
bursting."
4137,"Traditional Inthetraditional approach, wekeeptheminimum lengthoftheframeas
intraditional Ethernet (512bits).However, becausethelengthofabitis11100shorter
inGigabitEthernet thaninlO-Mbps Ethernet, the slottimeforGigabitEthernet is
512bitsx111000JlS,whichisequalto0.512JlS.Thereducedslottimemeansthatcolli­
sionisdetected100timesearlier.Thismeansthatthemaximum lengthofthenetworkis
25m.Thislengthmaybesuitableifallthestationsareinoneroom,butitmaynoteven
belongenoughtoconnectthecomputers inonesingleoffice."
4138,"CarrierExtension Toallowforalongernetwork, weincreasetheminimum frame
length.Thecarrierextension approach definestheminimum lengthofaframeas512bytes
(4096bits).Thismeansthattheminimum lengthis8timeslonger.Thismethodforces
astationtoaddextension bits(padding) toanyframethatislessthan4096bits.Inthis
way,themaximum lengthofthenetworkcanbeincreased 8timestoalengthof200m."
4139,Thisallowsalengthof100mfromthehubtothestation.
4140,"FrameBursting Carrierextension isveryinefficient ifwehaveaseriesofshort
framestosend;eachframecarriesredundant data.Toimproveefficiency, framebursting
wasproposed."
4141,"Insteadofaddinganextension toeachframe,multiple frames aresent."
4142,"However, tomakethesemultipleframeslooklikeoneframe,paddingisaddedbetween
theframes(thesameasthatusedforthecarrierextension method)sothatthechannel
isnotidle.Inotherwords,themethoddeceives otherstationsintothinking thatavery
largeframehasbeentransmitted.414 CHAPTER 13WIREDLANs:ETHERNET
Physical Layer
ThephysicallayerinGigabitEthernet ismorecomplicated thanthatinStandard orFast
Ethernet."
4143,Webrieflydiscusssomefeaturesofthislayer.
4144,"Topology
GigabitEthernet isdesigned toconnecttwoormorestations.Ifthereareonlytwosta­
tions,theycanbeconnected point-to-point."
4145,"Threeormorestationsneedtobeconnected
inastartopology withahuboraswitchatthecenter.Anotherpossibleconfiguration is
toconnectseveralstartopologies orletastartopology bepartofanotherasshownin
Figure13.22."
4146,"Figure13.22 Topologies ofGigabitEthernet
a-a
a.Point-to-point
ffi·r~ r
="""""""":."
4147,"='"""""":."
4148,"=""""""':."
4149,"c.Twostars
d.Hierarchy ofstars
ffirj r 3
=."
4150,"roul;:;;:;]"","": =-:."
4151,"Implementation
GigabitEthernet canbecategorized aseitheratwo-wire orafour-wire implementation."
4152,"Thetwo-wire implementations usefiber-optic cable(1000Base-SX, short-wave, or
lOOOBase-LX, long-wave), orSTP(1000Base-CX)."
4153,"Thefour-wire versionusescate­
gory5twisted-pair cable(lOOOBase- T).Inotherwords,wehavefourimplementations,
asshowninFigure13.23.lOOOBase-T wasdesigned inresponse tothoseuserswhoSECTION 13.5GIGABIT ETHERNET 415
hadalreadyinstalled thiswiringforotherpurposes suchasFastEthernet ortelephone
serVIces."
4154,"Figure13.23 GigabitEthernet implementations
Two-wire Two-wire Two-wire
short-wave tiberlong-wave tiber copper(STP)Four-wire
UTP
Encoding
Figure13.24showstheencoding/decoding schemes forthefourimplementations."
4155,"Figure13.24 Encoding inGigabitEthernet implementations
IOOOBase-SX."
4156,"lOOOBase-LX, andIOOOBase-CX IOOOBase-T
4D-PAM5 decoder8x125Mbps 8x125Mbps
Station t8x125Mbps 8x125Mbps
Station
TwofibersortwoSTPs 4UTPcables
GigabitEthernet cannotusetheManchester encoding schemebecauseitinvolvesa
veryhighbandwidth (2GBaud).Thetwo-wire implementations useanNRZscheme,but
NRZdoesnotself-synchronize properly."
4157,"Tosynchronize bits,particularly atthishigh
datarate,8BIlOBblockencoding, discussed inChapter4,isused."
4158,"Thisblockencoding preventslongsequences ofOsorIsinthestream,buttheresult­
ingstreamis1.25Gbps.Notethatinthisimplementation, onewire(fiberorSTP)is
usedforsendingandoneforreceiving."
4159,"Inthefour-wire implementation itisnotpossibletohave2wiresforinputand2for
output,becauseeachwirewouldneedtocarry500Mbps,whichexceedsthecapacity
forcategory 5UTP.Asasolution, 4D-PAM5 encoding, asdiscussed inChapter4,isused
toreducethebandwidth."
4160,"Thus,allfourwiresareinvolved inbothinputandoutput;each
wirecarries250Mbps,whichisintherangeforcategory 5UTPcable_416 CHAPTER 13WIREDIANs:ETHERNET
Summary
Table13.3isasummary oftheGigabitEthernet implementations."
4161,"Table13.3Summary ofGigabitEthernet implementations
Characteristics lOOOBase-SX lOOOBase-LX lOOOBase-CX lOOOBase-T :
Media Fiber Fiber STP Cat5UTPI
Ishort-wave long-wave
Numberofwires 2 2 2 4
Maximum length 550m 5000m 25m 100m
Blockencoding 8B/lOB 8B/lOB 8B/lOB
Lineencoding NRZ NRZ NRZ 4D-PAM5
Ten-Gigabit Ethernet
TheIEEEcommittee createdTen-Gigabit Ethernet andcalleditStandard 802.3ae.The
goalsoftheTen-Gigabit Ethernet designcanbesummarized asfollows:
1.Upgrade thedatarateto10Gbps."
4162,"2.Makeitcompatible withStandard, Fast,andGigabitEthernet."
4163,3.Usethesame48-bitaddress.
4164,4.Usethesameframeformat.
4165,S.Keepthesameminimum andmaximum framelengths.
4166,"6.Allowtheinterconnection ofexistingLANsintoametropolitan areanetwork(MAN)
orawideareanetwork(WAN)."
4167,"7.MakeEthernet compatible withtechnologies suchasFrameRelayandATM(see
Chapter18)."
4168,"MACSublayer
Ten-Gigabit Ethernet operates onlyinfullduplexmodewhichmeansthereisnoneed
forcontention; CSMA/CD isnotusedinTen-Gigabit Ethernet."
4169,"Physical Layer
ThephysicallayerinTen-Gigabit Ethernetisdesigned forusingfiber-optic cableoverlong
distances."
4170,"Threeimplementations arethemostcommon: lOGBase-S, lOGBase-L, and
lOGBase-E."
4171,Table13.4showsasummary oftheTen-Gigabit Ethernetimplementaions.
4172,"Table13.4Summary ofTen-Gigabit Ethernet implementations
Characteristics lOGBase-S lOGBase-L lOGBase-E
Media Short-wave Long-wave Extended
S50-nrn 131O-nrn 1550-mrn
rnultimode singlemode singlemode
Maximum length 300m lOkm 40kmSECTION 13.8SUMMARY 417
13.6RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets [...]refertothereference listattheendofthetext."
4173,"Books
Ethernet isdiscussed inChapters 10,11,and12of[For03], Chapter5of[Kei02], Sec­
tion4.3of[Tan03], andChapters 15and16of[Sta04].[SpuOO]isabookaboutEthernet."
4174,Acomplete discussion ofGigabitEthernet canbefoundin[KCK98] and[Sau98].
4175,Chapter2of[IzzOO]hasagoodcomparison between different generations ofEthernet.
4176,"13.7KEYTERMS
1000Base-CX
1000Base-LX1000Base-SX
1000Base-T
100Base-FX
100Base-T4100Base-TX
10Base2
lOBase5
lOBase-F
10Base-T
10GBase-E
lOGBase-L
10GBase-S
autonegotiation
bridge
carrierextension
Cheapernet
collision domain
destination serviceaccesspoint(DSAP)FastEthernet
framebursting
full-duplex switched Ethernet
GigabitEthernet
hexadecimal notation
logical
linkcontrol(LLC)
mediaaccesscontrol(MAC)
network interface card(NIC)
preamble
Project802
sourceserviceaccesspoint(SSAP)
Standard Ethernet
switch
switched Ethernet
Ten-Gigabit Ethernet
thickEthernet
Thicknet
thinEthernet
transceiver
twisted-pair Ethernet
13.8SUMMARY
oEthernet isthemostwidelyusedlocalareanetworkprotocoL
oTheIEEE802.3Standard definesI-persistent CSMA/CD astheaccessmethodfor
first-generation 10-MbpsEthernet."
4177,"oThedatalinklayerofEthernet consistsoftheLLCsublayer andtheMACsublayer.418CHAPTER 13WIREDfANs:ETHERNET
oTheMACsublayer isresponsible fortheoperation oftheCSMAlCD access
methodandframing."
4178,"oEachstationonanEthernet networkhasaunique48-bitaddressimprinted onits
networkinterface card(NIC)."
4179,"oTheminimum framelengthforlO-Mbps Ethernet is64bytes;themaximum is
1518bytes."
4180,"oThecommon implementations oflO-Mbps Ethernet arelOBase5 (thickEthernet),
10Base2 (thinEthernet), lOBase-T (twisted-pair Ethernet), andlOBase-F (fiber
Ethernet)."
4181,"oThe10Base5 implementation ofEthernet usesthickcoaxialcable.lOBase2 uses
thincoaxialcable.lOBase-T usesfourtwisted-paircables thatconnecteachstation
toacommon hub.lOBase-F usesfiber-optic cable."
4182,"oAbridgecanincrease thebandwidth andseparate thecollision domains onan
Ethernet LAN."
4183,"oAswitchallowseachstationonanEthernet LANtohavetheentirecapacityofthe
networktoitself."
4184,"oFull-duplex modedoublesthecapacity ofeachdomainandremoves theneedfor
theCSMAlCD method."
4185,oFastEthernet hasadatarateof100Mbps.
4186,"oInFastEthernet, autonegotiation allowstwodevicestonegotiate themodeordata
rateofoperation."
4187,"oThecommon FastEthernetimplementations are1OOBase-TX(twopairsoftwisted­
paircable),lOOBase-FX (twofiber-optic cables),and100Base-T4 (fourpairsof
voice-grade, orhigher,twisted-pair cable)."
4188,oGigabitEthernet hasadatarateof1000Mbps.
4189,"oGigabitEthernetaccessmethodsincludehalf-duplex modeusing traditional CSMAI
CD(notcommon) andfull-duplex mode(mostpopularmethod)."
4190,"oThecommon GigabitEthernetimplementations are1000Base-SX (twoopticalfibers
andashort-wave lasersource),1000Base-LX (twoopticalfibersandalong-wave
lasersource),and1000Base-T (fourtwistedpairs)."
4191,"oThelatestEthernet standard isTen-Gigabit Ethernet thatoperatesat10Gbps.The
threecommon implementations arelOGBase-S, 10GBase-L, and10GBase-E."
4192,"These
implementations usefiber-optic cablesinfull-duplex mode."
4193,"13.9PRACTICE SET
ReviewQuestions
1.Howisthepreamble fielddifferent fromtheSFDfield?"
4194,2.WhatisthepurposeofanNIC?
4195,"3.Whatisthedifference betweenaunicast,multicast, andbroadcast address?"
4196,4.Whataretheadvantages ofdividinganEthernet LANwithabridge?
4197,"5.Whatistherelationship between aswitchandabridge?SECTION 13.9PRACTICE SET 419
6.WhyistherenoneedforCSMAlCD onafull-duplex EthernetLAN?"
4198,"7.Compare thedataratesforStandard Ethernet, FastEthernet, GigabitEthernet, and
Ten-Gigabit Ethernet."
4199,8.Whatarethecommon Standard Ethernetimplementations?
4200,9.Whatarethecommon FastEthernetimplementations?
4201,10.Whatarethecommon GigabitEthernetimplementations?
4202,11.Whatarethecommon Ten-Gigabit Ethernetimplementations?
4203,"Exercises
12.Whatisthehexadecimal equivalent ofthefollowing Ethernetaddress?"
4204,"01011010 00010001 01010101 00011000 10101010 00001111
13.HowdoestheEthernetaddresslA:2B:3CAD:5E:6F appearonthelineinbinary?"
4205,"14.IfanEthernet destination addressis07:01:02:03:04:05, whatisthetypeofthe
address(unicast,multicast, orbroadcast)?"
4206,"15.Theaddress43:7B:6C:DE: 10:00hasbeenshownasthesourceaddressinanEthernet
frame.Thereceiverhasdiscarded theframe.Why?"
4207,"16.AnEthernet MACsublayer receives42bytesofdatafromtheupperlayer.How
manybytesofpaddingmustbeaddedtothedata?"
4208,"17.AnEthernet MACsublayerreceives1510bytesofdatafromtheupperlayer.Can
thedatabeencapsulated inoneframe?Ifnot,howmanyframesneedtobesent?"
4209,Whatisthesizeofthedataineachframe?
4210,18.WhatistheratioofusefuldatatotheentirepacketforthesmallestEthernetframe?
4211,Whatistheratioforthelargestframe?
4212,"19.Suppose thelengthofalOBase5cableis2500m.Ifthespeedofpropagation ina
thickcoaxialcableis200,000,000 m!s,howlongdoesittakeforabittotravel
fromthebeginning totheendofthenetwork?"
4213,"Assumethereare10/lsdelayinthe
equipment."
4214,"20.ThedatarateoflOBase5 is10Mbps.Howlongdoesittaketocreatethesmallest
frame?Showyourcalculation.CHAPTER 14
Wireless LANs
Wireless communication isoneofthefastest-growing technologies."
4215,"Thedemandfor
connecting deviceswithouttheuseofcablesisincreasing everywhere."
4216,"Wireless LANs
canbefound on collegecampuses, inofficebuildings, andinmanypublicareas."
4217,"Inthischapter,weconcentrate ontwopromising wirelesstechnologies forLANs:
IEEE802.11wireless LANs,sometimes calledwireless Ethernet, andBluetooth, a
technology forsmallwireless LANs.Although bothprotocols needseverallayersto
operate,weconcentrate mostlyonthephysical anddatalinklayers."
4218,"14.1IEEE802.11
IEEEhasdefinedthespecifications forawireless LAN,calledIEEE802.11,which
coversthephysical anddatalinklayers."
4219,"Architecture
Thestandarddefinestwokindsofservices: thebasicserviceset(BSS)andtheextended
serviceset(ESS)."
4220,"BasicServiceSet
IEEE802.11definesthebasicserviceset(BSS)asthebuilding blockofawireless
LAN.Abasicservicesetismadeofstationary ormobilewirelessstationsandanoptional
centralbasestation,knownastheaccesspoint(AP).Figure14.1showstwosetsinthis
standard."
4221,"TheBSSwithoutanAPisastand-alone networkandcannotsenddatatootherBSSs.
Itiscalledanadhocarchitecture."
4222,"Inthisarchitecture, stationscanformanetwork
withouttheneedofanAP;theycan locate oneanotherandagreetobepartofaBSS.A
BSSwithanAPissometimes referredtoasaninfrastructure network."
4223,"ABSSwithoutanAPiscalledanadhocnetwork;
aBSSwithanAPiscalledaninfrastructure network."
4224,"421422CHAPTER 14WIRELESS LANs
Figure14.1Basicservicesets(BSSs)
APStation-------------------1&i
Station :
I
I&i
Station Station I
------------------~Infrastructure (BSSwithanAP)1-------------------I
:1h!1.., Igl..,:1 • • 1
1Station Station 1I I
I I
ir! ~iI~ ~I
IStation Station 1 l ~
Adhocnetwork (SSSwithoutanAP)BSS:Basicserviceset
AP:Accesspoint
Extended ServiceSet
Anextended serviceset(ESS)ismadeupoftwoormoreBSSswithAPs.Inthis
case,theBSSsareconnected throughadistribution system,whichisusuallyawired
LAN.Thedistribution systemconnects theAPsintheBSSs.IEEE802.11doesnot
restrictthedistribution system;itcanbeanyIEEELANsuchasanEthernet."
4225,"Notethat
theextended servicesetusestwotypesofstations: mobileandstationary."
4226,"Themobile
stationsarenormalstationsinsideaBSS.Thestationary stationsareAPstationsthat
arepartofawiredLAN.Figure14.2showsanESS."
4227,"Figure14.2Extended servicesets(ESSs)
--------ESS:Extended serviceset
BSS:Basicserviceset
AP:Accesspointr--------jc:u:w:J
/,,'-Distribution system- ""~
\.."
4228,")Serveror
Gateway
BSS BSS BSS
WhenBSSsareconnected, thestationswithinreachofoneanothercancommuni­
catewithouttheuseofanAP.However, communication between twostationsintwo
different BSSsusuallyoccursviatwoAPs.Theideaissimilartocommunication ina
cellularnetworkifweconsider eachBSStobeacellandeachAPtobeabasestation."
4229,NotethatamobilestationcanbelongtomorethanoneBSSatthesametime.
4230,"StationTypes
IEEE802.11definesthreetypesofstationsbasedontheirmobility inawirelessLAN:
no-transition, BSS·transition, andESS-transition mobility."
4231,"Astationwithno-transitionSECTION 14.1IEEE802.11 423
mobility iseitherstationary (notmoving) ormovingonlyinsideaBSS.Astationwith
BSS-transition mobility canmovefromoneBSStoanother,butthemovement iscon­
finedinsideoneESS.AstationwithESS-transition mobility canmovefromoneESSto
another.However, IEEE802.11doesnotguarantee thatcommunication iscontinuous
duringthemove."
4232,"MACSublayer
IEEE802.11definestwoMACsublayers:thedistributed coordination function (DCF)
andpointcoordination function (PCF).Figure14.3showstherelationship between the
twoMACsublayers, theLLCsublayer, andthephysical layer.Wediscussthephysical
layerimplementations laterinthechapterandwillnowconcentrate ontheMAC
sublayer."
4233,"Figure14.3MAClayersinIEEE802.11standard
Datalink
layer
MAC
sublayerPointcoordination function(PCF)
Distrilmted coordination function(DC:P)Contention
service
Physical
layer802.Ila 802.l1g
OFDM DSSS
Distributed Coordination Function
Oneofthetwoprotocols definedbyIEEEattheMACsublayeriscalledthedistributed
coordination function (DCF).DCFusesCSMAICA (asdefinedinChapter12)asthe
accessmethod.Wireless LANscannotimplement CSMAfCD forthreereasons:
I.Forcollision detection astationmustbeabletosenddataandreceivecollision
signalsatthesametime.Thiscanmeancostlystationsandincreased bandwidth
requirements."
4234,2.Collision maynotbedetectedbecauseofthehiddenstationproblem.
4235,"Wewilldiscuss
thisproblem laterinthechapter."
4236,"3.Thedistance between stationscanbegreat.Signalfadingcouldpreventastationat
oneendfromhearingacollision attheotherend."
4237,"ProcessFlowchart Figure14.4showstheprocessflowchart forCSMAICA asused
inwirelessLANs.Wewillexplainthestepsshortly."
4238,"FrameExchange TimeLineFigure14.5showstheexchange ofdataandcontrol
framesintime.424CHAPTER 14WIRELESS LANs
Figure14.4CSMAICA flowchart
Waitback-off
time
TimeIncrement
back-off
Time Time TimeSECTION 14.1IEEE802.11 425
I.Beforesendingaframe,thesourcestationsensesthemedium bychecking the
energylevelatthecarrierfrequency."
4239,a.Thechannelusesapersistence strategywithback-offuntilthechannelisidle.
4240,"b.Afterthestationisfoundtobeidle,thestationwaitsforaperiodoftimecalled
thedistributed interframe space(DIFS); thenthestationsendsacontrol
framecalledtherequesttosend(RTS)."
4241,"2.Afterreceiving theRTSandwaitingaperiodoftimecalledtheshortinterframe
space(SIFS),thedestination stationsendsacontrolframe,calledtheclearto
send(CTS),tothesourcestation.Thiscontrolframeindicates thatthedestination
stationisreadytoreceivedata."
4242,3.ThesourcestationsendsdataafterwaitinganamountoftimeequaltoSIFS.
4243,"4.Thedestination station,afterwaitinganamountoftimeequaltoSIFS,sendsan
acknowledgment toshowthattheframehasbeenreceived."
4244,"Acknowledgment is
neededinthisprotocol becausethestationdoesnothaveanymeanstocheckfor
thesuccessful arrivalofitsdataatthedestination."
4245,"Ontheotherhand,thelackof
collision inCSMAlCD isakindofindication tothesourcethatdatahavearrived."
4246,"Network Allocation Vector Howdootherstationsdefersendingtheirdataifone
stationacquires access?Inotherwords,howisthecollision avoidance aspectofthis
protocolaccomplished?"
4247,ThekeyisafeaturecalledNAV.
4248,"WhenastationsendsanRTSframe,itincludesthedurationoftimethatitneedsto
occupythechannel."
4249,"Thestationsthatareaffectedbythistransmission createatimer
calledanetwork allocation vector(NAV)thatshowshowmuchtimemustpassbefore
thesestations areallowed tocheckthechannel foridleness."
4250,"Eachtimeastation
accesses thesystemandsendsanRTSframe,otherstationsstarttheirNAV.Inother
words,eachstation,beforesensingthephysicalmediumtoseeifitisidle,firstchecks
itsNAVtoseeifithasexpired.Figure14.5showstheideaofNAV."
4251,"Collision DuringHandshaking Whathappens ifthereiscollision duringthetime
whenRTSorCTScontrolframesareintransition, oftencalledthehandshaking period?"
4252,"TwoormorestationsmaytrytosendRTSframesatthesametime.Thesecontrolframes
maycollide.However, becausethereisnomechanism forcollision detection, thesender
assumestherehasbeenacollision ifithasnotreceivedaCTSframefromthereceiver."
4253,"Theback-off strategyisemployed, andthesendertriesagain."
4254,"PointCoordination Function (PCP)
Thepointcoordination function (PCF)isanoptionalaccessmethodthatcanbeimple­
mentedinaninfrastructure network(notinan adhocnetwork).Itisimplemented ontop
oftheDCFandisusedmostlyfortime-sensitive transmission."
4255,"PCFhasacentralized, contention-free pollingaccessmethod.TheAPperforms
pollingforstationsthatarecapableofbeingpolled.Thestationsarepolledoneafter
another,sendinganydatatheyhavetotheAP."
4256,"TogiveprioritytoPCFoverDCF,anothersetofinterframe spaceshasbeen
defined:PIFSandSIFS.TheSIFSisthesameasthatinDCF,butthePIFS(PCFIFS)is
shorterthantheDIFS.Thismeansthatif,atthesametime,astationwantstouseonly
DCFandanAPwantstousePCF,theAPhaspriority.426CHAPTER 14WIRELESS LANs
DuetothepriorityofPCFoverDCF,stationsthatonlyuseDCFmaynotgain
accesstothemedium."
4257,"Topreventthis,arepetition intervalhasbeendesigned tocover
bothcontention-free (PCF)andcontention-based (DCF)traffic.Therepetition interval,
whichisrepeatedcontinuously, startswithaspecialcontrolframe,calledabeaconframe."
4258,"Whenthestationshearthebeaconframe,theystarttheirNAVforthedurationofthe
contention-free periodoftherepetition interval.Figure14.6showsanexampleofarep­
etitioninterval."
4259,"Figure14.6Exampleofrepetition interval
B:Beaconframe
CF:Contention-free
AP
&
Polled
station
&
Others&
&..Repetition interval
Contention-free Contention
PIFS SIFS~-----1----+
f--~ACK+I~
~;B ipoll•••end
Time
SIFS--
ACK+data
Time
}~~c,~~,'
DC:::NAV~,~>:,' ~',,>; ~',,
Time
Duringtherepetition interval, thePC(pointcontroller) cansendapollframe,
receivedata,sendanACK,receiveanACK,ordoanycombination ofthese(802.11
usespiggybacking)."
4260,"Attheendofthe contention-free period,thePCsendsaCFend
(contention-free end)frametoallowthecontention-based stationstousethemedium."
4261,"Fragmentation
Thewireless environment isverynoisy;acorruptframehastoberetransmitted."
4262,"The
protocol, therefore, recommends fragmentation-the divisionofalargeframeinto
smallerones.Itismoreefficienttoresendasmallframethanalargeone."
4263,"FrameFormat
TheMAClayerframeconsistsofninefields,asshowninFigure14.7.
oFramecontrol(Fe).TheFCfieldis2byteslonganddefinesthetypeofframeand
somecontrolinformation."
4264,Table14.1describes thesubfields.
4265,"Wewilldiscusseach
frametypelaterinthischapter.SECTION 14.1IEEE802.11 427
Figure14.7Frameformat
2bytes2bytes 6bytes 6bytes 6bytes 2bytes 6bytesoto2312bytes
Framebody
MoreWEPRsvd
data
2bits2bits 4bits 1bit1bit1bit1bit1bit1bit1bit1bit
Table14.1Subfields inFCfield
Field Explanation
Version Currentversionis0
Type Typeofinformation: management (00),control(01),ordata(10)
Subtype Subtypeofeachtype(seeTable14.2)
ToDS Definedlater
FromDS Definedlater
Moreflag Whensetto1,meansmorefragments
Retry Whensetto1,meansretransmitted frame
Pwrmgt Whensetto1,meansstationisinpowermanagement mode
Moredata Whensetto1,meansstationhasmoredatatosend
WEP Wiredequivalent privacy(encryption implemented)
Rsvd Reserved
DD.Inallframetypesexceptone,thisfielddefinesthedurationofthetransmission
thatisusedtosetthevalueofNAY.Inonecontrolframe,thisfielddefinestheID
oftheframe."
4266,DAddresses.
4267,"Therearefouraddressfields,each6byteslong.Themeaning ofeach
addressfielddependsonthevalueoftheToDSandFromDSsubfields andwillbe
discussed later."
4268,DSequence control.
4269,"Thisfielddefinesthesequence numberoftheframetobeused
inflowcontrol."
4270,"DFramebody.Thisfield,whichcanbebetween0 and2312bytes,containsinfor­
mationbasedonthetypeandthesubtypedefinedintheFCfield."
4271,DFCS.TheFCSfieldis4byteslongandcontainsaCRC-32errordetection sequence.
4272,"FrameTypes
AwirelessLANdefinedbyIEEE802.11hasthreecategories offrames:management
frames,controlframes,anddataframes."
4273,"Management Frames Management framesareusedfortheinitialcommunication
betweenstationsandaccesspoints.428CHAPTER 14WIRELESS LANs
ControlFrames Controlframesareusedforaccessing thechannelandacknowledg­
ingframes.Figure14.8showstheformat."
4274,"Figure14.8Controlframes
2bytes2bytes 6bytes 6bytes 4bytes~ Address1IAddress21FCS ..)
RTS2bytes2bytes 6bytes 4bytes~ Address1Ipcs:I
CTSorACK
Forcontrolframesthevalueofthetypefieldis0I;thevaluesofthesubtypefields
forframeswehavediscussed areshowninTable14.2.
Table14.2Valuesofsubfieldsincontrolframes
Subtype Meaning
1011 Requesttosend(RTS)
1100 Cleartosend(CTS)
1101 Acknowledgment (ACK)
DataFrames Dataframesareusedforcarryingdataandcontrolinformation."
4275,"Addressing Mechanism
TheIEEE802.11addressing mechanism specifiesfourcases,definedbythevalueofthe
twoflagsintheFCfield,ToDSandFromDS.Eachflagcanbeeither0orI,resulting in
fourdifferent situations."
4276,"Theinterpretation ofthefouraddresses (address Itoaddress4)
intheMACframedependsonthevalueoftheseflags,asshowninTable14.3.
Table14.3Addresses
To From Address Address Address Address
DS DS 1 2 3 4
0 0 Destination Source BSSID N/A
0 1Destination SendingAP Source N/A
1 0 Receiving APSource Destination N/A
1 1Receiving APSendingAP Destination Source
Notethataddress1isalwaystheaddressofthenextdevice.Address2isalways
theaddressoftheprevious device.Address3istheaddressofthefinaldestination sta­
tionifitisnotdefinedbyaddressI.Address 4istheaddressoftheoriginalsource
stationifitisnotthesameasaddress2."
4277,"oCase1:00Inthiscase,ToDS=0 andFromDS=O.Thismeansthattheframeis
notgoingtoadistribution system(ToDS=0)andisnotcomingfromadistributionSECTION 14.1IEEE802.11 429
system(FromDS=0).TheframeisgoingfromonestationinaBSStoanother
withoutpassingthroughthedistribution system.TheACKframeshouldbesentto
theoriginalsender.Theaddresses areshowninFigure14.9.
Figure14.9Addressing mechanisms
~ss---------------------
I BSS-ID
:,.a.~BIAdla:
:_~ ~_~_~__~ ~_J
a.Case1
[~f~-d~~~~~1i~fi~l~s~Bsi-ii
 ~--BSS
a:: 3 4a
BII A___ ~l _
c.Case3b.Case2
d.Case4
oCase2:01Inthiscase,ToDS=0andFromDS=1.Thismeansthattheframeis
comingfromadistribution system(FromDS=1).Theframeiscomingfroman
APandgoingtoastation.TheACKshouldbesenttotheAP.Theaddresses areas
showninFigure14.9.Notethataddress3contains theoriginalsenderoftheframe
(inanotherBSS)."
4278,"oCase3:10Inthiscase,ToDS=1andFromDS=O.Thismeansthattheframeis
goingtoadistribution system(ToDS=1).TheframeisgoingfromastationtoanAP."
4279,"TheACKissenttotheoriginalstation.Theaddresses areasshowninFigure14.9.
Notethataddress3containsthefinaldestination oftheframe(inanotherBSS)."
4280,"oCase4:11Inthiscase,ToDS=1andFromDS=1.TIusisthecaseinwhichthedistri­
butionsystemisalsowireless.TheframeisgoingfromoneAPtoanotherAPinawire­
lessdistribution system.Wedonotneedtodefineaddresses ifthedistribution systemis
awiredLANbecausetheframeinthesecaseshastheformatofawiredLANframe
(Ethernet, forexample)."
4281,"Here,weneedfouraddresses todefinetheoriginalsender,the
finaldestination, andtwointermediate APs.Figure14.9showsthesituation."
4282,"HiddenandExposed Station Problems
Wereferredtohiddenandexposedstationproblems intheprevious section.Itistime
nowtodicusstheseproblems andtheireffects."
4283,"HiddenStationProblem Figure14.10showsanexample ofthehiddenstation
problem."
4284,"StationBhasatransmission rangeshownbytheleftoval(sphereinspace);
everystationinthisrangecanhearanysignaltransmitted bystationB.StationChas430 CHAPTER 14WIRELESS LANs
Figure14.10Hiddenstationproblem
Range
ofB(]~
B&cRange
ofC
BandCarehiddentfromeachotherwithrespecttoA."
4285,"atransmission rangeshownbytherightoval(sphereinspace);everystationlocated
inthisrangecanhearanysignaltransmitted byC.StationCisoutsidethetransmis­
sionrangeofB;likewise, stationBisoutsidethetransmission rangeofC.StationA,
however, isintheareacoveredbybothBandC;itcanhearanysignaltransmitted by
BorC."
4286,"AssumethatstationBissendingdatatostationA.Inthemiddleofthistransmission,
stationCalsohasdatatosendtostationA.However, stationCisoutofB'srangeand
transmissions fromBcannotreachC.Therefore Cthinksthemediumisfree.StationC
sendsitsdatatoA,whichresultsinacollisionatAbecausethisstationisreceiving data
frombothBandC.Inthiscase,wesaythatstationsBandCarehiddenfromeachother
withrespecttoA.Hiddenstationscanreducethecapacityofthenetwork because ofthe
possibility ofcollision."
4287,"Thesolutiontothehiddenstationproblemistheuseofthehandshake frames(RTS
andCTS)thatwediscussed earlier.Figure14.11showsthattheRTSmessage fromB
reachesA,butnotC.However, becausebothBandCarewithintherangeofA,the
CTSmessage, whichcontainsthedurationofdatatransmission fromBtoAreachesC."
4288,"StationCknowsthatsomehiddenstationisusingthechannelandrefrainsfromtrans­
mittinguntilthatdurationisover."
4289,"TheCTSframeinCSMAICA handshake canpreventcollision
fromahiddenstation."
4290,"Figure14.11 Useofhandshaking topreventhiddenstationproblem
B A C
r
CTS CTS
Time Time TimeSECTION 14.1IEEE802.11 431
Exposed StationProblem Nowconsider asituation thatistheinverseoftheprevi­
ousone:theexposed stationproblem."
4291,"Inthisproblem astationrefrainsfromusinga
channelwhenitis,infact,available.InFigure14.12,stationAistransmitting tostationB."
4292,"StationChassomedatatosendtostationD,whichcanbesentwithoutinterfering
withthetransmission fromAtoB.However, stationCisexposed totransmission from
A;ithearswhatAissendingandthusrefrainsfromsending."
4293,"Inotherwords,Cistoo
conservative andwastesthecapacityofthechannel."
4294,"Figure14.12Exposed stationproblem
Range
ofA
-----~ -------------
Rang;---,
ofC ',a&)CD,'>
Cisexposed totransmission fromAtoB."
4295,"Thehandshaking messages RTSandCTScannothelpin thiscase,despitewhatyou
mightthink.StationChearstheRTSfromA,butdoesnotheartheCTSfromB.StationC,
afterhearingtheRTSfromA,canwaitforatimesothattheCTSfromBreachesA;itthen
sendsanRTStoDtoshowthatitneedstocommunicate withD.BothstationsBandA
mayhearthisRTS,butstationAisinthesendingstate,notthereceiving state.StationB,
however, responds withaCTS.Theproblem ishere.IfstationAhasstartedsendingits
data,stationCcannotheartheCTSfromstationDbecauseofthecollision; itcannotsend
itsdatatoD.ItremainsexposeduntilAfinishessendingitsdataasFigure14.13shows."
4296,"Figure14.13Useofhandshaking inexposedstationproblem
B
TimeA
TimeExposed to
A'stransmission
C
RTS
Collision
here
TimeD
r
Time125
MHz432CHAPTER i4WiRELESS LANs
Physical Layer
Wediscusssixspecifications, asshowninTable14.4.
Table14.4Physical layers
IEEE Technique Band Modulation Rate(Mbps)
802.11 FHSS 2.4GHz FSK 1and2
DSSS 2.4GHz PSK 1and2
Infrared PPM 1and2
802.11a OFDM 5.725GHz PSKorQAM 6to54
802.l1b DSSS 2.4GHz PSK 5.5and11
802.1Ig OFDM 2.4GHz Different 22and54
Allimplementations, excepttheinfrared, operateintheindustrial, scientific,
andmedical (ISM)band,whichdefinesthreeunlicensed bandsinthethreeranges
902-928 MHz,2.400--4.835 GHz,and5.725-5.850 GHz,asshowninFigure14.14."
4297,"Figure14.14industrial, scient(fic, andmedical(ISM)band
26 83.5
,MHz, MHz, ,~ ~I.----'JI 1:1( ""I
,"",.-----' '=.,.....--~--...,.,,'~'kV; I'~:£--:}00_."
4298,"..:,,,,:,]."
4299,"~;~~ ~~:-
<3A>,i1.""< 1...- ----l.."
4300,"I:.::;.:;.-l~--.:...~:::~-'~,L;~J '0-'.'.:...'.':.....'....:.,-""--""..:.....0."
4301,......'- ~.
4302,"9029282.4 2.4835 5.725 5.850Frequency
MHzMHzGHz GHz GHz GHz
IEEE802.11FHSS
IEEE802.11FHSSusesthefrequency-hopping spreadspectrum (FHSS)methodas
discussed inChapter6.FHSSusesthe2.4-GHz ISMband.Thebandisdividedinto
79subbands of1MHz(andsomeguardbands).Apseudorandom numbergenerator
selectsthehoppingsequence."
4303,"Themodulation technique inthisspecification iseither
two-level FSKorfour-level FSKwithIor2bitslbaud, whichresultsinadatarateof1
or2Mbps,asshowninFigure14.15."
4304,"IEEE802.11DSSS
IEEE802.11DSSSusesthedirectsequence spreadspectrum (DSSS)methodasdis­
cussedinChapter6.DSSSusesthe2.4-GHzISMband.Themodulation technique inthis
specification isPSKat1Mbaud/s."
4305,"Thesystemallows1or2bitslbaud (BPSKorQPSK),
whichresultsinadatarateof1or2Mbps,asshowninFigure14.16."
4306,"IEEE802.11Infrared
IEEE802.11infraredusesinfraredlightintherangeof800to950nm.Themodulation
technique iscalledpulseposition modulation (PPM).ForaI-Mbpsdatarate,a4-bitSECTION 14.1IEEE802.11 433
Figure14.15Physical layerofIEEE802.11FHSS
lor2MbpsModulator
Digital 2-Levelor4-1evell
data FSKI
t
Pseudorandom1-+1FrequencyIsequence synthetizer
Figure14.16Physical layerofIEEE802.11DSSS
lor2Mbps
Digital_~
dataI-MHz
Analog
signal
II-MHz
F-~~ Analog
signal
sequence isfirstmappedintoa16-bitsequence inwhichonlyonebitissetto1andthe
restaresettoO.Fora2-Mbpsdatarate,a2-bitsequence isfirstmappedintoa4-bit
sequence inwhichonlyonebitissetto1andtherestaresettoO.Themapped
sequences arethenconverted toopticalsignals;thepresence oflightspecifies 1,the
absenceoflightspecifies O.SeeFigure14.17."
4307,"Figure14.17Physical layerofIEEE802.11infrared
lor2Mbps
Digital_~
data.....,.....~Analog
signal
IEEE802.llaOFDM
IEEE802.Ila OFDMdescribes theorthogonal frequency-division multiplexing
(OFDM) methodforsignalgeneration ina5-GHzISMband.OFDMissimilarto
FDMasdiscussed inChapter6,withonemajordifference: Allthesubbands areused
byonesourceatagiventime.Sourcescontendwithoneanotheratthedatalinklayer
foraccess.Thebandisdividedinto52subbands, with48subbandsforsending48
groupsofbitsatatimeand4subbands forcontrolinformation."
4308,"Theschemeissimilar
toADSL,asdiscussed inChapter9.Dividing thebandintosubbands diminishes the
effectsofinterference."
4309,"Ifthesubbandsareusedrandomly, securitycanalsobeincreased.434CHAPTER 14WIRELESS LANs
OFDMusesPSKandQAMformodulation."
4310,"Thecommon dataratesare18Mbps(PSK)
and54Mbps(QAM)."
4311,"IEEE802.llbDSSS
IEEE802.11bDSSSdescribes thehigh-rate directsequence spreadspectrum (HR­
DSSS)methodforsignalgeneration inthe2.4-GHz ISMband.HR-DSSS issimilarto
DSSSexceptfortheencoding method,whichiscalledcomplementary codekeying
(CCK).CCKencodes4or8bitstooneCCKsymbol.Tobebackward compatible with
DSSS,HR-DSSS definesfourdatarates:1,2,5.5,and11Mbps.Thefirsttwousethe
samemodulation techniques asDSSS.The5.5-Mbps versionusesBPSKandtransmits
at1.375Mbaudls with4-bitCCKencoding."
4312,"TheII-Mbps versionusesQPSKandtrans­
mitsat1.375Mbpswith8-bitCCKencoding."
4313,"Figure14.18showsthemodulation tech­
niqueforthisstandard."
4314,"Figure14.18Physical layerofIEEE802.11b
5.5or
IIMbps
Digital_~
dataMQiiulator
QPSKll-MHz
~~ Analog
signal
IEEE802.11g
Thisnewspecification definesforwarderrorcorrection andOFDMusingthe2.4-GHz
ISMband.Themodulation technique achievesa22-or54-Mbps datarate.Itisbackward­
compatible with802.11b,butthemodulation technique isOFDM."
4315,"14.2BLUETOOTH
Bluetooth isawirelessLANtechnology designed toconnectdevicesofdifferent func­
tionssuchastelephones, notebooks, computers (desktop andlaptop),cameras, printers,
coffeemakers,andsoon.ABluetooth LANisanadhocnetwork, whichmeansthatthe
network isformedspontaneously; thedevices, sometimes calledgadgets, findeach
otherandmakeanetworkcalledapiconet.ABluetooth LANcanevenbeconnected to
theInternetifoneofthegadgetshasthiscapability."
4316,"ABluetooth LAN,bynature,can­
notbelarge.Iftherearemanygadgetsthattrytoconnect, thereischaos."
4317,Bluetooth technology hasseveralapplications.
4318,"Peripheral devicessuchasawire­
lessmouseorkeyboard cancommunicate withthecomputer throughthistechnology."
4319,Monitoring devicescancommunicate withsensordevicesinasmallhealthcarecenter.
4320,"Homesecuritydevicescanusethistechnology toconnectdifferent sensorstothemainSECTION 14.2BLUETOOTH 435
securitycontroller."
4321,"Conference attendees cansynchronize theirlaptopcomputers ata
conference."
4322,Bluetooth wasoriginally startedasaprojectbytheEricsson Company.
4323,"Itisnamed
forHaraldBlaatand, thekingofDenmark (940-981) whounitedDenmark andNorway."
4324,Blaatand translates toBluetooth inEnglish.
4325,"Today,Bluetooth technology istheimplementation ofaprotocol definedbythe
IEEE802.15standard."
4326,"Thestandard definesawirelesspersonal-area network(PAN)
operable inanareathesizeofaroomorahall."
4327,"Architecture
Bluetooth definestwotypesofnetworks: piconetandscatternet."
4328,"Piconets
ABluetooth networkiscalledapiconet,orasmallnet.Apiconetcanhaveuptoeight
stations,oneofwhichiscalledtheprimary; ttherestarecalledsecondaries."
4329,"Allthe
secondary stationssynchronize theirclocksandhopping sequence withtheprimary."
4330,"Notethatapiconetcanhaveonlyoneprimarystation.Thecommunication betweenthe
primaryandthesecondary canbeone-to-one orone-to-many."
4331,"Figure14.19showsa
piconet."
4332,"Figure14.19 Piconet
Piconet-----------------------------I
Secondary Secondary Secondary Secondary
Although apiconetcanhaveamaximum ofsevensecondaries, anadditional eight
secondaries canbeintheparkedstate.Asecondary inaparkedstateissynchronized
withtheprimary, butcannottakepartincommunication untilitismovedfromthe
parkedstate.Becauseonlyeightstationscanbeactiveinapiconet,activating astation
fromtheparkedstatemeansthatanactivestationmustgototheparkedstate."
4333,"Scat/ernet
Piconets canbecombined toformwhatiscalledascatternet."
4334,"Asecondary stationin
onepiconetcanbetheprimaryinanotherpiconet.Thisstationcanreceivemessages
tTheliterature sometimes usesthetermsmasterandslaveinsteadofprimaryandsecondary."
4335,"Wepreferthelatter.436 CHAPTER 14WIRELESS LANs
fromtheprimaryinthefirstpiconet(asasecondary) and,actingasaprimary, deliver
themtosecondaries inthesecondpiconet.Astationcanbeamemberoftwopiconets."
4336,Figure14.20illustrates ascatternet.
4337,"Figure14.20 Scatternet
Piconet
Secondary Secondary SecondaryPrimary/
SecondarySecondary
Secondary
---------------------t=========-- ~
Piconet
Bluetooth Devices
ABluetooth devicehasabuilt-inshort-range radiotransmitter."
4338,"Thecurrentdatarateis
1Mbpswitha2.4-GHz bandwidth."
4339,"Thismeansthatthereisapossibility ofinterference
betweentheIEEE802.11bwirelessLANsandBluetooth LANs.
Bluetooth Layers
Bluetooth usesseverallayersthatdonotexactlymatchthoseoftheInternetmodelwe
havedefinedinthisbook.Figure14.21showstheselayers."
4340,"Figure14.21 Bluetooth layers
Applications
IProfiles I
0
I~Ig""6
::> ~
<t:0uIL2CAPIayer I
Baseband layer
Radiolayer
RadioLayer
Theradiolayerisroughlyequivalent tothephysicallayeroftheInternetmodel.Bluetooth
devicesarelow-power andhavearangeof10m.SECTION 14.2BLUETOOTH 437
Band
Bluetooth usesa2.4-GHz ISMbanddividedinto79channels of1MHzeach."
4341,"FHSS
Bluetooth usesthefrequency-hopping spreadspectrum (FHSS)methodinthephys­
icallayertoavoidinterference fromotherdevicesorothernetworks."
4342,"Bluetooth
hops1600timespersecond,whichmeansthateachdevicechangesitsmodulation fre­
quency1600timespersecond."
4343,"A deviceusesafrequency foronly625Ils(1/1600s)
beforeithopstoanotherfrequency; thedwelltimeis625Ils."
4344,"Modulation
Totransform bitstoasignal,Bluetooth usesasophisticated versionofFSK,called
GFSK(FSKwithGaussian bandwidth filtering; adiscussion ofthistopicisbeyondthe
scopeofthisbook).GFSKhasacan'ierfrequency."
4345,"Bit1isrepresented byafrequency
deviation abovethecarrier;bitaisrepresented byafrequency deviation belowthe
carrier.Thefrequencies, inmegahertz, aredefinedaccording tothefollowing formula
foreachchannel:
fc=2402+n n=0,1,2,3,...,78
Forexample, thefirstchannelusescarrierfrequency 2402MHz(2.402GHz),andthe
secondchannelusescarrierfrequency 2403MHz(2.403GHz)."
4346,"Baseband Layer
Thebaseband layerisroughlyequivalent totheMACsublayer inLANs.Theaccess
methodisTDMA(seeChapter 12).Theprimaryandsecondary communicate with
eachotherusingtimeslots.Thelengthofatimeslotisexactlythesameasthedwell
time,625Ils.Thismeansthatduringthetimethatonefrequency isused,asendersends
aframetoasecondary, orasecondary sendsaframetotheprimary.Notethatthecom­
munication isonlybetweentheprimaryandasecondary; secondaries cannotcommuni­
catedirectlywithoneanother."
4347,"TDMA
Bluetooth usesaformofTDMA(seeChapter12)thatiscalledTDD-TDMA (time­
division duplexTDMA)."
4348,"TDD-TDMA isakindofhalf-duplex communication in
whichthesecondary andreceiversendandreceivedata,butnotatthesametime(half­
duplex); however, thecommunication foreachdirection usesdifferent hops.Thisis
similartowalkie-talkies usingdifferentcarrierfrequencies."
4349,"Single-Secondary Communication Ifthepiconethasonlyonesecondary, theTDMA
operation isverysimple.Thetimeisdividedintoslotsof625Ils.Theprimaryuseseven­
numbered slots(0,2,4,...);thesecondary usesodd-numbered slots(1,3,5,...)."
4350,"TDD-TDMAallowstheprimaryandthesecondary tocommunicate inhalf-duplex mode.fO438 CHAPTER 14WIRELESS LANs
Inslot0,theprimarysends,andthesecondary receives;inslot1,thesecondary sends,and
theprimaryreceives.Thecycleisrepeated."
4351,Figure14.22showstheconcept.
4352,"Figure14.22 Single-secondary communication
I625Jls I
i' ~i
I, .1 I
:366JlsI: I I
r-rr---:----i HopI r-rr---l Hop:
Primary
 -+LL---JL...----;i--------lI-LL-----JL...----+,------+---l.~
lit1 I Time
,I:
ii,
Secondary
~----_crr=J_H_O_P--l:----~OCJ_H-O-p_+i ---l'~
I I I ITime
Ifl!f2!f3!
Multiple-Secondary Communication Theprocessisalittlemoreinvolved ifthereis
morethanonesecondary inthepiconet.Again,theprimaryusestheeven-numbered slots,
butasecondary sendsinthenextodd-numbered slotifthepacketintheprevious slotwas
addressed toit.Allsecondaries listenoneven-numbered slots,butonlyonesecondary
sendsinanyodd-numbered slot.Figure14.23showsascenario."
4353,"Figure14.23 Multiple-secondary communication
I I I I-OCJHOP:CIT=] Hop!•Primary I
jI
1ITime
I I
I I
I I
I I
I I
I I
I II
Hop I
Secondary 1I
ITime
II
I
I
I
II
Secondary 2 trr=JHOp• I
If3Time
fO fl f2 J
Letuselaborate onthefigure."
4354,"1.Inslot0,theprimarysendsaframetosecondary 1."
4355,"2.Inslot1,onlysecondary Isendsaframetotheprimarybecausetheprevious frame
wasaddressed tosecondary 1;othersecondaries aresilent.SECTION 14.2BLUETOOTH 439
3.Inslot2,theprimarysendsaframetosecondary 2."
4356,"4.Inslot3,onlysecondary 2sendsaframetotheprimarybecausetheprevious frame
wasaddressed tosecondary 2;othersecondaries aresilent."
4357,5.Thecyclecontinues.
4358,Wecansaythatthisaccessmethodissimilartoapoll/select operation withreservations.
4359,"Whentheprimaryselectsasecondary, italsopollsit.Thenexttimeslotisreserved for
thepolledstationtosenditsframe.Ifthepolledsecondary hasnoframetosend,the
channelissilent."
4360,"Physical Links
Twotypesoflinkscanbecreatedbetween aprimaryandasecondary: SCQlinksand
ACLlinks."
4361,"scaAsynchronous connection-oriented (SeQ)linkisusedwhenavoiding latency
(delayindatadelivery) ismoreimportant thanintegrity (error-free delivery)."
4362,"Inan
SCQlink,aphysicallinkiscreatedbetweentheprimaryandasecondary byreserving
specificslotsatregularintervals."
4363,"Thebasicunitofconnection istwoslots,oneforeach
direction."
4364,"Ifapacketisdamaged, itisneverretransmitted."
4365,"SCQisusedforreal-time
audiowhereavoiding delayisall-important."
4366,"Asecondary cancreateuptothreeSCQ
linkswiththeprimary, sendingdigitized audio (PCM) at64kbpsineachlink."
4367,"ACLAnasynchronous connectionless link(ACL)isusedwhendataintegrity is
moreimportant thanavoiding latency.Inthistypeoflink,ifapayload encapsulated
intheframeiscorrupted, itisretransmitted."
4368,"Asecondary returnsanACLframein
theavailable odd-numbered slotifandonlyiftheprevious slothasbeenaddressed
toit.ACLcanuseone,three,ormoreslotsandcanachieveamaximum datarateof
721kbps."
4369,"FrameFormat
Aframeinthebaseband layercanbeoneofthreetypes:one-slot, three-slot, orfive-slot."
4370,"Aslot,aswesaidbefore,is625~s.However, inaone-slotframeexchange, 259~sis
neededforhoppingandcontrolmechanisms."
4371,"Thismeansthataone-slotframecanlast
only625-259,or366~s.WithaI-MHzbandwidth and1bit/Hz,thesizeofaone-slot
frameis366bits."
4372,"Athree-slot frameoccupies threeslots.However, since 259 ~sisusedforhopping,
thelengthoftheframeis3 x625-259=1616 ~sor1616bits.Adevicethatusesa
three-slot frameremainsatthesamehop(atthesamecarrierfrequency) forthreeslots."
4373,"Evcnthoughonlyonchopnumbcrisused,threehopnumbers areconsumed."
4374,"Thatmeans
thehopnumberforeachframeisequaltothefirstslotoftheframe."
4375,"Afive-slotframealsouses259bitsforhopping, whichmeansthatthelengthofthe
frameis5 x625-259=2866bits."
4376,Figure14.24showstheformatofthethreeframetypes.
4377,"Thefollowing describes eachfield:
oAccesscode.This72-bitfieldnormally contains synchronization bitsandthe
identifier oftheprimarytodistinguish theframeofonepiconetfromanother.440CHAPTER 14WIRELESS LANs
Figure14.24Framefannat types
72bits 54bits otoNbits
••__....N=240forI-sIalframe
N=1490for3-slotframe
'-3-bi-ts..l..-4-bl-·ls....l...l.......l....-S-b-it-s--N=2740for5-slotframe
ThisIS-bitpartisrepeated3times."
4378,:JHeader.
4379,"This54-bitfieldisarepeated I8-bitpattern.Eachpatternhasthefollow­
ingsubfields:
1.Address."
4380,The3-bitaddresssubfieldcandefineuptosevensecondaries (lto7).
4381,"Iftheaddressiszero,itisusedforbroadcast communication fromtheprimary
toallsecondaries."
4382,"2.Type.The4-bittypesubfielddefinesthetypeofdatacomingfromtheupper
layers.Wediscussthesetypeslater."
4383,"3.F.ThisI-bitsubfieldisforflowcontrol.Whenset(I),itindicates thatthe device
isunabletoreceivemoreframes(bufferisfull)."
4384,4.A.ThisI-bitsubfield isforacknowledgment.
4385,"Bluetooth usesStop-and- Wait
ARQ;Ibitissufficient foracknowledgment."
4386,"5.S.ThisI-bitsubfieldholdsasequence number.Bluetooth usesStop-and-Wait
ARQ;Ibitissufficient forsequence numbering."
4387,"6.HEC.The8-bitheadererrorcorrection subfieldisachecksum todetecterrors
ineach18-bitheadersection."
4388,Theheaderhasthreeidentical 18-bitsections.
4389,"Thereceivercompares thesethree
sections, bitbybit.Ifeachofthecorresponding bitsisthesame,thebitisaccepted;
ifnot,themajority opinionrules.Thisisaformofforwarderrorcorrection (forthe
headeronly).Thisdoubleerrorcontrolisneededbecausethenatureofthecommu­
nication, viaair,isverynoisy.Notethatthereisnoretransmission inthissublayer."
4390,oPayload.
4391,"Thissubfieldcanbe0to2740bitslong.Itcontains dataorcontrol
information corningfromtheupperlayers."
4392,"L2CAP
TheLogicalLinkControlandAdaptation Protocol, orL2CAP(L2heremeansLL),
isroughlyequivalent totheLLCsublayerinLANs.Itisusedfordataexchange onan
ACLlink;SCQchannels donotuseL2CAP.Figure14.25showstheformatofthedata
packetatthislevel."
4393,"TheI6-bitlengthfielddefinesthesizeofthedata,inbytes,comingfromtheupper
layers.Datacanbeupto65,535bytes.ThechannelID(CID)definesauniqueidenti­
fierforthevirtualchannelcreatedatthislevel(seebelow)."
4394,"TheL2CAPhasspecificduties:multiplexing, segmentation andreassembly, quality
ofservice(QoS),andgroupmanagement.SECTION 14.3RECOMMENDED READING 441
Figure14.25L2CAPdatapacketfarmat
2bytes 2bytes 0to65,535bytes
Length IChannelID1 D_at_a_an_d_co_n_tro_l _
Multiplexing
TheL2CAPcandomultiplexing."
4395,"Atthesendersite,itacceptsdatafromoneofthe
upper-layer protocols, framesthem,anddeliversthemtothebaseband layer.Atthe
receiversite,itacceptsaframefromthebaseband layer,extractsthedata,anddelivers
themtotheappropriate protocol layer.Itcreatesakindofvirtualchannelthatwewill
discussinlaterchapters on higher-level protocols."
4396,"Segmentation andReassembly
Themaximum sizeofthepayloadfieldinthebaseband layeris2774bits,or343bytes."
4397,"Thisincludes 4bytestodefinethepacketandpacketlength.Therefore, thesizeofthe
packetthatcanarrivefromanupperlayercanonlybe339bytes.However, application
layerssometimes needtosendadatapacketthatcanbeupto65,535bytes(anInternet
packet,forexample)."
4398,"TheL2CAPdividestheselargepacketsintosegments andadds
extrainformation todefinethelocationofthesegments intheoriginalpacket.The
L2CAPsegments thepacketatthesourceandreassembles thematthedestination."
4399,"QoS
Bluetooth allowsthestationstodefineaquality-of-service level.Wediscussqualityof
serviceinChapter24.Forthemoment, itissufficient toknowthatifnoquality-of-service
levelisdefined,Bluetooth defaultstowhatiscalledbest-effort service;itwilldoitsbest
underthecircumstances."
4400,"GroupManagement
Anotherfunctionality ofL2CAPistoallowdevicestocreateatypeoflogicaladdressing
betweenthemselves."
4401,Thisissimilartomulticasting.
4402,"Forexample, twoorthreesecondary
devicescanbepartofamulticast grouptoreceivedatafromtheprimary."
4403,"OtherUpperLayers
Bluetooth definesseveralprotocols fortheupperlayersthatusetheservicesofL2CAP;
theseprotocols arespecificforeachpurpose."
4404,"14.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollow­
ingbooksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext.442CHAPTER 14WIRELESS LANs
Books
Wireless LANsandBluetooth arediscussed inseveralbooksincluding [Sch03]and
[Gas02]."
4405,"Wireless LANsarediscussed inChapter 15of[For03],Chapter17of[Sta04],
Chapters 13and14of[Sta02],andChapter8of[Kei021."
4406,"Bluetooth isdiscussed in
Chapter 15of[Sta02]andChapter15of[For03]."
4407,"14.4KEYTERMS
accesspoint(AP)
asynchronous connectionless link
(ACL)
basicserviceset(BSS)
beaconframe
Bluetooth
BSS-transition mobility
complementary codekeying(CCK)
directsequence spreadspectrum (OSSS)
distributed coordination function (OCF)
distributed interframe space(OIFS)
ESS-transition mobility
extended serviceset(ESS)
frequency-hopping spreadspectrum
(FHSS)
handshaking period
high-rate directsequence spreadspectrum
(HR-OSSS)
IEEE802.11LogicalLinkControlandAdaptation
Protocol (L2CAP)
networkallocation vector(NAV)
no-transition mobility
orthogonal frequency-division
multiplexing (OFOM)
piconet
pointcoordination function(PCF)
primary
pulsepositionmodulation (PPM)
repetition interval
scatternet
secondary
shortinterframe space(SIFS)
synchronous connection -oriented
(SCO)
TDD-TOMA(time-division duplex
TOMA)
wirelessLAN
14.5SUMMARY
oTheIEEE802.11standard forwireless LANsdefinestwoservices: basicservice
set(BSS)andextended serviceset(ESS)."
4408,"oTheaccessmethodusedinthedistributed coordination function (OCF)MACsub­
layerisCSMAICA."
4409,"oTheaccessmethodusedinthepointcoordination function (PCF)MACsublayer is
polling."
4410,oThenetworkallocation vector(NAV)isatimerusedforcollision avoidance.
4411,"oTheMAClayerframehasninefields.Theaddressing mechanism canincludeupto
fouraddresses."
4412,"oWireless LANsusemanagement frames,controlframes,anddataframes.SECTION 14.6PRACTICE SET 443
oIEEE802.11definesseveralphysicallayers,with different dataratesandmodulating
techniques."
4413,"oBluetooth isawirelessLANtechnology thatconnects devices(calledgadgets) ina
smallarea."
4414,"oABluetooth networkiscalledapiconet.Multiple piconets fonnanetworkcalleda
scatternet."
4415,"oABluetooth network consistsofoneprimary deviceanduptosevensecondary
devices."
4416,"14.6PRACTICE SET
ReviewQuestions
1.Whatisthedifference between aBSSandanESS?"
4417,2.Discussthethreetypesofmobility inawirelessLAN.
4418,3.HowisOFDMdifferent fromFDM?
4419,4.Whatistheaccessmethodusedbywireless LANs?
4420,5.WhatisthepurposeoftheNAV?
4421,6.Compare apiconetandascatternet.
4422,7.MatchthelayersinBluetooth andtheInternetmodel.
4423,"8.Whatarethetwotypesoflinksbetween aBluetooth primary andaBluetooth
secondary?"
4424,"9.Inmultiple-secondary communication, whousestheeven-numbered slotsandwho
usestheodd-numbered slots?"
4425,10.HowmuchtimeinaBluetooth one-slotframeisusedforthehopping mechanism?
4426,Whataboutathree-slot frameandafive-slot frame?
4427,"Exercises
1].Compare andcontrastCSMAlCD withCSMAICA."
4428,12.UseTable14.5tocompare andcontrastthefieldsinIEEE802.3and802.11.
4429,"Table14.5Exercise 12
Fields IEEE802.3FieldSize IEEE802.11FieldSize
Destination address
Sourceaddress
Address 1
Address2
Address3
Address4
FC444CHAPTER 14WIRELESS LANs
Table14.5Exercise 12(continued)
"",',.,,.."
4430,"~-~,..~'~'~ -."""".-_.__.__ ._-*~-
Fields IEEE802.3FieldSize IEEE802.11FieldSize
D/ID
SC
PDUlength
Dataandpadding
Framebody
FCS(CRC)CHAPTER 15
Connecting LANs,Backbone
Networks, andVirtualLANs
LANsdonotnormally operateinisolation."
4431,"Theyareconnected tooneanotherortothe
Internet.ToconnectLANs,orsegments ofLANs, weuseconnecting devices.Connecting
devicescanoperateindifferent layersoftheInternetmodel.Inthischapter,wediscuss
onlythosethatoperateinthephysicalanddatalinklayers;wediscussthosethatoperate
inthefirstthreelayersinChapter19."
4432,"Afterdiscussing someconnecting devices, weshowhowtheyareusedtocreate
backbone networks."
4433,"Finally,wediscussvirtuallocalareanetworks (VLANs)."
4434,"15.1CONNECTING DEVICES
Inthissection,wedivideconnecting devicesintofivedifferent categories basedonthe
layerinwhichtheyoperateinanetwork, asshowninFigure15.1.
Figure15.1Fivecategories ofconnecting devices
Application Application
Gateway
Transport Transport
Network Network
Datalink Datalink
Physical Physical
Thefivecategories containdeviceswhichcanbedefinedas
1.Thosewhichoperatebelowthephysical layersuchasapassivehub."
4435,2.Thosewhichoperateatthephysical layer(arepeateroranactivehub).
4436,"3.Thosewhichoperateatthephysical anddatalinklayers(abridgeoratwo-layer
switch)."
4437,"445446CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
4.Thosewhichoperateatthephysical, datalink,andnetworklayers(arouterora
three-layer switch)."
4438,5.Thosewhichcanoperateatallfivelayers(agateway).
4439,"PassiveHubs
Apassivehubisjustaconnector."
4440,Itconnects thewirescomingfromdifferent branches.
4441,"Inastar-topology EthernetLAN,apassivehubisjustapointwherethesignalscoming
fromdifferent stationscollide;thehubisthecollision point.Thistypeofahubispart
ofthemedia;itslocationintheInternetmodelisbelowthephysicallayer."
4442,"Repeaters
Arepeater isadevicethatoperatesonlyinthephysicallayer.Signalsthatcarryinfor­
mationwithinanetworkcantravelafixeddistancebeforeattenuation endangers the
integrity ofthedata.Arepeaterreceivesasignaland,beforeitbecomes tooweakor
corrupted, regenerates theoriginalbitpattern.Therepeaterthensendstherefreshed
signal.ArepeatercanextendthephysicallengthofaLAN,asshowninFigure15.2.
Figure15.2Arepeater connecting twosegments ofaLAN
5 5
4 4
3 3
2 2
I 1
Segment I Segment 2
ArepeaterdoesnotactuallyconnecttwoLANs;itconnects twosegments ofthe
sameLAN.Thesegments connected arestillpartofonesingleLAN.Arepeaterisnot
adevicethatcanconnecttwoLANsofdifferent protocols."
4443,Arepeater connects segments ofaLAN.
4444,Arepeatercanovercome the10Base5Ethernet lengthrestriction.
4445,"Inthisstandard,
thelengthofthecableislimitedto500m.Toextendthislength,wedividethecable
intosegments andinstallrepeaters betweensegments."
4446,"Notethatthewholenetworkis
stillconsidered oneLAN,buttheportionsofthenetworkseparated byrepeaters are
calledsegments."
4447,"Therepeateractsasatwo-port node,butoperatesonlyinthephysical
layer.Whenitreceivesaframefromanyoftheports,itregenerates andforwards itto
theotherport.SECTION 15.1CONNECTING DEVICES 447
Arepeaterforwards everyframe;ithasnofilteringcapability."
4448,"Itistempting tocompare arepeatertoanamplifier, butthecomparison isinaccurate."
4449,"Anamplifier cannotdiscriminate between theintended signalandnoise;itamplifies
equallyeverything fedintoit.Arepeaterdoesnotamplifythesignal;itregenerates the
signal.Whenitreceivesaweakened orcorrupted signal,itcreatesacopy,bitforbit,at
theoriginalstrength."
4450,"Arepeaterisaregenerator, notanamplifier."
4451,"Thelocationofarepeateronalinkisvital.Arepeatermustbeplacedsothatasig­
nalreachesitbeforeanynoisechangesthemeaningofanyofitsbits.Alittlenoisecan
altertheprecision ofabit'svoltagewithoutdestroying itsidentity(seeFigure15.3).If
thecorrupted bittravelsmuchfarther,however, accumulated noisecanchangeits
meaning completely."
4452,"Atthatpoint,theoriginalvoltageisnotrecoverable, andtheerror
needstobecorrected."
4453,"Arepeaterplacedonthelinebeforethelegibility ofthesignal
becomes lostcanstill read thesignalwellenoughtodetermine theintended voltages
andreplicatethemintheiroriginalform."
4454,"Figure15.3Function ofarepeater
;:;::::·J,*lI(-~cJ""--'---""""'.cJ---,--(lrr~
signal signal
a.Right-to-teft transmission."
4455,b.Left-to·right transmission.
4456,"ActiveHubs
Anactivehubisactuallyamultipart repeater.Itisnormally usedtocreateconnections
between stationsinaphysicalstartopology."
4457,"Wehaveseenexamples ofhubsinsome
Ethernet implementations (lOBase- T,forexample)."
4458,"However, hubscanalsobeusedto
createmultiple levelsofhierarchy, asshowninFigure15.4.Thehierarchical useof
hubsremovesthelengthlimitation of10Base-T (100m)."
4459,"Bridges
Abridgeoperates inboththephysical andthedatalinklayer.Asaphysical layer
device,itregenerates thesignalitreceives."
4460,"Asadatalinklayerdevice,thebridgecan
checkthephysical(MAC)addresses (sourceanddestination) contained intheframe.448CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Figure15.4Ahierarchy ofhubs
Filtering
Onemayask,Whatisthedifference infunctionality betweenabridgeandarepeater?"
4461,Abridgehasfiltering capability.
4462,"Itcancheckthedestination addressofaframeand
decideiftheframeshouldbeforwarded ordropped."
4463,"Iftheframeistobeforwarded, the
decisionmustspecifytheport.Abridgehasatablethatmapsaddresses toports."
4464,Abridgehasatablensedinfilteringdecisions.
4465,Letusgiveanexample.
4466,"InFigure15.5,twoLANsareconnected byabridge.Ifa
framedestinedforstation712B13456142 arrivesatport1,thebridgeconsultsitstableto
findthedeparting port.According toitstable,framesfor7l2B13456142 leavethrough
port1;therefore, thereisnoneedforforwarding, andtheframeisdropped."
4467,"Onthe
otherhand,ifaframefor712B13456141 arrivesatport2,thedeparting portisport1
Figure15.5Abridgeconnecting twoLANs
5
4
3
2
12 2
1f-+,---l1-l15
4
3
2
I
Address Port
71:2B:13:45:61:41 1
71:2B:13:45:61:42 1
64:2B:13:45:61:12 2
64:28:13:45:61:13 2BridgeTable
64:2B:13:45:61: 1264:2B:13:45:61: 13
LAN2 LAN171:28:13:45:61:41 71:2B:13:45:61:42
r r 0SECTION 15.1CONNECTING DEVICES 449
andtheframeisforwarded."
4468,"Inthefirstcase,LAN2remainsfreeoftraffic;inthesec­
ondcase,bothLANshavetraffic.Inourexample, weshowatwo-port bridge;inreality
abridgeusuallyhasmoreports."
4469,"Notealsothatabridgedoesnotchangethephysical addresses contained inthe
frame."
4470,Abridgedoesnotchangethephysical (MAC)addresses inaframe.
4471,"Transparent Bridges
Atransparent bridgeisabridgeinwhichthestationsarecompletely unawareofthe
bridge'sexistence."
4472,"Ifabridgeisaddedordeletedfromthesystem,reconfiguration of
thestationsisunnecessary."
4473,"According totheIEEE802.1dspecification, asystem
equipped withtransparent bridgesmustmeetthreecriteria:
I.Framesmustbeforwarded fromonestationtoanother."
4474,"2.Theforwarding tableisautomatically madebylearningframemovements inthe
network."
4475,3.Loopsinthesystemmustbeprevented.
4476,"Forwarding Atransparent bridgemustcorrectly forwardtheframes,asdiscussed in
theprevious section."
4477,"Learning Theearliestbridgeshadforwarding tablesthatwerestatic.Thesystems
administrator wouldmanually entereachtableentryduringbridgesetup.Although the
processwassimple,itwasnotpractical.Ifastationwasaddedordeleted,thetablehadto
bemodified manually."
4478,"Thesamewastrueifastation'sMACaddresschanged, whichis
notarareevent.Forexample, puttinginanewnetworkcardmeansanewMACaddress."
4479,"Abettersolutiontothestatictableisadynamic tablethatmapsaddresses toports
automatically."
4480,"Tomakeatabledynamic, weneedabridgethatgradually learnsfrom
theframemovements."
4481,"Todothis,thebridgeinspects boththedestination andthe
sourceaddresses."
4482,"Thedestination addressisusedfortheforwarding decision (table
lookup);thesourceaddressisusedforaddingentriestothetableandforupdating pur­
poses.Letuselaborate onthisprocessbyusingFigure15.6.
1.WhenstationAsendsaframetostationD,thebridgedoesnothaveanentryfor
eitherDorA.Theframegoesoutfromallthreeports;theframefloodsthenet­
work.However, bylookingatthesourceaddress,thebridgelearnsthatstationA
mustbelocatedontheLANconnected toport1.Thismeansthatframesdestined
forA,inthefuture,mustbesentoutthroughport1.Thebridgeaddsthisentryto
itstable.Thetablehasitsfirstentrynow."
4483,"2.WhenstationEsendsaframetostationA,thebridgehasanentryforA,soitfor­
wardstheframeonlytoport1.Thereisnoflooding."
4484,"Inaddition, itusesthesource
addressoftheframe,E,toaddasecondentrytothetable."
4485,"3.WhenstationBsendsaframetoC,thebridgehasnoentryforC,soonceagainit
floodsthenetworkandaddsonemoreentrytothetable."
4486,"4.Theprocessoflearningcontinues asthebridgeforwards frames.450 CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Figure15.6Alearning bridgeandtheprocessoflearning
r-------JL------, 3
1--------1
LAN2D-'""""'T""--""---'""""'T""--c:;]LAN1D-......I.--~-.....L._-c;;]
LAN3
Address Port Address Port
A 1Address Port
A1
E3Address Port
A1
E3
BI
a.Original b.AfterAsends
aframetoDc.AfterEsends
aframetoAd.AfterBsends
aframetoC
LoopProblem Transparent bridgesworkfineaslongastherearenoredundant
bridgesinthesystem.Systemsadministrators, however, liketohaveredundant bridges
(morethanonebridgebetweenapairofLANs)tomakethesystemmorereliable.Ifa
bridgefails,anotherbridgetakesoveruntilthefailedoneisrepaired orreplaced."
4487,"Redundancy cancreateloopsinthesystem,whichisveryundesirable."
4488,"Figure15.7
showsaverysimpleexampleofaloopcreatedinasystemwithtwoLANsconnected
bytwobridges."
4489,"1.StationAsendsaframetostationD.Thetablesofbothbridgesareempty.Both
forwardtheframeandupdatetheirtablesbasedonthesourceaddressA."
4490,"2.NowtherearetwocopiesoftheframeonLAN2.Thecopysentoutbybridge1is
received bybridge2,whichdoesnothaveanyinformation aboutthedestination
addressD;itfloodsthebridge.Thecopysentoutbybridge2isreceivedbybridge1
andissentoutforlackofinformation aboutD.Notethateachframeishandled
separately becausebridges,astwonodesonanetworksharingthemedium, usean
accessmethodsuchasCSMA/CD."
4491,"Thetablesofbothbridgesareupdated,butstill
thereisnoinformation fordestination D."
4492,"3.NowtherearetwocopiesoftheframeonLAN1.Step2isrepeated, andbothcopies
floodthenetwork."
4493,"4.Theprocesscontinues onandon.Notethatbridgesarealsorepeaters andregen­
erateframes.Soineachiteration, therearenewlygenerated freshcopiesofthe
frames."
4494,"Tosolvetheloopingproblem, theIEEEspecification requires thatbridgesusethe
spanning treealgorithm tocreatealooplesstopology.SECTION 15.1CONNECTING DEVICES 451
Figure15.7Loopproblem inalearning bridge
LAN1 LAN1
LAN2 LAN2
a.StationAsendsaframetostationD b.Bothbridgesforward theframe
c.Bothbridgesforwardtheframe d.Bothbridgesforwardtheframe
Spanning Tree
Ingraphtheory,aspanning treeisagraphinwhichthereisnoloop.Inabridged
LAN,thismeanscreating atopology inwhicheachLANcanbereachedfromany
otherLANthroughonepathonly(noloop).Wecannotchangethephysicaltopology of
thesystembecauseofphysical connections between cablesandbridges,butwecan
createalogicaltopology thatoverlays thephysical one.Figure15.8showsasystem
withfourLANsandfivebridges.Wehaveshownthephysical systemanditsrepresen­
tationingraphtheory.Although sometextbooks represent theLANsasnodesandthe
bridgesastheconnecting arcs,wehaveshownbothLANsandbridgesasnodes.The
connecting arcsshowtheconnection ofaLANtoabridgeandviceversa.Tofind
thespanning tree,weneedtoassignacost(metric)toeacharc.Theinterpretation of
thecostisleftuptothesystemsadministrator."
4495,"Itmaybethepathwithminimum hops
(nodes),thepath with minimum delay,orthepathwithmaximum bandwidth."
4496,"Iftwo
portshavethesameshortestvalue,thesystemsadministrator justchoosesone.Wehave
chosentheminimum hops.However, aswewillseeinChapter22,thehopcountisnor­
mally1fromabridgetotheLANand 0inthereversedirection."
4497,"Theprocesstofindthespanning treeinvolvesthreesteps:
1.Everybridgehasabuilt-inID(normally theserialnumber,whichisunique).Each
bridgebroadcasts thisIDsothatallbridgesknowwhichonehasthesmallestID."
4498,"ThebridgewiththesmallestIDisselectedastherootbridge(rootofthetree).We
assumethatbridgeB1hasthesmallest ID.Itis,therefore, selected astheroot
bridge.452CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Figure15.8Asystemofconnected LANsanditsgraphrepresentation
LAN2 LAN3
a.Actualsystem
~o1----+-!----+- 0----+-f---...:...----{ LAN1}---'------l
~O ~l
f---"";""!----+------( LAN4r--O-----+------l
~O ~!o----+­LAN2)-------{
~l
b.Graphrepresentation withcostassigned toeacharc
2.Thealgorithm triestofindtheshortestpath(apathwiththeshortestcost)fromtheroot
bridgetoeveryotherbridgeorLAN.Theshortestpathcanbefoundbyexamining the
totalcostfromtherootbridgetothedestination."
4499,Figure15.9showstheshortestpaths.
4500,"3.Thecombination oftheshortestpathscreatestheshortesttree,whichisalsoshown
inFigure15.9.
4.Basedonthespanning tree,wemarktheportsthatarepartofthespanning tree,the
forwarding ports,whichforwardaframethatthebridgereceives."
4501,"Wealsomark
thoseportsthatarenotpartofthespanning tree,theblocking ports,whichblock
theframesreceived bythebridge.Figure15.10showsthephysical systemsof
LANswithforwarding points(solidlines)andblocking ports(brokenlines)."
4502,"NotethatthereisonlyonesinglepathfromanyLANtoanyotherLANinthe
spanning treesystem.Thismeans there isonlyonesinglepathfromoneLANtoany
otherLAN.Noloopsarecreated.Youcanprovetoyourselfthatthereisonlyonepath
fromLAN1toLAN2,LAN3,orLAN4.Similarly, thereisonlyonepathfromLAN2
toLAN1,LAN3,andLAN4.ThesameistrueforLAN3andLAN4."
4503,"Dynamic Algorithm Wehavedescribed thespanning treealgorithm asthoughit
required manualentries.Thisisnottrue.Eachbridgeisequipped withasoftware pack­
agethatcarriesoutthisprocessdynamically."
4504,"Thebridgessendspecialmessages toone
another,calledbridgeprotocol dataunits(BPDUs), toupdatethespanning tree.The
spanning treeisupdatedwhenthereisachangeinthesystemsuchasafailureofa
bridgeoranadditionordeletionofbridges.SECTION 15.1CONNECTING DEVICES 453
Figure15.9Findingtheshortestpathsandthespanning treeinasystemofbridges
,
y
---~2'-- - - -------- -~1m~!a-------< LAN1j------j
,,,,
, , :yLAN2j------j
I I 11
, :t LAN4~------i
, , 1
~~:::::::::::::::::::::~-~-- - - - - - - - - - ---~2
a.Shortest paths
Rootof
spanning tree
------( LAN1}-------\
j--------!B 3
-~-
1--------( LAN4}-------\B 5
b.Spanning tree
Figure15.10 Forwarding andblocking portsafterusingspanning treealgorithm
LANl
Rootbridge
LAN2
1Igf
';l210.£
1i=Q
1
LAN4LAN3
Ports2and3ofbridgeB3areblocking ports(noframeissentoutoftheseports)."
4505,Port1ofbridgeB5isalsoablocking port(noframeissentoutofthisport).
4506,"SourceRouting Bridges
Anotherwaytopreventloopsinasystemwithredundant bridgesistousesourcerouting
bridges.Atransparent bridge'sdutiesincludefilteringframes,forwarding, andblocking."
4507,"Inasystemthathassourceroutingbridges,thesedutiesareperformed bythesource
stationand,tosomeextent,thedestination station.454CHAPTER 15CONNECTING LANs,BACKBONE NE7WORKS, ANDVIRTUAL LANs
Insourcerouting,asendingstationdefinesthebridgesthattheframemustvisit."
4508,"Theaddresses ofthesebridgesareincluded intheframe.Inotherwords,theframecon­
tainsnotonlythesourceand destination addresses, butalsotheaddresses ofallbridges
tobevisited."
4509,"Thesourcegetsthesebridgeaddresses throughtheexchange ofspecialframes
withthedestination priortosending the dataframe."
4510,"Sourceroutingbridgesweredesigned byIEEEtobeusedwithTokenRingLANs.
TheseLANsarenotverycommon today."
4511,"BridgesConnecting Different LANs
Theoretically abridgeshouldbeabletoconnectLANsusingdifferent protocols atthe
datalinklayer,suchasanEthernet LANtoawirelessLAN.However, therearemany
issuestobeconsidered:
oFrameformat."
4512,"EachLANtypehasitsownframeformat(compare anEthernet
framewithawirelessLANframe)."
4513,"DMaximum datasize.Ifanincoming frame'ssizeistoolargeforthedestination
LAN,thedatamustbefragmented intoseveralframes.Thedatathenneedtobe
reassembled atthedestination."
4514,"However, noprotocol atthedatalinklayerallows
thefragmentation andreassembly offrames.WewillseeinChapter 19thatthisis
allowedinthenetwork layer.Thebridgemusttherefore discardanyframestoo
largeforitssystem."
4515,"oDatarate.EachLANtypehasitsowndatarate.(Compare the10-Mbps datarate
ofanEthernet withtheI-Mbpsdatarateofawireless LAN.)Thebridgemust
buffertheframetocompensate forthisdifference."
4516,"DBitorder.EachLANtypehasitsownstrategyinthesendingofbits.Somesend
themostsignificant bitinabytefirst;otherssendtheleastsignificant bitfirst."
4517,oSecurity.
4518,"SomeLANs,suchaswireless LANs,implement securitymeasures in
thedatalinklayer.OtherLANs,suchasEthernet, donot.Security ofteninvolves
encryption (seeChapter30).WhenabridgereceivesaframefromawirelessLAN,
itneedstodecryptthemessage beforeforwarding ittoanEthernet LAN."
4519,DMultimedia support.
4520,"SomeLANssupportmultimedia andthequalityofservices
neededforthistypeofcommunication; othersdonot."
4521,"Two-Layer Switches
Whenweusethetermswitch,wemustbecarefulbecauseaswitchcanmeantwodif­
ferentthings.Wemustclarifythetermbyaddingthelevelatwhichthedeviceoperates."
4522,"Wecanhaveatwo-layer switchorathree-layer switch.Athree-layer switchisusedat
thenetworklayer;itisakindofrouter.Thetwo-layer switchperforms atthephysical
anddatalinklayers."
4523,"Atwo-layer switchisabridge,abridgewithmanyportsandadesignthatallows
better(faster)performance."
4524,"Abridgewithafewportscanconnect afewLANs
together."
4525,"Abridgewithmanyportsmaybeabletoallocateauniqueporttoeachstation,
witheachstationonitsown independent entity.Thismeansnocompeting traffic(no
collision, aswesawinEthernet).SECTION 15.1CONNECTING DEVICES 455
Atwo-layer switch,asabridgedoes,makesafilteringdecisionbasedonthe MAC
addressoftheframeitreceived."
4526,"However, atwo-layer switchcanbemoresophisti­
cated.Itcanhaveabuffertoholdtheframesforprocessing."
4527,"Itcanhaveaswitching fac­
torthatforwards theframesfaster.Somenewtwo-layer switches, calledcut-through
switches, havebeendesigned toforwardtheframeassoonastheycheckthe MAC
addresses intheheaderoftheframe."
4528,"Routers
Arouterisathree-layer devicethatroutespacketsbasedontheirlogicaladdresses
(host-to-host addressing)."
4529,"Arouternormally connects LANsandWANsintheInternet
andhasaroutingtablethatisusedformakingdecisions abouttheroute.Therouting
tablesarenormally dynamic andareupdatedusingroutingprotocols."
4530,"Wediscussrout­
ersandroutingingreaterdetailinChapters 19and21.Figure15.11showsapartofthe
Internetthat usesrouterstoconnectLANsandWANs.
Figure15.11 Routersconnecting independent LANsandWANs
WAN
----------------------~
Totherest
ofthe Internet
Three-LayerSwitches
Athree-layer switchisarouter,butafasterandmoresophisticated."
4531,"Theswitching fabric
inathree-layer switchallowsfastertablelookupandforwarding."
4532,"Inthisbook,weuse
thetermsrouterandthree-layer switchinterchangeably."
4533,"Gateway
Although sometextbooks usethetermsgatewayandrouterinterchangeably, mostofthe
literature distinguishes betweenthetwo.Agatewayisnormally acomputer thatoperates
inallfivelayersoftheInternetorsevenlayersofOSImodel.Agateway takesan
application message, readsit,andinterprets it.Thismeansthatitcanbeusedasa
connecting devicebetween twointernetworks thatusedifferent models.Forexample,
anetworkdesigned tousetheOSImodelcanbeconnected toanothernetworkusing
theInternet model.Thegateway connecting thetwosystems cantakeaframeas
itarrivesfromthefirstsystem,moveituptotheOSIapplication layer,andremovethe
message.456CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Gateways canprovidesecurity.InChapter32,welearnthatthegatewayisusedto
filterunwanted application-layer messages."
4534,"15.2BACKBONE NETWORKS
Someconnecting devicesdiscussed inthischaptercanbeusedtoconnectLANsina
backbone network."
4535,Abackbone network allowsseveralLANstobeconnected.
4536,"Ina
backbone network, nostationisdirectlyconnected tothebackbone; thestationsare
partofaLAN,andthebackbone connects theLANs.Thebackbone isitselfaLAN
thatusesaLANprotocol suchasEthernet; eachconnection tothebackbone isitself
anotherLAN."
4537,"Although manydifferent architectures canbeusedforabackbone, wediscussonly
thetwomostcommon: thebusandthestar."
4538,"BusBackbone
Inabusbackbone, thetopology ofthebackbone isabus.Thebackbone itselfcanuse
oneoftheprotocols thatsupportabustopology suchaslOBase5orlOBase2."
4539,"Inabusbackbone, thetopology ofthebackbone isabus."
4540,"Busbackbones arenormally usedasadistribution backbone toconnectdifferent
buildings inanorganization."
4541,"Eachbuilding cancomprise eitherasingleLANor
anotherbackbone (normally astarbackbone)."
4542,"Agoodexampleofabusbackbone is
onethatconnects single-ormultiple-floor buildings onacampus."
4543,"Eachsingle-floor
buildingusuallyhasasingleLAN.Eachmultiple-floor buildinghasabackbone (usu­
allyastar)thatconnects eachLANonafloor.Abusbackbone caninterconnect these
LANsandbackbones."
4544,"Figure15.12showsanexampleofabridge-based backbone with
fourLANs.
Figure15.12 BusbackboneSECTION 15.2BACKBONE NETWORKS 457
InFigure15.12,ifastationinaLANneedstosendaframetoanotherstationin
thesameLAN,thecorresponding bridgeblockstheframe;theframeneverreaches
thebackbone."
4545,"However, ifastationneedstosendaframetoastationinanotherLAN,the
bridgepassestheframetothebackbone, whichisreceived bytheappropriate bridge
andisdelivered tothedestination LAN.Eachbridgeconnected tothebackbone hasa
tablethatshowsthestationsontheLANsideofthebridge.Theblocking ordeliveryof
aframeisbasedonthecontentsofthistable."
4546,"StarBackbone
Inastarbackbone, sometimes calledacollapsed orswitched backbone, thetopology
ofthebackbone isastar.Inthisconfiguration, thebackbone isjustoneswitch(thatis
whyitiscalled,erroneously, acollapsed backbone) thatconnects theLANs.
Inastarbackbone, thetopology ofthebackbone isastar;
thebackbone isjustoneswitch."
4547,Figure15.13showsastarbackbone.
4548,"Notethat,inthisconfiguration, theswitch
doesthejobofthebackbone andatthesametimeconnects theLANs.
Figure15.13 Starbackbone
Backbone
Switch
Starbackbones aremostlyusedasadistribution backbone insideabuilding."
4549,"Ina
multifloor building, weusuallyfindoneLANthatserveseachparticular floor.Astar
backbone connects theseLANs.Thebackbone network, whichisjustaswitch,canbe
installed inthebasement orthefirstfloor,andseparatecablescanrunfromtheswitch
toeachLAN.Iftheindividual LANshaveaphysicalstartopology, eitherthehubs(or
switches) canbeinstalled inaclosetonthecorresponding floor,orallcanbeinstalled
closetotheswitch.Weoftenfindarackorchassisinthebasement wherethebackbone
switchandallhubsorswitches areinstalled."
4550,"Connecting RemoteLANs
Another common application forabackbone network istoconnectremoteLANs.
Thistypeofbackbone network isusefulwhenacompany hasseveralofficeswith
LANsandneedstoconnect them.Theconnection canbedonethrough bridges,458CHAPTER 15CONNECTING IANs,BACKBONE NETWORKS, ANDVIRTUAL IANs
sometimes calledremotebridges."
4551,"Thebridgesactasconnecting devicesconnecting
LANsandpoint-to-point networks, suchasleasedtelephone linesorADSLlines."
4552,Thepoint-to-point network inthiscaseisconsidered aLANwithoutstations.
4553,"The
point-to-point linkcanuseaprotocol suchasPPP.Figure15.14showsabackbone
connecting remoteLANs.
Figure15.14Connecting remoteIANswithbridges
Point-to-point link
Bridge
LAN2
Apoint-to-point linkactsasaLANinaremotebackbone connected byremotebridges."
4554,"15.3VIRTUAL LANs
Astationisconsidered partofaLANifitphysically belongstothatLAN.Thecriterion
ofmembership isgeographic."
4555,"Whathappensifweneedavirtualconnection between
twostationsbelonging totwodifferentphysicalLANs?Wecanroughlydefineavirtual
localareanetwork (VLAN) asalocalareanetworkconfigured bysoftware, notby
physicalwiring."
4556,Letususeanexample toelaborate onthisdefinition.
4557,"Figure15.15showsa
switched LANinanengineering firminwhich10stationsaregroupedintothreeLANs
thatareconnected byaswitch.Thefirstfourengineers worktogetherasthefirstgroup,
thenextthreeengineers worktogetherasthesecondgroup,andthelastthreeengineers
worktogetherasthethirdgroup.TheLANisconfigured toallowthisarrangement."
4558,"Butwhatwouldhappeniftheadministrators neededtomovetwoengineers from
thefirstgrouptothethirdgroup,tospeeduptheprojectbeingdonebythethirdgroup?"
4559,TheLANconfiguration wouldneedtobechanged.
4560,"Thenetwork technician must
rewire.Theproblem isrepeated if,inanotherweek,thetwoengineers movebackto
theirprevious group.Inaswitched LAN,changesintheworkgroupmeanphysical
changesinthenetworkconfiguration.SECTION 15.3VIRTUAL LANs 459
Figure15.15Aswitchconnecting threeLANs
Switch
Group1 Group2 Group3
Figure15.16showsthesameswitched LANdividedintoVLANs. Thewholeidea
ofVLANtechnology istodivideaLANintological,insteadofphysical, segments."
4561,"A
LANcanbedividedintoseverallogicalLANscalledVLANs. EachVLANisawork
groupintheorganization."
4562,"Ifapersonmovesfromonegrouptoanother,thereisnoneed
tochangethephysical configuration."
4563,"Thegroupmembership inVLANsisdefinedby
software, nothardware."
4564,"Anystationcanbelogically movedtoanotherVLAN.Allmem­
bersbelonging toaVLANcanreceivebroadcast messages senttothatparticular VLAN."
4565,"Figure15.16AswitchusingVLANsoftware
SwitchwithVLANsoftware
VLANI
VLAN2
VLAN3460CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
ThismeansifastationmovesfromVLAN1toVLAN2,itreceivesbroadcast messages
senttoVLAN2,butnolongerreceivesbroadcast messages senttoVLAN1."
4566,"Itisobviousthattheproblem inourprevious example caneasilybesolvedby
usingVLANs. Movingengineers fromonegrouptoanotherthroughsoftware iseasier
thanchanging theconfiguration ofthephysicalnetwork."
4567,"VLANtechnology evenallowsthegrouping ofstationsconnected todifferent
switches inaVLAN.Figure15.17showsabackbone localareanetwork withtwo
switches andthreeVLANs. StationsfromswitchesAandBbelongtoeachVLAN."
4568,"Figure15.17Twoswitches inabackbone usingVLANsoftware
......"
4569,"""""""""Backbone1- -,
switch
SwitchA SwitchB
VLANI
VLAN2
VLAN3
Thisisagoodconfiguration foracompany withtwoseparate buildings."
4570,"Each
buildingcanhaveitsownswitched LANconnected byabackbone."
4571,"Peopleinthefirst
buildingandpeopleinthesecondbuildingcanbeinthesameworkgroupeventhough
theyareconnected todifferent physicalLANs.
Fromthesethreeexamples, wecandefineaVLANcharacteristic:
VLANscreatebroadcast domains."
4572,"VLANsgroupstationsbelonging tooneormorephysical LANsintobroadcast
domains."
4573,"ThestationsinaVLANcommunicate withoneanotherasthoughthey
belonged toaphysicalsegment.SECTION 15.3VIRTUAL LANs 461
Membership
Whatcharacteristic canbeusedtogroupstationsinaVLAN?Vendors usedifferent
characteristics suchasportnumbers, MACaddresses, IPaddresses, IPmulticast
addresses, oracombination oftwoormoreofthese."
4574,"PortNumbers
SomeVLANvendorsuseswitchportnumbers asamembership characteristic."
4575,"For
example, theadministrator candefinethatstationsconnecting toports1,2,3,and 7
belongtoVLAN1;stationsconnecting toports4,10,and12belongtoVLAN2;and
soon."
4576,"MACAddresses
SomeVLANvendorsusethe48-bitMACaddressasamembership characteristic."
4577,"For
example,theadministrator canstipulatethatstationshavingMACaddresses E21342A12334
andF2A123BCD34 1belongtoVLAN1."
4578,"IPAddresses
SomeVLANvendorsusethe32-bitIPaddress(seeChapter19)asamembership char­
acteristic."
4579,"Forexample, theadministrator canstipulatethatstationshavingIPaddresses
181.34.23.67, 181.34.23.72, 181.34.23.98, and181.34.23.112 belongtoVLAN1."
4580,"Multicast IPAddresses
SomeVLANvendorsusethemulticast IPaddress(seeChapter19)asamembership
characteristic."
4581,"Multicasting attheIPlayerisnowtranslated tomulticasting atthedata
linklayer."
4582,"Combination
Recently, thesoftware available fromsomevendorsallowsallthesecharacteristics to
becombined."
4583,"Theadministrator canchooseoneormorecharacteristics wheninstalling
thesoftware."
4584,"Inaddition, thesoftware canbereconfigured tochangethesettings."
4585,"Configuration
Howarethestationsgroupedintodifferent VLANs?"
4586,"Stationsareconfigured inoneof
threeways:manual,semiautomatic, andautomatic."
4587,"ManualConfiguration
Inamanualconfiguration, thenetworkadministrator usestheVLANsoftware toman­
uallyassignthestationsintodifferent VLANsatsetup.Latermigration fromone
VLANtoanotherisalsodonemanually."
4588,"Notethatthisisnotaphysical configuration;
itisalogicalconfiguration."
4589,"Thetermmanually heremeansthattheadministrator
typestheportnumbers, theIPaddresses, orothercharacteristics, usingtheVLAN
software.462CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
Automatic Configuration
Inanautomatic configuration, thestationsareautomatically connected ordisconnected
fromaVLANusingcriteriadefinedbytheadministrator."
4590,"Forexample, theadministra­
torcandefinetheprojectnumberasthecriterion forbeingamemberofagroup.When
auserchangestheproject,heorsheautomatically migrates toanewVLAN."
4591,"Semiautomatic Configuration
Asemiautomatic configuration issomewhere between amanualconfiguration andan
automatic configuration."
4592,"Usually, theinitializing isdonemanually, withmigrations
doneautomatically."
4593,"Communication Between Switches
Inamultiswitched backbone, eachswitchmustknownotonlywhichstationbelongsto
whichVLAN,butalsothemembership ofstationsconnected tootherswitches."
4594,"For
example, inFigure15.17,switchAmustknowthemembership statusofstationscon­
nectedtoswitchB,andswitchBmustknowthesameaboutswitchA.Threemethods
havebeendevisedforthispurpose: tablemaintenance, frametagging,andtime-division
multiplexing."
4595,"TableMaintenance
Inthismethod, whenastationsendsabroadcast frametoitsgroupmembers, the
switchcreatesanentryinatableandrecordsstationmembership."
4596,"Theswitches send
theirtablestooneanotherperiodically forupdating."
4597,"FrameTagging
Inthismethod,whenaframeistraveling between switches, anextraheaderisaddedto
theMACframetodefinethedestination VLAN.Theframetagisusedbythereceiving
switches todetermine theVLANstobereceiving thebroadcast message."
4598,"Time-Division Multiplexing (TDM)
Inthismethod, theconnection (trunk)between switches isdividedintotimeshared
channels (seeTDMinChapter 6).Forexample, ifthetotalnumberofVLANsina
backbone isfive,eachtrunkisdividedintofivechannels."
4599,"Thetrafficdestined for
VLAN1travelsinchannell, thetrafficdestined forVLAN2travelsinchannel2,and
soon.Thereceiving switchdetermines thedestination VLANbychecking thechannel
fromwhichtheframearrived."
4600,"IEEEStandard
In1996,theIEEE802.1subcommittee passedastandard called802.1Qthatdefinesthe
formatforframetagging."
4601,"Thestandard alsodefinestheformattobeusedinmulti­
switched backbones andenablestheuseofmultivendor equipment inVLANs. IEEE
802.1Qhasopenedthewayforfurtherstandardization inotherissuesrelatedto
VLANs.Mostvendorshavealreadyaccepted thestandard.SECTION 15.5KEY7ERMS 463
Advantages
Thereareseveraladvantages tousingVLANs.
CostandTimeReduction
VLANscanreducethemigration costofstationsgoingfromonegrouptoanother."
4602,"Physical reconfiguration takestime and iscostly.Insteadofphysically movingonesta­
tiontoanothersegmentoreventoanotherswitch,itismucheasierandquickertomove
itbyusingsoftware."
4603,"Creating VirtualWorkGroups
VLANscanbeusedtocreatevirtualworkgroups.Forexample, inacampusenviron­
ment,professors working onthesameprojectcansendbroadcast messages toone
anotherwithoutthenecessity ofbelonging tothesamedepartment."
4604,"Thiscanreduce
trafficifthemulticasting capability ofIPwaspreviously used."
4605,"Security
VLANsprovideanextrameasureofsecurity."
4606,"Peoplebelonging tothesamegroupcan
sendbroadcast messages withtheguaranteed assurance thatusersinothergroupswill
notreceivethesemessages."
4607,"15.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext."
4608,"Books
Abookdevotedtoconnecting devicesis[PerOO].Connecting devicesandVLANsare
discussed inSection4.7of[Tan03].Switches, bridges,andhubsarediscussed in[Sta03]
and[Sta04]."
4609,"Site
oIEEE802LAN/MAN Standards Committee
15.5KEYTERMS
amplifier
blocking port
bridge
busbackbone
connecting device
filteringforwarding port
hub
remotebridge
repeater
router
segment464CHAPTER 15CONNECTING LANs,BACKBONE NETWORKS, ANDVIRTUAL LANs
sourceroutingbridge
spanning tree
starbackbone
three-layer switchtransparent bridge
two-layer switch
virtuallocalareanetwork
(VLAN)
15.6SUMMARY
oArepeaterisaconnecting devicethatoperatesinthephysicallayeroftheInternet
model.Arepeaterregenerates asignal,connects segments ofaLAN,andhasno
filteringcapability."
4610,"oAbridgeisaconnecting devicethatoperatesinthephysicalanddatalinklayersof
theInternetmodel."
4611,"oAtransparent bridgecanforwardandfilterframesandautomatically buildits
forwarding table."
4612,oAbridgecanusethespanning treealgorithm tocreatealooplesstopology.
4613,oAbackbone LANallowsseveralLANstobeconnected.
4614,oAbackbone isusuallyabusorastar.
4615,"oAvirtuallocalareanetwork (VLAN) isconfigured bysoftware, notbyphysical
wiring."
4616,"oMembership inaVLANcanbebasedonportnumbers, MACaddresses, IP
addresses, IPmulticast addresses, oracombination ofthesefeatures."
4617,"oVLANsarecost-andtime-efficient, canreducenetwork traffic,andprovidean
extrameasureofsecurity."
4618,"15.7PRACTICE SET
ReviewQuestions
1.Howisarepeaterdifferent fromanamplifier?"
4619,"2.Whatdowemeanwhenwesaythatabridgecanfiltertraffic?Whyisfiltering
important?"
4620,3.Whatisatransparent bridge?
4621,4.HowdoesarepeaterextendthelengthofaLAN?
4622,5.Howisahubrelatedtoarepeater?
4623,6.Whatisthedifference betweenaforwarding portandablocking port?
4624,7.Whatisthedifference betweenabusbackbone andastarbackbone?
4625,8.HowdoesaVLANsaveacompany timeandmoney?
4626,9.HowdoesaVLANprovideextrasecurityforanetwork?
4627,10.HowdoesaVLANreducenetworktraffic?
4628,"11.Whatisthebasisformembership inaVLAN?SECTION 15.7PRACTICE SET465
Exercises
12.Complete thetableinFigure15.6aftereachstationhassentapackettoanother
station."
4629,"13.Findthespanning treeforthesysteminFigure15.7.
14.Findthespanning treeforthesysteminFigure15.8ifbridgeB5isremoved."
4630,15.Findthespanning treeforthesysteminFigure15.8ifbridgeB2isremoved.
4631,"16.Findthespanning treeforthesysteminFigure15.8ifB5isselectedastheroot
bridge."
4632,"17.InFigure15.6,weareusingabridge.Canwereplacethebridgewitharouter?"
4633,Explaintheconsequences.
4634,"18.Abridgeusesafilteringtable;arouterusesaroutingtable.Canyouexplainthe
difference?"
4635,"19.CreateasystemofthreeLANswithfourbridges.Thebridges(B1toB4)connect
theLANsasfollows:
a.B1connects LAN1andLAN2."
4636,b.B2connects LAN1andLAN3.
4637,c.B3connects LAN2andLAN3.
4638,"d.B4connects LAN1,LAN2,andLAN3."
4639,"ChooseBIastherootbridge.Showtheforwarding andblocking ports,after
applying thespanning treeprocedure."
4640,"20.Whichonehasmoreoverhead, abridgeorarouter?Explainyouranswer."
4641,"21.Whichonehasmoreoverhead, arepeaterorabridge?Explainyouranswer."
4642,"22.Whichonehasmoreoverhead, arouteroragateway?"
4643,"Explainyouranswer.CHAPTER 16
WirelessWANs:CellularTelephone
andSatelliteNetworks
Wediscussed wirelessLANsinChapter14.Wireless technology isalsousedincellular
telephony andsatellitenetworks."
4644,"Wediscusstheformerinthischapteraswellasexam­
plesofchannelization accessmethods (seeChapter12).Wealsobrieflydiscusssatellite
networks, atechnology thateventually willbelinkedtocellulartelephony toaccessthe
Internetdirectly."
4645,"16.1CELY"",ULAR lELEPHONY
Cellular telephony isdesigned toprovidecommunications between twomoving
units,calledmobilestations(MSs),orbetween onemobileunitandonestationary
unit,oftencalledalandunit.Aserviceprovider mustbeabletolocateandtracka
caller,assignachanneltothecall,andtransferthechannelfrombasestationtobase
stationasthecallermovesoutofrange."
4646,"Tomakethistracking possible, eachcellularserviceareaisdividedintosmall
regionscalledcells.Eachcellcontainsanantennaandiscontrolled byasolarorACpow­
erednetworkstation,calledthebasestation(BS).Eachbasestation,intum,iscontrolled
byaswitching office,calledamobileswitching center(MSC).TheMSCcoordinates
communication betweenallthebasestationsandthetelephone centraloffice.Itisacom­
puterized centerthatisresponsible forconnecting calls,recording callinformation, and
billing(seeFigure16.1)."
4647,"Cellsizeisnotfixedandcanbeincreased ordecreased depending onthepopula­
tionofthearea.Thetypicalradiusofacellis1to12mi.High-densityareasrequire
more,geographically smallercellstomeettrafficdemands thandolow-density areas."
4648,"Oncedetermined, cellsizeisoptimized topreventtheinterference ofadjacent cell
signals.Thetransmission powerofeachcelliskeptlowtopreventitssignalfrominter­
feringwiththoseofothercells."
4649,"Frequency-Reuse Principle
Ingeneral,neighboring cellscannotusethesamesetoffrequencies forcommunication
becauseitmaycreateinterference fortheuserslocatednearthecellboundaries."
4650,"How­
ever,thesetoffrequencies available islimited,andfrequencies needtobereused.A
467468CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.1Cellularsystem
Mobileswitching
center 1-------1:....---l:f,
(MSC)
MS
Stationary
phonePublicswitched
telephone network
(PSTN)Cell
frequency reusepatternisaconfiguration ofNcells,Nbeingthereusefactor,inwhich
eachcellusesaunique set offrequencies."
4651,"Whenthepatternisrepeated, thefrequencies
canbereused.Thereareseveraldifferent patterns.Figure16.2showstwoofthem."
4652,"Figure16.2Frequency reusepatterns
a.Reusefactorof4 b.Reusefactorof7
Thenumbers inthecellsdefinethepattern.Thecellswiththesamenumberina
patterncanusethesamesetoffrequencies."
4653,"Wecallthesecellsthereusingcells.AsFig­
ure16.2shows,inapatternwithreusefactor4,onlyonecellseparates thecellsusing
thesamesetoffrequencies."
4654,"Inthepatternwithreusefactor7,twocellsseparatethe
reusingcells."
4655,"Transmitting
Toplaceacallfromamobilestation,thecallerentersacodeof7or10digits(aphone
number)andpressesthesendbutton.Themobilestationthenscanstheband,seekinga
setupchannelwithastrongsignal,andsendsthedata(phonenumber) totheclosest
basestationusingthatchannel.ThebasestationrelaysthedatatotheMSC.TheMSCSECTION 16.1CELLULAR TELEPHONY 469
sendsthedataontothetelephone centraloffice.Ifthecalledpartyisavailable, acon­
nectionismadeandtheresultisrelayedbacktotheMSC.Atthispoint,theMSC
assignsanunusedvoicechannel tothecall,andaconnection isestablished."
4656,"The
mobilestationautomatically adjustsitstuningtothenewchannel, andcommunication
canbegin."
4657,"Receiving
Whenamobilephoneiscalled,thetelephone centralofficesendsthenumbertothe
MSC.TheMSCsearches forthelocationofthemobilestationbysendingquerysig­
nalstoeachcellinaprocesscalledpaging.Oncethemobilestationisfound,theMSC
transmits aringingsignaland,whenthemobile station answers, assignsavoicechan­
neltothecall,allowing voicecommunication tobegin."
4658,"Handoff
Itmayhappenthat,duringaconversation, themobilestationmovesfromonecellto
another.Whenitdoes,thesignalmaybecomeweak.Tosolvethisproblem, theMSC
monitors thelevelofthesignaleveryfewseconds."
4659,"Ifthestrengthofthesignaldimin­
ishes,theMSCseeksanewcellthatcanbetteraccommodate thecommunication."
4660,"The
MSCthenchanges thechannelcarrying thecall(handsthesignalofffromtheold
channeltoanewone)."
4661,HardHandoff Earlysystemsusedahardhandoff.
4662,"Inahardhandoff,amobilestation
onlycommunicates withonebasestation.WhentheMSmovesfromonecelltoanother,
communication mustfirstbebrokenwiththepreviousbasestationbeforecommunication
canbeestablished withthenewone.Thismaycreatearoughtransition."
4663,SoftHandoff Newsystemsuseasofthandoff.
4664,"Inthiscase,amobilestationcan
communicate withtwobasestationsatthesametime.Thismeansthat,duringhandoff,
amobilestationmaycontinue withthenewbasestationbeforebreaking offfromthe
oldone."
4665,"Roaming
Onefeatureofcellulartelephony iscalledroaming."
4666,"Roaming means,inprinciple, that
ausercanhaveaccesstocommunication orcanbereachedwherethereiscoverage."
4667,"A
serviceprovider usuallyhaslimitedcoverage."
4668,"Neighboring serviceproviders canpro­
videextended coverage througharoaming contract."
4669,"Thesituation issimilartosnail
mailbetween countries."
4670,"Thechargefordeliveryofaletterbetween twocountries can
bedivideduponagreement bythetwocountries."
4671,"FirstGeneration
Cellularteleph!Jny isnowinitssecondgeneration withthethirdonthehorizon."
4672,"The
firstgeneration wasdesigned forvoicecommunication usinganalogsignals.Wediscuss
onefirst-generation mobile system usedinNorthAmerica, AMPS.470CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
AMPS
Advanced MobilePhoneSystem(AMPS) isoneoftheleadinganalogcellularsys­
temsinNorthAmerica.ItusesFDMA(seeChapter12)toseparatechannels inalink."
4673,AMPSisananalogcellularphonesystemusingFDMA.
4674,"Bands AMPSoperates intheISM800-MHz band.Thesystemusestwoseparate
analogchannels, oneforforward(basestationtomobilestation)communication and
oneforreverse(mobilestationtobasestation)communication."
4675,"Thebandbetween824
and849MHzcarriesreversecommunication; thebandbetween869and894MHzcarries
forwardcommunication (seeFigure16.3)."
4676,"Figure16.3CellularbandsforAMPS
Eachbandis25MHz,
madeof8323D-kHzanalogchannels
Forward communication: basetomobile
•849
MHz
Reversecommunication: mobiletobase•
Eachbandisdividedinto832channels."
4677,"However, twoproviders canshareanarea,
whichmeans416channels ineachcellforeachprovider."
4678,"Outofthese416,21channels
areusedforcontrol,whichleaves395channels."
4679,"AMPShasafrequency reusefactor
of7;thismeansonlyone-seventh ofthese395trafficchannels areactuallyavailable in
acell."
4680,Transmission AMPSusesFMandFSKformodulation.
4681,"Figure16.4showsthetrans­
missioninthereversedirection."
4682,"Voicechannels aremodulated usingFM,andcontrol
channels useFSKtocreate30-kHzanalogsignals.AMPSusesFDMAtodivideeach
25-MHzbandinto3D-kHzchannels."
4683,"SecondGeneration
Toprovidehigher-quality (lessnoise-prone) mobilevoicecommunications, thesecond
generation ofthecellularphonenetworkwasdeveloped."
4684,"Whilethefirstgeneration was
designed foranalogvoicecommunication, thesecondgeneration wasmainlydesigned
fordigitized voice.Threemajorsystemsevolvedinthesecondgeneration, asshownin
Figure16.5.Wewilldiscusseachsystemseparately.SECTION 16.1CELLULAR TELEPHONY 471
Figure16.4AMPSreversecommunication band
,--...;--, ,.....-.."
4685,"....IlJ1.."".I \(-"""".......,FDMA1-----------------1
I30 1Iklli 1
I
I
---:;;...:...:;::..::;:.,.---T....IiiW-....----l."
4686,"........---'-_~_'_ I
I
30kHz
Analog,._........J'....~.."
4687,"..-.....,--...."
4688,IIi I....I 11 I....
4689,"1.25-MHzband.1
Figure16.5Second-generation cellularphonesystems
TDMA-FDMA
D-AMPS
Theproductoftheevolution oftheanalogAMPSintoadigitalsystemisdigitalAMPS
(D-AMPS)."
4690,"D-AMPS wasdesigned tobebackward-compatible withAMPS.This
meansthatinacell,onetelephone canuseAMPSandanotherD-AMPS."
4691,"D-AMPS was
firstdefinedbyIS-54(InterimStandard 54)andlaterrevisedbyIS-136."
4692,BandD-AMPS usesthesamebandsandchannels asAMPS.
4693,"Transmission Eachvoicechannelisdigitized usingaverycomplex PCMandcom­
pression technique."
4694,"Avoicechannelisdigitized to7.95kbps.Three7.95-kbps digital
voicechannels arecombined usingTDMA.Theresultis48.6kbpsofdigitaldata;much
ofthisisoverhead."
4695,"AsFigure16.6shows,thesystemsends25framespersecond,with
1944bitsperframe.Eachframelasts40ms(1/25)andisdividedintosixslotsshared
bythreedigitalchannels; eachchannelisallottedtwoslots."
4696,"Eachslotholds324bits.However, only159bitscomesfromthedigitized voice;
64bitsareforcontroland101bitsareforerrorcorrection."
4697,"Inotherwords,eachchannel
drops159bitsofdataintoeachofthetwochannels assigned toit.Thesystemadds
64controlbitsand101error-correcting bits.472CHAPTER 16WIRELESS WANs:CEllULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.6D-AMPS
,---------..7.95 kbps
~~--l
7.95kbps
,---------.."
4698,"7.95kbps
--;:""'~--l I------+--+---r--+--+---,
FDMA------------------,
48.6kbps~ :30kHz I
I QPSK30kHz:l;?(--""...""--V--',...,,--',i--....."" I~.,''''""I
I I
~PSK30kHz:(--\A...(--',""._',...,'--',!
Channel002------""1 .'dlllWll !""! 1I II :' I
I • I
Channel 832------""1~ 30kHz:t-v--':..·,ry--,;...0 ~
IIj 25-MHzbandIj, •j
I -----------~
Theresulting 48.6kbpsofdigitaldatamodulates acarrierusingQPSK;theresult
isa3D-kHzanalogsignal.Finally,the3D-kHzanalogsignalssharea25-MHz band
(FDMA)."
4699,D-AMPS hasafrequency reusefactorof7.
4700,"D-AMPS, or18-136,isadigitalcellularphonesystemusingTDMAandFDMA."
4701,"GSM
TheGlobalSystemforMobileCommunication (GSM)isaEuropean standard that
wasdeveloped toprovideacommon second-generation technology forallEurope.The
aimwastoreplaceanumberofincompatible first-generation technologies."
4702,Bands GSMusestwobandsforduplexcommunication.
4703,"Eachbandis25MHz
inwidth,shiftedtoward900MHz,asshowninFigure16.7.Eachbandisdividedinto
124channelsof200kHzseparated byguardbands."
4704,"Figure16.7GSMbands
Band=25MHz=124channels
1 1
890 Reverseband:124channels 915
MHz MHz
------_-1~935 Forward band:124channels 960
MHz MHzSECTION 16.1CELLULAR TELEPHONY 473
Transmission Figure16.8showsaGSMsystem.Eachvoicechannelisdigitized and
compressed toa13-kbpsdigitalsignal.Eachslotcarries156.25bits(seeFigure16.9).Eight
slotsshareaframe(TDMA)."
4705,Twenty-six framesalsoshareamultiframe (TDMA).
4706,"We
cancalculate thebitrateofeachchannelasfollows:
Channeldatarate=(11120 IDS)x20X8X156.25:;:::270.8kbps
Figure16.8GSM
Channel 0018Users13
,------,."
4707,"kbpsM!-------l t--""'------.....,
13
1:iI-.=...:::~,------,."
4708,"kbps
-----------------------rY-""'-'-I""""""""T""""'1"""""""""" :T,
:D
I:M
:A
Channel 002------1..:....---------:..---1
~;P••~~"""":~""•••• ~~•••~'
Channel 124
--------1.l+-I.--...:..z-s--
MHz,-'-b-an.md-m,~l-> ~i
--~--~----------~
Each270.8-kbps digitalchannelmodulates acarrierusingGMSK(aformof
FSKusedmainlyinEuropean systems); theresultisa200-kHz analogsignal.Finally
124analogchannels of200kHzarecombined usingFDMA.Theresultisa25-MHz
band.Figure16.9showstheuserdataandoverhead inamultiframe."
4709,"Thereadermayhavenoticedthelargeamountofoverhead inTDMA.Theuser
dataareonly65bitsperslot.Thesystemaddsextrabitsforerrorcorrection tomakeit
114bitsperslot.Tothis,controlbitsareaddedtobringitupto156.25bitsperslot."
4710,"Eightslotsareencapsulated inaframe.Twenty-four trafficframesandtwoadditional
controlframesmakeamultiframe."
4711,"Amultiframe hasadurationof120ms.However,
thearchitecture doesdefinesuperframes andhyperframes thatdonotaddanyoverhead;
wewillnotdiscussthemhere."
4712,"ReuseFactor Becauseofthecomplex errorcorrection mechanism, GSMallowsa
reusefactoraslowas3.474 CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.9Multiframe components
165bits1Userdata
II
114bitsIUserdataplu.s___ .errorcontrolbits
IIIUserdataplus
156.25bitserrorcontrolbitsand
f----------: .....=-""'""""TDMAcontrolbits--
bllrrm ..."
4713,"rnmrn
,,,~rame=8slots Frame=8slot~///
1multiframe '""26frames
24trafficframes+2controlframes
I,120ms
GSMisadigitalcellularphonesystemusingTDMAandFDMA."
4714,"IS-95
Oneofthedominant second-generation standards inNorthAmerica isInterimStan­
dard95(IS-95).ItisbasedonCDMAandDSSS."
4715,BandsandChannels IS-95usestwobandsforduplexcommunication.
4716,"Thebands
canbethetraditional ISM800-MHz bandortheISM1900-MHz band.Eachbandis
dividedinto20channels of1.228MHzseparated byguardbands.Eachserviceprovider
isallotted10channels."
4717,"IS-95canbeusedinparallelwithAMPS.EachIS-95channelis
equivalent to41AMPSchannels (41x30kHz;::::1.23MHz)."
4718,"Synchronization Allbasechannels needtobesynchronized touseCDMA.Topro­
videsynchronization, basesusetheservicesofGPS(GlobalPositioning System), a
satellitesystemthatwediscussinthenextsection."
4719,"Forward Transmission IS-95hastwodifferenttransmission techniques: oneforuse
intheforward(basetomobile)direction andanotherforuseinthereverse(mobileto
base)direction."
4720,"Intheforwarddirection, communications between thebaseandall
mobilesaresynchronized; thebasesendssynchronized datatoallmobiles.Figure16.10
showsasimplified diagramfortheforwarddirection."
4721,"Eachvoicechannelisdigitized, producing dataatabasicrateof9.6kbps.After
addingerror-correcting andrepeating bits,andinterleaving, theresultisasignalof
19.2ksps(kilosignals persecond)."
4722,"Thisoutputisnowscrambled usinga19.2-ksps
signal.Thescrambling signalisproduced fromalongcodegenerator thatusestheelec­
tronicserialnumber(ESN)ofthemobilestationandgenerates 242pseudorandom chips,
eachchiphaving42bits.Notethatthechipsaregenerated pseudorandomly, notran­
domly,becausethepatternrepeatsitself.Theoutputofthelongcodegenerator isfedto
adecimator, whichchooses1bitoutof64bits.Theoutputofthedecimator isusedfor
scrambling."
4723,"Thescrambling isusedtocreate privacy~theESNisuniqueforeachstation.SECTION 16.1CEILULAR TELEPHONY 475
Figure16.10 IS-95forward transmission
25-MHzbandFDMA
I
I
Il.Z28
IMHzI~
.--------.:~:.~."" ...~...,,'.-~---"":
Ililillillili&i$j\L.' •
ch'-ann-el-OZ .....i;""...-':-...:------':
I
I
II:•••""-••~: -- ~•"".•"":'+."
4724,"ChannelZO ~-----~~'T-I
Digitalchannel63ESN,-_--,."
4725,"9.6 19.Z
kbpsErrorcon:ecting."
4726,"ksps
repeatmg,
interleavingCDMA
-------~-..,wo
Theresultofthescrambler iscombined usingCDMA."
4727,"Foreachtrafficchannel,
oneWalsh64x64rowchipisselected."
4728,"Theresultisasignalof1.228Mcps(megachips
persecond)."
4729,"19.2kspsx64cps=1.228Mcps
ThesignalisfedintoaQPSKmodulator toproduceasignalof1.228MHz.The
resulting bandwidth isshiftedappropriately, usingFDMA.Ananalogchannelcreates
64digitalchannels, ofwhich55channels aretrafficchannels (carrying digitized voice)."
4730,"Ninechannels areusedforcontrolandsynchronization:
oChannel0isapilotchannel.Thischannelsendsacontinuous streamof1stomobile
stations.Thestreamprovides bitsynchronization, servesasaphasereference for
demodulation, andallowsthemobilestationtocompare thesignalstrengthof
neighboring basesforhandoffdecisions."
4731,oChannel 32givesinformation aboutthesystemtothemobilestation.
4732,"oChannels 1to7areusedforpaging,tosendmessages tooneormoremobile
stations."
4733,"oChannels 8to31and33to63aretrafficchannels carryingdigitized voicefromthe
basestationtothecorresponding mobilestation."
4734,"Reverse Transmission TheuseofCDMAintheforward direction ispossible
becausethepilotchannelsendsacontinuous sequence ofIstosynchronize transmis­
sion.Thesynchronization isnotusedinthereversedirection becauseweneedanentity
todothat,whichisnotfeasible."
4735,"InsteadofCDMA,thereversechannels useDSSS
(directsequence spreadspectrum), whichwediscussed inChapter8.Figure16.11shows
asimplified diagramforreversetransmission.476CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELliTE NETWORKS
Figure16.11IS-95reversetransmission
I: I
II I
I II I
L !:::::.eo..!
Channel20:I I:
I 25·MHzband I• •I L _DSSSr-------------I
I 1.228 I
I1.228 MHz I FDMA
IMcps~ r----------------
::1.228 :
III,MHz.I III III :•••:"",:.' I
Eachvoicechannelisdigitized, producing dataatarateof9.6kbps.However,
afteraddingerror-correcting andrepeating bits,plusinterleaving, theresultisasignal
of28.8ksps.Theoutputisnowpassedthrougha6/64symbolmodulator."
4736,"Thesymbols
aredividedintosix-symbol chunks,andeachchunkisinterpreted asabinarynumber
(from0to63).Thebinarynumberisusedastheindextoa64x64Walshmatrixfor
selection ofarowofchips.Notethatthisprocedure isnotCDMA;eachbitisnot
multiplied bythechipsinarow.Eachsix-symbol chunkisreplaced bya64-chip
code.Thisisdonetoprovideakindoforthogonality; itdifferentiates thestreamsof
chipsfromthedifferent mobilestations.Theresultcreatesasignalof307.2kcpsor
(28.8/6)x64."
4737,"Spreading isthenextstep;eachchipisspreadinto4.AgaintheESNofthemobile
stationcreatesalongcodeof42bitsatarateof1.228Mcps,whichis4times307.2.
Afterspreading, eachsignalismodulated usingQPSK,whichisslightlydifferentfrom
theoneusedintheforwarddirection; wedonotgointodetailshere.Notethatthereis
nomultiple-access mechanism here;allreversechannels sendtheiranalogsignalinto
theair,butthecorrectchipswillbereceivedbythebasestationduetospreading."
4738,"Although wecancreate242-1digitalchannels inthereversedirection (because of
thelongcodegenerator), normally 94channels areused;62aretrafficchannels, and
32arechannels usedtogainaccesstothebasestation."
4739,IS-95isadigitalcellularphonesystemusingCDMAlDSSS andFDMA.
4740,"TwoDataRateSetsIS-95definestwodataratesets,withfourdifferentratesineach
set.Thefirstsetdefines9600,4800,2400,and1200bps.If,forexample, theselected
rateis1200bps,eachbitisrepeated 8timestoprovidearateof9600bps.Thesecond
setdefines14,400,7200,3600,and1800bps.Thisispossiblebyreducing thenumber
ofbitsusedforerrorcorrection."
4741,"Thebitratesinasetarerelatedtothe activity ofthe
channel.Ifthechannelissilent,only1200bitscanbetransferred, whichimproves the
spreading byrepeating eachbit8times."
4742,"Frequency-Reuse Factor InanIS-95system,thefrequency-reuse factorisnormally 1
becausetheinterference fromneighboring cellscannotaffectCDMAorDSSStransmission.SECTION 16.1CELLUlAR TELEPHONY 477
SoftHandoff Everybasestationcontinuously broadcasts signalsusingitspilot
channel.Thismeansamobilestationcandetectthepilotsignalfromitscellandneigh­
boringcells.Thisenablesamobilestationtodoasofthandoffincontrasttoahard
handoff."
4743,"pes
Beforeweleavethediscussion ofsecond-generation cellulartelephones, letusexplain
atermgenerally heardinrelationtothisgeneration: PCS.Personal communications
system(peS)doesnotrefertoasingletechnology suchasGSM,18-136,or18-95.Itis
agenericnameforacommercial systemthatoffersseveralkindsofcommunication
services."
4744,"Common featuresofthesesystemscanbesummarized:
1.Theymayuseanysecond-generation technology (GSM,IS-136,orIS-95)."
4745,"2.Theyusethe1900-MHz band,whichmeansthatamobilestationneedsmorepower
becausehigherfrequencies haveashorterrangethanlowerones.However, sincea
station'spowerislimitedbytheFCC,thebasestationandthemobilestationneed
tobeclosetoeachother(smallercells)."
4746,"3.Theyoffercommunication servicessuchasshortmessageservice(SMS)andlimited
Internetaccess."
4747,"ThirdGeneration
Thethirdgeneration ofcellulartelephony referstoacombination oftechnologies that
provideavarietyofservices."
4748,"Ideally,whenitmatures,thethirdgeneration canprovide
bothdigitaldataandvoicecommunication."
4749,"Usingasmallportabledevice,aperson
shouldbeabletotalktoanyoneelseintheworldwithavoicequalitysimilartothatof
theexistingfixedtelephone network."
4750,"Apersoncandownload andwatchamovie,can
download andlistentomusic,cansurftheInternetorplaygames,canhaveavideo
conference, andcandomuchmore.Oneoftheinteresting characteristics ofathird­
generation systemisthattheportabledeviceisalwaysconnected; youdonotneedto
dialanumbertoconnecttotheInternet."
4751,"Thethird-generation conceptstartedin1992,whenITUissuedablueprint called
theInternet MobileCommunication 2000(IMT-2000)."
4752,"Theblueprint definessome
criteriaforthird-generation technology asoutlinedbelow:
oVoicequalitycomparable tothatoftheexistingpublictelephone network."
4753,"oDatarateof144kbpsforaccessinamovingvehicle(car),384kbpsforaccessas
theuserwalks(pedestrians), and2Mbpsforthestationary user(officeorhome)."
4754,oSupportforpacket-switched andcircuit-switched dataservices.
4755,"oAbandof2GHz.
oBandwidths of2MHz.
oInterface totheInternet."
4756,"Themaingoalofthird-generation cellulartelephony istoprovide
universal personal communication.478CHAPTER 16WIRELESS WANs:CELLUlAR TELEPHONE ANDSATELLITE NETWORKS
IMT-2000 RadioInterface
Figure16.12showstheradiointerfaces (wireless standards) adoptedby1MT-2000."
4757,"All
fivearedeveloped fromsecond-generation technologies."
4758,"Thefirsttwoevolvefrom
COMAtechnology."
4759,"Thethirdevolvesfromacombination ofCOMAandTOMA.The
fourthevolvesfromTOMA,andthelastevolvesfrombothFOMAandTOMA."
4760,"Figure16.12IMT-2000 radiointeifaces
IMT-SC IMT-FT
Singlecarrier Frequency time
CDMAIMT-TC
Timecode
CDMA&TDMA TDMA TDMA&FDMA
IMT-DSThisapproach usesaversionofCOMAcalledwideband COMAorW-COMA."
4761,W-COMA usesa5-MHzbandwidth.
4762,"Itwasdeveloped inEurope,anditiscompatible
withtheCOMAusedinIS-95."
4763,"IMT-MC Thisapproach wasdeveloped inNorthAmerica andisknownasCOMA
2000.Itisanevolution ofCOMAtechnology usedinIS-95channels.Itcombines the
newwideband (I5-MHz) spreadspectrum withthenarrowband (l.25-MHz) COMAof
IS-95.Itisbackward-compatible withIS-95.Itallowscommunication onmultiple
1.25-MHz channels(l,3,6,9,12times),upto15MHz.Theuseofthewiderchannels
allowsittoreachthe2-Mbpsdataratedefinedforthethirdgeneration."
4764,"IMT-TCThisstandard usesacombination ofW-COMA andTDMA.Thestandard
triestoreachtheIMT-2000 goalsbyaddingTOMAmultiplexing toW-COMA."
4765,IMT-SCThisstandardonlyusesTOMA.
4766,IMT-FTThisstandardusesacombination ofFDMAandTOMA.
4767,"16.2SATELLITE NETWORKS
Asatellitenetwork isacombination ofnodes,someofwhicharesatellites, thatprovides
communication fromonepointontheEarthtoanother.Anodeinthenetworkcanbea
satellite,anEarthstation,oranend-user terminalortelephone."
4768,"Although anaturalsatel­
lite,suchastheMoon,canbeusedasarelayingnodeinthenetwork, theuseofartificial
satellitesispreferred becausewecaninstallelectronic equipment onthesatellitetoregen­
eratethesignalthathaslostitsenergyduringtravel.Anotherrestriction onusingnatural
satellitesistheirdistances fromtheEarth,whichcreatealongdelayincommunication."
4769,Satellitenetworks arelikecellularnetworks inthattheydividetheplanetintocells.
4770,"Satellites canprovidetransmission capability toandfromanylocationonEarth,no
matterhowremote.Thisadvantage makeshigh-quality communication available toSECTION 16.2SATELLITE NETWORKS 479
undeveloped partsoftheworldwithoutrequiring ahugeinvestment inground-based
infrastructure."
4771,"Orbits
Anartificialsatelliteneedstohaveanorbit~thepathinwhichittravelsaroundtheEarth."
4772,"Theorbitcanbeequatorial, inclined, orpolar,asshowninFigure16.13."
4773,"Figure16.13Satelliteorbits
Orbit
OrbitOrbit
a.Equatorial-orbit satellite b.Inclined-orbitsatellite c.Polar-orbit satellite
Theperiodofasatellite, thetimerequiredforasatellitetomakeacomplete trip
aroundtheEarth,isdetermined byKepler'slaw,whichdefinestheperiodasafunction
ofthedistanceofthesatellitefromthecenteroftheEarth."
4774,"Example 16.1
WhatistheperiodoftheMoon,according toKepler's law?"
4775,"Period:::: Cxdistance 1.5
HereCisaconstant approximately equalto1/100.Theperiodisinsecondsandthedistancein
kilometers."
4776,"Solution
TheMoonislocatedapproximately 384,000 kmabovetheEarth.TheradiusoftheEarthis
6378km.Applying theformula, weget
Period=_1_(384,000 +6378)1.5=2,439,090 s=1month100
Example 16.2
According toKepler'slaw,whatistheperiodofasatellitethatislocatedatanorbitapproximately
35,786kmabovetheEarth?"
4777,"Solution
Applying theformula, weget
Period=1~(35,786+6378/5=86,579s=24h480CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Thismeansthatasatellitelocatedat35,786kmhasaperiodof24h,whichisthesameasthe
rotationperiodoftheEarth.Asatellitelikethisissaidtobestationary totheEarth.Theorbit,as
wewillsee,iscalledageosynchronous orbit."
4778,"Footprint
Satellites process microwaves withbidirectional antennas (line-of-sight)."
4779,"Therefore, the
signalfromasatelliteisnormally aimedataspecificareacalledthefootprint."
4780,"Thesig­
nalpoweratthecenterofthefootprint ismaximum."
4781,"Thepowerdecreases aswemove
outfromthefootprint center.Theboundary ofthefootprint isthelocationwherethe
powerlevelisatapredefined threshold."
4782,"ThreeCategories ofSatellites
Basedonthelocationoftheorbit,satellites canbedividedintothreecategOlies: geosta­
tionaryEarthorbit(GEO),low-Earth-orbit (LEO),andmiddle-Earth-orbit (MEO)."
4783,Figure16.14showsthetaxonomy.
4784,"Figure16.14 Satellitecategories
Figure16.15showsthesatellitealtitudes withrespecttothesurfaceoftheEarth."
4785,"Thereisonlyoneorbit,atanaltitudeof35,786kInfortheOEOsatellite.MEOsatellites
arelocatedataltitudesbetween5000and15,000kIn.LEOsatellites arenormally below
analtitudeof2000km."
4786,"Figure16.15 Satelliteorbitaltitudes
Altitude
(km)
35,786
-~~~-GEO
UpperVanAllenbelt
15,000~~~ ~MEa
5000LowerVanAllenbelt
0~~~qf'~ ~LEOSECTION 16.2SATELLITE NETWORKS 481
Onereasonforhavingdifferent orbitsisduetotheexistence oftwoVanAllen
belts.AVanAllenbeltisalayerthatcontains chargedparticles."
4787,"Asatelliteorbitingin
oneofthesetwobeltswouldbetotallydestroyed bytheenergetic chargedparticles."
4788,TheMEOorbitsarelocatedbetweenthesetwobelts.
4789,"Frequency BandsforSatelliteCommunication
Thefrequencies reserved forsatellitemicrowave communication areinthegigahertz
(OHz)range.Eachsatellitesendsandreceivesovertwodifferent bands.Transmission
fromtheEarthtothesatelliteiscalledtheuplink.Transmission fromthesatellitetotheEarth
iscalledthedownlink."
4790,Table16.1givesthebandnamesandfrequencies foreachrange.
4791,"Table16.1Satellitefrequency bands
Band Downlink, GHz Uplink,GHz Bandwidth, MHz
L 1.5 1.6 15
S 1.9 2.2 70
C 4.0 6.0 500
Ku 11.0 14.0 500
Ka 20.0 30.0 3500
GEOSatellites
Line-of-sight propagation requiresthatthesendingandreceiving antennas belocked
ontoeachother'slocationatalltimes(oneantennamusthavetheotherinsight).For
thisreason,asatellitethatmovesfasterorslowerthantheEarth'srotationisuseful
onlyforshortperiods.Toensureconstant communication, thesatellitemustmoveat
thesamespeedastheEarthsothatitseemstoremainfixedaboveacertainspot.Such
satellites arecalledgeostationary."
4792,"Becauseorbitalspeedisbasedonthedistancefromtheplanet,onlyoneorbitcanbe
geostationary."
4793,"Thisorbitoccursattheequatorial planeandisapproximately 22,000mi
fromthesurfaceoftheEarth."
4794,"Butonegeostationary satellitecannotcoverthewholeEarth.Onesatelliteinorbit
hasline-of-sight contactwithavastnumberofstations,butthecurvature oftheEarth
stillkeepsmuchoftheplanetoutofsight.Ittakesaminimum ofthreesatellites equi­
distantfromeachotheringeostationary Earthorbit(OEO)toprovidefullglobaltransmis­
sion.Figure16.16showsthreesatellites, each120°fromanotheringeosynchronous
orbitaroundtheequator.TheviewisfromtheNorthPole."
4795,"MEOSatellites
Medium-Earth-orbit (MEO)satellites arepositioned between thetwoVanAllen
belts.Asatelliteatthisorbittakesapproximately 6-8hourstocircletheEarth."
4796,"GlobalPositioning System
OneexampleofaMEOsatellitesystemistheGlobalPositioning System(GPS),con­
stractedandoperated bytheUSDepartment ofDefense, orbitingatanaltitudeabout482CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Figure16.16Satellites ingeostationary orbit
18,000km(11,000mi)abovetheEarth.Thesystemconsistsof24satellites andisusedfor
land,sea,andairnavigation toprovidetimeandlocations forvehiclesandships.GPS
uses24satellites insixorbits,asshowninFigure16.17.Theorbitsandthelocations of
thesatellites ineachorbitaredesigned insuchawaythat,atanytime,foursatellites
arevisiblefromanypointonEarth.AGPSreceiverhasanalmanac thattellsthecurrent
positionofeachsatellite."
4797,"Figure16.17 Orbitsforglobalpositioning system(GPS)satellites
Trilateration GPSisbasedonaprinciple calledtrilateration."
4798,"tOnaplane,ifwe
knowourdistancefromthreepoints,weknowexactlywhereweare.Letussay thatwe
are10milesawayfrompointA,12milesawayfrompointB,and15milesawayfrom
pointC.IfwedrawthreecircleswiththecentersatA,B,andC,wemustbesomewhere
oncircleA,somewhere oncircleB,andsomewhere oncircleC.Thesethreecirclesmeet
atonesinglepoint(ifourdistances arecorrect), ourposition."
4799,"Figure16.18ashowsthe
concept."
4800,"Inthree-dimensional space,thesituation isdifferent."
4801,"Threespheresmeetintwo
pointsasshowninFigure16.18b.Weneedatleastfourspherestofindourexactposition
inspace(longitude, latitude, andaltitude)."
4802,"However, ifwehaveadditional factsabout
ourlocation(forexample, weknowthatwearenotinsidetheoceanorsomewhere in
tThetennstrilateration andtriangulation arenonnally usedinterchangeably."
4803,"Weusethewordtrilateration,
whichmeansusingthreedistances, insteadoftriangulation, whichmaymeanusingthreeangles.SECTION 16.2SATELliTE NETWORKS 483
Figure16.18 Trilateration onaplane
""""-/ B \
Il.--\-///--,
""I/ \~/ \
""I~'eC\/ \ I
I \ \ I
\Ae',I /
\ .....1.-._...."""" /.....--
a.Two-dimensional trilateration b.Three-dimensional trilateration
space),threespheresareenough,becauseoneofthetwopoints,wherethespheresmeet,
issoimprobable thattheothercanbeselectedwithoutadoubt."
4804,"Measuring theDistance Thetrilateration principle canfindourlocationontheearthif
weknowourdistancefromthreesatellites andknowthepositionofeachsatellite.The
positionofeachsatellitecanbecalculated byaGPSreceiver(usingthepredetermined path
ofthesatellites)."
4805,"TheGPSreceiver,then,needstofinditsdistancefromatleastthreeGPS
satellites (centerofthespheres)."
4806,"Measuring thedistanceisdoneusingaprinciple called
one-wayranging.Forthemoment, letusassumethatallGPSsatellitesandthereceiveron
theEartharesynchronized."
4807,"Eachof24satellitessynchronously transmits acomplexsignal
eachhavingauniquepattern.Thecomputer onthereceivermeasures thedelaybetweenthe
signalsfromthesatellitesanditscopyofsignalstodetermine thedistances tothesatellites."
4808,"Synchronization Theprevious discussion wasbasedontheassumption thatthesat­
ellites'clockaresynchronized witheachotherandwiththereceiver's clock.Satellites
useatomicclockthatarepreciseandcanfunction synchronously witheachother.The
receiver's clockhowever, isanormalquartzclock(anatomicclockcostsmorethat
$50,000), andthereisnowaytosynchronize itwiththesatelliteclocks.Thereisan
unknown offsetbetween thesatelliteclocksandthereceiverclockthatintroduces a
corresponding offsetinthedistance calculation."
4809,"Because ofthisoffset,themeasured
distanceiscalledapseudorange."
4810,"GPSusesanelegantsolutiontotheclockoffsetproblem, byrecognizing thattheoff­
set'svalueisthesameforallsatellitebeingused.Thecalculation ofpositionbecomes find­
ingfourunknowns: thexpYPzpcoordinates ofthereceiver,andcommon clockoffsetdt."
4811,"Forfindingthesefourunknown values,weneedatleastfourequations."
4812,"Thismeansthat
weneedtomeasurepesudoranges fromfoursatelliteinsteadofthree.Ifwecallthefour
measured pseudoranges PRI,PR2,PR3andPR4andthecoordinates ofeachsatellite
Xi,yj,andZj(fori=1to4),wecanfindthefourpreviously mentioned unknown values
usingthefollowing four equations (thefourunknown valuesareshownincolor)."
4813,"PRI=[(Xl- xr)2+(YI-Yr)2+(zl-zr)zJlIZ+c Xdt
PRz=[(xz-xr)2+(yz-Yr)z+(zz-zr)2JI/Z+exdt
PR3=[(x3-xr)z+(Y3-Yr)z+(z3-zr)ZJ1/2+exdt
PR4=[(x4-xrP+(Y4-Yr)z+(z4-zr)ZJI/Z+exdt484CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Thecoordinates usedintheaboveformulas areinanEarth-Centered Earth-Fixed
(ECEF)reference frame,whichmeansthattheoriginofthecoordinate spaceisatthe
centeroftheEarthandthecoordinate spacerotatewiththeEarth.Thisimpliesthatthe
ECEFcoordinates ofafixedpointonthesurfaceoftheearthdonotchange."
4814,"Application GPSisusedbymilitaryforces.Forexample, thousands ofportable GPS
receivers wereusedduringthePersianGulfwarbyfootsoldiers, vehicles, andhelicop­
ters.Another useofGPSisinnavigation."
4815,"Thedriverofacarcanfindthelocationof
thecar.Thedrivercanthenconsultadatabase inthememory oftheautomobile tobe
directed tothedestination."
4816,"Inotherwords,GPSgivesthelocationofthecar,andthe
database usesthisinformation tofindapathtothedestination."
4817,"Averyinteresting appli­
cationisclocksynchronization."
4818,"Aswementioned previously, theIS-95cellulartelephone
systemusesGPStocreatetimesynchronization between thebasestations."
4819,"LEOSatellites
Low-Earth-orbit (LEO)satellites havepolarorbits.Thealtitudeisbetween 500and
2000km,witharotationperiodof90to120min.Thesatellitehasaspeedof20,000to
25,000km/h.AnLEOsystemusuallyhasacellulartypeofaccess,similartothecellu­
lartelephone system.Thefootprint normally hasadiameter of8000km.Because LEO
satellites areclosetoEarth,theround-trip timepropagation delayisnormally lessthan
20ms,whichisacceptable foraudiocommunication."
4820,"AnLEOsystemismadeofaconstellation ofsatellites thatworktogetherasanetwork;
eachsatelliteactsasaswitch.Satellites thatareclosetoeachotherareconnected through
intersatellite links(ISLs).Amobilesystemcommunicates withthesatellitethroughauser
mobilelink(UML).Asatellitecanalsocommunicate withanEarthstation(gateway)
throughagatewaylink(GWL).Figure16.19showsatypicalLEOsatellitenetwork."
4821,"Figure16.19LEOsatellitesystem
ISL~ ...I)~
;7!--~~~-
 -~i--~
~:~,-
 ~:~--~)-i)
--___Footprint -~__.:::-::.--Footprint -------------- ----------
LEOsatellites canbedividedintothreecategories: littleLEOs,bigLEOs,andbroad­
bandLEOs.ThelittleLEOsoperateunder1GHz.Theyaremostly used forlow-data-rate
messaging."
4822,"ThebigLEOsoperatebetween 1and3GHz.Globalstar andIridiumsystems
areexamples ofbigLEOs.Thebroadband LEOsprovidecommunication similartofiber­
opticnetworks."
4823,"Thefirstbroadband LEOsystemwasTeledesic.SECTION 16.2SATELLITE NETWORKS 485
IridiumSystem
TheconceptoftheIridium system,a77-satellite network, wasstartedbyMotorola in
1990.Theprojecttookeightyearstomaterialize."
4824,"Duringthisperiod,thenumberofsatel­
liteswasreduced."
4825,"Finally,in1998,theservicewasstartedwith66satellites."
4826,"Theoriginal
name,Iridium,camefromthenameofthe77thchemical element; amOreappropriate
nameisDysprosium (thenameofelement66)."
4827,"Iridiumhasgonethroughroughtimes.Thesystemwashaltedin1999duetofinan­
cialproblems; itwassoldandrestarted in2001undernewownership."
4828,"Thesystemhas66satellites dividedintosixorbits, with 11satellites ineachorbit."
4829,"Theorbitsareatanaltitudeof750km.Thesatellites ineachorbitareseparated from
oneanotherbyapproximately 32°oflatitude.Figure16.20showsaschematic diagram
oftheconstellation."
4830,"Figure16.20 Iridiumconstellation
TheIridiumsystemhas66satellites insixLEOorbits,eachatanaltitudeof750kIn.
Sinceeachsatellitehas48spotbeams,thesystemcanhaveupto3168beams.How­
ever,someofthebeamsareturnedoffasthesatelliteapproaches thepole.Thenumberof
activespotbeamsatanymomentisapproximately 2000.Eachspotbeamcoversacellon
Earth,whichmeansthatEarthisdividedintoapproximately 2000(overlapping) cells."
4831,"IntheIridiumsystem,communication betweentwouserstakesplacethroughsatel­
lites.Whenausercallsanotheruser,thecallcangothroughseveralsatellites before
reaching thedestination."
4832,"Thismeansthatrelaying isdoneinspaceandeachsatellite
needstobesophisticated enoughtodorelaying."
4833,"Thisstrategyeliminates theneedfor
manyterrestrial stations."
4834,"ThewholepurposeofIridiumistoprovidedirectworldwide communication using
handheld terminals (sameconceptascellulartelephony)."
4835,"Thesystemcanbeusedfor
voice,data,paging,fax,andevennavigation."
4836,"Thesystemcanprovideconnectivity
betweenusersatlocations whereothertypesofcommunication arenotpossible."
4837,"Thesys­
temprovides 2.4-to4.8-kbps voiceanddatatransmission betweenportabletelephones."
4838,"Transmission occursinthe1.616-to1.6126-GHzfrequency band.Intersatellite commu­
nicationoccursinthe23.18-to23.38-GHz frequency band.486CHAPTER 16WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
Iridiumisdesigned toprovidedirectworldwide voiceanddatacommunicationusing
handheld terminals, aservicesimilartocellulartelephony butonaglobalscale."
4839,"Globalstar
Globalstar isanotherLEOsatellitesystem.Thesystemuses48satellites insixpolar
orbitswitheachorbithostingeightsatellites."
4840,"Theorbitsarelocatedatanaltitudeof
almost1400lan."
4841,"TheGlobalstar systemissimilartotheIridiumsystem;themaindifference istherelay­
ingmechanism."
4842,"Communication betweentwodistantusersintheIridiumsystemrequires
relayingbetweenseveralsatellites; Globalstar communication requiresbothsatellites and
Earthstations,whichmeansthatgroundstationscancreatemorepowerful signals."
4843,"Teledesic
Teledesic isasystemofsatellites thatprovides fiber-optic-like (broadband channels,
lowerrorrate,andlowdelay)communication."
4844,"Itsmainpurposeistoprovidebroadband
Internetaccessforusersallovertheworld.Itissometimes called""Internet inthesky.""
Theprojectwasstartedin1990byCraigMcCawandBillGates;later,otherinvestors
joinedtheconsortium."
4845,Theprojectisscheduled tobefullyfunctional inthenearfuture.
4846,"Constellation Teledesic provides 288satellites in12polarorbitswitheachorbit
hosting24satellites."
4847,"Theorbitsareatanaltitudeof1350lan,asshowninFigure16.21."
4848,"Figure16.21 Teledesic
Teledesic has288satellites in12LEOorbits,eachatanaltitudeof1350kIn.
Communication Thesystemprovidesthreetypesofcommunication."
4849,"Intersatellite com­
munication allowseightneighboring satellites tocommunicate withoneanother.Com­
munication isalsopossiblebetween a'satelliteandanEarthgateway station.Userscan
communicate directlywiththenetworkusingterminals."
4850,"Earthisdividedintotensofthou­
sandsofcells.Eachcellisassignedatimeslot,andthesatellitefocusesitsbeamtothecellSECTION 16.5SUMMARY 487
atthecorresponding timeslot.Thetenninalcansenddataduringitstimeslot.Atenninal
receivesallpacketsintendedforthecell,butselectsonlythoseintendedforitsaddress."
4851,Bands Transmission occursintheKabands.
4852,"DataRateThedatarateisupto155Mbpsfortheuplinkandupto1.2Gbpsforthe
downlink."
4853,"16.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext."
4854,"Books
Wireless WANsarecompletely coveredin[Sta02],[Jam03], [AZ03],and[Sch03].Com­
munication satellites arediscussed inSection2.4of[Tan03]andSection8.5of[CouOl]."
4855,Mobiletelephone systemisdiscussed inSection2.6of[Tan03]andSection8.8of[CouOl].
4856,"16.4KEYTERMS
Advanced MobilePhoneSystem(AMPS)
cellulartelephony
digitalAMPS(D-AMPS)
downlink
footprint
geostationary Earthorbit(GEO)
GlobalPositioning System(GPS)
GlobalSystemforMobile
Communication (GSM)
Globalstar
handoff
InterimStandard 95(IS-95)
InternetMobileCommunication 2000
(IMT-2000)Iridium
low-Earth-orbit (LEO)
medium-Earth-orbit (MEO)
mobileswitching center(MSC)
orbit
personal communications system
(PCS)
reusefactor
roamIng
satellitenetwork
Teledesic
triangulation
trilateration
uplink
16.5SUMMARY
oCellulartelephony provides communication betweentwodevices.Oneorbothmay
bemobile."
4857,oAcellularserviceareaisdividedintocells.
4858,"oAdvanced MobilePhoneSystem(AMPS) isafirst-generation cellularphone
system.WIRELESS WANs:CELLULAR TELEPHONE ANDSATELLITE NETWORKS
DigitalAMPSCD-AMPS) isasecond-generation cellularphonesystemthatisa
digitalversionofAMPS."
4859,"GlobalSystemforMobileCommunication CGSM)isasecond-generation cellular
phonesystemusedinEurope."
4860,"InterimStandard 95CIS-95)isasecond-generation cellularphonesystembasedon
CDMAandDSSS."
4861,"Thethird-generation cellular phonesystemwillprovide universal personal
communication."
4862,"Asatellitenetworkusessatellites toprovidecommunication between anypoints
onEarth."
4863,"Ageostationary EarthorbitCGEO)isattheequatorial planeandrevolvesinphase
withEarth."
4864,"GlobalPositioning SystemCGPS)satellitesaremedium-Earth-orbit (MEO)satellites
thatprovidetimeandlocationinformation forvehiclesandships."
4865,"Iridiumsatellites arelow-Earth-orbit (LEO)satellites thatprovidedirectuniversal
voiceanddatacommunications forhandheld terminals."
4866,"Teledesic satellites arelow-Earth-orbit satellites thatwillprovide universal
broadband Internetaccess.488CHAPTER 16
0
0
0
0
0
0
0
0
0
16.6PRACTICE SET
ReviewQuestions
1.Whatistherelationship betweenabasestationandamobileswitching center?"
4867,2.Whatarethefunctions ofamobileswitching center?
4868,"3.Whichisbetter,alowreusefactororahighreusefactor?Explainyouranswer."
4869,4.Whatisthedifference betweenahardhandoffandasofthandoff?
4870,5.WhatisAMPS?
4871,6.Whatistherelationship betweenD-AMPS andAMPS?
4872,7.WhatisGSM?
4873,8.WhatisthefunctionoftheCDMAinIS-95?
4874,9.Whatarethethreetypesoforbits?
4875,10.WhichtypeoforbitdoesaGEOsatellitehave?Explainyouranswer.
4876,11.Whatisafootprint?
4877,12.Whatistherelationship betweentheVanAllenbeltsandsatellites?
4878,13.Compare anuplinkwithadownlink.
4879,14.WhatisthepurposeofGPS?
4880,15.Whatisthemaindifference betweenIridiumandGlobalstar?
4881,"Exercises
16.Drawacellpatternwithafrequency-reuse factorof3."
4882,"17.Whatisthemaximum numberofcallersineachcellinAMPS?SECTION 16.6PRACTICE SET 489
18.Whatisthemaximum numberofsimultaneous callsineachcellinan15-136
(D-AMPS) system,assuming noanalogcontrolchannels?"
4883,"19.Whatisthemaximum numberofsimultaneous callsineachcellinaGSMassuming
noanalogcontrolchannels?"
4884,20.Whatisthemaximum numberofcanersineachcellinanIS-95system?
4885,"21.Findtheefficiency ofAMPSintermsofsimultaneous callspermegahertz ofband­
width.Inotherwords,findthenumberofcallsthatcanbeusedinI-MHzbandwidth
allocation."
4886,22.RepeatExercise 21forD-AMPS.
4887,23.RepeatExercise 21forGSM.
4888,24.RepeatExercise 21forIS-95.
4889,"25.Guesstherelationship between a3-kHzvoicechannel anda30-kHzmodulated
channelinasystemusingAMPS."
4890,26.HowmanyslotsaresenteachsecondinachannelusingD-AMPS?
4891,"Howmanyslots
aresentbyeachuserin1s?"
4892,"27.UseKepler's formula tochecktheaccuracy ofagivenperiodandaltitudefora
GPSsatellite."
4893,"28.UseKepler's formula tocheck the accuracy ofagivenperiodandaltitudeforan
Iridiumsatellite."
4894,"29.UseKepler's formula tocheck the accuracy ofagivenperiodandaltitudefora
Globalstar satellite.CHAPTER 17
SONETISDH
Inthischapter,weintroduce awideareanetwork (WAN),SONET, thatisusedasa
transport networktocarryloadsfromotherWANs.WefirstdiscussSONETasaprotocol,
andwethenshowhowSONETnetworks canbeconstructed fromthestandards defined
intheprotocol."
4895,"Thehighbandwidths offiber-optic cablearesuitable for today'shigh-data-rate
technologies (suchasvideoconferencing) andforcarryinglargenumbers oflower-rate
technologies atthesametime.Forthisreason,theimportance offiberopticsgrowsin
conjunction withthedevelopment oftechnologies requiring highdataratesorwide
bandwidths fortransmission."
4896,Withtheirprominence cameaneedforstandardization.
4897,"TheUnitedStates(ANSI)andEurope(ITU-T)haveresponded bydefining standards
that,thoughindependent, arefundamentally similarandultimately compatible."
4898,"The
ANSIstandard iscalledtheSynchronous OpticalNetwork (SONET)."
4899,"TheITU-T
standard iscalledtheSynchronous DigitalHierarchy (SOH)."
4900,SONET wasdeveloped byANSI;SDHwasdeveloped bylTV·T.
4901,SONET/SDH isasynchronous network usingsynchronous TDMmultiplexing.
4902,Allclocksinthesystemarelockedtoamasterclock.
4903,"17.1ARCHITECTURE
Letusfirstintroduce thearchitecture ofaSONET system: signals, devices, and
connections."
4904,"Signals
SONETdefinesahierarchy ofelectrical signaling levelscalledsynchronous transport
signals(STSs).EachSTSlevel(STS-ltoSTS-192) supports acertaindatarate,speci­
fiedinmegabits persecond(seeTable17.1).Thecorresponding opticalsignalsare
calledopticalcarriers (OCs).SDHspecifies asimilarsystemcalledasynchronous
transport module(STM).STMisintended tobecompatible withexistingEuropean
491492CHAPTER 17SONETISDH
hierarchies, suchasElines,andwithSTSlevels.Tothisend,thelowestSTMlevel,
STM-l,isdefinedas155.520Mbps,whichisexactlyequaltoSTS-3."
4905,"Table17.1SONETISDH rates
STS OC Rate(Mbps) STM
STS-l OC-l 51.840
STS-3 OC-3 155.520 STM-l
STS-9 OC-9 466.560 STM-3
STS-12 OC-12 622.080 STM-4
STS-18 OC-lS 933.120 STM-6
STS-24 OC-24 1244.160 STM-8
STS-36 OC-36 1866.230 STM-12
STS-48 OC-48 2488.320 STM-16
STS-96 OC-96 4976.640 STM-32
STS-I92 OC-I92 9953.280 STM-64
AglancethroughTable17.1revealssomeinteresting points.First,thelowestlevel
inthishierarchy hasadatarateof51.840Mbps,whichisgreaterthanthatoftheDS-3
service(44.736Mbps).Infact,theSTS-lisdesigned toaccommodate dataratesequiv­
alenttothoseoftheDS-3.Thedifference incapacityisprovided tohandletheoverhead
needsoftheopticalsystem."
4906,"Second,theSTS-3rateisexactlythreetimestheSTS-lrate;andtheSTS-9rateis
exactlyone-halftheSTS-18rate.Theserelationships meanthat18STS-lchannels can
bemultiplexed intooneSTS-18,sixSTS-3channels canbemultiplexed intooneSTS-18,
andsoon."
4907,"SONETDevices
Figure17.1showsasimplelinkusingSONETdevices.SONETtransmission relieson
threebasicdevices: STSmultiplexers/demultiplexers, regenerators, add/drop multi­
plexersandterminals."
4908,"STSMultiplexer/Demultiplexer
STSmultiplexers/demultiplexers markthebeginning pointsandendpoints ofaSONET
link.Theyprovidetheinterface betweenanelectrical tributary networkandtheoptical
network."
4909,"AnSTSmultiplexer multiplexes signalsfrommultipleelectrical sourcesand
createsthecorresponding OCsignal.AnSTSdemultiplexer demultiplexes anoptical
OCsignalintocorresponding electricsignals."
4910,"Regenerator
Regenerators extendthelengthofthelinks.Aregenerator isarepeater(seeChapter15)
thattakesareceivedopticalsignal(OC-n),demodulates itintothecorresponding elec­
tricsignal(STS-n), regenerates theelectricsignal,andfinallymodulates theelectricSECTION 17.1ARCHITECTURE 493
Figure17.1AsimplenetworkusingSONETequipment
ADM:Add/drop multiplexer R:Regenerator
STSMUX:Synchronous transport signalmultiplexer T:Terminal
STSDEMUX: Synchronous transport signaldemultiplexer
tDrop
_~__JJ
Section Sectiont J
Line______ _ J
Section Section Sectionl ~
LineR R R
1---~![>----cJ.~[>-~.~1 ADM1------l~[>----i.~1
Path
signalintoitscorrespondent OC-nsignal.ASONETregenerator replacessomeofthe
existingoverhead information (headerinformation) withnewinformation."
4911,"Add/drop Multiplexer
Add/drop multiplexers allowinsertion andextraction ofsignals.Anadd/drop multi­
plexer(ADM)canaddSTSscomingfromdifferent sourcesintoagivenpathorcan
removeadesiredsignalfromapathandredirectitwithoutdemultiplexing theentire
signal.Insteadofrelyingontimingandbitpositions, add/drop multiplexers useheader
information suchasaddresses andpointers(described laterinthissection)toidentify
individual streams."
4912,"Inthesimpleconfiguration shownbyFigure17.1,anumberofincoming electronic
signalsarefedintoanSTSmultiplexer, wheretheyarecombined intoasingleoptical
signal.Theopticalsignalistransmitted toaregenerator, whereitisrecreated without
thenoiseithaspickedupintransit.Theregenerated signalsfromanumberofsources
arethenfedintoanadd/drop multiplexer."
4913,"Theadd/drop multiplexer reorganizes these
signals,ifnecessary, andsendsthemoutasdirectedbyinformation inthedataframes."
4914,"Theseremultiplexed signalsaresenttoanotherregenerator andfromtheretothe
receiving STSdemultiplexer, wheretheyarereturnedtoaformatusablebythereceiving
links."
4915,"Terminals
Aterminal isadevicethatusestheservicesofaSONETnetwork."
4916,"Forexample, inthe
Internet, aterminal canbearouterthatneedstosendpacketstoanotherrouteratthe
othersideofaSONETnetwork."
4917,"Connections
Thedevicesdefinedintheprevious sectionareconnected usingsections, lines,and
paths.494CHAPTER 17SONETISDH
Sections
Asectionistheopticallinkconnecting twoneighbor devices:multiplexer tomulti­
plexer,multiplexer toregenerator, orregenerator toregenerator."
4918,"Lines
Alineistheportionofthenetworkbetweentwomultiplexers: STSmultiplexer toadd/
dropmultiplexer, twoadd/drop multiplexers, ortwoSTSmultiplexers."
4919,"Paths
Apathistheend-to-end portionofthenetworkbetween twoSTSmultiplexers."
4920,"Ina
simpleSONEToftwoSTSmultiplexers linkeddirectlytoeachother,thesection,line,
andpatharethesame."
4921,"17.2SONETLAYERS
TheSONETstandard includes fourfunctional layers:thephotonic, thesection,the
line,andthepathlayer.Theycorrespond toboththephysicalandthedatalinklayers
(seeFigure17.2).Theheadersaddedtotheframeatthevariouslayersarediscussed
laterinthischapter."
4922,"SONETdefinesfourlayers:path,line,section,andphotonic."
4923,"Figure17.2SONETlayerscompared withOSIortheInternetlayers
Pathlayer
Linelayer
Datalink
PhysicalSectionlayer
Photonic layerI
PathLayer
Thepathlayerisresponsible forthemovement ofasignalfromitsopticalsourcetoits
opticaldestination."
4924,"Attheopticalsource,thesignalischangedfromanelectronic form
intoanopticalform,multiplexed withothersignals,andencapsulated inaframe.Atthe
opticaldestination, thereceivedframeisdemultiplexed, andtheindividual opticalsig­
nalsarechangedbackintotheirelectronic forms.Pathlayeroverhead isaddedatthis
layer.STSmultiplexers providepathlayerfunctions.SECTION 17.2SONETLAYERS 495
LineLayer
Thelinelayerisresponsible forthemovement ofasignalacrossaphysicalline.Line
layeroverhead isaddedtotheframeatthislayer.STSmultiplexers andadd/drop multi­
plexersprovidelinelayerfunctions."
4925,"SectionLayer
Thesectionlayerisresponsible forthemovement ofasignalacrossaphysicalsection."
4926,"Ithandlesframing, scrambling, anderrorcontrol.Sectionlayeroverhead isaddedto
theframeatthislayer."
4927,"Photonic Layer
Thephotonic layercorresponds tothephysical layeroftheOSImodel.Itincludes
physicalspecifications fortheopticalfiberchannel,thesensitivity ofthereceiver, mul­
tiplexing functions, andsoon.SONETusesNRZencoding withthepresence oflight
representing 1andtheabsenceoflightrepresenting O."
4928,"Device-LayerRelationships
Figure17.3showstherelationship between thedevicesusedinSONETtransmission
andthefourlayersofthestandard."
4929,"Asyoucansee,anSTSmultiplexer isafour-layer
device.Anadd/drop multiplexer isathree-layer device.Aregenerator isatwo-layer
device."
4930,"Figure17.3Device-layer relationship inSONET
Electricsignal
Path
~-~----I
Line
Section
Photonic
OpticalsignalElectricsignal
Path
~-:i--:----ILine
Section
Photonic
OpticalsignalOpticalsignal Opticalsignal
Regenerator
Add/drop
multiplexerRegenerator496CHAPTER 17SONETISDH
17.3SONETFRAMES
Eachsynchronous transfersignalSTS-niscomposed of8000frames.Eachframeisa
two-dimensional matrixofbyteswith9rowsby90xncolumns."
4931,"Forexample, STS-l
frameis9rowsby90columns (810bytes),andanSTS-3is9rowsby270columns
(2430bytes).Figure17.4showsthegeneralformatofanSTS-landanSTS-n."
4932,"Figure17.4AnSTS-landanSTS-nframe
90bytes 90x11bytes
I...'__8_10_b)_'te_s__
""II9bY,,,1_' 8_IO_X_lIb_)'t_es
 'I}~,
a.STS-lframe b.STS-nframe
Frame,Byte,andBitTransmission
Oneoftheinteresting pointsaboutSONETisthateachSTS-nsignalistransmitted
atafixedrateof8000framespersecond.Thisistherateatwhichvoiceisdigitized
(seeChapter4).Foreachframethebytesaretransmitted fromthelefttothe right,
toptothebottom.Foreachbyte,thebitsaretransmitted fromthemostsignificant
totheleastsignificant (lefttoright).Figure17.5showstheorderofframeand
bytetransmission."
4933,"Figure17.5STS-lframesintransition
a.BytetransmissionLefttoright
and
toptobottomFirst---------,."
4934,"byte
'-- Last
byte8000frames/second
b.Frametransmission
ASONETSTS-nsignalistransmitted at8000framespersecond."
4935,"Ifwesampleavoicesignalanduse8bits(lbyte)foreachsample,wecansaythat
eachbyteinaSONETframecancarryinformation fromadigitized voicechanne1."
4936,"In
otherwords,anSTS-lsignalcancarry774voicechannels simultaneously (810minus
requiredbytesforoverhead)."
4937,"EachbyteinaSONETframecancarryadigitized voicechannel.SECTION 17.3SONETFRAMES 497
Example 17.1
FindthedatarateofanSTS-lsignal."
4938,"Solution
STS-l,likeotherSTSsignals,sends8000framespersecond.EachSTS-lframeismadeof9by
(lX90)bytes.Eachbyteismadeof8bits.Thedatarateis
STS~1datarate::::8000X9X(1X90)x8:;51.840Mbps
Example 17.2
FindthedatarateofanSTS-3signal."
4939,"Solution
STS-3,likeotherSTSsignals,sends8000framespersecond.EachSTS-3frameismadeof9by
(3X90)bytes.Eachbyteismadeof8bits.Thedatarateis
..."
4940,".STS-3datarate::::8000x 9 x(3X90)x8::::155.52Mbps
NotethatinSONET, thereisanexactrelationship between thedataratesofdifferent STSsignals."
4941,WecouldhavefoundthedatarateofSTS-3byusingthedatarateofSTS-l(multiply thelatterby3).
4942,"InSONET, thedatarateofanSTS-nsignalisntimesthe
datarateofanSTS-lsignals."
4943,"Example 17.3
WhatisthedurationofanSTS-lframe?STS-3frame?STS-nframe?"
4944,"Solution
InSONET,8000framesaresentpersecond.Thismeansthattheduration ofanSTS-l,STS-3,or
STS-nframeisthesameandequalto1/8000 S,or125j..ls."
4945,"InSONET, theduration ofanyframeis125j..ls."
4946,"STS-lFrameFormat
ThebasicformatofanSTS-lframeisshowninFigure17.6.Aswesaidbefore,a
SONETframeisamatrixof9rowsof90bytes(octets)each,foratotalof810bytes."
4947,Thefirstthreecolumns oftheframeareusedforsectionandline overhead.
4948,"The
upperthreerowsofthefirstthreecolumnsareusedforsectionoverhead (SOH).The
lowersixarelineoverhead (LOH).Therestoftheframeiscalledthesynchronous
payloadenvelope (SPE).Itcontainsuserdataandpathoverhead (POH)neededatthe
userdatalevel.WewilldiscusstheformatoftheSPEshortly."
4949,"SectionOverhead
Thesectionoverhead consistsofnineoctets.Thelabels,functions, andorganization of
theseoctetsareshowninFigure17.7.498CHAPTER 17SONETISDH
Figure17.6STS-1frameoverheads
90octetsperrow
Section[
overhead
Line[overheadSTS-ISPE
Userdataand
pathoverhead
9rowsx87columns9rows
Figure17.7STS-1frame:sectionoverhead
AI,AZ:Alignment
HI:Paritybyte
C1:IdentificationDl,I)Z,D3:Management
EI:Orderwirebyte
FI:User
Al~A2CI
BIElFI/STS-ISPE
D1D2D3
oAlignment bytes(AIandA2).BytesAlandA2areusedforframingandsyn­
chronization andarecalledalignment bytes.Thesebytesalertareceiverthata
frameisarrivingandgivethereceiverapredetermined bitpatternonwhichtosyn­
chronize."
4950,"Thebitpatternsforthesetwobytesinhexadecimal areOxF628.Thebytes
serveasaflag.oSectionparitybyte(BI).ByteB1isforbitinterleaved parity(BIP-8).Itsvalueis
calculated overallbytesoftheprevious frame.Inotherwords,theithbitofthis
byteistheparitybitcalculated overallithbitsoftheprevious STS-nframe.The
valueofthisbyteisfilledonlyforthefirstSTS-linanSTS-nframe.Inother
words,although anSTS-nframehasnB1bytes,aswewillseelater,onlythefirst
bytehasthisvalue;therestarefilledwithOs.
oIdentification byte(el).ByteClcarriestheidentityoftheSTS-lframe.Thisbyteis
necessary whenmultipleSTS-lsaremultiplexed tocreateahigher-rate STS(STS-3,
STS-9,STS-12,etc.).Information inthisbyteallowsthevarioussignalstoberecog­
nizedeasilyupondemultiplexing."
4951,"Forexample, inanSTS-3signal,thevalueof
theC1byteis1forthefirstSTS-l;itis2forthesecond;anditis3forthethird."
4952,"oManagement bytes(DI,D2,andD3).BytesDl,D2,andD3together forma
192-kbps channel(3x8000x8)calledthedatacommunication channel.Thischan­
nelisrequiredforoperation, administration, andmaintenance (OA&M) signaling."
4953,"oOrderwirebyte(EI).ByteElistheorderwirebyte.Orderwirebytesinconsec­
utiveframesformachannelof64kbps(8000framespersecondtimes8bitsperSECTION 17.3SONETFRAMES 499
frame).Thischannelisusedforcommunication betweenregenerators, orbetween
terminals andregenerators."
4954,"oUser'sbyte(Fl).TheFIbytesinconsecutive framesforma64-kbpschannelthat
isreservedforuserneedsatthesectionlevel."
4955,"Sectionoverhead isrecalculated foreachSONET device
(regenerators andmultiplexers)."
4956,"LineOverhead
Lineoverhead consistsof18bytes.Thelabels,functions, andarrangement ofthese
bytesareshowninFigure17.8.
Figure17.8STS-lframe:lineoverhead
B2:Lineparitybyte
D4-DI2: Management bytes
E2:OrderwirebyteHI,H2,H3:Pointers
Kl,K2:Automatic protection switching bytes
Zl,Z2:Growthbytes(reserved)
~HIHZH3
B2KIK2 STS-ISPE
D4D5D6
D9 D708VDIODllDI2
ZlZ2E2
oLineparitybyte(B2).ByteB2isforbitinterleaved parity.Itisforerrorcheck­
ingoftheframeoveraline(between twomultiplexers)."
4957,"InanSTS-nframe,B2is
calculated forallbytesintheprevious STS-IframeandinsertedattheB2byte
forthatframe.Inotherwords,inaSTS-3frame,therearethreeB2bytes,
eachcalculated foroneSTS-Iframe.Contrast thisbytewithBIinthesection
overhead."
4958,"oDatacommunication channelbytes(D4toD12).Thelineoverhead Dbytes(D4
toD12)inconsecutive framesforma576-kbps channelthatprovides thesame
serviceastheDI-D3bytes(OA&M), butatthelineratherthanthesectionlevel
(between multiplexers)."
4959,"oOrderwirebyte(E2).TheE2bytesinconsecutive framesforma64-kbpschan­
nelthatprovides thesamefunctions astheEIorderwirebyte,butatthelinelevel."
4960,"oPointerbytes(HI,82,and83).BytesHI,H2,andH3arepointers.Thefirsttwo
bytesareusedtoshowtheoffsetoftheSPEintheframe;thethirdisusedforjustifi­
cation.Weshowtheuseofthesebyteslater."
4961,"oAutomatic protection switching bytes(KlandK2).TheKIandK2bytesincon­
secutiveframesformaI28-kbps channelusedforautomatic detection ofproblems in500CHAPTER 17SONETISDH
line-terminating equipment."
4962,"Wediscussautomatic protection switching (APS)later
inthechapter."
4963,DGrowthbytes(ZlandZ2).TheZlandZ2bytesarereservedforfutureuse.
4964,"Synchronous PayloadEnvelope
Thesynchronous payload envelope (SPE)contains theuserdataandthe overhead
relatedtotheuserdata(pathoverhead)."
4965,"OneSPEdoesnotnecessarily fititintooneSTS-l
frame;itmaybesplitbetweentwoframes,aswewillseeshortly.Thismeansthatthe
pathoverhead, theleftmost columnofanSPE,doesnotnecessarily alignwiththe
sectionorlineoverhead."
4966,"Thepathoverhead mustbeaddedfirsttotheuserdatato
createanSPE,andthenanSPEcanbeinsertedintooneortwoframes.Pathoverhead
consistsof9bytes.Thelabels,functions, andarrangement ofthesebytesareshown
inFigure17.9.
Figure17.9STS-lframe:pathoverhead
11
B3
C2
Gl
F2
H4B3:Pathparitybyte
C2:Pathsignallabelbyte
Gl:Pathstatusbyte
F2:Pathuserchannelbyte
DataH4:Virtualtributary indicator
J1:Pathtracebyte
Z3,Z4,Z5:Growthbytes(reserved)
23
Z4STS-ISPE
25 Path
overhead
DPathparitybyte(B3).ByteB3isforbitinterleaved parity,likebytesBlandB2,
butcalculated overSPEbits.Itisactuallycalculated overtheprevious SPEinthe
stream."
4967,"DPathsignallabelbyte(C2).ByteC2isthepathidentification byte.Itisusedto
identifydifferent protocols usedathigherlevels(suchasIPorATM)whosedata
arebeingcarriedintheSPE."
4968,"DPathuserchannelbyte(F2).TheF2bytesinconsecutive frames,liketheFIbytes,
forma64-kbpschannelthatisreservedforuserneeds,butatthepathlevel."
4969,"DPathstatusbyte(Gl).ByteGIissentbythereceivertocommunicate itsstatus
tothe sender."
4970,Itissentonthereversechannelwhenthecommunication isduplex.
4971,Wewillseeitsuseinthelinearorringnetworks laterinthechapter.
4972,"DMultiframe indicator (H4).ByteH4isthemultiframe indicator.Itindicates pay­
loadsthatcannotfitintoasingleframe.Forexample, virtualtributaries canbeSECTION 17.3SONETFRAMES 501
combined toformaframethatislargerthananSPEframeandneedtobedivided
intodifferentframes.Virtualtributaries arediscussed inthenextsection."
4973,"oPathtracebyte(JI).The11bytesinconsecutive framesforma64-kbpschannel
usedfortrackingthepath.The11bytesendsacontinuous 64-bytestringtoverify
theconnection."
4974,Thechoiceofthestringislefttotheapplication program.
4975,"The
receivercompares eachpatternwiththeprevious onetoensurenothingiswrong
withthecommunication atthepathlayer."
4976,"oGrowthbytes(Z3,Z4,andZ5).BytesZ3,Z4,andZ5arereservedforfutureuse."
4977,"Pathoverhead isonlycalculated forend-to-end
(atSTSmultiplexers)."
4978,"Overhead Summary
Table17.2compares andsummarizes theoverheads usedinasection,line,andpath."
4979,"Table17.2SONETISDH rates
ByteFunction Section Line Path
Alignment Al,A2
Parity Bl B2 B3
Identifier CI C2
OA&M DI-D3 D4-DI2
Orderwire EI
User FI F2
Status Gl
Pointers HI-H3 H4
Trace 11
Failuretolerance KI,K2
Growth(reserved forfuture) ZI,Z2 Z3-Z5
Example 17.4
WhatistheuserdatarateofanSTS-lframe(withoutconsidering theoverheads)?"
4980,"Solution
TheuserdatapartinanSTS-Iframeismadeof9rowsand86columns."
4981,"Sowehave
STS-luserdatatate=8000x9><:,(1X86)x8c=49.536MbJls
Encapsulation
Theprevious discussion revealsthatanSPEneedstobeencapsulated inanSTS-I
frame.Encapsulation maycreatetwoproblems thatarehandledelegantly bySONET
usingpointers(HItoH3).Wediscusstheuseofthesebytesinthissection.502 CHAPTER 17SONETISDH
Offsetting
SONETallowsoneSPEtospantwoframes,partoftheSPEisinthefirstframeandpart
isinthesecond.ThismayhappenwhenoneSPEthatistobeencapsulated isnotaligned
time-wise withthepassingsynchronized frames.Figure17.10showsthissituation."
4982,"SPE
bytesaredividedbetween thetwoframes.Thefirstsetofbytesisencapsulated inthe
firstframe;thesecondsetisencapsulated inthesecondframe.Thefigurealsoshowsthe
pathoverhead, whichisalignedwiththesection/line overhead ofanyframe.Theques­
tionis,HowdoestheSONETmultiplexer knowwheretheSPEstartsorendsinthe
frame?ThesolutionistheuseofpointersHIandH2todefinethebeginning oftheSPE;
theendcanbefoundbecauseeachSPEhasafixednumberofbytes.SONETallows the
offsetting ofanSPEwithrespecttoanSTS-lframe."
4983,"Figure17.10Offsetting ofSPErelatedtoframeboundary
SPE
Data
I I
It
r--
r--
r--
r--
~
H
Frame1+1
FrameflowFrame 1
Tofindthebeginning ofeachSPEinaframe,weneedtwopointersHIandH2in
thelineoverhead."
4984,"Notethatthesepointersarelocatedinthelineoverhead becausethe
encapsulation occursatamultiplexer."
4985,"Figure17.11showshowthese2bytespointto
Figure17.11TheuseofHiandH2pointers toshowthestartofanSPEinaframe
Framei+l
FrameflowSECTION 17.4STSMULTIPLEXING 503
thebeginning oftheSPEs.Notethatweneed2bytestodefinethepositionofabytein
aframe;aframehas810bytes,whichcannotbedefinedusing1byte."
4986,"Example 17.5
WhatarethevaluesofHIandH2ifanSPEstartsatbytenumber650?"
4987,"Solution
Thenumber650canbeexpressed infourhexadecimal digitsasOx028A."
4988,"Thismeansthevalueof
HIisOx02andthevalueofH2isOx8A."
4989,"Justification
Nowsupposethetransmission rateofthepayloadisjustslightlydifferent fromthe
transmission rateofSONET."
4990,"First,assumethattherateofthepayloadishigher.This
meansthatoccasionally thereis1extrabytethatcannotfitintheframe.Inthiscase,
SONETallowsthisextrabytetobeinsertedintheH3byte.Now,assumethattherateof
thepayloadislower.Thismeansthatoccasionally 1byteneedstobeleftemptyinthe
frame.SONETallowsthisbytetobethebyteaftertheH3byte."
4991,"17.4STSMULTIPLEXING
InSONET, framesoflowerratecanbesynchronously time-division multiplexed intoa
higher-rate frame.Forexample, threeSTS-lsignals(channels) canbecombined into
oneSTS-3signal(channel), four STS-3s canbemultiplexed intooneSTS-12,andsoon,
asshowninFigure17.12."
4992,"Figure17.12STSmultiplexing/demultiplexing
----+s;rs.:Jc+----1 STS
MUXSTS-3 STSt----t&TS.l1--­DEMUX
Multiplexing issynchronous TDM,andallclocksinthenetworkarelockedtoa
masterclocktoachievesynchronization."
4993,"InSONET,allclocksinthenetworkarelockedtoamasterclock."
4994,Weneedtomentionthatmultiplexing canalsotakeplaceatthehigherdatarates.
4995,"Forexample, fourSTS-3signalscanbemultiplexed intoanSTS-12signal.However,
theSTS-3signalsneedtofirstbedemultiplexed into12STS-lsignals,andthenthese504 CHAPTER 17SONETISDH
twelvesignalsneedtobemultiplexed intoanSTS-I2signal.Thereasonforthisextra
workwillbeclearafterourdiscussion onbyteinterleaving."
4996,"ByteInterleaving
Synchronous TDMmultiplexing inSONET isachieved byusingbyteinterleaving."
4997,"Forexample, whenthreeSTS-Isignalsaremultliplexed intooneSTS-3signal,each
setof3bytesintheSTS-3signalisassociated with1bytefromeachSTS-Isignal.Fig­
ure17.13showstheinterleaving."
4998,"Figure17.13Byteinterleaving
STS-l
90bytes3j
270bytes
NotethatabyteinanSTS-Iframekeepsitsrowposition, butitismovedintoa
different column."
4999,"Thereasonisthatwhileallsignalframeshavethesamenumberof
rows(9),thenumberofcolumns changes."
5000,"Thenumberofcolumns inanSTS-nsignal
frameisntimesthenumberofcolumns inanSTS-Iframe.OneSTS-nrow,therefore,
canaccommodate allnrowsintheSTS-Iframes."
5001,"Byteinterleaving also preserves thecorresponding sectionandlineoverhead as
showninFigure17.14.Asthefigureshows,thesection overheads fromthreeSTS-l
framesareinterleaved together tocreateasectionoverhead foranSTS-lframe.The
sameistrueforthelineoverheads."
5002,"Eachchannel,however, keepsthecorresponding bytes
thatareusedtocontrolthatchannel.Inotherwords,thesectionsandlineskeeptheirown
controlbytesforeachmultiplexed channel."
5003,"Thisinteresting featurewillallowtheuseof
add/drop multiplexers, asdiscussed shortly.Asthefigureshows,therearethreeAlbytes,
onebelonging toeachofthethreemultiplexed signals.TherearealsothreeA2bytes,
threeB1bytes,andsoon."
5004,"Demultiplexing hereiseasierthaninthestatistical TDMwediscussed inChapter6
becausethedemultiplexer, withnoregardtothefunctionofthebytes,removesthefirstA1
andassignsittothefirstSTS-I,removes thesecondAI,andassignsittosecondSTS-l,
andremoves thethirdAlandassignsittothethirdSTS-I.Inotherwords,thedemulti­
plexerdealsonlywiththepositionofthebyte,notitsfunction."
5005,"Whatwesaidaboutthesectionandlineoverheads doesnotexactlyapplytothepath
overhead."
5006,"Thisisbecausethepathoverhead ispartoftheSPEthatmayhavesplittedinto
twoSTS-Iframes.Thebyteinterleaving, however, isthesameforthedatasectionofSPEs.SECTION 17.4STSMULTIPLEXING 505
Figure17.14AnSTS-3frame
9bytes
,""
ClCI
Fl,FI
D3'D3
H3H3
J9K2
D~,D9
, --t',~261bytes
Sr8-3SPE
Int(lde~ving
bytesofthreeSPEs·1
Thebyteinterleaving processmakesthemultiplexing athigherdataratesalittle
bitmorecomplex."
5007,Howcanwemultiplex fourSTS-3signalsintooneSTS-12signal?
5008,"Thiscanbedoneintwosteps:First,theSTS-3signalsmustbedemultiplexed tocreate
12STS-lsignals.The12STS-lsignalsarethenmultiplexed tocreateanSTS-12signal."
5009,"Concatenated Signal
Innormaloperation oftheSONET, anSTS-nsignalismadeofnmultiplexed STS-l
signals.Sometimes, wehaveasignalwithadataratehigherthanwhatanSTS-lcancarry."
5010,"Inthiscase,SONETallowsustocreateanSTS-nsignalwhichisnotconsidered asn
STS-lsignals;itisoneSTS-nsignal (channel) thatcannotbedemultiplexed inton
STS-lsignals.Tospecifythatthesignalcannotbedemultiplexed, thesuffixc(forconcate­
nated)isaddedtothenameofthesignal.Forexample, STS-3cisasignalthatcannot
bedemultiplexed intothreeSTS-lsignals.However, weneedtoknowthatthewhole
payloadinanSTS-3csignalisoneSPE,whichmeansthatwehaveonlyonecolumn
(9bytes)ofpathoverhead."
5011,"Theuseddatainthiscaseoccupy260columns, asshownin
Figure17.15."
5012,"Concatenated SignalsCarrying ATMCells
WewilldiscussATMandATMcellsinChapter18.AnATMnetworkisacellnetwork
inwhicheachcellhasafixedsizeof53bytes.TheSPEofanSTS-3csignalcanbea
carrierofATMcells.TheSPEofanSTS-3ccancarry9 x260=2340bytes,whichcan
accommodate approximately 44ATMcells,eachof53bytes.506CHAPTER 17SONETISDH
Figure17.15Aconcatenated STS-3csignal
I_10octets _I_
Pathoverhead260octets
STS-3cSPE
AnSTS-3csignalcancarry44ATMcellsasitsSPE."
5013,"AddlDrop Multiplexer
Multiplexing ofseveralSTS-1signalsintoanSTS-nsignalisdoneattheSTSmulti­
plexer(atthepathlayer).Demultiplexing ofanSTS-nsignalintoSTS-1components
isdoneattheSTSdemultiplexer."
5014,"Inbetween, however, SONETusesadd/drop multi­
plexersthatcanreplaceasignalwithanotherone.Weneedtoknowthatthisisnot
demultiplexing/multiplexing intheconventional sense.Anadd/drop multiplexer
operates atthelinelayer.Anadd/drop multiplexer doesnotcreatesection,line,or
pathoverhead."
5015,"Italmostactsasaswitch~itremoves oneSTS-1signalandadds
anotherone.Thetypeofsignalattheinputandoutputofanadd/drop multiplexer is
thesame(bothSTS-3orbothSTS-12, forexample)."
5016,"Theadd/drop multiplexer
(ADM)onlyremoves thecorresponding bytesandreplaces themwiththenewbytes
(including thebytesinthesectionandlineoverhead)."
5017,"Figure17.16showstheopera­
tionofanADM."
5018,"Figure17.16Dropping andaddingSTS-lframesinanadd/drop multiplexer
_L--_S_T_S-_3_S_PE_-----.J~ ADM_STS-3SPE------'
ThirdSTS-l
isdroppedNewSTS-l
isaddedSECTION 17.5SONETNETWORKS 507
17.5SONETNETWORKS
UsingSONETequipment, wecancreateaSONETnetworkthatcanbeusedasahigh-speed
backbone carryingloadsfromothernetworks suchasATM(Chapter 18)orIF(Chapter20)."
5019,"WecanroughlydivideSONETnetworks intothreecategories: linear,ring,andmeshnet­
works,asshowninFigure17.17."
5020,"Figure17.17Taxonomy ofsoNETnetworks
BLSR !\InltlpomtSONET
networks
I
I I I
Linear Ring Mesh
networks networks networks
-Point-to-point -lJl>SR
-, -
LinearNetworks
AlinearSONETnetworkcanbepoint-to-point ormultipoint."
5021,"Point-to-Point Network
Apoint-to-point networkisnormally madeofanSTSmultiplexer, anSTSdemultiplexer,
andzeroormoreregenerators withnoadd/drop multiplexers, asshowninFigure17.18."
5022,"Thesignalflowcanbeunidirectional orbidirectional, although Figure17.18shows
onlyunidirectional forsimplicity."
5023,"Figure17.18 Apoint-to-point SONETnetwork
,'."
5024,"Multipoint Network
Amultipoint networkusesADMstoallowthecommunications between severaltermi­
nals.AnADMremoves thesignalbelonging totheterminal connected toitandadds
thesignaltransmitted fromanotherterminal."
5025,"Eachterminalcansenddatatooneormore
downstream terminals."
5026,"Figure17.19showsaunidirectional schemeinwhicheachter­
minalcansenddataonlytothedownstream terminals, buttheamultipoint networkcan
bebidirectional, too.50SCHAPTER 17SONETISDH
Figure17.19Amultipoint SONETnetwork
STS
MUXSTS
DEMUX
InFigure17.19,TlcansenddatatoT2andT3simultaneously."
5027,"T2,however, can
senddata only toT3.Thefigureshowsaverysimpleconfiguration; innormalsitua­
tions,wehavemoreADMs andmoreterminals."
5028,"Automatic Protection Switching
Tocreateprotection againstfailureinlinearnetworks, SONETdefinesautomatic pro­
tectionswitching (APS).APSinlinearnetworks isdefinedatthelinelayer,which
meanstheprotection isbetweentwoADMsorapairofSTSmultiplexer/demultiplexers."
5029,"Theideaistoprovideredundancy; aredundant line(fiber)canbeusedincaseoffailure
inthemainone.Themainlineisreferredtoastheworklineandtheredundant line
astheprotection line.Threeschemes arecommon forprotection inlinearchannels:
one-plus-one, one-to-one, andone-to-many."
5030,Figure17.20showsallthreeschemes.
5031,"Figure17.20Automatic protection switching inlinearnetworks
----------- --~STS
MUX
a.One-pIus-one APS
ADM
b.One-to-one APSWorking line
Protection line
Working line
Protection line
ReverselineSTS
MUX
ADMADM ADM
§EWorking lines
8:§
0
Protection line------------------ ---->-
Reverseline
I..-- '-----
c.One-to-many APS
One-Plus-One APSInthisscheme,therearenormally twolines:oneworking line
andoneprotection line.Bothlinesareactiveallthetime.ThesendingmultiplexerSECTION 17.5SONETNETWORKS 509
sendsthesamedataonbothlines;thereceiver multiplexer monitors thelineand
choosestheonewiththebetterquality.Ifoneofthelinesfails,itlosesitssignal,and,of
course,theotherlineisselectedatthereceiver.Although, thefailurerecovery forthis
schemeisinstantaneous, theschemeisinefficient becausetwotimesthebandwidth is
required."
5032,Notethatone-plus-one switching isdoneatthepathlayer.
5033,"One-to-One APSInthisscheme,whichlooksliketheone-plus-one scheme,thereis
alsooneworkinglineandoneprotection line.However, thedataarenormally senton
theworking lineuntilitfails.Atthistime,thereceiver, usingthereversechannel,
informsthesendertousetheprotection lineinstead.Obviously, thefailurerecovery is
slowerthanthatoftheone-plus-scheme, butthisschemeismoreefficientbecausethe
protection linecanbeusedfordatatransferwhenitisnotusedtoreplacetheworking
line.Notethattheone-to-one switching isdoneatthelinelayer."
5034,"One-to-Many APSThisschemeissimilartotheone-to-one schemeexceptthat
thereisonlyoneprotection lineformanyworkinglines.Whenafailureoccursinone
oftheworkinglines,theprotection linetakescontroluntilthefailedlineisrepaired."
5035,"It
isnotassecureastheone-to-one schemebecauseifmorethanoneworkinglinefailsat
thesametime,theprotection linecanreplaceonlyoneofthem.Notethatone-to-many
APSisdoneatthelinelayer."
5036,"RingNetworks
ADMsmakeitpossibletohaveSONETringnetworks."
5037,"SONETringscanbeusedin
eitheraunidirectional orabidirectional configuration."
5038,"Ineachcase,wecanaddextra
ringstomakethenetworkself-healing, capableofself-recovery fromlinefailure."
5039,"Unidirectional PathSwitching Ring
Aunidirectional pathswitching ring(UPSR)isaunidirectional networkwithtwo
rings:oneringusedastheworkingringandtheotherastheprotection ring.Theideais
similartotheone-plus-one APSschemewediscussed inalinearnetwork."
5040,"Thesame
signalflowsthroughbothrings,oneclockwise andtheothercounterclockwise."
5041,"Itis
called UPS~becausemonitoring isdoneatthepathlayer.Anodereceivestwocopies
oftheelectrical signalsatthepathlayer,compares them,andchoosestheonewiththe
betterquality.IfpartofaringbetweentwoADMsfails,theotherringstillcanguaran­
teethecontinuation ofdataflow.UPSR,liketheone-plus-one scheme,hasfastfailure
recovery, butitisnotefficientbecauseweneedtohavetworingsthatdothejobofone."
5042,Halfofthebandwidth iswasted.Figure17.21showsaUPSRnetwork.
5043,"Although wehavechosenonesenderandthreereceivers inthefigure,therecanbe
manyotherconfigurations."
5044,"Thesenderusesatwo-way connection tosenddatatoboth
ringssimultaneously; thereceiverusesselecting switches toselecttheringwithbetter
signalquality.WehaveusedoneSTSmultiplexer andthreeSTSdemultiplexers to
emphasize thatnodesoperateonthepathlayer."
5045,"Bidirectional LineSwitching Ring
Another alternative inaSONETringnetwork isbidirectional lineswitching ring
(BLSR)."
5046,"Inthiscase,communication isbidirectional, whichmeansthatweneed510CHAPTER 17SONETISDH
Figure17.21Aunidirectional pathswitching ring
Sender
.......------""""""""""-"":""------------...Receiver,fI/'--
~;
;,
f
Protection
ringWorking
ring
I
TTSD~~
Receiver
tworingsforworkinglines.Wealsoneedtworingsforprotection lines.Thismeans
BLSRusesfourrings.Theoperation, however, issimilartotheone-to-one APS
scheme.Ifaworkingringinonedirection betweentwonodesfails,thereceiving node
canusethereverseringtoinformtheupstream nodeinthefaileddirection tousethe
protection ring.Thenetworkcanrecoverinseveraldifferentfailuresituations thatwe
donotdiscusshere.Notethatthediscovery ofafailureinBLSRisatthelinelayer,not
thepathlayer.TheADMsfindthefailureandinformtheadjacentnodestousethepro­
tectionrings.Figure17.22showsaBLSRring."
5047,"Combination ofRings
SONETnetworks todayuseacombination ofinterconnected ringstocreateservicesin
awidearea.Forexample, aSONETnetworkmayhavearegionalring,severallocal
rings,andmanysiteringstogiveservicestoawidearea.TheseringscanbeUPSR,
BLSR,oracombination ofboth.Figure17.23showstheideaofsuchawide-area ring
network."
5048,"MeshNetworks
Oneproblem withringnetworks isthelackofscalability."
5049,"Whenthetrafficinaring
increases, weneedtoupgradenotonlythelines,butalsotheADMs.Inthissituation, a
meshnetworkwithswitches probably givebetterperformance."
5050,"Aswitchinanetwork
meshiscalledacross-connect."
5051,"Across-connect, likeotherswitches wehaveseen,has
inputandoutputports.Inaninputport,theswitchtakesanOC-nsignal,changesitto
anSTS-nsignal,demultiplexes itintothecorresponding STS-1signals,andsendseachSECTION 17.5SONETNETWORKS 511
Figure17.22Abidirectional lineswitching ring
Working
rings
I
• I
• I• •
I•II
..............""""--------"", ADM---------- -----~~~~,#'IlI'...------- .......--.........,---~...."
5052,......
5053,":/ Protection "",•
: : rings::
• I • I
I •.---..:.•......l...............L.....,
Figure17.23Acombination ofringsinaSONETnetwork
Sitering
STS-1signaltotheappropriate outputport.AnoutputporttakesSTS-1signalscoming
fromdifferent inputports,multiplexes themintoanSTS-nsignal,andmakesanOC-n
signalfortransmission."
5054,"Figure17.24showsameshSONETnetwork, andthestructureofa
switch.512CHAPTER 17SONET/SDH
Figure17.24AmeshSONETnetwork
a.SONETmeshnetwork b.Cross-connect switch
17.6VIRTUAL TRIBUTARIES
SONETisdesigned tocarrybroadband payloads."
5055,"Currentdigitalhierarchy datarates
(DS-ItoDS-3),however, arelowerthanSTS-l.TomakeSONETbackward-compatible
withthecurrenthierarchy, itsframedesignincludes asystemofvirtual tributaries
(VTs)(seeFigure17.25).Avirtualtributary isapartialpayloadthatcanbeinserted
intoanSTS-landcombined withotherpartialpayloads tofillouttheframe.Insteadof
usingall86payloadcolumns ofanSTS-lframefordatafromonesource,wecansub­
dividetheSPEandcalleachcomponent aVT."
5056,"Figure17.25Virtualtributaries
VT VT VT VT
TypesofVTs
FourtypesofVTshavebeendefinedtoaccommodate existingdigitalhierarchies (see
Figure17.26).Noticethatthenumberofcolumns allowedforeachtypeofVTcanbe
determined bydoubling thetypeidentification number(VT1.5getsthreecolumns, VT2
getsfourcolumns, etc.)."
5057,oVT1.5accommodates theU.S.DS-Iservice(1.544Mbps).
5058,oVT2accommodates theEuropean CEPT-lservice(2.048Mbps).
5059,"oVT3accommodates theDS-ICservice(fractional DS-l,3.152Mbps)."
5060,"oVT6accommodates theDS-2service(6.312Mbps).SECTION 17.8KEYTERMS 513
Figure17.26Virtualtributary types
VT1.5=8000frames/s 3columns 9rows8bits=1.728Mbps
VT2=8000frames/s 4columns 9rows8bits=2.304Mbps
VT3=8000frarnes/s 6columns 9rows8bits=3.456Mbps
VT6=8000frames/s 12columns 9rows8bits=6.912Mbps
VT1.5 VT2 VT3 VT6
Whentwoormoretributaries areinsertedintoasingleSTS-1frame.theyare
interleaved columnbycolumn."
5061,"SONETprovides mechanisms foridentifying each
VTandseparating themwithoutdemultiplexing theentirestream.Discussion of
thesemechanisms andthecontrolissuesbehindthemisbeyondthescopeofthis
book."
5062,"17.7RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext."
5063,"Books
SONETisdiscussed inSection2.5of[Tan03], Section15.2of[Kes97], Sections 4.2
and4.3of[GW04], Section8.2of[Sta04],andSection5.2of[WVOOl
17.8KEYTERMS
add/drop multiplexer (ADM)
automatic protection switching (APS)
bidirectional lineswitching ring(BLSR)
byteinterleaving
line
linelayer
lineoverhead (LOH)
opticalcarrier(Oe)
path
pathlayerpathoverhead (POH)
photonic layer
regenerator
sectionsectionlayer
sectionoverhead (SOH)
STSdemultiplexer
STSmultiplexer
Synchronous DigitalHierarchy (SDH)
Synchronous OpticalNetwork (SONET)514 CHAPTER 17SONETISDH
synchronous payloadenvelope (SPE)
synchronous transport module(STM)
synchronous transport signal(STS)terminal
unidirectional pathswitching ring(UPSR)
virtualtributary (VT)
17.9SUMMARY
oSynchronous OpticalNetwork (SONET) isastandard developed byANSIfor
fiber-optic networks: Synchronous DigitalHierarchy (SDH)isasimilarstandard
developed byITU-T."
5064,"oSONEThasdefinedahierarchy ofsignalscalledsynchronous transport signals
(STSs).SDHhasdefinedasimilarhierarchy ofsignalscalledsynchronous transfer
modules(STMs)."
5065,oAnOC-nsignalistheopticalmodulation ofanSTS-n(orSTM-n)signal.
5066,"oSONETdefinesfourlayers:path,line,section,andphotonic."
5067,"oSONETisasynchronous TDMsysteminwhichallclocksarelockedtoamaster
clock."
5068,"oASONETsystemcanusethefollowing equipment:
1.STSmultiplexers
2.STSdemultiplexers
3.Regenerators
4.Add/drop multiplexers
5.Terminals
oSONETsends8000framespersecond;eachframelasts125IlS."
5069,"oAnSTS-Iframeismadeof9rowsand90columns; anSTS-nframeismadeof
9rowsandnx90columns."
5070,oSTSscanbemultiplexed togetanewSTSwithahigherdatarate.
5071,"DSONETnetworktopologies canbelinear,ring,ormesh."
5072,oAlinearSONETnetworkcanbeeitherpoint-to-point ormultipoint.
5073,DAringSONETnetworkcanbeunidirectional orbidirectional.
5074,"oTomakeSONETbackward-compatible withthecurrenthierarchy, itsframedesign
includesasystemofvirtualtributaries (VTs)."
5075,"17.10PRACTICE SET
ReviewQuestions
I.Whatistherelationship betweenSONETandSDH?"
5076,2.Whatistherelationship betweenSTSandSTM?
5077,"3.HowisanSTSmultiplexer different fromanadd/drop multiplexer sincebothcan
addsignalstogether?SECTION 17.10PRACTICE SETSIS
4.Whatistherelationship betweenSTSsignalsandOCsignals?"
5078,5.Whatisthepurposeofthepointerinthelineoverhead?
5079,6.WhyisSONETcalledasynchronous network?
5080,7.WhatisthefunctionofaSONETregenerator?
5081,8.WhatarethefourSONETlayers?
5082,9.Discussthefunctions ofeachSONETlayer.
5083,10.Whatisavirtualtributary?
5084,"Exercises
II.WhataretheuserdataratesofSTS-3,STS-9,andSTS-12?"
5085,12.ShowhowSTS-9'scanbemultiplexed tocreateanSTS-36.
5086,"Isthereanyextra
overhead involved inthistypeofmultiplexing?"
5087,"13.AstreamofdataisbeingcarriedbySTS-lframes.Ifthedatarateofthestreamis
49.540Mbps,howmanySTS-lframespersecondmustlettheirH3bytescarrydata?"
5088,"14.AstreamofdataisbeingcarriedbySTS-lframes.Ifthedatarateofthestreamis
49.530Mbps,howmanyframespersecondshouldleaveoneemptybyteafterthe
H3byte?"
5089,"IS.Table17.2showsthattheoverhead bytescanbecategorized asA,B, C,D,E,F,G,
H,J,K,andZbytes."
5090,a.WhyaretherenoAbytesintheLOHorPOH?
5091,b.WhyaretherenoCbytesintheLOH?
5092,c.WhyaretherenoDbytesinthePOH?
5093,d.WhyaretherenoEbytesintheLOHorPOR?
5094,e.WhyaretherenoFbytesintheLOHorPOH?
5095,f.WhyaretherenoGbytesintheSOHorLOH?
5096,g.WhyaretherenoHbytesintheSOH?
5097,h.WhyaretherenoJbytesintheSOHorLOH?
5098,i.WhyaretherenoKbytesintheSOHorPOH?
5099,j.WhyaretherenoZbytesintheSOH?
5100,"16.WhyareBbytespresentinallthreeheaders?CHAPTER 18
Virtual-Circuit Networks:
FrameRelayandATM
InChapter8,wediscussed switching techniques."
5101,"Wesaidthattherearethreetypesof
switching: circuitswitching, packetswitching, andmessage switching."
5102,"Wealsomen­
tionedthatpacketswitching canusetwoapproaches: thevirtual-circuit approach and
thedatagram approach."
5103,"Inthischapter,weshowhowthevirtual-circuit approach canbeusedinwide-area
networks."
5104,Twocommon WANtechnologies usevirtual-circuit switching.
5105,"FrameRelay
isarelatively high-speed protocolthatcanprovidesomeservicesnotavailable inother
WANtechnologies suchasDSL,cableTV,andTlines.ATM,asahigh-speed protocol,
canbethesuperhighway ofcommunication whenitdeploysphysical layercarriers
suchasSONET."
5106,"WefirstdiscussFrameRelay.WethendiscussATMingreaterdetaiLFinally,we
showhowATMtechnology, whichwasoriginally designed asaWANtechnology, can
alsobeusedinLANtechnology, ATMLANs.
18.1FRAME RELAY
FrameRelayisavirtual-circuit wide-area networkthatwasdesigned inresponse to
demands foranewtypeofWANinthelate1980sand early 1990s."
5107,"1.PriortoFrameRelay,someorganizations wereusingavirtual-circuit switching
networkcalledX.25thatperformed switching atthenetworklayer.Forexample,
theInternet,whichneedswide-area networks tocarryitspacketsfromoneplaceto
another,usedX.25.AndX.25isstillbeingusedbytheInternet, butitisbeing
replacedbyotherWANs.However, X.25hasseveraldrawbacks:
a.X.25hasalow64-kbpsdatarate.Bythe1990s,therewasaneedforhigher­
data-rate WANs.
b.X.25hasextensive flowanderrorcontrolatboththedatalinklayerandthe
network layer.ThiswassobecauseX.25wasdesigned inthe1970s,when
theavailable transmission mediaweremorepronetoerrors.Flowanderror
controlatbothlayerscreatealargeoverhead andslowdowntransmissions."
5108,"X.25
requires acknowledgments forbothdatalinklayerframesandnetwork layer
packetsthataresentbetweennodesandbetweensourceanddestination."
5109,"517518CHAPTER 18ViRTUAL-CIRCUiT NETWORKS: FRAMERELAYANDATM
c.Originally X.25wasdesigned forprivatelise,notfortheInternet.X.25hasits
ownnetwork layer.Thismeansthattheuser'sdataareencapsulated inthe
network layerpacketsofX.25.TheInternet, however, hasitsownnetwork
layer,whichmeansiftheInternetwantstouseX.25,theInternetmustdeliver
itsnetworklayerpacket,calledadatagram, toX.25forencapsulation inthe
X.25packet.Thisdoublestheoverhead."
5110,"2.Disappointed withX.25,someorganizations startedtheirownprivateWANby
leasingT-lorT-3linesfrompublicserviceproviders."
5111,"Thisapproach alsohassome
drawbacks."
5112,"a.Ifanorganization hasnbranches spreadoveranarea,itneedsn(n-1)/2T-Ior
T-3lines.Theorganization paysforalltheselinesalthough itmayusethelines
only10percentofthetime.Thiscanbeverycostly:
b.Theservicesprovided byT-IandT-3linesassumethattheuserhasfixed-rate
dataallthetime.Forexample, aT-llineisdesigned forauserwhowantsto
usethelineataconsistent 1.544Mbps.Thistypeofserviceisnotsuitablefor
themanyuserstodaythatneedtosendburstydata.Forexample, ausermay
wanttosenddataat6Mbpsfor2s,0Mbps(nothing) for7s,and3.44Mbps
for1sforatotalof15.44Mbitsduringaperiodof10s.Although theaverage
datarateisstill1.544Mbps,theT-Ilinecannotacceptthistypeofdemand
becauseitisdesigned forfixed-rate data,notburstydata.Burstydatarequire
whatiscalledbandwidth ondemand."
5113,"Theuserneedsdifferent bandwidth
allocations atdifferenttimes."
5114,"Inresponse totheabovedrawbacks, FrameRelaywasdesigned."
5115,"FrameRelayisawide­
areanetworkwiththefollowing features:
1.FrameRelayoperatesatahigherspeed(1.544Mbpsandrecently44.376Mbps)."
5116,ThismeansthatitcaneasilybeusedinsteadofameshofT-IorT-3lines.
5117,"2.FrameRelayoperatesinjustthephysicalanddatalinklayers.Thismeansitcan
easilybeusedasabackbone networktoprovideservicestoprotocols thatalready
haveanetworklayerprotocol, suchastheInternet."
5118,3.FrameRelayallowsburstydata.
5119,"4.FrameRelayallowsaframesizeof9000bytes,whichcanaccommodate alllocal­
areanetworkframesizes."
5120,"5.FrameRelayislessexpensive thanothertraditional WANs.
6.FrameRelayhaserrordetection atthedatalinklayeronly.Thereisnoflowcontrol
orerrorcontrol.Thereisnotevenaretransmission policyifaframeisdamaged; it
issilentlydropped."
5121,"FrameRelaywasdesigned inthiswaytoprovidefasttransmis­
sioncapability formorereliablemediaandforthoseprotocols thathaveflowand
errorcontrolatthehigherlayers."
5122,"Architecture
FrameRelayprovidespermanent virtualcircuitsandswitched virtualcircuits.Figure18.1
showsanexampleofaFrameRelaynetworkconnected totheInternet.Theroutersare
used,aswewillseeinChapter22,toconnectLANsandWANsintheInternet.Inthe
figure,theFrameRelayWANisusedasonelinkintheglobalInternet.SECTION 18.1FRAMERELAY 519
Figure18.1FrameRelaynetwork
Totherestof
theInternet
VirtualCircuits
FrameRelayisavirtualcircuitnetwork."
5123,"AvirtualcircuitinFrameRelayisidentified
byanumbercalledadatalinkconnection identifier (DLCI)."
5124,"VCIsinFrameRelayarecalledDLCIs.
Permanent VersusSwitched VirtualCircuits
Asourceandadestination maychoosetohaveapermanent virtualcircuit(PVC).In
thiscase,theconnection setupissimple.Thecorresponding tableentryisrecorded for
allswitches bytheadministrator (remotely andelectronically, ofcourse).Anoutgoing
DLCIisgiventothesource,andanincoming DLCIisgiventothedestination."
5125,PVCconnections havetwodrawbacks.
5126,"First,theyarecostlybecausetwoparties
payfortheconnection allthetimeevenwhenitisnotinuse.Second,aconnection is
createdfromonesourcetoonesingledestination."
5127,"Ifasourceneedsconnections with
severaldestinations, itneedsaPVCforeachconnection."
5128,"Analternate approach isthe
switched virtualcircuit(SVC).TheSVCcreatesatemporary, shortconnection that
existsonlywhendataarebeingtransferred between sourceanddestination."
5129,"AnSVC
requiresestablishing andterminating phasesasdiscussed inChapter8."
5130,"Switches
EachswitchinaFrameRelaynetworkhasatabletorouteframes.Thetablematches
anincoming port-DLCI combination withanoutgoing port-DLCI combination aswe
described forgeneralvirtual-circuit networks inChapter8.Theonlydifference isthat
VCIsarereplaced byDLCIs.
FrameRelayLayers
Figure18.2showstheFrameRelaylayers.FrameRelayhasonlyphysicalanddatalink
layers.520CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.2FrameRelaylayers
Datalink
PhsicalISimplified corefunctionsI
ofdatalinklayer
ANSIstandards
FrameRelayoperates onlyatthephysicalanddatalinklayers."
5131,"Physical Layer
Nospecificprotocol isdefinedforthephysical layerinFrameRelay.Instead,itisleft
totheimplementer tousewhatever isavailable."
5132,"FrameRelaysupportsanyoftheproto­
colsrecognized byANSI."
5133,"DataLinkLayer
Atthedatalinklayer,FrameRelayusesasimpleprotocolthatdoesnotsupportflowor
errorcontrol.Itonlyhasanerrordetection mechanism."
5134,"Figure 18.3showstheformat
ofaFrameRelayframe.TheaddressfielddefinestheDLCIaswellassomebitsusedto
controlcongestion."
5135,"Figure18.3FrameRelayframe
C/R:Command/response
EA:Extended address
FECN:Forward explicitcongestion notificationBECN:Backward explicitcongestion notification
DE:Discardeligibility
DLCI:Datalinkconnection identifier
DLCI
6bitsInformation
1bit1bitDLCI
4bits
Thedescriptions ofthefieldsareasfollows:
oAddress (DLCI)field.Thefirst6bitsofthefirstbytemakesupthefirstpartofthe
DLCI.ThesecondpartoftheDLCIusesthefirst4bitsofthesecondbyte.These
bitsarepartofthelO-bitdatalinkconnection identifier definedbythestandard."
5136,"Wewilldiscussextended addressing attheendofthissection.SECTION 18.1FRAMERELAY 521
oCommand/response (CIR).Thecommand/response (C/R)bitisprovided toallow
upperlayerstoidentifyaframeaseitheracommand oraresponse.Itisnotused
bytheFrameRelayprotocol."
5137,"oExtended address(EA).Theextended address(EA)bitindicates whether the
currentbyteisthefinalbyteoftheaddress.AnEAof0meansthatanotheraddress
byteistofollow(extended addressing isdiscussed later).AnEAof1meansthat
thecurrentbyteisthefinalone."
5138,oForward explicitcongestion notification (FECN).
5139,"Theforward explicitcon­
gestionnotification (FECN) bitcanbesetbyanyswitchtoindicatethattraffic
iscongested."
5140,Thisbitinformsthedestination thatcongestion hasoccurred.
5141,"Inthis
way,thedestination knowsthatitshouldexpectdelayoralossofpackets.Wewill
discusstheuseofthisbitwhenwediscusscongestion controlinChapter24."
5142,oBackward explicitcongestion notification (BECN).
5143,"Thebackward explicitcon­
gestionnotification (BECN) bitisset(inframesthattravelintheotherdirection) to
indicateacongestion probleminthenetwork."
5144,"Thisbitinformsthesenderthatcon­
gestionhasoccurred."
5145,"Inthisway,thesourceknowsitneedstoslowdowntoprevent
thelossofpackets.Wewilldiscusstheuseofthisbitwhenwediscusscongestion
controlinChapter24."
5146,"oDiscard eligibility (DE).Thediscardeligibility (DE)bitindicates thepriority
leveloftheframe.Inemergency situations, switches mayhavetodiscardframesto
relievebottlenecks andkeepthenetworkfromcollapsing duetooverload."
5147,"Whenset
(DE1),thisbittellsthenetworktodiscardthisframeifthereiscongestion."
5148,"Thisbit
canbeseteitherbythesenderoftheframes(user)orbyanyswitchinthenetwork."
5149,"FrameRelaydoesnotprovidefloworerrorcontrol;
theymustbeprovided bytheupper-layer protocols."
5150,"Extended Address
ToincreasetherangeofDLCIs,theFrameRelayaddresshasbeenextended fromthe
original 2-byteaddressto3-or4-byteaddresses."
5151,"Figure18.4showsthedifferent
addresses."
5152,"Note that theEAfielddefinesthenumberofbytes;itis1inthelastbyteof
theaddress,anditisaintheotherbytes.Notethatinthe3-and4-byteformats, thebit
beforethelastbitissettoO."
5153,"Figure18.4Threeaddressformats
DLCI
a.Two-byte address(lO-bitDLCI)
DLCI CIREA=O
OLCI IFECNIBECN DEEA=O
DLCI 0EA=I
b.Three-byte address(16-bitDLCI)OLCI ICIREA=O
OLCIIPECNIBECNIOEEA=O
DLCI EA=O
DLCI I0EA=1
c.Four-byte address(23-bitDLCI)522CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
FRADs
Tohandleframesarrivingfromotherprotocols, FrameRelay uses adevicecalleda
FrameRelayassembler/disassembler (FRAD)."
5154,"AFRADassembles anddisassembles
framescomingfromotherprotocols toallowthemtobecarriedbyFrameRelayframes."
5155,"AFRADcanbeimplemented asaseparatedeviceoraspartofaswitch.Figure18.5
showstwoFRADsconnected toaFrameRelaynetwork."
5156,"Figure18.5FRAD
X.25
ATM
ppp
VOFRFrame
RelayX.25
ATM
ppp
FrameRelaynetworks offeranoptioncalledVoiceOverFrameRelay(VOFR) that
sendsvoicethroughthenetwork."
5157,Voiceisdigitized usingPCMandthencompressed.
5158,Theresultissentasdataframesoverthenetwork.
5159,"Thisfeatureallowstheinexpensive
sendingofvoiceoverlongdistances."
5160,"However, notethatthequalityofvoiceisnotas
goodasvoiceoveracircuit-switched networksuchasthetelephone network."
5161,"Also,the
varyingdelaymentioned earliersometimes corruptsreal-time voice."
5162,"LMI
FrameRelaywasoriginally designed toprovidePVCconnections."
5163,"Therewasnot,
therefore, aprovision forcontrolling ormanaging interfaces."
5164,"LocalManagement
Information (LMI)isaprotocoladdedrecentlytotheFrameRelayprotocoltopro­
videmoremanagement features.Inparticular, LMIcanprovide
oAkeep-alive mechanism tocheckifdataareflowing."
5165,"oAmulticast mechanism toallowalocalendsystemtosendframestomorethan
oneremoteendsystem."
5166,"oAmechanism toallowanendsystemtocheckthestatusofaswitch(e.g.,toseeif
theswitchiscongested)."
5167,"Congestion ControlandQualityofService
OneofthenicefeaturesofFrameRelayisthatitprovides congestion controland
qualityofservice(QoS).Wehavenotdiscussed thesefeaturesyet.InChapter24,we
introduce thesetwoimportant aspectsofnetworking anddiscusshowtheyareimple­
mentedinFrameRelayandsomeothernetworks.SECTION 18.2ATM 523
18.2ATM
Asynchronous Transfer Mode(ATM)isthecellrelayprotocoldesigned bytheATM
ForumandadoptedbytheITU-T.Thecombination ofATMandSONETwillallow
high-speed interconnection ofalltheworld'snetworks."
5168,"Infact,ATMcanbethoughtof
asthe""highway"" oftheinformation superhighway."
5169,"DesignGoals
Amongthechallenges facedbythedesigners ofATM,sixstandout."
5170,"1.Foremost istheneedforatransmission systemtooptimize theuseofhigh-data-rate
transmission media,inparticular opticalfiber.Inadditiontoofferinglargeband­
widths,newertransmission mediaandequipment aredramatically lesssusceptible
tonoisedegradation."
5171,"Atechnology isneededtotakeadvantage ofbothfactorsand
therebymaximize datarates."
5172,"2.Thesystemmustinterface withexistingsystemsandprovidewide-area intercon­
nectivity between themwithoutlowering theireffectiveness orrequiring their
replacement."
5173,"3.Thedesignmustbeimplemented inexpensively sothatcostwouldnotbeabarrier
toadoption."
5174,"IfATMistobecomethebackbone ofinternational communications,
asintended, itmustbeavailable atlowcosttoeveryuserwhowantsit."
5175,"4.Thenewsystemmustbeabletoworkwithandsupporttheexistingtelecom­
munications hierarchies (localloops,localproviders, long-distance carriers,and
soon)."
5176,"5.Thenewsystemmustbeconnection-oriented toensureaccurate andpredictable
delivery."
5177,"6.Lastbutnotleast,oneobjective istomoveasmanyofthefunctions tohardware as
possible(forspeed)andeliminate asmanysoftware functions aspossible(again
forspeed)."
5178,"Problell,ls
Beforewediscussthesolutions tothesedesignrequirements, itisusefultoexaminesome
oftheproblems associated withexistingsystems."
5179,"FrameNetworks
BeforeATM,datacommunications atthedatalinklayerhadbeenbasedonframe
switching andframenetworks."
5180,"Different protocols useframesofvaryingsizeandintri­
cacy.Asnetworks becomemorecomplex, theinformation thatmustbecarriedinthe
headerbecomes moreextensive."
5181,"Theresultislargerandlargerheadersrelativetothe
sizeofthedataunit.Inresponse, someprotocols haveenlarged thesizeofthedataunit
tomakeheaderusemoreefficient (sending moredatawiththesame size header)."
5182,"Unfortunately, largedatafieldscreatewaste.Ifthereisnotmuchinformation totransmit,
muchofthefieldgoesunused.Toimproveutilization, someprotocols providevariable
framesizestousers.524CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERElAYANDATM
MixedNetwork Traffic
Asyoucanimagine, thevarietyofframesizesmakestrafficunpredictable."
5183,"Switches,
multiplexers, androutersmustincorporate elaborate software systemstomanagethe
varioussizesofframes.Agreatdealofheaderinformation mustberead,andeachbit
countedandevaluated toensuretheintegrity ofeveryframe.Internetworking among
thedifferent framenetworks isslowandexpensive atbest,andimpossible atworst."
5184,"Another problem isthatofproviding consistent dataratedelivery whenframe
sizesareunpredictable andcanvarysodramatically."
5185,"Togetthemostoutofbroadband
technology, trafficmustbetime-division multiplexed ontosharedpaths.Imagine the
resultsofmultiplexing framesfromtwonetworks withdifferent requirements (and
framedesigns) ontoonelink(seeFigure18.6).Whathappenswhenline1useslarge
frames(usuallydataframes)whileline2usesverysmallframes(thenormforaudio
andvideoinformation)?"
5186,"Figure18.6Multiplexing usingdifferentframesizes
x
2------------1A x01
Ifline1'sgiganticframeXarrivesatthemultiplexer evenamomentearlierthan
line2'sframes,themultiplexer putsframeXontothenewpathfirst.Afterall,evenif
line2'sframeshavepriority,themultiplexer hasnowayofknowing towaitforthem
andsoprocesses theframethathasarrived.FrameAmusttherefore waitfortheentire
Xbitstreamtomoveintoplacebeforeitcanfollow.ThesheersizeofXcreatesan
unfairdelayforframeA.Thesameimbalance canaffectalltheframesfromline2."
5187,"Because audioandvideoframesordinarily aresmall,mixingthemwithconven­
tionaldatatrafficoftencreatesunacceptable delaysofthistypeandmakessharedframe
linksunusable foraudioandvideoinformation."
5188,"Trafficmusttraveloverdifferent paths,
inmuchthesamewaythatautomobile andtraintrafficdoes.Buttofullyutilizebroad
bandwidth links,weneedtobeabletosendallkindsoftrafficoverthesamelinks."
5189,"CellNetworks
Manyoftheproblems associated withframeinternetworking aresolvedbyadopting
aconceptcalledcellnetworking."
5190,"Acellisasmalldataunitoffixedsize.Inacell
network, whichusesthecellasthebasicunitofdataexchange, alldataareloadedinto
identical cellsthatcanbetransmitted withcomplete predictability anduniformity."
5191,"As
framesofdifferent sizesandformatsreachthecellnetworkfromatributary network,
theyaresplitinto multiple smalldataunitsofequallengthandareloadedintocells."
5192,Thecellsarethenmultiplexed withothercellsandroutedthroughthecellnetwork.
5193,"Because eachcellisthesamesizeandallaresmall,theproblems associated with
multiplexing different-sized framesareavoided.SECTION 18.2ATM 525
Acellnetwork usesthecellasthebasicunitofdataexchange."
5194,"Acellisdefinedasasmall,fixed-size blockofinformation."
5195,"Figure18.7showsthemultiplexer fromFigure18.6withthetwolinessending
cellsinsteadofframes.FrameXhasbeensegmented intothreecells:X,Y,andZ.Only
thefirstcellfromline1getsputonthelinkbeforethefirstcellfromline2.Thecells
fromthetwolinesareinterleaved sothatnonesuffersalongdelay."
5196,"Figure18.7Multiplexing usingcells
z y xDOD
C B ADOD2------=-----;C Z B Y A xClClDClClCl
Asecondpointinthissamescenario isthatthehighspeedofthelinkscoupled
withthesmallsizeofthecellsmeansthat,despiteinterleaving, cellsfromeachline
arriveattheirrespective destinations inanapproximation ofacontinuous stream(much
asamovieappearstoyourbraintobecontinuous actionwheninfactitisreallyaseries
ofseparate, stillphotographs)."
5197,"Inthisway,a cellnetworkcanhandlereal-time trans­
missions, suchasaphonecall,withoutthepartiesbeingawareofthesegmentation or
multiplexing atall."
5198,"Asynchronous TDM
ATMusesasynchronous time-division multiplexing-that iswhyitiscalledAsynchro­
nousTransferMode-to multiplex cellscorningfromdifferentchannels.Itusesfixed-size
slots(sizeofacell).ATMmultiplexers fillaslotwithacellfromanyinputchannelthat
hasacell;theslotisemptyifnoneofthechannelshasacelltosend."
5199,Figure18.8showshowcellsfromthreeinputsaremultiplexed.
5200,"Atthefirsttickof
theclock:channel2hasnocell(emptyinputslot),sothemultiplexer fillstheslotwith
a cellfromthethirdchannel.Whenallthecellsfromallthechannels aremultiplexed,
theoutputslotsareempty."
5201,"Figure18.8ATMmultiplexing
A3A2Alggg
B281
10110lLJ2--------1
C3 C2 Cl
101101101
3-==-=~~1/C382A3C2BlA2ClAi
LJLJgggggggg526 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Architecture
ATMisacell-switched network."
5202,"Theuseraccessdevices, calledtheendpoints, are
connected throughauser-to-network interface (UNI)totheswitches insidethenet­
work.Theswitches areconnected throughnetwork-to-network interfaces (NNIs)."
5203,Figure18.9showsanexampleofanATMnetwork.
5204,"Figure18.9Architecture ofanATMnetwork
Endpoints
VirtualConnection
Connection betweentwoendpoints isaccomplished throughtransmission paths(TPs),
virtualpaths(YPs),andvirtualcircuits(YCs).Atransmission path(TP)isthephysical
connection (wire,cable,satellite, andsoon)between anendpoint andaswitchor
betweentwoswitches."
5205,"Thinkoftwoswitches astwocities.Atransmission pathisthe
setofallhighways thatdirectlyconnectthetwocities."
5206,"Atransmission pathisdividedintoseveralvirtualpaths.Avirtualpath(VP)pro­
videsaconnection orasetofconnections betweentwoswitches."
5207,"Thinkofavirtualpath
asahighway thatconnects twocities.Eachhighway isavirtualpath;thesetofall
highways isthetransmission path."
5208,"Cellnetworks arebasedonvirtualcircuits(VCs).Allcellsbelonging toasingle
message followthesamevirtualcircuitandremainintheiroriginalorderuntilthey
reachtheirdestination."
5209,Thinkofavirtualcircuitasthelanesofahighway (virtualpath).
5210,"Figure18.10showstherelationship between atransmission path(aphysical connec­
tion),virtualpaths(acombination ofvirtualcircuitsthatarebundledtogetherbecause
partsoftheirpathsarethesame),andvirtualcircuitsthatlogically connecttwopoints."
5211,"Figure18.10 Tp,VPs,andVCs
VC
VC--t-I
VC
VC
VC~;:}.';'il~VCvc
vc
VC
VC
VCVCSECTION 18.2ATM 527
Tobetterunderstand theconceptofVPsandVCs,lookatFigure18.11.Inthis
figure,eightendpoints arecommunicating usingfourVCs.However, thefirsttwoVCs
seemtosharethesamevirtualpathfromswitchItoswitchIII,soitisreasonable to
bundlethesetwoVCstogethertoformoneVP.Ontheotherhand,itisclearthatthe
othertwoVCssharethesamepathfrom switch ItoswitchIV,soitisalsoreasonable to
combine themtoformoneVP."
5212,"Figure18.11 Example ofVPsandVCs
Identifiers Inavirtualcircuitnetwork, toroutedatafromoneendpoint toanother,
thevirtualconnections needtobeidentified."
5213,"Forthispurpose, thedesigners ofATM
createdahierarchical identifier withtwolevels:avirtualpathidentifier (VPI)anda
virtual-circuit identifier (Vel).TheVPIdefinesthespecificVP,andtheVeldefinesa
particular VCinsidetheVP.TheVPIisthesameforallvirtualconnections thatare
bundled(logically) intooneVP."
5214,Notethatavirtualconnection isdefinedbyapairofnumbers: theVPIandthevel.
5215,"Figure18.12showstheVPIsandVClsforatransmission path.Therationale for
dividinganidentifier intotwopartswillbecomeclearwhenwediscussroutinginan
ATMnetwork."
5216,ThelengthsoftheVPIsforUNIsandNNIsaredifferent.
5217,"InaUNI,theVPIis
8bits,whereasinanNNI,theVPIis12bits.ThelengthoftheVCIisthesameinboth
interfaces (16bits).Wetherefore cansaythatavirtualconnection isidentified by
24bitsinaUNIandby28bitsinanNNI(seeFigure18.13)."
5218,"Thewholeideabehinddividingavirtualcircuitidentifier intotwopartsistoallow
hierarchical routing.Mostoftheswitches inatypicalATMnetworkareroutedusing
VPIs.Theswitches attheboundaries ofthenetwork, thosethatinteractdirectlywith
theendpoint devices,usebothVPIsandVCIs.
Cells
ThebasicdataunitinanATMnetworkiscalledacell.Acellisonly53byteslongwith
5bytesallocated totheheaderand48bytescarryingthepayload(userdatamaybeless528CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.12 Connection identifiers
Thisvirtualconnection is
uniquely definedusingthepair:
(14 21)t t
VPlVCl
VCl=21 _....c.~~
VCl=32-+---I
VCl=45
VCl=70
VCl=74-+-l
VCl=45
Figure18.13 Virtualconnection identifiers inUNIsandNNIsVCl=21
VCl=32
VCl=45
VCl=70
VCl=74
VCl=45
1L....-_V_P_l_-'- V_C_I 1
I- 24bits ·18bits 16bits 12bits 16bits
IVPl VClI
~~~ -----.J
I- 28bits -,
a.VPIandVCIinaUNI b.VPIandVCIinanNNI
than48bytes).Wewillstudyindetailthefieldsofacell,butforthemomentitsuffices
tosaythatmostoftheheaderisoccupied bytheVPIandVCIthatdefinethevirtual
connection throughwhichacellshouldtravelfromanendpoint toaswitchorfroma
switchtoanotherswitch.Figure18.14showsthecellstructure."
5219,"Figure18.14AnATMcell
Header
-+1IVPIIVCII
I,5bytes
Connection Establishment andRelease53bytesPayload
48bytes
LikeFrameRelay,ATMusestwotypesofconnections: PVCandSVc.
PVCApermanent virtual-circuit connection isestablished betweentwoendpoints by
thenetworkprovider."
5220,"TheVPlsandvcrsaredefinedforthepermanent connections,
andthevaluesareenteredforthetablesofeachswitch.SECTION 18.2ATM 529
SVCInaswitched virtual-circuit connection, eachtimeanendpoint wantstomakea
connection withanotherendpoint, anewvirtualcircuitmustbeestablished."
5221,"ATMcannot
dothejobbyitself,butneedsthenetworklayeraddresses andtheservicesofanotherpro­
tocol(suchasIP).Thesignaling mechanism ofthisotherprotocol makesaconnection
requestbyusingthenetworklayeraddresses ofthetwoendpoints."
5222,"Theactualmechanism
dependsonthenetworklayerprotocol."
5223,"Switching
ATMusesswitches toroutethecellfromasourceendpoint tothedestination endpoint."
5224,"AswitchroutesthecellusingboththeVPlsandtheVCls.Theroutingrequires the
wholeidentifier."
5225,"Figure18.15showshowaVPCswitchroutesthecell.Acellwitha
VPIof153andVCIof67arrivesatswitchinterface (port)1.Theswitchchecksits
switching table,whichstoressixpiecesofinformation perrow:arrivalintetface num­
ber,incoming VPI,incoming VCI,corresponding outgoing interface number,thenew
VPI,andthenewVCLTheswitchfindstheentrywiththeinterface 1,VPI153,and
VCI67anddiscovers thatthecombination corresponds tooutputinterface 3,VPI140,
andVCI92.ItchangestheVPIandVCIintheheaderto140and92,respectively, and
sendsthecelloutthroughinterface 3."
5226,"Figure18.15 Routingwithaswitch
VCI~---Input Output
Interface VPIVCIInterface VPIVCI
115367314092
..............."
5227,.............
5228,"~.',o""""';e'%~0"" ..e,.'''~~
VPI
153
4..A..C1 1
92 I2
3VPIV~
Switching Fabric
Theswitching technology hascreatedmanyinteresting featurestoincreasethespeedof
switches tohandledata.Wediscussed switching fabricsinChapter8."
5229,"ATMLayers
TheATMstandard definesthreelayers.Theyare,fromtoptobottom,theapplication
adaptation layer,theATMlayer,andthephysicallayer(seeFigure18.16)."
5230,"Theendpoints useallthreelayers whiletheswitches useonlythetwobottomlayers
(seeFigure18.17)."
5231,"Physical Layer
LikeEthernetandwirelessLANs,ATMcellscanbecarriedbyanyphysicallayercarrier.530 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.16ATMlayers
AAL
AALl AAL2 AAL3/4 AAL5
ATMlayer I ------
PhysicallayerI----_----1
Figure18.17ATMlayersinendpoint devicesandswitches
AALIAALI
AJM ~ ArM ~ATM ATM~i ,
Physical,IPhysical Physical
~Physical
~
I I II
I
c@
~I
I I
D D
SONET TheoriginaldesignofATMwasbasedonSONET(seeChapter17)asthe
physical layercarrier.SONETispreferred fortworeasons."
5232,"First,thehighdatarate
ofSONET's carrierreflectsthedesignandphilosophy ofATM.Second, inusing
SONET, theboundaries ofcellscanbeclearlydefined."
5233,"AswesawinChapter 17,
SONETspecifies theuseofapointertodefinethebeginning ofapayload."
5234,"Ifthebegin­
ningofthefirstATMcellisdefined,therestofthecellsinthesamepayloadcaneasily
beidentified becausetherearenogapsbetweencells.Justcount53bytesaheadtofind
thenextcell."
5235,OtherPhysical Technologies ATMdoesnotlimitthephysical layertoSONET.
5236,"Othertechnologies, evenwireless, maybeused.However, theproblemofcellbound­
ariesmustbesolved.Onesolutionisforthereceivertoguesstheendofthecelland
applytheCRCtothe5-byteheader.Ifthereisnoerror,theendofthecell1sfound,witha
highprobability, correctly."
5237,Count52bytesbacktofindthebeginning ofthecell.
5238,"ATMLayer
TheATMlayerprovides routing,trafficmanagement, switching, andmultiplexing
services.Itprocesses outgoing trafficbyaccepting 48-bytesegments fromtheAAL
sublayers andtransforming theminto53-bytecellsbytheadditionofa5-byteheader
(seeFigure18.18).SECTION 18.2ATM 531
Figure18.18ATMlayer
FromAAL
A
T
M
HeaderFormat ATMusestwofonnatsforthisheader,oneforuser-to-network inter­
face(UNI)cellsandanotherfornetwork-to-network interface (NNI)cells.Figure18.19
showstheseheadersinthebyte-by-byte formatpreferred bytheITU-T(eachrowrepre­
sentsabyte)."
5239,"Figure18.19ATMheaders
GFC:Genericflowcontrol
VPl:Virtualpathidentifier
VCl:VirtualcircuitidentifierPT:Payloadtype
CLP:Celllosspriority
HEC:Headererrorcontrol
GFC
VPI
VCIVPI
VCI
VCI
·Pltyloail
datlL
UNIcellCLP
,Pay;lofuI:
data
NNIcellCLP
oGeneric flowcontrol(GFC).The4-bitGFCfieldprovides flowcontrolatthe
UNIlevel.TheITU-Thasdetermined thatthislevelofflowcontrolisnotneces­
saryattheNNIlevel.IntheNNIheader,therefore, thesebitsareaddedtotheVPI."
5240,"ThelongerVPIallowsmorevirtualpathstobedefinedattheNNIlevel.The
formatforthisadditional VPIhasnotyetbeendetermined."
5241,"oVirtualpathidentifier (VPI).TheVPIisan8-bitfieldinaUNIcellanda12-bit
fieldinanNNIcell(seeabove)."
5242,oVirtualcircuitidentifier (VCI).TheVCIisa16-bitfieldinbothframes.
5243,"oPayload type(PT).Inthe3-bitPTfield,thefirstbitdefinesthepayloadasuser
dataormanagerial information."
5244,"Theinterpretation ofthelast2bitsdependsonthe
firstbit.532CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
oCelllosspriority(CLP).TheI-bitCLPfieldisprovidedforcongestion control.A
cellwithitsCLPbitsettoImustberetainedaslongastherearecellswithaCLPofO."
5245,Wediscusscongestion controlandqualityofserviceinanATMnetworkinChapter24.
5246,"oHeadererrorcorrection (HEC).TheHECisacodecomputed forthefirst
4bytesoftheheader.ItisaCRCwiththedivisorx8+x2+x+1thatisusedto
correctsingle-bit errorsandalargeclassofmultiple-bit errors."
5247,"Application Adaptation Layer
Theapplication adaptation layer(AAL)wasdesigned toenabletwoATMconcepts."
5248,"First,ATMmustacceptanytypeofpayload, bothdataframesandstreamsofbits.A
dataframecancomefromanupper-layer protocolthatcreatesaclearlydefinedframe
tobesenttoacarriernetworksuchasATM.Agoodexampre istheInternet.ATMmust
alsocarrymultimedia payload."
5249,"Itcanacceptcontinuous bitstreamsandbreakthem
intochunkstobeencapsulated intoacellattheATMlayer.AALusestwosublayers to
accomplish thesetasks."
5250,"Whether thedataareadataframeorastreamofbits,thepayloadmustbeseg­
mentedinto48-bytesegments tobecarriedbyacell.Atthedestination, thesesegments
needtobereassembled torecreatetheoriginalpayload."
5251,"TheAALdefinesasublayer,
calledasegmentation andreassembly (SAR)sublayer, todoso.Segmentation isat
thesource;reassembly, atthedestination."
5252,"Beforedataaresegmented bySAR,theymustbepreparedtoguarantee theintegrity
ofthedata.Thisisdonebyasublayercalledtheconvergence sublayer (CS)."
5253,"ATMdefinesfourversions oftheAAL:AALl,AAL2,AAL3/4, andAAL5."
5254,"Although wediscussalltheseversions, weneedtoinformthereaderthatthecommon
versions todayareAALIandAAL5.Thefirstisusedinstreaming audioandvideo
communication; thesecond,indatacommunications."
5255,"AALIAALIsupports applications thattransferinformation atconstant bitrates,
suchasvideoandvoice.ItallowsATMtoconnectexistingdigitaltelephone networks
suchasvoicechannels andTlines.Figure18.20showshowabitstreamofdatais
choppedinto47-bytechunksandencapsulated incells."
5256,"TheCSsublayerdividesthebitstreaminto47-bytesegments andpassesthemto
theSARsublayerbelow.NotethattheCSsublayerdoesnotaddaheader."
5257,"TheSARsublayer adds1byteofheaderandpassesthe48-bytesegmenttothe
ATMlayer.Theheaderhastwofields:
oSequence number (SN).This4-bitfielddefinesasequence numbertoorderthe
bits.Thefirstbitissometimes usedfortiming,whichleaves3bitsforsequencing
(modulo8)."
5258,"oSequence number protection (SNP).Thesecond4-bitfieldprotectsthefirst
field.Thefirst3bitsautomatically correcttheSNfield.Thelastbitisaparitybit
thatdetectserroroverall8bits."
5259,"AAL2Originally AAL2wasintendedtosupportavariable-data-rate bitstream,butit
hasbeenredesigned."
5260,"Itisnowusedforlow-bit-rate trafficandshort-frame trafficsuch
asaudio(compressed oruncompressed), video,orfax.AgoodexampleofAAL2useis
inmobiletelephony."
5261,"AAL2allowsthemultiplexing ofshortframesintoonecell.SECTION 18.2ATM 533
Figure18.20AALl
Constant-bit-rate datafromupperlayer
......................"
5262,1110010010001111 111110101010101 ..
5263,"AI I
CSI IIII
A 47bytes 47bytes: 47bytes:
I ILtEl 00ItillISAR
1 I147bytes I147bytes III47bytes I
I I I I IA~OO 100I00I
T I I
M 548bytesI548bytes1548bytesI
SARheaderISN
4bitsSNP
4bitsSN:Sequence number
SNP:Sequence numberprotection
UUI:User-to-user indication
HEC:Headererrorcontrol
SF:StartfieldFigure18.21showstheprocessofencapsulating ashortframefromthesamesource
(thesameuserofamobilephone)orfromseveralsources(severalusersofmobiletele­
phones)intoonecell."
5264,"Figure18.21 AAL2
ShortpacketsII
fromupperlayer~
Affitj
3~t""~24~241CS
A13241 "" ""I
""~L[illr SAR2 I147bytes1 1147bytesI
I 1 1 IA~OO I~od IT
M 548bytes 548bytes
CSheaderI__C_IDI__LI_---.J~ HECI
8bits 6 2 3 5
SARheaderISFICID:Channelidentifier
'----:-8 -cbi-ts--- LI:Lengthindicator
PPT:Packetpayloadtype
TheCSlayeroverhead consistsoffivefields:
oChannel identifier (CID).The8-bitCIDfielddefinesthechannel(user)ofthe
shortpacket."
5265,"oLengthindicator (LI).The6-bitLIfieldindicates howmuchofthefinalpacket
isdata."
5266,"oPacketpayloadtype(PPT).ThePPTfielddefinesthetypeofpacket.534CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
oUser-to-user indicator (UUI).TheUUIfieldcanbeusedbyend-to-end users."
5267,oHeadererrorcontrol(HEC).Thelast5bitsisusedtocorrecterrorsintheheader.
5268,"Theonlyoverhead attheSARlayeristhestartfield(SF)thatdefinestheoffsetfrom
thebeginning ofthepacket."
5269,"AAL3/4 Initially,AAL3wasintendedtosupportconnection-oriented dataservicesand
AAL4tosupportconnectionless services.Astheyevolved,however,itbecameevident
thatthefundamental issuesofthetwoprotocols werethesame.Theyhavetherefore been
combined intoasingleformatcalledAAL3/4."
5270,Figure18.22showstheAAL3/4sublayer.
5271,"Figure18.22AAL3/4
Datapacketupto65,535bytes
I
AI 1
cs[illData~ I'...IA I,,
1 I,,I...,
L
~I~,,
~~SAR @ )~o0 0
3/412442
1124421 124421:I:I I 1
A I I 1 1
T-+-[[1 I[[] I..olliJ I
M 548bytes 548bytes 548bytes
CSheaderICPII~
8bits 8
CStrailerIAL~
8bits 8BAsize
16
L
16CPI:Common partidentifier
Btag:Beginning tag
BAsize:Bufferallocation size
AL:Alignment
Etag:Endingtag
L:Length
SARheader~I MID
2 4 10
SARtrailer~I CRC
6 10ST:Segment type
SN:Sequence number
MID:Multiplexing identifier
LI:Lengthidentifier
CRC:Errordetector
TheCSlayerheaderandtrailerconsistofsixfields:
oCommon partidentifier (CPI).TheCPIdefineshowthesubsequent fieldsareto
beinterpreted."
5272,ThevalueatpresentisO.
5273,"oBegintag(Btag).ThevalueofthisfieldisrepeatedineachceUtoidentifyallthe
cellsbelonging tothesamepacket.ThevalueisthesameastheEtag(seebelow)."
5274,oBufferallocation size(BAsize).
5275,"The2-byteBAfieldtellsthereceiverwhatsize
bufferisneededforthecomingdata."
5276,"oAlignment (AL).TheI-byteALfieldisincluded tomaketherestofthetrailer
4byteslong."
5277,"oEndingtag(Etag).TheI-byteETfieldservesasanendingflag.Itsvalueisthe
sameasthatofthebeginning tag."
5278,"oLength(L).The2-byteLfieldindicates thelengthofthedataunit.SECTION 18.2ATM 535
TheSARheaderandtrailerconsistoffivefields:
oSegment type(ST).The2-bitSTidentifier specifies thepositionofthesegment
inthemessage: beginning (00),middle(01),orend(10).Asingle-segment message
hasanSTof11."
5279,oSequence number(SN).Thisfieldisthesameasdefinedpreviously.
5280,"oMultiplexing identifier (MID).The10-bitMIDfieldidentifies cellscomingfrom
differentdataflowsandmultiplexed onthesamevirtualconnection."
5281,"oLengthindicator (LI).Thisfielddefineshowmuchofthepacketisdata,not
padding."
5282,oCRC.Thelast10bitsofthetrailerisaCRCfortheentiredataunit.
5283,"AALSAAL3/4 provides comprehensive sequencing anderrorcontrolmechanisms
thatarenotnecessary foreveryapplication."
5284,"Fortheseapplications, thedesigners of
ATMhaveprovided afifthAALsublayer, calledthesimpleandefficientadaptation
layer(SEAL)."
5285,"AALSassumes thatallcellsbelonging toasinglemessage travel
sequentially andthatcontrolfunctions areincluded intheupperlayersofthesending
application."
5286,Figure18.23showstheAAL5sublayer.
5287,"Figure18.23AAL5
Datapacketuptof55,535bytes
I I
AI I
CSIData~ K,iI} II , ""-I I
I,,
I
LII,,I I
SAR 11...,I
5 I48bytes I:48bytesI I48bytes I
II,'I II I I IA...-[[jI[RJI[[IIT •••
M 548bytes 548bytes 548bytes
CStrailer~_L_...J.-."
5288,"__C_RC_--,
8 8 16 32UU:Channelidentifier
CPI:Common partidentifier
L:Length
CRC:Errordetector
ThefourtrailerfieldsintheCSlayerare
oUser-to-user (UU).Thisfieldisusedbyendusers,asdescribed previously."
5289,oCommon partidentifier (CPI).Thisfieldisthesameasdefinedpreviously.
5290,oLength(L).The2-byteLfieldindicates thelengthoftheoriginaldata.
5291,oCRC.Thelast4bytesisforerrorcontrolontheentiredataunit.
5292,"Congestion ControlandQualityofService
ATMhasaverydeveloped congestion controlandqualityofservicethatwediscussin
Chapter24.536 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
18.3ATMLANs
ATMismainlyawide-area network (WANATM);however, thetechnology canbe
adaptedtolocal-area networks (ATMLANs).Thehighdatarateofthetechnology (155
and622Mbps)hasattracted theattention ofdesigners whoarelookingforgreaterand
greaterspeedsinLANs.Inaddition, ATMtechnology hasseveraladvantages thatmake
itanidealLAN:
oATMtechnology supports different typesofconnections between twoendusers.It
supports permanent andtemporary connections."
5293,"oATMtechnology supports multimedia communication withavarietyofbandwidths
fordifferentapplications."
5294,"Itcanguarantee abandwidth ofseveralmegabits persecond
forreal-time video.Itcanalsoprovidesupportfortexttransfer.during off-peakhours."
5295,oAnATMLANcanbeeasilyadaptedforexpansion inanorganization.
5296,"ATMLANArchitecture
Today,wehavetwowaystoincorporate ATMtechnology inaLANarchitecture: creating
apureATMLANormakingalegacyATMLAN.Figure18.24showsthetaxonomy."
5297,"Figure18.24ATMLANs
_______ Mixed
architecture
PureATMArchitecture
InapureATMLAN,anATMswitchisusedtoconnectthestationsinaLAN,in
exactlythesamewaystationsareconnected toanEthernet switch.Figure18.25shows
thesituation."
5298,"Inthisway,stationscanexchange dataatoneoftwostandard ratesofATMtech­
nology(155and652Mbps).However, thestationusesavirtualpathidentifier (VPI)
andavirtualcircuitidentifier(Vel),insteadofasourceanddestination address."
5299,Thisapproach hasamajordrawback.
5300,"Thesystemneedstobebuiltfromtheground
up;existingLANscannotbeupgraded intopureATMLANs.
LegacyLANArchitecture
Asecondapproach istouseATMtechnology asabackbone toconnecttraditional
LANs.Figure18.26showsthisarchitecture, alegacyATMLAN.SECTION 18.3ATMLANs 537
Figure18.25PureATMLAN
ATMswitch~
Station
StationStation
Station
Figure18.26LegacyATMLAN
Station
StationConverter ATMswitchEthernet
Station StationStationStation
Inthisway,stationsonthesameLANcanexchange dataattherateandformatof
traditional LANs(Ethernet, TokenRing,etc.).Butwhentwostationsontwodifferent
LANsneedtoexchange data,theycangothroughaconverting devicethatchangesthe
frameformat.Theadvantage hereisthatoutputfromseveralLANscanbemultiplexed
together tocreateahigh-data-rate inputtotheATMswitch.Thereareseveralissues
thatmustberesolved first."
5301,"MixedArchitecture
Probably thebestsolutionistomixthetwoprevious architectures."
5302,"Thismeanskeeping
theexistingLANsand,atthesametime,allowing newstationstobedirectlyconnected
toanATMswitch.Themixedarchitecture LANallowsthegradualmigration oflegacy
LANsontoATMLANsbyaddingmoreandmoredirectlyconnected stationstothe
switch.Figure18.27showsthisarchitecture."
5303,"Again,thestationsinonespecificLANcanexchange datausingtheformatand
datarateofthatparticular LAN.Thestationsdirectlyconnected totheATMswitchcan
useanATMframetoexchange data.However, theproblemis,Howcanastationina538 CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
Figure18.27 Mixedarchitecture ATMIAN
--~
ATMstationATMstation
ATMswitch
Station Station StationStation
Station
traditional LANcommunicate withastationdirectlyconnected totheATMswitchor
viceversa?Weseehowtheproblemisresolved now."
5304,"LANEmulation (LANE)
Atthesurfacelevel,theuseofATMtechnology inLANsseemslikeagoodidea.However,
manyissuesneedtoberesolved, assummarized below:
oConnectionless versusconnection-oriented."
5305,"Traditional LANs,suchasEthernet,
areconnection lessprotocols."
5306,"Astationsendsdatapacketstoanotherstationwhen­
everthepacketsareready.Thereisnoconnection establishment orconnection
termination phase.Ontheotherhand,ATMisaconnection-oriented protocol; a
stationthatwishestosendcellstoanotherstationmustfirstestablish aconnection
and,afterallthecellsaresent,terminate theconnection."
5307,oPhysical addresses versusvirtual-circuit identifiers.
5308,"Closelyrelatedtothefirst
issueisthedifference inaddressing."
5309,"Aconnectionless protocol, suchasEthernet,
definestherouteofapacketthroughsourceanddestination addresses."
5310,"However, a
connection-oriented protocol, suchasATM,definestherouteofacellthrough
virtualconnection identifiers (VPIsandVCIs)."
5311,oMulticasting andbroadcasting delivery.
5312,"Traditional LANs,suchasEthernet,
canbothmulticast andbroadcast packets;astationcansendpacketstoagroup
ofstationsortoallstations.Thereisnoeasywaytomulticast orbroadcast onan
ATMnetworkalthough point-to-multipoint connections areavailable."
5313,oInteroperability.
5314,"Inamixedarchitecture, astationconnected toalegacyLAN
mustbeabletocommunicate withastationdirectlyconnected toanATMswitch."
5315,"Anapproach calledlocal-area network emulation (LANE)solvestheabove-mentioned
problems andallowsstationsinamixedarchitecture tocommunicate withoneanother."
5316,Theapproach usesemulation.
5317,"Stationscanuseaconnectionless servicethatemulates a
connection-oriented service.Stationsusethesourceanddestination addresses forinitialSECTION 18.3ATMLANs 539
connection andthenuseVPIandVCIaddressing."
5318,"Theapproach allowsstationstouse
unicast,multicast, andbroadcast addresses."
5319,"Finally,theapproach convertsframesusinga
legacyformattoATMcellsbeforetheyaresentthroughtheswitch."
5320,"Client/Server Model
LANEisdesigned asaclient/server modeltohandlethe fourpreviously discussed
problems."
5321,"Theprotocoluses one typeofclientandthreetypesofservers,asshownin
Figure18.28."
5322,"Figure18.28 ClientandserversinaLANE
LEes
LES
BUS
LANEmulation Client
AllATMstationshaveLANemulation client(LEC)software installed ontopofthe
threeATMprotocols."
5323,"Theupper-layer protocols areunaware oftheexistence ofthe
ATMtechnology."
5324,"Theseprotocols sendtheirrequeststoLECforaLANservicesuchas
connectionless deliveryusingMACunicast,multicast, orbroadcast addresses."
5325,"TheLEC,
however, justinterprets therequestandpassestheresultontotheservers."
5326,"LANEmulation Configuration Server
TheLANemulation configuration server(LECS)isusedfortheinitialconnection
betweentheclientandLANE.Thisserverisalwayswaitingtoreceivetheinitialcontact."
5327,Ithasawell-known ATMaddressthatisknowntoeveryclientinthesystem.
5328,"LANEmulation Server
LANemulation server(LES)software isinstalled ontheLES.Whenastation
receivesaframetobesenttoanotherstationusingaphysical address,LECsendsa
specialframetotheLES.Theservercreatesavirtualcircuitbetweenthesourceandthe
destination station.Thesourcestationcannowusethisvirtualcircuit(andthecorre­
sponding identifier) tosendtheframeorframestothedestination."
5329,"Broadcast/Unknown Server
Multicasting andbroadcasting requiretheuseofanotherservercalledthebroadcast!
unknown server(BUS).Ifastationneedstosendaframetoagroupofstationsorto
everystation,theframefirstgoestotheBUS;thisserverhaspermanent virtualconnec­
tionstoeverystation.Theservercreatescopiesofthereceivedframeandsendsacopy
toagroupofstationsortoallstations,simulating amulticasting orbroadcasting process.540CHAPTER 18ViRTUAL-CIRCUIT NETWORKS: FRAMEREIAYANDATM
Theservercanalsodeliveraunicastframebysendingtheframetoeverystation.Inthis
casethedestination addressisunknown."
5330,"Thisissometimes moreefficient thangetting
theconnection identifier fromtheLES."
5331,"MixedArchitecture withClient/Server
Figure18.29showsclientsandserversinamixedarchitecture ATMLAN.Inthefigure,
threetypesofserversareconnected totheATMswitch(theycanactuallybepartofthe
switch).Alsoweshowtwotypesofclients.StationsAandB,designed tosendandreceive
LANEcommunication, aredirectlyconnected totheATMswitch.StationsC,D,E,F,G,
andHintraditional legacyLANsareconnected totheswitchviaaconverter."
5332,"Thesecon­
vertersactasLECclientsandcommunicate onbehalfoftheirconnected stations."
5333,"Figure18.29Amixedarchitecture ATMIANusingIANE
Upper
layers
ATM
LECAAL
ATMAALBUS
Upper
layersUpper
layers
Physical
PhysicalATMswitchATMLES
AAL
Physical
LECS
ATMAAL
Upper
layers
LEC
AALUpper
layers
Physical
f---:::-:=-..;A:.:;,;TM=--1J LEC
Physical(client)
Converter
softwareConverter
software
LEC
MAC AAL
ATM
Physical PhysicalLEC
AAL MAC
ATM
Physical Physical
LEC
(client)
Station Station
18.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext.SECTION 18.6SUMMARY 541
Books
FrameRelayandATMarediscussed inChapter3of[Sta98].ATMLANisdiscussed
inChapter 14of[For03]."
5334,"Chapter7of[Kei02]alsohasagooddiscussion ofATM
LANs.
18.5KEYTERMS
AALI
AAL2
AAL3/4
AAL5
application adaptation layer(AAL)
Asynchronous Transfer Mode
(ATM)
ATMlayer
ATMswitch
backward explicitcongestion notification
(BECN)
bandwidth ondemand
broadcast/unknown server(BUS)
burstydata
cell
cellnetwork
cellrelay
client/server model
congestion control
conyergence sublayer (CS)
datalinkconnection identifier
(DLCI)
discardeligibility (DE)
forwardexplicitcongestion notification
(FECN)
FrameRelayFrameRelayassembler/disassembler
(FRAD)
LANemulation client(LEC)
LANemulation configuration server
(LECS)
LANemulation server(LES)
legacyATMLAN
local-area networkemulation (LANE)
LocalManagement Information (LMI)
mixedarchitecture LAN
network-to-network interface (NNI)
permanent virtualcircuit(PVC)
pureATMLAN
qualityofservice(QoS)
segmentation andreassembly (SAR)
simpleandefficientadaptation layer
(SEAL)
switched virtualcircuit(SVC)
transmission path(TP)
user-to-network interface (UNI)
virtualcircuit(VC)
virtual-circuit identifier (VCl)
virtualpath(VP)
virtualpathidentifier (VPI)
VoiceOverFrameRelay(VOFR)
X.25
18.6SUMMARY
oVirtual-circuit switching isadatalinklayertechnology inwhichlinksareshared."
5335,oAvirtual-circuit identifier (VCI)identifies aframebetweentwoswitches.
5336,"oFrameRelayisarelatively high-speed, cost-effective technology thatcanhandle
burstydata.542CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
DBothPVCandSVCconnections areusedinFrameRelay."
5337,DThedatalinkconnection identifier (DLCI)identifies avirtualcircuitinFrameRelay.
5338,"oAsynchronous Transfer Mode(ATM)isacellrelayprotocol that,incombination
withSONET, allowshigh-speed connections."
5339,"oAcellisasmall,fixed-size blockofinformation."
5340,"DTheATMdatapacketisacellcomposed of53bytes(5bytesofheaderand48bytes
ofpayload)."
5341,DATMeliminates thevaryingdelaytimesassociated withdifferent-size packets.
5342,DATMcanhandlereal-time transmission.
5343,oAuser-to-network interface(UNI)istheinterfacebetweenauserandanATMswitch.
5344,oAnetwork-to-network interface (NNI)istheinterface betweentwoATMswitches.
5345,"DInATM,connection between twoendpoints isaccomplisheCl throughtransmission
paths(TPs),virtualpaths(VPs),andvirtualcircuits(VCs)."
5346,"DInATM,acombination ofavirtualpathidentifier (VPI)andavirtual-circuit
identifier identifies avirtualconnection."
5347,"oTheATMstandard definesthreelayers:
a.Application adaptation layer(AAL)acceptstransmissions fromupper-layer
servicesandmapsthemintoATMcells."
5348,"b.ATMlayerprovides routing,trafficmanagement, switching, andmultiplexing
serVIces."
5349,"c.Physicallayer definesthetransmission medium, bittransmission, encoding, and
electrical- to-optical transformation."
5350,"DTheAAL isdividedintotwosublayers: convergence sublayer(CS)andsegmentation
andreassembly (SAR)."
5351,"oTherearefourdifferentAALs,eachforaspecificdatatype:
a.AALIforconstant-bit-rate stream."
5352,b.AAL2forshortpackets.
5353,"c.AAL3/4forconventional packetswitching (virtual-circuit approach ordatagram
approach)."
5354,d.AAL5forpacketsrequiring nosequencing andnoerrorcontrolmechanism.
5355,DATMtechnology canbeadoptedforuseinaLAN(ATMLAN).
5356,"DInapureATMLAN,anATMswitchconnects stations."
5357,"DInalegacyATMLAN,thebackbone thatconnects traditional LANsusesATM
technology."
5358,"oAmixedarchitecture ATMLANcombines featuresofapureATMLANanda
legacyATMLAN."
5359,"DLocal-area networkemulation (LANE)isaclient/server modelthatallowstheuse
ofATMtechnology inLANs.
DLANEsoftware includesLANemulation client(LECS),LANemulation configu­
rationserver(LECS),LANemulation server(LES),andbroadcast/unknown server
(BUS)modules.SECTION 18.7PRACTICE SET 543
18.7PRACTICE SET
ReviewQuestions
1.Therearenosequence numbers inFrameRelay.Why?"
5360,"2.Cantwodevicesconnected tothesameFrameRelaynetwork usethesame
DLCIs?"
5361,3.WhyisFrameRelayabettersolutionforconnecting LANsthanT-llines?
5362,"4.Compare anSVCwithaPVc.
5.DiscusstheFrameRelayphysicallayer."
5363,6.Whyismultiplexing moreefficientifallthedataunitsarethesamesize?
5364,7.HowdoesanNNIdifferfromaUNI?
5365,"8.Whatistherelationship betweenTPs,VPs,andVCs?"
5366,9.HowisanATMvirtualconnection identified?
5367,10.NametheATMlayersandtheirfunctions.
5368,"11.Howmanyvirtualconnections canbedefinedinaUNI?Howmanyvirtualconnec­
tionscanbedefinedinanNNI?"
5369,"12.Brieflydescribetheissuesinvolved inusingATMtechnology inLANs.
Exercises
13.TheaddressfieldofaFrameRelayframeis1011000000010111."
5370,"WhatistheDLCI
(indecimal)?"
5371,14.TheaddressfieldofaFrameRelayframeis101100000101001.
5372,Isthisvalid?
5373,15.FindtheDLCIvalueifthefirst3bytesreceivedis7C74Elinhexadecimal.
5374,16.Findthevalueofthe2-byteaddressfieldinhexadecimal iftheDLCIis178.
5375,Assumenocongestion.
5376,"17.""InFigure18.30avirtualconnection isestablished between AandB.Showthe
DLCIforeachlink."
5377,"Figure18.30 Exercise 17544CHAPTER 18VIRTUAL-CIRCUIT NETWORKS: FRAMERELAYANDATM
18.InFigure18.31avirtualconnection isestablished between AandB.Showthe
corresponding entriesinthetablesofeachswitch."
5378,"Figure18.31 Exercise 18
DLCI=233 DLCI=111DLCI=99
19.AnAALllayer receivesdataat2Mbps.Howmanycellsarecreatedpersecondby
theATMlayer?"
5379,"20.Whatisthetotalefficiency ofATMusingAAL1(theratioofreceived bitstosent
bits)?"
5380,"21.Ifanapplication usesAAL3/4 andthereare47,787bytesofdatacomingintothe
CS,howmanypaddingbytesarenecessary?"
5381,"Howmanydataunitsgetpassedfrom
theSARtotheATMlayer?Howmanycellsareproduced?"
5382,"22.Assuming nopadding, doestheefficiency ofATMusingAAL3/4dependonthesize
ofthepacket?Explainyouranswer."
5383,"23.Whatistheminimum numberofcellsresulting fromaninputpacketintheAAL3/4
layer?Whatisthemaximum numberofcellsresulting fromaninputpacket?"
5384,"24.Whatistheminimum numberofcellsresulting fromaninputpacketintheAAL5
layer?Whatisthemaximum numberofcells resulting fromaninputpacket?"
5385,"25.Explainwhypaddingisunnecessary inAAL1,butnecessary inotherAALs.
26.UsingAAL3/4, showthesituation whereweneed ofpadding."
5386,"a.0bytes (no padding)
b.40bytes
c.43bytes
27.UsingAAL5, showthesituation whereweneed ofpadding."
5387,"a.0bytes(nopadding)
b.40bytes
c.47bytes
28.Ina53-bytecell,howmanybytesbelongtotheuserinthefollowing (assumeno
padding)?"
5388,"a.AALI
b.AAL2
c.AAL3/4(notthefirstorlastcell)
d.AAL5(notthefirstorlastcell)SECTION 18.7PRACTICE SET 545
Research Activities
29.Findoutabout1.150protocol thatprovides genericflowcontrolforUNIinterface."
5389,"30.ATMusesthe8-bitHEe(headererrorcontrol)fieldtocontrolerrorsinthefirstfour
bytes(32bits)oftheheader.Thegenerating polynomial isx8+x2+X+1.Findout
howthisisdone."
5390,"31.FindtheformatoftheLANEframesandcompare itwiththeformatoftheEthernet
frame."
5391,"32.Findoutaboutdifferent stepsinvolved intheoperation ofaLANE.Network Layer
Objectives
Thenetworklayerisresponsible forthesource-to-destination deliveryofapacket,possi­
blyacrossmultiplenetworks (links).Whereas thedatalinklayeroversees thedeliveryof
thepacketbetween twosystemsonthesamenetwork(links),thenetworklayerensures
thateachpacketgetsfromitspointoforigintoitsfinaldestination."
5392,"Thenetwork layerisresponsible forthedeliveryofindividual
packetsfromthesourcetothedestination host."
5393,"Thenetworklayeraddsaheaderthatincludes thelogicaladdresses ofthesender
andreceivertothepacketcorningfromtheupperlayer.Ifapackettravelsthroughthe
Internet,weneedthisaddressing systemtohelpdistinguish thesourceanddestination."
5394,"Whenindependent networks orlinksareconnected togethertocreateaninternet­
work,routersorswitches routepacketstotheirfinaldestination."
5395,"Oneofthefunctions
ofthenetworklayeristoprovidearoutingmechanism."
5396,"InPart4ofthebook,wefirstdiscusslogicaladdressing (referred toasIPaddressing
intheInternet)."
5397,"Wethendiscussthemainaswellassomeauxiliary protocols thatare
responsible forcontrolling thedeliveryofapacketfromitssourcetoitsdestination."
5398,"Part4ofthebookisdevotedtothenetwork layerand
theservicesprovided bythislayer."
5399,"Chapters
Thispartconsistsoffourchapters: Chapters 19to22."
5400,"Chapter19
Chapter 19discusses logicalorIPaddressing."
5401,"Wefirstdiscussthehistorical classful
addressing."
5402,"Wethendescribe thenewclassless addressing designed toalleviate some
problems inherentinclassfuladdressing."
5403,"Thecompletely newaddressing system,IPv6,
whichmaybecomeprevalent inthenearfuture,isalsodiscussed.Chapter20
Chapter20isdevotedtothemainprotocolatthenetworklayerthatsupervises andcon­
trolsthedeliveryofpacketsfromthesourcetodestination."
5404,"Thisprotocol iscalledthe
InternetProtocolorIP."
5405,"Chapter21
Chapter21isdevotedtosomeauxiliary protocols definedatthenetworklayer,that
helptheIPprotocol doitsjob.Theseprotocols performaddressmapping (logicalto
physicalorviceversa),errorreporting, andfacilitate multicast delivery."
5406,"Chapter22
Delivery androutingofpacketsintheInternetisavery delicat~andimportant issue."
5407,"WedevoteChapter22tothismatter.Wefirstdiscussthemechanism ofdeliveryand
routing.Wethenbrieflydiscusssomeunicastandmulticast routingprotocols usedin
theInternettoday.CHAPTER 19
Network Layer:
LogicalAddressing
Aswediscussed inChapter 2,communication atthenetwork layerishost-to-host
(computer-to-computer); acomputer somewhere intheworldneedstocommunicate
withanothercomputer somewhere elseintheworld.Usually,computers communicate
throughtheInternet.Thepackettransmitted bythesendingcomputer maypassthrough
severalLANsorWANsbeforereaching thedestination computer."
5408,"Forthislevelofcommunication, weneedaglobaladdressing scheme;wecalled
thislogicaladdressing inChapter2.Today,weusethetermIPaddresstomeanalogical
addressinthenetworklayeroftheTCP/IPprotocolsuite."
5409,"TheInternet addresses are32bitsinlength;thisgivesusamaximum of232
addresses."
5410,"Theseaddresses arereferredtoasIPv4(IPversion4)addresses orsimplyIP
addresses ifthereisnoconfusion."
5411,"Theneedformoreaddresses, inadditiontootherconcerns abouttheIPlayer,moti­
vatedanewdesignoftheIPlayercalledthenewgeneration ofIPorIPv6(lPversion6)."
5412,"Inthisversion,theInternetuses 128-bit addresses thatgivemuch greater flexibility in
addressallocation."
5413,Theseaddresses arereferredtoasIPv6(IPversion6)addresses.
5414,"Inthischapter,wefirstdiscussIPv4addresses, whicharecurrently beingusedinthe
Internet.WethendiscusstheIPv6addresses, whichmaybecomedominant inthefuture."
5415,"19.1IPv4ADDRESSES
AnIPv4addressisa32-bitaddressthatuniquely anduniversally definestheconnection
ofadevice(forexample, acomputer orarouter)totheInternet."
5416,AnIPv4addressis32bitslong.
5417,"IPv4addresses areunique.Theyareuniqueinthesensethateachaddressdefines
one,andonlyone,connection totheInternet."
5418,"TwodevicesontheInternetcannever
havethesameaddressatthesametime.Wewillseelaterthat,byusingsomestrategies,
anaddressmaybeassigned toadeviceforatimeperiodandthentakenawayand
assigned toanotherdevice."
5419,"549550CHAPTER 19NETWORK IAYER:LOGICAL ADDRESSING
Ontheotherhand,ifadeviceoperating atthenetworklayerhasmconnections to
theInternet, itneedstohavemaddresses."
5420,"Wewillseelaterthatarouterissucha
device."
5421,"TheIPv4addresses areuniversal inthesensethattheaddressing systemmustbe
accepted byanyhostthatwantstobeconnected totheInternet."
5422,TheIPv4addresses areuniqueanduniversal.
5423,"Address Space
AprotocolsuchasIPv4thatdefinesaddresses hasanaddress space.Anaddressspace
isthetotalnumberofaddresses usedbytheprotocol.IfaprotocolusesNbitstodefine
anaddress,theaddressspaceis2Nbecauseeachbitcanhavetwodifferentvalues(0or1)
andNbitscanhave2Nvalues."
5424,"IPv4uses32-bitaddresses, whichmeansthattheaddress spaceis232or
4,294,967,296 (morethan4billion).Thismeansthat,theoretically, iftherewereno
restrictions, morethan4billiondevicescouldbeconnected totheInternet.Wewillsee
shortlythattheactualnumberismuchlessbecauseoftherestrictions imposed onthe
addresses."
5425,"TheaddressspaceofIPv4is232or4,294,967,296."
5426,"Notations
Therearetwoprevalent notations toshowanIPv4address:binarynotation anddotted­
decimalnotation."
5427,"BinaryNotation
Inbinarynotation, theIPv4addressisdisplayed as32bits.Eachoctetisoftenreferred
toasabyte.Soitiscommon tohearanIPv4addressreferredtoasa32-bitaddressora
4-byteaddress.Thefollowing isanexampleofanIPv4addressinbinarynotation:
01110101 10010101 00011101 00000010
Dotted-Decimal Notation
TomaketheIPv4addressmorecompact andeasiertoread,Internetaddresses areusu­
allywrittenindecimalformwithadecimalpoint(dot)separating thebytes.Thefol­
lowingisthedotted~decimal notation oftheaboveaddress:
117.149.29.2
Figure19.1showsanIPv4addressinbothbinaryanddotted-decimal notation."
5428,"Notethatbecauseeachbyte(octet)is8bits,eachnumberindotted-decimal notationis
avaluerangingfrom0to255.SECTION 19.1IPv4ADDRESSES 551
Figure19.1Dotted-decimal notationandbinarynotationforanIPv4address
10000000 000010II00000011 00011111-----~/-----­128.11.3.31
Numbering systemsarereviewed inAppendix B."
5429,"Example 19.1
Changethefollowing IPv4addresses frombinarynotationtodotted-decimal notation."
5430,"a.10000001 00001011 00001011 11101111
b.11000001 10000011 00011011 11111111
Solution
Wereplaceeachgroupof8bitswithitsequivalent decimalnumber(seeAppendix B)andadd
dotsforseparation."
5431,"a.129.11.11.239
b.193.131.27.255
Example 19.2
Changethefollowing IPv4addresses fromdotted-decimal notationtobinarynotation."
5432,"a.111.56.45.78
b.221.34.7.82
Solution
Wereplaceeachdecimalnumberwithitsbinaryequivalent (seeAppendix B)."
5433,"a.•01101111 00111000 00101101 01001110
b.11011101 00100010 00000111 01010010
Example 19.3
Findtheerror,ifany,inthefollowing IPv4addresses."
5434,"a.111.56.045.78
b.221.34.7.8.20
c.75.45.301.14
d.11100010.23.14.67
Solution
a.Theremustbenoleadingzero(045)."
5435,b.TherecanbenomorethanfournumbersinanIPv4address.
5436,c.Eachnumberneedstobelessthanorequalto255(301isoutsidethisrange).
5437,"d.Amixtureofbinarynotationanddotted-decimal notationisnotallowed.552CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
ClassfulAddressing
IPv4addressing, atitsinception, usedtheconceptofclasses.Thisarchitecture iscalled
classfuladdressing."
5438,"Although thisschemeisbecoming obsolete, webrieflydiscussit
heretoshowtherationale behindclasslessaddressing."
5439,"Inclassfuladdressing, theaddressspaceisdividedintofiveclasses:A,B,C,D,
andE.Eachclassoccupies somepartoftheaddressspace."
5440,"Inclassfuladdressing, theaddressspaceisdividedintofiveclasses:
A,B,C,D,andE."
5441,"Wecanfindtheclassofanaddresswhengiventheaddressinbinarynotation
ordotted-decimal notation.Iftheaddressisgiveninbinarynotation, thefirstfew
bitscanimmediately tellustheclassoftheaddress.Iftheaddressisgivenin
decimal-dotted notation, thefirstbytedefinestheclass.Bothmethods areshownin
Figure19.2.
Figure19.2Finding the classesinbinaryanddotted-decimal notation
First Second Third Fourth First Second Third Fourth
byte byte byte byte byte byte byte byte
ClassA0IIIIIIClassAI0-127IIIIII
ClassB10IIIIIIClassB1128-19111 IIII
ClassC110IIIIIIClassC1192-22311 IIII
ClassD1110IIIIIIClassD1224--23911IIII
ClassE1111IIIIIIClassE1240-25511 IIII
a.Binarynotation b.Dotted-decimal notation
Example 19.4
Findtheclassofeachaddress."
5442,"a.00000001 00001011 00001011 11101111
b.11000001 10000011 00011011 11111111
c.14.23.120.8
d.252.5.15.111
Solution
a.ThefirstbitisO.ThisisaclassAaddress."
5443,b.Thefirst2bitsare1;thethirdbitisO.ThisisaclassCaddress.
5444,c.Thefirstbyteis14(between 0and127);theclassisA.
5445,"d.Thefirstbyteis252(between 240and255);theclassisE.SECTION 19.1IPv4ADDRESSES 553
ClassesandBlocks
Oneproblemwithclassfuladdressing isthateachclassisdividedintoafixednumber
ofblockswitheachblockhavingafixedsizeasshowninTable19.1.
Table19.1NumberofblocksandblocksizeinclassfulIPv4 addressing
Class NumberofBlocks BlockSize Application
A 128 16,777,216 Unicast
B 16,384 65,536 Unicast
C 2,097,152 256 Unicast
D 1 268,435,456 Multicast
E 1 268,435.456 Reserved
Letusexamine thetable.Previously, whenanorganization requested ablockof
addresses, itwasgrantedoneinclassA,B,orC.ClassAaddresses weredesigned for
largeorganizations withalargenumberofattachedhostsorrouters.ClassBaddresses
weredesigned formidsizeorganizations withtensofthousands ofattached hostsor
routers.ClassCaddresses weredesigned forsmallorganizations withasmallnumberof
attachedhostsorrouters."
5446,"Wecanseetheflawinthisdesign.AblockinclassAaddressistoolargefor
almostanyorganization."
5447,"Thismeansmostoftheaddresses inclassAwerewastedand
werenotused.AblockinclassBisalsoverylarge,probably toolargeformanyofthe
organizations thatreceived aclassBblock.AblockinclassCisprobably toosmallfor
manyorganizations."
5448,"ClassDaddresses weredesigned formulticasting aswewillseein
alaterchapter.Eachaddressinthisclassisusedtodefineonegroupofhostsonthe
Internet.TheInternetauthorities wrongly predicted aneedfor268,435,456 groups."
5449,"Thisneverhappened andmanyaddresses werewastedheretoo.Andlastly,theclassE
addresses werereservedforfutureuse;onlyafewwereused,resulting inanotherwaste
ofaddresses."
5450,"«
Inc1assfnladdressing, alargepartoftheavailable addresses werewasted."
5451,"NetidandHostid
Inclassfuladdressing, anIPaddressinclassA,B,orCisdividedintonetidandhostid."
5452,"Thesepartsareofvaryinglengths,depending ontheclassoftheaddress.Figure19.2
showssomenetidandhostidbytes.Thenetidisincolor,thehostidisinwhite.Notethat
theconceptdoesnotapplytoclassesDandE."
5453,"InclassA,onebytedefinesthenetidandthreebytesdefinethehostid.InclassB,
twobytesdefinethenetidandtwobytesdefinethehostid.InclassC,threebytesdefine
thenetidandonebytedefinesthehostid."
5454,"Mask
Although thelengthofthenetidandhostid(inbits)ispredetermined inclassfuladdress­
ing,wecanalsouseamask(alsocalledthedefaultmask),a32-bitnumbermadeof554CHAPTER 19NETWORK lAYER:LOG1CALADDRESSING
contiguous Isfollowed bycontiguous as.ThemasksforclassesA,B,andCareshown
inTable19.2.TheconceptdoesnotapplytoclassesD andE."
5455,"Table19.2Defaultmasksforclassfuladdressing
Class Binary Dotted-Decimal CIDR
A11111111 00000000 00000000 00000000 255.0.0.0 18
B11111111 11111111 00000000 00000000 255.255.0.0 116
C11111111 11111111 11111111 00000000 255.255.255.0 124
Themaskcanhelpustofindthenetidandthehostid.Forexample, themaskfora
classAaddresshaseight1s,whichmeansthefirst8bitsofanyaddressinclassA
definethenetid;thenext24bitsdefinethehostid."
5456,"Thelast column ofTable19.2showsthemaskintheformInwherencanbe8,16,
or24inclassfuladdressing."
5457,"Thisnotation isalsocalledslashnotation orClassless
Interdomain Routing (CIDR)notation."
5458,"Thenotationisusedinclassless addressing,
whichwewilldiscusslater.Weintroduce itherebecauseitcanalsobeappliedtoclass­
fuladdressing."
5459,"Wewillshowlaterthatclassfuladdressing isaspecialcaseofclassless
addressing."
5460,"Subnetting
Duringtheeraofclassfuladdressing, subnettingwasintroduced.Ifanorganization was
grantedalargeblockinclassAorB,itcoulddividetheaddresses intoseveralcontiguous
groupsandassigneachgrouptosmallernetworks (calledsubnets) or,inrarecases,
sharepartoftheaddresses withneighbors."
5461,"Subnetting increases thenumberofIsinthe
mask,aswewillseelaterwhenwediscussclassless addressing."
5462,"Supernetting
ThetimecamewhenmostoftheclassA andclassBaddresses weredepleted; however,
therewasstillahugedemandformidsizeblocks.ThesizeofaclassCblockwitha
maximum numberof256addresses didnotsatisfytheneedsofmostorganizations."
5463,Evenamidsizeorganization neededmoreaddresses.
5464,Onesolutionwassupernetting.
5465,"Insupernetting, anorganization cancombine severalclassCblockstocreatealarger
rangeofaddresses."
5466,"Inotherwords,severalnetworks arecombined tocreateasuper­
networkorasupemet."
5467,"Anorganization canapplyforasetofclassCblocksinsteadof
justone.Forexample, anorganization thatneeds1000addresses canbegrantedfour
contiguous classCblocks.Theorganization canthenusetheseaddresses tocreateone
supernetwork."
5468,"Supernetting decreases thenumberofIsinthemask.Forexample, ifan
organization isgivenfourclassCaddresses, themaskchangesfrom/24to/22.Wewill
seethatclassless addressing eliminated theneedforsupernetting."
5469,"AddressDepletion
Theflawsinclassfuladdressing schemecombined withthefastgrowthoftheInternetled
totheneardepletion oftheavailable addresses."
5470,"YetthenumberofdevicesontheInternet
ismuchlessthanthe232addressspace.WehaverunoutofclassA and Baddresses, andSECTION 19.1IPv4ADDRESSES 555
aclassCblockistoosmallformostmidsize organizations."
5471,"Onesolution thathas
alleviated theproblem istheideaofclassless addressing."
5472,"Classful addressing, whichisalmostobsolete, isreplaced withclassless addressing."
5473,"Classless Addressing
Toovercome addressdepletion andgivemoreorganizations accesstotheInternet,
classless addressing wasdesigned andimplemented."
5474,"Inthisscheme, thereareno
classes,buttheaddresses arestillgrantedinblocks."
5475,"AddressBlocks
Inclassless addressing, whenanentity,smallorlarge,needstobeconnected tothe
Internet,itisgrantedablock(range)ofaddresses."
5476,"Thesizeoftheblock(thenumberof
addresses) variesbasedonthenatureandsizeoftheentity.Forexample, ahousehold
maybegivenonlytwoaddresses; alargeorganization maybegiventhousands of
addresses."
5477,"AnISP,astheInternetserviceprovider, maybegiventhousands orhundreds
ofthousands basedonthenumberofcustomers itmayserve."
5478,"Restriction Tosimplify thehandling ofaddresses, theInternet authorities impose
threerestrictions onclassless addressblocks:
1.Theaddresses inablockmustbecontiguous, oneafteranother."
5479,"2.Thenumberofaddresses inablockmustbeapowerof2(I,2,4,8,...)."
5480,3.Thefirstaddressmustbeevenlydivisible bythenumberofaddresses.
5481,"Example 19.5
Figure19.3showsablockofaddresses, inbothbinaryanddotted-decimal notation, grantedtoa
smallbusinessthatneeds16addresses."
5482,"Figure19.3Ablockof16addresses grantedtoasmallorganization
Block Block-
First 205.16.37.32 11001101 00010000 00100101 00100000'""<J.l
'"" 205.16.37.33 11001101 00010000 00100101 00100001 '""!:l""0""0
-<
Last 205.16.37.47 11001101 00010000 00100101 00101111;::;
1-
a.Decimal b.Binary
Wecanseethattherestrictions areappliedtothisblock.Theaddresses arecontiguous."
5483,"Thenumberofaddresses isapowerof2(16=24),andthefirstaddressisdivisible by16.The
firstaddress,whenconverted toadecimalnumber,is3,440,387,360, whichwhendividedby
16resultsin215,024,210."
5484,"InAppendix B,weshowhowtofindthedecimal valueofan
IPaddress.556CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Mask
Abetterwaytodefineablockofaddresses istoselectanyaddressintheblockandthe
mask.Aswediscussed before,amaskisa32-bitnumberinwhichthenleftmostbits
areIsandthe32-nrightmost bitsareOs.However, inclassless addressing themask
forablockcantakeanyvaluefrom0to32.Itisveryconvenient togivejustthevalue
ofnpreceded byaslash(CIDRnotation)."
5485,"In1Pv4addressing, ablockofaddresses canbedefinedas
x.y.z.tln
inwhichx.y.z.tdefinesoneoftheaddresses andtheIndefinesthemask."
5486,"TheaddressandtheInnotation completely definethewholeblock(thefirst
address,thelastaddress,andthenumberofaddresses)."
5487,"FirstAddress Thefirstaddressintheblockcanbefoundbysettingthe32-nright­
mostbitsinthebinarynotationoftheaddresstoOs.
Thefirstaddressintheblockcanbefoundbysettingtherightmost 32-nbitstoOs.
Example 19.6
Ablockofaddresses isgrantedtoasmallorganization."
5488,"Weknowthatoneoftheaddresses is
205.16.37.39/28."
5489,Whatisthefirstaddressintheblock?
5490,"Solution
Thebinaryrepresentation ofthegivenaddressis11001101 00010000 00100101 00100I11.Ifwe
set32-28rightmost bitsto0,weget11001101 000100000100101 0010000 or205.16.37.32."
5491,"ThisisactuallytheblockshowninFigure19.3.
LastAddress Thelastaddressintheblockcanbefoundbysettingthe32-nright­
mostbitsinthebinarynotationoftheaddresstoIs.
Thelastaddressintheblockcanbefoundbysettingtherightmost 32-nbitstoIs.
Example 19.7
FindthelastaddressfortheblockinExample 19.6.
Solution
Thebinaryrepresentation ofthegivenaddressis11001101 000100000010010100100111."
5492,"Ifwe
set32-28rightmost bitsto1,weget11001101 00010000 001001010010 1111or205.16.37.47."
5493,"ThisisactuallytheblockshowninFigure19.3.
Number ofAddresses Thenumberofaddresses intheblockisthedifference between
thelastandfirstaddress.Itcaneasilybefoundusingtheformula232-n."
5494,"Thenumberofaddresses intheblockcanbefoundbyusingtheformula232-n•SECTION 19.1IPv4ADDRESSES 557
Example 19.8
Findthenumberofaddresses inExample 19.6.
Solution
Thevalueofnis28,whichmeansthatnumberofaddresses is232-28or16."
5495,"Example 19.9
Anotherwaytofindthefirstaddress,thelastaddress,andthenumberofaddresses istorepresent
themaskasa32-bitbinary(or8-digithexadecimal) number.Thisisparticularly usefulwhenwe
arewritingaprogram tofindthesepiecesofinformation."
5496,"InExample 19.5the/28canberepre­
sentedas11111111 11111111 11111111 11110000 (twenty-eight IsandfourOs).Find
a.Thefirstaddress
h.Thelastaddress
c.Thenumberofaddresses
Solution
a.ThefirstaddresscanbefoundbyANDing thegivenaddresses withthemask.ANDing hereis
donebitbybit.TheresultofANDing 2bitsis1ifbothbitsareIs;theresultis0otherwise."
5497,"Address:
Mask:
Firstaddress:11001101 00010000 00100101 00100111
11111111 11111111 11111111 11110000
11001101 00010000 00100101 00100000
b.ThelastaddresscanbefoundbyORingthegivenaddresses withthecomplement ofthe
mask.ORinghereisdonebitbybit.TheresultofORing2bitsis0ifbothbitsareOs;the
resultis1otherwise."
5498,"Thecomplement ofanumberisfoundbychanging each1to0and
each0to1."
5499,"Address:
Maskcomplement:
Lastaddress:11001101 00010000 00100101 00100111
00000000 00000000 00000000 00001111
11001101 00010000 00100101 00101111
c.Thenumberofaddresses canbefoundbycomplementing themask,interpreting itasa
decimalnumber,andadding1toit."
5500,"Maskcomplement:
Numberofaddresses:000000000 00000000 00000000 00001111
15+1=16
NetworkAddresses
Averyimportant conceptinIPaddressing isthenetworkaddress."
5501,"Whenanorganiza­
tionisgivenablockofaddresses, theorganization isfreetoallocatetheaddresses to
thedevicesthatneedtobeconnected totheInternet.Thefirstaddressintheclass,how­
ever,isnormally (notalways)treatedasaspecialaddress.Thefirstaddressiscalledthe
networkaddressanddefinestheorganization network."
5502,"Itdefinestheorganization itself
totherestoftheworld.Inalaterchapterwewillseethatthefirstaddressistheonethat
isusedbyrouterstodirectthemessage senttotheorganization fromtheoutside.558CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Figure19.4showsanorganization thatisgranteda16-address block."
5503,"Figure19.4Anetworkconfiguration fortheblock205.16.37.32/28
Restof
theInternet
Allmessages withreceiveraddresses
205.16.37.32 to205.16.37.47
areroutedtox.y.z.t/n
-----------------------------1
1
1
I
1
1
1
1
205.16.37.46/28 205.16.37.47/28 1
~ ~:
11
1
11
1
:o~i~~~~~--------------------------
:network
I
I
II
1205.16.37.33/28 205.16.37.34/28 205.16.37.39/28: ~."
5504,"~
II
I
I
:Network address: 205.16.37.32/28L ~ ~ ~
Theorganization networkisconnected totheInternetviaarouter.Therouterhas
twoaddresses."
5505,"Onebelongstothegrantedblock;theotherbelongstothenetworkthat
isattheothersideoftherouter.Wecallthesecondaddressx.y.z.t/nbecausewedonot
knowanything aboutthenetworkitisconnected toattheotherside.Allmessages des­
tinedforaddresses intheorganization block(205.16.37.32 to205.16.37.47) aresent,
directlyorindirectly, tox.y.z.t/n.Wesaydirectlyorindirectly becausewedonotknow
thestructure ofthenetworktowhichtheothersideoftherouterisconnected."
5506,"Thefirstaddressinablockisnormally notassigned toanydevice;itisusedasthe
networkaddressthatrepresents theorganization totherestoftheworld."
5507,"Hierarchy
IPaddresses, likeotheraddresses oridentifiers weencounter thesedays,havelevelsof
hierarchy."
5508,"Forexample, atelephone networkinNorthAmerica hasthreelevelsofhier­
archy.Theleftmost threedigitsdefinetheareacode,thenextthreedigitsdefinethe
exchange, thelastfourdigitsdefinetheconnection ofthelocallooptothecentral
office.Figure19.5showsthestructure ofahierarchical telephone number."
5509,"Figure19.5Hierarchy inatelephone networkinNorthAmerica
(I408I)I8641-1 8902
1 I
:Areacode:
I
IExchange office
It )'1
I
I SubscriberItSECTION 19.1IPv4ADDRESSES 559
Two-Level Hierarchy: NoSubnetting
AnIPaddresscandefineonlytwolevelsofhierarchy whennotsubnetted."
5510,"Thenleft­
mostbitsoftheaddressx.y.z.tJndefinethenetwork (organization network); the32-n
rightmost bitsdefinetheparticular host(computer orrouter)tothenetwork."
5511,"Thetwo
common termsareprefixandsuffix.Thepartoftheaddressthatdefinesthenetwork is
calledtheprefix;thepartthatdefinesthehostiscalledthesuffix.Figure19.6shows
thehierarchical structure ofanIPv4address."
5512,"Figure19.6Twolevelsofhierarchy inanIPv4address
28bits 4bits
I I I
I Network prefix I I
Il )II I
I I
I Hostaddress I, )1
Theprefixiscommon toalladdresses inthenetwork; thesuffixchangesfromone
devicetoanother."
5513,"Eachaddressintheblockcanbeconsidered asatwo-level hierarchical structure:
theleftmostnbits(prefix)definethenetwork;
therightmost 32-nbitsdefinethehost."
5514,"Three-Levels ofHierarchy: Subnetting
Anorganization thatisgrantedalargeblockofaddresses maywanttocreateclustersof
networks (calledsubnets) anddividetheaddresses between thedifferent subnets.The
restoftheworldstillseestheorganization asoneentity;however, internally thereare
severalsubnets.Allmessages aresenttotherouteraddressthatconnects theorganization
totherestoftheInternet; therouterroutesthemessage totheappropriate subnets.The
organization, however, needstocreatesmallsubblocks ofaddresses, eachassigned to
specificsubnets.Theorganization hasitsownmask;eachsubnetmustalsohaveitsown."
5515,"Asanexample, suppose anorganization isgiventheblock17.12.40.0/26, which
contains 64addresses."
5516,"Theorganization hasthreeofficesandneedstodividethe
addresses intothreesubblocks of32,16,and16addresses."
5517,"Wecanfindthenewmasks
byusingthefollowing arguments:
1.Suppose themaskforthefirstsubnetisn1,then232-n1mustbe32,whichmeans
thatn1=27."
5518,"2.Suppose themaskforthesecondsubnetisn2,then232-n2mustbe16,which
meansthatn2=28."
5519,"3.Suppose themaskforthethirdsubnetisn3,then232-n3mustbe16,whichmeans
thatn3=28."
5520,"Thismeansthatwehavethemasks27,28,28withtheorganization maskbeing26."
5521,"Figure19.7showsoneconfiguration fortheabovescenario.560 CHAPTER 19NETWORK LAYER: LOGICAL ADDRESSING
Figure19.7Configuration andaddresses inasubnetted network
,------------------------------------------------------------1
Subnet1 Subnet3 :
_'..,17.12.14.63/28 :
I
1
1
1_..,17.12.14.62/28 1
I
~...."
5522,"17.12.14.50/28~..,17.12.14.49/28
Subnet2
00
<'1N
~-i
r-i...."
5523,"~-
17.12.14.34/28 _~17.12.14.33128 17.12.14.2127r--
~:!
E::::J:--11 <'i-~...."
5524,"··•
Network: 17.12.14.11/26x.y.z.tln
Totherestof
theInternet
Letuschecktoseeifwecanfindthesubnetaddresses fromoneoftheaddresses in
thesubnet."
5525,"a.Insubnet1,theaddress17.12.14.29/27 cangiveusthesubnetaddressifweusethe
mask/27because
Host:
Mask:
Subnet:00010001 00001100 00001110 00011101
/27
00010001 00001100 00001110 00000000 ....(17.12.14.0)
b.Insubnet2,theaddress17.12.14.45/28 cangiveusthesubnetaddressifweusethe
mask/28because
Host: 00010001 00001100 00001110 00101101
Mask: /28
Subnet: 00010001 00001100 00001110 00100000 ....(17.12.14.32)
c.Insubnet3,theaddress17.12.14.50/28 cangiveusthesubnetaddressifweusethe
mask/28because
Host: 00010001 00001100 00001110 00110010
Mask: /28
Subnet: 00010001 00001100 00001110 00110000....(17.12.14.48)SECTION 19.1IPv4ADDRESSES 561
Notethatapplying themaskofthenetwork, 126,toanyoftheaddresses givesusthe
networkaddress17.12.14.0/26."
5526,Weleavethisprooftothereader.
5527,"Wecansaythatthroughsubnetting, wehavethreelevelsofhierarchy."
5528,"Notethatin
ourexample, thesubnetprefixlengthcandifferforthesubnetsasshowninFigure19.8.
Figure19.8Three-level hierarchy inanIPv4address
IIHostaddressSubnets2and3
26bitsCD4bitsI--------------J1I I
Network prefix I I Ir-------""---------+l'1 I I
I ISubnetprefix I It+----------'----------+111 I
I
ISubnet1
26bits05bits
I I I I
I Network prefix II I
101 -II r·
I I I
I Subnetprefix I I
I'""Jrl t~
I I
I Hostaddress I
I' I
MoreLevelsofHierarchy
Thestructure ofclassless addressing doesnotrestrictthenumberofhierarchical levels."
5529,Anorganization candividethegrantedblockofaddresses intosubblocks.
5530,"Eachsub­
blockcaninturnbedividedintosmallersubblocks."
5531,"Andsoon.Oneexampleofthisis
seenintheISPs.Anational ISPcandivideagrantedlargeblockintosmallerblocks
andassigneachofthemtoaregionalISP.AregionalISPcandividetheblockreceived
fromthenationalISPintosmallerblocksandassigneachonetoalocalISP.AlocalISP
candividetheblockreceived fromtheregionalISPintosmallerblocksandassigneach
onetoadifferent organization."
5532,"Finally,anorganization candividethereceived block
andmakeseveralsubnetsoutofit."
5533,"AddressAllocation
Thenextissueinclassless addressing isaddressallocation."
5534,Howaretheblocksallocated?
5535,"Theultimateresponsibility ofaddressallocation isgiventoaglobalauthority calledthe
InternetCorporation forAssigned NamesandAddresses (ICANN)."
5536,"However, ICANN
doesnotnormally allocateaddresses toindividual organizations."
5537,"Itassignsalargeblock
ofaddresses toanISP.EachISP,inturn,dividesitsassigned blockintosmallersubblocks
andgrantsthesubblocks toitscustomers."
5538,"Inotherwords,anISPreceivesonelargeblock
tobedistributed toitsInternetusers.Thisiscalledaddressaggregation: manyblocksof
addresses areaggregated inoneblockandgrantedtooneISP."
5539,"Example 19.10
AnISPisgrantedablockofaddresses startingwith190.100.0.0/16 (65,536addresses)."
5540,"TheISP
needstodistribute theseaddresses tothreegroupsofcustomers asfollows:
a.Thefirstgrouphas64customers; eachneeds256addresses."
5541,b.Thesecondgrouphas128customers; eachneeds128addresses.
5542,c.Thethirdgrouphas128customers; eachneeds64addresses.
5543,"Designthesubblocks andfindouthowmanyaddresses arestillavailable aftertheseallocations.562CHAPTER 19NETWORK LAYER:LOGICALADDRESS1NG
Solution
Figure19.9showsthesituation."
5544,Figure19.9Anexampleofaddressallocation anddistribution byanIS?
5545,"ISP
Group1: Customer 001;190.100.0.0/24
r-19_0_.1_00_.0_.0_t_o_19_0_.l_0_0._63_.2_5_5--r_ Customer 064:190.100.63.0/24
Toandfrom
the InternetGroup2:
190.100.64.0 to190.100.127.255
Group3:
190.100.128.0 to190.100.159.255
Available
190.100.160.0 to190.100.255.255Customer 001:190.100.64.0/25
Customer 128:190.100.127.128/25
Customer 001:190.100.128.0/26
Customer 128:190.100.159.192/26
1.Group1
Forthisgroup,eachcustomer needs256addresses."
5546,"Thismeansthat8(log2256) bitsare
neededtodefineeachhost.Theprefixlengthisthen32- 8=24.Theaddresses are
1stCustomer:
2ndCustomer:190.100.0.0/24
190.100.1.0/24190.100.0.255/24
190.100.1.255/24
64thCustomer: 190.100.63.0/24 190.100.63.255/24
Total=64X256=16,384
2.Group2
Forthisgroup,eachcustomer needs128addresses."
5547,"Thismeansthat7(10g2128)bitsare
neededtodefineeachhost.Theprefixlengthisthen32-7=25.Theaddresses are
1stCustomer: 190.100.64.0/25
2ndCustomer: 190.100.64.128/25190.100.64.127/25
190.100.64.255/25
128thCustomer: 190.100.127.128/25 190.100.127.255/25
Total=128X128=16,384
3.Group3
Forthisgroup,eachcustomer needs64addresses."
5548,"Thismeansthat6(logz64)bitsareneeded
toeachhost.Theprefixlengthisthen32- 6=26.Theaddresses areSECTION 19.1IPv4ADDRESSES 563
1stCustomer:
2ndCustomer:190.100.128.0/26
190.100.128.64/26190.100.128.63/26
190.100.128.127/26
128thCustomer: 190.100.159.192/26 190.100.159.255/26
Total=128X64=8192
Numberofgrantedaddresses totheISP:65,536
Numberofallocated addresses bytheISP:40,960
Numberofavailable addresses: 24,576
Network Address Translation (NAT)
Thenumberofhomeusersandsmallbusinesses thatwanttousetheInternetisever
increasing."
5549,"Inthebeginning, auserwasconnected totheInternetwithadial-upline,
whichmeansthatshewasconnected foraspecificperiodoftime.AnISPwithablockof
addresses coulddynamically assignanaddresstothisuser.Anaddresswasgiventoa
userwhenitwasneeded.Butthesituation isdifferent today.Homeusersandsmallbusi­
nessescanbeconnected byanADSLlineorcablemodem."
5550,"Inaddition, manyarenot
happywithoneaddress;manyhavecreatedsmallnetworks withseveralhostsandneed
anIPaddressforeachhost.Withtheshortageofaddresses, thisisaseriousproblem."
5551,Aquicksolutiontothisproblem iscallednetwork addresstranslation (NAT).
5552,"NATenablesausertohavealargesetofaddresses internally andoneaddress,orasmall
setofaddresses, externally."
5553,"Thetrafficinsidecanusethelargeset;thetrafficoutside,the
smallset."
5554,"Toseparatetheaddresses usedinsidethehomeorbusiness andtheonesusedfor
theInternet, theInternetauthorities havereserved threesetsofaddresses asprivate
addresses, showninTable19.3.
Table19.3Addresses forprivatenetworks
Range Total
10.0.0.0 to10.255.255.255 224
172.16.0.0 to172.31.255.255 220
192.168.0.0 to192.168.255.255 216
Anyorganization canuseanaddressoutofthissetwithoutpermission fromthe
Internetauthorities."
5555,"Everyone knowsthatthesereserved addresses areforprivatenet­
works.Theyareuniqueinsidetheorganization, buttheyarenotuniqueglobally."
5556,"No
routerwillforwardapacketthathasoneoftheseaddresses asthedestination address."
5557,"Thesitemusthaveonlyonesingleconnection totheglobalInternetthrougharouter
thatrunstheNATsoftware."
5558,Figure19.10showsasimpleimplementation ofNAT.
5559,"AsFigure19.10shows,theprivatenetworkusesprivateaddresses."
5560,"Therouterthat
connects thenetwork totheglobaladdressusesoneprivateaddressandoneglobal
address."
5561,"Theprivatenetwork istransparent totherestoftheInternet; therestofthe
InternetseesonlytheNATrouterwiththeaddress200.24.5.8.564CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Figure19.10ANATimplementation
172.18.3.20
...172.18.3.1 172.18.3.2Siteusingprivateaddresses-----------------------------------,
I
I
I
I
II
I
INATrouter
172.18.3.30 200.24.5.8Internet
I,___________________________________ J
Address Translation
Alltheoutgoing packetsgothroughtheNATrouter,whichreplacesthesourceaddress
inthepacketwiththeglobalNATaddress.Allincoming packetsalsopassthroughthe
NATrouter,whichreplacesthedestination addressinthepacket(theNATrouterglobal
address)withtheappropriate privateaddress.Figure19.11showsanexampleofaddress
translation."
5562,"Figure19.11Addresses inaNAT
InternetSource:200.24.5.8
""-----------'-b."
5563,"Destination: 200.24.5.8Source:172.18.3.1
..---------r---b."
5564,"Destination: 172.18.3.1172.18.3.1~--------------------------1
I
I
II
I
I
I
Translation Table
Thereadermayhavenoticedthattranslating thesourceaddresses foroutgoing packets
isstraightforward."
5565,"ButhowdoestheNATrouterknowthedestination address for a
packetcomingfromtheInternet?"
5566,"Theremaybetensorhundreds ofprivateIPaddresses,
eachbelonging toonespecifichost.TheproblemissolvediftheNATrouterhasatrans­
lationtable."
5567,"UsingOneIPAddress Initssimplestfonn,atranslation tablehasonlytwocolumns:
theprivate'addressandtheexternaladdress(destination addressofthepacket).When
theroutertranslates thesourceaddressoftheoutgoing packet,italsomakesnoteofthe
destination address-where thepacketisgoing.Whentheresponse comesbackfrom
thedestination, therouterusesthesourceaddressofthepacket(astheexternaladdress)
tofindtheprivateaddressofthepacket.Figure19.12showstheidea.Notethatthe
addresses thatarechanged(translated) areshownincolor.SECTION 19.1IPv4ADDRESSES 565
Figure19.12NATaddresstranslation
--------------------------~
Destination: 25.8.2.10 I
I
Source:172.HU.I I
I
I
I
I
IIDestination: 25.8.2.10
Source:200.24.5.g
Translation table
Private External
172.18.3.1
...25.8.2.10 ..oEt----'
•."
5568,"I
: Destination: 200.24.5.1l
ISource:25.8.2.10
I
I
I
I
I
I
------=:~=::::::::::::::=====----~.~r___---.:::.---=========-Destination: 171.18.3.1
Source:25.8.2.10
Inthisstrategy, communication mustalwaysbeinitiated bytheprivatenetwork."
5569,"TheNATmechanism described requiresthattheprivatenetwork startthecommunica­
tion.Aswewillsee,NATisusedmostlybyISPswhichassignonesingleaddresstoa
customer."
5570,"Thecustomer, however, maybeamemberofaprivatenetworkthathasmany
privateaddresses."
5571,"Inthiscase,communication withtheInternetisalwaysinitiatedfrom
thecustomer site,usingaclientprogram suchasHTTP,TELNET, orFTPtoaccessthe
corresponding serverprogram."
5572,"Forexample, whene-mailthatoriginates fromanon­
customer siteisreceived bytheISPe-mailserver,thee-mailisstoredinthemailboxof
the.customer untilretrieved."
5573,"Aprivatenetwork cannotrunaserverprogram forclients
outsideofitsnetworkifitisusingNATtechnology."
5574,"UsingaPoolofIPAddresses SincetheNATrouterhasonlyoneglobaladdress,only
oneprivatenetworkhostcanaccessthesameexternalhost.Toremovethisrestriction, the
NATrouterusesapoolofglobaladdresses."
5575,"Forexample, insteadofusingonlyoneglobal
address(200.24.5.8), theNATroutercanusefouraddresses (200.24.5.8, 200.24.5.9,
200.24.5.10, and200.24.5.11)."
5576,"Inthiscase,fourprivatenetworkhostscancommunicate
withthesameexternalhostatthesametimebecauseeachpairofaddresses definesa
connection."
5577,"However, therearestillsomedrawbacks."
5578,"Inthisexample, nomorethanfour
connections canbemadetothesamedestination."
5579,"Also,noprivate-network hostcan
accesstwoexternalserverprograms (e.g.,HTTPandFfP)atthesametime."
5580,"UsingBothIPAddresses andPortNumbers Toallowamany-to-many relationship
between private-network hostsandexternalserverprograms, weneedmoreinformation
inthetranslation table.Forexample, supposetwohostswithaddresses 172.18.3.1 and
172.18.3.2 insideaprivatenetwork needtoaccesstheHTTPserveronexternal host566CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
25.8.3.2.Ifthetranslation tablehasfivecolumns, insteadoftwo,thatincludethesource
anddestination portnumbersofthetransport layerprotocol, theambiguity iseliminated."
5581,Wediscussportnumbers inChapter23.Table19.4showsanexampleofsuchatable.
5582,"Table19.4Five-column translation table
Private Private External External Transport
Address Port Address Port Protocol
172.18.3.1 1400 25.8.3.2 80 TCP
172.18.3.2 1401 25.8.3.2 80 TCP
......"
5583,.........
5584,"Notethatwhentheresponse fromHTTPcomesback,thecombination ofsource
address(25.8.3.2) anddestination portnumber(1400)definesthe-private networkhost
towhichtheresponse shouldbedirected."
5585,"Notealsothatforthistranslation towork,the
temporary portnumbers (1400and1401)mustbeunique."
5586,"NATandISP
AnISPthatservesdial-upcustomers canuseNATtechnology toconserve addresses."
5587,"Forexample, supposeanISPisgranted1000addresses, buthas100,000customers."
5588,"Eachofthecustomers isassigned aprivatenetworkaddress.TheISPtranslates eachof
the100,000sourceaddresses inoutgoing packetstooneofthe1000globaladdresses;
ittranslates theglobaldestination addressinincoming packetstothecorresponding
privateaddress.Figure19.13showsthisconcept."
5589,"Figure19.13AnISPandNAT
172.18.3.1
···
172.24.1.1
ISP
site
·••
172.30,100
19.2IPv6ADDRESSES1000
addresses
Despiteallshort-term solutions, suchasclassless addressing, Dynamic HostConfigu­
rationProtocol (DHCP), discussed inChapter21,andNAT,addressdepletion isstilla
long-term problem fortheInternet."
5590,"Thisandotherproblems intheIPprotocol itself,SECTION 19.2IPv6ADDRESSES 567
suchaslackofaccommodation forreal-time audioandvideotransmission, andencryp­
tionandauthentication ofdataforsomeapplications, havebeenthemotivation forIPv6."
5591,"Inthissection,wecompare theaddressstructure ofIPv6toIPv4.InChapter20,we
discussbothprotocols."
5592,"Structure
AnIPv6addressconsistsof16bytes(octets);itis128bitslong."
5593,AnIPv6addressis128bitslong.
5594,"Hexadecimal ColonNotation
Tomakeaddresses morereadable, IPv6specifieshexadecimal colonnotation."
5595,"Inthisnota­
tion,128bitsisdividedintoeightsections,each2bytesinlength.Twobytesinhexadecimal
notationrequiresfourhexadecimal digits.Therefore, theaddressconsistsof32hexadecimal
digits,witheveryfourdigitsseparated byacolon,asshowninFigure19.14."
5596,"Figure19.14IPv6addressinbinaryandhexadecimal colonnotation
I·
1111110111101100128bits=16bytes=32hexdigits
1111111111111111
IFDECI:I0074I:I0000I:t0000I:I0000I:IBOFFI:I0000I:IFFFFI
Abbreviation
Although theIPaddress,eveninhexadecimal format,isverylong,manyofthedigitsare
zer9s.Inthiscase,wecanabbreviate theaddress.Theleadingzerosofasection(four
digitsbetween twocolons)canbeomitted."
5597,"Onlytheleadingzeroscanbedropped, not
thetrailingzeros(seeFigure19.15)."
5598,"Figure19.15Abbreviated IPv6addresses
Original
FDEC: 0074:0000:0000:0000:BOFF:0000:FFFO
Abbreviated FDEC: 74:0:0:0:BOFF:0:FFFO568CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Usingthisformofabbreviation, 0074canbewrittenas74,OOOFasF,and0000asO."
5599,Notethat3210cannotbeabbreviated.
5600,"Furtherabbreviations arepossible ifthereare
consecutive sectionsconsisting ofzerosonly.Wecanremovethezerosaltogether and
replacethemwithadoublesemicolon."
5601,"Notethatthistypeofabbreviation isallowed
onlyonceperaddress.Iftherearetworunsofzerosections, onlyoneofthemcanbe
abbreviated."
5602,"Reexpansion oftheabbreviated addressisverysimple:Aligntheunabbre­
viatedportionsandinsertzerostogettheoriginalexpanded address."
5603,"Example 19.11
Expandtheaddress0:15::1:12:1213 toitsoriginal."
5604,"Solution
Wefirstneedtoaligntheleftsideofthedoublecolontotheleftoftheoriginalpatternandthe
rightsideofthedoublecolontotherightoftheoriginalpatterntofindnowmanyOsweneedto
replacethedoublecolon."
5605,"xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx
0:15: l:12:1213
Thismeansthattheoriginaladdressis
0000:0015:0000:0000:0000:0001 :0012:1213
Address Space
IPv6hasamuchlargeraddressspace;2128addresses areavailable."
5606,"Thedesigners of
IPv6dividedtheaddressintoseveralcategories."
5607,"Afewleftmost bits,calledthetype
prefix,ineachaddressdefineitscategory."
5608,"Thetypeprefixisvariableinlength,butitis
designed suchthatnocodeisidentical tothefirstpartofanyothercode.Inthisway,
thereisnoambiguity; whenanaddressisgiven,thetypeprefixcaneasilybedeter­
mined.Table19.5showstheprefixforeachtypeofaddress.Thethirdcolumnshows
thefractionofeachtypeofaddressrelativetothewholeaddressspace."
5609,"Table19.5Typeprefixesfor1Pv6addresses
TypePrefix Type Fraction
00000000 Reserved 1/256
00000001 Unassigned 1/256
0000001 ISOnetworkaddresses 1/128
0000010 IPX(Novell)networkaddresses 1/128
0000011 Unassigned 1/128
00001 Unassigned 1/32
0001 Reserved 1/16
001 Reserved 1/8
010 Provider-based unicastaddresses 1/8SECTION 19.2IPv6ADDRESSES 569
Table19.5TypeprefixesforIPv6addresses (continued)
TypePrefix Type Fraction
011 Unassigned 1/8
100 Geographic-based unicastaddresses 1/8
101 Unassigned 1/8
110 Unassigned 1/8
1110 Unassigned 1116
11110 Unassigned 1132
111110 Unassigned 1/64
1111110 Unassigned 1/128
11111110aUnassigned 1/512
1111111010 Linklocaladdresses 111024
1111111011Sitelocaladdresses 1/1024
11111111 Multicast addresses 1/256
UnicastAddresses
Aunicastaddressdefinesasinglecomputer."
5610,"Thepacketsenttoaunicastaddressmust
bedelivered tothatspecificcomputer."
5611,"IPv6definestwotypesofunicastaddresses: geo­
graphically basedandprovider-based."
5612,"Wediscussthesecondtypehere;thefirsttypeis
leftforfuturedefinition."
5613,"Theprovider-based addressisgenerally usedbyanormalhost
asaunicastaddress.TheaddressformatisshowninFigure19.16."
5614,"Figure19.16Prefixesforprovider-based unicastaddress
Subnetprefix
Subscriber prefix
-Provider prefix
151Provider SubscribeI: Snbnet NodeI identifier idenfifiiii: identifier identifier
~
INTERNIC 11000
RIPNIC 01000
APNIC 10100
Registry
Fieldsfortheprovider-based addressareasfollows:
oTypeidentifier."
5615,This3-bitfielddefinestheaddressasaprovider-base.d address.
5616,oRegistry identifier.
5617,"This5-bitfieldindicates theagencythathasregistered the
address."
5618,Currently threeregistrycentershavebeendefined.
5619,"INTERNIC (code
11000)isthecenterforNorthAmerica; RIPNIC (code01000)isthecenterfor
European registration; andAPNIC(code10100)isforAsianandPacificcountries.570CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
oProvider identifier."
5620,"Thisvariable-length fieldidentifies theprovider forInternet
access(suchasanISP).A16-bitlengthisrecommended forthisfield."
5621,oSubscriber identifier.
5622,"Whenanorganization subscribes totheInternetthrougha
provider, itisassigned asubscriber identification."
5623,"A24-bitlengthisrecommended
forthisfield."
5624,oSubnetidentifier.
5625,"Eachsubscriber canhavemanydifferent subnetworks, andeach
subnetwork canhaveanidentifier."
5626,"Thesubnetidentifier definesaspecificsubnetwork
undertheterritoryofthesubscriber."
5627,A32-bitlengthisrecommended forthisfield.
5628,oNodeidentifier.
5629,Thelastfielddefinestheidentityofthenodeconnected toasubnet.
5630,"Alengthof48bitsisrecommended forthisfieldtomakeitcompatible withthe
48-bitlink(physical) addressusedbyEthernet."
5631,"Inthefuture,thislinkaddresswill
probably bethesameasthenodephysicaladdress."
5632,"Multicast Addresses
Multicast addresses areusedtodefineagroupofhostsinsteadofjustone.Apacketsent
toamulticast addressmustbedelivered toeachmemberofthegroup.Figure19.17
showstheformatofamulticast address."
5633,"Figure19.17Multicast addressinIPv6
8bits
0000
00014 4
Reserved
Nodelocal
Linklocal
Sitelocal
Organizational
Global
Reserved112bits
GroupID
Thesecondfieldisaflagthatdefinesthegroupaddressaseitherpermanent or
transient."
5634,"Apermanent groupaddressisdefinedbytheInternetauthorities andcanbe
accessed atalltimes.Atransient group address,ontheotherhand,isusedonlytempo­
rarily.Systems engaged inateleconference, forexample, canuseatransient group
address.Thethirdfielddefinesthescopeofthegroupaddress.Manydifferent scopes
havebeendefined,asshowninFigure19.17."
5635,"AllycastAddresses
IPv6alsodefinesanycastaddresses."
5636,"Ananycastaddress, likeamulticast address,also
definesagroupofnodes.However, apacketdestinedforananycastaddressisdelivered
toonlyoneofthemembers oftheanycastgroup,thenearestone(theonewiththeshortest
route).Although thedefinition ofananycastaddressisstilldebatable, onepossibleuse
istoassignananycastaddresstoallroutersofanISPthatcoversalargelogicalareain
theInternet."
5637,"TheroutersoutsidetheISPdeliverapacketdestined fortheISPtothe
nearestISProuter.Noblockisassigned foranycastaddresses.SECTION 19.2IPv6ADDRESSES 571
Reserved Addresses
Another category intheaddressspaceisthereserved address."
5638,"Theseaddresses start
witheightOs(typeprefixis00000000)."
5639,"Afewsubcategories aredefinedinthiscategory,
asshowninFigure19.18."
5640,"Figure19.18Reserved addresses inIPv6
8bits 120bits
l_oooooo oo_IIooo A_ll_os ......1a.Unspecified
8bits 120bits
l_oo_oo_DOO_0
oioC11.- °_0_00_0_00_0_00_0_00_0_00_0_"",_"",_""'_"",_,,,_,°_00_0_00_0_00_0_1 1b.Loopback
8bits 88bits 32bits
32bits 16bits 72bitsl_o_oDOO_DOO_II.- A_I_1o_s ...I.....I_'Pv_4_'<t_ddr_,_es_s,......1c.Compatible
8bits
l_o_oooooo__o...II.-A_ll_O_S""""'-_Al_Il_S __I...,...IPV'_4...<t_ddre_s_s_Id.Mapped
Anunspecified address isusedwhenahostdoesnotknowitsownaddressand
sendsaninquirytofinditsaddress.Aloopback addressisusedbyahosttotestitself
withoutgoingintothenetwork."
5641,"Acompatible address isusedduringthetransition
fromIPv4toIPv6(seeChapter20).Itisusedwhenacomputer usingIPv6wantsto
sendamessage toanothercomputer usingIPv6,butthemessage needstopassthrough
apartofthenetworkthatstilloperatesinIPv4.Amapped addressisalsousedduring
transition."
5642,"However, itisusedwhenacomputer thathasmigrated toIPv6wantstosend
apackettoacomputer stillusingIPv4."
5643,LocalAddresses.
5644,"Theseaddresses areusedwhenanorganization wantstouseIPv6protocolwithoutbeing
connected totheglobalInternet.Inotherwords,theyprovideaddressing forprivatenet­
works.Nobodyoutsidetheorganization cansendamessage tothenodesusingthese
addresses."
5645,"Twotypesofaddresses aredefinedforthispurpose, asshowninFigure19.19."
5646,"Figure19.19Localaddresses inIPv6
10bits 70bits
AllOs48bits
NodeaddressIa.Linklocal
38bits
AllOs b.Sitelocal572CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
Alinklocaladdressisusedinanisolatedsubnet;asitelocaladdressisusedin
anisolatedsitewithseveralsubnets."
5647,"19.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext."
5648,"Books
IPv4addresses arediscussed inChapters 4and5of[For06],Chapter3of[Ste94],Sec­
tion4.1of[PD03],Chapter18of[Sta04],andSection5.6of[TlUl03]."
5649,"IPv6addresses
arediscussed inSection27.1of[For06]andChapter8of[Los04].Agooddiscussion of
NATcanbefoundin[DutOl]."
5650,"Sites
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofIPv4addresses canbefoundinmostoftheRFCsrelatedtotheIPv4
protocol:
760,781,791,815,1025,1063,1071,1141,1190, 1191,1624,2113
Adiscussion of1Pv6addresses canbefoundinmostoftheRFCsrelatedtoIPv6protocol:
1365,1550,1678,1680,1682,1683,1686,1688,1726, 1752,1826,1883,1884,1886,1887,
1955,2080,2373,2452,2463,2465,2466,2472,2492,2545,2590
Adiscussion ofNATcanbefoundin
1361,2663,2694
19.4KEYTERMS
addressaggregation
addressspace
anycastaddress
binarynotation
classAaddress
classBaddressclassCaddress
classDaddress
classEaddress
classfuladdressing
classless addressing
classless interdomain routing(CIDR)compatible address
dotted-decimal notation
defaultmask
hexadecimal colonnotation
hostid
IPaddress
IPv4address
IPv6address
linklocaladdress
mappedaddress
mask
multicast address
netid
networkaddressSECTION 19.5SUMMARY 573
networkaddresstranslation
(NAT)
prefix
reserved address
sitelocaladdress
subnet
subnetmask
subnetting
suffix
supernet
supernet mask
supernetting
unicastaddress
unspecified address
19.5SUMMARY
oAtthenetworklayer,aglobalidentification systemthatuniquely identifies every
hostandrouterisnecessary fordeliveryofapacketfromhosttohost."
5651,"oAnIPv4addressis32bitslonganduniquely anduniversally definesahostor
routerontheInternet."
5652,"oInclassfuladdressing, theportionoftheIPaddressthatidentifies thenetworkis
calledthenetid."
5653,"oInclassfuladdressing, theportionoftheIPaddressthatidentifies thehostorrouter
onthenetworkiscalledthehostid."
5654,oAnIPaddressdefinesadevice'sconnection toanetwork.
5655,o~TherearefiveclassesinIPv4addresses.
5656,"ClassesA,B,and Cdifferinthenumber
ofhostsallowedpernetwork."
5657,ClassDisformulticasting andClassEisreserved.
5658,oTheclassofanaddressiseasilydetermined byexamination ofthefirstbyte.
5659,"oAddresses inclassesA,B,orCaremostlyusedforunicastcommunication."
5660,oAddresses inclassDareusedformulticast communication.
5661,"oSubnetting dividesonelargenetworkintoseveralsmallerones,addinganinterme-
diatelevelofhierarchy inIPaddressing."
5662,oSupernetting combines severalnetworks intoonelargeone.
5663,"oInclassless addressing, wecandividetheaddressspaceintovariable-length blocks."
5664,"oTherearethreerestrictions inclassless addressing:
a.Thenumberofaddresses needstobeapowerof2."
5665,b.Themaskneedstobeincluded intheaddresstodefinetheblock.
5666,c.Thestartingaddressmustbedivisible bythenumberofaddresses intheblock.
5667,"oThemaskinclasslessaddressing isexpressed astheprefixlength(In)inCIDRnotation.574CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
oTofindthefirstaddressinablock,wesettherightmost 32-nbitstoO."
5668,"oTofindthenumberofaddresses intheblock,wecalculate 232-n,wherenisthe
prefixlength."
5669,"oTofindthelastaddressintheblock,wesettherightmost 32-nbitstoO."
5670,oSubnetting increases thevalueofn.
5671,oTheglobalauthority for address allocation isICANN.
5672,"ICANNnormally grants
largeblocksofaddresses toISPs,whichintumgrantsmallsubblocks toindividual
customers."
5673,oIPv6addresses usehexadecimal colonnotationwithabbreviation methodsavailable.
5674,"oTherearethreetypesofaddresses inIPv6:unicast,anycast,andmulticast."
5675,"oInanIPv6address,thevariabletypeprefixfielddefinestheaddresstypeorpurpose."
5676,"19.6PRACTICE SET
ReviewQuestions
1.WhatisthenumberofbitsinanIPv4address?"
5677,"Whatisthenumberofbitsinan
IPv6address?"
5678,2.WhatisdotteddecimalnotationinIPv4addressing?
5679,"Whatisthenumberofbytes
inanIPv4addressrepresented indotteddecimalnotation?"
5680,"Whatishexadecimal
notationinIPv6addressing?"
5681,"WhatisthenumberofdigitsinanIPv6addressrepre­
sentedinhexadecimal notation?"
5682,3.Whatarethedifferences betweenclassfuladdressing andclasslessaddressing inIPv4?
5683,"4.Listtheclassesinclassfuladdressing anddefinetheapplication ofeachclass(unicast,
multicast, broadcast, orreserve)."
5684,"5.Explainwhymostoftheaddresses inclassAarewasted.Explainwhyamedium-size
orlarge-size corporation doesnotwantablockofclassCaddresses."
5685,6.WhatisamaskinIPv4addressing?
5686,WhatisadefaultmaskinIPv4addressing?
5687,7.Whatisthenetworkaddressinablockofaddresses?
5688,"Howcanwefindthenetwork
addressifoneoftheaddresses inablockisgiven?"
5689,8.Brieflydefinesubnetting andsupemetting.
5690,"Howdothesubnetmaskandsupemet
maskdifferfromadefaultmaskinclassfuladdressing?"
5691,9.Howcanwedistinguish amulticast addressinIPv4addressing?
5692,"Howcanwedoso
inIPv6addressing?"
5693,10.WhatisNAT?HowcanNAThelpinaddressdepletion?
5694,"Exercises
II.Whatistheaddressspaceineachofthefollowing systems?"
5695,"a.Asystemwith8-bitaddresses
b.Asystemwith16-bitaddresses
c.Asystemwith64-bitaddressesSECTION 19.6PRACTICE SET575
12.Anaddressspacehasatotalof1024addresses."
5696,"Howmanybitsareneededtorep­
resentanaddress?"
5697,"13.Anaddressspaceusesthethreesymbols 0,1,and2torepresent addresses."
5698,"Ifeachaddressismadeof10symbols, howmanyaddresses areavailable inthis
system?"
5699,14.Changethefollowing IPaddresses fromdotted-decimal notationtobinarynotation.
5700,"a.114.34.2.8
b.129.14.6.8
c.208.34.54.12
d.238.34.2.1
15.Changethefollowing IPaddresses frombinarynotationtodotted-decimal notation."
5701,"a.01111111 11110000 01100111 01111101
b.10101111 11000000 11111000 00011101
c.11011111 10110000 00011111 01011101
d.11101111 11110111 11000111 00011101
16.Findtheclassofthefollowing IPaddresses."
5702,"a.208.34.54.12
b.238.34.2.1
c.114.34.2.8
d.129.14.6.8
17.Findtheclassofthefollowing IPaddresses."
5703,"a.11110111 11110011 10000111 11011101
b.10101111 11000000 11110000 00011101
c.11011111 10110000 00011111 01011101
d.11101111 11110111 11000111 00011101
18.Findthenetidandthehostidofthefollowing IPaddresses ."
5704,"•a.114.34.2.8
b.132.56.8.6
c.208.34.54.12
19.Inablockofaddresses, weknowtheIPaddressofonehostis25.34.12.56/16."
5705,"Whatarethefirstaddress(network address)andthelastaddress(limitedbroadcast
address) inthisblock?"
5706,"20.Inablockofaddresses, weknowtheIPaddressofonehostis182.44.82.16/26."
5707,Whatarethefirstaddress(network address) andthelastaddressinthisblock?
5708,21.Anorganization isgrantedtheblock16.0.0.0/8.
5709,"Theadministrator wantstocreate
500fixed-length subnets."
5710,a.Findthesubnetmask.
5711,b.Findthenumberofaddresses ineachsubnet.
5712,c.Findthefirstandlastaddresses insubnet1.
5713,"d.Findthefirstandlastaddresses insubnet500.576 CHAPTER 19NETWORK LAYER:LOGICAL ADDRESSING
22.Anorganization isgrantedtheblock130.56.0.0/16."
5714,"Theadministrator wantsto
create1024subnets."
5715,a.Findthesubnetmask.
5716,b.Findthenumberofaddresses ineachsubnet.
5717,c.Findthefirstandlastaddresses insubnet1.
5718,d.Findthefirstandlastaddresses insubnet1024.
5719,23.Anorganization isgrantedtheblock211.17.180.0/24.
5720,"Theadministrator wantsto
create32subnets."
5721,a.Findthesubnetmask.
5722,b.Findthenumberofaddresses ineachsubnet.
5723,c.Findthefirstandlastaddresses insubnet1.
5724,d.Findthefirstandlastaddresses insubnet32.
5725,24.Writethefollowing masksinslashnotation(In).
5726,"a.255.255.255.0
b.255.0.0.0
c.255.255.224.0
d.255.255.240.0
25.Findtherangeofaddresses inthefollowing blocks."
5727,"a.123.56.77.32/29
b.200.17.21.128/27
c.17.34.16.0/23
d.180.34.64.64/30
26.AnISPisgrantedablockofaddresses startingwith150.80.0.0/16."
5728,"TheISPwants
todistribute theseblocksto2600customers asfollows."
5729,a.Thefirstgrouphas200medium-size businesses; eachneeds128addresses.
5730,b.Thesecondgrouphas400smallbusinesses; eachneeds16addresses.
5731,c.Thethirdgrouphas2000households; eachneeds4addresses.
5732,Designthesubblocks andgivetheslashnotationforeachsubblock.
5733,"Findouthow
manyaddresses arestillavailable aftertheseallocations."
5734,27.AnISPisgrantedablockofaddresses startingwith120.60.4.0/22.
5735,"TheISP
wantstodistribute theseblocksto100organizations witheachorganization
receiving justeightaddresses."
5736,"Designthesubblocks andgivetheslashnotation
foreachsubblock."
5737,"Findouthowmanyaddresses arestillavailable afterthese
allocations."
5738,28.AnISPhasablockof1024addresses.
5739,"Itneedstodividetheaddresses among
1024customers."
5740,Doesitneedsubnetting?
5741,Explainyouranswer.
5742,29.Showtheshortestformofthefollowing addresses.
5743,"a.2340:lABC:119A:AOOO:0000:0000:0000:0000
b.OOOO:OOAA:OOOO:OOOO:OOOO:OOOO: 119A:A231
c.2340:0000:0000:0000:0000: 119A:AOO1:0000
d.0000:0000:0000:2340:0000:0000:0000:0000SECTION 19.6PRACTICE SET577
30.Showtheoriginal(unabbreviated) formofthefollowing addresses."
5744,"a.0::0
b.O:AA::O
c.0:1234::3
d.123::1:2
31.Whatisthetypeofeachofthefollowing addresses?"
5745,"a.FE80::12
b.FECO::24A2
c.FF02::0
d.0::01
32.Whatisthetypeofeachofthefollowing addresses?"
5746,"a.0::0
b.0::FFFF:O:O
c.582F:1234::2222
d.4821::14:22
e.54EF::A234:2
33.Showtheprovider prefix(inhexadecimal colonnotation) ofanaddressassigned
toasubscriber ifitisregistered intheUnitedStateswithABC1astheprovider
identification."
5747,"34.Showinhexadecimal colon notation theIPv6address
a.Compatible totheIPv4address129.6.12.34
b.MappedtotheIPv4address129.6.12.34
35.Showinhexadecimal colonnotation
a.Thelinklocaladdressinwhichthenodeidentifier is0::123/48
b.Thesitelocaladdressinwhichthenodeidentifier is0::123/48
36.Showinhexadecimal colonnotationthepermanent multicast addressusedinalink
localscope."
5748,"37.•Ahosthastheaddress581E:1456:2314:ABCD:: 1211.Ifthenodeidentification is
48bits,findtheaddressofthesubnettowhichthehostisattached."
5749,"38.Asitewith200subnetshastheclassBaddressof132.45.0.0. Thesiterecently
migrated toIPv6withthesubscriber prefix581E:1456:2314::ABCD/80."
5750,"Design
thesubnetsanddefinethesubnetaddresses, usingasubnetidentifier of32bits."
5751,"Research Activities
39.Findtheblockofaddresses assigned toyourorganization orinstitution."
5752,"40.IfyouareusinganISPtoconnectfromyourhometotheInternet, findthenameof
theISPandtheblockofaddresses assigned toit."
5753,"41.Somepeoplearguethatwecanconsider thewholeaddressspaceasonesingle
blockinwhicheachrangeofaddresses isasubblock tothissingleblock.Elaborate
onthisidea.Whathappenstosubnetting ifweacceptthisconcept?"
5754,"42.Isyourschoolororganization usingaclassfuladdress?Ifso,findouttheclassof
theaddress.CHAPTER 20
Network Layer:
Internet Protocol
IntheInternetmodel,themainnetworkprotocol istheInternet Protocol (IP).Inthis
chapter,wefirstdiscussinternetworking andissuesrelatedtothenetworklayerprotocol
ingeneral."
5755,"WethendiscussthecurrentversionoftheInternetProtocol, version4,orIPv4."
5756,"Thisleadsustothenextgeneration ofthisprotocol, orIPv6,whichmaybecomethe
dominant protocol inthenearfuture."
5757,"Finally,wediscussthetransition strategies fromIPv4toIPv6.Somereadersmay
notetheabsenceofIPv5.IPv5isanexperimental protocol, basedmostlyontheOSI
modelthatnevermaterialized."
5758,"20.1INTERNETWORKING
Thephysical anddatalinklayersofanetwork operatelocally.Thesetwolayersare
jointlyresponsible fordatadeliveryonthenetworkfromonenodetothenext,asshown
inFigure20.1.
Thisinternetwork ismadeoffivenetworks: fourLANsandoneWAN.IfhostA
needstosendadatapackettohostD,thepacketneedstogofirstfromAtoRl(aswitch
orrouter),thenfromRltoR3,andfinallyfromR3tohostD.Wesaythatthedatapacket
passesthroughthreelinks.Ineachlink,twophysicalandtwodatalinklayersareinvolved."
5759,"However, thereisabigproblemhere.WhendataarriveatinterfaceflofRl,how
doesRIknowthatinterfacef3istheoutgoing interface?"
5760,"Thereisnoprovision inthe
datalink(orphysical) layertohelpRlmaketherightdecision."
5761,"Theframedoesnot
carryanyroutinginformation either.Theframecontains theMACaddressofAasthe
sourceandtheMACaddressofRlasthedestination."
5762,"ForaLANoraWAN,delivery
meanscarryingtheframethroughonelink,andnotbeyond."
5763,"NeedforNetwork Layer
Tosolvetheproblemofdeliverythroughseverallinks,thenetworklayer(ortheinter­
networklayer,asitissometimes called)wasdesigned."
5764,"Thenetworklayerisresponsible
forhost-to-host delivery andforroutingthepacketsthroughtheroutersorswitches."
5765,Figure20.2showsthesameinternetwork withanetworklayeradded.
5766,"579580CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.1Linksbetweentwohosts
A 51 53 0
Datalink~ffi ~~
 ~Datalink
Physical Physical------------Hop-to-hop Hop-to-hop Hop-to-hop
delivery delivery delivery
LANLAN
Link3 0.-------..~...,5352f2fl--.lliii...-----<.,----WANf3f2, fl-'~~~
I --....,."
5767,....
5768,"I
I
I Link2L •
Figure20.2Network layerinaninternetwork
A
N',,"""",k~
D,"",""""k
Physical51 53 D
~~
~Network
Datalink
_____ __ Physical
-----------------------------.Host-to-host pathLAN
f2f252
fl
WAN
Figure20.3showsthegeneralideaofthefunctionality ofthenetwork layerata
source,atarouter,andatthedestination."
5769,"Thenetworklayeratthesourceisresponsible
forcreatingapacketfromthedatacomingfromanotherprotocol (suchasatransport
layerprotocol oraroutingprotocol)."
5770,"Theheaderofthepacketcontains, amongother
information, thelogicaladdresses ofthesourceanddestination."
5771,"Thenetwork layeris
responsible forchecking itsroutingtabletofindtheroutinginformation (suchasthe
outgoing interface ofthepacketorthephysical addressofthenextnode).Ifthepacket
istoolarge,thepacketisfragmented (fragmentation isdiscussed laterinthischapter).SECTION 20.11NTERNETWORKING S8t
Figure20.3Network layeratthesource,router,anddestination
____________ ...1
Network layerDatato
anotherprotocol
Destination
~----------- -----
Network layerDatafrom
anotherprotocol
Todata
linklayerFromdata
linklayer
a.Network layer atsource b.Network layeratdestination
Router
-----------~----------Routing
table
lP
packet
Network layer
Fromdata Todata ."
5772,"linklayer linklayer
c.Network layeratarouter
Thenetwork layerattheswitchorrouterisresponsible forroutingthepacket."
5773,"Whenapacketarrives,therouterorswitchconsultsitsroutingtableandfindstheinter­
facefromwhichthepacketmustbesent.Thepacket,aftersomechangesintheheader,
withtheroutinginfonnation ispassedtothedatalinklayeragain."
5774,"•Thenetworklayeratthedestination isresponsible foraddressverification; itmakes
surethatthedestination addressonthepacketisthesameastheaddressofthehost.If
thepacketisafragment, thenetworklayerwaitsuntilallfragments havearrived,and
thenreassembles themanddeliversthereassembled packettothetransport layer."
5775,"Internet asaDatagram Network
TheInternet,atthenetworklayer,isapacket-switched network."
5776,"Wediscussed switching
inChapter8.Wesaidthat,ingeneral,switching canbedividedintothreebroadcatego­
ries:circuitswitching, packetswitching, andmessage switching."
5777,"Packet switching uses
eitherthevirtualcircuitapproach orthedatagram approach."
5778,TheInternethaschosenthedatagram approach toswitching inthenetworklayer.
5779,"Itusestheuniversal addresses definedinthenetwork layertoroutepacketsfromthe
sourcetothedestination."
5780,"Switching atthenetworklayerintheInternetusesthedatagram approach topacketswitching.582 CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Internet asaConnectionless Network
Delivery ofapacketcanbeaccomplished byusingeitheraconnection-oriented ora
connectionless network service.Inaconnection-oriented service,thesourcefirst
makesaconnection withthedestination beforesendingapacket.Whentheconnection
isestablished, asequence ofpacketsfromthesamesourcetothesamedestination can
besentoneafteranother.Inthiscase,thereisarelationship betweenpackets.Theyare
sentonthesamepathinsequential order.Apacketislogically connected tothepacket
traveling beforeitandtothepackettraveling afterit.Whenallpacketsofamessage
havebeendelivered, theconnection isterminated."
5781,"Inaconnection-oriented protocol, thedecision abouttherouteofasequence of
packetswiththesamesourceanddestination addresses canbemadeonlyonce,when
theconnection isestablished."
5782,"Switches donotrecalculate therouteforeachindividual
packet.Thistypeofserviceisusedinavirtual-circuit approacH."
5783,"topacketswitching
suchasinFrameRelayandATM."
5784,"Inconneetionless service,thenetworklayerprotocoltreatseachpacketindepen­
dently,witheachpackethavingnorelationship toanyotherpacket.Thepacketsina
messagemayormaynottravelthesamepathtotheirdestination."
5785,"Thistypeofservice
isusedinthedatagram approach topacketswitching."
5786,"TheInternethaschosenthistype
ofserviceatthenetworklayer."
5787,"ThereasonforthisdecisionisthattheInternetismadeofsomanyheterogeneous
networks thatitisalmostimpossible tocreateaconnection fromthesourcetothe
destination withoutknowing thenatureofthenetworks inadvance."
5788,Communication atthenetworklayerintheInternetisconnectionless.
5789,"20.2IPv4
TheInternetProtocol version4(IPv4)isthedeliverymechanism usedbytheTCP/IP
protocols."
5790,Figure20.4showsthepositionofIPv4inthesuite.
5791,"Figure20.4PositionofIPv4inTCPIIPprotocol suite
APPliC~~~~~I~~ITFTPI~ISNMPI••• I BOOTPII
Tran~;;= 11 SCTPII TCPkI UDPII
I~IIGMP~ilICMP
~II
~IPv~4~I
~I~I
N""~:~ ..'--."
5792,"----'IARPII~J
DatalinkI I
layer~~~ Underlying LANorWAN
PhysicalI technology I
layer
1-_-:..'::================:-_.....1SECTION 20.2IPv4 583
IPv4isanunreliable andconnectionless datagram protocol-a best-effort delivery
service.Thetermbest-effort meansthatIPv4provides noerrorcontrolorflowcontrol
(exceptforerrordetection ontheheader).IPv4assumestheunreliability oftheunder­
lyinglayers and doesitsbesttogetatransmission throughtoitsdestination, butwith
noguarantees."
5793,"Ifreliability isimportant, IPv4mustbepairedwithareliableprotocolsuchasTCP."
5794,"Anexampleofamorecommonly understood best-effort deliveryserviceisthepost
office.Thepostofficedoesitsbesttodeliverthemailbutdoesnotalwayssucceed.If
anunregistered letterislost,itisuptothesenderorwould-be recipient todiscoverthe
lossandrectifytheproblem."
5795,"Thepostofficeitselfdoesnotkeeptrackofeveryletter
andcannotnotifyasenderoflossordamage."
5796,"IPv4isalsoaconnectionless protocolforapacket-switching networkthatusesthe
datagram approach (seeChapter8).Thismeansthateachdatagram ishandledindepen­
dently,andeachdatagram canfollowadifferent routetothedestination."
5797,"Thisimplies
thatdatagrams sentbythesamesourcetothesamedestination couldarriveoutof
order.Also,somecouldbelostorcorrupted duringtransmission."
5798,"Again,IPv4relieson
ahigher-level protocoltotakecareofalltheseproblems."
5799,"Datagram
PacketsintheIPv4layerarecalleddatagrams."
5800,"Figure20.5showstheIPv4datagram
format."
5801,"Figure20.5IPv4datagramfannat
:20-60bytes
""I
HeMerIDataI -----VER
IHLENIService Totallength
4bits 4bits 8bits 16bits
Identification FlagsIFragmentation offset
16bits 3bits 13bits
Timetolive
IProtocol Headerchecksum
8bits 8bits 16bits
SourceIPaddress
Destination IPaddress
Option
I· 32bits -I
Adatagram isavariable-length packetconsisting oftwoparts:headeranddata."
5802,"Theheaderis20to60bytesinlengthandcontainsinformation essentialtoroutingand584CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
delivery.Itiscustomary inTCP/IPtoshowtheheaderin4-bytesections."
5803,"Abrief
description ofeachfieldisinorder."
5804,oVersion(VER).This4-bitfielddefinestheversionoftheIPv4protocol.
5805,"Currently
theversionis4.However, version6(orIPng)maytotallyreplaceversion4inthe
future.ThisfieldtellstheIPv4softwarerunningintheprocessing machinethatthe
datagram hastheformatofversion4.Allfieldsmustbeinterpreted asspecified
inthefourthversionoftheprotocol.Ifthemachineisusingsomeotherversionof
IPv4,thedatagram isdiscarded ratherthaninterpreted incorrectly."
5806,oHeaderlength(HLEN).
5807,"This4-bitfielddefinesthetotallengthofthedatagram
headerin4-bytewords.Thisfieldisneededbecause thelengthoftheheader
isvariable(between 20and60bytes).Whentherearenooptions,theheaderlength
is20bytes,andthevalueofthisfieldis5(5x 4=20).Whentheoptionfieldis
atitsmaximum size,thevalueofthisfieldis15(15x 4=60)."
5808,oServices.
5809,"IETFhaschangedtheinterpretation andnameofthis8-bitfield.This
field,previously calledservicetype,isnowcalleddifferentiated services."
5810,"Weshow
bothinterpretations inFigure20.6.
Figure20.6Servicetypeordifferentiated services
D:Minimize delay R:Maximize reliability
T:Maximize throughput C:Minimize cost
Precedence TOSbits
ServicetypeCodepoint
Differentiated services
1.ServiceType
Inthisinterpretation, thefirst3bitsarecalledprecedence bits.Thenext4bitsare
calledtypeofservice(TOS)bits,andthelastbitisnotused."
5811,a.Precedence isa3-bitsubfieldrangingfrom0(000inbinary)to7(111inbinary).
5812,Theprecedence definesthepriorityofthedatagram inissuessuchascongestion.
5813,"Ifarouteriscongested andneedstodiscardsomedatagrams, thosedatagrams
withlowestprecedence arediscarded first.Somedatagrams intheInternetare
moreimportant thanothers.Forexample, adatagram usedfornetworkmanage­
mentismuchmoreurgentand important thanadatagram containing optional
information foragroup."
5814,"Theprecedence subfieldwaspartofversion4,butneverused."
5815,b.TOSbitsisa4-bitsubfieldwitheachbithavingaspecialmeaning.
5816,"Although a
bitcanbeeither0or1,oneandonlyoneofthebitscanhavethevalueof1in
eachdatagram."
5817,"Thebitpatternsandtheirinterpretations aregiveninTable20.1.
Withonly1bitsetatatime,wecanhavefivedifferenttypesofservices.SECTION 20.2IPv4 585
Table20.1Typesofservice
TOSBits Description
0000 Normal(default)
0001 Minimize cost
0010 Maximize reliability
0100 Maximize throughput
1000 Minimize delay
Application programs canrequestaspecifictypeofservice.Thedefaultsforsome
applications areshowninTable20.2.
Table20.2Defaulttypesofservice
Protocol TOSBits Description
ICMP 0000 Normal
BOOTP 0000 Normal
NNTP 0001 Minimize cost
IGP 0010 Maximize reliability
SNMP 0010 Maximize reliability
TELNET 1000 Minimize delay
FTP(data) 0100 Maximize throughput
FTP(control) 1000 Minimize delay
TFTP 1000 Minimize delay
SMTP(command) 1000 Minimize delay
SMTP(data) 0100 Maximize throughput
DNS(UDPquery) 1000 Minimize delay
DNS(TCPquery) 0000 Normal
DNS(zone) 0100 Maximize throughput
ItisclearfromTable20.2thatinteractive activities, activities requiring immediate
attention, andactivities requiring immediate response needminimum delay.Those
activities thatsendbulkdatarequiremaximum throughput."
5818,"Management activities
needmaximum reliability."
5819,Background activities needminimum cost.
5820,"2.Differentiated Services
Inthisinterpretation, thefirst6bitsmakeupthecodepoint subfield,andthelast2bits
arenotused.Thecodepoint subfieldcanbeusedintwodifferentways."
5821,"a.Whenthe3rightmost bitsareOs,the3leftmostbitsareinterpreted thesameasthe
precedence bitsintheservicetypeinterpretation."
5822,"Inotherwords,itiscompatible
withtheoldinterpretation.586 CHAPTER 20NE1WORK LAYER:INTERNET PROTOCOL
b.Whenthe3rightmost bitsarenotallOs,the6bitsdefine64servicesbasedonthe
priorityassignment bytheInternetorlocalauthorities according toTable20.3.The
firstcategorycontains32servicetypes;thesecondandthethirdeachcontain16."
5823,"Thefirstcategory(numbers 0,2,4,...,62)isassignedbytheInternetauthorities
(IETF).Thesecondcategory(3,7,11, 15, ,63)canbeusedbylocalauthorities
(organizations)."
5824,"Thethirdcategory(1,5,9,,61)istemporary andcanbeused
forexperimental purposes."
5825,Notethatthenumbersarenotcontiguous.
5826,"Iftheywere,
thefirstcategorywouldrangefrom0to31,thesecondfrom32to47,andthethird
from48to63.Thiswouldbeincompatible withtheTOSinterpretation because
XXXOOO (whichincludes 0,8,16,24,32,40, 48,and56)wouldfallintoall
threecategories."
5827,"Instead,inthisassignment methodalltheseservicesbelongto
category 1.Notethattheseassignments havenotyetbeenfinalized."
5828,"Table20.3Valuesforcodepoints
Category Codepoint Assigning Authority
1 XXXXXO Internet
2 XXXXll Local
3 XXXXOI Temporary orexperimental
oTotallength.ThisisaIn-bitfieldthatdefinesthetotallength(headerplusdata)
oftheIPv4datagram inbytes.Tofindthelengthofthedatacomingfromtheupper
layer,subtracttheheaderlengthfromthetotallength.Theheaderlengthcanbe
foundbymultiplying thevalueintheHLENfieldby4."
5829,"Lengthofdata=totallength-headerlength
Sincethefieldlengthis16bits,thetotallengthoftheIPv4datagram islimitedto
65,535(216-1)bytes,ofwhich20to60bytesaretheheaderandtherestisdata
fromtheupperlayer."
5830,Thetotallengthfielddefinesthetotallengthofthedatagram including theheader.
5831,"Thoughasizeof65,535bytesmightseemlarge,thesizeoftheIPv4datagram
mayincrease inthenearfutureastheunderlying technologies allowevenmore
throughput (greaterbandwidth)."
5832,"Whenwediscussfragmentation inthenextsection,wewillseethatsomephys­
icalnetworks arenotabletoencapsulate adatagram of65,535bytesintheirframes."
5833,Thedatagram mustbefragmented tobeabletopassthroughthosenetworks.
5834,"Onemayaskwhyweneedthisfieldanyway.Whenamachine (routerorhost)
receives aframe,itdropstheheaderandthetrailer,leavingthedatagram."
5835,"Why
includeanextrafieldthatisnotneeded?"
5836,"Theansweristhatinmanycaseswe
reallydonotneedthevalueinthisfield.However, thereareoccasions inwhichtheSECTION 20.2IPv4 587
datagram isnottheonlythingencapsulated inaframe;itmaybethatpaddinghas
beenadded.Forexample, theEthernet protocol hasaminimum andmaximum
restriction onthesizeofdatathatcanbeencapsulated inaframe(46to1500bytes)."
5837,"IfthesizeofanIPv4datagram islessthan46bytes,somepaddingwillbeaddedto
meetthisrequirement."
5838,"Inthiscase,whenamachine decapsulates thedatagram, it
needstocheckthetotallengthfieldtodetermine howmuchisreallydataandhow
muchispadding(seeFigure20.7)."
5839,"Figure20.7Encapsulation ofasmalldatagram inanEthernetframe
L2
HeaderLength:Minimum 46bytes
Data<46bytes IIPadding,I
IIL2
Trailer
oIdentification."
5840,Thisfieldisusedinfragmentation (discussed inthenextsection).
5841,oFlags.Thisfieldisusedinfragmentation (discussed inthenextsection).
5842,"oFragmentation offset.Thisfieldisusedinfragmentation (discussed inthenext
section)."
5843,oTimetolive.Adatagram hasalimitedlifetimeinitstravelthroughaninternet.
5844,"Thisfieldwasoriginally designed toholdatimestamp, whichwasdecremented by
eachvisitedrouter.Thedatagram wasdiscarded whenthevaluebecamezero.How­
ever,forthisscheme,allthemachines musthavesynchronized clocksandmust
knowhowlongittakesforadatagram togofromonemachine toanother.Today,
thisfieldisusedmostlytocontrolthemaximum numberofhops(routers) visitedby
thedatagram."
5845,"Whenasourcehostsendsthedatagram, itstoresanumberinthis
field.Thisvalueisapproximately 2timesthemaximum numberofroutesbetween
anytwohosts.Eachrouterthatprocesses thedatagram decrements thisnumberby1."
5846,"Ifthisvalue,afterbeingdecremented, iszero,therouterdiscardsthedatagram."
5847,Thisfieldisneededbecauserouting tablesintheInternetcanbecomecorrupted.
5848,"Adatagram maytravelbetweentwoormoreroutersforalongtimewithouteverget­
tingdelivered tothedestination host.Thisfieldlimitsthelifetimeofadatagram."
5849,"Anotheruseofthisfieldistointentionally limitthejourneyofthepacket.For
example, ifthesourcewantstoconfinethepackettothelocalnetwork, itcanstore
1inthisfield.Whenthepacketarrivesatthefirstrouter,thisvalueisdecremented
to0,andthedatagram isdiscarded."
5850,oProtocol.
5851,"This8-bitfielddefinesthehigher-level protocolthatusestheservicesof
theIPv4layer.AnIPv4datagram canencapsulate datafromseveralhigher-level
protocols suchasTCP,UDP,ICMP,andIGMP.Thisfieldspecifies thefinaldesti­
nationprotocol towhichtheIPv4datagram isdelivered."
5852,"Inotherwords,sincethe
IPv4protocol carriesdatafromdifferent otherprotocols, thevalueofthisfield
helpsthereceiving network layerknowtowhichprotocol thedatabelong(see
Figure20.8).588CHAPTER 20NETWORK lAYER:INTERNET PROTOCOL
Figure20.8Protocol fieldandencapsulated data
Transport layer
Network layer
The""aloeoftheprotoml fielddefines
towhichprotocol thedatabelong."
5853,"Thevalueofthisfieldforeachhigher-level protocol isshowninTable10.4.
Table20.4Protocol values
Value Protocol
1 ICMP
2 IGMP
6 TCP
17 UDP
89 OSPF
oChecksum."
5854,"Thechecksum conceptanditscalculation arediscussed laterinthis
chapter."
5855,oSourceaddress.
5856,"This32-bitfielddefinestheIPv4addressofthesource.Thisfield
mustremainunchanged duringthetimetheIPv4datagram travelsfromthesource
hosttothedestination host."
5857,oDestination address.
5858,This32-bitfielddefinestheIPv4addressofthedestination.
5859,"Thisfieldmustremainunchanged duringthetimetheIPv4datagram travelsfrom
thesourcehosttothedestination host."
5860,"Example 20.1
AnIPv4packethasarrivedwiththefirst8bitsasshown:
01000010
Thereceiver discards thepacket.Why?"
5861,"Solution
ThereisanelTOrinthispacket.The4leftmost bits(0100)showtheversion,whichiscorrect.The
next4bits(0010)showaninvalidheaderlength(2x4=8).Theminimum numberofbytesinthe
headermustbe20.Thepackethasbeencorrupted intransmission.SECTION 20.2IPv4 589
Example 20.2
InanIPv4packet,thevalueofHLENis1000inbinary.Howmanybytesofoptionsarebeing
carriedbythispacket?"
5862,"Solution
TheHLENvalueis8,whichmeansthetotalnumberofbytesintheheaderis8x4,or32bytes."
5863,"Thefirst20bytesarethebaseheader,thenext12bytesaretheoptions."
5864,"Example 20.3
InanIPv4packet,thevalueofHLENis5,andthevalueofthetotallengthfieldisOx0028.How
manybytesofdataarebeingcarriedbythispacket?"
5865,"Solution
TheHLENvalueis5,whichmeansthetotalnumberofbytesintheheaderis5x4,or20bytes(no
options)."
5866,"Thetotallengthis40bytes,whichmeansthepacketiscarrying20bytesofdata(40-20)."
5867,"Example 20.4
AnIPv4packethasarrivedwiththefirstfewhexadecimal digitsasshown."
5868,Ox45000028000100000102 ...
5869,Howmanyhopscanthispackettravelbeforebeingdropped?
5870,"Thedatabelongtowhatupper-layer
protocol?"
5871,"Solution
Tofindthetime-to-live field,weskip8bytes(16hexadecimal digits).Thetime-to-live fieldisthe
ninthbyte,whichis01.Thismeansthepacketcantravelonlyonehop.Theprotocol fieldisthe
nextbyte(02),whichmeansthattheupper-layer protocolisIGMP(seeTable20.4)."
5872,"Fragmentation
Adatagram cantravelthroughdifferent networks."
5873,"Eachrouterdecapsulates theIPv4
datagram fromtheframeitreceives, processes it,andthenencapsulates itinanother
frame.Theformatandsizeofthereceived framedependontheprotocol usedbythe
physical networkthroughwhichtheframehasjusttraveled."
5874,"Theformatandsizeof
thesentframedependontheprotocolusedbythephysicalnetworkthroughwhichthe
frameisgoingtotravel.Forexample, ifarouterconnects aLANtoaWAN,itreceives
aframeintheLANformatandsendsaframeintheWANformat."
5875,"Maximum Transfer Unit(MTU)
Eachdatalinklayerprotocolhasitsownframeformatinmostprotocols."
5876,"Oneofthe
fieldsdefinedintheformatisthemaximum sizeofthedatafield.Inotherwords,when
adatagram isencapsulated inaframe, the totalsizeofthedatagram mustbelessthan
thismaximum size,whichisdefinedbytherestrictions imposed bythehardware and
softwareusedinthenetwork(seeFigure20.9)."
5877,ThevalueoftheMTUdependsonthephysicalnetworkprotocol.
5878,"Table20.5shows
thevaluesforsomeprotocols.590CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.9Maximum transferunit(MTU)
IPdatagtam
.""."
5879,M1lh ...
5880,""":Maximum li~gthofdatatomiencapsulated~a' frame
Frame
Table20.5MTUsforsomenetworks
Protocol MTU
Hyperchannel 65,535
TokenRing(16Mbps) 17,914
TokenRing(4Mbps) 4,464
FDDI 4,352
Ethernet 1,500
X.25 576
PPP 296
TomaketheIPv4protocol independent ofthephysical network, thedesigners
decidedtomakethemaximum lengthoftheIPv4datagram equalto65,535bytes.This
makestransmission moreefficientifweuseaprotocol withanMTUofthissize.How­
ever,forotherphysical networks, wemustdividethedatagram tomakeitpossibleto
passthroughthesenetworks."
5881,Thisiscalledfragmentation.
5882,"Thesourceusuallydoesnotfragment theIPv4packet.Thetransport layerwill
insteadsegment thedataintoasizethatcanbeaccommodated byIPv4andthedata
linklayerinuse."
5883,"Whenadatagram isfragmented, eachfragment hasitsownheaderwithmostof
thefieldsrepeated, butwithsomechanged."
5884,"Afragmented datagram mayitselfbefrag­
mentedifitencounters anetworkwithanevensmallerMTU.Inotherwords,adata­
gramcanbefragmented severaltimesbeforeitreachesthefinaldestination."
5885,"InIPv4,adatagram canbefragmented bythesourcehostoranyrouterinthepath
although thereisatendency tolimitfragmentation onlyatthesource.Thereassembly of
thedatagram, however, isdoneonlybythedestination hostbecauseeachfragment
becomes anindependent datagram."
5886,"Whereas thefragmented datagram cantravelthrough
different routes,andwecannevercontrolorguarantee whichrouteafragmented data­
grammaytake,allthefragments belonging tothesamedatagram shouldfinallyarriveat
thedestination host.Soitislogicaltodothereassembly atthefinaldestination."
5887,"Aneven
strongerobjection toreassembling packetsduringthetransmission isthelossofeffi­
ciencyitincurs."
5888,"Whenadatagram isfragmented, requiredpartsoftheheadermustbecopiedbyall
fragments."
5889,"Theoptionfieldmayormaynotbecopied,aswewillseeinthenextsection."
5890,"Thehostorrouterthatfragments adatagram mustchangethevaluesofthreefields:SECTION 20.2IPv4 591
flags,fragmentation offset,andtotallength.Therestofthefieldsmustbecopied.Of
course,thevalueofthechecksum mustberecalculated regardless offragmentation."
5891,"FieldsRelatedtoFragmentation
Thefieldsthatarerelatedtofragmentation andreassembly ofanIPv4datagram arethe
identification, flags,andfragmentation offsetfields."
5892,oIdentification.
5893,"This16-bitfieldidentifies adatagram originating fromthesource
host.Thecombination oftheidentification andsourceIPv4addressmustuniquely
defineadatagram asitleavesthesourcehost.Toguarantee uniqueness, theIPv4
protocolusesacountertolabelthedatagrams."
5894,"Thecounterisinitialized toaposi­
tivenumber.WhentheIPv4protocolsendsadatagram, itcopiesthecurrentvalue
ofthecountertotheidentification fieldandincrements thecounter by'~1.Aslongas
thecounteriskeptinthemainmemory, uniqueness isguaranteed."
5895,"Whenadata­
gramisfragmented, thevalueintheidentification fieldiscopiedtoallfragments."
5896,"Inotherwords,allfragments havethesameidentification number,thesameasthe
originaldatagram."
5897,"Theidentification numberhelpsthedestination inreassembling
thedatagram.Itknowsthatallfragments havingthesameidentification valuemust
beassembled intoonedatagram.oFlags.Thisisa3-bitfield.Thefirstbitisreserved."
5898,"Thesecondbitiscalledthedo
notfragment bit.Ifitsvalueis1,themachinemustnotfragment thedatagram."
5899,"Ifit
cannotpassthedatagram throughanyavailable physicalnetwork, itdiscardsthe
datagram andsendsanICMPerrormessagetothesourcehost(seeChapter21).If
itsvalueis0,thedatagram canbefragmented ifnecessary."
5900,"Thethirdbitiscalled
themorefragment bit.Ifitsvalueis1,itmeansthedatagram isnotthelastfrag­
ment;therearemorefragments afterthisone.Ifitsvalueis0,itmeansthisisthe
lastoronlyfragment (seeFigure20.10)."
5901,"Figure20.10Flagsusedinfragmentation
~ D:Donatfragment~ M:Morefragments
oFragmentation offset.This13-bitfieldshowstherelativepositionofthisfrag­
mentwithrespecttothewholedatagram.Itistheoffsetofthedataintheoriginal
datagram measured inunitsof8bytes.Figure20.11showsadatagram withadata
sizeof4000bytesfragmented intothreefragments."
5902,"Thebytesintheoriginaldatagram arenumbered 0to3999.Thefirstfragment
carriesbytes0to1399.Theoffsetforthisdatagram is0/8=O.Thesecondfrag­
mentcarriesbytes1400to2799;theoffsetvalueforthisfragment is1400/8=175."
5903,"Finally,thethirdfragment carriesbytes2800to3999.Theoffsetvalueforthis
fragment is2800/8=350."
5904,"Remember thatthevalueoftheoffsetismeasured inunitsof8bytes.Thisis
donebecausethelengthoftheoffsetfieldisonly13bitsandcannotrepresent a592CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.11Fragmentation example
Byte0000Offset=0000/8=0
•••Offset=0000/8=0
Offset=1400/8=175
Offset=2800/8=350
2800 3999
sequence ofbytesgreaterthan8191.Thisforceshostsorroutersthatfragment data­
gramstochooseafragment sizesothatthefirstbytenumberisdivisible by8."
5905,Figure20.12showsanexpanded viewofthefragments inFigure20.11.
5906,Noticethevalueoftheidentification fieldisthesameinallfragments.
5907,"Noticethe
valueoftheflagsfieldwiththemorebitsetforallfragments exceptthelast.Also,
thevalueoftheoffsetfieldforeachfragment isshown."
5908,"Figure20.12Detailedfragmentation example
I I 1420
14,567 I111000
I
Bytes0000-1399I I 820
14,567 I111175
Fragment 1I
II 40201/14,567 I101000 I I 1420Bytes1400-2199I 14,567 I III175
I Fragment 2.1
~I I 620
Bytes0000-3999 Bytes1400-279914,567 IIII275
I
Fragment 2
Originaldatagram
II 1220Bytes2200-2799
14,567 I101'350 Fragment 2.2
I
Bytes2800-3999
Fragment 3SECTION 20.2IPv4 593
Thefigurealsoshowswhathappensifafragment itselfisfragmented."
5909,"Inthis
casethevalueoftheoffsetfieldisalwaysrelativetotheoriginaldatagram."
5910,"For
example, inthefigure,thesecondfragment isitselffragmented latertotwofrag­
mentsof800bytesand600bytes,buttheoffsetshowstherelativepositionofthe
fragments totheoriginaldata."
5911,"Itisobviousthatevenifeachfragment followsadifferent pathandarrivesout
oforder,thefinaldestination hostcanreassemble theoriginaldatagram fromthe
fragments received(ifnoneofthemislost)byusingthefollowing strategy:
1.Thefirstfragment hasanoffsetfieldvalueofzero."
5912,"2.Dividethelengthofthefirstfragment by8.Thesecondfragment hasanoffset
valueequaltothatresult."
5913,"3.Dividethetotallengthofthefirstandsecondfragments by8.Thethirdfragment
hasanoffsetvalueequaltothatresult."
5914,4.Continue theprocess.Thelastfragment hasamorebitvalueofO.
5915,"Example 20.5
ApackethasarrivedwithanMbitvalueofO.Isthisthefirstfragment, thelastfragment, ora
middlefragment?"
5916,Do weknowifthepacketwasfragmented?
5917,"Solution
IftheMbitis0,itmeansthattherearenomorefragments; thefragment isthelastone.However,
wecannotsayiftheoriginalpacketwasfragmented ornot.Anonfragmented packetisconsid­
eredthelastfragment."
5918,"Example 20.6
Apackethas arrived withanMbitvalueof1.Isthisthefirstfragment, thelastfragment, ora
middlefragment?"
5919,Do weknowifthepacketwasfragmented?
5920,"Solution
IftheMbitis1,itmeansthatthereisatleastonemorefragment."
5921,"Thisfragment canbethefirst
oneoramiddleone,butnotthelastone.Wedon'tknowifitisthefirstoneoramiddleone;we
needmoreinformation (thevalueofthefragmentation offset).SeeExample 20.7.
Example 20.7
ApackethasarrivedwithanMbitvalueof1andafragmentation offsetvalueofO.Isthisthefirst
fragment, thelastfragment, Oramiddlefragment?"
5922,"Solution
BecausetheMbitisl,itiseitherthefirstfragment oramiddleone.Becausetheoffsetvalueis0,
itisthefirstfragment."
5923,"Example 20.8
Apackethasarrivedinwhichtheoffsetvalueis100.Whatisthenumberofthefirstbyte?Dowe
knowthenumberofthelastbyte?594CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Solution
Tofindthenumberofthefirstbyte,wemultiply theoffsetvalueby8.Thismeansthatthefirst
bytenumberis800.Wecannotdetermine thenumberofthelastbyteunlessweknowthelength
ofthedata."
5924,"Example 20.9
Apackethasarrivedinwhichtheoffsetvalueis100,thevalueofHLENis5,andthevalueofthe
tota1length fieldis100.Whatarethenumbersofthefirstbyteandthelastbyte?"
5925,"Solution
Thefirstbytenumberis100x 8=800.Thetotallengthis100bytes,andtheheaderlengthis
20bytes(5x4),whichmeansthatthereare80bytesinthisdatagram."
5926,"Ifthefirstbytenumber
is800,thelastbytenumbermustbe879."
5927,"Checksum
Wediscussed thegeneralideabehindthechecksum andhowitiscalculated inChapter10."
5928,Theimplementation ofthechecksum intheIPv4packetfollowsthesameprinciples.
5929,"First,
thevalueofthechecksum fieldissettoO.Thentheentireheaderisdividedinto16-bit
sections andaddedtogether."
5930,"Theresult(sum)iscomplemented andinsertedintothe
checksum field."
5931,"Thechecksum intheIPv4packetcoversonlytheheader,notthedata.Therearetwo
goodreasonsforthis.First,allhigher-level protocols thatencapsulate dataintheIPv4
datagram haveachecksum fieldthatcoversthewholepacket.Therefore, thechecksum
fortheIPv4datagram doesnothavetochecktheencapsulated data.Second,theheader
oftheIPv4packetchangeswitheachvisitedrouter,butthedatadonot.Sothechecksum
includesonlythepartthathaschanged."
5932,"Ifthedatawereincluded, eachroutermustrecal­
culatethechecksum forthewholepacket,whichmeansanincreaseinprocessing time."
5933,"Example 20.10
Figure20.13showsanexampleofachecksum calculation foranIPv4headerwithoutoptions."
5934,Theheaderisdividedinto16-bitsections.
5935,"Allthesections areaddedandthesumiscomple­
mented.Theresultisinsertedinthechecksum field."
5936,"Options
TheheaderoftheIPv4datagram ismadeoftwoparts:afixedpaltandavariablepart."
5937,"Thefixedpartis20byteslongandwasdiscussed intheprevious section.Thevariable
partcomprises theoptionsthatcanbeamaximum of40bytes."
5938,"Options, asthenameimplies,arenotrequiredforadatagram."
5939,"Theycanbeusedfor
network testinganddebugging."
5940,"Although optionsarenotarequired partoftheIPv4
header,optionprocessing isrequired oftheIPv4software."
5941,"Thismeansthatallimple­
mentations mustbeabletohandleoptionsiftheyarepresentintheheader."
5942,"Thedetaileddiscussion ofeachoptionisbeyondthescopeofthisbook.Wegive
thetaxonomy ofoptionsinFigure20.14andbrieflyexplainthepurposeofeach."
5943,"NoOperation
Ano-operation optionisaI-byteoptionusedasafillerbetweenoptions.SECTION 20.2IPv4 595
Figure20.13Exampleofchecksum calculation inIPv4
4I5I0 28
1 oI0
4I17 {}
10.12.14.5
12.6.7.9
4,5,and0------+ 4 5 00
28------+ 00 1 C
1------+ 0 0 0 1
oand0------+ 0 0 00
4and17------+ 0411
0------+ 0 0 00
10.12------+0A0C
14.5------+0E05
12.6------+0C06
7.9------+0709
Sum------+ 744E
Checksum ------+ 8B B 1
Figure20.14Taxonomy ofoptionsinIPv4
Single-byteNooperation
Endofoption
.Options
Multiple-byteRecordroute
Strictsourceroute
Loosesourceroute
Timestamp
EndofOption
Anend-of-option optionisaI-byteoptionusedforpaddingattheendoftheoption
field.It,however, canonlybeusedasthelastoption."
5944,"RecordRoute
ArecordrouteoptionisusedtorecordtheInternetroutersthathandlethedatagram."
5945,Itcanlistuptoninerouteraddresses.
5946,"Itcanbeusedfordebugging andmanagement
purposes."
5947,"StrictSourceRoute
Astrictsourcerouteoptionisusedbythesourcetopredetermine arouteforthedata­
gramasittravelsthroughtheInternet.Dictation ofaroutebythesourcecanbeuseful596CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
forseveralpurposes."
5948,"Thesendercanchoosearoutewithaspecifictypeofservice,such
asminimum delayormaximum throughput."
5949,"Alternatively, itmaychoosearoutethatis
saferormorereliableforthesender'spurpose.Forexample, asendercanchoosearoute
sothatitsdatagram doesnottravelthroughacompetitor's network."
5950,"Ifadatagram specifies astrictsourceroute,alltheroutersdefinedintheoption
mustbevisitedbythedatagram."
5951,"AroutermustnotbevisitedifitsIPv4addressisnot
listedinthedatagram.Ifthedatagram visitsarouterthatisnotonthelist,thedatagram
isdiscarded andanerrormessage isissued.Ifthedatagram arrivesatthedestination
andsomeoftheentrieswerenotvisited,itwillalsobediscarded andanerrormessage
issued."
5952,"LooseSourceRoute
Aloosesourcerouteoptionissimilartothestrictsourceroute,butitislessrigid.Each
routerinthelistmustbevisited,butthedatagram canvisitotherroutersaswell."
5953,"Timestamp
Atimestamp optionisusedtorecordthetimeofdatagram processing byarouter.The
timeisexpressed inmilliseconds frommidnight, Universal timeorGreenwich mean
time.Knowing thetimeadatagram isprocessed canhelpusersandmanagers trackthe
behavior oftheroutersintheInternet.Wecanestimatethetimeittakesforadatagram
togofromone~outertoanother.Wesayestimatebecause,although allroutersmayuse
Universal time,theirlocalclocksmaynotbesynchronized."
5954,"20.3IPv6
Thenetwork layerprotocol intheTCPIIPprotocol suiteiscurrently IPv4(Internet­
workingProtocol, version4).IPv4provides thehost-to-host communication between
systemsintheInternet."
5955,"Although IPv4iswelldesigned, datacommunication has
evolvedsincetheinception ofIPv4inthe1970s.IPv4hassomedeficiencies (listed
below)thatmakeitunsuitable forthefast-growing Internet."
5956,"oDespiteallshort-term solutions, suchassubnetting, classless addressing, andNAT,
addressdepletion isstillalong-term problemintheInternet."
5957,oTheInternetmustaccommodate real-time audioandvideotransmission.
5958,"Thistype
oftransmission requiresminimum delaystrategies andreservation ofresources not
provided intheIPv4design.oTheInternetmustaccommodate encryption andauthentication ofdataforsome
applications."
5959,Noencryption orauthentication isprovided byIPv4.
5960,"Toovercome thesedeficiencies, IPv6(Internetworking Protocol, version6),also
knownasIPng(Internetworking Protocol, nextgeneration), wasproposed andis
nowastandard."
5961,"InIPv6,theInternetprotocol wasextensively modified toaccommo­
datetheunforeseen growthoftheInternet.TheformatandthelengthoftheIPaddress
werechangedalong with thepacketformat.Relatedprotocols, suchasICMP,werealso
modified."
5962,"Otherprotocols inthenetworklayer,suchasARP,RARP,andIGMP,wereSECTION 20.3IPv6 597
eitherdeletedorincluded intheICMPv6 protocol (seeChapter21).Routingprotocols,
suchasRIPandOSPF(seeChapter22),werealsoslightlymodified toaccommodate
thesechanges."
5963,"Communications expertspredictthatIPv6anditsrelatedprotocols will
soonreplacethecurrentIPversion.InthissectionfirstwediscussIPv6.Thenweexplore
thestrategies usedforthetransition fromversion4toversion6."
5964,"Theadoption ofIPv6hasbeenslow.Thereasonisthattheoriginalmotivation for
itsdevelopment, depletion ofIPv4addresses, hasbeenremedied byshort-term strategies
suchasclassless addressing andNAT.However, thefast-spreading useoftheInternet,
andnewservicessuchasmobileIP,IPtelephony, andIP-capable mobiletelephony, may
eventually requirethetotalreplacement ofIPv4withIPv6."
5965,"Advantages
Thenext-generation IP,orIPv6,hassomeadvantages overIPv4thatcanbesummarized
asfollows:
oLargeraddressspace.AnIPv6addressis128bitslong,aswediscussed inChap­
ter19.Compared withthe32-bitaddressofIPv4,thisisahuge(296)increase in
theaddressspace."
5966,"oBetterheaderformat.IPv6usesanewheaderformatinwhichoptionsaresepa­
ratedfromthebaseheaderandinserted, whenneeded,between thebaseheader
andtheupper-layer data.Thissimplifies andspeedsuptheroutingprocessbecause
mostoftheoptionsdonotneedtobecheckedbyrouters."
5967,oNewoptions.
5968,IPv6hasnewoptionstoallowforadditional functionalities.
5969,oAllowance forextension.
5970,"IPv6isdesigned toallowtheextension oftheprotocolif
requiredbynewtechnologies orapplications."
5971,oSupport forresource allocation.
5972,"InIPv6,thetype-of-service fieldhasbeen
removed, butamechanism (calledjlow label)hasbeenaddedtoenablethesource
torequestspecialhandling ofthepacket.Thismechanism canbeusedtosupport
trafficsuchasreal-time audioandvideo."
5973,oSupport formoresecurity.
5974,"Theencryption andauthentication optionsinIPv6
provideconfidentiality andintegrityofthepacket."
5975,"PacketFormat
TheIPv6packetisshowninFigure20.15.Eachpacketiscomposed ofamandatory base
headerfollowed bythepayload."
5976,"Thepayloadconsistsoftwoparts:optionalextension
headersanddatafromanupperlayer.Thebaseheaderoccupies 40bytes,whereasthe
extension headersanddatafromtheupperlayercontainupto65,535bytesofinformation."
5977,"BaseHeader
Figure20.16showsthebaseheaderwithitseightfields."
5978,"Thesefieldsareasfollows:
oVersion."
5979,"This4-bitfielddefinestheversionnumberoftheIP.ForIPv6,thevalueis6."
5980,oPriority.
5981,"The4-bitpriorityfielddefinesthepriorityofthepacketwithrespectto
trafficcongestion."
5982,"Wewilldiscussthisfieldlater.598CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Figure20.15IPv6datagram headerandpayload
1__'_4_0_b-,---Yt_es_--""I __' u-'---P_to_65_,5_3_5_b Y_te_s -----+.1
Extension headers
(optional)
Figure20.16FormatofanIPv6datagramDatapacketfromupperlayer
I'4bits II_4bits'1-8bits 8bits 8bits..VERIPRlIFlowlabel
Payloadlength --kN~t head;;IHoplimit
::_______________ Sourceaddress
c:~ Destination address-
,'""II.Nextheader Headerlength
,--'c:----
NextheaderIHeaderlengthI .- .'
I----
• •· ··•L,IINextheader' Headerlength
oFlowlabel.Theflowlabelisa3-byte(24-bit)fieldthatisdesigned toprovide
specialhandling foraparticular flowofdata.Wewilldiscussthisfieldlater."
5983,"oPayload length.The2-bytepayloadlengthfielddefinesthelengthoftheIPdata­
gramexcluding thebaseheader."
5984,"oNextheader.Thenextheaderisan8-bitfielddefiningtheheaderthatfollowsthe
baseheaderinthedatagram."
5985,"Thenextheaderiseitheroneoftheoptionalexten­
sionheadersusedbyIPortheheaderofanencapsulated packetsuchasUDPor
TCP.Eachextension headeralsocontainsthisfield.Table20.6showsthevaluesof
nextheaders.Notethatthisfieldinversion4iscalledtheprotocol."
5986,oHoplimit.This8-bithoplimitfieldservesthesamepurposeastheTILfieldinIPv4.
5987,oSourceaddress.
5988,"Thesourceaddressfieldisa16-byte(128-bit) Internetaddress
thatidentifies the originalsourceofthedatagram.SECTION 20.3IPv6 599
Table20.6NextheadercodesforIPv6
Code NextHeader
0Hop-by-hop option
2ICMP
6TCP
17UDP
43Sourcerouting
44Fragmen tation
50Encrypted securitypayload
51Authentication
59Null(nonextheader)
60Destination option
oDestination address."
5989,"Thedestination addressfieldisa16-byte(128-bit) Internet
addressthatusuallyidentifies thefinaldestination ofthedatagram."
5990,"However, if
sourceroutingisused,thisfieldcontainstheaddressofthenextrouter."
5991,"Priority
ThepriorityfieldoftheIPv6packetdefinesthepriorityofeachpacketwithrespectto
otherpacketsfromthesamesource.Forexample, ifoneoftwoconsecutive datagrams
mustbediscarded duetocongestion, thedatagram withthelowerpacketprioritywill
bediscarded."
5992,"IPv6dividestrafficintotwobroadcategories: congestion-controlled and
noncongestion-controlled."
5993,"Congestion-Controlled Traffic Ifasourceadaptsitselftotrafficslowdown when
thereiscongestion, thetrafficisreferred toascongestion-controlled traffic.For
example, TCP,whichusestheslidingwindowprotocol, caneasilyrespondtotraffic.In
congestion-controlled traffic,itisunderstood thatpacketsmayarrivedelayed, lost,or
outoforder.Congestion-controlled dataareassigned priorities from0to7,aslistedin
Table20.7.Apriorityof0isthelowest;apriorityof7isthehighest."
5994,"Table20.7Priorities forcongestion-controlled traffic
Priority Meaning
0Nospecifictraffic
1Background data
2Unattended datatraffic
3Reserved
4Attended bulkdatatraffic
5Reserved
6Interactive traffic
7Controltraffic600 CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Theprioritydescriptions areasfollows:
oNospecifictraffic.Apriorityof0isassigned toapacketwhentheprocessdoes
notdefineapriority."
5995,"oBackground data.Thisgroup(priority 1)definesdatathatareusuallydelivered
inthebackground."
5996,Deliveryofthenewsisagoodexample.
5997,"oUnattended datatraffic.Iftheuserisnotwaiting(attending) forthedatatobe
received, thepacketwillbegivenapriorityof2.E-mailbelongstothisgroup.The
recipient ofane-maildoesnotknowwhenamessage hasarrived.Inaddition, an
e-mailisusuallystoredbeforeitisforwarded."
5998,"Alittlebitofdelayisoflittle
consequence."
5999,"oAttended bulkdatatraffic.Aprotocolthattransfersdatawhiletheuseriswaiting
(attending) toreceivethedata(possibly withdelay)isgivenapriorityof4.FTP
andHTTPbelongtothisgroup."
6000,"oInteractive traffic.Protocols suchasTELNET thatneeduserinteraction are
assigned thesecond-highest priority(6)inthisgroup."
6001,"oControltraffic.Controltrafficisgiventhehighestpriority(7).Routingprotocols
suchasOSPFandRIPandmanagement protocols suchasSNMPhavethispriority."
6002,"Noncongestion-Controlled Traffic Thisreferstoatypeoftrafficthatexpectsmini­
mumdelay.Discarding ofpacketsisnotdesirable."
6003,"Retransmission inmostcasesis
impossible."
6004,"Inotherwords,thesourcedoesnotadaptitselftocongestion."
6005,"Real-time
audioandvideoareexamples ofthistypeoftraffic."
6006,Prioritynumbers from8to15areassigned tononcongestion-controlled traffic.
6007,"Although therearenotyetanyparticular standardassignments forthistypeofdata,the
priorities areusuallybasedonhowmuchthequalityofreceiveddataisaffectedbythe
discarding ofpackets.Datacontaining lessredundancy (suchaslow-fidelity audioor
video)canbegivenahigherpriority(15).Datacontaining moreredundancy (suchas
high-fidelity audioorvideo)aregivenalowerpriority(8).SeeTable20.8.
Table20.8Priorities fornoncongestion-controlled traffic
Priority Meaning
8Datawithgreatestredundancy
..."
6008,".,."
6009,"15Datawithleastredundancy
FlowLabel
Asequence ofpackets,sentfromaparticular sourcetoaparticular destination, thatneeds
specialhandling byroutersiscalledaflowofpackets.Thecombination ofthesource
addressandthevalueoftheflowlabeluniquely definesaflowofpackets."
6010,"Toarouter,aflowisasequence ofpacketsthatsharethesamecharacteristics, such
astraveling thesamepath,usingthesameresources, havingthesamekindofsecurity,
andsoon.Arouterthatsupportsthehandling offlowlabelshasaflowlabeltable.The
tablehasanentryforeachactiveflowlabel; each entrydefinestheservicesrequiredbySECTION 20.3IPv6 601
thecorresponding flowlabel.Whentherouterreceives apacket,itconsults itsflow
labeltabletofindthecorresponding entryfortheflowlabelvaluedefinedinthepacket."
6011,"Itthenprovides thepacketwiththeservicesmentioned intheentry.However, notethat
theflowlabelitselfdoesnotprovidetheinformation fortheentriesoftheflowlabel
table;theinformation isprovided byothermeanssuchasthehop-by-hop optionsor
otherprotocols."
6012,"Initssimplestform,aflowlabelcanbeusedtospeeduptheprocessing ofapacket
byarouter.Whenarouterreceivesapacket,insteadofconsulting theroutingtableand
goingthrougharoutingalgorithm todefinetheaddressofthenexthop,itcaneasily
lookinaflowlabeltableforthenexthop."
6013,"Initsmoresophisticated form,aflowlabelcanbeusedtosupportthetransmission of
real-time audioandvideo.Real-time audioorvideo,particularly indigitalform,requires
resources suchashighbandwidth, largebuffers,longprocessing time,andsoon.A
processcanmakeareservation fortheseresources beforehand toguarantee thatreal-time
datawillnotbedelayedduetoalackofresources."
6014,"Theuseofreal-time dataandthe
reservation oftheseresources requireotherprotocols suchasReal-Time Protocol (RTP)
andResource Reservation Protocol(RSVP)inadditiontoIPv6."
6015,"Toallowtheeffective useofflowlabels,threeruleshavebeendefined:
1.Theflowlabelisassigned toapacketbythesourcehost.Thelabelisarandom
numberbetween 1and224-1.Asourcemustnotreuseaflowlabelforanewflow
whiletheexistingflowisstillactive."
6016,"2.Ifahostdoesnotsupporttheflowlabel,itsetsthisfieldtozero.Ifarouterdoesnot
supporttheflowlabel,itsimplyignoresit."
6017,"3.Allpacketsbelonging tothesameflowhavethesamesource,samedestination,
samepriority,andsameoptions."
6018,"Comparison Between IPv4andIPv6Headers
Table20.9compares IPv4andIPv6headers."
6019,"Table20.9Comparison betweenIPv4andIPv6packetheaders
Comparison
1.Theheaderlengthfieldiseliminated inIPv6becausethelengthoftheheaderisfixedin
thisversion."
6020,"2.Theservicetypefieldiseliminated inIPv6.Thepriorityandflowlabelfieldstogethertake
overthefunctionoftheservicetypefield."
6021,3.Thetotallengthfieldiseliminated inIPv6andreplaced bythepayloadlengthfield.
6022,"4.Theidentification, flag,andoffsetfieldsareeliminated fromthebaseheaderinIPv6.They
areincluded inthefragmentation extension header."
6023,5.TheTTLfieldiscalledhoplimitinIPv6.
6024,6.Theprotocol fieldisreplaced bythenextheaderfield.
6025,"7.Theheaderchecksum iseliminated becausethechecksum isprovided byupper-layer
protocols; itistherefore notneededatthislevel."
6026,"8.TheoptionfieldsinIPv4areimplemented asextension headersinIPv6.602 CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Extension Headers
Thelengthofthebaseheaderisfixedat40bytes.However, togivegreaterfunctionality
totheIPdatagram, thebaseheadercanbefollowed byuptosixextension headers."
6027,"ManyoftheseheadersareoptionsinIPv4.Sixtypesofextension headershavebeen
defined,asshowninFigure20.17."
6028,"Figure20.17 Extension headertypes
PadI
Extension
headersHop-by-hop option
Sourcerouting
Fragmentation
Authentication
Encrypted securitypayload
Destination optionPadN
Jumbopayload
Hop-by-Hop Option
Thehop-by-hop optionisusedwhenthesourceneedstopassinformation toallrouters
visitedbythedatagram."
6029,"Sofar,onlythreeoptionshavebeendefined:Padl,PadN,and
jumbopayload."
6030,"ThePadloptionis1bytelongandisdesigned foralignment pur­
poses.PadNissimilarinconcepttoPadi.Thedifference isthatPadNisusedwhen2or
morebytesisneededforalignment."
6031,"Thejumbopayloadoptionisusedtodefineapay­
loadlongerthan65,535bytes."
6032,"Source Routing Thesourceroutingextension headercombines theconcepts ofthe
strictsourcerouteandtheloosesourcerouteoptionsofIPv4."
6033,"Fragmentation
Theconceptoffragmentation isthesameasthatinIPv4.However, theplacewhere
fragmentation occursdiffers.InIPv4,thesourceorarouterisrequired tofragment if
thesizeofthedatagram islargerthantheMTUofthenetworkoverwhichthedatagram
travels.InIPv6,onlytheoriginalsourcecanfragment."
6034,"AsourcemustuseapathMTU
discovery technique tofindthesmallestMTUsupported byanynetworkonthepath."
6035,Thesourcethenfragments usingthisknowledge.
6036,"Authentication
Theauthentication extension headerhasadualpurpose: itvalidates themessagesender
andensurestheintegrity ofdata.Wediscussthisextension headerwhenwediscussnet­
worksecurityinChapter31.SECTION 20.4TRANSITION FROMIPv4TOIPv6 603
Encrypted SecurityPayload
Theencrypted security payload (ESP)isanextension thatprovides confidentiality
andguardsagainsteavesdropping."
6037,Wediscussthisextension headerinChapter31.
6038,"Destination Option Thedestination optionisusedwhenthesourceneedstopass
information tothedestination only.Intermediate routersarenotpermitted accesstothis
information."
6039,"Comparison Between IPv4OptionsandIPv6Extension Headers
Table20.10compares theoptionsinIPv4withtheextension headersinIPv6."
6040,"Table20.10Comparison betweenIPv4optionsandIPv6extension headers
Comparison
1.Theno-operation andend-of-option optionsinIPv4arereplaced byPadlandPadN
optionsinIPv6."
6041,2.Therecordrouteoptionisnotimplemented inIPv6becauseitwasnotused.
6042,3.Thetimestamp optionisnotimplemented becauseitwasnotused.
6043,4.Thesourcerouteoptioniscalledthesourcerouteextension headerinIPv6.
6044,"5.Thefragmentation fieldsinthebaseheadersectionofIPv4havemovedtothefragmentation
extension headerinIPv6."
6045,6.Theauthentication extension headerisnewinIPv6.
6046,7.Theencrypted securitypayloadextension headerisnewinIPv6.
6047,"20.4TRANSITION FROMIPv4TOIPv6
Because ofthehugenumberofsystems ontheInternet, thetransition fromIPv4
toIPv6cannothappensuddenly."
6048,"Ittakesaconsiderable amountoftimebeforeevery
systemintheInternetcanmovefromIPv4toIPv6.Thetransition mustbesmoothto
preventanyproblems between IPv4andIPv6systems."
6049,"Threestrategies havebeen
devisedbythe!ElFtohelpthetransition (seeFigure20.18)."
6050,"Figure20.18Threetransition strategies604 CHAPTER 20NETWORK LAYER: INTERNET PROTOCOL
DualStack
Itisrecommended thatall hosts, beforemigrating completely toversion6,haveadual
stackofprotocols."
6051,"Inotherwords,astationmustrunIPv4andIPv6simultaneously until
alltheInternetusesIPv6.SeeFigure20.19forthelayoutofadual-stack configuration."
6052,"Figure20.19 Dualstack
oIPv6systemTransport and
application layers
IPv4 IPv6
r ~Underlying
LANorWAN
technology
m T ToIPv4syste
Todetermine whichversiontousewhensendingapackettoadestination, thesource
hostqueriestheDNS.IftheDNSreturnsanIPv4address,thesourcehostsendsanIPv4
packet.IftheDNSreturnsanIPv6address,thesourcehostsendsanIPv6packet."
6053,"Tunneling
Thnneling isastrategyusedwhentwocomputers usingIPv6wanttocommunicate
witheachotherandthepacketmustpassthrougharegionthatusesIPv4.Topass
throughthisregion,thepacketmusthaveanIPv4address.SotheIPv6packetisencap­
sulatedinanIPv4packetwhenitenterstheregion,anditleavesitscapsulewhenit
exitstheregion.ItseemsasiftheIPv6packetgoesthroughatunnelatoneendand
emerges attheotherend.TomakeitclearthattheIPv4packetiscarrying anIPv6
packetasdata,theprotocolvalueissetto41.Tunneling isshowninFigure20.20."
6054,"Figure20.20 Tunneling strategy
IPv6 IPv6
host host
&-------ieDlIS: ~....._----llii~~------t ..1It:i
;;:tt-------&
IPv4regionIPv6regiollSECTION 20.5RECOMMENDED READING 605
HeaderTranslation
Headertranslation isnecessary whenthemajority oftheInternethasmovedtoIPv6
butsomesystemsstilluseIPv4.ThesenderwantstouseIPv6,butthereceiverdoesnot
understand IPv6.Tunneling doesnotworkinthissituation becausethepacketmustbe
intheIPv4formattobeunderstood bythereceiver.Inthiscase,theheaderformatmust
betotallychanged through headertranslation."
6055,"TheheaderoftheIPv6packetiscon­
vertedtoanIPv4header(seeFigure20.21)."
6056,"Figure20.21Headertranslation strategy
iiiIPv6 • I IPv4
host host
&-----;'l..~~I-----_cO~---..., ..1I:i
i:!II,t------&
Header
translation
donehere
Headertranslation usesthemappedaddresstotranslate anIPv6addresstoanIPv4
address.Table20.11listssomerulesusedintransforming anIPv6packetheadertoan
IPv4packetheader."
6057,"Table20.11Headertranslation
HeaderTranslation Procedure
1.TheIPv6mappedaddressischangedtoanIPv4addressbyextracting therightmost 32bits."
6058,2.ThevalueoftheIPv6priorityfieldisdiscarded.
6059,3.ThetypeofservicefieldinIPv4issettozero.
6060,4.Thechecksum forIPv4iscalculated andinsertedinthecorresponding field.
6061,5.TheIPv6flowlabelisignored.
6062,6.Compatible extension headersareconverted tooptionsandinsertedintheIPv4header.
6063,Somemayhavetobedropped.
6064,7.ThelengthofIPv4headeriscalculated andinsertedintothecorresponding field.
6065,8.ThetotallengthoftheIPv4packetiscalculated andinsertedinthecorresponding field.
6066,"20.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext.606CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
Books
IPv4isdiscussed inChapter8of[For06],Chapter3of[Ste94J,Section4.1of[PD03],
Chapter 18of[Sta04],andSection5.6of[Tan03]."
6067,"IPv6isdiscussed inChapter27of
[For06]and[Los04]."
6068,"Sites
owww.ietforg/rfc.html Information aboutRFCs
RFCs
Adiscussion ofIPv4canbefoundinfollowing RFCs:
760,781,791,815,1025,1063,1071,1141,1190, 1191,1624,2113
Adiscussion ofIPv6canbefoundinthefollowing RFCs:
1365,1550,1678,1680,1682,1683,1686,1688,1726, 1752,1826,1883,1884,1886,1887,
1955,2080,2373,2452,2463,2465,2466,2472,2492,2545,2590
20.6KEYTERMS
authentication
baseheader
best-effort delivery
codepoint
connectionless service
connection-oriented service
datagram
destination address
destination option
differentiated services
dualstack
encrypted securitypayload(ESP)
end-of-option option
extension header
flowlabel
fragmentation
fragmentation offset
headerlengthheadertranslation
hoplimit
hop-by-hop option
InternetProtocol (IP)
InternetProtocol, nextgeneration (IPng)
InternetProtocol version4(IPv4)
InternetProtocol version6(IPv6)
jumbopayload
loosesourcerouteoption
maximum transferunit(MTU)
nextheader
noncongestion-controlled traffic
no-operation option
packetpriority
Padl
PadN
pathMTUdiscovery technique
precedencerecordrouteoption
servicetype
sourceaddress
strictsourcerouteoptionSECTION 20.8PRACTICE SET 607
timetolive
timestamp option
tunneling
typeofservice(TOS)
20.7SUMMARY
oIPv4isanunreliable connectionless protocol responsible forsource-to-destination
delivery."
6069,oPacketsintheIPv4layerarecalleddatagrams.
6070,"Adatagram consistsofaheader
(20to60bytes)anddata.Themaximum lengthofadatagram is65,535bytes."
6071,oTheMTUisthemaximum numberofbytesthatadatalinkprotocolcanencapsulate.
6072,MTUsvaryfromprotocoltoprotocol.
6073,"oFragmentation isthedivisionofadatagram intosmallerunitstoaccommodate the
MTUofadatalinkprotocol."
6074,"oTheIPv4datagram headerconsistsofafixed,20-bytesectionandavariableoptions
sectionwithamaximum of40bytes."
6075,oTheoptionssectionoftheIPv4headerisusedfornetworktestinganddebugging.
6076,oThesixIPv4optionseachhaveaspecificfunction.
6077,"Theyareasfollows: filler
betweenoptionsforalignment purposes, padding, recording theroutethedatagram
takes,selection ofamandatory routebythesender,selection ofcertainroutersthat
mustbevisited,andrecording ofprocessing timesatrouters."
6078,"oIPv6,thelatestversionoftheInternetProtocol, hasa128-bitaddressspace,arevised
headerformat,newoptions, anallowance forextension, supportforresource
allocation, andincreased securitymeasures."
6079,oAnIPv6datagram iscomposed ofabaseheaderandapayload.
6080,oExtension headersaddfunctionality totheIPv6datagram.
6081,"oThreestrategies usedtohandlethetransition fromversion4toversion6aredual
stack,tunneling, andheadertranslation."
6082,"20.8PRACTICE SET
ReviewQuestions
1.Whatisthedifference betweenthedeliveryofaframeinthedatalinklayerandthe
deliveryofapacketinthenetworklayer?"
6083,2.Whatisthedifference between connectionless andconnection-oriented services?
6084,WhichtypeofserviceisprovidedbyIPv4?Whichtypeofserviceisprovided byIPv6?
6085,"3.Definefragmentation andexplainwhytheIPv4andIPv6protocols needtofragment
somepackets.Isthereanydifference betweenthetwoprotocols inthismatter?608CHAPTER 20NETWORK LAYER:INTERNET PROTOCOL
4.Explaintheprocedure forchecksum calculation andverification intheIPv4protocol."
6086,WhatpartofanIPv4packetiscoveredinthechecksum calculation?
6087,"Why?Are
options,ifpresent,included inthecalculation?"
6088,"5.ExplaintheneedforoptionsinIPv4andlisttheoptionsmentioned inthischapter
withabriefdescription ofeach."
6089,"6.Compare andcontrastthefieldsinthemainheadersofIPv4andIPv6.Makeatable
thatshowsthepresence orabsenceofeachfield."
6090,7.BothIPv4andIPv6assumethatpacketsmayhavedifferentpriorities orprecedences.
6091,Explainhoweachprotocolhandlesthisissue.
6092,"8.Compare andcontrasttheoptionsinIPv4andtheextension headersinIPv6.Make
atablethatshowsthepresence orabsenceofeach."
6093,9.Explainthereasonfortheelimination ofthechecksum intheIPv6header.
6094,"10.Listthreetransition strategies tomovefromIPv4toIPv6.Explainthedifference
between tunneling anddualstackstrategies duringthetransition period.Whenis
eachstrategyused?"
6095,"Exercises
11.WhichfieldsoftheIPv4headerchangefromroutertorouter?"
6096,"12.Calculate theHLEN(inIPv4)valueifthetotallengthis1200bytes,1176ofwhich
isdatafromtheupperlayer."
6097,13.Table20.5liststheMTUsformanydifferent protocols.
6098,"TheMTUsrangefrom296
to65,535.Whatwouldbetheadvantages ofhavingalargeMTU?Whatwouldbe
theadvantages ofhavingasmallMTU?"
6099,"14.Givenafragmented datagram (inIPv4)withanoffsetof120,howcanyoudetermine
thefirstandlastbytenumbers?"
6100,"15.CanthevalueoftheheaderlengthinanIPv4packetbelessthan5?Whenisit
exactly5?"
6101,16.ThevalueofHLEN inanIPv4datagram is7.Howmanyoptionbytesarepresent?
6102,"17.ThesizeoftheoptionfieldofanIPv4datagram is20bytes.Whatisthevalueof
HLEN?Whatisthevalueinbinary?"
6103,"18.ThevalueofthetotallengthfieldinanIPv4datagram is36,andthevalueofthe
headerlengthfieldis5.Howmanybytesofdataisthepacketcarrying?"
6104,"19.AnIPv4datagram iscarrying 1024bytesofdata.Ifthereisnooptioninformation,
whatisthevalueoftheheaderlengthfield?Whatisthevalueofthetotallength
field?"
6105,"20.Ahostissending100datagrams toanotherhost.Iftheidentification numberofthe
firstdatagram is1024,whatistheidentification numberofthelast(inIPv4)?"
6106,"21.AnIPv4datagram arriveswithfragmentation offsetof0andanMbit(morefragment
bit)ofO.Isthisafirstfragment, middlefragment, orlastfragment?"
6107,"22.AnIPv4fragment hasarrivedwithanoffsetvalueof100.Howmanybytesofdata
wereoriginally sentbythesourcebeforethedatainthisfragment?SECTION 20.8PRACTICE SET 609
23.AnIPv4datagram hasarrivedwiththefollowing information intheheader(in
hexadecimal) :
Ox4500005400035850200600007C4E03 02B4OEOF02
a.Isthepacketcorrupted?"
6108,b.Arethereanyoptions?
6109,c.Isthepacketfragmented?
6110,d.Whatisthesizeofthedata?
6111,e.Howmanymorerouterscanthepackettravelto?
6112,f.Whatistheidentification numberofthepacket?
6113,g.Whatisthetypeofservice?
6114,"24.InanIPv4datagram, theMbitis0,thevalueofHLENis5,thevalueoftotal
lengthis200,andtheoffsetvalueis200.Whatisthenumberofthefirstbyteand
numberofthelastbyteinthisdatagram?"
6115,"Isthisthelastfragment, thefirstfragment,
oramiddlefragment?"
6116,"Research Activities
25.Findoutwhytherearetwosecurityprotocols (AHandESP)inIPv6.CHAPTER 21
Network Layer:AddressMapping,
ErrorReporting, andMulticasting
InChapter20wediscussed theInternetProtocol (IP)asthemainprotocolatthenetwork
layer.IPwasdesigned asabest-effort deliveryprotocol, butitlackssomefeaturessuch
asflowcontrolanderrorcontrol.Itisahost-to-host protocol usinglogicaladdressing."
6117,"TomakeIPmoreresponsive tosomerequirements intoday'sintemetworking, weneed
thehelpofotherprotocols."
6118,Weneedprotocols tocreateamapping between physical andlogicaladdresses.
6119,IPpacketsuselogical(host-to-host) addresses.
6120,"Thesepackets,however, needtobeencap­
sulatedinaframe,whichneedsphysical addresses (node-to-node)."
6121,"Wewillseethata
protocolcalledARP,theAddress Resolution Protocol, isdesigned forthispurpose.We
sometimes needreversemapping-mapping aphysical addresstoalogicaladdress.For
example, whenbootingadisklessnetworkorleasinganIPaddresstoahost.Threepro­
tocolsaredesigned forthispurpose: RARP,BOOTp, andDHCP."
6122,"LackofflowanderrorcontrolintheInternetProtocol hasresultedinanotherpro­
tocol,ICMP,thatprovides alerts.Itreportscongestion andsometypesoferrorsinthe
networkordestination host."
6123,"IPwasoriginally designed forunicastdelivery, onesourcetoonedestination."
6124,"Asthe
Internethasevolved,theneedformulticast delivery, onesourcetomanydestinations, has
increased tremendously."
6125,IGMPgivesIPamulticast capability.
6126,"Inthischapter,wediscusstheprotocols ARP,RARP,BOOTP, DHCP,andIGMP
insomedetail.WealsodiscussICMPv6, whichwillbeoperational whenIPv6isoper­
ational.ICMPv6 combines ARP,ICMP,andIGMPinoneprotocol."
6127,"21.1ADDRESS MAPPING
Aninternetismadeofacombination ofphysicalnetworks connected byinternetworking
devicessuchasrouters.Apacketstartingfromasourcehostmaypassthroughseveral
different physical networks beforefinallyreaching thedestination host.Thehostsand
routersarerecognized atthenetworklevelbytheirlogical(IP)addresses."
6128,"However, packetspassthroughphysical networks toreachthesehostsandrouters."
6129,"Atthephysical level,thehostsandroutersarerecognized bytheirphysical addresses."
6130,"611612CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Aphysical address isalocaladdress."
6131,Itsjurisdiction isalocalnetwork.
6132,"Itmustbe
uniquelocally,butisnotnecessarily uniqueuniversally."
6133,"Itiscalledaphysical address
becauseitisusually(butnotalways)implemented inhardware."
6134,"Anexampleofaphysical
addressisthe48-bitMACaddressintheEthernet protocol, whichisimprinted onthe
NICinstalled inthehostorrouter."
6135,Thephysical addressandthelogicaladdressaretwodifferent identifiers.
6136,"Weneed
bothbecauseaphysical network suchasEthernet canhavetwodifferent protocols at
thenetworklayersuchasIPandIPX(Novell) atthesametime.Likewise, apacketata
networklayersuchasIPmaypassthroughdifferent physicalnetworks suchasEthernet
andLocalTalk (Apple)."
6137,"Thismeansthatdelivery ofapackettoahostorarouterrequires twolevelsof
addressing: logicalandphysical."
6138,"Weneedtobeabletomapalogicaladdresstoitscor­
responding physical addressandviceversa.Thesecanbedonebyusingeitherstaticor
dynamic mapping."
6139,"Staticmapping involvesinthecreationofatablethatassociates alogicaladdress
withaphysicaladdress.Thistableisstoredineachmachineonthenetwork."
6140,"Eachmachine
thatknows,forexample, theIPaddressofanothermachine butnotitsphysical address
canlookitupinthetable.Thishassomelimitations becausephysical addresses may
changeinthefollowing ways:
1.Amachine couldchangeitsNIC,resulting inanewphysical address."
6141,"2.InsomeLANs,suchasLocalTalk, thephysical addresschangeseverytimethe
computer isturnedon."
6142,"3.Amobilecomputer canmovefromonephysical networktoanother,resulting ina
changeinitsphysicaladdress."
6143,"Toimplement thesechanges, astaticmapping tablemustbeupdatedperiodically."
6144,"This
overhead couldaffectnetworkperformance."
6145,"Indynamic mapping eachtimeamachineknowsoneofthetwoaddresses (logical
orphysical), itcanuseaprotocol tofindtheotherone."
6146,"Mapping LogicaltoPhysical Address: ARP
Anytime ahostorarouterhasanIPdatagram tosendtoanotherhostorrouter,ithasthe
logical(IP)addressofthereceiver."
6147,"Thelogical(IP)addressisobtained fromtheDNS
(seeChapter25)ifthesenderisthehostoritisfoundinaroutingtable(seeChapter22)
ifthesenderisarouter.ButtheIPdatagram mustbeencapsulated inaframetobeableto
passthroughthephysicalnetwork."
6148,"Thismeansthatthesenderneedsthephysicaladdress
ofthereceiver.ThehostortheroutersendsanARPquerypacket.Thepacketincludes
thephysical andIPaddresses ofthesenderandtheIPaddressofthereceiver."
6149,"Because
thesenderdoesnotknowthephysical addressofthereceiver, thequeryisbroadcast
overthenetwork(seeFigure21.1)."
6150,"Everyhostorrouteronthenetworkreceivesandprocesses theARPquerypacket,
butonlytheintendedrecipient recognizes itsIPaddressandsendsbackanARPresponse
packet.Theresponse packetcontainstherecipient's IPandphysicaladdresses."
6151,"Thepacket
isunicastdirectlytotheinquirerbyusingthephysical addressreceived inthequery
packet.SECTION 21.1ADDRESS MAPPING 613
Figure21.1ARPoperation
Looking forphysical addressofa
nodewithIPaddress141.23.56.23
Request
SystemA
a.ARPrequestisbroadcast
SystemA
b.ARPreplyisunicastThenodephysicaladdress
isA4:6E:F4:59:83:AB
ReplySystemB
SystemB
InFigure21.1a,thesystemontheleft(A)hasapacketthatneedstobedelivered to
anothersystem(B)withIPaddress141.23.56.23."
6152,"SystemAneedstopassthepacketto
itsdatalinklayerfortheactualdelivery, butitdoesnotknowthephysical addressof
therecipient.ItusestheservicesofARPbyaskingtheARPprotocoltosendabroad­
castARPrequestpackettoaskforthephysicaladdressofasystemwithanIF address
of141.23.56.23."
6153,"Thispacketisreceivedbyeverysystemonthephysicalnetwork, butonlysystemB
willanswerit,asshowninFigure21.1b.SystemBsendsanARPreplypacketthat
includesitsphysicaladdress.NowsystemAcansendallthepacketsithasforthisdes­
tinationbyusingthephysicaladdressitreceived."
6154,"CacheMemory
UsingARPisinefficient ifsystemAneedstobroadcast anARPrequestforeachIP
packetitneedstosendtosystemB.Itcouldhavebroadcast theIPpacketitself.ARP
canbeusefuliftheARPreplyiscached(keptincachememoryforawhile)becausea
systemnormally sendsseveralpacketstothesamedestination."
6155,"Asystemthatreceives
anARPreplystoresthemapping inthecachememoryandkeepsitfor20to30minutes
unlessthespaceinthecacheisexhausted."
6156,"BeforesendinganARPrequest,thesystem
firstchecksitscachetoseeifitcanfindthemapping."
6157,"PacketFormat
Figure21.2 shows theformatofanARPpacket.614CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Figure21.2ARPpacket
32bits
8bits
lI~8bits 16bitsI
I
I
I
_I
Hardware Type Protocol Type
Hardware Protocol Operation
length length RequestI,Reply2
Senderhardware address
(Forexample, 6bytesforEthernet)
Senderprotocoladdress
(Forexample, 4bytesforIP)
Targethardware address
(Forexample, 6bytesforEthernet)
(Itisnotfilledinarequest)
Targetprotocoladdress
(Forexample, 4bytesforIP)
Thcfieldsarcasfollows:
oHardware type.Thisisa16-bitfielddefiningthetypeofthenetworkonwhich
ARPisrunning."
6158,"EachLANhasbeenassigned anintegerbasedonitstype.For
example, Ethernetisgiventype1.ARPcanbeusedonanyphysicalnetwork.oProtocol type.Thisisa16-bitfielddefiningtheprotocol."
6159,"Forexample, thevalue
ofthisfieldfortheIPv4protocolis080016,ARPcanbeused with anyhigher-level
protocol."
6160,"oHardware length.Thisisan8-bitfielddefiningthelengthofthephysicaladdress
inbytes.Forexample, forEthernetthevalueis6."
6161,"oProtocol length.Thisisan8-bitfielddefiningthelengthofthelogicaladdressin
bytes.Forexample, fortheIPv4protocolthevalueis4."
6162,oOperation.
6163,"Thisisa16-bitfielddefiningthetypeofpacket.Twopackettypesare
defined:ARPrequest(1)andARP reply(2)."
6164,oSenderhardware address.
6165,"Thisisavariable-length fielddefining thephysical
addressofthesender.Forexample, forEthernet thisfieldis6byteslong."
6166,oSenderprotocol address.
6167,"Thisisavariable-length fielddefiningthelogical(for
example, IP)addressofthe sender."
6168,"FortheIPprotocol, thisfieldis4byteslong.oTargethardware address."
6169,"Thisisavariable-length fielddefining thephysical
addressofthetarget.Forexample, forEthernetthisfieldis6byteslong.ForanARP
requestmessage, thisfieldisalIOsbecausethesenderdoesnotknowthephysical
addressofthetarget."
6170,oTargetprotocol address.
6171,"Thisisavariable-length fielddefiningthelogical(for
example, IP)addressofthetarget.FortheIPv4protocol, thisfieldis4byteslong.SECTION 21.1ADDRESS MAPPING 615
Encapsulation
AnARPpacketisencapsulated directlyintoadatalinkframe.Forexample, inFigure21.3
anARPpacketisencapsulated inanEthernetframe.Notethatthetypefieldindicates that
thedatacarriedbytheframeareanARPpacket."
6172,"Figure21.3Encapsulation ofARPpacket
ARPrequestorreplypacket
Preamble
andSPD
8bytes 6bytes 6bytes 2bytesData
4bytes
Operation
LetusseehowARPfunctions onatypicalinternet.Firstwedescribethestepsinvolved."
6173,"ThenwediscussthefourcasesinwhichahostorrouterneedstouseARP.Thesearethe
stepsinvolved inanARPprocess:
1.ThesenderknowstheIPaddressofthetarget.Wewillseehowthesenderobtains
thisshortly."
6174,"2.IPasksARPtocreateanARPrequestmessage, fillinginthesenderphysicaladdress,
thesenderIPaddress,andthetargetIPaddress.Thetargetphysicaladdressfieldis
filledwithOs.
3.Themessage ispassedtothedatalinklayerwhereitisencapsulated inaframeby
usingthephysical addressofthesenderasthesourceaddressandthephysical
broadcast addressasthedestination address."
6175,"4.Everyhostorrouterreceivestheframe.Because theframecontains abroadcast
destination address, allstationsremovethemessage andpassittoARP.All
machines excepttheonetargeteddropthepacket.Thetargetmachine recognizes
itsIPaddress."
6176,"5.Thetargetmachine replieswithanARPreplymessage thatcontains itsphysical
address.Themessageisunicast."
6177,"6.Thesenderreceivesthereplymessage.Itnowknowsthephysical addressofthe
targetmachine."
6178,"7.TheIPdatagram, whichcarriesdataforthetargetmachine, isnowencapsulated in
aframeandisunicasttothedestination."
6179,"FourDifferent Cases
Thefollowing arefourdifferent casesinwhichtheservicesofARPcanbeused(see
Figure21.4)."
6180,"1.Thesenderisahostandwantstosendapackettoanotherhostonthesamenet­
work.Inthiscase,thelogicaladdressthatmustbemappedtoaphysicaladdressis
thedestination IP address inthedatagram header.616CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Figure21.4FourcasesusingARP
TargetIPaddress:
Destination addressintheIPdatagram
Sender
LAN
Receiver
Case1.Ahosthasapackettosendto
anotherhostonthesamenetwork."
6181,"TargetIFaddress:
IFaddressoftheappropriate router
foundintheroutingtable
Sender
~...)a~
LAN::;;."
6182,"Receiver
Case3.Arouterreceivesapackettobesent
toahostonanothernetwork.Itmustfirst
bedelivered totheappropriate router.TargetIPaddress:
IPaddressofarouter
Sender
LAN
Case2.Ahostwantstosendapacketto
anotherhostonanothernetwork."
6183,Itmustfirstbedelivered toarouter.
6184,"TargetIPaddress:
Destination addressintheIPdatagram
Sender
~.."
6185,"~LAN =""'""'-
Receiver
Case4.Arouterreceivesapackettobesent
toahostonthesamenetwork."
6186,2.Thesenderisahostandwantstosendapackettoanotherhostonanothernetwork.
6187,"Inthiscase,thehostlooksatitsroutingtableandfindstheIPaddressofthenext
hop(router)forthisdestination."
6188,"Ifitdoesnothavearoutingtable,itlooksforthe
IPaddressofthedefaultrouter.TheIPaddressoftherouterbecomes thelogical
addressthatmustbemappedtoaphysicaladdress."
6189,"3.Thesenderisarouterthathasreceived adatagram destinedforahostonanother
network."
6190,"Itchecksitsrouting table andfindstheIPaddressofthenextrouter.The
IPaddressofthenextrouterbecomes thelogicaladdressthatmustbemappedtoa
physicaladdress."
6191,"4.Thesenderisarouterthathasreceivedadatagram destinedforahostonthesame
network."
6192,"Thedestination IPaddressofthedatagram becomes thelogicaladdress
thatmustbemappedtoaphysicaladdress."
6193,AnARPrequestisbroadcast; anARPreplyisunicast.
6194,"Example 21.1
AhostwithIPaddress130.23.43.20 andphysical addressB2:34:55: 10:22:10hasapacketto
sendtoanotherhostwithIPaddress130.23.43.25 andphysical addressA4:6E:F4:59:83:AB
(whichisunknown tothefirsthost).ThetwohostsareonthesameEthernet network."
6195,"Showthe
ARPrequestandreplypacketsencapsulated inEthernetframes.SECTION 21.1ADDRESS MAPPlNG 617
Solution
Figure21.5showstheARPrequestandreplypackets.NotethattheARPdatafieldinthiscaseis
28bytes,andthattheindividual addresses donotfitinthe4-byteboundary."
6196,"Thatiswhywedo
notshowtheregular4-byteboundaries fortheseaddresses."
6197,"Figure21.5Example21.1,anARPrequestandreply
130.23.43.20
ARPRequest
OxOOOI Ox0800
Ox06Ox04 OxOOOl
OxB23455102210
130.23.43.20
OxOOOOOOOOOOOO
130.23.43.25 ARPReply
r
TimeOxOOOl IOx0800
Ox06IOx04IOxOO02
I ......-OxA.t6EF45983AB HI130.23.43.25I
I I
I OxB2345510221O I
I 130.23.43.20 I
I Iy
Time
ProxyARP
Atechnique calledproxyARPisusedtocreateasubnetting effect.AproxyARPisan
ARPthatactsonbehalfofasetofhosts.Whenever arouterrunningaproxyARP
receives anARPrequestlookingfortheIPaddressofoneofthesehosts,therouter
sendsanARPreplyannouncing itsownhardware (physical) address.Aftertherouter
receivestheactualIPpacket,itsendsthepackettotheappropriate hostorrouter."
6198,Letusgiveanexample.
6199,"InFigure21.6theARPinstalled ontheright-hand host
willansweronlytoanARPrequestwithatargetIPaddressof141.23.56.23."
6200,"Figure21.6ProxyARP
141.23.56.21 141.23.56.22 141.23.56.23
r r r
AddedsubnetworkTheproxyARProuterreplies
toanyARPrequestreceived
fordestinations 141.23.56.21,
141.23.56.22, and141.23.56.23."
6201,"ProxyARP
router
Request
Routerorhost618CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
However, theadministrator mayneedtocreateasubnetwithoutchanging the
wholesystemtorecognize subnettedaddresses."
6202,"Onesolutionistoaddarouterrunning
aproxyARP.Inthiscase,therouteractsonbehalfofallthehostsinstalledonthesubnet."
6203,"Whenitreceives anARPrequestwithatargetIPaddressthatmatches theaddress
ofoneofitsproteges (141.23.56.21, 141.23.56.22, or141.23.56.23), itsendsanARP
replyandannounces itshardware addressasthetarget hardware address."
6204,"Whenthe
routerreceivestheIPpacket,itsendsthepackettotheappropriate host."
6205,"Mapping Physical toLogicalAddress: RARP,BOOTP, andDHCP
Thereareoccasions inwhichahostknowsitsphysical address, butneedstoknowits
logicaladdress.Thismayhappenintwocases:
1.Adisklessstationisjustbooted.Thestationcanfinditsphysicaladdressbychecking
itsinterface, butitdoesnotknowitsIPaddress."
6206,"2.Anorganization doesnothaveenoughIPaddresses toassigntoeachstation;itneeds
toassignIPaddresses ondemand."
6207,"Thestationcansenditsphysical addressand
askforashorttimelease."
6208,"RARP
ReverseAddressResolution Protocol (RARP) findsthelogicaladdressforamachine
thatknowsonlyitsphysical address.Eachhostorrouterisassigned oneormorelogical
(IP)addresses, whichareuniqueandindependent ofthephysical (hardware) addressof
themachine."
6209,"TocreateanIPdatagram, ahostorarouterneedstoknowitsownIP
addressoraddresses."
6210,"TheIPaddressofamachine isusuallyreadfromitsconfiguration
filestoredonadiskfile."
6211,"However, adiskless machine isusuallybootedfromROM,whichhasminimum
booting information."
6212,TheROMisinstalled bythemanufacturer.
6213,"Itcannotinclude
theIPaddressbecause theIPaddresses onanetwork areassigned bythenetwork
administrator."
6214,"Themachine cangetitsphysical address(byreadingitsNIC,forexample), which
isuniquelocally.Itcanthenusethephysical addresstogetthelogicaladdressbyusing
theRARPprotocol."
6215,ARARPrequestiscreatedandbroadcast onthelocalnetwork.
6216,"Anothermachine onthelocalnetworkthatknowsalltheIPaddresses willrespondwith
aRARPreply.Therequesting machine mustberunningaRARPclientprogram; the
responding machine mustberunningaRARPserverprogram."
6217,"ThereisaseriousproblemwithRARP:Broadcasting isdoneatthedatalinklayer.The
physicalbroadcast address,allisinthecaseofEthernet, doesnotpasstheboundaries of
anetwork."
6218,"Thismeansthatifanadministrator hasseveralnetworks orseveralsubnets,it
needstoassignaRARPserverforeachnetworkorsubnet.ThisisthereasonthatRARP
isalmostobsolete."
6219,"1\voprotocols, BOOTPandDHCp,arereplacing RARP."
6220,"BOOTP
TheBootstrap Protocol (BOOTP) isaclient/server protocol designed toprovide
physical addresstologicaladdressmapping."
6221,BOOTPisanapplication layerprotocol.
6222,"Theadministrator mayputtheclientandtheserveronthesamenetworkorondifferentSECTION 21.1ADDRESS MAPPING 619
networks, asshowninFigure21.7.BOOTPmessages areencapsulated inaUDPpacket,
andtheUDPpacketitselfisencapsulated inanIPpacket."
6223,"Figure21.7BOOTPclientandserveronthesameanddifferent network
DBOOTP
ClientBOOTPD
Server
IRequest~~ Reply
a.Clientandserveronthesamenetwork
c::=Jo+
Broadcast
requestserver
DBOOTP
c:::=::Jo+
Unicast
requestInternetRelayagent
--~'"" ......I ""-
I \, \
\ I
\ I
"" i' ......"
6224,"/~.--DBOOTP
Client
b.Clientandserverondifferent networks
ThereadermayaskhowaclientcansendanIPdatagram whenitknowsneither
itsownIPaddress(thesourceaddress) northeserver'sIPaddress(thedestination
address)."
6225,"TheclientsimplyusesallasasthesourceaddressandallIsasthedestination
address."
6226,"Oneoftheadvantages ofBOOTP overRARPisthattheclientandserverare
application-layer processes."
6227,"Asinotherapplication-layer processes, aclientcanbein
onenetworkandtheserverinanother,separated byseveralothernetworks."
6228,"However,
thereisoneproblemthatmustbesolved.TheBOOTPrequestisbroadcast becausethe
clientdoesnotknowtheIPaddressoftheserver.Abroadcast IPdatagram cannotpass
throughanyrouter.Tosolvetheproblem, thereisaneedforanintermediary."
6229,"Oneofthe
hosts(orarouterthatcanbeconfigured tooperateattheapplication layer)canbeused
asarelay.Thehostinthiscaseiscalledarelayagent.Therelayagentknowstheunicast
addressofaBOOTPserver.Whenitreceivesthistypeofpacket,itencapsulates the
messageinaunicastdatagram andsendstherequesttotheBOOTPserver.Thepacket,620CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
carryingaunicastdestination address,isroutedbyanyrouterandreachestheBOOTP
server.TheBOOTPserverknowsthemessagecomesfromarelayagentbecauseoneof
thefieldsintherequestmessage definestheIPaddressoftherelayagent.Therelay
agent,afterreceiving thereply,sendsittotheBOOTPclient."
6230,"DHCP
BOOTP isnotadynamic configuration protocol."
6231,"Whenaclientrequests itsIP
address,theBOOTPserverconsultsatablethatmatchesthephysicaladdressoftheclient
withitsIPaddress.Thisimpliesthatthebindingbetweenthephysicaladdressandthe
IPaddressoftheclientalreadyexists.Thebindingispredetermined."
6232,"However, whatifahostmovesfromonephysicalnetworktoanother?"
6233,"Whatifa
hostwantsatemporary IPaddress?"
6234,"BOOTPcannothandlethesesituations becausethe
bindingbetweenthephysicalandIPaddresses isstaticandfixedinatableuntilchanged
bytheadministrator."
6235,BOOTPisastaticconfiguration protocol.
6236,"TheDynamic HostConfiguration Protocol (DHCP) hasbeendevisedtoprovide
staticanddynamic addressallocation thatcanbemanualorautomatic."
6237,DHCPprovides staticanddynamic addressallocation thatcanbemanualorautomatic.
6238,"StaticAddress Allocation InthiscapacityDHCPactsasBOOTPdoes.Itisbackward­
compatible withBOOTP,whichmeansahostrunningtheBOOTPclientcanrequesta
staticaddressfromaDHCPserver.ADHCPserverhasadatabase thatstatically binds
physicaladdresses toIPaddresses."
6239,"Dynamic Address Allocation DHCPhasaseconddatabase withapoolofavailable
IPaddresses."
6240,ThisseconddatabasemakesDHCPdynamic.
6241,"WhenaDHCPclientrequests
atemporary IPaddress, theDHCPservergoestothepoolofavailable (unused) IP
addresses andassignsanIPaddressforanegotiable periodoftime."
6242,"WhenaDHCPclientsendsarequesttoaDHCPserver,theserverfirstchecksits
staticdatabase.Ifanentrywiththerequested physicaladdressexistsinthestaticdata­
base,thepermanent IPaddressoftheclientisreturned."
6243,"Ontheotherhand,iftheentry
doesnotexistinthestaticdatabase, theserverselectsanIPaddressfromtheavailable
pool,assignstheaddresstotheclient,andaddstheentrytothedynamic database."
6244,"Thedynamic aspectofDHCPisneededwhenahostmovesfromnetworktonet­
workorisconnected anddisconnected fromanetwork(asisasubscriber toaservice
provider)."
6245,DHCPprovides temporary IPaddresses foralimitedtime.
6246,Theaddresses assigned fromthepoolaretemporary addresses.
6247,"TheDHCPserver
issuesaleaseforaspecifictime.Whentheleaseexpires,theclientmusteitherstop
usingtheIPaddressorrenewthelease.Theserverhastheoptiontoagreeordisagree
withtherenewal.Iftheserverdisagrees, theclientstopsusingtheaddress."
6248,"ManualandAutomatic Configuration OnemajorproblemwiththeBOOTPprotocol
isthatthetablemapping theIPaddresses tophysicaladdresses needstobemanually
configured."
6249,"ThismeansthateverytimethereisachangeinaphysicalorIPaddress,the
administrator needstomanually enterthechanges."
6250,"DHCP,ontheotherhand,allows
bothmanualandautomatic configurations."
6251,"Staticaddresses arecreated manually~ dynamic
addresses arecreatedautomatically.SECTION 21.2ICMP 621
21.2ICMP
Asdiscussed inChapter20,theIPprovides unreliable andconnectionless datagram
delivery.Itwasdesigned thiswaytomakeefficientuseofnetworkresources."
6252,"TheIP
protocol isabest-effort delivery servicethatdelivers adatagram fromitsoriginal
sourcetoitsfinaldestination."
6253,"However, ithastwodeficiencies: lackoferrorcontroland
lackofassistance mechanisms."
6254,TheIPprotocolhasnoerror-reporting orerror-correcting mechanism.
6255,"Whathappens
ifsomething goeswrong?Whathappensifaroutermustdiscardadatagram becauseit
cannotfindaroutertothefinaldestination, orbecausethetime-to-live fieldhasazero
value?Whathappensifthefinaldestination hostmustdiscardallfragments ofadatagram
becauseithasnotreceived allfragments withinapredetermined timelimit?Theseare
examples ofsituations whereanerrorhasoccurred andtheIPprotocolhasnobuilt-in
mechanism tonotifytheoriginalhost."
6256,"TheIPprotocol alsolacksamechanism forhostandmanagement queries.Ahost
sometimes needstodetermine ifarouteroranotherhostisalive.Andsometimes anet­
workadministrator needsinformation fromanotherhostorrouter."
6257,"TheInternetControlMessageProtocol(ICMP)hasbeendesigned tocompensate
fortheabovetwodeficiencies."
6258,Itisacompanion totheIPprotoco1.
6259,"TypesofMessages
ICMPmessages aredividedintotwobroadcategories: error-reporting messages and
querymessages."
6260,"Theerror-reporting messages reportproblems thatarouterorahost(destination)
mayencounterwhen itprocesses anIPpacket."
6261,"Thequerymessages, whichoccurinpairs,helpahostoranetworkmanager get
specificinformation fromarouteroranotherhost.Forexample, nodescandiscover
theirneighbors."
6262,"Also,hostscandiscover andlearnaboutroutersontheirnetwork, and
routerscanhelpanoderedirectitsmessages."
6263,"Message Format
AnICMPmessage hasan8-byteheaderandavariable-size datasection.Although the
generalformatoftheheaderisdifferentforeachmessagetype,thefirst4bytesarecom­
montoall.AsFigure21.8shows,thefirstfield,ICMPtype,definesthetypeofthe
Figure21.8Generalformat of[CM?messages
8bits 8bits 8bits 8bits
TypeICodeIChecksum
Restoftheheader
Datasection622CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
message."
6264,"Thecodefieldspecifies thereasonfortheparticular message type.Thelast
common fieldisthechecksum field(tobediscussed laterinthechapter)."
6265,"Therestofthe
headerisspecificforeachmessage type."
6266,"The data sectioninerrormessages carriesinformation forfindingtheoriginal
packetthathadtheerror.Inquerymessages, thedatasectioncarriesextrainformation
basedonthetypeofthequery."
6267,"ErrorReporting
Oneofthemainresponsibilities ofICMPistoreporterrors.Although technology has
produced increasingly reliabletransmission media,errorsstillexistandmustbehandled."
6268,"IP,asdiscussed inChapter20,isanunreliable protocol."
6269,"Thismeansthaterrorchecking
anderrorcontrolarenotaconcernofIP.ICMPwasdesigned, inpart,tocompensate for
thisshortcoming."
6270,"However, ICMPdoesnotcorrecterrors-it simplyreportsthem.Error
correction islefttothehigher-level protocols."
6271,"Errormessages arealwayssenttotheorig­
inalsourcebecausetheonlyinformation available inthedatagram abouttherouteisthe
sourceanddestination IPaddresses."
6272,"ICMPusesthesourceIPaddresstosendtheerror
messagetothesource(originator) ofthedatagram."
6273,ICMPalwaysreportserrormessages totheoriginalsource.
6274,"Fivetypesoferrorsarehandled: destination unreachable, sourcequench,time
exceeded, parameter problems, andredirection (seeFigure21.9)."
6275,"Figure21.9Error-reporting messages
Error
reporting
Time
exceeded
Type:11 Type:5
Thefollowing areimportant pointsaboutICMPerrormessages:
oNoICMPerrormessage willbegenerated inresponse toadatagram carrying an
ICMPerrormessage."
6276,"DNoICMPerrormessage willbegenerated forafragmented datagram thatisnot
thefirstfragment."
6277,"DNoIeMPerrormessage willbegenerated foradatagram havingamulticast
address."
6278,"DNoICMPerrormessage willbegenerated foradatagram havingaspecialaddress
suchas127.0.0.0 or0.0.0.0.SECTION 21.2ICMP 623
Notethatallerrormessages containadatasectionthatincludestheIPheaderofthe
originaldatagram plusthefirst8bytesofdatainthatdatagram."
6279,"Theoriginaldatagram
headerisaddedtogivetheoriginalsource,whichreceivestheerrormessage, informa­
tionaboutthedatagram itself.The8bytesofdataareincluded because, aswewillsee
inChapter23onUDPandTCPprotocols, thefirst8bytesprovideinformation about
theportnumbers (UDPandTCP)andsequence number(TCP).Thisinformation is
neededsothesourcecaninformtheprotocols (TCPorUDP)abouttheerror.ICMP
formsanerrorpacket,whichisthenencapsulated inanIPdatagram (seeFigure21.10)."
6280,"Figure21.10Contentsofdatafieldfortheerrormessages
8 : Restof
bytes IIPdataReceived datagram
ICMP
header.-- ~~---~_-_----J8 I
bytes :ICMPpacket
~_-~~~~j
....---------;-""c-+----""""""""""'~""""""""""_m 8 I
bytes :SentIPdatagram ___ -'===~ J
Destination Unreachable
Whenaroutercannotrouteadatagram orahostcannotdeliveradatagram, thedatagram
isdiscarded andtherouterorthehostsendsadestination-unreachable message backto
thesourcehostthatinitiatedthedatagram."
6281,"Notethatdestination-unreachable messages
canbecreatedbyeitherarouterorthedestination host."
6282,"SourceQuench
TheIPprotocol isaconnectionless protocol."
6283,"Thereisnocommunication between the
sourcehost,whichproduces thedatagram, therouters,whichforwardit,andthedestina­
tionhost,whichprocesses it.Oneoftheramifications ofthisabsenceofcommunication
isthelackofflowcontrol.IPdoesnothaveaflowcontrolmechanism embedded inthe
protocol."
6284,"Thelackofflowcontrolcancreateamajorproblem intheoperation ofIP:
congestion."
6285,"Thesourcehostneverknowsiftheroutersorthedestination hosthasbeen
overwhelmed withdatagrams."
6286,"Thesourcehostneverknowsifitisproducing datagrams
fasterthancanbeforwarded byroutersorprocessed bythedestination host."
6287,Thelackofflowcontrolcancreatecongestion inroutersorthedestination host.
6288,"Arouterorahosthasalimited-size queue(buffer)forincoming datagrams waitingto
beforwarded (inthecaseofarouter)ortobeprocessed (inthecaseofahost).Ifthe
datagrams arereceived muchfasterthantheycanbeforwarded orprocessed, the
queuemayoverflow."
6289,"Inthiscase,therouterorthehosthasnochoicebuttodiscard
someofthedatagrams."
6290,"Thesource-quench message inICMPwasdesigned toadda
kindofflowcontroltotheIP.Whenarouterorhostdiscards adatagram duetocon­
gestion,itsendsasource-quench message tothesenderofthedatagram."
6291,"Thismessage
hastwopurposes."
6292,"First,itinformsthesourcethatthedatagram hasbeendiscarded."
6293,"Second,itwarnsthesourcethatthereiscongestion somewhere inthepathandthatthe
sourceshouldslowdown(quench) thesendingprocess.624CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
TimeExceeded
Thetime-exceeded message isgenerated intwocases:AsweseeinChapter22,routers
useroutingtablestofindthenexthop(nextrouter)thatmustreceivethepacket.Ifthere
areerrorsinoneormoreroutingtables,apacketcantravelinalooporacycle,going
fromoneroutertothenextorvisitingaseriesofroutersendlessly."
6294,"AswesawinChap­
ter20,eachdatagram contains afieldcalledtimetolivethatcontrols thissituation."
6295,"Whenadatagram visitsarouter,thevalueofthisfieldisdecremented by1.Whenthe
time-to-live valuereaches0,afterdecrementing, therouterdiscardsthedatagram."
6296,"How­
ever,whenthedatagram isdiscarded, atime-exceeded message mustbesentbythe
routertotheoriginalsource.Second,atime-exceeded message isalsogenerated when
notallfragments thatmakeupamessage arriveatthedestination hostwithinacertain
timelimit."
6297,"Parameter Problem
Anyambiguity intheheaderpartofadatagram canCreateseriousproblems asthedata­
gramtravelsthroughtheInternet.Ifarouterorthedestination hostdiscovers anambig­
uousormissingvalueinanyfieldofthedatagram, itdiscards thedatagram andsendsa
parameter-problem message backtothesource."
6298,"Redirection
Whenarouterneedstosendapacketdestined foranothernetwork, itmustknowtheIP
addressofthenextappropriate router.Thesameistrueifthesenderisahost.Bothrouters
andhosts,then,musthavearoutingtabletofindtheaddressoftherouterorthenext
router.Routerstakepartintheroutingupdateprocess,aswewillseeinChapter22,and
aresupposed tobeupdatedconstantly."
6299,Routingisdynamic.
6300,"However, forefficiency, hostsdonottakepartintheroutingupdateprocessbecause
therearemanymorehostsinaninternetthanrouterS.Updating theroutingtablesofhosts
dynamically produces unacceptable traffic.Thehostsusuallyusestaticrouting.Whena
hostcomesup,itsroutingtablehasalimitednumberofentries.ItusuallyknowstheIP
addressofonlyonerouter,thedefaultrouter.Forthisreason,thehostmaysendadata­
gram,whichisdestined foranothernetwork, tothewrongrouter.Inthiscase,therouter
thatreceives thedatagram willforwardthedatagram tothecorrectrouter.However, to
updatetheroutingtableofthehost,itsendsaredirection message tothehost.Thiscon­
ceptofredirection isshowninFigure21.11.HostAwantstosendadatagram tohostB."
6301,"Figure21.11Redirection concept
Redirection A
LAN
~:::lP:::p::ac::ke::t::::R2
LAN
lPpacketBSECTION 21.2ICMP 625
RouterR2isobviously themostefficient routingchoice,buthostAdidnotchoose
routerR2.Thedatagram goestoR1instead.RouterR1,afterconsulting itstable,finds
thatthepacketshouldhavegonetoR2.ItsendsthepackettoR2and,atthesametime,
sendsaredirection message tohostA.HostA'sroutingtablecannowbeupdated."
6302,"Query
Inaddition toerrorreporting, ICMPcandiagnose somenetwork problems."
6303,"Thisis
accomplished throughthequerymessages, agroupoffourdifferent pairsofmessages,
asshowninFigure21.12.InthistypeofICMPmessage, anodesendsamessage that
isanswered inaspecificformatbythedestination node.Aquerymessage isencapsu­
latedinanIPpacket,whichintumisencapsulated inadatalinklayerframe.However, in
thiscase,nobytesoftheoriginalIPareincludedinthemessage, asshowninFigure21.13."
6304,"Figure21.12Querymessages
Types:8and0 Types:13and14 Types:17and18 Types:10and9
Figure21.13Encapsulation ofICMPquerymessages
IeMP
Packet
IP IP
header Data
EchoRequestandReply
Theecho-request andecho-reply messages aredesigned fordiagnostic purposes."
6305,"Net­
workmanagers andusersutilizethispairofmessages toidentifynetworkproblems."
6306,"The
combination ofecho-request andecho-reply messages detennines whethertwosystems
(hostsorrouters)cancommunicate witheachother.Theecho-request andecho-reply
messages canbeusedtodetermine ifthereiscommunication attheIPlevel.Because
ICMPmessages areencapsulated inIPdatagrams, thereceiptofanecho-reply message
bythemachine thatsenttheechorequestisproofthattheIPprotocols inthesenderand
receiverarecommunicating witheachotherusingtheIPdatagram."
6307,"Also, itisproofthat
theintermediate routersarereceiving, processing, andforwarding IPdatagrams."
6308,"Today,
mostsystemsprovideaversionofthepingcommand thatcancreateaseries(insteadof
justone)ofecho-request andecho-reply messages, providing statistical information."
6309,"We
willseetheuseofthisprogram attheendofthechapter.626CHAPTER 21NETWORK lAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Timestamp RequestandReply
Twomachines (hostsorrouters)canusethetimestamp requestandtimestamp reply
messages todetermine theround-trip timeneededforanIPdatagram totravelbetween
them.Itcanalsobeusedtosynchronize theclocksintwomachines."
6310,"Address-Mask RequestandReply
AhostmayknowitsIPaddress, butitmaynotknowthecorresponding mask.For
example, ahostmayknowitsIPaddressas159.31.17.24, butitmaynotknowthatthe
corresponding maskis/24.Toobtainitsmask,ahostsendsanaddress-mask-request
message toarouterontheLAN.Ifthehostknowstheaddressoftherouter,itsendsthe
requestdirectlytotherouter.Ifitdoesnotknow,itbroadcasts themessage."
6311,"Therouter
receiving theaddress-mask-request message responds withanaddress-mask-reply
message, providing thenecessary maskforthehost.ThiscanbeappliedtoitsfullIP
addresstogetitssubnetaddress."
6312,"RouterSolicitation andAdvertisement
Aswediscussed intheredirection messagesection,ahostthatwantstosenddatatoahost
onanothernetworkneedstoknowtheaddressofroutersconnected toitsownnetwork."
6313,"Also,thehostmustknowiftheroutersarealiveandfunctioning."
6314,"Therouter-solicitation
androuter-advertisement messages canhelpinthissituation."
6315,"Ahostcanbroadcast (or
multicast) arouter-solicitation message."
6316,"Therouterorroutersthatreceivethesolicitation
message broadcast theirroutinginformation usingtherouter-advertisement message."
6317,"A
routercanalsoperiodically sendrouter-advertisement messages evenifnohosthassolic­
ited.Notethatwhenaroutersendsoutanadvertisement, itannounces notonlyitsown
presence butalsothepresenceofallroutersonthenetworkofwhichitisaware."
6318,"Checksum
InChapter10,welearnedtheconceptandideaofthechecksum."
6319,"InICMPthechecksum
iscalculated overtheentiremessage (headeranddata)."
6320,"Example 21.2
Figure21.14showsanexampleofchecksum calculation forasimpleecho-request message."
6321,"We
randomly chosetheidentifier tobe1andthesequence numbertobe9.Themessage isdivided
Figure21.14Exampleofchecksum calculation
Checksum~111010000 0 01008I0\0k-
II 9
TEST
8 &0~00001000 00000000o~00000000 00000000
1~00000000 00000001
9~00000000 00001001
T&E~01010100 01000101
S &T~01010011 01010100
Sum~10101111 10100011
111SECTION 21.2ICMP 627
into16-bit(2-byte)words.Thewordsareaddedandthesumiscomplemented."
6322,"Nowthesender
canputthisvalueinthechecksum field."
6323,"Debugging Tools
ThereareseveraltoolsthatcanbeusedintheInternetfordebugging."
6324,"Wecandetermine
theviability ofahostorrouter.Wecantracetherouteofapacket.Weintroduce two
toolsthatuseICMPfordebugging: pingandtraceroute."
6325,"Wewillintroduce moretools
infuturechapters afterwehavediscussed thecorresponding protocols."
6326,"Ping
Wecanusethepingprogram tofindifahostisaliveandresponding."
6327,"Weusepinghere
toseehowitusesICMPpackets."
6328,"ThesourcehostsendsICMPecho-request messages (type:8,code:0);thedestina­
tion,ifalive,responds withICMPecho-reply messages."
6329,"Thepingprogram setstheidenti­
fierfieldintheecho-request andecho-reply message andstansthesequence number
from0;thisnumberisincremented by1eachtimeanewmessage issent.Notethatping
cancalculate theround-trip time.Itinsertsthesendingtimeinthedatasectionofthe
message."
6330,"Whenthepacketarrives,itsubtracts thearrivaltimefromthedeparture timeto
gettheround-trip time(RTT)."
6331,"Example 21.3
Weusethepingprogram totesttheserverfhda.edu."
6332,"Theresultisshownbelow:
$pingthda.edu
PINGthda.edu (153.18.8.1) 56(84)bytesofdata."
6333,"64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=O
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=l
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=2
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=3
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=4
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=5
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=6
64bytesfromtiptoe.:fhda.edu (153.18.8.1): icmp_seq=7
64bytesfromtiptoe.:fhda.edu (153.18.8.1): icmp_seq=8
64bytesfromtiptoe.fhda.edu (153.18.8.1): icmp_seq=9
64bytesfromtiptoe.:fhda.edu (153.18.8.1): icmp_seq=lOttl=62
ttl=62
ttl=62
ttl=62
ttl=62ttl=62
tt1=62ttl=62
ttl=62
ttl=62
ttl==62time=1.91 ms
time:=2.04 ms
time=1.90 ms
time=1.97 ms
time=1.93 mstime=2.00 ms
time=1.94 ms
time=1.94 ms
time=1.97 ms
time=1.89 ms
time=1.98 ms
---thda.edu pingstatistics ---
11packetstransmitted, 11received, 0%packetloss,time10103ms
rttminJavg/max =1.899/1.955/2.041 ms
Thepingprogram sendsmessages withsequence numbers startingfromO.Foreachprobeit
givesustheRTTtime.TheTTL(timetolive)fieldintheIPdatagram thatencapsulates anICMP
messagehasbeensetto62,whichmeansthepacketcannottravelmarethan62hops.Atthebegin­
ning,pingdefinesthenumberofdatabytesas56andthetotalnumberofbytesas84.Itisobvious
thatifweadd8bytesofICMPheaderand20bytesofIPheaderto56,theresultis84.However,628CHAPTER 21NETWORK IAYER:ADDRESS MAPPING, ERRORREPORTiNG, ANDMULTiCASTING
notethatineachprobepingdefinesthenumberofbytesas64.Thisisthetotalnumberofbytesin
theICMPpacket(56+8).Thepingprogramcontinues tosendmessages, ifwedonotstopitby
usingtheinterrupt key(ctrl+c,forexample)."
6334,"Afteritisinterrupted, itprintsthestatistics ofthe
probes.Ittellsusthenumberofpacketssent,thenumberofpacketsreceived, thetotaltime,and
theRTTminimum, maximum, andaverage.Somesystemsmayprintmoreinfonnation."
6335,"Tracerollte
Thetraceroute program inUNIXortracertinWindows canbeusedtotracetheroute
ofapacketfromthesourcetothedestination."
6336,"Wehaveseenanapplication ofthe
tracerouteprogramtosimulate theloosesourcerouteandstrictsourcerouteoptionsof
anIPdatagram inChapter20.Weusethisprogram inconjunction withICMPpackets
inthischapter.Theprogram elegantly usestwoICMPmessages, timeexceeded and
destination unreachable, tofindtherouteofapacket.Thisisaprogram attheapplica­
tionlevelthatusestheservicesofUDP(seeChapter23).Letusshowtheideaofthe
traceroute programbyusingFigure21.15."
6337,"Figure21.15 Thetraceroute program operation
HostA
Network
Network
R3HosteHostB
Network
Giventhetopology, weknowthatapacketfromhostAtohostBtravelsthrough
routersRlandR2.However, mostofthetime,wearenotawareofthistopology."
6338,"There
couldbeseveralroutesfromAtoB.Thetraceroute program usestheICMPmessages
andtheTTL(timetolive)fieldintheIPpackettofindtheroute."
6339,"1.Thetraceroute programusesthefollowing stepstofindtheaddressoftherouterRl
andtheround-trip timebetweenhostA androuterRl.
a.Thetraceroute application athostAsendsapackettodestination BusingUDP;
themessageisencapsulated inanIPpacketwithaTTLvalueof1.Theprogram
notesthetimethepacketissent."
6340,"b.RouterRlreceivesthepacketanddecrements thevalueofTTLtoO.Itthendis­
cardsthepacket(because TTLis0).Therouter,however, sendsatime-exceeded
ICMPmessage (type:11,code:0)toshowthattheTTLvalueis0andthepacket
wasdiscarded."
6341,"c.Thetracerouteprogram receivestheICMPmessages andusesthedestination
addressoftheIPpacketencapsulating ICMPtofindtheIPaddressofrouterRl.
Theprogram alsomakesnoteofthetimethepackethasarrived.Thedifference
betweenthistimeandthetimeatstepaistheround-trip time.SECTION 21.2ICMP 629
Thetraceroute program repeatsstepsatocthreetimestogetabetteraverage
round-trip time.Thefirsttriptimemaybemuchlongerthanthesecondorthird
becauseittakestimefortheARPprogram tofindthephysical addressofrouter
RI.Forthesecondandthirdtrips,ARPhastheaddressinitscache."
6342,"2.Thetraceroute program repeatstheprevious stepstofindtheaddressofrouterR2
andtheround-trip timebetween hostAandrouterR2.However, inthisstep,the
valueofTTLissetto2.SorouterRIforwards themessage, whilerouterR2dis­
cardsitandsendsatime-exceeded ICMPmessage."
6343,"3.Thetraceroute programrepeatsstep2tofindtheaddressofhostBandtheround-trip
timebetweenhostAandhostB.WhenhostBreceivesthepacket,itdecrements the
valueofTIL,butitdoesnotdiscardthemessage sinceithasreacheditsfinaldesti­
nation.HowcananICMPmessagebesentbacktohostA?Thetraceroute program
usesadifferent strategyhere.Thedestination portoftheUDPpacketissettoone
thatisnotsupported bytheUDPprotocol."
6344,"WhenhostBreceivesthepacket,itcannot
findanapplication programtoacceptthedelivery.Itdiscardsthepacketandsendsan
ICMPdestination-unreachable message (type:3,code:3)tohostA.Notethatthis
situation doesnothappenatrouterRIorR2becausearouterdoesnotcheckthe
UDPheader.Thetraceroute program recordsthedestination addressofthearrived
IPdatagram andmakesnoteoftheround-trip time.Receiving thedestination­
unreachable message withacodevalue3isanindication thatthewholeroutehas
beenfoundandthereisnoneedtosendmorepackets."
6345,"Example 21.4
Weusethetracerouteprogram tofindtheroutefromthecomputer voyager.deanza.edu tothe
serverfhda.edu."
6346,"Thefollowing showstheresult:
$traceroute fbda.edu
traceroute tofbda.edu
1Dcore.fhda.edu
2Dbackup.fhda.edu
3tiptoe.fhda.edu(153.18.8.1),30 hopsmax,38bytepackets
(153.18.31.254) 0.995ms0.899ms
(153.18.251.4) 1.039fiS1.064fiS
(153.18.8.1) 1.797illS1.642ms0.878ms
1.083fiS
1.757fiS
Theunnumbered lineafterthecommand showsthatthedestination is153.18.8.1. TheTIL
valueis30hops.Thepacketcontains 38bytes:20bytesofIPheader,8bytesofUDPheader,and
10bytesofapplication data.Theapplication dataareusedbytraceroute tokeeptrackofthe
packets."
6347,"Thefirstlineshowsthefirstroutervisited.TherouterisnamedDcore.fhda.edu withIP
address153.18.31.254."
6348,"Thefirstround-trip timewas0.995ms,thesecondwas0.899ms,andthe
thirdwas0.878ms."
6349,"Thesecondlineshowsthesecondroutervisited.TherouterisnamedDbackup.fhda.edu
withIPaddress153.18.251.4. Thethreeround-trip timesarealsoshown."
6350,"Thethirdlineshowsthedestination host.Weknowthatthisisthedestination hostbecause
therearenomorelines.Thedestination hostistheserverthda.edu, butitisnamedtiptoe.fhda.edu
withtheIPaddress153.18.8.1. Thethreeround-trip timesarealsoshown."
6351,"Example 21.5
Inthisexample, wetracealongerroute,theroutetoxerox.com.630CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
$traceroute xerox.com
traceroute toxerox.com (13.1.64.93), 30hopsmax,38bytepackets
1Dcore.fbda.edu (153.18.31.254) 0.622ms0.891ms
2Ddmz.fbda.edu (153.18.251.40) 2.132ms2.266ms
3Cinic.fhda.edu (153.18.253.126) 2.110ms2.145ms
4cenic.net (137.164.32.140) 3.069ms2.875ms
5cenic.net (137.164.22.31) 4.205ms4.870ms0.875ms
2.094ms
1.763ms
2.930ms
4.197ms
14snfc21.pbi.net (151.164.191.49) 7.656ms7.129ms6.866ms
15sbcglobaLnet (151.164.243.58) 7.844ms7.545ms7.353ms
16pacbell.net (209.232.138.114) 9.857ms9.535ms9.603ms
17209.233.48.223 (209.233.48.223) 10.634ms 10.771ms10.592ms
18alpha.Xerox.COM (13.1.64.93) 11.172ms11.048ms10.922ms
Herethereare17hopsbetween sourceanddestination."
6352,"Notethatsomeround-trip timeslook
unusual.Itcouldbethatarouterwastoobusytoprocessthepacketimmediately."
6353,"21.3IGMP
TheIPprotocol canbeinvolved intwotypesofcommunication: unicasting andmulti­
casting.Unicasting isthecommunication between onesenderandonereceiver.Itisa
one-to-one communication."
6354,"However, someprocesses sometimes needtosendthesame
message toalargenumberofreceivers simultaneously."
6355,"Thisiscalledmulticasting,
whichisaone-to-many communication."
6356,Multicasting hasmanyapplications.
6357,"Forexam­
ple,multiple stockbrokers cansimultaneously beinformed ofchangesinastockprice,
ortravelagentscanbeinformed ofaplanecancellation."
6358,"Someotherapplications include
distancelearningandvideo-on-demand."
6359,"TheInternet GroupManagement Protocol (IGMP) isoneofthenecessary, but
notsufficient (aswewillsee),protocols thatisinvolved inmulticasting."
6360,"IGMPisa
companion totheIPprotocol."
6361,"GroupManagement
Formulticasting intheInternetweneedroutersthatareabletoroutemulticast packets."
6362,"Theroutingtablesoftheseroutersmustbeupdatedbyusingoneofthemulticasting
routingprotocols thatwediscussinChapter22."
6363,"IGMPisnotamulticasting routingprotocol; itisaprotocol thatmanages group
membership."
6364,"Inanynetwork, thereareoneormoremulticast routersthatdistribute
multicast packetstohostsorotherrouters.TheIGMPprotocolgivesthemulticast routers
information aboutthemembership statusofhosts(routers) connected tothenetwork."
6365,"Amulticast routermayreceivethousands ofmulticast packetseverydayfordifferent
groups.Ifarouterhasnoknowledge aboutthemembership statusofthehosts,itmust
broadcast allthesepackets.Thiscreatesalotoftrafficandconsumes bandwidth."
6366,"Abetter
solutionistokeepalistofgroupsinthenetworkforwhichthereisatleastoneloyal
member."
6367,"IGMPhelpsthemulticast routercreateandupdatethislist.SECTION 21.3IGMP 631
IGMPisagroupmanagement protocol.Ithelpsamulticast routercreate
andupdatealistofloyalmembers relatedtoeachrouterinterface."
6368,"IGMPMessages
IOMPhasgonethroughtwoversions."
6369,"WediscussIOMPv2, thecurrentversion.IOMPv2
hasthreetypesofmessages: thequery,themembership report,andtheleavereport."
6370,Therearetwotypesofquerymessages: generalandspecial(seeFigure21.16).
6371,"Figure21.16IGMPmessage types
Message Format
Figure21.17showstheformatofanIOMP(version2)message."
6372,"Figure21.17IGMPmessagefonnat
I·8bits
Type8bits
l~axim~ responset
Ietime8bits 8bits
Groupaddressinmembership andleavereportsandspecialquery;alIOsingeneralquery
oType.This8-bitfielddefinesthetypeofmessage, asshowninTable21.1.Thevalue
ofthetypeisshowninbothhexadecimal andbinarynotation."
6373,"Table21.1IGMPtypefield
Type Value
Generalorspecialquery Ox11or00010001
Membership report Ox16or00010110
Leavereport Ox17or00010111
oMaximum Response Time.This8-bitfielddefinestheamountoftimeinwhicha
querymustbeanswered."
6374,"Thevalueisintenthsofasecond;forexample, ifthe632 CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
valueis100,itmeans10s.Thevalueisnonzerointhequerymessage; itissetto
zerointheothertwomessage types.Wewillseeitsuseshortly."
6375,DChecksum.
6376,Thisisa16-bitfieldcarryingthechecksum.
6377,"Thechecksum iscalculated
overthe8-bytemessage."
6378,DGroupaddress.
6379,Thevalueofthisfieldis0forageneralquerymessage.
6380,"Thevalue
definesthegroupid(multicast addressofthegroup)inthespecialquery,themem­
bershipreport,andtheleavereportmessages."
6381,"IGMPOperation
IGMPoperateslocally.Amulticast routerconnected toanetworkhasalistofmulticast
addresses ofthegroupswithatleastoneloyalmemberinthatnetwork(seeFigure21.18)."
6382,"Figure21.18IGMPoperation
Toanothernetwork229.60.12.8..."
6383,"NetworkListofgroups
havingloyalmembers
225.70.8.20
231.24.60.9
Toothernetworks Toanothernetwork
Foreachgroup,thereisonerouterthathasthedutyofdistributing themulticast
packetsdestined forthatgroup.Thismeansthatiftherearethreemulticast routers
connected toanetwork, theirlistsofgroupids aremutually exclusive."
6384,"Forexample, in
Figure21.18onlyrouterRdistributes packetswiththemulticast addressof225.70.8.20."
6385,"Ahostormulticast routercanhavemembership inagroup.Whenahosthasmember­
ship,itmeansthatoneofitsprocesses (anapplication program) receivesmulticast packets
fromsomegroup.Whenarouterhasmembership, itmeansthatanetworkconnected to
oneofitsotherinterfaces receivesthesemulticast packets.Wesaythatthehostorthe
routerhasaninterestinthegroup.Inbothcases,thehostandtherouterkeepalistof
groupids andrelaytheirinteresttothedistributing router."
6386,"Forexample, inFigure21.18,routerRisthedistributing router.Therearetwo
othermulticast routers(R1andR2)that,depending onthegrouplistmaintained by
routerR,couldbetherecipients ofrouterRinthisnetwork."
6387,"RoutersRIandR2maybe
distributors forsomeofthesegroupsinothernetworks, butnotonthisnetwork."
6388,"JoiningaGroup
Ahostoraroutercanjoinagroup.Ahostmaintains alistofprocesses thathavemember­
shipinagroup.Whenaprocesswantstojoinanewgroup,itsendsitsrequesttothehost.SECTION 21.3IGMP 633
Thehostaddsthenameoftheprocessandthenameoftherequested grouptoitslist.If
thisisthefirstentryforthisparticular group,thehostsendsamembership reportmes­
sage.Ifthisisnotthefirstentry,thereisnoneedtosendthemembership reportsincethe
hostisalreadyamemberofthegroup;italreadyreceivesmulticast packetsforthisgroup."
6389,"Theprotocol requires thatthemembership reportbesenttwice,oneaftertheother
withinafewmoments."
6390,"Inthisway,ifthefirstoneislostordamaged, thesecondone
replaces it."
6391,"InIGMP,amembership reportissenttwice,oneaftertheother."
6392,"LeavingaGroup
Whenahostseesthatnoprocessisinterested inaspecificgroup,itsendsaleavereport."
6393,"Similarly, whenarouterseesthatnoneofthenetworks connected toitsinterfaces is
interested inaspecificgroup,itsendsaleavereportaboutthatgroup."
6394,"However, whenamulticast routerreceives aleavereport,itcannotimmediately
purgethatgroupfromitslistbecause thereportcomesfromjustonehostorrouter;
theremaybeotherhostsorroutersthatarestillinterested inthatgroup.Tomakesure,
theroutersendsaspecialquerymessage andinsertsthegroupid, ormulticast address,
relatedtothegroup.Therouterallowsaspecified timeforanyhostorroutertorespond."
6395,"If,duringthistime,nointerest(membership report)isreceived, therouterassumes that
therearenoloyalmembers inthenetwork andpurgesthegroupfromitslist."
6396,"Monitoring Membership
Ahostorroutercanjoinagroupbysendingamembership reportmessage."
6397,"Itcanleave
agroupbysendingaleavereportmessage."
6398,"However, sendingthesetwotypesofreports
isnotenough."
6399,"Consider thesituation inwhichthereisonlyonehostinterested ina
group,butthehostisshutdownorremoved fromthesystem.Themulticast routerwill
neverreceivealeavereport.Howisthishandled?"
6400,"Themulticast routerisresponsible
formonitoring allthehostsorroutersinaLANtoseeiftheywanttocontinue their
membership inagroup."
6401,"Therouterperiodically (bydefault,every125s)sendsageneralquerymessage."
6402,"In
thismessage, thegroupaddressfieldissetto0.0.0.0.Thismeansthequeryformember­
shipcontinuation isforallgroupsinwhichahostisinvolved, notjustone."
6403,Thegeneralquerymessagedoesnotdefineaparticular group.
6404,"Therouterexpectsananswerforeachgroupinitsgrouplist;evennewgroupsmay
respond."
6405,"Thequerymessage hasamaximum response timeof10s(the value ofthe
fieldisactually 100,butthisisintenthsofasecond)."
6406,"Whenahostorrouterreceives the
generalquerymessage, itresponds withamembership reportifitisinterested ina
group.However, ifthereisacommon interest(twohosts,forexample, areinterested in
thesamegroup),onlyoneresponse issentforthatgrouptopreventunnecessary traffic."
6407,Thisiscalledadelayedresponse.
6408,"Notethatthequerymessage mustbesentbyonlyone634CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
router(normally calledthequeryrouter),alsotopreventunnecessary traffic.Wediscuss
thisissueshortly."
6409,"DelayedResponse
Topreventunnecessary traffic,IGMPusesadelayedresponse strategy."
6410,"Whenahostor
routerreceivesaquerymessage, itdoesnotrespondimmediately; itdelaystheresponse."
6411,"Eachhostorrouterusesarandomnumbertocreateatimer,whichexpiresbetweenIand
lOs.Theexpiration timecanbeinstepsofIsorless.Atimerissetforeachgroupinthe
list.Forexample, thetimerforthefirstgroupmayexpirein2s,butthetimerforthethird
groupmayexpirein5s.Eachhostorrouterwaitsuntilitstimerhasexpiredbeforesend­
ingamembership reportmessage."
6412,"Duringthiswaitingtime,ifthetimerofanotherhostor
router,forthesamegroup,expiresearlier,thathostorroutersendsamembership report."
6413,"Because, aswewillseeshortly,thereportisbroadcast, thewaitinghostorrouterreceives
thereportandknowsthatthereisnoneedtosendaduplicate reportforthisgroup;thus,
thewaitingstationcancelsitscorresponding timer."
6414,"Example 21.6
Imaginetherearethreehostsinanetwork, asshowninFigure21.19."
6415,"Figure21.19Example 21.6
Group Timer Group Timer Group Timer
225.14.0.0 30228.42.0.0 48225.14.0.0 62
228.42.0.0 12238.71.0.0 50230.43.0.0 70
230.43.0.0 80
Toothernetworks
A B C
~R ~~¥-
Aquerymessage wasreceived attime0;therandomdelaytime(intenthsofseconds) for
eachgroupisshownnexttothegroupaddress."
6416,Showthesequence ofreportmessages.
6417,"Solution
Theeventsoccurinthissequence:
a.Time12:Thetimerfor228.42.0.0 inhostAexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhostincluding hostBwhichcancelsitstimer
for228.42.0.0.
b.Time30:Thetimerfor225.14.0.0 inhostAexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhostincluding hostCwhichcancelsitstimer
for225.14.0.0.
c.Time50:Thetimerfor238.71.0.0 inhostBexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhost."
6418,"d.Time70:Thetimerfor230.43.0.0 inhostCexpires,andamembership reportissent,
whichisreceived bytherouterandeveryhostincluding hostAwhichcancelsitstimer
for230.43.0.0.SECTION 21.3IGMP 635
Notethatifeachhosthadsentareportforeverygroupinitslist,therewouldhavebeenseven
reports;withthisstrategyonlyfourreportsaresent."
6419,"QueryRouter
Querymessages may createalotofresponses."
6420,"Topreventunnecessary traffic,IGMP
designates onerouterasthequeryrouterforeachnetwork."
6421,"Onlythisdesignated router
sendsthequerymessage, andtheotherroutersarepassive(theyreceiveresponses and
updatetheirlists)."
6422,"Encapsulation
TheIGMPmessage isencapsulated inanIPdatagram, whichisitselfencapsulated ina
frame.SeeFigure21.20."
6423,"Figure21.20Encapsulation ofIGMPpacket
8bytes
IGMP
message
W IP
header data
Frame Frame TrailerI header data (ifany)
Encapsulation atNetwork Layer
Thevalueoftheprotocol fieldis2fortheIGMPprotocol."
6424,"EveryIPpacketcarryingthis
valueinitsprotocol fieldhasdatadelivered totheIGMPprotocol."
6425,"Whenthemessage is
encapsulated intheIPdatagram, thevalueofTTLmustbe1.Thisisrequired because
thedomainofIGMPistheLAN.NoIGMPmessage musttravelbeyondtheLAN.A
TTLvalueof1guarantees thatthemessage doesnotleavetheLANsincethisvalueis
decremented to0bythenextrouterand,consequently, thepacketisdiscarded."
6426,"Table21.2
showsthedestination IPaddressforeachtypeofmessage."
6427,TheIPpacketthatcarriesanIGMPpackethasavalueof1initsTTLfield.
6428,"Table21.2Destination IPaddresses
Type IPDestination Address
Query 224.0.0.1 Allsystemsonthissubnet
Membership report Themulticast addressofthegroup
Leavereport 224.0.0.2 Allroutersonthissubnet
Aquerymessage ismulticast byusingthemulticast address224.0.0.1 Allhosts
andallrouterswillreceivethemessage."
6429,"Amembership reportismulticast usinga636 CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
destination addressequaltothemulticast addressbeingreported (groupid)."
6430,"Everysta­
tion(hostorrouter)thatreceives thepacketcanimmediately determine (fromthe
header)thegroupforwhichareporthasbeensent.Asdiscussed previously, thetimers
forthecorresponding unsentreportscanthenbecanceled."
6431,"Stationsdonotneedtoopen
thepackettofindthegroupid."
6432,"Thisaddressisduplicated inapacket;it'spartofthe
message itselfandalsoafieldintheIPheader.Theduplication prevents errors.Aleave
reportmessage ismulticast usingthemulticast address224.0.0.2 (allroutersonthis
subnet)sothatroutersreceivethistypeofmessage."
6433,"Hostsreceivethismessage too,but
disregard it."
6434,"Encapsulation atDataLinkLayer
Atthenetwork layer,theIGMPmessage isencapsulated inanIPpacketandistreated
asanIPpacket.However, because theIPpackethasamulticast IPaddress, theARP
protocol cannotfindthecorresponding MAC(physical) addresstoforwardthepacket
atthedatalinklayer.Whathappens nextdepends onwhether theunderlying datalink
layersupports physical multicast addresses."
6435,Physical Multicast Support MostLANssupportphysicalmulticast addressing.
6436,"Ether­
netisoneofthem.AnEthernet physical address(MACaddress) issixoctets(48bits)
long.Ifthefirst25bitsinanEthernet addressare0000000100000000010111100, this
identifies aphysicalmulticast addressfortheTCP/IPprotocol."
6437,"Theremaining 23bitscan
beusedtodefineagroup.ToconvertanIPmulticast addressintoanEthernet address,the
multicast routerextractstheleastsignificant 23bitsofaclassDIPaddressandinserts
themintoamulticast Ethernet physicaladdress(seeFigure21.21)."
6438,"Figure21.21 Mapping classDtoEthernet physical address
-[
23bitsofmulticast address32-bitclassDaddress
I
I
II
I
I
I--------------------,10000000100000000010111100 2__3__b__its__o__f__ph__y__sic__a__la__dd__re__s__s_I
,- 48-bitEthernet address -I
However, thegroupidentifier ofaclassDIPaddressis28bitslong,whichimplies
that5bitsisnotused.Thismeansthat32(25)multicast addresses attheIPlevelare
mapped toasinglemulticast address."
6439,"Inotherwords,themapping ismany-to-one
insteadofone-to-one."
6440,"Ifthe5leftmost bitsofthegroupidentifier ofaclassDaddress
arenotallzeros,ahostmayreceivepacketsthatdonotreallybelongtothegroupin
whichitisinvolved."
6441,"Forthisreason,thehostmustchecktheIPaddressanddiscardany
packetsthatdonotbelongtoit."
6442,"OtherLANssupportthesameconceptbuthavedifferent methods ofmapping.SECTION 21.3IGMP 637
AnEthernet multicast physicaladdressisintherange
01:00:5E:00:OO:OO to01:00:5E:7F:FF:FF."
6443,"Example 21.7
Changethemulticast IPaddress230.43.14.7 toanEthernet multicast physicaladdress."
6444,"Solution
Wecandothisintwosteps:
a.Wewritetherightmost 23bitsoftheIPaddressinhexadecimal."
6445,"Thiscanbedonebychanging
therightmost 3bytestohexadecimal andthensubtracting 8fromtheleftmostdigitifitis
greaterthanorequalto8.Inourexample, theresultis2B:OE:07."
6446,"b.WeaddtheresultofpartatothestartingEthernet multicast address, whichis
01:00:5E:00:00:00."
6447,"Theresultis
01:00:5E:2B:OE:07
Example 21.8
Changethemulticast IPaddress238.212.24.9 toanEthernetmulticast address."
6448,"Solution
a.Therightmost 3bytesinhexadecimal isD4:18:09.Weneedtosubtract8fromtheleftmost
digit,resulting in54:18:09."
6449,"b.WeaddtheresultofpartatotheEthernet multicast startingaddress.Theresultis
01:00:5E:54: 18:09
NoPhysical Multicast Support MostWANsdonotsupportphysicalmulticast address­
ing.Tosendamulticast packetthroughthesenetworks, aprocesscalledtunneling isused."
6450,"Intunneling, themulticast packetisencapsulated inaunicastpacketandsentthroughthe
network, whereitemergesfromtheothersideasamulticast packet(seeFigure21.22)."
6451,"Figure21.22 Tunneling
Multicast IPdatagram
HeaderI Data
Header Data
UnicastIPdatagram
NetstatUtility
Thenetstatutilitycanbeusedtofindthemulticast addresses supported byaninterface.638 CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Example 21.9
Weusenetstatwiththreeoptions:-n,-r,and-a.The-noptiongivesthenumericversionsofIP
addresses, the-roptiongivestheroutingtable,andthe-aoptiongivesalladdresses (unicastand
multicast)."
6452,Notethatweshowonlythefieldsrelativetoourdiscussion.
6453,"""Gateway"" definesthe
router,""Iface""definestheinterface."
6454,"$netstat-nra
KernelIProutingtable
Destination Gateway
153.18.16.0 0.0.0.0
169.254.0.0 0.0.0.0
127.0.0.0 0.0.0.0
224.0.0.0 0.0.0.0
0.0.0.0 153.18.31.254Mask
255.255.240.0
255.255.0.0
255.0.0.0
224.0.0.0
0.0.0.0Flags
U
U
U
u
vaIface
ethO
ethO
10
ethO
ethO
Natethatthemulticast addressisshownincolor.Anypacketwithamulticast addressfrom
224.0.0.0 to239.255.255.255 ismaskedanddelivered totheEthernet interface."
6455,"21.4ICMPv6
Wediscussed 1Pv6inChapter20.Anotherprotocolthathasbeenmodified inversion6of
theTCPIIPprotocolsuiteisICMP(ICMPv6)."
6456,"Thisnewversionfollowsthesamestrategy
andpurposes ofversion4.ICMPv4 hasbeenmodified tomakeitmoresuitableforIPv6."
6457,"Inaddition, someprotocols thatwereindependent inversion4arenowpartofInternet­
working ControlMessage Protocol (ICMPv6)."
6458,"Figure21.23compares thenetwork
layerofversion4toversion6."
6459,"Figure21.23 Comparison ofnetworklayersinversion4andversion6
Network layerinversion4 Network layerinversion6
TheARPandIGMPprotocols inversion4arecombined inICMPv6."
6460,"TheRARP
protocol isdroppedfromthesuitebecauseitwasrarelyusedandBOOTPhasthesame
functionality."
6461,"JustasinICMPv4, wedividetheICMPmessages intotwocategories."
6462,"However,
eachcategory hasmoretypesofmessages thanbefore."
6463,"ErrorReporting
Aswesawinourdiscussion ofversion4,oneofthemainresponsibilities ofICMPisto
reporterrors.Fivetypesoferrorsarehandled: destination unreachable, packettoobig,
timeexceeded, parameter problems, andredirection."
6464,"ICMPv6 formsanerrorpacket,SECTION 21.4ICMPv6 639
whichisthenencapsulated inanIPdatagram."
6465,"Thisisdelivered totheoriginalsourceof
thefaileddatagram."
6466,"Table21.3compares theerror-reporting messages ofICMPv4
withICMPv6."
6467,"Thesource-quench messageiseliminated inversion6becausethepriority
andtheflowlabelfieldsallowtheroutertocontrolcongestion anddiscardtheleast
important messages."
6468,"Inthisversion,thereisnoneedtoinformthesendertoslowdown."
6469,"Thepacket-too-big message isaddedbecausefragmentation istheresponsibility ofthe
senderinIPv6.Ifthesenderdoesnotmaketherightpacketsizedecision, therouterhas
nochoicebuttodropthepacketandsendanerrormessage tothesender."
6470,"Table21.3Comparison oferror-reporting messages inICMPv4 andICMPv6
TypeofMessage Version4 Version6
Destination unreachable Yes Yes
Sourcequench Yes No
Packettoobig No Yes
Timeexceeded Yes Yes
Parameter problem Yes Yes
Redirection Yes Yes
Destination Unreachable
Theconceptofthedestination-unreachable message isexactlythesameasdescribed
forICMPversion4."
6471,"PacketTooBig
Thisisanewtypeofmessage addedtoversion6.Ifarouterreceivesadatagram thatis
largerthanthemaximum transmission unit(MTU)sizeofthenetworkthroughwhich
thedatagram shouldpass,twothingshappen.First,therouterdiscards thedatagram
andthenanICMPerrorpacket-a packet-too-big message-is senttothesource."
6472,"TimeExceeded
Thismessageissimilartotheoneinversion4."
6473,"Parameter Problem
Thismessageissimilartoitsversion4counterpart."
6474,"Redirection
Thepurposeoftheredirection message isthesameasdescribed forversion4."
6475,"Query
Inaddition toerrorreporting, ICMPcandiagnose somenetwork problems."
6476,"Thisis
accomplished throughthequerymessages."
6477,"Fourdifferentgroupsofmessages havebeen
defined:echorequestandreply,routersolicitation andadvertisement, neighbor solicita­
tionandadvertisement, andgroupmembership."
6478,"Table21.4showsacomparison between640CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
thequerymessages inversions4and6.Twosetsofquerymessages areeliminated from
ICMPv6: time-stamp requestandreply-andaddress-mask requestandreply.Thetime­
stamprequestandreplymessages areeliminated becausetheyareimplemented inother
protocols suchasTCPandbecausetheywererarelyusedinthepast.Theaddress-mask
requestandreplymessages areeliminated inIPv6becausethesubnetsectionofan
addressallowsthesubscriber touseupto232-1subnets.Therefore, subnetmasking, as
definedinIPv4,isnotneededhere."
6479,"Table21.4Comparison ofquerymessages inICMPv4 andICMPv6
TypeofMessage Version4Version6
Echorequestandreply Yes Yes
Timestamp requestandreply Yes No
Address-mask requestandreply Yes No
Routersolicitation andadvertisement Yes Yes
Neighbor solicitation andadvertisement ARP Yes
Groupmembership IGMP Yes
EchoRequestandReply
Theideaandformatoftheechorequestandreplymessages arethesameasthosein
version4."
6480,"RouterSolicitation andAdvertisement
Theideabehindtherouter-solicitation and-advertisement messages isthesameasin
version4."
6481,"Neighbor Solicitation andAdvertisement
Aspreviously mentioned, thenetworklayerinversion4containsanindependent protocol
calledAddressResolution Protocol(ARP).Inversion6,thisprotocoliseliminated, and
its duties areincluded inICMPv6."
6482,"Theideaisexactlythesame,buttheformatofthe
message haschanged."
6483,"GroupMembership
Aspreviously mentioned, thenetworklayerinversion4containsanindependent protocol
calledIGMP.Inversion6,thisprotocol iseliminated, anditsdutiesareincluded in
ICMPv6."
6484,Thepurposeisexactlythesame.
6485,"21.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollow­
ingbooksandsite.Theitemsinbrackets [...Jrefertothereference listattheendof
thetext.SECTION21.6 KEYTERMS 641
Books
ARPandRARParediscussed inChapter7of[For06]andChapters 4and5of[Ste94]."
6486,"ICMPisdiscussed inChapter9of[For06]andChapter6of[Ste94].IGMPisdiscussed
inChapter10of[For06]andChapter13of[Ste94].BOOTPandDHCParediscussed in
Chapter16of[For06]andChapter16of[Ste94].ICMPv6 isdiscussed inChapter27of
[For06]."
6487,"Site
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofARPandRARPcanbefoundinfollowing RFCs:
826,903,925,1027,1293,1329,1433,1868,1931,2390
Adiscussion ofICMPcanbefoundinthefollowing RFCs:
777,792,1016,1018,1256,1788,2521
Adiscussion ofIGMPcanbefoundinthefollowing RFCs:
966,988,1054,1112, 1301,1458, 1469,1768,2236,2357,2365,2502,2588
Adiscussion ofBOOTPandDHCPcanbefoundinthefollowing RFCs:
951,1048,1084,1395,1497,1531,1532,1533,1534, 1541,1542,2131,2132
21.6KEYTERMS
address-mask-reply message
address-mask-request message
addressresolution protocol (ARP)
Bootstrap Protocol (BOOTP)
delayedresponse strategy
destination-unreachable message
dynamic configuration protocol
Dynamic HostConfiguration Protocol
(DHCP)
dynamic mapping
echo-request andecho-reply messages
error-reporting messagegeneralquerymessage
groupid
groupmembership
InternetControlMessage Protocol
(ICMP)
InternetGroupManagement Protocol
(IGMP)
Internetworking ControlMessage
Protocol, version6(ICMPv6)
lease
leavereport
membership report642CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
multicast address
multicast router
multicasting
neighbor-solicitation andadvertisement
message
packet-too-big message
parameter-problem message
physicaladdress
proxyARP
querymessage
queryrouter
redirection message
relayagentreverseaddressresolution protocol
(RARP)
router-solicitation androuter-
advertisement messages
source-quench message
specialquerymessage
staticmapping
time-exceeded message
timestamp requestandtimestamp
replymessages
traceroute
tunneling
21.7SUMMARY
oDelivery ofapackettoahostorrouterrequirestwolevelsofaddresses: logicaland
physical."
6488,Aphysicaladdressidentifies ahostorrouteratthephysicallevel.
6489,oMapping ofalogicaladdresstoaphysicaladdresscanbestaticordynamic.
6490,"oStaticmapping involves alistoflogicalandphysical addresscorrespondences;
maintenance ofthelistrequireshighoverhead."
6491,"oTheaddressresolution protocol (ARP)isadynamic mapping methodthatfindsa
physicaladdress,givenalogicaladdress."
6492,"oInproxyARP,arouterrepresents asetofhosts.WhenanARPrequestseeksthe
physical addressofanyhostinthisset,theroutersendsitsownphysicaladdress."
6493,Thiscreatesasubnettingeffect.
6494,"oReverseAddress Resolution Protocol (RARP)isaformofdynamic mapping in
whichagivenphysicaladdressisassociated withalogicaladdress."
6495,"oICMPsendsfourpairsofquerymessages: echo-request andecho-reply, time-stamp
requestandreply,address-mask-request and-reply,androutersolicitation and
advertisement."
6496,"DThechecksum forICMPiscalculated byusingboththeheaderandthedatafields
oftheICMPmessage."
6497,"DPacketInterNet Groper(ping)isanapplication program thatusestheservicesof
ICMPtotestthereachability ofahost."
6498,"oMulticasting isthesendingofthesamemessage tomorethanonereceiver
simultaneously."
6499,"oTheInternetGroupManagement Protocol(IGMP)helpsmulticast routerscreateand
updatealistofloyalmembers relatedtoarouterinterface."
6500,"oThethree IGMP messagetypesarethequerymessage, themembership report,and
theleavereport.SECTION 21.8PRACTICE SET 643
DAdelayedresponse strategypreventsunnecessary trafficonaLAN."
6501,DTheIGMPmessageisencapsulated inanIPdatagram.
6502,"DMostLANs,including Ethernet, supportphysicalmulticast addressing."
6503,"DWANsthatdonotsupportphysicalmulticast addressing canuseaprocesscalled
tunneling tosendmulticast packets."
6504,"DBOOTPandDynamic HostConfiguration Protocol(DHCP)areclient/server applica­
tionsthatdelivervitalnetworkinformation toeitherdisklesscomputers orcomputers
atfirstboot."
6505,DABOOTPrequest isencapsulated inaUDPuserdatagram.
6506,"DBOOTP, astaticconfiguration protocol, usesatablethatmapsIPaddresses to
physicaladdresses."
6507,DArelayagentisarouterthathelpssendlocalBOOTPrequeststoremoteservers.
6508,"DDHCPisadynamic configuration protocol withtwodatabases: Oneissimilarto
BOOTP,andtheotherisapoolofIPaddresses available fortemporary assignment."
6509,DTheDHCPserverissuesaleaseforanIPaddresstoaclientforaspecifictime.
6510,"DICMPv6, likeversion4,reportserrors,handlesgroupmemberships, updatesspecific
routerandhosttables,andcheckstheviabilityofahost."
6511,"21.8PRACTICE SET
ReviewQuestions
1.IsthesizeoftheARPpacketfixed?Explain."
6512,"2.WhatisthesizeofanARPpacketwhentheprotocolisIPv4andthehardware is
Ethernet?"
6513,3.WhatisthesizeofanEthernet framecarryinganARPpacketinQuestion 2?
6514,4.Whatisthebroadcast addressforEthernet?
6515,"5.Whyistherearestriction onthegeneration ofanICMPv4 message inresponse to
afailedICMPv4 errormessage?"
6516,"6.Whatisthepurposeofincluding theIPv4headerandthefirst8bytesofdatagram
dataintheerror-reporting ICMPv4 messages?"
6517,"7.Giveanexample ofasituation inwhichahostwouldneverreceivearedirection
message."
6518,"8.Whatistheminimum sizeofanICMPv4 packet?Whatisthemaximum sizeofan
ICMPv4 packet?"
6519,"9.Whatistheminimum sizeofanIPv4packetthatcarriesanICMPv4 packet?What
isthemaximum size?"
6520,10.Howcanwedetermine ifanIPv4packetiscarryinganICMPv4 packet?
6521,"11.Whatistheminimum sizeofanEthernet framethatcarriesanIPv4packetwhich
inturncarriesanICMPv4 packet?Whatisthemaximum size?"
6522,"12.WhyistherenoneedfortheICMPv4 message totraveloutsideitsownnetwork?644CHAPTER 21NETWORK LAYER:ADDRESS MAPPING, ERRORREPORTING, ANDMULTICASTING
Exercises
13.ArouterwithIPv4address 125.45.23.12 andEthernet physical address
23:45:AB:4F:67:CD hasreceived apacketforahostdestination withIPaddress
125.11.78.10."
6523,"ShowtheentriesintheARPrequestpacketsentbytherouter.Assume
nosubnetting."
6524,14.ShowtheentriesintheARPpacketsentinresponse toExercise 13.
6525,15.Encapsulate theresultofExercise 13inadatalinkframe.Fillinallthefields.
6526,16.Encapsulate theresultofExercise 14inadatalinkframe.Fillinallthefields.
6527,"17.HostAsendsadatagram tohostB.HostBneverreceivesthedatagram, andhostA
neverreceivesnotification offailure.Givetwodifferent explanations ofwhatmight
havehappened."
6528,"18.Calculate thechecksum forthefollowing ICMPpacket:
Type:EchoRequest Identifier: 123Sequence number:25 Message: Hello
19.ArouterreceivesanIPv4packetwithsourceIPaddress130.45.3.3 anddestination
IPaddress201.23.4.6. Theroutercannotfindthedestination IPaddressinitsrouting
table.WhichICMPv4 message shouldbesent?"
6529,"20.TCPreceivesasegment withdestination portaddress234.TCPchecksandcannot
findanopenportforthisdestination."
6530,WhichICMPv4 message shouldbesent?
6531,"21.Amulticast addressforagroupis231.24.60.9. Whatisits48-bitEthernet address
foraLANusingTCPIIP?"
6532,"22.Ifarouterhas20entriesinitsgrouptable,shoulditsend20different queriesperiod­
icallyorjustone?Explainyouranswer."
6533,"23.Ifahostwantstocontinue membership infivegroups,shoulditsendfivedifferent
membership reportmessages orjustone?"
6534,"24.ArouteronanEthernet network hasreceived amulticast IPpacketwithgroupid
226.17.18.4. Whenthehostchecksitsmulticast grouptable,itfindsthisaddress."
6535,"Showhowtheroutersendsthispackettotherecipients byencapsulating theIP
packetinanEthernet frame.ShowalltheentriesoftheEthernetframe.Theoutgoing
IPaddressoftherouteris185.23.5.6, anditsoutgoing physical address is
4A224512E1E2."
6536,DoestherouterneedtheservicesofARP?
6537,"25.AhostwithIPv4address114.45.7.9 receives anIGMPquery.Whenitchecksits
grouptable,itfindsnoentries.Whatactionshouldthehosttake?Shoulditsend
anymessages?"
6538,"26.AhostwithIPv4address222.5.7.19 receives an IGMP query.Whenitchecksits
routingtable,itfindstwoentriesinitstable:227.4.3.7 and229.45.6.23."
6539,"What
actionshouldthehosttake?Shoulditsendanymessages?"
6540,"Ifso,whattypeandhow
many?"
6541,27.Howmanymulticast addresses canbesupported fortheIPv4protocol inEthernet?
6542,Howmanymulticast addresses canbesupported bytheIPv4protocol?
6543,"Whatisthe
sizeofaddressspacelostwhenwetransform amulticast IPv4addresstoanEthernet
multicast address?"
6544,28.Changethefollowing IPv4multicast addresses toEthernet multicast addresses.
6545,"HowmanyofthemspecifythesameEthernet address?SECTION 21.8PRACTICE SET 645
a.224.18.72.8
b.235.18.72.8
c.237.18.6.88
d.224.88.12.8
Research Activities
29.Usethepingprogram totestyourowncomputer (loopback)."
6546,30.Usethepingprogram totestahostinsidetheUnitedStates.
6547,31.Usethepingprogram totestahostoutsidetheUnitedStates.
6548,"32.Usetraceroute (ortracert)tofindtheroutefromyourcomputer toacomputer ina
collegeoruniversity."
6549,33.Usenetstattofindoutifyourserversupports multicast addressing.
6550,"34.DHCPusesseveralmessages suchasDHCPREQUEST, DHCPDECLINE,
DHCPACK, DHCPNACK, andDHCPRELEASE."
6551,"Findthepurpose ofthese
messages.CHAPTER 22
Network Layer:
Delivery, Forwarding, andRouting
Thischapterdescribes thedelivery, forwarding, androutingofIPpacketstotheirfinal
destinations."
6552,"Delivery referstothewayapacketishandledbytheunderlying networks
underthecontrolofthenetworklayer.Forwarding referstothewayapacketisdeliv­
eredtothenextstation.Routing referstothewayroutingtablesarecreatedtohelpin
forwarding."
6553,"Routingprotocols areusedtocontinuously updatetheroutingtablesthatarecon­
sultedforforwarding androuting.Inthischapter,wealsobrieflydiscusscommon uni­
castandmulticast routingprotocols."
6554,"22.1DELIVERY
Thenetwork layersupervises thehandling ofthepacketsbytheunderlying physical
networks.We definethishandling asthedeliveryofapacket."
6555,"DirectVersusIndirectDelivery
Thedeliveryofapackettoitsfinaldestination isaccomplished byusingtwodifferent
methodsofdelivery, directandindirect, asshowninFigure22.1.
DirectDelivery
Inadirectdelivery, thefinaldestination ofthepacketisahostconnected tothesame
physical networkasthedeliverer."
6556,"Directdeliveryoccurswhenthesourceanddestina­
tionofthepacketarelocatedonthesamephysical network orwhenthedelivery is
betweenthelastrouterandthedestination host."
6557,"Thesendercaneasilydetermine ifthedeliveryisdirect.Itcanextractthenetwork
addressofthedestination (usingthemask)andcompare thisaddresswiththeaddresses
ofthenetworks towhichitisconnected."
6558,"Ifamatchisfound,thedeliveryisdirect."
6559,"IndirectDelivery
Ifthedestination hostisnotonthesamenetwork asthedeliverer, thepacketisdeliv­
eredindirectly."
6560,"Inanindirectdelivery, thepacketgoesfromroutertorouteruntilit
reachestheoneconnected tothesamephysical network asitsfinaldestination."
6561,"Note
647648 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.1Directandindirectdelivery
Host Host Host(source)
Totherest
oftheInternet
a.DirectdeliveryHost(destination)
b.Indirectanddirectdelivery
thatadeliveryalwaysinvolvesonedirectdeliverybutzeroormoreindirectdeliveries."
6562,Notealsothatthelastdeliveryisalwaysadirectdelivery.
6563,"22.2FORWARDING
Forwarding meanstoplacethepacketinitsroutetoitsdestination."
6564,"Forwarding
requiresahostoraroutertohavearoutingtable.Whenahosthasapackettosendor
whenarouterhasreceived apackettobeforwarded, itlooksatthistabletofindthe
routetothefinaldestination."
6565,"However, thissimplesolutionisimpossible todayinan
internetwork suchastheInternetbecausethenumberofentriesneededintherouting
tablewouldmaketablelookupsinefficient."
6566,"Forwarding Techniques
Severaltechniques canmakethesizeoftheroutingtablemanageable andalsohandle
issuessuchassecurity.Webrieflydiscussthesemethodshere."
6567,"Next-Hop MethodVersusRouteMethod
Onetechnique toreducethecontentsofaroutingtableiscalledthenext-hop method."
6568,"Inthistechnique, therouting table holdsonlytheaddressofthenexthopinstead
ofinformation aboutthecomplete route(routemethod)."
6569,"Theentriesofaroutingtable
mustbeconsistent withoneanother.Figure22.2showshowroutingtablescanbesim­
plifiedbyusingthistechnique."
6570,"Network-Specific MethodVersusHost-Specific Method
Asecondtechnique toreducetheroutingtableandsimplify thesearching processis
calledthenetwork-specific method."
6571,"Here,insteadofhavinganentryforeverydesti­
nationhostconnected tothesamephysical network (host-specific method), wehaveSECTION 22.2FORWARDING 649
Figure22.2Routemethodversusnext-hop method
a.Routingtablesbasedonroute
Destination Route
HostB RI,R2,hostBRoutingtable
forhostAb.Routing tablesbasedonnexthop
Destination Nexthop
HostB Rl
Destination
HostB
Destination
HostB
HostARoute
R2,hostB
Route
HostBRoutingtable
forRl
Routingtable
forR2Destination
HostB
Destination
HostBNexthop
R2
Nexthop
HostB
onlyoneentrythatdefinestheaddressofthedestination networkitself.Inotherwords,
wetreatallhostsconnected tothesamenetworkasonesingleentity.Forexample, if
1000hostsareattached tothesamenetwork, onlyoneentryexistsintheroutingtable
insteadof1000.Figure22.3showstheconcept."
6572,"Figure22.3Host-specific versusnetwork-specific method
RoutingtableforhostSbased
onhost-specific method
Destination Nexthop
A Rl
B Rl
C Rl
D RlRoutingtableforhostSbased
onnetwork-specific method
Host-specific routingisusedforpurposes suchaschecking therouteorproviding
securitymeasures."
6573,"DefaultMethod
Anothertechnique tosimplifyroutingiscalledthedefaultmethod."
6574,"InFigure22.4host
Aisconnected toanetwork withtworouters.RouterRlroutesthepacketstohosts
connected tonetwork N2.However, fortherestoftheInternet, routerR2isused.So
insteadoflistingallnetworks intheentireInternet, hostAcanjusthaveoneentry
calledthedefault(normally definedasnetworkaddress0.0.0.0).650 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.4Defaultmethod
HostADestinat.iotl Nexthop,
N2 Rl
Anyother R2Routingtable
forhostA
N2
RestoftheInternet
Forwarding Process
Letusdiscusstheforwarding process.Weassumethathostsandroutersuseclassless
addressing becauseclassfuladdressing canbetreatedasaspecialcaseofclassless
addressing."
6575,"Inclasslessaddressing, theroutingtableneedstohaveonerowofinforma­
tionforeachblockinvolved."
6576,"Thetableneedstobesearched basedonthenetwork
address(firstaddressintheblock).Unfortunately, thedestination addressinthepacket
givesnoclueaboutthenetworkaddress.Tosolvetheproblem, weneedtoincludethe
mask(In)inthetable;weneedtohaveanextracolumnthatincludesthemaskforthe
corresponding block.Figure22.5showsasimpleforwarding moduleforclassless
addressing."
6577,"Figure22.5Simplified forwarding moduleinclassless address
Forwarding module
E""tract
Packet-f-+destination~
addressSearch
tableMask
(In)Network Next-hopInterfaceaddress address
Next-hop address
and
interface number
ToARP
Notethatweneedatleastfourcolumnsinourrouting table;usuallytherearemore."
6578,"Inclassless addressing, weneedatleastfourcolwnns inaroutingtable.SECTION 22.2FORWARDING 651
Example 22.1
MakearoutingtableforrouterRl,usingtheconfiguration inFigure22.6.
Figure22.6Configurationfor Example 22.1
180.70.65.135/25
mlmO
201.4.16.2/22 201.4.22.3/24m2Rl
180.70.65.194/26
180.70.65.200/26
RestoftheIntemet
Solution
Table22.1showsthecorresponding table."
6579,"Table22.1RoutingtableforrouterRIinFigure22.6
Mask NetworkAddress NextHop lnteiface
/26 180.70.65.192 - m2
/25 180.70.65.128 - mO
/24 201.4.22.0 - m3
/22 201.4.16.0 ...."
6580,"ml
Any Any 180.70.65.200 m2
Example 22.2
Showtheforwarding processifapacketarrivesatRlinFigure22.6withthedestination address
180.70.65.140."
6581,"Solution
Therouterperforms thefollowing steps:
1.Thefirstmask(/26)isappliedtothedestination address.Theresultis180.70.65.128, which
doesnotmatchthecorresponding networkaddress."
6582,"2.Thesecondmask(/25)isappliedtothedestination address.Theresultis180.70.65.128,
whichmatchesthecorresponding networkaddress.Thenext-hop address(thedestination
addressofthepacketinthiscase)andtheinterface numbermOarepassedtoARPforfurther
processing.652CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Example 22.3
Showtheforwarding processifapacketarrivesatR1inFigure22.6withthedestination address
201.4.22.35."
6583,"Solution
Therouterperforms thefollowing steps:
I.Thefirstmask(/26)isappliedtothedestination address.Theresultis201.4.22.0, which
doesnotmatchthecorresponding networkaddress(row1)."
6584,"2.Thesecondmask(/25)isappliedtothedestination address.Theresultis201.4.22.0, which
doesnotmatchthecorresponding networkaddress(row2)."
6585,"3.Thethirdmask(/24)isappliedtothedestination address.Theresultis201.4.22.0, which
matchesthecorresponding networkaddress.Thedestination addressofthepacketandthe
interface numberm3arepassedtoARP."
6586,"Example 22.4
Showtheforwarding processifapacketarrivesatR1inFigure22.6withthedestination address
18.24.32.78."
6587,"Solution
Thistimeallmasksareapplied,onebyone,tothedestination address,butnomatching network
addressisfound.Whenitreachestheendofthetable,themodulegivesthenext-hop address
180.70.65.200 andinterface numberm2toARP.Thisisprobably anoutgoing packagethatneeds
tobesent,viathedefaultrouter,tosomeplace elseintheInternet."
6588,"AddressAggregatioll
Whenweuseclassless addressing, itislikelythatthenumberofroutingtableentries
willincrease."
6589,"Thisissobecausetheintentofclassless addressing istodivideupthe
wholeaddressspaceintomanageable blocks.Theincreased sizeofthetableresultsin
anincreaseintheamountoftimeneededtosearchthetable.Toalleviate theproblem,
theideaofaddressaggregation wasdesigned."
6590,InFigure22.7wehavetworouters.
6591,RouterRlisconnected tonetworks offourorganizations thateachuse64addresses.
6592,"RouterR2issomewhere farfromRl.RouterRlhasalongerroutingtablebecauseeach
packetmustbecorrectly routedtotheappropriate organization."
6593,"RouterR2,ontheother
hand,canhaveaverysmallroutingtable.ForR2,anypacketwithdestination 140.24.7.0
to140.24.7.255 issentoutfrominterface mOregardless oftheorganization number.This
iscalledaddressaggregation becausetheblocksofaddresses forfourorganizations are
aggregated intoonelargerblock.RouterR2wouldhavealongerroutingtableifeach
organization hadaddresses thatcouldnotbeaggregated intooneblock."
6594,"Notethatalthough theideaofaddressaggregation issimilartotheideaofsubnet­
ting,wedonothaveacommon sitehere;thenetworkforeachorganization isindepen­
dent.Inaddition, wecanhaveseverallevelsofaggregation."
6595,"LongestMaskMatching
Whathappensifoneoftheorganizations inFigure22.7isnotgeographically closeto
theotherthree?Forexample, iforganization 4cannotbeconnected torouterRlfor
somereason,canwestillusetheideaofaddressaggregation andstillassignblock
140.24.7.192/26 toorganization 4?SECTION 22.2FORWARDING 653
Figure22.7Addressaggregation
Organization 1140.24.7.0/26
:~ ~;~~m_l __
Somewhere
intheInternetml
Organization 3140.24.7.128/26 ~-~Organization 2140.24.7.64/26
Organization 4140.24.7.192/26 ~------'
MaskNetwork Next-hopInterfaceaddress address
/26140.24.7.0 ---------- mO
/26140.24.7.64 ---------- ml
/26140.24.7.128 ---------- m2
/26140.24.7.192 ---------- m3
/0 0.0.0.0 Default m4MaskNetwork Next-hopInterfaceaddress address
/24 140.24.7.0-------~-- mO
/0 0.0.0.0 Default ml
RoutmgtableforR2
RoutingtableforRl
Theanswerisyesbecauseroutinginclassless addressing usesanotherprinciple,
longestmaskmatching."
6596,"Thisprinciple statesthattheroutingtableissortedfromthe
longestmasktotheshortestmask.Inotherwords,iftherearethreemasks127,126,and
124,themask/27mustbethefirstentryand124mustbelast.Letusseeifthisprinciple
solvesthesituation inwhichorganization 4isseparated fromtheotherthreeorganiza­
tions.Figure22.8showsthesituation."
6597,Suppose apacketarrivesfororganization 4withdestination address140.24.7.200.
6598,"ThefirstmaskatrouterR2isapplied,whichgivesthenetwork address140.24.7.192."
6599,"Thepacketisroutedcorrectly frominterface mlandreachesorganization 4.If,how­
ever,theroutingtablewasnotstoredwiththelongestprefixfirst,applying the/24mask
wouldresultintheincorrect routingofthepackettorouterRl.
Hierarchical Routing
Tosolvetheproblem ofgiganticroutingtables,wecancreateasenseofhierarchy in
theroutingtables.InChapter 1,wementioned thattheInternettodayhasasenseof
hierarchy."
6600,"WesaidthattheInternetisdividedintointernational andnational ISPs.
National ISPsaredividedintoregional ISPs,andregional ISPsaredividedintolocal
ISPs.Iftheroutingtablehasasenseofhierarchy like theInternetarchitecture, therout­
ingtablecandecrease insize."
6601,"LetustakethecaseofalocalISP.AlocalISPcanbeassigned asingle,butlarge
blockofaddresses withacertainprefixlength.ThelocalISPcandividethisblockinto
smallerblocksofdifferent sizesandcanassignthesetoindividual usersandorganiza­
tions,bothlargeandsmall.Iftheblockassigned tothelocalISPstartswitha.b.c.dln,
theISPcancreateblocksstartingwitheJ.g.h/m, wheremmayvaryforeachcustomer
andisgreaterthann.654 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.8Longestmaskmatching
RoutingtableforR2
140.24.7.192/26
Organization 4R3mlMaskNetwork Next-hopInterfaceaddress address
/26140.24.7.192 ---------- ml
/24 140.24.7.0 ---------- mO
I??"
6602,???????
6603,?????????
6604,"ml
/0 0.0.0.0 Default m2
Toothernetworks----I
Z;--------------~!2~
Iml
I
II
mllOrganization 3140.24.7.128/26Organization 2140.24.7.64/26
RoutmgtableforRIMaskNetwork Next-hopInterfaceaddress address
/26 140.24.7.0 ---------- mO
/26 140.24.7.64 ----~---~- ml
/26140.24.7.128 ---------- m2
/0 0.0.0.0 Default m3Organization 1140.24.7.0/26
MaskNetwork Next-hopInterfaceaddress address
/26140.24.7.192 ---------- rnO
I??"
6605,???????
6606,?????????
6607,"rnl
/0 0.0.0.0 Default rn2
RoutingtableforR3
Howdoesthisreducethesizeoftheroutingtable?TherestoftheInternetdoesnot
havetobeawareofthisdivision."
6608,"Allcustomers ofthelocalISParedefinedasa.b.c.dlnto
therestoftheInternet.Everypacketdestinedforoneoftheaddresses inthislargeblockis
routedtothelocalISP.Thereisonlyoneentryineveryrouterintheworldforallthesecus­
tomers.Theyallbelongtothesamegroup.Ofcourse,insidethelocalISp,theroutermust
recognize thesubblocks androutethepackettothedestined customer.Ifoneofthecus­
tomersisalargeorganization, italsocancreateanotherlevelofhierarchy bysubnetting
anddividingitssubblock intosmallersubblocks (orsub-subblocks)."
6609,"Inclassless routing,
thelevelsofhierarchy areunlimited solongaswefollowtherulesofclassless addressing."
6610,"Example 22.5
Asanexampleofhierarchical routing, letusconsider Figure22.9.AregionalISPisgranted
16,384addresses startingfrom120.14.64.0. TheregionalISPhasdecidedtodividethisblock
intofoursubblocks, eachwith4096addresses."
6611,"Threeofthesesubblocks areassigned tothree
localISPs;thesecondsubblock isreservedforfutureuse.Notethatthemaskforeachblockis120
becausetheoriginalblockwithmask/18isdividedinto4blocks."
6612,"ThefirstlocalISPhasdivideditsassigned subblock into8smallerblocksandassigned each
toasmallISP.EachsmallISPprovides servicesto128households (HOOItoHI28),eachusing
fouraddresses."
6613,"NotethatthemaskforeachsmallISPisnow123becausetheblockisfurther
dividedinto8blocks.Eachhousehold hasamaskof130,becauseahousehold hasonlyfour
addresses (232-30is4).SECTION 22.2FORWARDING 655
Figure22.9Hierarchical routingwithISPs
120.14.64.0118
Total16384120.14.80.0/20
Tota14096120.14.64.0/20
Tota14096120.14.64.0/23
Total512
LOrgOl120.14.96.0/22·120.14.96.0/20·LOrg04·Total4096
SOrg01120.14.112.0/24
• 120.14.112.0120·SOrg16• Total4096H128-------t__~120.14.78.0/23H001120.14.78.0/30
Total512H001120.14.64.0/30
H128----L_.J
ThesecondlocalISPhasdivideditsblockinto4blocksandhasassigned theaddresses to
fourlargeorganizations (LOrg01 toLOrg04)."
6614,"Notethateachlargeorganization has1024addresses,
andthemaskis/22."
6615,"ThethirdlocalISPhasdivideditsblockinto16blocksandassigned eachblocktoa
smallorganization (SOrg01 toSOrg16)."
6616,"Eachsmallorganization has256addresses, andthe
maskis/24."
6617,Thereisasenseofhierarchy inthisconfiguration.
6618,"AllroutersintheInternetsendapacket
withdestination address120.14.64.0 to120.14.127.255 totheregionalISP."
6619,"TheregionalISPsendseverypacketwithdestination address120.14.64.0 to120.14.79.255
tolocalISPl.LocalISP1sendseverypacketwithdestination address120.14.64.0 to120.14.64.3
toH001."
6620,"Geographical Routing
Todecrease thesizeoftheroutingtableevenfurther,weneedtoextendhierarchical
routingtoincludegeographical routing.Wemustdividetheentireaddressspace into a
fewlargeblocks.WeassignablocktoNorthAmerica, ablocktoEurope,ablockto
Asia,ablocktoAfrica,andsoon.TheroutersofISPsoutsideEuropewillhaveonly
oneentryforpacketstoEuropeintheirroutingtables.TheroutersofISPsoutside
NorthAmerica willhaveonlyoneentryforpacketstoNorthAmerica intheirrouting
tables.Andsoon."
6621,"Routing Table
Letusnowdiscussroutingtables.Ahostorarouterhasaroutingtablewithanentry
foreachdestination, oracombination ofdestinations, torouteIPpackets.Therouting
tablecanbeeitherstaticordynamic."
6622,"StaticRoutingTable
Astaticroutingtablecontainsinformation enteredmanually."
6623,"Theadministrator enters
therouteforeachdestination intothetable.Whenatableiscreated,itcannotupdate656CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
automatically whenthereisachangeintheInternet.Thetablemustbemanually altered
bytheadministrator."
6624,"Astaticroutingtablecanbeusedinasmallinternetthatdoesnotchangeveryoften,
orinanexperimental internetfortroubleshooting."
6625,"Itispoorstrategytouseastaticrouting
tableinabiginternetsuchastheInternet."
6626,"Dynamic Routing Table
Adynamic routingtableisupdatedperiodically byusingoneofthedynamic routing
protocols suchasRIP,OSPF,orBGP.Whenever thereisachangeintheInternet, such
asashutdown ofarouterorbreaking ofalink,thedynamic routingprotocols updateall
thetablesintherouters(andeventually inthehost)automatically."
6627,"TheroutersinabiginternetsuchastheInternetneedtobeupdateddynamically
forefficientdeliveryoftheIPpackets.Wediscussindetailthethreedynamic routing
protocols laterinthechapter."
6628,"Format
Asmentioned previously, aroutingtableforclassless addressing hasaminimum of
fourcolumns."
6629,"However, someoftoday'sroutershaveevenmorecolumns."
6630,"Weshould
beawarethatthenumberofcolumns isvendor-dependent, andnotallcolumns canbe
found in allrouters.Figure22.10showssomecommon fields intoday'srouters."
6631,"Figure22.10Common fieldsinaroutingtable
MaskNetwork
addressNext-hop
addressInterlaceReference
count.Use
oMask.Thisfielddefinesthemaskappliedfortheentry."
6632,oNetwork address.
6633,"Thisfielddefinesthenetwork addresstowhichthepacketis
finallydelivered."
6634,"Inthecaseofhost-specific routing,thisfielddefinestheaddress
ofthedestination host."
6635,oNext-hop address.
6636,"Thisfielddefinestheaddressofthenext-hop routertowhich
thepacketisdelivered."
6637,DInterface.
6638,Thisfieldshowsthenameoftheinterface.
6639,"DFlags.Thisfielddefinesuptofiveflags.Flagsareon/offswitches thatsignify
eitherpresence orabsence.ThefiveflagsareU(up),G(gateway), H(host-specific),
D(addedbyredirection), andM(modified byredirection)."
6640,"a.U(up).TheUflagindicates therouterisupandrunning.Ifthisflagisnotpresent,
itmeansthattherouterisdown.Thepacketcannotbeforwarded andisdiscarded."
6641,b.G(gateway).
6642,TheGflagmeansthatthedestination isinanothernetwork.
6643,"The
packetisdelivered tothenext-hop routerfordelivery(indirect delivery)."
6644,"When
thisflagismissing, itmeansthedestination isinthisnetwork(directdelivery).SECTION 22.2FORWARDING 657
c.H(host-specific)."
6645,"TheHflagindicates thattheentryinthenetwork address
fieldisahost-specific address.Whenitismissing, itmeansthattheaddressis
onlythenetworkaddressofthedestination."
6646,d.D(addedbyredirection).
6647,"TheDflagindicates thatroutinginformation forthis
destination hasbeenaddedtothehostroutingtablebyaredirection message
fromICMP.Wediscussed redirection andtheICMPprotocol inChapter21."
6648,e.M(modified byredirection).
6649,"TheMflagindicates thattheroutinginformation
forthisdestination hasbeenmodified byaredirection message fromICMP.We
discussed redirection andtheICMPprotocol inChapter21."
6650,oReference count.Thisfieldgivesthenumberofusersofthisrouteatthemoment.
6651,"Forexample, iffivepeopleatthesametimeareconnecting tothesamehostfrom
thisrouter,thevalueofthiscolumnis5."
6652,"oUse.Thisfieldshowsthenumberofpacketstransmitted throughthisrouterforthe
corresponding destination."
6653,"Utilities
Thereareseveralutilitiesthatcanbeusedtofindtheroutinginformation andthecon­
tentsofaroutingtable.Wediscussnetstatandifconfig."
6654,"Example 22.6
Oneutilitythatcanbeusedtofindthecontentsofaroutingtableforahostorrouterisnetstatin
UNIXorLINUX."
6655,"Thefollowing showsthelistofthecontentsofadefaultserver.Wehaveused
twooptions,randn.Theoptionrindicates thatweareinterested intheroutingtable,andthe
optionnindicates thatwearelookingfornumericaddresses."
6656,"Notethatthisisaroutingtablefora
host,notarouter.Although wediscussed theroutingtableforarouterthroughout thechapter,ahost
alsoneedsaroutingtable."
6657,"$netstat-rn
KernelIProutingtable
Destination Gateway
153.18.16.0 0.0.0.0
127.0.0.0 0.0.0.0
0.0.0.0 153.18.31.254Mask
255.255.240.0
255.0.0.0
0.0.0.0Flags
U
U
UOIface
ethO
10
ethO
Notealsothattheorderofcolumnsisdifferentfromwhatweshowed.Thedestination column
heredefinesthenetworkaddress.ThetermgatewayusedbyUNIXissynonymous withrouter.This
columnacmallydefinestheaddressofthenexthop.Thevalue0.0.0.0showsthatthedeliveryis
direct.ThelastentryhasaflagofG,whichmeansthatthedestination canbereachedthrougha
router(defaultrouter).TheIfacedefinestheinterface."
6658,"Thehosthasonlyonerealinterface, ethO,
whichmeansinterface 0connected toanEthernet network."
6659,"Thesecondinterface, la,isactuallya
virmalloopback interface indicating thatthehostacceptspacketswithloopback address127.0.0.0.
Moreinformation abouttheIPaddressandphysical addressoftheservercanbefoundby
usingtheifconfigcommand onthegiveninterface (ethO)."
6660,"$ifconfigethO
ethOLinkencap:Ethemet HWaddr 00:BO:DO:DF:09:5D
inetaddr:153.18.17.11 Bcast:153.18.31.255 Mask:255.255.240.0658 CHAPTER 22NETWORK IAYER:DELIVERY, FORWARDING, ANDROUTING
Fromtheaboveinformation, wecandeducetheconfiguration oftheserver,asshownin
Figure22.11."
6661,"Figure22.11 Configuration oftheserverforExample 22.6
==c:;::;:::;:::u
E::::9-ethO
00:BO:DO:DF:09:5D 153.18.17.ll/20
153.18.31.254/20RestoftheInternet
Notethattheifconfigcommand givesustheIPaddressandthephysical (hardware) address
oftheinterface."
6662,"22.3UNICAST ROUTING PROTOCOLS
Aroutingtablecanbeeitherstaticordynamic."
6663,Astatictableisonewithmanualentries.
6664,"Adynamic table,ontheotherhand,isonethatisupdatedautomatically whenthereisa
changesomewhere intheinternet.Today,aninternetneedsdynamicrouting tables.The
tablesneedtobeupdatedassoonasthereisachangeintheinternet.Forinstance, they
needtobeupdatedwhenarouterisdown,andtheyneedtobeupdatedwhenever abetter
routehasbeenfound."
6665,"Routingprotocols havebeencreatedinresponse tothedemandfordynamic routing
tables.Aroutingprotocolisacombination ofrulesandprocedures thatletsroutersin
theinternetinformeachotherofchanges.Itallowsrouterstosharewhatever theyknow
abouttheinternetortheirneighborhood."
6666,"Thesharingofinformation allowsarouterin
SanFrancisco toknowaboutthefailureofanetworkinTexas.Theroutingprotocols
alsoincludeprocedures forcombining information receivedfromotherrouters."
6667,"Optimization
Arouterreceivesapacketfromanetworkandpassesittoanothernetwork."
6668,"Arouteris
usuallyattached toseveralnetworks."
6669,"Whenitreceives apacket,towhichnetwork
shoulditpassthepacket?Thedecisionisbasedonoptimization: Whichoftheavailable
pathways istheoptimum pathway?"
6670,Whatisthedefinition ofthetermoptimum?
6671,Oneapproach istoassignacostforpassingthroughanetwork.
6672,"Wecallthiscosta
metric.However, themetricassigned toeachnetworkdepends onthetypeofproto­
col.Somesimpleprotocols, suchastheRoutingInformation Protocol (RIP),treatall
networks asequals.Thecostofpassingthroughanetworkisthesame;itisonehop
count.Soifapacketpassesthrough10networks toreachthedestination, thetotalcost
is10hopcounts.SECTION 22.3UNICAST ROUTING PROTOCOLS 659
Otherprotocols, suchasOpenShortestPathFirst(OSPF),allowtheadministrator to
assignacostforpassingthroughanetworkbasedonthetypeofservicerequired."
6673,"Aroute
throughanetworkcanhavedifferent costs(metrics)."
6674,"Forexample, ifmaximum through­
putisthedesiredtypeofservice,asatellitelinkhasalowermetricthanafiber-optic line."
6675,"Ontheotherhand,ifminimum delayisthedesiredtypeofservice,afiber-optic linehas
alowermetricthanasatellitelink.Routersuseroutingtablestohelpdecidethebest
route.OSPFprotocol allowseachroutertohaveseveralroutingtablesbasedonthe
requiredtypeofservice."
6676,"Otherprotocols definethemetricinatotallydifferent way.IntheBorderGateway
Protocol (BGP),thecriterion isthepolicy,whichcanbesetbytheadministrator."
6677,"The
policydefineswhatpathsshouldbechosen."
6678,"Intra-andInterdomain Routing
Today,aninternetcanbesolargethatoneroutingprotocol cannothandlethetaskof
updating theroutingtablesofallrouters.Forthisreason,aninternetisdividedinto
autonomous systems."
6679,"Anautonomous system(AS)isagroupofnetworks androuters
undertheauthority ofasingleadministration."
6680,"Routinginsideanautonomous systemis
referredtoasintradomain routing."
6681,"Routingbetween autonomous systemsisreferred
toasinterdomain routing."
6682,"Eachautonomous systemcanchooseoneormoreintrado­
mainroutingprotocols tohandleroutinginsidetheautonomous system.However, only
oneinterdomain routingprotocol handlesroutingbetween autonomous systems(see
Figure22.12)."
6683,"Figure22.12Autonomous systems
Autonomous system Autonomous system
~A...R4
Autonomous system···
....•_~D-""""1IIIIIr'
Autonomous system
Severalintradomain andinterdomain routingprotocols areinuse.Inthissection,
wecoveronlythemostpopularones.Wediscusstwointradomain routingprotocols:
distancevectorandlinkstate.Wealsointroduce oneinterdomain routingprotocol: path
vector(seeFigure22.13)."
6684,"RoutingInformation Protocol (RIP)isanimplementation ofthedistance vector
protocol.OpenShortestPathFirst(OSPF)isanimplementation ofthelinkstateproto­
col.BorderGateway Protocol(BGP)isanimplementation ofthepathvectorprotocol.660 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Figure22.13 Popularroutingprotocols
Distance VectorRouting
Indistance vectorrouting, theleast-cost routebetween anytwonodesistheroute
withminimum distance."
6685,"Inthisprotocol, asthenameimplies,eachnodemaintains a
vector(table)ofminimum distances toeverynode.Thetableateachnodealsoguides
thepacketstothedesirednodebyshowingthenextstopintheroute(next-hop routing)."
6686,"Wecanthinkofnodesasthecitiesinanareaandthelinesastheroadsconnecting
them.Atablecanshowatouristtheminimum distancebetween cities."
6687,"InFigure22.14,weshowasystemoffivenodeswiththeircorresponding tables."
6688,"Figure22.14Distance vectorroutingtables
D'stable E'stableToCostNext
A
B
C
D
EToCostNext
A 5¥!:
B()~W
~:~~i
E3~~."
6689,"B'stable
3
e'stableA 2
B 4
C(}
D'5
E 43<
8
5
o
93
A
B
C
D
EA
B
C
D
E
ToCostNextToCostNext
ThetablefornodeAshowshowwecanreachanynodefromthisnode.Forexam­
ple,ourleastcosttoreachnodeEis6.TheroutepassesthroughC."
6690,"Initialization
ThetablesinFigure22.14arestable;eachnodeknowshowtoreachanyothernode
andthecost.Atthebeginning, however, thisisnotthecase.EachnodecanknowonlySECTION 22.3UNICAST ROUTING PROTOCOLS 661
thedistancebetweenitselfanditsimmediate neighbors, thosedirectlyconnected toit."
6691,"Soforthemoment, weassumethateachnodecansendamessage totheimmediate
neighbors andfindthedistancebetweenitselfandtheseneighbors."
6692,"Figure22.15shows
theinitialtablesforeachnode.Thedistance foranyentrythatisnotaneighbor is
markedasinfinite(unreachable)."
6693,"Figure22.15Initialization oftablesindistancevectorrouting
3ToCostNext
A-O,'~'i~·
~n~
E""""f~~~,;:'
A'stable
ToCostNext
A3
~B,'""'
,
C .>~,~
D0[""
E""""k<7
D'stableD
~5:J~
4(~i
C'stable3A
B
C
DM
E3
ToCostNext
QQ ~;""~~c,'.;
():jf,
E'stable
Sharing
Thewholeideaofdistancevectorroutingisthesharingofinformation between neigh­
bors.Although nodeAdoesnotknowaboutnodeE,nodeCdoes.SoifnodeCshares
itsroutingtablewithA,nodeAcanalsoknowhowtoreachnodeE.Ontheotherhand,
nodeCdoesnotknowhowtoreachnodeD,butnodeAdoes.IfnodeAsharesitsrout­
ingtablewithnodeC,nodeCalsoknowshowtoreachnodeD.Inotherwords,nodes
AandC,asimmediate neighbors, canimprove theirroutingtablesiftheyhelpeach
other."
6694,Thereisonlyoneproblem.
6695,"Howmuchofthetablemustbesharedwitheach
neighbor?"
6696,"Anodeisnotawareofaneighbor's table.Thebestsolutionforeachnode
istosenditsentiretabletotheneighbor andlettheneighbor decidewhatpartto
useandwhatparttodiscard.However, thethirdcolumnofatable(nextstop)isnot
usefulfortheneighbor."
6697,"Whentheneighbor receives atable,thiscolumnneedsto
bereplaced withthesender's name.Ifanyoftherowscanbeused,thenextnodeis
thesenderofthetable.Anodetherefore cansendonlythefirsttwocolumns ofits
tabletoanyneighbor."
6698,"In other words,sharingheremeanssharingonlythefirsttwo
columns."
6699,"Indistancevectorrouting,eachnodesharesitsroutingtablewithits
immediate neighbors periodically andwhenthereisachange.662 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
Updating
Whenanodereceivesatwo-column tablefromaneighbor, itneedstoupdateitsrout­
ingtable.Updating takesthreesteps:
1.Thereceiving nodeneedstoaddthecostbetween itselfandthesendingnode
toeachvalueinthesecondcolumn.Thelogicisclear.IfnodeCclaimsthatits
distancetoadestination isxmi,andthedistancebetweenAandCisymi,thenthe
distancebetweenAandthatdestination, viaC,isx+ymi."
6700,"2.Thereceiving nodeneedstoaddthenameofthesendingnodetoeachrowasthe
thirdcolumnifthereceiving nodeusesinformation fromanyrow.Thesending
nodeisthenextnodeintheroute."
6701,"3.Thereceiving nodeneedstocompareeachrowofitsoldtablewiththecorrespond­
ingrowofthemodified versionofthereceivedtable."
6702,"a.Ifthenext-node entryisdifferent, thereceiving nodechoosestherowwiththe
smallercost.Ifthereisatie,theoldoneiskept."
6703,"b.Ifthenext-node entryisthesame,thereceiving nodechoosesthenewrow.For
example, supposenodeChaspreviously advertised aroutetonodeXwithdis­
tance3.SupposethatnowthereisnopathbetweenCandX;nodeCnowadver­
tisesthisroutewithadistanceofinfinity.NodeAmustnotignorethisvalue
eventhoughitsoldentry issmaller.Theoldroutedoesnotexistanymore.The
newroutehasadistanceofinfinity."
6704,"Figure22.16showshownodeAupdatesitsroutingtableafterreceiving thepartialtable
fromnodeC."
6705,"Figure22.16 Updating indistance vectorrouting
ToCost ToCostNext ToCostNext
A~2 A4 A0
B4 B6 B.5
cif C2 C2
D ,1?0~_ D D'3
E4 E6 Eqo
Received A'smodified A'soldtable
frome table ToCostNext
A0
B5
C2
D3
E6
Thereareseveralpointsweneedtoemphasize here.First,asweknowfrommath­
ematics, whenweaddanynumbertoinfinity,theresultisstillinfinity.Second,the
modified tableshowshowtoreachAfromAviaC.IfAneedstoreachitselfviaC,it
needstogotoCandcomeback,adistanceof4.Third,theonlybenefitfromthisupdat­
ingofnodeAisthelastentry,howtoreachE.Previously, nodeAdidnotknowhowto
reachE(distance ofinfinity); nowitknowsthatthecostis6viaC.SECTION 22.3UNICAST ROUTING PROTOCOLS 663
Eachnodecanupdateitstablebyusingthetablesreceived fromothernodes.Ina
shorttime,ifthereisnochangeinthenetwork itself,suchasafailureinalink,each
nodereachesastablecondition inwhichthecontentsofitstableremainsthesame."
6706,"WhentoShare
Thequestion nowis,Whendoesanodesenditspartialroutingtable(onlytwocolumns)
toallitsimmediate neighbors?"
6707,"Thetableissentbothperiodically andwhenthereisa
changeinthetable."
6708,"Periodic Update Anodesendsitsroutingtable,normally every30s,inaperiodic
update.Theperioddependsontheprotocol thatisusingdistance vectorrouting."
6709,"Triggered Update Anodesendsitstwo-column routingtabletoitsneighbors any­
timethereisachangeinitsroutingtable.Thisiscalledatriggered update."
6710,"The
changecanresultfromthefollowing."
6711,"1.Anodereceives atablefromaneighbor, resulting inchangesinitsowntableafter
updating."
6712,"2.Anodedetectssomefailureintheneighboring linkswhichresultsinadistance
changetoinfinity."
6713,"Two-Node LoopInstability
Aproblem withdistancevectorroutingisinstability, whichmeansthatanetworkusing
thisprotocol canbecomeunstable."
6714,"Tounderstand theproblem, letuslookatthescenario
depicted inFigure22.17."
6715,"Figure22.17Two-node instability
Before
failure
After
failure ·•·IAft""Breceives
update
fromA
g€,I_o
~_-~_~_··__'__4__~_'~_'_""_:
r-o----~-··~-~-:~-¥,t-:
 --4--~-X-:-;:-J-I) --,Finally
Figure22.17showsasystemwiththreenodes.Wehaveshownonlytheportionsof
theroutingtableneededforourdiscussion."
6716,"Atthebeginning, bothnodesAandBknow
howtoreachnodeX.Butsuddenly, thelinkbetween AandXfails.NodeAchangesits
table.IfAcansenditstabletoBimmediately, everything isfine.However, thesystem
becomes unstable ifBsendsitsroutingtabletoAbeforereceiving A'sroutingtable."
6717,"NodeAreceives theupdateand,assuming thatBhasfoundawaytoreachX,immedi­
atelyupdatesitsroutingtable.Basedonthetriggered updatestrategy, Asendsitsnew664CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
updatetoB.NowBthinksthatsomething hasbeenchanged aroundAandupdatesits
routingtable.Thecostofreaching Xincreases gradually untilitreachesinfinity.Atthis
moment, bothAandBknowthatXcannotbereached."
6718,"However, duringthistimethe
systemisnotstable.NodeAthinksthattheroute toXisviaB;nodeBthinksthatthe
routetoXisviaA.IfAreceivesapacketdestined forX,itgoestoBandthencomes
backtoA.Similarly, ifBreceivesapacketdestined forX,itgoestoAandcomesback
toB.PacketsbouncebetweenAandB,creatingatwo-node loopproblem."
6719,"Afewsolu­
tionshavebeenproposed forinstability ofthiskind."
6720,"Defining Infinity Thefirstobvioussolutionistoredefineinfinitytoasmallernum­
ber,suchas100.Forourprevious scenario, thesystemwillbestableinlessthan20
updates."
6721,"Asamatteroffact,mostimplementations ofthedistance vectorprotocol
definethedistancebetween eachnodetobeIanddefine16asinfinity.However, this
meansthatthedistancevectorroutingcannotbeusedinlargesystems."
6722,"Thesizeofthe
network, ineachdirection, cannotexceed15hops."
6723,SplitHorizon Another solution iscalledsplithorizon.
6724,"Inthisstrategy, insteadof
flooding thetablethrougheachinterface, eachnodesendsonlypartofitstablethrough
eachinterface."
6725,"If,according toitstable,nodeBthinksthattheoptimum routetoreach
XisviaA,itdoesnotneedtoadvertise thispieceofinformation toA;theinformation
hascornefromA(Aalreadyknows).Takinginformation fromnodeA,modifying it,
andsendingitbacktonodeAcreatestheconfusion."
6726,"Inourscenario, nodeBeliminates
thelastlineofitsroutingtablebeforeitsendsittoA.Inthiscase,nodeAkeepsthe
valueofinfinityasthedistance toX.LaterwhennodeAsendsitsroutingtabletoB,
nodeBalsocorrectsitsroutingtable.Thesystembecomes stableafterthefirstupdate:
bothnodeAandBknowthatXisnotreachable."
6727,"SplitHorizon andPoisonReverse Usingthesplithorizonstrategyhasonedraw­
back.Normally, thedistancevectorprotocol usesatimer,andifthereisnonewsabout
aroute,thenodedeletestheroutefromitstable.WhennodeBintheprevious scenario
eliminates theroutetoXfromitsadvertisement toA,nodeAcannotguessthatthisis
duetothesplithorizonstrategy(thesourceofinformation wasA)orbecauseBhasnot
received anynewsaboutXrecently."
6728,"Thesplithorizonstrategycanbecombined with
thepoisonreversestrategy."
6729,"NodeBcanstilladvertise thevalueforX,butifthesource
ofinformation isA,itcanreplacethedistance withinfinityasawarning: ""Donotuse
thisvalue;whatIknowaboutthisroutecomesfromyou.""
Three-Node Instability
Thetwo-node instability canbeavoidedbyusingthesplithorizonstrategycombined
withpoisonreverse.However, iftheinstability isbetween threenodes,stabilitycannot
beguaranteed."
6730,Figure22.18showsthescenario.
6731,"Suppose, afterfindingthatXisnotreachable, nodeAsendsapackettoBandCto
informthemofthesituation."
6732,"NodeBimmediately updatesitstable,butthepackettoC
islostinthenetworkandneverreachesC.NodeCremainsinthedarkandstillthinks
thatthereisaroutetoXviaAwithadistanceof5.Afterawhile,nodeCsendstoBits
routingtable,whichincludes theroutetoX.NodeBistotallyfooledhere.Itreceives
information ontheroutetoXfromC,andaccording tothealgorithm, itupdatesitsSECTION 22.3UNICAST ROUTING PROTOCOLS 665
Figure22.18Three-node instability
Beforefailure
AfterAsends
theroutetoB0
andC,butthe
packettoC
islost[ill8
2 AfterBsends
theroutetoA
AfterCsends
theroutetoB
table,showing theroutetoXviaCwithacostof8.Thisinformation hascomefromC,
notfromA,soafterawhilenodeBmayadvertise thisroutetoA.NowAisfooledand
updatesitstabletoshowthatAcanreachXviaBwithacostof12.Ofcourse,theloop
continues; nowAadvertises theroutetoXtoC,withincreased cost,butnottoB.Node
Cthenadvertises theroutetoBwithanincreased cost.NodeBdoesthesametoA."
6733,Andsoon.Theloopstopswhenthecostineachnodereachesinfinity.
6734,"RIP
TheRouting Information Protocol (RIP)isanintradomain routingprotocol used
insideanautonomous system.Itisaverysimpleprotocol basedondistance vector
routing.RIPimplements distancevectorroutingdirectlywithsomeconsiderations:
1.Inanautonomous system,wearedealingwithroutersandnetworks (links).The
routershaveroutingtables;networks donot."
6735,"2.Thedestination inaroutingtableisanetwork, whichmeansthefirstcolumn
definesanetworkaddress."
6736,"3.ThemetricusedbyRIPisverysimple;thedistance isdefinedasthenumberof
links(networks) toreachthedestination."
6737,"Forthisreason,themetricinRIPiscalled
ahopcount."
6738,"4.Infinityisdefinedas16,whichmeansthatanyrouteinanautonomous systemusing
RIPcannothavemorethan15hops."
6739,"5.Thenext-node columndefinestheaddressoftheroutertowhichthepacketistobe
senttoreachitsdestination."
6740,"Figure22.19showsanautonomous systemwithsevennetworks andfourrouters.The
tableofeachrouterisalsoshown.LetuslookattheroutingtableforRl.Thetablehas
sevenentriestoshowhowtoreacheachnetworkintheautonomous system.RouterRlis
directlyconnected tonetworks 130.10.0.0 and130.11.0.0, whichmeansthatthereareno
next-hop entriesforthesetwonetworks."
6741,"Tosendapackettooneofthethreenetworks at
thefarleft,routerRlneedstodeliverthepackettoR2.Thenext-node entryforthese
threenetworks istheinterface ofrouterR2withIPaddress130.10.0.1. Tosendapacket
tothetwonetworks atthefarright,routerRlneedstosendthepackettotheinterface of
routerR4withIPaddress130.11.0.1. Theothertablescanbeexplained similarly.666CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.19ExampleofadomainusingRIP
195.2.4.0130.10.0.0 130.11.0.0205.5.5.0
Dest.HopNext
130.10.0.0 2130.11.0.2
130.11.0.0 1
195.2.4.0 3130.11.0.2
195.2.5.0 3130.11.0.2
195.2.6.0 4130.11.0.2
205.5.5.0 1
205.5.6.0 1
R4Table
205.5.6.0205.5.5.1
R4
130.11.0.1
205.5.6.1
RITableN
~
Q..."
6742,~R1...
6743,"Des!HopNext
130.10.0.0 1--
130.11.0.0 1--
195.2.4.0 2130.10.0.1
195.2.5.0 2130.10.0.1
195.2.6.0 3130.10.0.1
205.5.5.0 2130.11.0.1
205.5.6.0 2130.11.0.1130.10.0.1
195.2.5.1
195.2.5.0
195.2.5.2195.2.4.1
R3
195.2.6.1
195.2.6.0Dest.HopNext
R3Table130.10.0.0 1
130.11.0.0 2130.10.0.2
195.2.4.0 1
195.2.5.0 1
195.2.6.0 2195.2.5.2 R2
205.5.5.0 3130.10.0.2
205.5.6.0 3130.10.0.2
R2Table
Dest.HopNext
130.10.0.0 2195.2.5.1
130.11.0.0 3195.2.5.1
195.2.4.0 2195.2.5.1
195.2.5.0 1
195.2.6.0 1
205.5.5.0 4195.2.5.1
205.5.6.0 4195.2.5.1
LinkStateRouting
Linkstateroutinghasadifferent philosophy fromthatofdistance vectorrouting.In
linkstaterouting,ifeachnodeinthedomainhastheentiretopology ofthedomain­
thelistofnodesandlinks,howtheyareconnected including thetype,cost(metric), and
condition ofthelinks(upordown)-the nodecanuseDijkstra's algorithm tobuilda
routingtable.Figure22.20showstheconcept."
6744,"Figure22.20Conceptoflinkstaterouting
Thefigureshowsasimpledomainwithfivenodes.Eachnodeusesthesametopology
tocreatearoutingtable,buttheroutingtableforeachnodeisuniquebecausethecalcu­
lationsarebasedondifferent interpretations ofthetopology."
6745,"Thisisanalogous toacity
map.Whileeachpersonmayhavethesamemap,eachneedstotakeadifferent routeto
reachherspecificdestination.SECTION 22.3UNICAST ROUTING PROTOCOLS 667
Thetopology mustbedynamic, representing thelateststateofeachnodeandeach
link.Iftherearechangesinanypointinthenetwork(alinkisdown,forexample), the
topology mustbeupdatedforeachnode."
6746,"Howcanacommon topology bedynamic andstoredineachnode?Nonodecan
knowthetopology atthebeginning orafterachangesomewhere inthenetwork."
6747,"Link
stateroutingisbasedontheassumption that,although theglobalknowledge aboutthe
topology isnotclear,eachnodehaspartialknowledge: itknowsthestate(type,condi­
tion,andcost)ofitslinks.Inotherwords,thewholetopology canbecompiled fromthe
partialknowledge ofeachnode.Figure22.21showsthesamedomainasinFigure22.20,
indicating thepartoftheknowledge belonging toeachnode."
6748,"Figure22.21Linkstateknowledge
""I
A'sstatesoflinks ~
,:(""'$-~
.-...,/'3' '""
I ~
D'sstatesoflinks ~.,;1
\ I
......' ~,-,,/
....::;'-,,- C~:,....C'sstatesofIinks /'-~3""""
I"",,,
I."
6749,"\
t4: IE'sstatesofIinks, '.}
""""-_.-'
NodeAknowsthatitisconnected tonodeBwithmetric5,tonodeCwithmetric2,
andtonodeDwithmetric3.NodeCknowsthatitisconnected tonodeAwithmetric2,
tonodeBwithmetric4,andtonodeEwithmetric4.NodeDknowsthatitiscon­
nectedonlytonodeAwithmetric3.Andsoon.Although thereisanoverlapinthe
knowledge, theoverlapguarantees thecreationofacommon topology-a pictureof
thewholedomainforeachnode."
6750,"Building Routing Tables
Inlinkstaterouting, foursetsofactionsarerequiredtoensurethateachnodehasthe
routing table showingtheleast-costnodetoeveryothernode."
6751,"].Creationofthestatesofthelinksbyeachnode,calledthelinkstatepacket(LSP)."
6752,"2.Dissemination ofLSPstoeveryotherrouter,calledflooding, inanefficientand
reliableway."
6753,3.Formation ofashortestpathtreeforeachnode.
6754,4.Calculation ofaroutingtablebasedontheshortestpathtree.
6755,"Creation ofLinkStatePacket(LSP)Alinkstatepacketcancarryalargeamount
ofinformation."
6756,"Forthemoment, however, weassumethatitcarriesaminimum amount668CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
ofdata:thenodeidentity,thelistoflinks,asequence number,andage.Thefirsttwo,
nodeidentity and thelistoflinks,areneededtomakethetopology."
6757,"Thethird,sequence
number,facilitates floodinganddistinguishes newLSPsfromoldones.Thefourth,age,
preventsoldLSPsfromremaining inthedomainforalongtime.LSPsaregenerated on
twooccasions:
1.Whenthereisachangeinthetopologyofthedomain.Triggering ofLSPdissemi­
nationisthemainwayofquicklyinforming anynodeinthedomaintoupdateits
topology."
6758,"2.Onaperiodic basis.Theperiodinthiscaseismuchlongercompared todistance
vectorrouting.Asamatteroffact,thereisnoactualneedforthistypeofLSPdis­
semination."
6759,Itisdonetoensurethatoldinformation isremoved fromthedomain.
6760,"Thetimersetforperiodicdissemination isnormally intherangeof60minor2 h
basedontheimplementation."
6761,"Alongerperiodensuresthatfloodingdoesnotcreate
toomuchtrafficonthenetwork."
6762,"Flooding ofLSPsAfteranodehasprepared anLSP,itmustbedisseminated toall
othernodes,notonlytoitsneighbors."
6763,"Theprocessiscalledfloodingandbasedonthe
following:
1.ThecreatingnodesendsacopyoftheLSPoutofeachinterface."
6764,"2.AnodethatreceivesanLSPcompares itwiththecopyitmayalreadyhave.Ifthe
newlyarrivedLSPisolderthantheoneithas(foundbychecking thesequence
number), itdiscardstheLSP.Ifitisnewer,thenodedoesthefollowing:
a.ItdiscardstheoldLSPandkeepsthenewone."
6765,"b.Itsendsacopyofitoutofeachinterface excepttheonefromwhichthepacket
arrived.Thisguarantees thatflooding stops somewhere inthedomain(wherea
nodehasonlyoneinterface)."
6766,"Formation ofShortestPathTree:Dijkstra Algorithm Afterreceiving allLSPs,each
nodewillhaveacopyofthewholetopology."
6767,"However, thetopology isnotsufficient to
findtheshortestpathtoeveryothernode;ashortestpathtreeisneeded."
6768,"Atreeisagraphofnodesandlinks;onenodeiscalledtheroot.Allothernodes
canbereachedfromtherootthroughonlyonesingleroute.Ashortestpathtreeisatree
inwhichthepathbetweentherootandeveryothernodeistheshortest.Whatweneed
foreachnodeisashortestpathtreewiththatnodeastheroot."
6769,"TheDijkstra algorithm createsashortestpathtreefromagraph.Thealgorithm
dividesthenodesintotwosets:tentative andpermanent."
6770,"Itfindstheneighbors ofa
currentnode,makesthemtentative, examines them,andiftheypassthecriteria,
makesthempermanent."
6771,"Wecaninformally definethealgorithm byusingtheflowchart
inFigure22.22."
6772,"Letusapplythealgorithm tonodeAofoursamplegraphinFigure22.23.Tofind
theshortestpathineachstep,weneedthecumulative costfromtheroottoeachnode,
whichisshownnexttothenode."
6773,"Thefollowing showsthesteps.Attheendofeachstep,weshowthepermanent
(filledcircles)andthetentative (opencircles)nodesandlistswiththecumulative
costs.SECT/ON 22.3UN/CAST ROUTING PROTOCOLS 669
Figure22.22Dijkstraalgorithm
Setroottolocalnodeand
moveittotentative list."
6774,"Amongnodesintentative list,movethe
onewiththeshortestpathtopermanent list."
6775,"Addeachunprocessed neighbor oflastmoved
nodetotentative listifnotalreadythere."
6776,"Ifneighbor isinthetentative listwithlarger
cumulative cost,replaceitwithnewone."
6777,"Figure22.23Example offormation ofshortestpathtree
Root
B 5 0 .·~.--------{B 5Root00
I.SetroottoAandmoveAto
tentative list."
6778,"Root
o ."
6779,"3
4.MoveDtopermanent list.Root
o ."
6780,"2.MoveAtopermanent listandadd
B,C,andDtotentative list."
6781,"5.MoveBtopermanent list.Topology
3.MoveCtopermanent andadd
Etotentative list."
6782,"6
6.MoveEtopermanent list
(tentative listisempty).670 CHAPTER 22NETWORK LAYER: DELIVERY, FORWARDING, ANDROUTING
1.WemakenodeAtherootofthetreeandmoveittothetentative list.Ourtwolistsare
Permanent list:empty Tentative list:A(O)
2.NodeAhastheshortestcumulative costfromallnodesinthetentative list.WemoveA
tothepennanent listandaddallneighbors ofAtothetentative list.Ournewlistsare
Permanent list:A(O) Tentative list:B(5),C(2),D(3)
3.NodeChastheshortestcumulative costfromallnodesinthetentative list.Wemove
Ctothepermanent list.NodeChasthreeneighbors, butnodeAisalreadypro­
cessed,whichmakestheunprocessed neighbors justBandE.However, Bisalready
inthetentative list withacumulative costof5.NodeAcouldalsoreachnodeB
throughCwithacumulative costof6.Since5islessthan6,wekeepnodeBwitha
cumulative costof5inthetentative listanddonotreplaceit.Ournewlistsare
Permanent list:A(O),e(2) Tentative list:B(5),0(3),E(6)
4.NodeDhastheshortest cumulative costofallthenodesinthetentative list.We
moveDtothepermanent list.NodeDhasnounprocessed neighbor tobeaddedto
thetentative list.Ournewlistsare
Permanent list:A(O),C(2),0(3) Tentative list:B(5),E(6)
5.NodeBhastheshortest cumulative costofallthenodesinthetentative list.We
moveBtothepermanent list.Weneedtoaddallunprocessed neighbors ofBtothe
tentative list(thisisjustnodeE).However, E(6)isalreadyinthelistwithasmaller
cumulative cost.Thecumulative costtonodeE,astheneighbor ofB,is8.Wekeep
nodeE(6)inthetentative list.Ournewlistsare
Permanent list:A(O),B(5),C(2),0(3) Tentative list:E(6)
6.NodeEhastheshortest cumulative costfromallnodesinthetentative list.We
moveEtothepermanent list.NodeEhasnoneighbor."
6783,"Nowthetentative list is
empty.Westop;ourshortestpathtreeisready.Thefinallistsare
Permanent list:A(O),B(5), C(2), D(3),E(6) Tentative list:empty
Calculation ofRouting TablefromShortest PathTreeEachnodeusestheshort­
estpathtreeprotocol toconstruct itsroutingtable.Theroutingtableshowsthecostof
reaching eachnodefromtheroot.Table22.2showstheroutingtablefornodeA."
6784,"Table22.2RoutingtablefornodeA
Node Cost NextRouter
A 0 -
B 5 -
C 2 -
D 3-
E 6 CSECTION 22.3UN/CAST ROUTING PROTOCOLS 671
Compare Table22.2withtheoneinFigure22.14.Bothdistancevectorroutingand
linkstateroutingendupwiththesameroutingtablefornodeA."
6785,"OSPF
TheOpenShortest PathFirstorOSPFprotocol isanintradomain routingprotocol
basedonlinkstaterouting.Itsdomainisalsoanautonomous system."
6786,"AreasTohandleroutingefficiently andinatimelymanner,OSPFdividesanauto­
nomoussystemintoareas.Anareaisacollection ofnetworks, hosts,androutersall
contained withinanautonomous system.Anautonomous systemcanbedividedinto
manydifferentareas.Allnetworks insideanareamustbeconnected."
6787,Routersinsideanareafloodtheareawithroutinginformation.
6788,"Attheborderofan
area,specialrouterscalledareaborderrouterssummarize theinformation aboutthe
areaandsendittootherareas.Amongtheareasinsideanautonomous systemisaspe­
cialareacalledthebackbone; alltheareasinsideanautonomous systemmustbecon­
nectedtothebackbone."
6789,"Inotherwords,thebackbone servesasaprimaryareaandthe
otherareasassecondary areas.Thisdoesnotmeanthattherouterswithinareascannot
beconnected toeachother,however."
6790,"Theroutersinsidethebackbone arecalledthe
backbone routers.Notethatabackbone routercanalsobeanareaborder router."
6791,"If,becauseofsomeproblem, theconnectivity between abackbone andanareais
broken,avirtuallinkbetweenroutersmustbecreatedbyanadministrator toallow
continuity ofthefunctions ofthebackbone astheprimaryarea."
6792,Eachareahasanareaidentification.
6793,"Theareaidentification ofthebackbone is
zero.Figure22.24showsanautonomous systemanditsareas."
6794,"Figure22.24Areasinanautonomous system
Area0(backbone)l-~."
6795,"Toother
ASs
Autonomous system
Metric TheOSPFprotocolallowstheadministrator toassignacost,calledthemetric,
toeachroute.Themetriccanbebasedonatypeofservice(minimum delay,maximum
throughput, andsoon).Asamatteroffact,aroutercanhavemultipleroutingtables,
eachbasedonadifferent typeofservice."
6796,"TypesofLinksInOSPFterminology, aconnection iscalledalink.Fourtypesof
linkshavebeendefined:point-to-point, transient, stub,andvirtual(seeFigure22.25).672 CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.25Typesoflinks
Apoint-to-point linkconnects tworouterswithoutanyotherhostorrouterin
between."
6797,"Inotherwords,thepurposeofthelink(network) isjusttoconnectthetwo
routers.Anexampleofthistypeoflinkistworoutersconnected byatelephone lineor
a Tline.Thereisnoneedtoassignanetwork addresstothistypeoflink.Graphically,
theroutersarerepresented bynodes,andthelinkisrepresented byabidirectional edge
connecting thenodes.Themetrics,whichareusuallythesame,areshownatthetwo
ends,oneforeachdirection."
6798,"Inotherwords,eachrouterhasonlyoneneighbor atthe
othersideofthelink(seeFigure22.26)."
6799,"Figure22.26Point-to-point link
~C""'Il~f-- ~.4~~ Point-to-point network~
Router Router
Atransient linkisanetworkwithseveralroutersattachedtoit.Thedatacanenter
throughanyoftheroutersandleavethroughanyrouter.AllLANsandsomeWANswith
twoormoreroutersareofthistype.Inthiscase,eachrouterhasmanyneighbors."
6800,"For
example, consider theEthernet inFigure22.27a.RouterAhasroutersB, C,D,andEas
neighbors."
6801,"RouterBhasroutersA,C, D,andEasneighbors.Ifwewanttoshowthe
neighborhood relationship inthissituation, wehavethegraphshowninFigure22.27b."
6802,"Figure22.27 Transient link
A
E DcA
b.Unrealistic representation c.Realistic representationEB
DcEthernet
a.Transient network
Thisisneitherefficientnorrealistic.Itisnotefficientbecauseeachrouterneedsto
advertise theneighborhood tofourotherrouters,foratotalof20advertisements."
6803,"ItisSECTION 22.3UNICAST ROUTING PROTOCOLS 673
notrealisticbecausethereisnosinglenetwork (link)between eachpairofrouters;
thereisonlyonenetworkthatservesasacrossroad betweenallfiverouters."
6804,"Toshowthateachrouterisconnected toeveryotherrouterthroughonesinglenet­
work,thenetworkitselfisrepresented byanode.However, becauseanetworkisnota
machine, itcannotfunction asarouter.Oneoftheroutersinthenetworktakesthis
responsibility."
6805,Itisassigned adualpurpose; itisatruerouterandadesignated router.
6806,"Wecanusethetopology showninFigure22.27ctoshowtheconnections ofatransient
network."
6807,"Noweachrouterhasonlyoneneighbor, thedesignated router(network)."
6808,"Onthe
otherhand,thedesignated router(thenetwork) hasfiveneighbors."
6809,"Weseethatthc
numberofneighbor announcements isreducedfrom20to10.Still,thelinkisrepre­
sentedasabidirectional edgebetweenthenodes.However, whilethereisametricfrom
eachnodetothedesignated router,thereisnometricfromthedesignated routertoany
othernode.Thereasonisthatthedesignated routerrepresents thenetwork."
6810,"Wecan
onlyassignacosttoapacketthatispassingthroughthenetwork."
6811,"Wecannotchargefor
thistwice.Whenapacketentersanetwork, weassignacost;whenapacketleavesthe
networktogototherouter,thereisnocharge."
6812,"Astublinkisanetwork thatisconnected toonlyonerouter.Thedatapackets
enterthenetworkthroughthissinglerouterandleavethenetworkthroughthissame
router.Thisisaspecialcaseofthetransient network."
6813,"Wecanshowthissituation using
therouterasanodeandusingthedesignated routerforthenetwork."
6814,"However, thelink
isonlyone-directional, fromtheroutertothenetwork(seeFigure22.28)."
6815,"Figure22.28Stublink
A,."
6816,"Ethernet
a.StubnetworkA
•""""-,,...k'ro_
b.Representation
Whenthelinkbetween tworoutersisbroken,theadministration maycreatea
virtuallinkbetween them,usingalongerpaththatprobably goesthroughseveral
routers."
6817,"Graphical Representation Letusnowexamine howanAScanberepresented
graphically."
6818,"Figure22.29showsasmallASwithsevennetworks andsixrouters.Two
ofthenetworks arepoint-to-point networks."
6819,"Weusesymbols suchasNlandN2
fortransient andstubnetworks."
6820,"Thereisnoneedtoassignanidentitytoapoint-to­
pointnetwork."
6821,"Thefigurealsoshowsthegraphical representation oftheASasseen
byOSPF."
6822,"Wehaveusedsquarenodesfortheroutersandovalsforthenetworks (represented
bydesignated routers)."
6823,"However, OSPFseesbothasnodes.Notethatwehavethree
stubnetworks.674CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.29ExampleofanASanditsgraphical representation inOSPF
1---lII~l----I-1~"" - - - - - - - - - - - - - -N2
c
Nl
a.Autonomous systemBT-31ineN3--+O--...,£:i""---I
N5
b.Graphical representation8
4
PathVectorRouting
Distance vectorandlinkstateroutingarebothintradomain routingprotocols."
6824,"Theycan
beusedinsideanautonomous system,butnotbetweenautonomous systems.Thesetwo
protocols arenotsuitableforinterdomain routingmostlybecauseofscalability."
6825,"Bothof
theseroutingprotocols becomeintractable whenthedomainofoperation becomes
large.Distance vectorroutingissubjecttoinstability iftherearemorethanafewhops
inthedomainofoperation."
6826,"Linkstateroutingneedsahugeamountofresources tocal­
culateroutingtables.Italsocreatesheavytrafficbecauseofflooding."
6827,"Thereisaneed
forathirdroutingprotocolwhichwecallpathvectorrouting."
6828,"Pathvectorroutingprovedtobeusefulforinterdomain routing.Theprinciple of
pathvectorroutingissimilartothatofdistancevectorrouting.Inpathvectorrouting,
weassumethatthereisonenode(therecanbemore,butoneisenoughforourconcep­
tualdiscussion) ineachautonomous systemthatactsonbehalfoftheentireautono­
moussystem.Letuscallitthespeakernode.ThespeakernodeinanAScreatesa
routingtableandadvertises ittospeakernodesintheneighboring ASs.Theideaisthe
sameasfordistancevectorroutingexceptthatonlyspeakernodesineachAScancom­
municate witheachother.However, whatisadvertised isdifferent."
6829,"Aspeakernode
advertises thepath,notthemetricofthenodes,initsautonomous systemorother
autonomous systems."
6830,"Initialization
Atthebeginning, eachspeakernodecanknowonlythereachability ofnodesinsideits
autonomous system.Figure22.30showstheinitialtablesforeachspeakernodeina
systemmadeoffourASs.SECTION 22.3UNICAST ROUTING PROTOCOLS 675
Figure22.30Initialroutingtablesinpathvectorrouting
Dest.Path
.A$L2
AS:L."
6831,"AlTable
AS1
Des!.Path
BlAS2\
B2As1
B3""~~'."
6832,"B4-~
BITable
AS2Dest.Path
CI:~3
C2;'ASa
C3'A~~
ClTable
AS3
Des!'Path
Dl·~
D2·A£4'~D3·-.:
D4:~;r'
AS4
NodeAlisthespeakernodeforASl,BlforAS2,ClforAS3,andDlforAS4."
6833,"NodeAlcreatesaninitialtablethatshowsAltoA5arelocatedinASIandcanbe
reachedthroughit.NodeBladvertises thatBltoB4arelocatedinAS2andcanbe
reachedthroughBl.Andsoon."
6834,"Sharing Justasindistance vectorrouting,inpathvectorrouting,aspeakerinan
autonomous systemsharesitstablewithimmediate neighbors."
6835,"InFigure22.30,node
AlsharesitstablewithnodesBlandCl.NodeClsharesitstablewithnodesDl,Bl,
andAl.NodeBlsharesitstablewithClandAl.NodeDlsharesitstablewithCl.
Updating Whenaspeakernodereceives atwo-column tablefromaneighbor, it
updatesitsowntablebyaddingthenodesthatarenotinitsroutingtableandaddingits
ownautonomous systemandtheautonomous systemthatsentthetable.Afterawhile
eachspeakerhasatableandknowshowtoreacheachnodeinotherASs.Figure22.31
showsthetablesforeachspeakernodeafterthesystemisstabilized."
6836,"According tothefigure,ifrouterAlreceivesapacketfornodesA3,itknowsthat
thepathisinASI(thepacketisathome);butifitreceivesapacketforDl,itknowsthat
thepacketshouldgofromASl,toAS2,andthentoAS3.Theroutingtableshowsthe
pathcompletely."
6837,"Ontheotherhand,ifnodeDlinAS4receivesapacketfornodeA2,it
knowsitshouldgothroughAS4,AS3,andAS1."
6838,oLoop prevention.
6839,"Theinstability ofdistancevectorroutingandthecreationof
loopscanbeavoidedinpathvectorrouting.Whenarouterreceivesa message, it
checkstoseeifitsautonomous systemisinthepathlisttothedestination."
6840,"Ifitis,
loopingisinvolvedandthemessageisignored.676CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.31Stabilized tablesforthreeautonomous systems
AlAS~·~·ASj
A5AS4-~:t:ASi
~~~~~4~~3;,AS2Dest."
6841,"Path Path
ClTableOest."
6842,"Path
BlTableOest."
6843,Oest.
6844,"Path
AlA:IDi
ASASl
Bl
B4
Cl..."
6845,"C3
01
D4
AlTable
oPolicyrouting."
6846,"Policyroutingcanbeeasilyimplemented throughpathvector
routing.Whenarouterreceives amessage, itcancheckthepath.Ifoneofthe
autonomous systemslistedinthepathisagainstitspolicy,itcanignorethatpath
andthatdestination."
6847,"Itdoesnotupdateitsroutingtablewiththispath,anditdoes
notsendthismessage toitsneighbors."
6848,"oOptimum path.Whatistheoptimum pathinpathvectorrouting?Wearelooking
forapathtoadestination thatisthebestfortheorganization thatrunstheautono­
moussystem.Wedefinitely cannotincludemetricsinthisroutebecause each
autonomous systemthatisincluded inthepathmayuseadifferent criterion forthe
metric.Onesystemmayuse,internally, RIP,whichdefineshopcountasthemetric;
anothermayuseOSPFwithminimum delaydefinedasthemetric.Theoptimum
pathisthepaththatfitstheorganization."
6849,"Inourprevious figure,eachautonomous
systemmayhavemorethanonepathtoadestination."
6850,"Forexample, apathfrom
AS4toASIcanbeAS4-AS3-AS2-AS1, oritcanbeAS4-AS3-ASI."
6851,"Forthetables,
wechosetheonethathadthesmallernumberofautonomous systems, butthisis
notalwaysthecase.Othercriteria,suchassecurity,safety,andreliability, canalso
beapplied."
6852,"BGP
BorderGateway Protocol (BGP)isaninterdomain routingprotocol usingpathvector
routing.Itfirstappeared in1989andhasgonethroughfourversions."
6853,"TypesofAutonomous Systems Aswesaidbefore,theInternetisdividedintohier­
archicaldomains calledautonomous systems."
6854,"Forexample, alargecorporation that
manages itsownnetworkandhasfullcontroloveritisanautonomous system.Alocal
ISPthatprovides servicestolocalcustomers isanautonomous system.Wecandivide
autonomous systemsintothreecategories: stub,multihomed, andtransit."
6855,"oStubAS.AstubAShasonlyoneconnection toanotherAS.Theinterdomain data
trafficinastubAScanbeeithercreatedorterminated intheAS.ThehostsintheAS
cansenddatatraffictootherASs.ThehostsintheAScanreceivedatacomingfrom
hostsinotherASs.Datatraffic,however, cannotpassthroughastubAS.AstubASSECTION 22.3UNICAST ROUTING PROTOCOLS 677
iseitherasourceorasink.AgoodexampleofastubASisasmallcorporation ora
smalllocalISP."
6856,"oMultihomed AS.Amultihomed AShasmorethanoneconnection tootherASs,
butitisstillonlyasourceorsinkfordatatraffic.Itcanreceivedatatrafficfrom
morethan oneAS.ItcansenddatatraffictomorethanoneAS,butthereisnotran­
sienttraffic.ItdoesnotallowdatacomingfromoneASandgoingtoanotherASto
passthrough.Agoodexampleofamultihomed ASisalargecorporation thatiscon­
nectedtomorethanoneregionalornationalASthatdoesnotallowtransienttraffic."
6857,"oTransitAS.AtransitASisamultihomed ASthatalsoallowstransienttraffic.Good
examples oftransitASsarenationalandinternational ISPs(Internetbackbones)."
6858,"PathAttributes Inourprevious example, wediscussed apathforadestination net­
work.Thepathwaspresented asalistofautonomous systems, butis,infact,alistof
attributes."
6859,"Eachattributegivessomeinformation aboutthepath.Thelistofattributes
helpsthereceiving routermakeamore-informed decisionwhenapplying itspolicy."
6860,Attributes aredividedintotwobroadcategories: wellknownandoptional.
6861,"Awell­
knownattribute isonethateveryBGProutermustrecognize."
6862,"Anoptional attribute
isonethatneedsnotberecognized byeveryrouter."
6863,"Well-known attributes arethemselves dividedintotwocategories: mandatory and
discretionary."
6864,"Awell-known mandatory attributeisonethatmustappearinthedescrip­
tionofaroute.Awell-known discretionary attributeisonethatmustberecognized by
eachrouter,butisnotrequired tobeincluded ineveryupdatemessage."
6865,"Onewell­
knownmandatory attributeisORIGIN."
6866,"Thisdefinesthesourceoftheroutinginforma­
tion(RIP,OSPF,andsoon).Anotherwell-known mandatory attribute isAS_PATH."
6867,"Thisdefinesthelistofautonomous systemsthroughwhichthedestination canbe
reached."
6868,"Stillanotherwell-known mandatory attribute isNEXT-HOP, whichdefines
thenextroutertowhichthedatapacketshouldbesent."
6869,"Theoptionalattributes canalsobesubdivided intotwocategories: transitive and
nontransitive."
6870,"Anoptional transitive attribute isonethatmustbepassedtothenext
routerbytherouterthathasnot implemented thisattribute."
6871,"Anoptional nontransitive
attributeisonethatmustbediscarded ifthereceiving routerhasnotimplemented it."
6872,"BGPSessions Theexchange ofroutinginformation betweentworoutersusingBGP
takesplaceinasession.Asessionisaconnection thatisestablished betweentwoBGP
routersonlyforthesakeofexchanging routinginformation."
6873,"Tocreateareliableenvi­
ronment, BGPusestheservicesofTCP.Inotherwords,asessionattheBGPlevel,as
anapplication program, isaconnection attheTCPlevel.However, thereisasubtledif­
ferencebetween aconnection inTCPmadeforBGPandotherapplication programs."
6874,"WhenaTCPconnection iscreatedforBGP,itcanlastforalongtime,untilsomething
unusualhappens."
6875,"Forthisreason,BGPsessions aresometimes referred toassemi­
pennanent connections."
6876,"External andInternalBGPIfwewanttobeprecise,BGPcanhavetwotypesof
sessions: externalBGP(E-BGP) andinternalBGP(I-BGP)sessions."
6877,"TheE-BGPses­
sionisusedtoexchange information betweentwospeakernodesbelonging totwodif­
ferentautonomous systems."
6878,"TheI-BGPsession,ontheotherhand,isusedtoexchange
routinginformation between tworoutersinsideanautonomous system.Figure22.32
showstheidea.678CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Figure22.32InternalandexternalBGPsessions
AS1 AS2
1-- E-BGPsession ---I-BGPsessionsI
Thesessionestablished betweenAS1andAS2isanE-BOPsession.Thetwospeaker
routersexchange information theyknowaboutnetworks intheInternet.However, these
tworoutersneedtocollectinformation fromotherroutersintheautonomous systems."
6879,ThisisdoneusingI-BOPsessions.
6880,"22.4MULTICAST ROUTING PROTOCOLS
Inthissection,wediscussmulticasting andmulticast routingprotocols."
6881,"Wefirstdefine
thetermmulticasting andcompare ittounicasting andbroadcasting."
6882,"Wealsobriefly
discusstheapplications ofmulticasting."
6883,"Finally,wemoveontomulticast routingand
thegeneralideasandgoalsrelatedtoit.Wealsodiscusssomecommon multicast routing
protocols usedintheInternettoday."
6884,"Unicast,Multicast, andBroadcast
Amessage canbeunicast,multicast, orbroadcast."
6885,"Letusclarifythesetermsasthey
relatetotheInternet."
6886,"Unicasting
Inunicastcommunication, thereisonesourceandonedestination."
6887,"Therelationship
between thesourceandthedestination isone-to-one."
6888,"Inthistypeofcommunication,
boththesourceanddestination addresses, intheIPdatagram, aretheunicastaddresses
assigned tothehosts(orhostinterfaces, tobemoreexact).InFigure22.33,aunicast
Figure22.33 UnicastingSECTION 22.4MULTICAST ROUTING PROTOCOLS 679
packetstaI1sfromthesourceS1andpassesthroughrouterstoreachthedestination D1."
6889,Wehaveshownthenetworks asalinkbetweentherouterstosimplifythefigure.
6890,"Notethatinunicasting, whenarouterreceivesapacket,itforwards thepacket
throughonlyoneofitsinterfaces (theonebelonging totheoptimum path)asdefinedin
theroutingtable.Theroutermaydiscardthepacketifitcannotfindthedestination
addressinitsroutingtable."
6891,"Inunicasting, therouterforwards thereceivedpacketthrough
onlyoneofitsinterfaces."
6892,"Multicasting
Inmulticast communication, thereisonesourceandagroupofdestinations."
6893,"Therela­
tionshipisone-to-many."
6894,"Inthistypeofcommunication, thesourceaddressisaunicast
address,butthedestination addressisagroupaddress,whichdefinesoneormoredesti­
nations.Thegroupaddressidentifies themembers ofthegroup.Figure22.34showsthe
ideabehindmulticasting."
6895,"Figure22.34Multicasting
G1 G1 G1
~t~t ~t
Sl
GI
Amulticast packetstartsfromthesourceS1andgoestoalldestinations that
belongtogroupG1.Inmulticasting, whenarouterreceivesapacket,itmayforwardit
throughseveralofitsinterfaces."
6896,"Inmulticasting, theroutermayforwardthereceivedpacket
throughseveralofitsinterfaces.680CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Broadcasting
Inbroadcast communication, therelationship betweenthesourceandthedestination is
one-to-all."
6897,"Thereisonlyonesource,butalltheotherhostsarethedestinations."
6898,"The
Internetdoesnotexplicitly supportbroadcasting becauseofthehugeamountoftraffic
itwouldcreateandbecauseofthebandwidth itwouldneed.Imaginethetrafficgener­
atedintheInternetifonepersonwantedtosendamessage toeveryone elseconnected
totheInternet."
6899,"Multicasting VersusMultiple Unicasting
Beforewefinishthissection,weneedtodistinguish betweenmulticasting andmultiple
unicasting."
6900,Figure22.35illustrates bothconcepts.
6901,"Figure22.35Multicasting versusmultipleunicasting
Gl Gl Gl
Gl
a.Multicasting
Dl D2 D3
D5
b.Multiple nnicasting
Multicasting startswithonesinglepacketfromthesourcethatisduplicated bythe
routers.Thedestination addressineachpacketisthesameforallduplicates."
6902,"Notethat
onlyonesinglecopyofthepackettravelsbetweenanytworouters.SECTION 22.4MULTICAST ROUTING PROTOCOLS 681
Inmultiple unicasting, severalpacketsstartfromthesource.Iftherearefive
destinations, forexample, thesourcesendsfivepackets,eachwithadifferent unicast
destination address.Notethattheremaybemultiplecopiestravelingbetweentworouters."
6903,"Forexample, whenapersonsendsane-mailmessage toagroupofpeople,thisis
multiple unicasting."
6904,"Thee-mailsoftware createsreplicasofthemessage, eachwitha
different destination addressandsendsthemonebyone.Thisisnotmulticasting; itis
multipleunicasting."
6905,"Emulation ofMulticasting withUnicasting
Youmightwonderwhywehaveaseparatemechanism formulticasting, whenitcanbe
emulated withunicasting."
6906,Therearetwoobviousreasonsforthis.
6907,1.Multicasting ismoreefficientthanmultipleunicasting.
6908,"InFigure22.35,wecansee
howmulticasting requireslessbandwidth thandoesmultipleunicasting."
6909,"Inmulti­
pleunicasting, someofthelinksmusthandleseveralcopies."
6910,"2.Inmultipleunicasting, thepacketsarecreatedbythesourcewitharelativedelay
betweenpackets.Ifthereare1000destinations, thedelaybetweenthefirstandthe
lastpacketmaybeunacceptable."
6911,"Inmulticasting, thereisnodelaybecauseonly
onepacketiscreatedbythe source."
6912,"Emulation ofmulticasting throughmultiple unicasting isnotefficient
andmaycreatelongdelays,particularly withalargegroup."
6913,"Applications
Multicasting hasmanyapplications todaysuchasaccesstodistributed databases,
information dissemination, teleconferencing, anddistancelearning."
6914,"AccesstoDistributed Databases
Mostofthelargedatabases todayaredistributed."
6915,"Thatis,theinformation isstoredin
morethanonelocation, usuallyatthetimeofproduction."
6916,"Theuserwhoneedstoaccess
thedatabase doesnotknowthelocationoftheinformation."
6917,"Auser'srequestismulti­
casttoallthedatabase locations, andthelocationthathastheinformation responds."
6918,"Information Dissemination
Businesses oftenneedtosendinformation totheircustomers."
6919,"Ifthenatureoftheinfor­
mationisthesameforeachcustomer, itcanbemulticast."
6920,"Inthiswayabusiness can
sendonemessage thatcanreachmanycustomers."
6921,"Forexample, asoftware updatecan
besenttoallpurchasers ofaparticular software package."
6922,"Dissemination ofNews
Inasimilarmannernewscanbeeasilydisseminated throughmulticasting."
6923,"Onesingle
messagecanbesenttothoseinterested inaparticular topic.Forexample, thestatistics
ofthechampionship highschoolbasketball tournament canbesenttothesportseditors
ofmanynewspapers.682CHAPTER 22NETWORK LAYER:DELNERY, FORWARDING, ANDROUTING
Teleconferencing
Teleconferencing involvesmulticasting."
6924,"Theindividuals attending ateleconference all
needtoreceivethesameinformation atthesametime.Temporary orpermanent groups
canbeformedforthispurpose."
6925,"Forexample, anengineering groupthatholdsmeetings
everyMonday morning couldhaveapermanent groupwhilethegroupthatplansthe
holidaypartycouldformatemporary group."
6926,"Distance Learning
Onegrowing areaintheuseofmulticasting isdistance learning."
6927,"Lessonstaughtby
onesingleprofessor canbereceived byaspecificgroupofstudents."
6928,"Thisisespecially
convenient forthosestudentswhofinditdifficulttoattendclassesoncampus."
6929,"Multicast Routing
Inthissection,wefirstdiscusstheideaofoptimalrouting,common inallmulticast
protocols."
6930,Wethengiveanoverview ofmulticast routingprotocols.
6931,"Optimal Routing: Shortest PathTrees
Theprocessofoptimalinterdomain routingeventually resultsinthefindingofthe
shortestpathtree.Therootofthetreeisthesource,andtheleavesarethepotential des­
tinations."
6932,"Thepathfromtheroottoeachdestination istheshortestpath.However, the
numberoftreesandtheformation ofthetreesinunicastandmulticast routingaredif­
ferent.Letusdiscusseachseparately."
6933,"UnicastRouting Inunicastrouting,whenarouterreceives apackettoforward, it
needstofindtheshortestpathtothedestination ofthepacket.Therouterconsultsits
routingtableforthatparticular destination."
6934,"Thenext-hop entrycorresponding tothe
destination isthestartoftheshortestpath.Therouterknowstheshortestpathfor
eachdestination, whichmeansthattherouterhasashortestpathtreetooptimally
reachalldestinations."
6935,"Inotherwords,eachlineoftheroutingtableisashortestpath;
thewholeroutingtableisashortestpathtree.Inunicastrouting,eachrouterneeds
onlyoneshortestpathtreetoforward apacket;however, eachrouterhasitsown
shortestpathtree.Figure22.36showsthesituation."
6936,"Thefigureshowsthedetailsoftheroutingtableandtheshortestpathtreefor
routerRl.Eachlineintheroutingtablecorresponds toonepathfromtheroottothe
corresponding network."
6937,Thewholetablerepresents theshortestpathtree.
6938,"Inunicastrouting,eachrouterinthedomainhasatablethatdefines
ashortestpathtreetopossibledestinations."
6939,"Multicast Routing Whenarouterreceivesamulticast packet,thesituationisdifferent
fromwhenitreceivesaunicastpacket.Amulticast packetmayhavedestinations inmore
thanonenetwork."
6940,"Forwarding ofasinglepackettomembers ofagrouprequires a
shortestpathtree.Ifwehavengroups,wemayneednshortestpathtrees.Wecanimagine
thecomplexity ofmulticast routing.Twoapproaches havebeenusedtosolvetheproblem:
source-based treesandgroup-shared trees.SECTION 22.4MULTICAST ROUTING PROTOCOLS 683
Figure22.36Shortestpathtreeinunicastrouting
N2
OJR2
R2TableI
I,.-----------NI
Root
---e----
RIN5~u....:J
R4Table
R4N6
R2
R2
RZ
R4Destination Next-hop
NI
N2
N3
N4
N5
N6Shortest path---+-
---_II.."
6941,"Shortest path---+-N4 L-__ ----L ---IN3
OJR3
R3Table
RlTable
Inmulticast routing,eachinvolvedrouterneedstoconstruct
ashortestpathtreeforeachgroup."
6942,"oSource-Based Tree.Inthesource-based treeapproach, eachrouterneedstohave
oneshortestpathtreeforeachgroup.Theshortestpathtreeforagroupdefinesthe
nexthopforeachnetworkthathasloyalmember(s) forthatgroup.InFigure22.37,
weassumethatwehaveonlyfivegroupsinthedomain:GI,G2, G3, G4, andG5."
6943,"AtthemomentGIhasloyalmembers infournetworks, G2inthree,G3intwo,G4
intwo,andG5intwo.Wehaveshownthenamesofthegroupswithloyalmem­
bersoneachnetwork."
6944,"Figure22.37alsoshowsthemulticast routingtablefor
routerRI.Thereisoneshortestpathtreeforeachgroup;therefore therearefive
shortestpathtreesforfivegroups.IfrouterRlreceivesapacketwithdestination
Figure22.37Source-based treeapproach
GI,G2
RZI:""Tlu....:J
R2TableGI,G2 G3 Gl,G4,G5
~u....:J
R4Table
R4
____ .S.hortest pathtree
RlTable~ Gl-,RZ,R4
G2-,RZ
G3-,RZ
G4 RZ,R4
~ G5 RZ,R4Nexthop Destination
···Shortest pathtree
Gl,G2,G4G3,G5
~R3
u....:J
R3Table684CHAPTER 22NETWORK IAYER:DELIVERY, FORWARDING, ANDROUTING
addressG1,itneedstosendacopyofthepackettotheattachednetwork, acopyto
routerR2,andacopytorouterR4sothatallmembers ofG1canreceiveacopy.In
thisapproach, ifthenumberofgroupsism,eachrouterneedstohavemshortest
pathtrees,oneforeachgroup.Wecanimaginethecomplexity oftheroutingtable
ifwehavehundreds orthousands ofgroups.However, wewillshowhowdifferent
protocols managetoalleviate thesituation."
6945,"Inthesource-based treeapproach, eachrouterneeds
tohaveoneshortestpathtreeforeachgroup."
6946,"oGroup-Shared Tree.Inthegroup-shared treeapproach, insteadofeachrouter
havingmshortestpathtrees,onlyonedesignated router,calledthecentercore,or
rendezvous router,takestheresponsibility ofdistributing multicast traffic.Thecore
hasmshortestpathtreesinitsroutingtable.Therestoftheroutersinthedomainhave
none.Ifarouterreceivesamulticast packet,itencapsulates thepacketinaunicast
packetandsendsittothecorerouter.Thecorerouterremoves themulticast packet
fromitscapsule,andconsultsitsroutingtabletoroutethepacket.Figure22.38shows
theidea."
6947,"Figure22.38Group-shared treeapproach
Gl,G2 G3 Gl,G4,GS
R2e;oioSl---------_- __:IiiI:II------i_-_~ __-____
G3,GS
R3Rl R4
Gl,G2,G4Shortestpathtree
ShortestpathtreeDestination Nexthop
Gl-,R2,R3,R4
G2-,R2,R3
G3
G4 R3,R4
G5-,R4
Coreroutertable
Inthegroup-shared treeapproach, onlythecorerouter,
whichhasashortestpathtreeforeachgroup,isinvolvedinmulticasting."
6948,"RoutingProtocols
Duringthelastfewdecades, severalmulticast routingprotocols haveemerged."
6949,"Someof
theseprotocols areextensions ofunicastroutingprotocols; othersaretotallynew.SECTION 22.4MULTICAST ROUTING PROTOCOLS 685
Wediscusstheseprotocols intheremainder ofthischapter.Figure22.39showsthe
taxonomy oftheseprotocols."
6950,"Figure22.39Taxonomy ofcommon multicast protocols
----~---------- ----, ,:_~I~!~~~ ~~~-~~jMOSPF DVMRPPIM
CRT
Multicast LinkStateRouting: MOSPF
Inthissection,webrieflydiscussmulticast linkstateroutinganditsimplementation in
theInternet,MOSPF."
6951,"Multicast LinkStateRouting Wediscussed unicastlinkstateroutinginSection22.3.
WesaidthateachroutercreatesashortestpathtreebyusingDijkstra's algorithm."
6952,"The
routingtableisatranslation oftheshortestpathtree.Multicast linkstateroutingisa
directextension ofunicastroutingandusesasource-based treeapproach."
6953,"Although
unicastroutingisquiteinvolved, theextension tomulticast routingisverysimpleand
straightforward."
6954,Multicast linkstateroutingusesthesource-based treeapproach.
6955,"Recallthatinunicastrouting,eachnodeneedstoadvertise thestateofitslinks.For
multicast routing,anodeneedstorevisetheinterpretation ofstate.Anodeadvertises
everygroupwhichhasanyloyalmemberonthelink.Herethemeaning ofstateis
""whatgroupsareactiveonthislink.""Theinformation aboutthegroupcomesfrom
IGMP(seeChapter21).EachrouterrunningIGMPsolicitsthehostsonthelinktofind
outthemembership status."
6956,"Whenarouterreceives alltheseLSPs,itcreatesn(nisthenumberofgroups)
topologies, fromwhichnshortestpathtreesaremadebyusingDijkstra's algorithm."
6957,"So
eachrouterhasaroutingtablethatrepresents asmanyshortestpathtreesasthereare
groups."
6958,"Theonlyproblem withthisprotocol isthetimeandspaceneededtocreateand
savethemanyshortestpathtrees.Thesolutionistocreatethetreesonlywhenneeded."
6959,"Whenarouterreceivesapacketwithamulticast destination address,itrunstheDijkstra
algorithm tocalculate theshortestpathtreeforthatgroup.Theresultcanbecachedin
casethereareadditional packetsforthatdestination."
6960,"MOSPF Multicast OpenShortestPathFirst(MOSPF) protocolisanextension of
theOSPFprotocolthatusesmulticast linkstateroutingtocreatesource-based trees.686CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
Theprotocolrequiresanewlinkstateupdatepackettoassociate theunicastaddressof
ahostwiththegroupaddressoraddresses thehostissponsoring."
6961,"Thispacketiscalled
thegroup-membership LSA.Inthisway,wecanincludeinthetreeonlythehosts
(usingtheirunicastaddresses) thatbelongtoaparticular group.Inotherwords,we
makeatreethatcontains allthehostsbelonging toagroup,butweusetheunicast
addressofthehostinthecalculation."
6962,"Forefficiency, theroutercalculates theshortest
pathtreesondemand(whenitreceivesthefirstmulticast packet).Inaddition, thetree
canbesavedincachememoryforfutureusebythesamesource/group pair.MOSPFis
adata-driven protocol; thefirsttimeanMOSPFrouterseesadatagram withagiven
sourceandgroupaddress,therouterconstructs theDijkstrashortestpathtree."
6963,"Multicast Distance Vector:DVMRP
Inthissection,webrieflydiscussmulticast distancevectorroutinganditsimplementa­
tionintheInternet, DVMRP."
6964,"Multicast Distance VectorRouting Unicastdistance vectorroutingisverysimple;
extending ittosupportmulticast routingiscomplicated."
6965,"Multicast routingdoesnot
allowaroutertosenditsroutingtabletoitsneighbors."
6966,"Theideaistocreateatablefrom
scratchbyusingtheinformation fromtheunicastdistancevectortables."
6967,"Multicast distance vectorroutingusessource-based trees,buttherouternever
actuallymakesaroutingtable.Whenarouterreceives amulticast packet,itforwards
thepacketasthoughitisconsulting aroutingtable.Wecansaythattheshortestpath
treeisevanescent."
6968,Afteritsuse(afterapacketisforwarded) thetableisdestroyed.
6969,"Toaccomplish this,themulticast distance vectoralgorithm usesaprocessbased
onfourdecision-making strategies."
6970,Eachstrategy isbuiltonitspredecessor.
6971,"We
explainthemonebyoneandseehoweachstrategycanimprove theshortcomings of
theprevious one."
6972,DFlooding.
6973,"Flooding isthefirststrategythatcomestomind.Arouterreceives a
packetand,withoutevenlookingatthedestination groupaddress, sendsitout
fromeveryinterlace excepttheonefromwhichitwasreceived."
6974,"Flooding accom­
plishesthefirstgoalofmulticasting: everynetworkwithactivemembers receives
thepacket.However, sowillnetworks withoutactivemembers."
6975,"Thisisabroadcast,
notamulticast."
6976,"Thereisanotherproblem: itcreatesloops.Apacketthathasleft
theroutermaycomebackagainfromanotherinterlace orthesameinterlace and
beforwarded again.Somefloodingprotocols keepacopyofthepacketforawhile
anddiscardanyduplicates toavoidloops.Thenextstrategy,reversepathforward­
ing,correctsthisdefect."
6977,"Flooding broadcasts packets,butcreatesloopsinthesystems."
6978,"oReversePathForwarding (RPF).RPFisamodified floodingstrategy.Toprevent
loops,onlyonecopyisforwarded; theothercopiesaredropped."
6979,"InRPF,arouterfor­
wardsonlythecopythathastraveledtheshortestpathfromthesourcetotherouter."
6980,"Tofindthiscopy,RPFusestheunicastroutingtable.Therouterreceivesapacketand
extractsthesourceaddress(aunicastaddress).Itconsultsitsunicastroutingtableas
thoughitwantstosendapackettothesourceaddress.TheroutingtabletellstheSECTION 22.4MULTICAST ROUTING PROTOCOLS 687
routerthenexthop.Ifthemulticast packethasjustcomefromthehopdefinedinthe
table,thepackethastraveledtheshortestpathfromthesourcetotherouterbecause
theshortestpathisreciprocal inunicastdistancevectorroutingprotocols.Ifthepath
fromAtoBistheshortest,thenitisalsotheshortestfromBtoA.Therouterfor­
wardsthepacketifithastraveledfromtheshortestpath;itdiscardsitotherwise."
6981,"Thisstrategyprevents loopsbecausethereisalwaysoneshortestpathfromthe
sourcetotherouter.Ifapacketleavestherouterandcomesbackagain,ithasnottrav­
eledtheshortestpath.Tomakethepointclear,letuslookatFigure22.40."
6982,"Figure22.40showspartofadomainandasource.Theshortestpathtreeascalcu­
latedbyroutersRI,R2,andR3isshownbyathickline.WhenRIreceivesapacket
fromthesourcethroughtheinterface rnl,itconsultsitsroutingtableandfindsthatthe
shortestpathfromRItothesourceisthroughinterface mI.Thepacketisforwarded."
6983,"However, ifacopyofthepackethasarrivedthroughinterface m2,itisdiscarded
becausem2doesnotdefinetheshortestpathfromRItothesource.Thestoryisthe
samewithR2andR3.Youmaywonderwhathappensifacopyofapacketthatarrives
atthemlinterface ofR3,travelsthroughR6, R5,R2,andthenentersR3throughinter­
faceml.Thisinterface isthecorrectinterface forR3.Isthecopyofthepacketfor­
warded?Theansweristhatthisscenarioneverhappensbecausewhenthepacketgoes
fromR5toR2,itwillbediscarded byR2andneverreachesR3.Theupstream routers
towardthesourcealwaysdiscardapacketthathasnotgonethroughtheshortestpath,
thuspreventing confusion forthedownstream routers."
6984,RPFeliminates theloopinthefloodingprocess.
6985,"Figure22.40Reversepathforwarding (RPF)
Source
R2 R5
__--------------iIII~.R6
oReversePathBroadcasting (RPB).RPFguarantees thateachnetworkreceivesa
copyofthemulticast packetwithoutformation ofloops.However, RPFdoesnot688CHAPTER 22NETWORK lAYER:DELWERY, FORWARDING, ANDROUTING
guarantee thateachnetworkreceivesonlyonecopy;anetworkmayreceivetwoor
morecopies.ThereasonisthatRPFisnotbasedonthedestination address(agroup
address); forwarding isbasedonthesourceaddress.Tovisualize theproblem, let
uslookatFigure22.41."
6986,"Figure22.41Problem withRPF
Net3receivestwo
copiesofthepacket
b.RPBRlistheparentofNetlandNet2."
6987,"R2istheparentofNet3Net3inthisfigurereceives twocopiesofthepacketeventhougheachrouter
justsendsoutonecopyfromeachinterface."
6988,"Thereisduplication becauseatreehas
notbeenmade;insteadofatreewehaveagraph.Net3hastwoparents:routersR2
andR4."
6989,"Toeliminate duplication, wemustdefineonlyoneparentrouterforeachnetwork."
6990,"Wemusthavethisrestriction: Anetworkcanreceiveamulticast packetfromaparticular
sourceonlythroughadesignated parentrouter."
6991,"Nowthepolicyisclear.Foreachsource,theroutersendsthepacketonlyoutofthose
interfaces forwhichitisthedesignated parent.Thispolicyiscalledreversepathbroad­
casting(RPB).RPBguarantees thatthepacketreacheseverynetworkandthateverynet­
workreceivesonlyonecopy.Figure22.42showsthedifference betweenRPFandRPB."
6992,"Figure22.42RPFVersusRPB
Thereadermayaskhowthedesignated parentisdetermined."
6993,"Thedesignated parent
routercanbetherouterwiththeshortestpathtothesource.BecauseroutersperiodicallySECTION 22.4MULTICAST ROUTING PROTOCOLS 689
sendupdating packetstoeachother(inRIP),theycaneasilydetermine whichrouterin
theneighborhood hastheshortestpathtothesource(wheninterpreting thesourceasthe
destination), Ifmorethanonerouterqualifies, therouterwiththesmallestIPaddressis
selected."
6994,RPBcreatesashortestpathbroadcast treefromthesourcetoeachdestination.
6995,Itguarantees thateachdestination receivesoneandonlyonecopyofthepacket.
6996,oReverse PathMulticasting (RPM).
6997,"Asyoumayhavenoticed,RPBdoesnot
multicast thepacket,itbroadcasts it.Thisisnotefficient."
6998,"Toincreaseefficiency,
themulticast packetmustreachonlythosenetworks thathaveactivemembers for
thatparticular group.Thisiscalledreversepathmulticasting (RPM).Toconvert
broadcasting tomulticasting, theprotocolusestwoprocedures, pruningandgraft­
ing.Figure22.43showstheideaofpruningandgrafting."
6999,"Figure22.43RPF,RPB,andRPM
a.RPF
I'IPruned
Iroute,~ CNet32)
c.RPM(afterpruning)b.RPB
d.RPM(aftergrafting)
Thedesignated parentrouterofeachnetworkisresponsible forholdingthemem­
bershipinformation."
7000,ThisisdonethroughtheIGMPprotocoldescribed inChapter21.
7001,"Theprocessstartswhenarouterconnected toanetworkfindsthatthereisnointerestin
amulticast packet.Theroutersendsaprunemessage totheupstream routersothatit
canexcludethecorresponding interface."
7002,"Thatis,theupstream routercanstopsending
multicast messages forthisgroupthroughthatinterface."
7003,"Nowifthisrouterreceives
prunemessages fromalldownstream routers,it,inturn,sendsaprunemessage toits
upstream router."
7004,"Whatifaleafrouter(arouteratthebottomofthetree)hassentaprunemessage
butsuddenly realizes, throughIGMP,thatoneofitsnetworks isagaininterested in
receiving themulticast packet?Itcansendagraftmessage."
7005,"Thegraftmessage forces
theupstream routertoresumesendingthemulticast messages.690CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
RPMaddspruningandgraftingtoRPBtocreateamulticast shortest
pathtreethatsupports dynamicmembership changes."
7006,"DVMRP TheDistance VectorMulticast Routing Protocol (DVMRP) isanimple­
mentation ofmulticast distance vectorrouting.Itisasource-based routingprotocol,
basedonRIP."
7007,"CRT
TheCore-Based Tree(CBT)protocol isagroup-shared protocol thatusesacoreas
therootofthetree.Theautonomous systemisdividedintoregions,andacore(center
routerorrendezvous router)ischosenforeachregion."
7008,"Formation oftheTreeAftertherendezvous pointisselected, everyrouterisinfonned
oftheunicastaddressoftheselectedrouter.Eachrouterthensendsaunicastjoinmessage
(similartoagraftingmessage) toshowthatitwantstojointhegroup.Thismessagepasses
throughallroutersthatarelocatedbetween thesenderandtherendezvous router.Each
intermediate routerextractsthenecessary infonnation fromthemessage, suchasthe
unicastaddressofthesenderandtheinterface throughwhichthepackethasarrived,and
forwards themessage tothenextrouterinthepath.Whentherendezvous routerhas
received alljoinmessages fromeverymember ofthegroup,thetreeisformed.Now
everyrouterknowsitsupstream router(therouterthatleadstotheroot)andthedown­
streamrouter(therouterthatleadstotheleaf)."
7009,"Ifarouterwants to leavethegroup,itsendsaleavemessage toitsupstream router."
7010,"Theupstream routerremoves thelinktothatrouterfromthetreeandforwards themes­
sagetoitsupstream router,andsoon.Figure22.44showsagroup-shared treewithits
rendezvous router."
7011,"Figure22.44Group-shared treewithrendezvous router
Sharedtree
Member Member Member
Thereadermayhavenoticedtwodifferences between DVMRP andMOSPF, on
onehand,andCBT,ontheother.First,thetreeforthefirsttwoismadefromtheroot
up~thetreeforCBTisfonnedfromtheleavesdown.Second,inDVMRP, thetreeisSECTION 22.4MULTICAST ROUTING PROTOCOLS 691
firstmade(broadcasting) andthenpruned;inCBT,thereisnotreeatthebeginning; the
joining(grafting) gradually makesthetree."
7012,"Sending Multicast Packets Afterformation ofthetree,anysource(belonging tothe
groupornot)cansendamulticast packettoallmembers ofthegroup.Itsimplysends
thepackettotherendezvous router,usingtheunicastaddressoftherendezvous router;
therendezvous routerdistributes thepackettoallmembers ofthegroup.Figure22.45
showshowahostcansendamulticast packettoallmembers ofthegroup.Notethatthe
sourcehostcanbeanyofthehostsinsidethesharedtreeoranyhostoutsidetheshared
tree.InFigure22.45weshowonelocatedoutsidethesharedtree."
7013,"Figure22.45Sendingamulticast packettotherendezvous router
Sharedtree
Member MemberLegend
Unicast-=:J."
7014,MulLicast_.
7015,"Member
Selecting theRendezvous Router Thisapproach issimpleexceptforonepoint."
7016,Howdoweselectarendezvous routertooptimize theprocessandmulticasting aswell?
7017,Severalmethods havebeenimplemented.
7018,"However, thistopicisbeyondthescopeof
thisbook,andweleaveittomoreadvanced books."
7019,"Insummary, theCore-Based Tree(CBT)isagroup-shared tree,center-based pro­
tocolusingonetreepergroup.Oneoftheroutersinthetreeiscalledthecore.Apacket
issentfromthesourcetomembers ofthegroupfollowing thisprocedure:
1.Thesource,whichmayormaynotbepartofthetree,encapsulates themulticast
packetinsideaunicastpacketwiththeunicastdestination addressofthecoreand
sendsittothecore.Thispartofdeliveryisdoneusingaunicastaddress;theonly
recipient isthecorerouter."
7020,2.Thecoredecapsulates theunicastpacketandforwards ittoallinterested intetfaces.
7021,"3.Eachrouterthatreceivesthemulticast packet,intum,forwards ittoallinterested
interfaces.692CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
InCRT,thesourcesendsthemulticast packet(encapsulated inaunicastpacket)tothecore
router.Thecorerouterdecapsulates thepacketandforwards ittoallinterested interfaces."
7022,"PIM
Protocol Independent Multicast (PIM)isthenamegiventotwoindependent multicast
routingprotocols: Protocol Independent Multicast, DenseMode(PIM-DM) and
Protocol Independent Multicast, SparseMode(PIM-SM)."
7023,"Bothprotocols areunicast­
protocol-dependent, butthesimilarity endshere.Wediscusseachseparately."
7024,"PIM-DM PIM-DM isusedwhenthereisapossibility thateachrouterisinvolved in
multicasting (densemode).Inthisenvironment, theuseofaprotocol thatbroadcasts
thepacketisjustifiedbecausealmostallroutersareinvolved intheprocess."
7025,"PIM-DM isusedinadensemulticast environment, suchasaLAN."
7026,"PIM-DM isasource-based treeroutingprotocol thatusesRPFandpruningand
grafting strategies formulticasting."
7027,"Itsoperation islikethatofDVMRP; however,
unlikeDVMRP, itdoesnotdependonaspecificunicasting protocol."
7028,"Itassumesthatthe
autonomous systemisusingaunicastprotocol andeachrouterhasatablethatcanfind
theoutgoing interface thathasanoptimalpathtoadestination."
7029,"Thisunicastprotocol
canbeadistancevectorprotocol (RIP)orlinkstateprotocol (OSPF)."
7030,PIM-DM usesRPFandpruningandgraftingstrategies tohandlemulticasting.
7031,"However, itisindependent oftheunderlying unicastprotocol."
7032,"PIM-SM PIM-SM isusedwhenthereisaslightpossibility thateachrouterisinvolved
inmulticasting (sparsemode).Inthisenvironment, theuseofaprotocolthatbroadcasts
thepacketisnotjustified; aprotocol suchasCBTthatusesagroup-shared treeismore
appropriate."
7033,PIM-SM isusedinasparsemulticast environment suchasaWAN.
7034,"PIM-SMisagroup-shared treeroutingprotocol thathasarendezvous point(RP)
asthesourceofthetree.Itsoperation islikeCBT;however, itissimplerbecauseitdoes
notrequireacknowledgment fromajoinmessage."
7035,"Inaddition, itcreatesabackupsetof
RPsforeachregiontocoverRPfailures."
7036,"Oneofthecharacteristics ofPIM-SMisthatitcanswitchfromagroup-shared tree
strategytoasource-based treestrategywhennecessary."
7037,"Thiscanhappenifthereisa
denseareaofactivityfarfromtheRP.Thatareacanbemoreefficiently handledwitha
source-based treestrategyinsteadofagroup-shared treestrategy."
7038,PIM-SM issimilartoCRTbutusesasimplerprocedure.
7039,"MBONE
Multimedia andreal-time communication haveincreased theneedformulticasting in
theInternet."
7040,"However, onlyasmallfractionofInternetroutersaremulticast routers.InSECTION 22.4MULTICAST ROUTING PROTOCOLS 693
otherwords,amulticast routermaynotfindanothermulticast routerintheneighbor­
hoodtoforwardthemulticast packet.Although thisproblemmaybesolvedinthenext
fewyearsbyaddingmoreandmoremulticast routers,thereisanothersolutiontothis
problem."
7041,Thesolutionistunneling.
7042,"Themulticast routersareseenasagroupofrouters
ontopofunicastrouters.Themulticast routersmaynotbeconnected directly,butthey
areconnected logically."
7043,"Figure22.46showstheidea.InFigure22.46,onlytherouters
enclosedintheshadedcirclesarecapableofmulticasting."
7044,"Withouttunneling, theserouters
areisolatedislands.Toenablemulticasting, wemakeamulticast backbone (MBONE)
outoftheseisolatedroutersbyusingtheconceptoftunneling."
7045,"Figure22.46Logicaltunneling
Logicaltunnel
Rl
R3
Logicaltunnel
Alogicaltunnelisestablished byencapsulating themulticast packetinsideauni­
castpacket.Themulticast packetbecomes thepayload(data)oftheunicastpacket.The
intermediate (nonmulticast) routersforwardthepacketasunicastroutersanddeliver
thepacketfromoneislandtoanother.It'sasiftheunicastroutersdonotexistandthe
twomulticast routersareneighbors."
7046,Figure22.47showstheconcept.
7047,"Sofartheonly
protocolthatsupportsMBONE andtunneling isDVMRP."
7048,"Figure22.47MBONE
,'""----- R2•\1<>'Unicast
destination
address
r---- (routerR2)Unicastsource
address
(routerRI)Multicast
group
address
Source
address------,
I
I
I
R3e-----------------------e R4694CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
22.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...Jrefertothereference listattheendofthetext."
7049,"Books
Delivery andforwarding arediscussed inChapter6of[For06].Unicastroutingprotocols
arediscussed inChapter14of[For06].Multicasting andmulticast routingarediscussed
inChapter 15of[For06].Foracomplete discussion ofmulticasting see[WZOl]."
7050,"For
routingprotocols see[HuiOO].OSPFisdiscussed in[Moy98]."
7051,"Sites
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofRIPcanbefoundinthefollowing RFCs:
1131,1245,1246,1247,1370,1583,1584,1585, 1586,1587, 1722,1723,2082,2453
Adiscussion ofOSPFcanbefoundinthefollowing RFCs:
1131,1245,1246,1247,1370,1583,1584,1585, 1586,1587,2178,2328,2329,2370
Adiscussion ofBGPcanbefoundinthefollowing RFCs:
1092,1105,1163,1265,1266,1267,1364,1392,1403, 1565,1654,1655,1665,1771,1772,
1745,1774,2283
22.6KEYTERMS
addressaggregation
area
areaborderrouters
areaidentification
autonomous system(AS)
backbone router
BorderGateway Protocol (BGP)
broadcasting
Core-Based Tree(CBT)protocol
data-driven
defaultmethod
delivery
designated parentrouterDijkstra's algorithm
directdelivery
distancelearning
Distance VectorMulticast Routing
Protocol (DVMRP)
distancevectorrouting
distributed database
dynamic routingmethod
dynamic routingtable
flooding
forwarding
graftmessage
group-shared treehierarchical routing
hopcount
host-specific method
ifconfig
immediate neighbors
indirectdelivery
interdomain routing
intradomain routing
least-cost tree
linkstaterouting
logicaltunnel
longestmaskmatching
metric
multicast backbone (MBONE)
Multicast OpenShortestPathFirst
(MOSPF)
multicast router
multicast routing
multicasting
multipleunicasting
netstat
network-specific method
next-hop address
next-hop method
OpenShortestPathFirst(OSPF)
optionalattribute
OSPFprotocol
pathvectorrouting
point-to-point link
poisonreverse
policyroutingSECTION 22.7SUMMARY 695
Protocol Independent Multicast (PIM)
Protocol Independent Multicast, Dense
Mode(PIM-DM)
Protocol Independent Multicast, Sparse
Mode(PIM-SM)
prunemessage
rendezvous router
rendezvous-point tree
reversepathbroadcasting (RPB)
reversepathforwarding (RPF)
reversepathmulticasting (RPM)
routemethod
routing
RoutingInformation Protocol (RIP)
routingprotocols
shortestpathtree
slowconvergence
source-based tree
speakernode
splithorizon
staticroutingtable
stublink
switching fabric
teleconferencing
transient link
triggered update
tunneling
unicasting
updatemessage
virtuallink
well-known attribute
22.7SUMMARY
oThedeliveryofapacketiscalleddirectifthedeliverer (hostorrouter)andthedes­
tinationareonthesamenetwork; thedeliveryofapacketiscalledindirectifthe
deliverer (hostorrouter)andthedestination areondifferent networks."
7052,"oInthenext-hop method, insteadofacomplete listofthestopsthepacketmust
make,onlytheaddressofthenexthopislistedintheroutingtable;inthenetwork­
specificmethod,allhostsonanetworkshareoneentryintheroutingtable.696CHAPTER 22NETWORK LAYER:DELIVERY, FORWARDING, ANDROUTING
DInthehost-specific method,thefullIPaddressofahostisgivenintheroutingtable."
7053,"DInthedefaultmethod,arouterisassigned toreceiveallpacketswithnomatchin
theroutingtable."
7054,DTheroutingtableforclassless addressing needsatleastfourcolumns.
7055,DAddressaggregation simplifies theforwarding processinclassless addressing.
7056,oLongestmaskmatching isrequiredinclassless addressing.
7057,"oClassless addressing requires hierarchical andgeographical routingtoprevent
immense routingtables."
7058,"DAstaticroutingtable'sentriesareupdatedmanually byanadministrator; adynamic
routingtable'sentriesareupdatedautomatically byaroutingprotocol."
7059,DAmetricisthecostassignedforpassageofapacketthroughanetwork.
7060,"DAnautonomous system(AS)isagroupofnetworks androutersundertheauthority
ofasingleadministration."
7061,"DRIPisbasedondistancevectorrouting,inwhicheachroutershares,atregular
intervals, itsknowledge abouttheentireASwithitsneighbors."
7062,"DTwoshortcomings associated withtheRIPprotocol areslowconvergence and
instability."
7063,"Procedures toremedyRIPinstability includetriggered update,split
horizons, andpoisonreverse."
7064,"DOSPFdividesanASintoareas,definedascollections ofnetworks, hosts,and
routers."
7065,"oOSPFisbasedonlinkstaterouting,inwhicheachroutersendsthestateofits
neighborhood toeveryotherrouterinthearea.Apacketissentonlyifthereisa
changeintheneighborhood."
7066,DOSPFroutingtablesarecalculated byusingDijkstra's algorithm.
7067,DBGPisaninterautonomous systemroutingprotocolusedtoupdateroutingtables.
7068,"DBGPisbasedonaroutingprotocolcalledpathvectorrouting.Inthisprotocol, the
ASsthroughwhichapacketmustpassareexplicitly listed."
7069,"oInasource-based treeapproach tomulticast routing,thesource/group combination
determines thetree;inagroup-shared treeapproach tomulticast routing,thegroup
determines thetree."
7070,"DMOSPFisamulticast routingprotocol thatusesmulticast linkstateroutingto
createasource-based least-cost tree."
7071,"DInreversepathforwarding (RPF),therouterforwards onlythepacketsthathave
traveledtheshortestpathfromthesourcetotherouter."
7072,"DReversepathbroadcasting (RPB)createsashortestpathbroadcast treefromthe
sourcetoeachdestination."
7073,"Itguarantees thateachdestination receivesoneand
onlyonecopyofthepacket."
7074,"DReversepathmulticasting (RPM)addspruningandgraftingtoRPBtocreatea
multicast shortestpathtreethatsupportsdynamic membership changes."
7075,"DDVMRP isamulticast routingprotocolthatusesthedistanceroutingprotocolto
createasource-based tree."
7076,"DTheCore-Based Tree(CBT)protocol isamulticast routingprotocol thatusesa
routerastherootofthetree.SECTION 22.8PRACTICE SET 697
DPIM-DM isasource-based treeroutingprotocol that usesRPFandpruningand
graftingstrategies tohandlemulticasting."
7077,"oPIM-SM isagroup-shared treeroutingprotocolthatissimilartoCBTandusesa
rendezvous routerasthesourceofthetree."
7078,"DFormulticasting betweentwononcontiguous multicast routers,wemakeamulticast
backbone (MBONE) toenabletunneling."
7079,"22.8PRACTICE SET
ReviewQuestions
1.Whatisthedifference betweenadirectandanindirectdelivery?"
7080,"2.Listthreeforwarding techniques discussed inthischapterandgiveabriefdescription
ofeach."
7081,3.Contrasttwodifferent routingtablesdiscussed inthischapter.
7082,4.WhatisthepurposeofRIP?
7083,5.Whatarethefunctions ofaRIPmessage?
7084,6.Whyistheexpiration timervalue6timesthatoftheperiodictimervalue?
7085,7.HowdoesthehopcountlimitalleviateRIP'sproblems?
7086,8.ListRIPshortcomings andtheircorresponding fixes.
7087,9.Whatisthebasisofclassification forthefourtypesoflinksdefinedbyOSPF?
7088,10.WhydoOSPFmessages propagate fasterthanRIPmessages?
7089,11.WhatisthepurposeofBGP?
7090,"12.Giveabriefdescription oftwogroupsofmulticast routingprotocols discussed in
thischapter."
7091,"Exercises
13.Showaroutingtableforahostthatistotallyisolated."
7092,"14.Showaroutingtableforahostthatisconnected toaLANwithoutbeingconnected
totheInternet."
7093,15.Findthetopology ofthenetworkifTable22.3istheroutingtableforrouterR1.
7094,"Table22.3RoutingtableforExercise 15
Network Next-Hop
Mask Address Address Interface
/27 202.14.17.224 - rn1
/18 145.23.192.0 - rnO
Default Default 130.56.12.4 m2
16.CanrouterR1inFigure22.8receiveapacketwithdestination address140.24.7.194?"
7095,"Explainyouranswer.698CHAPTER 22NETWORK LAYER:DEUVERY, FORWARDING, ANDROUTING
17.CanrouterRlinFigure22.8receiveapacketwithdestination addressl40.24.7.42?"
7096,Explainyouranswer.
7097,"18.Showtheroutingtablefortheregional ISPinFigure22.9.
19.ShowtheroutingtableforlocalISP1inFigure22.9.
20.ShowtheroutingtableforlocalISP2inFigure22.9.
21.ShowtheroutingtableforlocalISP3inFigure22.9.
22.ShowtheroutingtableforsmallISP1inFigure22.9.
23.Contrast andcompare distance vectorroutingwithlinkstaterouting."
7098,"24.Arouterhasthefollowing RIProutingtable:
Net!
Net2
Net3
Net44
2
!
5B
C
F
G
Whatwouldbethecontentsofthetableiftherouterreceived thefollowing RIP
message fromrouterC?"
7099,"Net! 2
Net2 !
Net3 3
Net4 7
25.HowmanybytesareemptyinaRIPmessage thatadvertises Nnetworks?"
7100,"26.Arouterhasthefollowing RIProutingtable:
Net!
Net2
Net3
Net44
2
1
5B
C
F
G
Showtheresponse message sentbythisrouter."
7101,"27.Showtheautonomous systemwiththefollowing specifications:
a.Thereareeightnetworks (NltoN8)."
7102,b.Thereareeightrouters(RltoR8).
7103,"c.Nl,N2,N3,N4,NS,andN6areEthernet LANs.
d.N7andN8arepoint-to-point WANs.
e.Rlconnects NlandN2."
7104,f.R2connects NlandN7.
7105,g.R3connects N2andN8.
7106,h.R4connects N7andN6.
7107,i.RSconnects N6andN3.
7108,j.R6connects N6andN4.
7109,k.R7connects N6andNS.
7110,"1.R8connects N8andN5.SECTION 22.8PRACTICE SET699
28.Drawthegraphical representation oftheautonomous systemofExercise 27as
seenbyOSPF."
7111,29.Whichofthenetworks inExercise 27isatransient network?
7112,"Whichisastub
network?"
7113,"30.ArouterusingDVMRP receivesapacketwithsourceaddress10.14.17.2 from
interface 2.Iftherouterforwards thepacket,whatarethecontentsoftheentry
relatedtothisaddressintheunicastroutingtable?"
7114,31.DoesRPFactuallycreateashortestpathtree?Explain.
7115,32.DoesRPBactuallycreateashortestpathtree?Explain.
7116,"Whataretheleavesof
thetree?"
7117,"33.DoesRPMactuallycreateashortestpathtree?Explain.Whataretheleavesof
thetree?"
7118,"Research Activities
34.IfyouhaveaccesstoUNIX(orLINUX), usenetstatandifconfigtofindtherouting
tablefortheservertowhichyouareconnected."
7119,35.FindouthowyourISPusesaddressaggregation andlongestmaskmatchprinciples.
7120,36.FindoutwhetheryourIPaddressispartofthegeographical addressallocation.
7121,"37.Ifyouareusingarouter,findthenumberandnamesofthecolumnsintherouting
table.Transport Layer
Objectives
Thetransport layerisresponsible forprocess-to-process deliveryoftheentiremessage."
7122,"Aprocessisanapplication program runningonahost.Whereas thenetwork layer
overseessource-to-destination deliveryofindividual packets,itdoesnotrecognize any
relationship between thosepackets.Ittreatseachoneindependently, asthougheach
piecebelonged toaseparatemessage, whetherornotitdoes.Thetransport layer,onthe
otherhand,ensuresthatthewholemessagearrivesintactandinorder,overseeing both
errorcontrolandflowcontrolatthesource-to-destination level."
7123,"Thetransport layerisresponsible forthedelivery
ofamessagefromoneprocesstoanother."
7124,"Computers oftenrunseveralprograms atthesametime.Forthisreason,source­
to-destination deliverymeansdeliverynotonlyfromonecomputer tothenextbutalso
fromaspecificprocessononecomputer toaspecificprocessontheother.Thetransport
layerheadermusttherefore includeatypeofaddresscalledaservice-point addressin
theOSImodelandportnumberorportaddresses intheInternetandTCP/IPprotocol
suite."
7125,Atransport layerprotocol canbeeitherconnectionless orconnection-oriented.
7126,"Aconnectionless transport layertreatseachsegment asanindependent packetand
deliversittothetransport layeratthedestination machine."
7127,"Aconnection-oriented
transport layermakesaconnection with thetransport layeratthedestination machine
firstbefore delivering thepackets.Afterallthedataistransferred, theconnection is
terminated."
7128,"Inthetransport layer,amessageisnormally dividedintotransmittable segments."
7129,"A
connectionless protocol, suchasUDP,treatseachsegment separately."
7130,"Aconnection­
orientedprotocol, suchasTCPandSCTP,createsarelationship betweenthesegments
usingsequence numbers."
7131,"Likethedatalinklayer,thetransport layermayberesponsible forflowanderror
control.However, flowanderrorcontrolatthislayerisperformed endtoendrather
thanacrossasinglelink.Wewillseethatoneoftheprotocols discussed inthispartofthebook,UDP,isnotinvolved infloworerrorcontroLOntheotherhand,theothertwo
protocols, TCPandSCTP,useslidingwindows forflowcontrolandanacknowledgment
systemforerrorcontroL
Part5ofthebookisdevotedtothetransport layer
andtheservicesprovided bythislayer."
7132,"Chapters
Thispartconsistsoftwochapters: Chapters 23and24."
7133,"Chapter23
Chapter 23discusses threetransport layerprotocols intheInternet: UDP,TCP,and
SCTP.Thefirst,UserDatagram Protocol (UDP),isaconnectionless, unreliable proto­
colthatisusedforitsefficiency."
7134,"Thesecond,Transmission ControlProtocol (TCP),isa
connection-oriented, reliableprotocol thatisagoodchoicefordatatransfer.Thethird,
StreamControlTransport Protocol (SCTP)isanewtransport-layer protocol designed
formultimedia applications."
7135,"Chapter24
Chapter24discusstworelatedtopics:congestion controlandqualityofservice.Although
thesetwoissuescanberelatedtoanylayer,wediscussthemherewithsomereferences to
otherlayers.CHAPTER 23
Process-la-Process Delivery:
UDp,TCp,andSCTP
Webeginthischapterbygivingtherationale fortheexistence ofthetransport layer­
theneedforprocess-to-process delivery."
7136,"Wediscusstheissuesarisingfromthistypeof
delivery, andwediscussmethods tohandlethem."
7137,"TheInternetmodelhasthreeprotocols atthetransport layer:UDP,TCP,andSCTP."
7138,"FirstwediscussUDP,whichisthesimplestofthethree.Weseehowwecanusethis
verysimpletransport layerprotocolthatlackssomeofthefeaturesoftheothertwo."
7139,"WethendiscussTCP,acomplextransport layerprotocol."
7140,"Weseehowourpreviously
presented concepts areappliedtoTCP.Wepostpone thediscussion ofcongestion control
andqualityofserviceinTCPuntilChapter24becausethesetwotopicsapplytothedata
linklayerandnetworklayeraswell."
7141,"WefinallydiscussSCTP,thenewtransport layerprotocol thatisdesigned for
multihomed, multistream applications suchasmultimedia."
7142,"23.1PROCESS-TO-PROCESS DELIVERY
Thedatalinklayerisresponsible fordeliveryofframesbetweentwoneighboring nodes
overalink.Thisiscallednode-to-node delivery."
7143,"Thenetworklayerisresponsible for
deliveryofdatagrams betweentwohosts.Thisiscalledhost-to-host delivery.Communi­
cationontheInternetisnotdefinedastheexchange ofdatabetween twonodesor
betweentwohosts.Realcommunication takesplacebetweentwoprocesses (application
programs)."
7144,Weneedprocess-to-process delivery.
7145,"However, atanymoment, severalpro­
cessesmayberunningonthesourcehostandseveralonthedestination host.Tocomplete
thedelivery,weneedamechanism todeliverdatafromoneoftheseprocesses runningon
thesourcehosttothecorresponding processrunningonthedestination host."
7146,"Thetransport layerisresponsible forprocess-to-process delivery-the deliveryof
apacket,partofamessage, fromoneprocesstoanother.Twoprocesses communicate
inaclient/server relationship, aswewillseelater.Figure23.1showsthesethreetypes
ofdeliveries andtheirdomains."
7147,Thetransport layerisresponsible forprocess-to-process delivery.
7148,"703704 CHAPTER 23PROCESS- TO-PROCESS DELIVERY: UDp, TCp, ANDSCTP
Figure23.1Typesofdatadeliveries
Processes
D···DNodetonode:Datalinklayer
Hosttohost:Network layer
Processtoprocess:Transport layerProcesses
D···w
\
\
\
\
\
\
\
\
\
\
\
\
\
\
""I
'I--
I
I
Nodeto:Nodeto:
node 1nodeII_ ,I
HosttohostNodetonode
ProcesstoprocessI
I ~':':f""'> ..:I
I I IINodetoINodetoI
Inode InodeIII 'II Jj
I
I'=-1
1
I
I
I
I
I
I
I
1
I
/
/
/'
Client/Server Paradigm
Although thereareseveralwaystoachieveprocess-to-process communication, themost
common oneisthroughtheclient/server paradigm."
7149,"Aprocessonthelocalhost,called
aclient,needsservicesfromaprocessusuallyontheremotehost,calledaserver."
7150,"Bothprocesses (clientandserver)havethesamename.Forexample, togettheday
andtimefromaremotemachine, weneedaDaytime clientprocessrunningonthe
localhostandaDaytime serverprocessrunningonaremotemachine."
7151,"Operating systemstodaysupportbothmultiuser andmultiprogramming environ­
ments.Aremotecomputer canrunseveralserverprograms atthesametime,justas
localcomputers canrunoneormoreclientprograms atthesametime.Forcommunica­
tion,wemustdefinethefollowing:
1.Localhost
2.Localprocess
3.Remotehost
4.Remoteprocess
Addressing
Whenever weneedtodeliversomething toonespecificdestination amongmany,weneed
anaddress.Atthedatalinklayer,weneedaMACaddresstochooseonenodeamongsev­
eralnodesiftheconnection isnotpoint-to-point."
7152,"Aframeinthedatalinklayerneedsa
destination MACaddressfordeliveryandasourceaddressforthenextnode'sreply."
7153,"Atthenetworklayer,weneedanIPaddresstochooseonehostamongmillions."
7154,"A
datagram inthenetworklayerneedsadestination IPaddressfordeliveryandasource
IPaddressforthedestination's reply."
7155,"Atthetransport layer,weneedatransport layeraddress,calledaportnumber, to
chooseamongmultipleprocesses runningonthedestination host.Thedestination port
numberisneededfordelivery; thesourceportnumberisneededforthereply."
7156,"IntheInternetmodel,theportnumbers are16-bitintegersbetween 0and65,535."
7157,"Theclientprogram definesitselfwithaportnumber,chosenrandomly bythetransport
layersoftware runningontheclienthost.Thisistheephemeral portnumber.SECTION 23.1PROCESS-TV-PROCESS DELWERY 705
Theserverprocessmustalsodefineitselfwithaportnumber.Thisportnumber,
however, cannotbechosenrandomly.Ifthecomputer attheserversiterunsaserver
processandassignsarandomnumberastheportnumber,theprocessattheclientsite
thatwantstoaccessthatserveranduseitsserviceswillnotknowtheportnumber.Of
course,onesolutionwouldbetosendaspecialpacketandrequesttheportnumberofa
specific server, butthisrequiresmoreoverhead."
7158,"TheInternethasdecidedtouseuniversal
portnumbers forservers;thesearecalledwell-known portnumbers."
7159,"Therearesome
exceptions tothisrule;forexample, thereareclientsthatareassigned well-known port
numbers."
7160,"Everyclientprocessknowsthewell-known portnumberofthecorresponding
serverprocess.Forexample, whiletheDaytime clientprocess,discussed above,can
useanephemeral (temporary) portnumber52,000toidentifyitself,theDaytime server
processmustusethewell-known (permanent) portnumber13.Figure23.2showsthis
concept."
7161,"Figure23.2Portnumbers
Daytime
client
DDD
H52,000f-----j
Transport layerDaytime
serverDDD
f-----j 13H
Transport layer
IDataI13~
ItshouldbeclearbynowthattheIPaddresses andportnumbers playdifferent
rolesinselecting thefinaldestination ofdata.Thedestination IPaddressdefinesthe
hostamongthedifferent hostsintheworld.Afterthehosthasbeenselected, theport
numberdefinesoneoftheprocesses onthisparticular host(seeFigure23.3)."
7162,"lANARanges
ThelANA(Internet Assigned NumberAuthority) hasdividedtheportnumbers into
threeranges:wellknown,registered, anddynamic (orprivate),asshowninFigure23.4.
oWell-known ports.Theportsrangingfrom0to1023areassigned andcontrolled
bylANA.Thesearethewell-known ports."
7163,"oRegistered ports.Theportsrangingfrom1024to49,151arenotassigned orcon­
trolledbylANA.Theycanonlyberegistered withlANAtopreventduplication."
7164,"oDynamic ports.Theportsrangingfrom49,152to65,535areneithercontrolled
norregistered."
7165,"Theycanbeusedbyanyprocess.Thesearetheephemeral ports.706 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Figure23.3IPaddresses versusportnumbers
~------------------~
i~~..."
7166,":ILJU I
I I
I I
I
I
IIIIIII
I
J I
: ~9}}~.~~?."
7167,":Portnumber
selectstheprocess
IPheaderf------I
Transport layer(---'-----1
header
Figure23.4lANArangesIPaddress
selectsthehost
DynamicRegistered
o1023 I 49,152
I-----r-l1--1--·--------11 IfT1024 49,151
Wellknown65,535
I
SocketAddresses
Process-to-process delivery needstwoidentifiers, IPaddressandtheportnumber, at
eachendtomakeaconnection."
7168,"Thecombination ofanIPaddressandaportnumberis
calledasocketaddress."
7169,"Theclientsocketaddressdefinestheclientprocessuniquely
justastheserversocketaddressdefinestheserverprocessuniquely (seeFigure23.5)."
7170,"Atransport layerprotocolneedsapairofsocketaddresses: theclientsocketaddress
andtheserversocketaddress.Thesefourpiecesofinformation arepartoftheIPheader
andthetransport layerprotocol header.TheIPheadercontains theIPaddresses; the
UDPorTCPheadercontainstheportnumbers."
7171,"Figure23.5Socketaddress
PortnumberSECTION 23.1PROCESS-TO-PROCESS DELIVERY 707
Multiplexing andDemultiplexing
Theaddressing mechanism allowsmultiplexing anddemultiplexing bythetransport
layer,asshowninFigure23.6.
Figure23.6Multiplexing anddemultiplexing
Processes Processes
Multiplexing
Atthesendersite,theremaybeseveralprocesses thatneedtosendpackets.However,
thereisonlyonetransport layerprotocolatanytime.Thisisamany-to-one relationship
andrequiresmultiplexing."
7172,"Theprotocol acceptsmessages fromdifferent processes,
differentiated bytheirassignedportnumbers."
7173,"Afteraddingtheheader,thetransport layer
passesthepackettothenetworklayer."
7174,"Demultiplexing
Atthereceiversite,therelationship isone-to-many andrequiresdemultiplexing."
7175,"The
transport layerreceivesdatagrams fromthenetwork layer.Aftererrorchecking and
dropping oftheheader,thetransport layerdeliverseachmessage totheappropriate
processbasedontheportnumber."
7176,"Connectionless VersusConnection-Oriented Service
Atransport layerprotocolcaneitherbeconnectionless orconnection-oriented."
7177,"Connectionless Service
Inaconnectionless service,thepacketsaresentfromonepartytoanotherwithnoneed
forconnection establishment orconnection release.Thepacketsarenotnumbered; they
maybedelayedorlostormayarriveoutofsequence."
7178,"Thereisnoacknowledgment
either.Wewillseeshortlythatoneofthetransport layerprotocols intheInternetmodel,
UDP,isconnectionless."
7179,"Connection~Oriented Service
Inaconnection-oriented service,aconnection isfirstestablished between thesender
andthereceiver.Dataaretransferred."
7180,"Attheend,theconnection isreleased."
7181,"Wewillsee
shortlythatTCPandSCTPareconnection-oriented protocols.708 CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
ReliableVersusUnreliable
Thetransport layerservicecanbereliableorunreliable."
7182,"Iftheapplication layerprogram
needsreliability, weuseareliabletransport layerprotocol byimplementing flowand
errorcontrolatthetransport layer.Thismeansaslowerandmorecomplex service.On
theotherhand,iftheapplication program doesnotneedreliability becauseitusesits
ownflowanderrorcontrolmechanism oritneedsfastserviceorthenatureoftheservice
doesnotdemand flowanderrorcontrol(real-time applications), thenanunreliable
protocol canbeused."
7183,"IntheInternet,therearethreecommon differenttransport layerprotocols, aswehave
alreadymentioned."
7184,"UDPisconnectionless andunreliable; TCPandSCTPareconnection­
oriented andreliable.Thesethreecanrespondtothedemands oftheapplication layer
programs."
7185,"Onequestion oftencomestothemind.Ifthedatalinklayerisreliableandhasflow
anderrorcontrol,doweneedthisatthetransport layer,too?Theanswerisyes.Reliability
atthedatalinklayerisbetweentwonodes;weneedreliability betweentwoends.Because
thenetworklayerintheInternetisunreliable (best-effort delivery), weneedtoimplement
reliability atthetransport layer.Tounderstand thaterrorcontrolatthedatalinklayerdoes
notguarantee errorcontrolatthetransport layer,letuslookatFigure23.7.
Figure23.7Errorcontrol
-Errorischeckedinthesepathsbythedatalinklayer
-Errorisnotcheckedinthesepathsbythedatalinklayer
Transport
NetworkTransport
Network
Datalink
Physical
Aswewillsee,flowanderrorcontrolinTCPisimplemented bytheslidingwindow
protocol, asdiscussed inChapter 11.Thewindow, however, is character-oriented,
insteadofframe-oriented."
7186,"ThreeProtocols
TheoriginalTCP/IPprotocol suitespecifies twoprotocols forthetransport layer:UDP
andTCP.WefirstfocusonUDP,thesimplerofthetwo,beforediscussing TCP.Anew
transport layerprotocol, SCTP,hasbeendesigned, whichwealsodiscussinthischapter."
7187,"Figure23.8showsthepositionoftheseprotocols intheTCP/IPprotocol suite.SECTION 23.2USERDATAGRAM PROTOCOL (UDP) 709
Figure23.8PositionofUDp,TCp,andSCTPinTCPIIPsuite
APPli';:~~~ISillP
IBBBI SNMP1·..1BOOTPI
Underlying LANorWAN
technologyPhysical
layerTm~:;:,IISCTP
II_TC-----'pII UDPII
IjIGMP11ICMPI I
Netwo<' ITI
layer IARPIIRARPI
Datalink
layer
23.2USERDATAGRAM PROTOCOL (UDP)
TheUserDatagram Protocol (UDP)iscalledaconnectionless, unreliable transport
protocol.Itdoesnotaddanything totheservicesofIPexcepttoprovideprocess-to­
processcommunication insteadofhost-to-host communication."
7188,"Also,itperforms very
limitederrorchecking."
7189,"IfUDPissopowerless, whywouldaprocesswanttouseit?Withthedisadvantages
comesomeadvantages."
7190,UDPisaverysimpleprotocolusinganrinimum ofoverhead.
7191,"If
aprocesswantstosendasmallmessage anddoesnotcaremuchaboutreliability, itcan
useUDP.Sendingasmallmessage byusingUDPtakesmuchlessinteraction between
thesenderandreceiverthanusingTCPorSCTP."
7192,"Well-Known PortsforUDP
Table23.1showssomewell-known portnumbers usedbyUDP.Someportnumbers
canbeusedbybothUDPandTCP.WediscussthemwhenwetalkaboutTCPlaterin
thechapter."
7193,"Table23.1Well-known portsusedwithUDP
Port Protocol Description
7Echo Echoesareceived datagram backtothesender
9Discard Discards anydatagram thatisreceived
11Users Activeusers710 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Table23.1Well-known portsusedwithUDP(continued)
Port Protocol Description
13Daytime Returnsthedateandthetime
17Quote Returnsaquoteoftheday
19Chargen Returnsastringofcharacters
53Nameserver DomainNameService
67BOOTPs Serverporttodownload bootstrap information
68BOOTPc Clientporttodownload bootstrap information
69TFTP TrivialFileTransfer Protocol
IIIRPC RemoteProcedure Call
123NTP Network TimeProtocol
161SNMP SimpleNetwork Management Protocol
162SNMP SimpleNetwork Management Protocol (trap)
Example 23.1
InUNIX,thewell-known portsarestoredinafilecalledfetcfservices."
7194,"Eachlineinthisfilegives
thenameoftheserverandthewell-known portnumber.Wecanusethegreputilitytoextractthe
linecorresponding tothedesiredapplication."
7195,"Thefollowing showstheportforFTP.Notethat
FrPcanuseport21witheitherUDPorTCP."
7196,"$grep
ftp
fipftpfetclservices
21ftcp
211udp
SNMPusestwoportnumbers (161and162),eachforadifferent purpose, aswewillseein
Chapter28."
7197,"$grep
snmp
snmp
snmptrapsnmpfetclservices
161ftcp
1611udp
162/udp#Simple NetMgmtProto
#Simple NetMgmtProto
#TrapsforSNMP
UserDatagram
UDPpackets,calleduserdatagrams, haveafixed-size headerof8bytes.Figure23.9
showstheformatofauserdatagram."
7198,"Thefieldsareasfollows:
oSourceportnumber."
7199,"Thisistheportnumberusedbytheprocessrunningonthe
sourcehost.Itis16bitslong,whichmeansthattheportnumbercanrangefrom0to
65,535.Ifthesourcehostistheclient(aclientsendingarequest), theportnumber,in
mostcases,isanephemeral portnumberrequested bytheprocessandchosenbythe
UDPsoftware runningonthesourcehost.Ifthesourcehostis theserver(aserver
sendingaresponse), theportnumber,inmostcases,isawell-known portnumber.SECTION 23.2USERDATAGRAM PROTOCOL (UDP) 711
Figure23.9Userdatagram format
8bytes
I' 'I
Data
Sourceportnumber
16bits
Totallength
16bitsDestination portnumber
16bits
Checksum
16bits
oDestination portnumber."
7200,"Thisistheportnumberusedbytheprocessrunningon
thedestination host.Itisalso16bitslong.Ifthedestination hostistheserver(a
clientsending arequest), theportnumber, inmostcases,isawell-known port
number.Ifthedestination hostistheclient(aserversendingaresponse), theport
number, inmostcases,isanephemeral portnumber."
7201,"Inthiscase,theservercopies
theephemeral portnumberithasreceived intherequestpacket."
7202,oLength.
7203,"Thisisa16-bitfieldthatdefinesthetotallengthoftheuserdatagram,
headerplusdata.The16bitscandefineatotallengthof0to65,535bytes.How­
ever,thetotallengthneedstobemuchlessbecauseaUDPuserdatagram isstored
inanIPdatagram withatotallengthof65,535 bytes."
7204,ThelengthfieldinaUDPuserdatagram isactually notnecessary.
7205,"Auser
datagram isencapsulated inanIPdatagram."
7206,"ThereisafieldintheIPdatagram
thatdefinesthetotallength.ThereisanotherfieldintheIPdatagram thatdefines
thelengthoftheheader.Soifwesubtractthevalueofthesecondfieldfromthe
first,wecandeducethelengthofaUDPdatagram thatisencapsulated inan
IPdatagram."
7207,"UDPlength=IPlength-IPheader'slength
However, thedesigners oftheUDPprotocol feltthatitwasmoreefficient forthe
destination UDPtocalculate thelengthofthedatafromtheinformation provided
intheUDPuserdatagram ratherthanasktheIPsoftware tosupplythisinformation."
7208,"Weshouldremember thatwhenthe IPsoftware deliverstheUDPuserdatagram to
theUDPlayer,ithasalreadydropped theIPheader."
7209,oChecksum.
7210,"Thisfieldisusedtodetecterrorsovertheentireuserdatagram (header
plusdata).Thechecksum isdiscussed next."
7211,"Checksum
Wehavealreadytalkedabouttheconceptofthechecksum andthewayitiscalculated
inChapter10.Wehavealsoshownhowtocalculate thechecksum fortheIPandICMP
packet.WenowshowhowthisisdoneforUDP.712CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
TheUDPchecksum calculation isdifferent fromtheoneforIPandICMP.Here
thechecksum includes threesections: apseudoheader, theUDPheader,andthedata
comingfromtheapplication layer."
7212,"ThepseudoheaderisthepartoftheheaderoftheIPpacketinwhichtheuserdata­
gramistobeencapsulated withsomefieldsfilledwithOs(seeFigure23.10)."
7213,"Figure23.10Pseudoheader forchecksum calculation
32-bitsourceIPaddress
32-bitdestination IPaddress
AliOsI8-bitprotocol16-bitUDPtotallength(17)
Sourceportaddress Destination portaddress
16bits 16bits
UDPtotallength Checksum
16bits 16bits
J)ata
(padding mustbeaddedtomakethedataamultipleof16bits)
Ifthechecksum doesnotincludethepseudoheader, auserdatagram mayarrivesafe
andsound.However, iftheIPheaderiscorrupted, itmaybedelivered tothewronghost."
7214,"Theprotocol fieldisaddedtoensurethatthepacketbelongs toUDP,andnot
toothertransport-layer protocols."
7215,"WewillseelaterthatifaprocesscanuseeitherUDP
orTCP,thedestination portnumbercanbethesame.Thevalueoftheprotocol field
forUDPis17.Ifthisvalueischangedduringtransmission, thechecksum calculation at
thereceiverwilldetectitandUDPdropsthepacket.Itisnotdelivered tothewrong
protocol."
7216,"Notethesimilarities between thepseudoheader fieldsandthelast12bytesofthe
IPheader."
7217,"Example 23.2
Figure23.11showsthechecksum calculation foraverysmalluserdatagram withonly7bytes
ofdata.Becausethenumberofbytesofdataisodd,paddingisaddedforchecksum calcUlation."
7218,"Thepseudoheader aswellasthepaddingwillbedroppedwhentheuserdatagram isdelivered
toIP."
7219,"Optional UseoftheChecksum
Thecalculation ofthechecksum anditsinclusion inauserdatagram areoptional.If
thechecksum isnotcalculated, thefieldisfilledwith1s.Notethatacalculated check­
sumcanneverbeallIsbecausethisimpliesthatthesumisallOs,whichisimpossible
becauseitrequiresthatthevalueoffieldstobeOs.SECTION 23.2USERDATAGRAM PROTOCOL (UDP) 713
Figure23.11 Checksum calculation ofasimpleUDPuserdatagram
--:----:----~--1~153.18.8.105
171.2.14.10
AllOsI17I15
1087
1513
AllOs10011001 00010010~ 153.18
00001000 01101001~ 8.105
1010101100000010~ 171.2
00001110 00001010~ 14.10
00000000 00010001~oand17
00000000 00001111~ 15
00000100 00111111~ 1087
00000000 00001101~ 13
00000000 00001111~ 15
00000000 00000000 ~0(checksum)
01010100 01000101~ TandE
01010011 01010100~SandT
01001001 01001110~ IandN
010001II00000000~ Gand0(padding)
1O01O110 11101011~ Sum
HUHIOOl 00010100~ Checksum
UDPOperation
UDPusesconcepts common tothetransport layer.Theseconcepts willbediscussed
herebriefly,andthenexpanded inthenextsectionontheTCPprotocol."
7220,"Connectionless Services
Asmentioned previously, UDPprovides aconnectionless service.Thismeansthateach
userdatagram sentbyUDPisanindependent datagram."
7221,"Thereisnorelationship
betweenthedifferent userdatagrams eveniftheyarecomingfromthesamesourcepro­
cessandgoingtothesamedestination program."
7222,Theuserdatagrams arenotnumbered.
7223,"Also,thereisnoconnection establishmentand noconnection termination, asisthecase
forTCP.Thismeansthateachuserdatagram cantravelonadifferent path."
7224,"Oneoftheramifications ofbeingconnectionless isthattheprocessthatusesUDP
cannotsendastreamofdatatoUDPandexpectUDPtochopthemintodifferent
relateduserdatagrams."
7225,"Insteadeachrequestmustbesmallenoughtofitintooneuser
datagram."
7226,Onlythoseprocesses sendingshortmessages shoulduseUDP.
7227,"FlowandErrorControl
UDPisaverysimple,unreliable transport protocol."
7228,"Thereisnoflowcontrolandhence
nowindowmechanism."
7229,Thereceivermayoverflow withincoming messages.
7230,Thereisnoerrorcontrolmechanism inUDPexceptforthechecksum.
7231,"Thismeans
thatthesenderdoesnotknowifamessagehasbeenlostorduplicated."
7232,"Whenthereceiver
detectsanerrorthroughthechecksum, theuserdatagram issilentlydiscarded."
7233,"ThelackofflowcontrolanderrorcontrolmeansthattheprocessusingUDP
shouldprovidethese mechanisms."
7234,"Encapsulation andDecapsulation
Tosendamessage fromone process toanother,theUDPprotocol encapsulates and
decapsulates messages inanIPdatagram.714 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Queuing
Wehavetalkedaboutportswithoutdiscussing theactualimplementation ofthem.In
UDP,queuesareassociated withports(seeFigure23.12)."
7235,"Figure23.12QueuesinUDP
Daytime Daytime
client server[jD
Outgoing,\Incoming Outgoing,\Incoming
queue queue queue queue
~t ~t
UDP Port52000 UDP Port13
Attheclientsite,whenaprocessstarts,itrequestsaportnumberfromtheoperating
system.Someimplementations createbothanincoming andanoutgoing queueassociated
witheachprocess.Otherimplementations createonlyanincoming queueassociated
witheachprocess."
7236,"Notethatevenifaprocesswantstocommunicate withmultiple processes, it
obtainsonlyoneportnumberandeventually oneoutgoing andoneincoming queue."
7237,"Thequeuesopenedbytheclientare,inmostcases,identified byephemeral portnumbers."
7238,"Thequeuesfunctionaslongastheprocessisrunning.Whentheprocessterminates, the
queuesaredestroyed."
7239,"Theclientprocesscansendmessages totheoutgoing queuebyusingthesource
portnumberspecified intherequest.UDPremovesthemessages onebyoneand,after
addingtheUDPheader,deliversthemtoIP.Anoutgoing queuecanoverflow.Ifthis
happens, theoperating systemcanasktheclientprocesstowaitbeforesendingany
moremessages."
7240,"Whenamessage arrivesforaclient,UDPcheckstoseeifanincoming queuehas
beencreatedfortheportnumberspecified inthedestination portnumberfieldofthe
userdatagram."
7241,"Ifthereissuchaqueue,UDPsendsthereceived userdatagram tothe
endofthequeue.Ifthereisnosuchqueue,UDPdiscardstheuserdatagram andasks
theICMPprotocoltosendaportunreachable message totheserver.Alltheincoming
messages foroneparticular clientprogram, whethercomingfromthesameoradifferent
server,aresenttothesamequeue.Anincoming queuecanoverflow.Ifthishappens,
UDPdropstheuserdatagram andasksforaportunreachable message tobesentto
theserver."
7242,"Attheserversite,themechanism ofcreatingqueuesisdifferent."
7243,"Initssimplestform,
aserverasksforincoming andoutgoing queues,usingitswell-known port,whenitstarts
running.Thequeuesremainopenaslongastheserverisrunning."
7244,"Whenamessage arrivesforaserver,UDPcheckstoseeifanincoming queuehas
beencreatedfortheportnumberspecified inthedestination portnumberfieldoftheuserSECTION 23.3TCP 715
datagram."
7245,"Ifthereissuchaqueue,UDPsendsthereceived userdatagram totheendof
thequeue.Ifthereisnosuchqueue,UDPdiscardstheuserdatagram andaskstheICMP
protocol tosendaportunreachable message totheclient.Alltheincoming messages
foroneparticular server,whethercomingfromthesameoradifferent client,aresentto
thesamequeue.Anincoming queuecanoverflow.Ifthishappens, UDPdropstheuser
datagram andasksforaportunreachable message tobesenttotheclient."
7246,"Whenaserverwantstorespondtoaclient,itsendsmessages totheoutgoing queue,
usingthesourceportnumberspecified intherequest.UDPremoves themessages one
byoneand,afteraddingtheUDPheader,deliversthemtoIP.Anoutgoing queuecan
overflow.Ifthishappens, theoperating systemaskstheservertowaitbeforesending
anymoremessages."
7247,"UseofUDP
Thefollowing listssomeusesoftheUDPprotocol:
oUDPissuitableforaprocessthatrequiressimplerequest-response communication
withlittleconcernforflowanderrorcontrol.Itisnotusuallyusedforaprocess
suchasFrPthatneedstosendbulkdata(seeChapter26)."
7248,oUDPissuitableforaprocesswithinternalflowanderrorcontrolmechanisms.
7249,"For
example, theTrivialFileTransferProtocol (TFTP)processincludes flowanderror
control.ItcaneasilyuseUDP."
7250,oUDPisasuitabletransport protocol formulticasting.
7251,"Multicasting capability is
embedded intheUDPsoftware butnotintheTCPsoftware."
7252,oUDPisusedformanagement processes suchasSNMP(seeChapter28).
7253,"oUDPisusedforsomerouteupdating protocols suchasRoutingInformation Protocol
(RIP)(seeChapter22)."
7254,"23.3TCP
Thesecondtransport layerprotocol wediscussinthischapteriscalledTransmission
ControlProtocol (TCP).TCP,likeUDP,isaprocess-to-process (program-to-program)
protocol."
7255,"TCP,therefore, likeUDP,usesportnumbers."
7256,"UnlikeUDP,TCPisaconnection­
oriented protocol; itcreatesavirtualconnection between twoTCPstosenddata.In
addition, TCPusesflowanderrorcontrolmechanisms atthetransport level."
7257,"Inbrief,TCPiscalledaconnection-oriented, reliabletransport protocol.Itadds
connection-oriented andreliability featurestotheservicesofIP."
7258,"TCPServices
BeforewediscussTCPindetail,letusexplaintheservicesofferedbyTCPtothepro­
cessesattheapplication layer."
7259,"Process-to-Process Communication
LikeUDP,TCPprovidesprocess-to-process communication usingportnumbers."
7260,"Table23.2
listssomewell-known portnumbers used byTCP.716 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Table23.2Well-known portsusedbyTCP
Port Protocol Description
7Echo Echoesareceiveddatagram backtothesender
9Discard Discards anydatagram thatisreceived
11Users Activeusers
13Daytime Returnsthedateandthetime
17Quote Returnsaquoteoftheday
19Chargen Returnsastringofcharacters
20FIP,Data FileTransferProtocol (dataconnection)
21FIP,Control FileTransfer Protocol (controlconnection)
23TELNET Tenninal Network
25SMTP SimpleMailTransferProtocol
53DNS DomainNameServer
67BOOTP Bootstrap Protocol
79Finger Finger
80HTTP Hypertext Transfer Protocol
111RPC RemoteProcedure Call
StreamDelivery Service
TCP,unlikeUDP,isastream-oriented protocol."
7261,"InUDP,aprocess(anapplication pro­
gram)sendsmessages, withpredefined boundaries, toUDPfordelivery."
7262,"UDPaddsits
ownheadertoeachofthesemessages anddeliversthemtoIPfortransmission."
7263,"Each
message fromtheprocessiscalIedauserdatagram andbecomes, eventually, oneIP
datagram."
7264,NeitherIPnorUDPrecognizes anyrelationship betweenthedatagrams.
7265,"TCP,ontheotherhand,allows the sendingprocesstodeliverdataasastreamof
bytesandallows the receiving processtoobtaindataasastreamofbytes.TCPcreates
anenvironment inwhichthetwoprocesses seemtobeconnected byanimaginary ""tube""
thatcarriestheirdataacrosstheInternet."
7266,"Thisimaginary environment isdepicted in
Figure23.13.Thesendingprocessproduces (writesto)thestreamofbytes,andthe
receiving processconsumes (readsfrom)them."
7267,"Figure23.13 Streamdelivery
Sending
processReceiving
process
TCP TCPSECTION 23.3TCP 717
SendingandReceiving Buffers Becausethesendingandthereceiving processes may
notwriteorreaddataatthesamespeed,TCPneedsbuffersforstorage.Therearetwo
buffers,thesendingbufferandthereceiving buffer,oneforeachdirection."
7268,"(Wewillsee
laterthatthesebuffersarealsonecessary forflowanderrorcontrolmechanisms used
byTCP.)Onewaytoimplement abufferistouseacirculararrayofI-bytelocations as
showninFigure23.14.Forsimplicity, wehaveshowntwobuffersof20byteseach;
normally thebuffersarehundreds orthousands ofbytes,depending ontheimplemen­
tation.Wealsoshowthebuffersasthesamesize,whichisnotalwaysthecase."
7269,"Figure23.14Sendingandreceiving buffers
Sending
process
TCP
Nextbyte
towriteReceiving
process
Nextbyte
toreadTCP
Figure23.14showsthemovement ofthedatainonedirection."
7270,"Atthesendingsite,
thebufferhasthreetypesofchambers."
7271,"Thewhitesectioncontains emptychambers that
canbefilledbythesendingprocess(producer)."
7272,"Thegrayareaholdsbytesthathave
beensentbutnotyetacknowledged."
7273,"TCPkeepsthesebytesinthebufferuntilitreceives
anacknowledgment."
7274,Thecoloredareacontains bytestobesentbythesendingTCP.
7275,"However, aswewillseelaterinthischapter,TCPmaybeabletosendonlypartofthis
coloredsection.Thiscouldbeduetotheslowness ofthereceiving processorperhaps
tocongestion inthenetwork."
7276,"Alsonotethatafterthebytesinthegraychambers are
acknowledged, thechambers arerecycled andavailable for usebythesendingprocess."
7277,Thisiswhyweshowacircularbuffer.
7278,"Theoperation ofthebufferatthereceiver siteissimpler.Thecircularbufferis
dividedintotwoareas(shownaswhiteandcolored)."
7279,"Thewhiteareacontains empty
chambers tobefilledbybytesreceived fromthenetwork."
7280,"Thecoloredsectionscontain
received bytesthatcanbereadbythereceiving process."
7281,"Whenabyteisreadbythe
receiving process,thechamber isrecycled andaddedtothepoolofemptychambers."
7282,"Segments Although buffering handlesthedisparity betweenthespeedoftheproducing
andconsuming processes, weneedonemorestepbeforewecansenddata.TheIPlayer,
asaserviceprovider forTCP,needstosenddatainpackets,notasastreamofbytes.At718 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
thetransport layer,TCPgroupsanumberofbytestogetherintoapacketcalledasegment."
7283,"TCPaddsaheadertoeachsegment(forcontrolpurposes) anddeliversthesegmenttothe
IPlayerfortransmission."
7284,"Thesegments areencapsulated inIPdatagramsandtransmit­
ted.Thisentireoperation istransparent tothereceiving process.Laterwewillseethat
segments maybereceivedoutoforder,lost,orcorrupted andresent.Allthesearehandled
byTCPwiththereceiving process unaware ofanyactivities."
7285,"Figure23.15showshow
segments arecreatedfromthebytesinthebuffers."
7286,"Figure23.15 TCPsegments
Sending
processReceiving
process
TCP TCP
Nextbyte
toacceptNextbyte
todeliver
Segment1 SegmentN
L-----.jI-+JjIUIlii""illiliil· ...•••II11Hl..-+-_----1
Notethatthesegments arenotnecessarily thesamesize.InFigure23.15,forsim­
plicity,weshowonesegment carrying 3bytesandtheothercarrying 5bytes.Inreality,
segments carryhundreds, ifnotthousands, ofbytes."
7287,"Full-Duplex Communication
TCPoffersfull-duplex service,inwhichdatacanflowinbothdirections atthesametime."
7288,"EachTCPthenhasasendingandreceiving buffer,andsegments moveinbothdirections."
7289,"Connection-Oriented Service
TCP,unlikeUDP,isaconnection-oriented protocol."
7290,"WhenaprocessatsiteAwantsto
sendandreceivedatafromanotherprocessatsiteB,thefollowing occurs:
1.ThetwoTCPsestablish aconnection between them."
7291,2.Dataareexchanged inbothdirections.
7292,3.Theconnection isterminated.
7293,"Notethatthisisavirtualconnection, notaphysical connection."
7294,"TheTCPsegment is
encapsulated inanIPdatagram andcanbesentoutoforder,orlost,orcorrupted, andthen
resent.Eachmayuseadifferentpathtoreachthedestination."
7295,"Thereisnophysicalconnec­
tion.TCPcreatesastream-oriented environment inwhichitacceptstheresponsibility ofSECT/ON 23.3TCP719
delivering thebytesinordertotheothersite.Thesituation issimilartocreatingabridge
thatspansmultiple islandsandpassingallthebytesfromoneislandtoanotherinone
singleconnection."
7296,Wewilldiscussthisfeaturelaterinthechapter.
7297,"Reliable Service
TCPisareliabletransport protocol.Itusesanacknowledgment mechanism tocheck
thesafeandsoundarrivalofdata.Wewilldiscussthisfeaturefurtherinthesectionon
errorcontrol."
7298,"TCPFeatures
Toprovidetheservicesmentioned intheprevious section,TCPhasseveralfeaturesthat
arebrieflysummarized inthissectionanddiscussed laterindetail."
7299,"Numbering System
Although theTCPsoftware keepstrackofthesegments beingtransmitted orreceived,
thereisnofieldforasegment numbervalueinthesegment header.Instead,thereare
twofieldscalledthesequence number andtheacknowledgment number."
7300,"Thesetwo
fieldsrefertothebytenumberandnotthesegmentnumber."
7301,ByteNumber TCPnumbersalldatabytesthataretransmitted inaconnection.
7302,"Number­
ingisindependent ineachdirection."
7303,"WhenTCPreceivesbytesofdatafromaprocess,it
storestheminthesendingbufferandnumbersthem.Thenumbering doesnotnecessarily
startfromO.Instead,TCPgenerates arandomnumberbetween0and232-1forthenum­
berofthefirstbyte.Forexample, iftherandomnumberhappenstobe1057andthetotal
datatobesentare6000bytes,thebytesarenumbered from1057to7056.Wewillseethat
bytenumbering isusedforflowanderrorcontrol."
7304,Thebytesofdatabeingtransferred ineachconnection arenumbered byTCP.
7305,Thenumbering startswitharandomly generated number.
7306,"Sequence Number Afterthebyteshavebeennumbered, TCPassignsasequence
numbertoeachsegmentthatisbeingsent.Thesequence numberforeachsegment is
thenumberofthefirstbytecarriedinthatsegment."
7307,"Example 23.3
Suppose aTCPconnection istransferring afileof5000bytes.Thefirstbyteisnumbered 1O,00l."
7308,"Whatarethesequence numbers foreachsegmentifdataaresentinfivesegments, eachcarrying
1000bytes?"
7309,"Solution
Thefollowing showsthesequence numberforeachsegment:
Segment 1 Sequence Number: 10,001(range:10,001to11,(00)
Segment 2 Sequence Number: 11,001(range:11,001to12,000)
Segment 3 Sequence Number: 12,001(range:12,001to13,000)
Segment 4 Sequence Number: 13,001(range:13,001to14,000)
Segment 5 Sequence Number: 14,001(range:14,001to15,000)720CHAPTER 23PROCESS-TO-PROCESS DEliVERY: UDp,TCP,ANDSCTP
Thevalueinthesequence numberfieldofasegmentdefinesthe
numberofthefirstdatabytecontained inthatsegment."
7310,"Whenasegment carriesacombination ofdataandcontrolinformation (piggy­
backing), itusesasequence number.Ifasegmentdoesnotcarryuserdata,itdoesnot
logically defineasequence number.Thefieldisthere,butthevalueisnotvalid.However,
somesegments, whencarrying onlycontrolinformation, needasequence numberto
allowanacknowledgment fromthereceiver."
7311,"Thesesegments areusedforconnection
establishment, termination, orabortion."
7312,"Eachofthesesegments consumes onesequence
numberasthoughitcarried1byte,buttherearenoactualdata.Iftherandomly generated
sequence numberisx,thefirstdatabyteisnumbered x+1.Thebytexisconsidered a
phonybytethatisusedforacontrolsegmenttoopenaconnection, aswewillseeshortly."
7313,"Acknowledgment Number Aswediscussed previously, communication inTCPisfull
duplex;whenaconnection isestablished, bothpartiescansendandreceivedataatthe
sametime.Eachpartynumbers thebytes,usuallywithadifferent startingbytenumber."
7314,"Thesequence numberineachdirection showsthenumberofthefirstbytecarriedby
thesegment."
7315,"Eachpartyalsousesanacknowledgment numbertoconfirmthebytesithas
received."
7316,"However, theacknowledgment numberdefinesthenumberofthenextbyte
thatthepartyexpectstoreceive.Inaddition, theacknowledgment numberiscumula­
tive,whichmeansthatthepartytakesthenumberofthelastbytethatithasreceived,
safeandsound,addsItoit,andannounces thissumastheacknowledgment number."
7317,"Thetermcumulative heremeansthatifapartyuses5643asanacknowledgment number,
ithasreceived allbytesfromthebeginning upto5642.Notethatthisdoesnotmean
thatthepartyhasreceived5642bytesbecausethefirstbytenumberdoesnothavetostart
fromO."
7318,"Thevalueoftheacknowledgment fieldinasegmentdefines
thenumberofthenextbyteapartyexpectstoreceive."
7319,Theacknowledgment numberiscumulative.
7320,"FlowControl
TCP,unlikeUDP,provides flowcontrol.Thereceiverofthedatacontrolstheamountof
datathataretobesentbythesender.Thisisdonetopreventthereceiverfrombeingover­
whelmed withdata.Thenumbering systemallowsTCPtouseabyte-oriented flowcontrol."
7321,"ErrorControl
Toprovidereliableservice,TCPimplements anerrorcontrolmechanism."
7322,"Although
errorcontrolconsiders asegmentastheunitofdataforerrordetection (lossorcorrupted
segments), errorcontrolisbyte-oriented, aswewillseelater."
7323,"Congestion Control
TCP,unlikeUDP,takesintoaccountcongestion inthenetwork."
7324,"Theamountofdatasent
byasenderisnotonlycontrolled bythe receiver (flowcontrol), butisalsodetennined
bythelevelofcongestion inthenetwork.SECTION 23.3TCP 721
Segment
BeforewediscussTCPingreaterdetail,letusdiscusstheTCPpacketsthemselves."
7325,"A
packetinTCPiscalledasegment."
7326,"Format
TheformatofasegmentisshowninFigure23.16."
7327,"Figure23.16TCPsegmentformat
Sequence number
32bits
Acknowledgment number
32bits
HLEN
4bits
OptionsandPaddingWindow size
16bits
Urgentpointer
16bits
Thesegment consistsofa20-to60-byteheader,followed bydatafromtheappli­
cationprogram."
7328,"Theheaderis20bytesiftherearenooptionsandupto60bytesifit
containsoptions.Wewilldiscusssomeoftheheaderfieldsinthissection.Themeaning
andpurposeofthesewillbecomeclearerasweproceedthroughthechapter."
7329,oSourceportaddress.
7330,"Thisisa16-bitfieldthatdefinestheportnumberofthe
application program inthehostthatissending the segment."
7331,"Thisservesthesame
purposeasthesourceportaddressintheUDPheader."
7332,oDestination portaddress.
7333,"Thisisa16-bitfieldthatdefinestheportnumberofthe
application program inthehostthatisreceiving thesegment."
7334,"Thisservesthesame
purposeasthedestination portaddressintheUDPheader."
7335,oSequence number.
7336,"This32-bitfielddefinesthenumberassignedtothefirstbyteof
datacontained inthissegment."
7337,"Aswesaidbefore,TCPisastreamtransport protocol."
7338,"Toensureconnectivity, eachbytetobetransmitted isnumbered."
7339,"Thesequence number
tellsthedestination whichbyteinthissequence comprises thefirstbyteintheseg­
ment.Duringconnection establishment, eachpartyusesarandomnumbergenerator to
createaninitialsequence number(ISN),whichisusuallydifferentineachdirection."
7340,oAcknowledgment number.
7341,"This32-bitfielddefinesthebytenumberthatthe
receiverofthesegmentisexpecting toreceivefromtheotherparty.Ifthereceiver722CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
ofthesegment hassuccessfully received bytenumberxfromtheotherparty,it
definesx+Iastheacknowledgment number.Acknowledgment anddatacanbe
piggybacked together."
7342,"DHeaderlength.This4-bitfieldindicates thenumberof4-bytewordsintheTCP
header.Thelengthoftheheadercanbebetween 20and60bytes.Therefore, the
valueofthisfieldcanbebetween5(5x 4=20)and15(15x 4=60)."
7343,DReserved.
7344,Thisisa6-bitfieldreserved forfutureuse.
7345,DControl.
7346,Thisfielddefines6differentcontrolbitsorflagsasshowninFigure23.17.
7347,Oneormoreofthesebitscanbesetatatime.
7348,"Figure23.17Controlfield
RSTRST:Resettheconnection
SYN:Synchronize sequence numbers
FIN:Terminate theconnection
PSH ACKURG:Urgentpointerisvalid
ACK:Acknowledgment isvalid
PSH:Requestforpush
URGSYN FINI ____ 01.....-_""""""""-- _
Thesebitsenableflowcontrol,connection establishment andtermination, connection
abortion, andthemodeofdatatransferinTCP.Abriefdescription ofeachbitisshownin
Table23.3.Wewilldiscussthemfurtherwhenwestudythedetailedoperation ofTCP
laterinthechapter."
7349,"Table23.3Description offlagsinthecontrolfield
Flag Description
URGThevalueoftheurgentpointerfieldisvalid."
7350,ACKThevalueoftheacknowledgment fieldisvalid.
7351,PSHPushthedata.
7352,RSTResettheconnection.
7353,SYNSynchronize sequence numbers duringconnection.
7354,FINTerminate theconnection.
7355,"DWindow size.Thisfielddefinesthesizeofthewindow, inbytes,thattheother
partymustmaintain."
7356,"Notethatthelengthofthisfieldis16bits,whichmeansthat
themaximum sizeofthewindowis65,535bytes."
7357,"This valueisnormally referred
toasthereceiving window(rwnd)andisdetermined bythereceiver."
7358,"Thesender
mustobeythedictation ofthereceiverinthis case."
7359,DChecksum.
7360,This16-bitfieldcontainsthechecksum.
7361,"Thecalculation ofthecheck­
sumforTCPfollowsthesameprocedure astheone described forUDP.However, the
inclusion ofthechecksum intheUDPdatagram isoptional, whereastheinclusion
ofthechecksum forTCPismandatory."
7362,"Thesamepseudoheader, servingthesameSECTION 23.3TCP 723
purpose,isaddedtothesegment."
7363,"FortheTCPpseudoheader,thevalueforthepro­
tocolfieldis6."
7364,oUrgentpointer.
7365,"Thisl6-bitfield,whichisvalidonlyiftheurgentflagisset,is
usedwhenthesegmentcontains urgentdata.Itdefinesthenumberthatmustbe
addedtothesequence numbertoobtainthenumberofthelasturgentbyteinthe
datasectionofthesegment."
7366,Thiswillbediscussed laterinthischapter.
7367,oOptions.
7368,Therecanbeupto40bytesofoptionalinformation intheTCPheader.
7369,"Wewillnotdiscusstheseoptionshere;pleaserefertothereference listformore
information."
7370,"ATCPConnection
TCPisconnection-oriented."
7371,"Aconnection-oriented transport protocol establishes a
virtualpathbetweenthesourceanddestination."
7372,"Allthesegments belonging toames­
sagearethensentoverthisvirtualpath.Usingasinglevirtualpathway fortheentire
message facilitates theacknowledgment processaswellasretransmission ofdamaged
orlostframes.YoumaywonderhowTCP,whichusestheservicesofIP,aconnection­
lessprotocol, canbeconnection-oriented."
7373,"ThepointisthataTCPconnection isvirtual,
notphysical."
7374,"TCPoperatesatahigherlevel.TCPusestheservicesofIPtodeliverindi­
vidualsegments tothereceiver,butitcontrolstheconnection itself.Ifasegmentislost
orcorrupted, itisretransmitted."
7375,"UnlikeTCP,IPisunawareofthisretransmission."
7376,"Ifa
segment arrivesoutoforder,TCPholdsituntilthemissingsegments arrive;IPis
unawareofthisreordering."
7377,"InTCP,connection-oriented transmission requiresthreephases:connection estab­
lishment, datatransfer,andconnection termination."
7378,"Connection Establishment
TCPtransmits datainfull-duplex mode.WhentwoTCPsintwomachines arecon­
nected,theyareabletosendsegments toeachothersimultaneously."
7379,"Thisimpliesthat
eachpartymustinitialize communication andgetapproval fromtheotherpartybefore
anydataaretransferred."
7380,"Three-WayHandshaking Theconnection establishment inTCPiscalledthree­
wayhandshaking."
7381,"Inourexample, anapplication program, calledtheclient,wantsto
makeaconnection withanotherapplication program, calledtheserver,usingTCPas
thetransport layerprotocol."
7382,"Theprocessstartswiththeserver.TheserverprogramtellsitsTCPthatitisready
toacceptaconnection."
7383,"Thisiscalledarequestforapassiveopen.Although theserver
TCPisreadytoacceptanyconnection fromanymachine intheworld,itcannotmake
theconnection itself."
7384,"Theclientprogramissuesarequestforanactiveopen.Aclientthatwishestocon­
necttoanopenservertellsitsTCPthatitneedstobeconnected tothatparticular
server.TCPcannowstartthethree-way handshaking processasshowninFigure23.18."
7385,"Toshowtheprocess,weusetwotimelines:oneateachsite.Eachsegmenthasvalues
forallitsheaderfieldsandperhapsforsomeofitsoptionfields,too.However, weshow
onlythefewfieldsnecessary tounderstand eachphase.Weshowthesequence number,724CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Figure23.18Connection establishment usingthree-way handshaking
Client
r--A:ACKflag
S:SYNflagServer-
Active
open
TimePassive
gr-~-~~~------l open
Time
theacknowledgment number,thecontrolflags(onlythosethatareset),andthewindow
size,ifnotempty.Thethreestepsinthisphaseareasfollows."
7386,"1.Theclientsendsthefirstsegment, aSYNsegment, inwhichonlytheSYNflagisset."
7387,"Thissegmentisforsynchronization ofsequence numbers.Itconsumes onesequence
number.Whenthedatatransferstarts,thesequence numberisincremented by1.We
cansaythattheSYNsegmentcarriesnorealdata,butwecanthinkofitascontaining
1imaginary byte."
7388,"ASYNsegmentcannotcarrydata,butitconsumes onesequence number."
7389,"2.Theserversendsthesecondsegment, aSYN+ACKsegment, with2flagbitsset:
SYNandACK.Thissegmenthasadualpurpose.ItisaSYNsegmentforcommu­
nication intheotherdirection andservesastheacknowledgment fortheSYN
segment.Itconsumes onesequence number."
7390,"ASYN+ACKsegmentcannotcarrydata,
butdoesconsume onesequence number."
7391,3.Theclientsendsthethirdsegment.
7392,"ThisisjustanACKsegment.Itacknowledges
thereceiptofthesecond segment withtheACKflagandacknowledgment number
field.Note that thesequence numberinthissegmentisthesameastheoneinthe
SYNsegment; theACKsegmentdoesnotconsume anysequence numbers."
7393,"AnACKsegment, ifcarrying nodata,consumes nosequence number.SECTION 23.3TCP 725
Simultaneous OpenAraresituation, calledasimultaneous open,mayoccurwhen
bothprocesses issueanactiveopen.Inthiscase,bothTCPstransmitaSYN+ACK
segmenttoeachother,andonesingleconnection isestablished betweenthem."
7394,"SYNFlooding Attack Theconnection establishment procedure inTCPissusceptible
toaserioussecurityproblemcalledtheSYNfloodingattack.Thishappenswhenamali­
ciousattackersendsalargenumberofSYNsegments toaserver,pretending thateach
ofthemiscorningfromadifferentclientbyfakingthesourceIPaddresses inthedata­
grams.Theserver,assuming thattheclientsareissuinganactiveopen,allocates the
necessary resources, suchascreatingcommunication tablesandsettingtimers.The
TCPserverthensendstheSYN+ACKsegments tothefakeclients,whicharelost.Dur­
ingthistime,however, alotofresources areoccupied withoutbeingused.If,duringthis
shorttime,thenumberofSYNsegments islarge,theservereventually runsoutof
resources andmaycrash.ThisSYNfloodingattackbelongstoatypeofsecurityattack
knownasadenial-of-service attack,inwhichanattackermonopolizes asystemwith
somanyservicerequeststhatthesystemcollapses anddeniesservicetoeveryrequest."
7395,"Someimplementations ofTCPhavestrategies toalleviate the effects ofaSYN
attack.Somehaveimposedalimitonconnection requestsduringaspecified periodof
time.Othersfilteroutdatagrams comingfromunwanted sourceaddresses."
7396,"Onerecent
strategyistopostpone resource allocation untiltheentireconnection issetup,using
whatiscalledacookie.SCTP,thenewtransport layerprotocolthatwediscussinthe
nextsection,usesthisstrategy."
7397,"DataTransfer
Afterconnection isestablished, bidirectional datatransfer cantakeplace.Theclient
andservercanbothsenddataandacknowledgments."
7398,"Wewillstudytherulesof
acknowledgment laterinthechapter;forthemoment, itisenoughtoknowthatdata
traveling inthesamedirection asanacknowledgment arecarriedonthesameseg­
ment.Theacknowledgment ispiggybacked withthedata.Figure23.19showsanexample."
7399,"Inthisexample, afterconnection isestablished (notshowninthefigure),theclient
sends2000bytesofdataintwosegments."
7400,"Theserverthensends2000bytesinoneseg­
ment.Theclientsendsonemoresegment."
7401,"Thefirstthreesegments carrybothdataand
acknowledgment, butthelastsegmentcarriesonlyanacknowledgment becausethere
arenomoredatatobesent.Notethevaluesofthesequence andacknowledgment
numbers."
7402,"Thedatasegments sentbytheclienthavethePSH(push)flagsetsothatthe
serverTCPknowstodeliverdatatotheserverprocessassoonastheyarereceived."
7403,"Wediscusstheuseofthisflagingreaterdetaillater.Thesegmentfromtheserver,on
theotherhand,doesnotsetthepushflag.MostTCPimplementations havetheoption
tosetornotsetthisflag."
7404,"PushingDataWesawthatthesendingTCPusesabuffertostorethestreamofdata
comingfromthesendingapplication program."
7405,"ThesendingTCPcanselectthesegment
size.Thereceiving TCPalsobuffersthedatawhentheyarriveanddeliversthemtothe
application programwhentheapplication programisreadyorwhenitisconvenient for
thereceiving TCP.Thistypeofflexibility increases theefficiency ofTCP."
7406,"However, onoccasion theapplication programhasnoneedforthisflexibility_ For
example, consideranapplication programthatcommunicates interactively withanother726CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
Figure23.19Datatransfer
Server
Client
A:ACKflag
P:PSHflag--
Data
bytes:8001-9000
Time Time
application program on theotherend.Theapplication program on onesitewantsto
sendakeystroke totheapplication attheothersiteandreceiveanimmediate response."
7407,"Delayedtransmission anddelayeddeliveryofdatamaynotbeacceptable bytheapplica­
tionprogram."
7408,TCPcanhandlesuchasituation.
7409,"Theapplication program atthesendingsitecan
requestapushoperation."
7410,"ThismeansthatthesendingTCPmustnotwaitforthewindow
tobefilled.Itmustcreateasegment andsenditimmediately."
7411,"ThesendingTCPmust
alsosetthepushbit(PSH)toletthereceiving TCPknowthatthesegmentincludesdata
thatmustbedelivered tothereceiving application program assoonaspossibleandnot
towaitformoredatatocome."
7412,"Although thepushoperation canberequested bytheapplication program, most
currentimplementations ignoresuchrequests."
7413,"TCPcanchoosewhetherornottouse
thisfeature."
7414,UrgentDataTCPisastream-oriented protocol.
7415,"Thismeansthatthedataarepresented
fromtheapplication programtoTCPasastreamofbytes.Eachbyteofdatahasaposi­
tioninthestream.However, onoccasion anapplication program needstosendurgent
bytes.Thismeansthatthesendingapplication programwantsapieceofdatatoberead
outoforderbythereceiving application program."
7416,"Asanexample, supposethatthesendingSECTION 23.3TCP727
application program issendingdatatobeprocessed bythereceiving application
program."
7417,"Whentheresultofprocessing comesback,thesending application program
findsthateverything iswrong.Itwantstoaborttheprocess,butithasalreadysentahuge
amountofdata.Ifitissuesanabortcommand (control+C),thesetwocharacters willbe
storedattheendofthereceiving TCPbuffer.Itwillbedelivered tothereceiving appli­
cationprogramafterallthedatahavebeenprocessed."
7418,"ThesolutionistosendasegmentwiththeURGbitset.Thesendingapplication
programtellsthesendingTCPthatthepieceofdataisurgent.ThesendingTCPcreates
asegmentandinsertstheurgentdataatthebeginning ofthesegment."
7419,"Therestofthe
segmentcancontainnormaldatafromthebuffer.Theurgentpointerfieldintheheader
definestheendoftheurgentdataandthestartofnormaldata."
7420,"Whenthereceiving TCPreceivesasegmentwiththeURGbitset,itextractsthe
urgentdatafromthesegment, usingthevalueoftheurgentpointer,anddeliversthem,
outoforder,tothereceiving application program."
7421,"Connection Termination
Anyofthetwopartiesinvolvedinexchanging data(clientorserver)canclosetheconnec­
tion,although itisusuallyinitiatedbytheclient.Mostimplementations todayallowtwo
optionsforconnection termination: three-way handshaking andfour-way handshaking
withahalf-close option."
7422,"Three-Way Handshaking Mostimplementations todayallowthree-way handshaking
forconnection termination asshowninFigure23.20."
7423,"1.Inanormalsituation, theclientTCP,after receiving aclosecommand fromthe
clientprocess,sendsthefirstsegment, aFINsegmentinwhichtheFINflagisset."
7424,"NotethataFINsegmentcanincludethelastchunkofdatasentbytheclient,orit
Figure23.20Connection termination usingthree-way handshaking
Client
r_...."
7425,"Active
close
TimeA:ACKflag
F:FINflag
ACKServer.-
l:i.:Li::iJ~-
Passive
close
Time728CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
canbejustacontrolsegmentasshowninFigure23.20.Ifitisonlyacontrolseg­
ment,itconsumes onlyonesequence number."
7426,TheFINsegmentconsumes onesequence numberifitdoesnotcarrydata.
7427,"2.TheserverTCP,afterreceiving theFINsegment, informsitsprocessofthesitua­
tionandsendsthesecondsegment, aFIN+ACKsegment, toconfirmthereceipt
oftheFINsegmentfromtheclientandatthesametimetoannounce theclosingof
theconnection intheotherdirection."
7428,"Thissegmentcanalsocontainthelastchunk
ofdatafromtheserver.Ifitdoesnotcarrydata,itconsumes onlyonesequence
number."
7429,"TheFIN+ACKsegmentconsumes onesequence
numberifitdoesnotcarrydata."
7430,"3.TheclientTCPsendsthelastsegment, anACKsegment, toconfirmthereceiptof
theFINsegmentfromtheTCPserver.Thissegmentcontainstheacknowledgment
number,whichis1plusthesequence numberreceived intheFINsegmentfrom
theserver.Thissegmentcannotcarrydataandconsumes nosequence numbers."
7431,"Half-Close InTCP,oneendcanstopsendingdatawhilestillreceiving data.Thisis
calledahalf-close."
7432,"Although eitherendcanissueahalf-close, itisnormally initiatedby
theclient.Itcanoccurwhentheserverneedsallthedatabeforeprocessing canbegin.A
goodexampleissorting.Whentheclient sendsdatatotheservertobesorted,theserver
needstoreceiveallthedatabeforesortingcanstart.Thismeanstheclient,aftersending
allthedata,canclosetheconnection intheoutbound direction."
7433,"However, theinbound
direction mustremainopentoreceivethesorteddata.Theserver,afterreceiving the
data,stillneedstimeforsorting;itsoutbound direction mustremainopen."
7434,Figure23.21showsanexampleofahalf-close.
7435,"Theclienthalf-closes theconnection
bysendingaFINsegment.Theserveracceptsthehalf-close bysendingtheACKsegment."
7436,"Thedatatransferfromtheclienttotheserverstops.Theserver,however, canstillsend
data.Whentheserverhassentalltheprocessed data,itsendsaFINsegment, whichis
acknowledged byanACKfromtheclient."
7437,"Afterhalf-closing oftheconnection, datacantravelfromtheservertotheclient
andacknowledgments cantravelfromtheclienttotheserver.Theclientcannotsendany
moredatatotheserver.Notethesequence numbers wehaveused.Thesecondsegment
(ACK)consumes nosequence number.Although theclienthasreceivedsequence number
y-1andisexpecting y,theserversequence numberisstilly-1.Whentheconnection
finallycloses,thesequence numberofthelastACKsegment isstillx,becauseno
sequence numbers areconsumed duringdatatransferinthatdirection."
7438,"FlowControl
TCPusesaslidingwindow, asdiscussed inChapter11,tohandleflowcontrol.The
slidingwindowprotocolusedbyTCP,however, issomething between theGo-Back-N
andSelective Repeatslidingwindow."
7439,"Theslidingwindowprotocol inTCPlookslikeSECTION 23.3TCP 729
Figure23.21Half-close
Server
Client
r--
Active
close
TimeA:ACKfiag
F:FINflag
fservertoclient...Datasegments rom
ACknoWledgmentsfromclienttoserver."
7440,"ACKPassive
close
Time
theGo-Back-N protocol becauseitdoesnotuseNAKs;itlookslikeSelective Repeat
becausethereceiverholds theout-of-order segments untilthemissingonesarrive.There
aretwobigdifferences between thisslidingwindowandtheoneweusedatthedata
linklayer.First,theslidingwindowofTCPisbyte-oriented; theonewediscussed inthe
datalinklayerisframe-oriented."
7441,"Second,theTCP'sslidingwindowisofvariablesize;
theonewediscussed inthedatalinklayerwasoffixedsize."
7442,"Figure23.22showstheslidingwindowinTCP.Thewindowspansaportionofthe
buffercontaining bytesreceived fromtheprocess.Thebytesinsidethewindowarethe
bytesthatcanbeintransit;theycanbesentwithoutworrying aboutacknowledgment."
7443,Theimaginary windowhastwowalls:oneleftandoneright.
7444,"Thewindowisopened,closed,orshrunk.Thesethreeactivities, aswewillsee,are
inthecontrolofthe receiver (anddependoncongestion inthenetwork), notthesender."
7445,Thesendermustobeythecommands ofthereceiverinthismatter.
7446,"Opening awindowmeansmovingtherightwalltotheright.Thisallowsmorenew
bytesinthebufferthatareeligibleforsending.Closingthewindowmeansmovingthe
leftwalltotheright.Thismeansthatsomebyteshavebeenacknowledged andthesender730 CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCP,ANDSCTP
Figure23.22Slidingwindow
IWindowsize=minimum (rwnd,cwnd)
p g ClosgShrinking
I•••In-InIn+ll..."
7447,"1m-IImm+ll...I
Slidingwindow
in oenin
neednotworryaboutthemanymore."
7448,"Sluinking thewindowmeansmovingtherightwall
totheleft.Thisisstrongly discouraged andnotallowedinsomeimplementations
becauseitmeansrevoking theeligibility ofsomebytesforsending.Thisisaproblemif
thesenderhasalreadysentthesebytes.Notethattheleftwallcannotmovetotheleft
becausethiswouldrevokesomeofthepreviously sentacknowledgments."
7449,"Aslidingwindowisusedtomaketransmission moreefficientasweDas
tocontroltheflowofdatasothatthedestination doesnotbecome
overwhelmed withdata.TCPslidingwindows arebyte-oriented."
7450,"Thesizeofthewindowatoneendisdetermined bythelesseroftwovalues:receiver
window(rwnd)orcongestion window(cwnd).Thereceiverwindowisthevalueadver­
tisedbytheopposite endinasegmentcontaining acknowledgment."
7451,"Itisthenumberof
bytestheotherendcanacceptbeforeitsbufferoverflows anddataarediscarded."
7452,"The
congestion windowisavaluedetermined bythenetworktoavoidcongestion."
7453,"Wewill
discusscongestion laterinthechapter."
7454,"Example 23.4
Whatisthevalueofthereceiverwindow (rwnd)forhostAifthereceiver, hostB,hasabuffer
sizeof5000bytesand1000bytesofreceived andunprocessed data?"
7455,"Solution
Thevalueofrwnd=5000-1000=4000.HostBcanreceiveonly4000bytesofdatabefore
overflowing itsbuffer.HostBadvertises thisvalueinitsnextsegmenttoA."
7456,"Example 23.5
WhatisthesizeofthewindowforhostAifthevalueofrwndis3000bytesandthevalueofcwnd
is3500bytes?"
7457,"Solution
Thesizeofthewindowisthesmallerofrwndandcwnd,whichis3000bytes."
7458,"Example 23.6
Figure23.23showsanunrealistic exampleofaslidingwindow."
7459,"Thesenderhassentbytesupto
202.Weassumethatcwndis20(inrealitythisvalueisthousands ofbytes).ThereceiverhassentSECTION 23.3TCP 731
Figure23.23 Example 23.6
Windowsize=minimum (20,9 )=9
Sent,not
acknowledged ICanbesentinunediately
~~,."
7460,"~.~~""~c""':c-c:: ""
1•••11992001201120212031204120520612071208 2091•••1
~'= ·YT""""""
Sentand
acknowledged•NextbytetobesentCan'tbe
sentuntilwindow
opens
anacknowledgment numberof200withanrwndof9bytes(inrealitythisvalueisthousands of
bytes).Thesizeofthesenderwindowistheminimum ofrwndandcwnd,or9bytes.Bytes200to
202aresent,butnotacknowledged."
7461,"Bytes203to208canbesentwithout worrying about
acknowledgment."
7462,Bytes209andabovecannotbesent.
7463,"SomepointsaboutTCPslidingwindows:
oThesizeofthewindowisthelesserofrwndandcwnd.oThesourcedoesnothavetosendafullwindow's worthofdata.oThewindowcanbeopenedorclosedbythereceiver,butshouldnotbeshrunk."
7464,"oThedestination cansendanacknowledgment atanytimeaslongasitdoesnotresultin
ashrinking window."
7465,"oThereceivercantemporarily shutdownthewindow; thesender,however, canalways
sendasegmentof1byteafterthewindowisshutdown."
7466,"ErrorControl
TCPisareliabletransport layerprotocol."
7467,"Thismeansthatanapplication program that
deliversastreamofdatatoTCPreliesonTCPtodelivertheentirestreamtotheappli­
cationprogram ontheotherendinorder,withouterror,andwithoutanypartlostor
duplicated."
7468,"TCPprovidesreliability usingerrorcontrol.Errorcontrolincludesmechanisms for
detecting corrupted segments, lostsegments, out-of-order segments, andduplicated
segments."
7469,"Errorcontrolalsoincludesamechanism forcorrecting errorsaftertheyare
detected."
7470,"Errordetection andcorrection inTCPisachieved throughtheuseofthree
simpletools:checksum, acknowledgment, andtime-out."
7471,"Checksum
Eachsegmentincludesachecksum fieldwhichisusedtocheckforacorrupted segment."
7472,"Ifthesegmentiscorrupted, itisdiscarded bythedestination TCPandisconsidered
aslost.TCPusesa16-bitchecksum thatismandatory ineverysegment."
7473,"Wewillsee,in
Chapter24,thatthe16-bitchecksum isconsidered inadequate forthenewtransport732 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
layer,SCTP.However, itcannotbechangedforTCPbecausethiswouldinvolverecon­
figuration oftheentireheaderformat."
7474,"Acknowledgment
TCPusesacknowledgments toconfirmthereceiptofdatasegments."
7475,"Controlsegments
thatcarrynodatabutconsume asequence numberarealsoacknowledged."
7476,"ACKsegments
areneveracknowledged."
7477,ACKsegments donotconsume sequence numbers andarenotacknowledged.
7478,"Retransmission
Theheartoftheerrorcontrolmechanism istheretransmission ofsegments."
7479,"Whena
segmentiscorrupted, lost,ordelayed,itisretransmitted."
7480,"Inmodernimplementations, a
segment isretransmitted ontwooccasions: whenaretransmission timerexpiresor
whenthesenderreceivesthreeduplicate ACKs.
Inmodernimplementations, aretransmission occursiftheretransmission
timerexpiresorthreeduplicate ACKsegments havearrived."
7481,"Notethatnoretransmission occursforsegments thatdonotconsume sequence
numbers."
7482,"Inparticular, thereisnotransmission foranACKsegment."
7483,Noretransmission timerissetforanACKsegment.
7484,"Retransmission AfterRTOArecentimplementation ofTCPmaintains oneretrans­
missiontime-out (RTO)timerforalloutstanding (sent,butnotacknowledged) seg­
ments.Whenthetimermatures, theearliestoutstanding segmentisretransmitted even
thoughlackofareceivedACKcanbeduetoadelayedsegment, adelayedACK,oralost
acknowledgment."
7485,"Notethatnotime-out timerissetforasegmentthatcarriesonlyan
acknowledgment, whichmeansthatnosuchsegment isresent.ThevalueofRTOis
dynamic inTCPandisupdatedbasedontheround-trip time(RTT)ofsegments."
7486,"An
RTIisthetimeneededforasegmenttoreachadestination andforanacknowledgment
tobereceived.Itusesaback-offstrategysimilartoonediscussed inChapter12."
7487,"Retransmission AfterThreeDuplicate ACKSegments Theprevious ruleabout
retransmission ofasegmentissufficient ifthevalueofRTOisnotverylarge.Sometimes,
however, onesegmentislostandthereceiverreceivessomanyout-of-order segments
thattheycannotbesaved(limitedbuffersize).Toalleviate thissituation, mostimple­
mentations todayfollowthethree-duplicate-ACKs ruleandretransmit themissing
segmentimmediately."
7488,"Thisfeatureisreferredtoasfastretransmission, whichwewill
seeinanexampleshortly."
7489,"Out-oj-Order Segments
Whenasegmentisdelayed,lost,ordiscarded, thesegments following thatsegmentarrive
outoforder.Originally, TCPwasdesigned todiscardallout-of-order segments, resultingSECTION 23.3TCP 733
intheretransmission ofthemissingsegmentandthefollowing segments."
7490,"Mostimple­
mentations todaydonotdiscardtheout-of-order segments."
7491,"Theystorethemtemporarily
andflagthemasout-of-order segments untilthemissingsegmentarrives.Note,however,
thattheout-of-order segments arenotdelivered totheprocess.TCPguarantees thatdata
aredelivered totheprocessinorder."
7492,"Datamayarriveoutoforderandbetemporarily storedbythereceiving TCP,
butyepguarantees thatnoout-of-order segmentisdelivered totheprocess."
7493,"SomeScenarios
Inthissectionwegivesomeexamples ofscenarios thatoccurduringtheoperation of
TCP.Inthesescenarios, weshowasegmentbyarectangle.Ifthesegmentcarriesdata,
weshowtherangeofbytenumbers andthevalueoftheacknowledgment field.Ifit
carriesonlyanacknowledgment, weshowonlytheacknowledgment numberina
smallerbox."
7494,"NormalOperation Thefirstscenarioshowsbidirectional datatransferbetweentwo
systems, asinFigure23.24.TheclientTCPsendsonesegment; theserverTCPsends
three.Thefigureshowswhichruleappliestoeachacknowledgment."
7495,"Therearedatato
besent,sothesegmentdisplaysthenextbyteexpected."
7496,"Whentheclientreceivesthe
firstsegmentfromtheserver,itdoesnothaveanymoredatatosend;itsends only an
Figure23.24Nonnaloperation
Server
Client_...."
7497,"Seq:1201-1400
Act:4001
TimeSeq:4001-5000
Ack:1401
Seq:5001--6000
Ack:1401
Seq:6001-7000
Ack:1401
Time734 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
ACKsegment."
7498,"However, theacknowledgment needstobedelayedfor500mstoseeif
anymoresegments arrive.Whenthetimermatures, ittriggersanacknowledgment."
7499,"Thisissobecausetheclienthasnoknowledge ifothersegments arecoming; itcannot
delaytheacknowledgment forever.Whenthenextsegment arrives,anotheracknowl­
edgment timerisset.However, beforeitmatures, thethirdsegment arrives.Thearrival
ofthethirdsegment triggersanotheracknowledgment."
7500,"LostSegment Inthisscenario, weshowwhathappens whenasegment islostorcor­
rupted.Alostsegment andacorrupted segment aretreatedthesamewaybythe
receiver."
7501,"Alostsegment isdiscarded somewhere inthenetwork; acorrupted segment is
discarded bythereceiver itself.Bothareconsidered lost.Figure23.25showsasitua­
tioninwhichasegment islostanddiscarded bysomerouterinthenetwork, perhaps
duetocongestion."
7502,"Figure23.25Lostsegment
Receiver
buffer
OutoforderGap
~
IIIIIReceiver
1""""""
Seq:801-900
Ack:xSeq:70l-800
Ack:xSeq:501-600
:=::;=A:=c:.=k::::x:::::=!-.----------1-- ----1L..O.l..--_-----1
Seq:601-700
Ack:'x Ack:701 ---- -1'-.1-1-,-I_-----1--Sender
1""""""
RTO
Time Time
Weareassuming thatdatatransferisunidirectional: onesiteissending, theotheris
receiving."
7503,"Inourscenario, thesendersendssegments 1and2,whichareacknowledged
immediately byanACK.Segment 3,however, islost.Thereceiverreceives segment 4,
whichisoutoforder.Thereceiver storesthedatainthesegmentinitsbufferbutleaves
agaptoindicatethatthereisnocontinuity inthedata.Thereceiver immediately sends
anacknowledgment tothesender,displaying thenextbyteitexpects."
7504,"Notethatthe
receiver storesbytes801to900,butneverdeliversthesebytestotheapplication until
thegapisfilled."
7505,"ThereceiverTCPdeliversonlyordereddatatotheprocess.SECTION 23.3TCP 735
Wehaveshownthetimerfortheearliestoutstanding segment."
7506,"Thetimerforthis
definitely runsoutbecausethereceivernever sends anacknowledgment forlostorout­
of-ordersegments."
7507,"Whenthetimermatures,thesendingTCPresendssegment3,which
arrivesthistimeandisacknowledged properly."
7508,"Notethatthevalueinthesecondand
thirdacknowledgments differsaccording tothecorresponding rule."
7509,"FastRetransmission Inthisscenario, wewanttoshowtheideaoffastretransmis­
sion.OurscenarioisthesameasthesecondexceptthattheRTOhasahighervalue(see
Figure23.26)."
7510,"Figure23.26 Fastretransmission
Sender
r
Seq:101-200
Ack:x
Seq:201~3oo
Ack:x
Seq:301-400
Ack:x
Seq:401-500
Ack:x
Seq:501-600
Ack:x
3ACKs--
TimeLostReceiver
r
Receiver
buffer
IIII
Allinorder
Time
Whenthereceiverreceives thefourth,fifth,andsixthsegments, ittriggersan
acknowledgment."
7511,"Thesenderreceivesfouracknowledgments withthesamevalue(three
duplicates)."
7512,"Although thetimerforsegment3hasnotmaturedyet,thefasttransmission
requiresthatsegment3,thesegmentthatisexpected byalltheseacknowledgments, be
resentimmediately."
7513,"Notethatonlyonesegment isretransmitted although foursegments arenot
acknowledged."
7514,"Whenthesenderreceivestheretransmitted ACK,itknowsthatthefour
segments aresafeandsoundbecauseacknowledgment iscumulative."
7515,"Congestion Control
Wediscusscongestion controlofTCPinChapter24.736 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
23.4SCTP
StreamControlTransmission Protocol (SCTP)isanewreliable, message-oriented
transport layerprotocol."
7516,"SCTP,however, ismostlydesigned forInternetapplications
thathaverecentlybeenintroduced."
7517,"Thesenewapplications, suchasIUA(ISDNover
IP),M2UAandM3UA(telephony signaling), H.248(mediagatewaycontrol), H.323
(IPtelephony), andSIP(IPtelephony), needamoresophisticated servicethanTCPcan
provide.SCTPprovides thisenhanced performance andreliability."
7518,"Webrieflycompare
UDP,TCP,andSCTP:
oUDPisamessage-oriented protocol."
7519,"AprocessdeliversamessagetoUDP,which
isencapsulated inauserdatagram andsentoverthenetwork."
7520,"UDPconserves the
message boundaries; eachmessage isindependent ofanyothermessage."
7521,"Thisisa
desirable featurewhenwearedealingwithapplications suchasIPtelephony and
transmission ofreal-time data,aswewillseelaterinthetext.However, UDPis
unreliable; thesendercannotknowthedestinyofmessages sent.Amessagecanbe
lost,duplicated, orreceivedoutoforder.UDPalsolackssomeotherfeatures, such
ascongestion controlandflowcontrol,neededforafriendlytransport layerprotocol."
7522,"oTCPisabyte-oriented protocol.Itreceives amessage ormessages fromapro­
cess,storesthemasastreamofbytes,andsendstheminsegments."
7523,"Thereisno
preservation ofthemessage boundaries."
7524,"However, TCPisareliableprotocol."
7525,"Theduplicate segments aredetected, thelostsegments areresent,andthebytes
aredelivered totheendprocessinorder.TCPalsohascongestion controland
flowcontrolmechanisms."
7526,"oSCTPcombines thebestfeaturesofUDPandTCP.SCTPisareliablemessage­
orientedprotocol."
7527,"Itpreserves themessageboundaries andatthesametimedetects
lostdata,duplicate data,andout-of-order data.Italsohascongestion controland
flowcontrolmechanisms."
7528,"LaterwewillseethatSCTPhasotherinnovative features
unavailable inUDPandTCP."
7529,"SCTPisamessage-oriented, reliableprotocolthat
combines thebestfeaturesofUDPandTCP."
7530,"SCTPServices
Beforewediscusstheoperation ofSCTP,letusexplaintheservicesofferedbySCTPto
theapplication layerprocesses."
7531,"Process-to-Process Communication
SCTPusesallwell-known portsintheTCPspace.Table23.4listssomeextraport
numbers usedbySCTP."
7532,"Multiple Streams
Welearnedintheprevious sectionthatTCPisastream-oriented protocol."
7533,"Eachcon­
nectionbetweenaTCPclientandaTCPserverinvolvesonesinglestream.TheproblemSECTION 23.4SCTP 737
Table23.4SomeSCTPapplications
Protocol PortNumber Description
IVA 9990 ISDNoverIP
M2UA 2904 SS7telephony signaling
M3UA 2905 SS7telephony signaling
H.248 2945 Mediagatewaycontrol
H.323 1718,1719, 1720,11720 IPtelephony
SIP 5060 IPtelephony
withthisapproach isthatalossatanypointinthestreamblocksthedeliveryoftherest
ofthedata.Thiscanbeacceptable whenwearetransferring text;itisnotwhenweare
sendingreal-time datasuchasaudioorvideo.SCTPallowsmultistream servicein
eachconnection, whichiscalledassociation inSCTPterminology."
7534,"Ifoneofthestreams
isblocked, theotherstreamscanstilldelivertheirdata.Theideaissimilartomultiple
lanesonahighway."
7535,"Eachlanecanbeusedforadifferent typeoftraffic.Forexample,
onelanecanbeusedforregulartraffic,anotherforcarpools.Ifthetrafficisblockedfor
regularvehicles, carpoolvehiclescanstillreachtheirdestinations."
7536,"Figure23.27shows
theideaofmultiple-stream delivery."
7537,"Figure23.27Multiple-stream concept
Receiving
processSending
processD D
• ~."
7538,"""')""""
•·•
..\
SCTP•SCTP
Anassociation inSCTPcaninvolvemultiple streams."
7539,"Multihoming
ATCPconnection involvesonesourceandonedestination IPaddress.Thismeansthat
evenifthesenderorreceiverisamultihomed host(connected tomorethanonephysi­
caladdresswithmultiple IPaddresses), onlyoneoftheseIPaddresses perendcanbe
utilizedduringtheconnection."
7540,"AnSCTPassociation, ontheotherhand,supports
multihoming service.Thesendingandreceiving hostcandefinemultipleIPaddresses
ineachendforanassociation."
7541,"Inthisfault-tolerant approach, whenonepathfails,
anotherinterface canbeusedfordatadeliverywithoutinterruption."
7542,"Thisfault-tolerant738 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDP,TCP,ANDseTP
featureisveryhelpfulwhenwearesendingandreceiving areal-time payloadsuchas
Internettelephony."
7543,Figure23.28showstheideaofmultihoming.
7544,"Figure23.28Multihoming concept
Client
r
InternetServer­.-."
7545,"InFigure23.28,theclientisconnected totwolocalnetworks withtwoIPaddresses."
7546,Theserverisalsoconnected totwonetworks withtwoIPaddresses.
7547,"Theclientandthe
servercanmakeanassociation, using four different pairsofIPaddresses."
7548,"However, note
thatinthecurrentimplementations ofSCTP,onlyonepairofIFaddresses canbechosen
fornormalcommunication; thealternative isusedifthemainchoicefails.Inother
words,atpresent,SCTPdoesnotallowloadsharingbetweendifferent paths."
7549,SCTPassociation allowsmultipleIPaddresses foreachend.
7550,"Full-Duplex Communication
LikeTCP,SCTPoffersfull-duplex service,inwhichdatacanflowinbothdirections at
thesametime.EachSCTPthenhasasendingandreceiving buffer,andpacketsaresent
inbothdirections."
7551,"Connection-Oriented Service
LikeTCP,SCTPisaconnection-oriented protocol."
7552,"However, inSCTP,aconnection is
calledanassociation."
7553,"WhenaprocessatsiteAwantstosendandreceivedatafrom
anotherprocessatsiteB,thefollowing occurs:
1.ThetwoSCTPsestablish anassociation between eachother."
7554,2.Dataareexchanged inbothdirections.
7555,3.Theassociation isterminated.
7556,"Reliable Service
SCTP,likeTCP,isareliabletransport protocol."
7557,"Itusesanacknowledgment mechanism
tocheckthesafeandsoundarrivalofdata.Wewilldiscussthisfeaturefurtherinthe
sectiononerrorcontrol."
7558,"SCTPFeatures
LetusfirstdiscussthegeneralfeaturesofSCTPandthencomparethemwiththoseofTCP.SECTION 23.4SCTP 739
Transmission Sequence Number
TheunitofdatainTCPisabyte.DatatransferinTCPiscontrolled bynumbering bytes
byusingasequence number.Ontheotherhand,theunitofdatainSCTPisaDATAchunk
whichmayormaynothaveaone-to-one relationship withthemessagecomingfromthe
processbecauseoffragmentation (discussed later),DatatransferinSCTPiscontrolled
bynumbering thedatachunks.SCTPusesatransmission sequence number (TSN)to
numberthedatachunks.Inotherwords,theTSNinSCTPplaystheanalogous roleto
thesequence numberinTCP.TSNsare32bitslongandrandomly initialized between0
and232-1.Eachdatachunkmustcarrythecorresponding TSNinitsheader."
7559,"InSCTP,adatachunkisnumbered usingaTSN."
7560,"StreamIdentifier
InTCP,thereisonlyonestreamineachconnection."
7561,"InSCTP,theremaybeseveral
streamsineachassociation."
7562,"EachstreaminSCTPneedstobeidentified byusinga
streamidentifier (SI).EachdatachunkmustcarrytheSIinitsheadersothatwhenit
arrivesatthedestination, itcanbeproperlyplacedinitsstream.The51isa16-bitnumber
startingfromO."
7563,"Todistinguish betweendifferent streams,SCTPusesanSI."
7564,"StreamSequence Number
Whenadatachunkarrivesatthedestination SCTP,itisdelivered totheappropriate
streamandintheproperorder.Thismeansthat,inadditiontoanSI,SCTPdefineseach
datachunkineachstreamwithastreamsequence number (SSN)."
7565,"Todistinguish betweendifferent datachunksbelonging
tothesamestream,SCTPusesSSNs.
Packets
InTCP,asegmentcarriesdataandcontrolinformation."
7566,"Dataarecarriedasacollection
ofbytes;controlinformation isdefinedbysixcontrolflagsintheheader.Thedesignof
SCTPistotallydifferent: dataarecarriedasdatachunks,controlinformation iscarried
ascontrolchunks.Severalcontrolchunksanddatachunkscanbepackedtogetherina
packet.ApacketinSCTPplaysthesameroleasasegmentinTCP.Figure23.29compares
asegmentinTCPandapacketinSCTP.Letusbriefly list thedifferences between an
SCTPpacketandaTCPsegment:
TCPhassegments; SCTPhaspackets."
7567,"1.Thecontrolinformation inTCPispartoftheheader;thecontrolinformation in
SCTPisincluded inthecontrolchunks.Thereareseveraltypesofcontrolchunks;
eachisusedforadifferent purpose.740CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Figure23.29Comparison betweenaTCPsegmentandanSCTPpacket
Checksum
]§o Controlchunks ;:
J;Sourceportaddress Destination portaddress ]"""":~
Verification tag ~
ro[.,
Cl
AsegmentinTCP ApacketinSCTP
2.ThedatainaTCPsegmenttreatedasoneentity;anSCTPpacketcancarryseveral
datachunks;eachcanbelongtoadifferent stream."
7568,"3.Theoptionssection,whichcanbepartofaTCPsegment, doesnotexistinan
SCTPpacket.OptionsinSCTParehandledbydefiningnewchunktypes."
7569,"4.Themandatory partoftheTCPheaderis20bytes,whilethegeneralheaderin
SCTPisonly12bytes.TheSCTPheaderisshorterduetothefollowing:
a.AnSCTPsequence number(TSN)belongstoeachdatachunkandhenceis
locatedinthechunk'sheader."
7570,b.Theacknowledgment numberandwindowsizearepartofeachcontrolchunk.
7571,"c.Thereisnoneedforaheaderlengthfield(shownasHLintheTCPsegment)
becausetherearenooptionstomakethelengthoftheheadervariable; the
SCTPheaderlengthisfixed(12bytes)."
7572,d.ThereisnoneedforanurgentpointerinSCTP.
7573,"5.Thechecksum inTCPis16bits;inSCTP,itis32bits."
7574,"6.Theverification taginSCTPisanassociation identifier, whichdoesnotexistin
TCP.InTCP,thecombination ofIPandportaddresses definesaconnection; in
SCTPwemayhavemultihorning usingdifferentIPaddresses."
7575,"Auniqueverification
tagisneededtodefineeachassociation."
7576,"7.TCPincludesonesequence numberintheheader,whichdefinesthenumberofthe
firstbyteinthedatasection.AnSCTPpacketcanincludeseveraldifferent data
chunks.TSNs,SIs,andSSNsdefineeachdatachunk."
7577,"8.Somesegments inTCPthatcarrycontrolinformation (suchasSYNandFIN)need
toconsume onesequence number;controlchunksinSCTPneveruseaTSN,SI,or
SSN.Thesethreeidentifiers belongonlytodatachunks,nottothewholepacket."
7578,"InSCTP,controlinformation anddatainformation arecarriedinseparate chunks."
7579,"InSCTP,wehavedatachunks,streams,andpackets.Anassociation maysendmany
packets, apacketmaycontainseveralchunks,andchunksmaybelongtodifferent
streams."
7580,"Tomakethedefinitions ofthesetermsclear,letussupposethatprocessA
needstosend11messages toprocessBinthreestreams.Thefirstfourmessages areinSECTION 23.4SCTP 741
thefirststream,thesecondthreemessages areinthesecondstream,andthelastfour
messages areinthethirdstream."
7581,"Although amessage, iflong,canbecarriedbyseveraldatachunks,weassumethat
eachmessagefitsintoonedatachunk.Therefore, wehave11datachunksinthreestreams."
7582,"Theapplication processdelivers11messages toSCTP,whereeachmessage isear­
markedfortheappropriate stream.Although theprocesscoulddeliveronemessagefrom
thefirststreamandthenanotherfromthesecond,weassumethatitdeliversallmessages
belonging tothefirststreamfirst,allmessages belonging tothesecondstreamnext,and
finally,allmessages belonging tothelaststream."
7583,"Wealsoassumethatthenetworkallowsonlythreedatachunksperpacket,which
meansthatweneed.fourpacketsasshowninFigure23.30.Datachunksinstream0are
carriedinthefirstpacketandpartofthesecondpacket;thoseinstream1arecarriedin
thesecondandthirdpackets;thoseinstream2arecarriedinthethirdandfourthpackets."
7584,"Figure23.30 Packet,datachunks,andstreams
Firstpacket
Controlchunks
TSN:101
SI:O SSN:0
TSN:102
SI:OSSN:1
TSN:103
'-SI:0SSN:2Secondpacket
~~~~r:~;{?~i
Controlchunks
T5N:104
SI:O SSN:3
TSN:105
SI:1SSN:0
TSN:106
'-SI:1SSN:1Thirdpacket
~~f~j~~~t\~r~~f£~
Controlchunks
TSN:107
SI:1SSN:2
::rSN:108
SI:2SSN:0
TSN:109
SI:2SSN:1Fourthpacket
Controlchunks
TSN:llO
SI:2 SSN:2
TSN:III
51:2SSN:3
Flowofpacketsfromsendertoreceiver
Notethateachdatachunkneedsthreeidentifiers: TSN,SI,andSSN.TSNisa
cumulative numberandisused,aswewillseelater,forflowcontrolanderrorcontrol."
7585,SIdefinesthestreamtowhichthechunkbelongs.
7586,"SSNdefinesthechunk'sorderina
particular stream.Inourexample, SSNstartsfrom0foreachstream."
7587,"Datachunksareidentified bythreeitems:TSN,SI,andSSN."
7588,"TSNisacumulative numberidentifying theassociation;
SIdefinesthestream;SSNdefinesthechunkinastream."
7589,"Acknowledgment Number
TCPacknowledgment numbers arebyte-oriented andrefertothesequence numbers."
7590,SCTPacknowledgment numbers arechunk-oriented.
7591,"TheyrefertotheTSN.Asecond
difference betweenTCPandSCTPacknowledgments isthecontrolinformation."
7592,"Recall
thatthisinformation ispartofthesegment headerinTCP.Toacknowledge segments
thatcarryonlycontrolinformation, TCPusesasequence numberandacknowledgment
number(forexample, aSYNsegmentneedstobeacknowledged byanACKsegment)."
7593,"InSCTP,however, thecontrolinformation iscarriedbycontrolchunks,whichdonot742 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
needaTSN.Thesecontrolchunksareacknowledged byanothercontrolchunkofthe
appropriate type(someneednoacknowledgment)."
7594,"Forexample, anINITcontrolchunk
isacknowledged byanINITACKchunk.Thereisnoneedforasequence numberoran
acknowledgment number."
7595,"InSCTP,acknowledgment numbers areusedtoacknowledge onlydatachunks;
controlchunksareacknowledged byothercontrolchunksifnecessary."
7596,"FlowControl
LikeTCP,SCTPimplements flowcontroltoavoidoverwhelming thereceiver."
7597,"Wewill
discussSCTPflowcontrollaterinthechapter."
7598,"ErrorControl
LikeTCP,SCTPimplements errorcontroltoprovidereliability."
7599,"TSNnumbers and
acknowledgment numbers areusedforerrorcontrol.Wewilldiscusserrorcontrollater
inthechapter."
7600,"Congestion Control
LikeTCP,SCTPimplements congestion control todetermine howmanydatachunks
canbeinjectedintothenetwork."
7601,Wewilldiscusscongestion controlinChapter24.
7602,"PacketFormat
Inthissection,weshowtheformatofapacketanddifferent typesofchunks.Mostof
theinformation presented inthissectionwillbecomeclearlater;thissectioncanbe
skippedinthefirstreadingorusedonlyasareference."
7603,"AnSCTPpackethasamandatory
generalheaderandasetofblockscalledchunks.Therearetwotypesofchunks:control
chunksanddatachunks.Acontrolchunkcontrolsandmaintains the association; adata
chunkcarriesuserdata.Inapacket,thecontrolchunkscornebeforethedatachunks."
7604,Figure23.31showsthegeneralformatofanSCTPpacket.
7605,"Figure23.31SCTPpacketformat
Generalheader
(12bytes)
-,
Chunkt."
7606,";"", (variable:length)
···
Ch.UJ;!k:N
(variable'length)""
"" "".-SECTION 23.4SCTP 743
InanSCTPpacket,controlchunkscomebeforedatachunks."
7607,"GeneralHeader
Thegeneralheader(packetheader)definestheendpoints ofeachassociation towhich
thepacketbelongs, guarantees thatthepacketbelongstoaparticular association, and
preserves theintegrityofthecontentsofthepacketincluding theheaderitself.Thefonnat
ofthegeneralheaderisshowninFigure23.32."
7608,"Figure23.32Generalheader
SourceportaddressIDestination portaddress
16bits 16bits
Verification tag
32bits
Checksum
32bits
Therearefourfieldsinthegeneralheader:
oSourceportaddress."
7609,"Thisisa16-bitfieldthatdefinestheportnumberofthepro­
cesssendingthepacket."
7610,oDestination portaddress.
7611,"Thisisa16-bitfieldthatdefinestheportnumberofthe
processreceiving thepacket."
7612,oVerification tag.Thisisanumberthatmatches apackettoanassociation.
7613,"This
prevents apacketfromaprevious association frombeingmistaken asapacketin
thisassociation."
7614,"Itservesasanidentifier fortheassociation; itisrepeated inevery
packetduringtheassociation."
7615,"Thereisaseparateverification usedforeachdirection
intheassociation."
7616,oChecksum.
7617,This32-bitfieldcontains aCRC-32 checksum.
7618,"Notethatthesizeof
thechecksum isincreased from16(inUDP,TCP,andIP)to32bitstoallowthe
useoftheCRC-32 checksum."
7619,"Chunks
Controlinfonnation oruserdataarecarriedinchunks.Thedetailedfonnatofeachchunk
isbeyondthescopeofthisbook.See[For06]fordetails.Thefirstthreefieldsarecom­
montoallchunks;theinformation fielddepends onthetypeofchunk.Theimportant
pointtoremember isthatSCTPrequires theinformation sectiontobeamultiple of
4bytes;ifnot,paddingbytes(eightas)areaddedattheendofthesection.SeeTable23.5
foralistofchunksandtheirdescriptions."
7620,"AnSCTPAssociation
SCTP,likeTCP,isaconnection-oriented protocol."
7621,"However, aconnection inSCTPis
calledanassociation toemphasize multihoming.744 CHAPTER 23PROCESS-TO-PROCESS DEliVERY: UDp,TCp'ANDSCTP
Table23.5Chunks
Type Chunk Description
0 DATA Userdata
1 INIT Setsupanassociation
2INITACK Acknowledges INITchunk
3 SACK Selective acknowledgment
4 HEARTBEAT Probesthepeerforliveliness
5 HEARTBEAT ACK Acknowledges HEARTBEAT chunk
6 ABORT Abortsanassociation
7 SHUTDOWN Terminates anassociation
8 SHUTDOWN ACK Acknowledges SHUTDOWN chunk
9 ERROR Reportserrorswithoutshuttingdown
10 COOKIE ECHO Thirdpacketinassociation establishment
11 COOKIEACK Acknowledges COOKIE ECHOchunk
14 SHUTDOWN COMPLETE Thirdpacketinassociation termination
192 FORWARDTSN Foradjusting cumulative TSN
Aconnection inSCTPiscalledanassociation."
7622,"Association Establishment
Association establishment inSCTPrequires afour-way handshake."
7623,"Inthisproce­
dure,aprocess,normally aclient,wants to establish anassociation withanotherprocess,
normally aserver,usingSCTPasthetransport layerprotocol."
7624,"SimilartoTCP,the
SCTPserverneedstobeprepared toreceiveanyassociation (passive open).Associa­
tionestablishment, however, isinitiated bytheclient(activeopen).SCTPassociation
establishment isshowninFigure23.33.Thesteps,inanormalsituation, areasfollows:
1.Theclientsendsthefirstpacket,whichcontains anINITchunk."
7625,"2.Theserversendsthesecondpacket,whichcontains anINITACKchunk."
7626,"3.Theclientsendsthethirdpacket,whichincludes aCOOKIE ECHOchunk.This
isaverysimplechunkthatechoes,withoutchange,thecookiesentbytheserver."
7627,SCTPallowstheinclusion ofdatachunksinthispacket.
7628,"4.Theserversendsthefourthpacket,whichincludes theCOOKIE ACKchunkthat
acknowledges thereceiptoftheCOOKIE ECHOchunk.SCTPallowstheinclusion
ofdatachunkswiththispacket."
7629,Nootherchunkisallowedinapacketcarrying anINITorINITACKchunk.
7630,ACOOKIE ECHOoraCOOKIE ACKchunkcancarrydatachunks.
7631,"Cookie Wediscussed aSYNflooding attackintheprevious section.WithTCP,a
malicious attackercanfloodaTCPserverwithahugenumberofphonySYNsegments
usingdifferent forgedIPaddresses."
7632,"Eachtimetheserverreceives aSYNsegment, itSECTION 23.4SCTP 745
Figure23.33 Four-way handshaking
Client
r--
INIT
COOKIE ECHO
Cookie
TimeINITACK
Cookie
COOKIEACKServer
~
Time
setsupastatetableandallocates otherresources whilewaitingforthenextsegmentto
arrive.Afterawhile,however, theservermaycollapseduetotheexhaustion ofresources."
7633,"Thedesigners ofSCTPhaveastrategytopreventthistypeofattack.Thestrategy
istopostpone theallocation ofresources untilthereception ofthethirdpacket,when
theIPaddressofthesenderisverified.Theinformation receivedinthefirstpacketmust
somehow besaveduntilthethirdpacketarrives.Butiftheserversavedtheinformation,
thatwouldrequiretheallocation ofresources (memory); thisisthedilemma."
7634,"Thesolution
istopacktheinformation andsenditbacktotheclient.Thisiscalledgenerating a
cookie.Thecookieissentwiththesecondpackettotheaddressreceived inthefirst
packet.Therearetwopotential situations."
7635,"1.Ifthesenderofthefirstpacketisanattacker, theserverneverreceivesthethird
packet;thecookieislostandnoresources areallocated."
7636,"Theonlyeffortforthe
serveris""baking"" the cookie."
7637,"2.Ifthesenderofthefirstpacketisanhonestclientthatneedstomakeaconnection,
itreceivesthesecondpacket,withthecookie.Itsendsapacket(thirdintheseries)
withthecookie,withnochanges."
7638,"Theserverreceivesthethirdpacketandknows
thatithascomefromanhonestclientbecausethecookiethatthesenderhassentis
there.Theservercannowallocateresources."
7639,"Theabovestrategyworksifnoentitycan""eat""acookie""baked""bytheserver.Toguar­
anteethis,theservercreatesadigest(seeChapter30)fromtheinformation, usingits
ownsecretkey.Theinformation andthedigesttogethermakethe cookie, whichissent
totheclientinthesecondpacket.Whenthecookieisreturnedinthethirdpacket,the
servercalculates thedigestfromtheinformation."
7640,"Ifthedigestmatchestheonethatis
sent,thecookiehasnotbeenchangedbyanyotherentity."
7641,"DataTransfer
Thewholepurposeofanassociation istotransferdatabetween twoends.Afterthe
association isestablished, bidirectional datatransfercantakeplace.Theclientandthe
servercanbothsenddata.LikeTCP,SCTPsupportspiggybacking.746 CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
Thereisamajordifference, however, betweendatatransferinTCPandSCTP.TCP
receivesmessages fromaprocessasastreamofbyteswithoutrecognizing anyboundary
betweenthem.Theprocessmayinsertsomeboundaries foritspeeruse,butTCPtreats
thatmarkaspartofthetext.In otherwords,TCPtakeseachmessage andappendsitto
itsbuffer.Asegmentcancarrypartsoftwodifferent messages."
7642,"Theonlyordering sys­
temimposed byTCPisthebytenumbers."
7643,"SCTP,ontheotherhand,recognizes andmaintains boundaries."
7644,"Eachmessagecom­
ingfromtheprocessistreatedasoneunitandinsertedintoaDATAchunkunlessitis
fragmented (discussed later).Inthissense,SCTPislikeUDP,withonebigadvantage:
datachunksarerelatedtoeachother."
7645,"Amessage received fromaprocessbecomes aDATAchunk,orchunksiffrag­
mented,byaddingaDATAchunkheadertothemessage."
7646,"EachDATAchunkformedby
amessage orafragment ofamessage hasoneTSN.Weneedtoremember thatonly
DATAchunksuseTSNsandonlyDATAchunksareacknowledged bySACKchunks."
7647,"InSCTP,onlyDATAchunksconsume TSNs;
DATAchunksaretheonlychunksthatareacknowledged."
7648,"Letusshowasimplescenario inFigure23.34.Inthisfigureaclientsendsfour
DATAchunksandreceivestwoDATAchunksfromtheserver.Later,wewilldiscuss
Figure23.34Simpledatatransfer
Server
Clientiac:u:;:::;:J
E3==
~ITSN:7105IDATAchunk
I......"
7649,"TSN:7106r
DATAchunk
~1TSN:7107
1DATAchunk.....[ITSN:7108~
DATAchunk
~\\cumTSN: 7108
SACKchunk
tf---
TSN:121
DATAchunk
.....[TSN:122t~ ....- DATAchunk
r---cumTSN: 122I....."
7650,SACKchunk --..
7651,"Time TimeSECTION 23.4SCTP 747
theuseofflowanderrorcontrolinSCTP.Forthemoment, weassumethateverything
goeswellinthisscenario."
7652,"1.TheclientsendsthefirstpacketcarryingtwoDATAchunkswithTSNs7105and
7106."
7653,"2.TheclientsendsthesecondpacketcarryingtwoDATAchunkswithTSNs7107
and7108."
7654,"3.Thethirdpacketisfromtheserver.Itcontains theSACKchunkneededto
acknowledge thereceiptofDATAchunksfromtheclient.Contrary toTCP,
SCTPacknowledges thelastin-orderTSNreceived, notthenextexpected."
7655,"The
thirdpacketalsoincludesthefirstDATAchunkfromtheserverwithTSN121."
7656,"4.Afterawhile,theserversendsanotherpacketcarryingthelastDATAchunkwith
TSN122,butitdoesnotincludeaSACKchunkinthepacketbecausethelast
DATAchunkreceivedfromtheclientwasalreadyacknowledged."
7657,"5.Finally,theclientsendsapacketthatcontainsaSACKchunkacknowledging the
receiptofthelasttwoDATAchunksfromtheserver."
7658,"Theacknowledgment inSCTPdefinesthecumulative TSN,
theTSNofthelastdatachunkreceivedinorder."
7659,"Multihoming DataTransfer Wediscussed themultihoming capability ofSCTP,a
featurethatdistinguishes SCTP fromUDPandTCP.Multihoming allowsbothendsto
definemultipleIPaddresses forcommunication."
7660,"However, onlyoneoftheseaddresses
canbedefinedastheprimary address; therestarealternative addresses."
7661,"Theprimary
addressisdefinedduringassociation establishment."
7662,"Theinteresting pointisthatthepri­
maryaddressofanendisdetermined bytheotherend.Inotherwords,asourcedefines
theprimaryaddressforadestination."
7663,"Multistream Delivery Oneinteresting featureofSCTPisthedistinction between
datatransferanddatadelivery.SCTPusesTSNnumbers tohandledatatransfer,move­
mentofdatachunksbetweenthesourceanddestination."
7664,"Thedeliveryofthedatachunks
iscontrolled bySIsandSSNs.SCTPcansupportmultiplestreams,whichmeansthat
thesenderprocesscandefinedifferent streamsandamessage canbelongtooneof
thesestreams.Eachstreamisassigned astreamidentifier (SI)whichuniquely defines
thatstream."
7665,Fragmentation Another issueindatatransferisfragmentation.
7666,"Although SCTP
sharesthistermwithIP,fragmentation inIPandinSCTPbelongstodifferent levels:
theformeratthenetworklayer,thelatteratthetransport layer."
7667,"SCTPpreserves theboundaries ofthemessage fromprocesstoprocesswhen
creatingaDATAchunkfromamessage ifthesizeofthemessage (whenencapsu­
latedinanIPdatagram) doesnotexceedtheMTUofthepath.ThesizeofanIP
datagram carryingamessagecanbedetermined byaddingthesizeofthemessage, in
bytes,tothefouroverheads: datachunkheader,necessary SACKchunks,SCTPgen­
eralheader,andIPheader.IfthetotalsizeexceedstheMTU,themessageneedstobe
fragmented.748 CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
Association Termination
InSCTP,likeTCP,eitherofthetwopartiesinvolved inexchanging data(clientor
server)canclosetheconnection."
7668,"However, unlikeTCP,SCTPdoesnotallowahalf­
closesituation.Ifoneendclosestheassociation, theotherendmuststopsendingnew
data.Ifanydataareleftoverinthequeueoftherecipient ofthetermination request,
theyaresentandtheassociation isclosed.Association termination usesthreepackets,
asshowninFigure23.35.Note that although thefigureshowsthecaseinwhichtermi­
nationisinitiatedbytheclient,itcanalsobeinitiatedbytheserver.Notethattherecan
beseveralscenarios ofassociation termination."
7669,"Weleavethisdiscussion tothereferences
mentioned attheendofthechapter."
7670,"Figure23.35Association termination
Client
r--
SHUTDOWN
Active
close r------i~~_c;;__,..""""
SHUTDOWN
COMPLETE
Time
FlowControlSHUTDOWN ACKServer-=
c::;:::u)
~-
Passive
close
Time
FlowcontrolinSCTPissimilartothatinTCP.InTCP,weneedtodealwithonlyone
unitofdata,thebyte.InSCTP,weneedtohandletwounitsofdata,thebyteandthe
chunk.Thevaluesofrwndandcwndareexpressed inbytes;thevaluesofTSNand
acknowledgments areexpressed inchunks.Toshowtheconcept, wemakesomeunre­
alisticassumptions."
7671,"Weassumethatthereisnevercongestion inthenetwork andthat
thenetworkiserror-free."
7672,"Inotherwords,weassumethatcwndisinfiniteandnopacketis
lostordelayedorarrivesoutoforder.Wealsoassumethatdatatransferisunidirectional."
7673,Wecorrectourunrealistic assumptions inlatersections.
7674,"CurrentSCTPimplementa­
tionsstilluseabyte-oriented windowforflowcontrol.We,however, showthebufferin
termsofchunkstomaketheconcepteasiertounderstand."
7675,"Receiver Site
Thereceiverhasonebuffer(queue)andthreevariables."
7676,"Thequeueholdsthereceived
datachunksthathavenotyetbeenreadbytheprocess.Thefirstvariableholdsthelast
TSNreceived, cumTSN."
7677,"Thesecondvariableholdstheavailable buffersize,winsize.SECTION 23.4SCTP 749
Thethirdvariableholdsthelastaccumulative acknowledgment, lastACK."
7678,"Figure23.36
showsthequeueandvariables atthereceiversite."
7679,"Figure23.36Flowcontrol,receiversite
winSize
Received ---------l.~Toprocess
26
BBBB
Receiving queue
winSize
lastACK
1.Whenthesitereceivesadatachunk,itstoresitattheendofthebuffer(queue)and
subtracts thesizeofthechunkfromwinSize."
7680,"TheTSNnumberofthechunkis
storedinthecumTSN variable."
7681,"2.Whentheprocessreadsachunk,itremoves itfromthequeueandaddsthesizeof
theremoved chunktowinSize(recycling)."
7682,"3.WhenthereceiverdecidestosendaSACK,itchecksthevalueoflastAck;ifitis
lessthancumTSN, itsendsaSACKwithacumulative TSNnumberequaltothe
cumTSN."
7683,Italsoincludes thevalueofwinSizeastheadvertised windowsize.
7684,"SenderSite
Thesenderhasonebuffer(queue)andthreevariables: curTSN, rwnd,andinTransit,as
showninFigure23.37.Weassumeeachchunkis100byteslong."
7685,"Figure23.37Flowcontrol,sendersite
curTSN
rwnd
inTransitOutstanding chunks
BBB8BBBBB8BBBI~Tosend
Sendingqueue
'""'~::?~:/37,''
~::1dPO""
:t~1W'FromprocessL:
Thebufferholdsthechunksproduced bytheprocessthateitherhavebeensentorare
readytobesent.Thefirstvariable, curTSN,referstothenextchunktobesent.Allchunks
inthequeuewithaTSNlessthanthisvaluehavebeensent,butnotacknowledged; they
areoutstanding."
7686,"Thesecondvariable, rwnd,holdsthelastvalueadvertised bythereceiver
(inbytes).Thethirdvariable, inTransit, holdsthenumberofbytesintransit,bytessent
butnotyetacknowledged."
7687,"Thefollowing istheprocedure usedbythesender.750CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
1.AchunkpointedtobycurTSNcanbesentifthesizeofthedataislessthan or
equaltothequantityrwnd-inTransit."
7688,"Aftersendingthechunk,thevalueofcurTSN
isincremented by1andnowpointstothenextchunktobesent.Thevalueof
inTransit isincremented bythesizeofthedatainthetransmitted chunk."
7689,"2.WhenaSACKisreceived, thechunkswithaTSNlessthanorequaltothecumula­
tiveTSNintheSACKareremoved fromthequeueanddiscarded."
7690,"Thesenderdoes
nothavetoworryaboutthemanymore.ThevalueofinTransit isreducedbythe
totalsizeofthediscarded chunks.Thevalueofrwndisupdatedwiththevalueof
theadvertised windowintheSACK."
7691,"AScenario
LetusgiveasimplescenarioasshowninFigure23.38.Atthestartthevalueofrwndat
thesendersiteandthevalueofwinSizeatthereceiversiteare2000(advertised during
association establishment)."
7692,"Originally, therearefourmessages inthesenderqueue.The
sendersendsonedatachunkandaddsthenumberofbytes(1000)totheinTransit vari­
able.Afterawhile,thesenderchecksthedifference between therwndandinTransit,
whichis1000bytes,soitcansendanotherdatachunk.Nowthedifference betweenthe
twovariables is0andnomoredatachunkscanbesent.Afterawhile,aSACKarrives
thatacknowledges datachunks1and2.Thetwochunksareremoved fromthequeue."
7693,"ThevalueofinTransitisnowO.TheSACK,however, advertised areceiverwindowof
value0,whichmakesthesender.update rwndtoO.Nowthesenderisblocked; itcannot
sendanydatachunks(withoneexception explained later)."
7694,"Figure23.38Flowcontrolscenario
Sender
r
DATA
TSN:1Receiver
r
cumTSN~winSize 2000~
lastACK ~
1000bytesr-""--1
DATAcumTSN~winSize 1000
lastACK
I~curTSN
@]~~0 0~wnd_=== 0znTranslt
:esswrites
iand6TSN:2 1000bytesr-.-.---I
SACK
ACK:2 rwnd:°
SACK
l---....~L::A:..::.C::::K~: 2::....-__rw_n_d_:2_0_0_0........cumTSN~winSize 0
[astACK
cumTSN~ ~winSize 2000
[astACK 2
Process reads
1and2
Time TimeSECTION 23.4SCTP 751
Atthereceiversite,thequeueisemptyatthebeginning."
7695,"Afterthefirstdatachunk
isreceived, thereisonemessage inthequeueandthevalueofcumTSN is1.Thevalue
ofwinSizeisreducedto1000becausethefirstmessageoccupies 1000bytes.Afterthe
seconddatachunkisreceived, thevalueofwindowsizeisaandcumTSNis2.Now,as
wewillsee,thereceiverisrequiredtosendaSACKwithcumulative TSNof2.After
thefirstSACKwassent,theprocessreadsthetwomessages, whichmeansthatthereis
nowroominthequeue;thereceiveradvertises thesituation withaSACKtoallowthe
sendertosendmoredatachunks.Theremaining eventsarenotshowninthefigure."
7696,"ErrorControl
SCTP,likeTCP,isareliabletransport layerprotocol.ItusesaSACKchunktoreport
thestateofthereceiverbuffertothe sender."
7697,"Eachimplementation usesadifferent setof
entitiesandtimersforthereceiverandsendersites.Weuseaverysimpledesigntoconvey
theconcepttothereader."
7698,"Receiver Site
Inourdesign,thereceiverstoresallchunksthathavearrivedinitsqueueincluding the
out-of-order ones.However, itleavesspacesforanymissingchunks.Itdiscardsdupli­
catemessages, butkeepstrackofthemforreportstothesender.Figure23.39showsa
typicaldesignforthereceiversiteandthestateofthereceiving queueataparticular
pointintime."
7699,"Figure23.39Errorcontrol,receiversite
Duplicate···
OutOfOrdercumTSN
winSize
lastACK
Thelastacknowledgment sentwasfordatachunk20.Theavailable windowsizeis
1000bytes.Chunks21to23havebeenreceivedinorder.Thefirstout-of-order block
containschunks26to28.Thesecondout-of-order blockcontainschunks31to34.A
variableholdsthevalueofcumTSN."
7700,"Anarrayofvariables keepstrackofthebeginning
andtheendofeachblockthatisoutoforder.Anarrayofvariables holdstheduplicate
chunksreceived."
7701,"Notethatthereisnoneedforstoringduplicate chunksinthequeue;
theywillbediscarded."
7702,"ThefigurealsoshowstheSACKchunkthatwillbesentto752CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
reportthestateofthereceivertothesender.TheTSNnumbersforout-of-order chunks
arerelative(offsets)tothecumulative TSN."
7703,"SenderSite
Atthesendersite,ourdesigndemands twobuffers(queues): asendingqueueanda
retransmission queue.Wealsousethethreevariables rwnd,inTransit,andcurTSNas
described intheprevioussection.Figure23.40showsatypicaldesign."
7704,"Figure23.40Errorcontrol,sendersite
Fromprocess
L
BBBBBBOutstanding chunks
...BBB~Tosend
inTransitcurTSN
rwnd
Retransmission
queueAddwhentimer ~'~I
expiresorthree-----l ..~:4'~,1""~Tosend
SACKsarereceived."
7705,".,...-----====Sendingqueue
Thesendingqueueholdschunks23to40.Thechunks23to36havealreadybeen
sent,butnotacknowledged; theyareoutstanding chunks.ThecurTSNpointstothe
nextchunktobesent(37).Weassumethateachchunkis100bytes,whichmeansthat
1400bytesofdata(chunks23to36)isintransit.Thesenderatthismomenthasa
retransmission queue.Whenapacketissent,aretransmission timerstartsforthat
packet(alldatachunksinthatpacket).Someimplementations useonesingletimerfor
theentireassociation, butwecontinuewithourtraditionofonetimerforeachpacketfor
simplification."
7706,"Whentheretransmission timerforapacketexpires,orfourduplicate
SACKsarrivethatdeclareapacketasmissing(fastretransmission wasdiscussed in
Chapter12),thechunksinthatpacketaremovedtotheretransmission queuetobe
resent.Thesechunksareconsidered lost,ratherthanoutstanding."
7707,"Thechunksinthe
retransmission queuehavepriority.Inotherwords,thenexttimethesendersendsa
chunk,itwouldbechunk21fromtheretransmission queue."
7708,"SendingDataChunks
Anendcansendadatapacketwhenever therearedatachunksinthesendingqueue
withaTSNgreaterthanorequaltocurTSNoriftherearedatachunksintheretransmis­
sionqueue.Theretransmission queuehaspriority.However, thetotalsizeofthedata
chunkorchunksincludedinthepacketmustnotexceedrwnd-inTransit,andthetotal
sizeoftheframemustnotexceedtheMTUsizeaswediscussed inprevioussections.SECTION 23.5RECOMMENDED READING 753
Retransmission Tocontrolalostordiscarded chunk,SCTP,likeTCP,employs two
strategies: usingretransmission timersandreceiving fourSACKswiththesamemissing
chunks."
7709,"Generating SACKChunks
Anotherissueinerrorcontrolisthegeneration ofSACKchunks.Therulesforgenerating
SCTPSACKchunksaresimilartotherulesusedforacknowledgment withtheTCP
ACKflag."
7710,"Congestion Control
SCTP,likeTCP,isatransport layerprotocolwithpacketssubjecttocongestion inthenet­
work.TheSCTPdesigners haveusedthesamestrategies wewilldescribeforcongestion
controlinChapter24forTCP.SCTPhasslowstart(exponential increase), congestion
avoidance (additive increase), andcongestion detection (multiplicative decrease) phases."
7711,"LikeTCP,SCTPalsousesfastretransmission andfastrecovery."
7712,"23.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext."
7713,"Books
UDPisdiscussed inChapter 11of[For06],Chapter 11of[Ste94],andChapter12of
[ComOO]."
7714,"TCPisdiscussed inChapter12of[For06],Chapters 17to24of[Ste94],and
Chapter 13of[ComOO]."
7715,"SCTPisdiscussed inChapter13of[For06]and[SX02].Both
UDPandTCParediscussed inChapter6of[Tan03]."
7716,"Sites
owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Adiscussion ofUDPcanbefound in RFC768."
7717,"Adiscussion ofTCPcanbefoundinthefollowing RFCs:
675,700,721,761,793,879,896,1078,1106,1110,1144, 1145,1146,1263,1323,1337,
1379,1644,1693,1901,1905,2001,2018,2488,2580
Adiscussion ofSCTPcanbefoundinthefollowing RFCs:."
7718,"2960,3257,3284,3285,3286,3309,3436,3554,3708,3758754CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCp,ANDSCTP
23.6KEYTERMS
acknowledgment number
association
association establishment
association termination
byte-oriented
chunk
client
client/server paradigm
connection abortion
connection-oriented service
connectionless service
connectionless, unreliable transport
protocol
cookie
COOKIE ACKchunk
COOKIE ECHOchunk
cumulative TSN
DATAchunk
datatransfer
denial-of-service attack
dynamic port
ephemeral portnumber
errorcontrol
fastretransmission
flowcontrol
four-way handshaking
fragmentation
full-duplex service
generalheader
half-close
inboundstream
INITACKchunkINITchunk
initialsequence number(ISN)
message-oriented
multihoming service
multistream service
portnumber
primaryaddress
process-to-process delivery
pseudoheader
queue
registered port
retransmission time-out (RTO)
retransmission timer
round-trip time(RTT)
SACKchunk
segment
sequence number
server
simultaneous close
simultaneous open
socketaddress
streamidentifier (SI)
streamsequence number(SSN)
SYNfloodingattack
three-way handshaking
Transmission ControlProtocol (TCP)
transmission sequence number(TSN)
transport layer
userdatagram
UserDatagram Protocol (UDP)
verification tag
well-known portnumber
23.7SUMMARY
oIntheclient/server paradigm, anapplication program onthelocalhost,calledthe
client,needsservicesfromanapplication program ontheremotehost,'calleda
server.SECTION 23.7SUMMARY 755
oEach application program hasaportnumberthatdistinguishes itfromotherpro­
gramsrunningatthesametimeonthesamemachine."
7719,"oTheclientprogram isassigned arandomportnumbercalledanephemeral port
number; theserverprogram isassigned auniversal portnumbercalledawell­
knownportnumber."
7720,oTheICANNhasspecified rangesforthedifferent typesofportnumbers.
7721,"oThecombination oftheIPaddressandtheportnumber,calledthesocketaddress,
definesaprocessand ahost."
7722,"oUDPisaconnectionless, unreliable transport layerprotocol withnoembedded
floworerrorcontrolmechanism exceptthechecksum forerrordetection."
7723,oTheUDPpacketiscalledauserdatagram.
7724,"Auserdatagram isencapsulated inthe
datafieldofanIPdatagram."
7725,"oTransmission ControlProtocol (TCP)isoneofthetransport layerprotocols inthe
TCP/IPprotocolsuite."
7726,"oTCPprovides process-to-process, full-duplex, andconnection-oriented service."
7727,"oTheunitofdatatransferbetweentwodevicesusingTCPsoftwareiscalledasegment;
ithas20to60bytesofheader,followedbydatafromtheapplication program."
7728,"oATCPconnection normally consistsofthreephases:connection establishment,
datatransfer,andconnection termination."
7729,"oConnection establishment requiresthree-way handshaking; connection termination
requiresthree-orfour-way handshaking."
7730,"oTCPusesflowcontrol,implemented asaslidingwindowmechanism, toavoid
overwhelming areceiverwithdata."
7731,"oTheTCPwindowsizeisdetermined bythereceiver-advertised windowsize(rwnd)
orthecongestion windowsize(cwnd),whichever issmaller.Thewindowcanbe
openedorclosedbythereceiver, butshouldnotbeshrunk."
7732,"oThebytesofdatabeingtransferred ineachconnection arenumbered byTCP.The
numbering startswitharandomly generated number."
7733,"oTCPuseserrorcontroltoprovideareliableservice.Errorcontrolishandledbythe
checksum, acknowledgment, andtime-out."
7734,"Corrupted andlostsegments areretrans­
mitted,andduplicate segments arediscarded."
7735,"Datamayarriveoutoforderandare
temporarily storedbythereceiving TCP,butTCPguarantees thatnoout-of-order
segmentisdelivered totheprocess."
7736,"oInmodemimplementations, aretransmission occursiftheretransmission timer
expiresorthreeduplicate ACKsegments havearrived."
7737,"oSCTPisamessage-oriented, reliableprotocol thatcombines thegoodfeaturesof
UDPandTCP."
7738,"oSCTPprovides additional services notprovided byUDPorTep,suchasmultiple-
streamandmultihoming services."
7739,oSCTPisaconnection-oriented protocol.AnSCTPconnection iscalledanassociation.
7740,oSCTPusesthetermpackettodefineatransportation unit.
7741,"oInSCTP,controlinformation anddatainformation arecarriedinseparatechunks.756CHAPTER 23PROCESS-TO-PROCESS DELIVERY: UDp,TCP,ANDSCTP
oAnSCTPpacketcancontaincontrolchunksanddatachunkswithcontrolchunks
comingbeforedatachunks."
7742,"oInSCTP,eachdatachunkisnumbered usingatransmission sequence number(TSN)."
7743,"oTodistinguish betweendifferent streams,SCTPusesthesequence identifier (SI)."
7744,"oTodistinguish betweendifferent datachunksbelonging tothesamestream,SCTP
usesthestreamsequence number(SSN)."
7745,"oDatachunksareidentified bythreeidentifiers: TSN,SI,andSSN.TSNisacumula­
tivenumberrecognized bythewholeassociation; SSNstartsfrom0ineachstream."
7746,"oSCTPacknowledgment numbersareusedonlytoacknowledge datachunks;control
chunksareacknowledged, ifneeded,byanothercontrolchunk."
7747,"oAnSCTPassociation isnormally established usingfourpackets(four-way hand­
shaking)."
7748,"Anassociation isnormally terminated usingthreepackets(three-way
handshaking) ."
7749,"oAnSCTPassociation usesacookietopreventblindfloodingattacksandaverifica­
tiontagtoavoidinsertion attacks."
7750,"oSCTPprovides flowcontrol,errorcontrol,andcongestion control."
7751,"oTheSCTPacknowledgment SACKreportsthecumulative TSN,theTSNofthe
lastdatachunkreceivedinorder,andselective TSNsthathavebeenreceived."
7752,"23.8PRACTICE SET
ReviewQuestions
1.Incaseswherereliability isnotofprimaryimportance, UDPwouldmakeagood
transport protocol."
7753,Giveexamples ofspecificcases.
7754,2.ArebothUDPandIPunreliable tothesamedegree?Whyorwhynot?
7755,"3.Doportaddresses needtobeunique?Whyorwhynot?Whyareportaddresses
shorterthanIPaddresses?"
7756,4.Whatisthedictionary definition ofthewordephemeral?
7757,"Howdoesitapplytothe
conceptoftheephemeral portnumber?"
7758,5.Whatistheminimum sizeofaUDPdatagram?
7759,6.Whatisthemaximum sizeofaUDPdatagram?
7760,"7.Whatistheminimum sizeoftheprocessdatathatcanbeencapsulated inaUDP
datagram?"
7761,"8.Whatisthemaximum sizeoftheprocessdatathatcanbeencapsulated inaUDP
datagram?"
7762,"9.Compare theTCPheaderandtheUDPheader.ListthefieldsintheTCPheader
thataremissingfromUDPheader.Givethereasonfortheirabsence."
7763,10.UDPisamessage-oriented protocol.
7764,TCPisabyte-oriented protocol.
7765,"Ifanappli­
cationneedstoprotecttheboundaries ofitsmessage, whichprotocol shouldbe
used,UDPorTCP?SECTION 23.8PRACTICE SET 757
11.WhatcanyousayabouttheTCPsegmentinwhichthevalueofthecontrolfieldis
oneofthefollowing?"
7766,"a.000000
b.000001
c.010001
12.Whatisthemaximum sizeoftheTCPheader?Whatistheminimum sizeofthe
TCPheader?"
7767,"Exercises
13.ShowtheentriesfortheheaderofaUDPuserdatagram thatcarriesamessagefrom
aTFTPclienttoaTFTPserver.Fillthechecksum fieldwithOs.Chooseanappro­
priateephemeral portnumberandthecorrectwell-known portnumber.Thelength
ofdatais40bytes.ShowtheUDPpacket,usingtheformatinFigure23.9.
14.AnSNMPclientresidingonahostwithIPaddress122.45.12.7 sendsamessage to
anSNMPserverresidingonahostwithIPaddress200.112.45.90."
7768,"Whatis thepair
ofsocketsusedinthiscommunication?"
7769,"15.ATFTPserverresidingonahostwithIPaddress130.45.12.7 sendsamessage toa
TFTPclientresiding onahostwithIPaddress14.90.90.33."
7770,"Whatisthepairof
socketsusedinthiscommunication?"
7771,"16.Aclienthasapacketof68,000bytes.Showhowthispacketcanbetransferred by
usingonlyoneUDPuserdatagram."
7772,"17.AclientusesUDPtosenddatatoaserver.Thedataare16bytes.Calculate theeffi­
ciencyofthistransmission attheUDPlevel(ratioofusefulbytestototalbytes)."
7773,"18.RedoExercise 17,calculating theefficiency oftransmission attheIPleveLAssume
nooptionsfortheIPheader."
7774,"19.RedoExercise 18,calculating theefficiency oftransmission atthedatalinklayer."
7775,AssumenooptionsfortheIPheaderanduseEthernet atthedatalinklayer.
7776,20.Thefollowing isadumpofaUDPheaderinhexadecimal format.
7777,"0632000DOO lCE217
a.Whatisthesourceportnumber?"
7778,b.Whatisthedestination portnumber?
7779,c.Whatisthetotallengthoftheuserdatagram?
7780,d.Whatisthelengthofthedata?
7781,e.Isthepacketdirectedfromaclienttoaserverorviceversa?
7782,f.Whatistheclientprocess?
7783,21.AnIPdatagram iscarryingaTCPsegmentdestinedforaddress 130.14.16.17/16.
7784,"The
destination portaddressiscorrupted, anditarrivesatdestination 130.14.16.19/16."
7785,Howdoesthereceiving TCPreacttothiserror?
7786,"22.InTCP,ifthevalueofHLENis0111,howmanybytesofoptionareincluded in
thesegment?758CHAPTER 23PROCESS-TO-PROCESS DELNERY: UDp,TCp,ANDSCTP
23.ShowtheentriesfortheheaderofaTCPsegment thatcarriesamessage froman
FTPclienttoanFTPserver.Fillthechecksum fieldwithOs.Chooseanappropriate
ephemeral portnumberandthecorrectwell-known portnumber.Thelengthofthe
datais40bytes."
7787,24.Thefollowing isadumpofaTCPheaderinhexadecimal format.
7788,"05320017 000ססoo1 00000000 5OO207FF 00000000
a.Whatisthesourceportnumber?"
7789,b.Whatisthedestination portnumber?
7790,c.Whatthesequence number?
7791,d.Whatistheacknowledgment number?
7792,e.Whatisthelengthoftheheader?
7793,f.Whatisthetypeofthesegment?
7794,g.Whatisthewindowsize?
7795,"25.Tomaketheinitialsequence numberarandomnumber,mostsystemsstartthecounter
at1duringbootstrap andincrement thecounterby64,000every0.5s.Howlong
doesittakeforthecountertowraparound?"
7796,"26.Inaconnection, thevalueofcwndis3000andthevalueofrwndis5000.Thehosthas
sent2000byteswhichhasnotbeenacknowledged."
7797,Howmanymorebytescanbesent?
7798,"27.TCPopensaconnection usinganinitialsequence number(ISN)of14,534.The
otherpartyopenstheconnection withanISNof21,732.ShowthethreeTCPseg­
mentsduringtheconnection establishment."
7799,"28.AclientusesTCPtosenddatatoaserver.Thedataare16bytes.Calculate theeffi­
ciencyofthistransmission attheTCPlevel(ratioofusefulbytestototalbytes)."
7800,"Calculate theefficiency oftransmission attheIPlevel.Assumenooptionsforthe
IPheader.Calculate theefficiency oftransmission atthedatalinklayer.Assumeno
optionsfortheIFheaderanduseEthernet atthedatalinklayer."
7801,"29.TCPissendingdataat1Mbyte/s.Ifthesequence numberstartswith7000,how
longdoesittakebeforethesequence numbergoesbacktozero?"
7802,"30.ATCPconnection isusingawindow sizeof10,000bytes,andtheprevious
acknowledgment numberwas22,001.Itreceivesasegmentwithacknowledgment
number24,001andwindowsizeadvertisement of12,000.Drawadiagramtoshow
thesituation ofthewindowbeforeandafter."
7803,"31.Awindow holds bytes2001to5000.Thenextbytetobesentis3001.Drawafigure
toshowthesituation ofthewindowafterthefollowing twoevents."
7804,"a.AnACKsegment withtheacknowledgment number2500andwindow size
advertisement 4000isreceived."
7805,b.Asegmentcarrying 1000bytesissent.
7806,"32.InSCTP,thevalueofthecumulative TSNinaSACKis23.Thevalueoftheprevious
cumulative TSNintheSACKwas29.Whatistheproblem?"
7807,"33.InSCTP,thestateofareceiverisasfollows:
a.Thereceiving queuehaschunks1to8,11to14,and16to20."
7808,"b.Thereare1800bytesofspaceinthequeue.SECTION 23.8PRACTICE SET759
c.ThevalueoflastAckis4."
7809,d.Noduplicate chunkhasbeenreceived.
7810,e.ThevalueofcumTSN is5.
7811,Showthecontentsofthereceiving queueandthevariables.
7812,"34.InSCTP,thestateofasenderisasfollows:
a.Thesendingqueuehaschunks18to23."
7813,b.ThevalueofcumTSN is20.
7814,c.Thevalueofthewindowsizeis2000bytes.
7815,d.ThevalueofinTransit is200.
7816,"Ifeachdatachunkcontains 100bytesofdata,howmanyDATAchunkscanbesent
now?WhatisthenextDATAchunktobesent?"
7817,"Research Activities
35.Findmoreinformation aboutICANN.Whatwasitcalledbeforeitsnamewaschanged?"
7818,36.TCPusesatransition statediagram tohandlesendingandreceiving segments.
7819,Findoutaboutthisdiagramandhowithandlesflowandcontrol.
7820,37.SCTPusesatransition statediagramtohandlesendingandreceiving segments.
7821,Findoutaboutthisdiagramandhowithandlesflowandcontrol.
7822,38.Whatisthehalf-open caseinTCP?
7823,39.Whatisthehalf-duplex closecaseinTCP?
7824,"40.Thetcpdump command inUNIXorLINUXcanbeusedtoprinttheheaders
ofpacketsofanetworkinterface."
7825,Usetcpdumptoseethesegments sentandreceived.
7826,"41.InSCTP,findoutwhathappensifaSACKchunkisdelayedorlost."
7827,42.Findthenameandfunctions oftimersusedinTCP.
7828,43.Findthenameandfunctions oftimersusedinSCTP.
7829,44.FindoutmoreaboutECNinSCTP.Findtheformatofthesetwochunks.
7830,"45.Someapplication programs, suchasFTP,needmorethanoneconnection when
usingTCP.Findhowthemultistream serviceofSCTPcanhelptheseapplications
establish onlyoneassociation withseveralstreams.CHAPTER 24
Congestion Controland
QualityofService
Congestion controlandqualityofservicearetwoissuessocloselyboundtogetherthat
improving onemeansimproving theotherandignoring oneusually means ignoring the
other.Mosttechniques topreventoreliminate congestion alsoimprove thequalityof
serviceinanetwork."
7831,"Wehavepostponed thediscussion oftheseissuesuntilnowbecausetheseareissues
relatednottoonelayer,buttothree:thedatalinklayer,thenetwork layer,andthe
transport layer.Wewaiteduntilnowsothatwecandiscusstheseissuesonceinsteadof
repeating thesubjectthreetimes.Throughout thechapter,wegiveexamples ofconges­
tioncontrolandqualityofserviceatdifferent layers."
7832,"24.1DATATRAFFIC
Themainfocusofcongestion controlandqualityofserviceisdatatraffic.Incongestion
controlwetrytoavoidtrafficcongestion."
7833,"Inqualityofservice,wetrytocreatean
appropriate environment forthetraffic.So,beforetalkingaboutcongestion controland
qualityofservice,wediscussthedatatrafficitself."
7834,"TrafficDescriptor
Trafficdescriptors arequalitative valuesthatrepresent adataflow.Figure24.1showsa
trafficflowwithsomeofthesevalues."
7835,"Figure24.1Trafficdescriptors
DatarateMaximum
burstsize~
~-""'CC - - - - - - - Peakdatarate
- - - - - Average datarate
Seconds
761762CHAPTER 24CONGESTION CONTROL ANDQUAliTY OFSERVICE
AverageDataRate
Theaveragedatarateisthenumberofbitssentduringaperiodoftime,dividedbythe
numberofsecondsinthatperiod.Weusethefollowing equation:
Averagedatarate=amountofdata
time
Theaveragedatarateisaveryusefulcharacteristic oftrafficbecauseitindicates the
averagebandwidth neededbythetraffic."
7836,"PeakDataRate
Thepeakdataratedefinesthemaximum datarateofthetraffic.InFigure24.1itisthe
maximum yaxisvalue.Thepeakdatarateisaveryimportant measurement because
itindicates thepeakbandwidth thatthenetworkneedsfortraffictopassthroughwithout
changing itsdataflow."
7837,"Maximum BurstSize
Although thepeakdatarateisacriticalvalueforthenetwork, itcanusuallybeignored
ifthedurationofthepeakvalueisveryshort.Forexample, ifdataareflowingsteadily
attherateof1Mbpswithasuddenpeakdatarateof2Mbpsforjust1ms,thenetwork
probably canhandlethesituation."
7838,"However, ifthepeakdataratelasts60ms,theremay
beaproblemforthenetwork."
7839,"Themaximum burstsizenormally referstothemaximum
lengthoftimethetrafficisgenerated atthepeakrate."
7840,"Effective Bandwidth
Theeffective bandwidth isthebandwidth thatthenetwork needstoallocateforthe
flowoftraffic.Theeffective bandwidth isafunctionofthreevalues:averagedatarate,
peakdatarate,andmaximum burstsize.Thecalculation ofthisvalueisverycomplex."
7841,"TrafficProfiles
Forourpurposes, adataflowcanhaveoneofthefollowing trafficprofiles:constantbit
rate,variablebitrate,orburstyasshowninFigure24.2.
Constant BitRate
Aconstant-bit-rate (CBR),orafixed-rate, trafficmodelhasadataratethatdoesnot
change.Inthistypeofflow,theaveragedataratcandthcpeakdataratearethesame."
7842,Themaximum burstsizeisnotapplicable.
7843,"Thistypeoftrafficisveryeasyforanetwork
tohandlesinceitispredictable."
7844,"Thenetworkknowsinadvancehowmuchbandwidth to
allocateforthistypeofflow."
7845,"VariableBitRate
Inthevariable-bit-rate (VBR)category, therateofthedataflowchangesintime,with
thechangessmoothinsteadofsuddenandsharp.Inthistypeofflow,theaveragedataSECTION 24.2CONGESTION 763
Figure24.2Threetrafficprofiles
Datarate
t--L-
Time
a.Constant bitrate
DatarateDatarate
L:_~~~."
7846,"Time
b.Variable bitrate
Time
c.Bursty
rateandthepeakdataratearedifferent."
7847,"Themaximum burstsizeisusuallyasmall
value.Thistypeoftrafficismoredifficulttohandlethanconstant-bit-rate traffic,butit
normally doesnotneedtobereshaped, aswewillseelater."
7848,"Bursty
Intheburstydatacategory, thedataratechanges suddenly inaveryshorttime.It
mayjumpfromzero,forexample, to1Mbpsinafewmicroseconds andviceversa.It
mayalsoremainatthisvalueforawhile.Theaveragebitrateandthepeakbitrateare
verydifferent valuesinthistypeofflow.Themaximum burstsizeissignificant."
7849,"This
isthemostdifficulttypeoftrafficforanetworktohandlebecausetheprofileisvery
unpredictable."
7850,"Tohandlethistypeoftraffic,thenetworknormally needstoreshapeit,
usingreshaping techniques, aswewillseeshortly.Burstytrafficisoneofthemain
causesofcongestion inanetwork."
7851,"24.2CONGESTION
Animportant issueinapacket-switched networkiscongestion."
7852,"Congestion inanetwork
mayoccuriftheloadonthenetwork-the numberofpacketssenttothenetwork-is
greaterthanthecapacityofthenetwork-the numberofpacketsanetworkcanhandle."
7853,"Congestion controlreferstothemechanisms andtechniques tocontrolthecongestion
andkeeptheloadbelowthecapacity."
7854,Wemayaskwhythereiscongestion onanetwork.
7855,"Congestion happens inany
systemthatinvolves waiting.Forexample, congestion happens onafreewaybecause
anyabnonnality intheflow,suchasanaccidentduringrushhour,createsblockage.Input
Output764 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Congestion inanetworkorinternetwork occursbecauseroutersandswitches have
queues-buffers thatholdthepacketsbeforeandafterprocessing."
7856,"Arouter,forexample,
hasaninputqueueandanoutputqueueforeachinterface."
7857,"Whenapacketarrivesatthe
incoming interface, itundergoes threestepsbeforedeparting, asshowninFigure24.3.
Figure24.3Queuesinarouter
1
..~~lIllll~lnputQueuesI 't:: c'\,~,'~~','
~~IIIIn~ Output
Input~~jIp~~ ~J- Queu;~""'"" ',
Output~t1llll1'1+~
.,Q~eue~ ,.,~~.....T
L_
1.Thepacketisputattheendoftheinputqueuewhilewaitingtobechecked."
7858,"2.Theprocessing moduleoftherouterremoves thepacketfromtheinputqueueonce
itreachesthefrontofthequeueandusesitsroutingtableandthedestination
addresstofindtheroute."
7859,3.Thepacketisputintheappropriate outputqueueandwaitsitstumtobesent.
7860,"Weneedtobeawareoftwoissues.First,iftherateofpacketarrivalishigherthanthe
packetprocessing rate,theinputqueuesbecomelongerandlonger.Second,ifthepacket
departure rateislessthanthepacketprocessing rate,theoutputqueuesbecomelonger
andlonger."
7861,"Network Performance
Congestion controlinvolvestwofactorsthatmeasuretheperformance ofanetwork: delay
andthroughput."
7862,Figure24.4showsthesetwoperformance measures asfunctionofload.
7863,"Figure24.4Packetdelayandthroughput asfunctions ofload
Delay Throughput
CapacityNocongestion areaCongestion area
Capacity LoadNocongestion
areaCongestion area
Load
a.Delayasafunction ofload b.Throughput asafunction ofloadSECTION 24.3CONGESTION CONTROL 765
DelayVersusLoad
Notethatwhentheloadismuchlessthanthecapacityofthenetwork, thedelayisata
minimum."
7864,"Thisminimum delayiscomposed ofpropagation delayandprocessing delay,
bothofwhicharenegligible."
7865,"However, whentheloadreachesthenetworkcapacity, the
delayincreases sharplybecausewe nowneedtoaddthewaitingtimeinthequeues(forall
routersinthepath)tothetotaldelay.Notethatthedelaybecomes infinitewhentheloadis
greaterthanthecapacity.Ifthisisnotobvious, consider thesizeofthequeueswhen
almostnopacketreachesthedestination, orreachesthedestination withinfinitedelay;the
queuesbecomelongerandlonger.Delayhasanegative effectontheloadandconse­
quentlythecongestion."
7866,"Whenapacketisdelayed,thesource,notreceiving theacknowl­
edgment, retransmits thepacket,whichmakesthedelay,andthecongestion, worse."
7867,"Throughput VersusLoad
Wedefinedthroughput inChapter3asthenumberofbitspassingthroughapointina
second.Wecanextendthatdefinition frombitstopacketsandfromapointtoanet­
work.Wecandefinethroughput inanetwork asthenumberofpacketspassing
throughthenetworkinaunitoftime.Noticethatwhentheloadisbelowthecapacity
ofthenetwork, thethroughput increases proportionally withtheload.Weexpectthe
throughput toremainconstant aftertheloadreachesthecapacity, butinsteadthe
throughput declines sharply.Thereasonisthediscarding ofpacketsbytherouters."
7868,"Whentheloadexceedsthecapacity, thequeuesbecomefullandtheroutershavetodis­
cardsomepackets.Discarding packet;'does notreducethenumberofpacketsinthe
networkbecausethesourcesretransmit thepackets,usingtime-out mechanisms, when
thepacketsdonotreachthedestinations."
7869,"24.3CONGESTION CONTROL
Congestion controlreferstotechniques andmechanisms thatcaneitherpreventconges­
tion,beforeithappens, orremovecongestion, afterithashappened."
7870,"Ingeneral,wecan
dividecongestion controlmechanisms intotwobroadcategories: open-loop congestion
control(prevention) andclosed-loop congestion control(removal) asshowninFigure24.5.
Figure24.5Congestion controlcategories
Retransmission policy
Window policy
Acknowledgment policy
Discarding policy
Admission policyBackpressure
Chokepacket
Implicitsignaling
Explicitsignaling766 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Open-Loop Congestion Control
Inopen-loop congestion control, policiesareappliedtopreventcongestion beforeit
happens."
7871,"Inthesemechanisms, congestion controlishandledbyeitherthesourceorthe
destination."
7872,Wegiveabrieflistofpoliciesthatcanpreventcongestion.
7873,"Retransmission Policy
Retransmission issometimes unavoidable."
7874,"Ifthesenderfeelsthatasentpacketislost
orcorrupted, the packet needstoberetransmitted."
7875,"Retransmission ingeneralmay
increasecongestion inthenetwork."
7876,"However, agoodretransmission policycanprevent
congestion."
7877,"Theretransmission policyandtheretransmission timersmustbedesigned
tooptimize efficiency andatthesametimepreventcongestion."
7878,"Forexample, the
retransmission policyusedbyTCP(explained later)isdesigned topreventoralleviate
congestion."
7879,"WindowPolicy
Thetypeofwindow atthesendermayalsoaffectcongestion."
7880,"TheSelective Repeat
windowisbetterthantheGo-Back-N windowforcongestion control.IntheGo-Back-N
window, whenthetimerforapackettimesout,severalpacketsmayberesent,although
somemayhavearrivedsafeandsoundatthereceiver."
7881,"Thisduplication maymakethe
congestion worse.TheSelective Repeatwindow, ontheotherhand,triestosendthe
specificpacketsthathavebeenlostorcorrupted."
7882,"Acknowledgment Policy
Theacknowledgment policyimposed bythereceivermayalsoaffectcongestion."
7883,"Ifthe
receiverdoesnotacknowledge everypacketitreceives, itmayslowdownthesender
andhelppreventcongestion."
7884,"Severalapproaches areusedinthiscase.Areceivermay
sendanacknowledgment onlyifithasapackettobesentoraspecialtimerexpires.A
receivermaydecidetoacknowledge onlyNpacketsatatime.Weneedtoknowthat
theacknowledgments arealsopartoftheloadinanetwork."
7885,"Sendingfeweracknowl­
edgments meansimposing lessloadonthenetwork."
7886,"Discarding Policy
Agooddiscarding policybytheroutersmaypreventcongestion andatthesametime
maynotharmtheintegrity ofthetransmission."
7887,"Forexample, inaudiotransmission, if
thepolicyistodiscardlesssensitive packetswhencongestion islikelytohappen,the
qualityofsoundisstillpreserved andcongestion isprevented oralleviated."
7888,"Admission Policy
Anadmission policy,whichisaquality-of-service mechanism, canalsopreventconges­
tioninvirtual-circuit networks."
7889,"Switches inaflowfirstchecktheresource requirement
ofaflowbeforeadmitting ittothenetwork."
7890,"Aroutercandenyestablishing avirtual­
circuitconnection ifthereiscongestion inthenetworkorifthereisapossibility offuture
congestion.SECTION 24.3CONGESTION CONTROL 767
Closed-Loop Congestion Control
Closed-loop congestion controlmechanisms trytoalleviate congestion afterithap­
pens.Severalmechanisms havebeenusedbydifferent protocols."
7891,"Wedescribeafewof
themhere."
7892,"Backpressure
Thetechnique ofbackpressure referstoacongestion controlmechanism inwhicha
congested nodestopsreceiving datafromtheimmediate upstream nodeornodes.This
maycausetheupstream nodeornodestobecomecongested, andthey,inturn,reject
datafromtheirupstream nodesornodes.Andsoon.Backpressure isanode-to-node
congestion controlthatstartswithanodeandpropagates, intheopposite direction of
dataflow,tothesource.Thebackpressure technique canbeappliedonlytovirtualcircuit
networks, inwhicheachnodeknowsthe upstream nodefromwhichaflowofdatais
corning.Figure24.6 shows theideaofbackpressure."
7893,"Figure24.6Backpressure methodforalleviating congestion
SourceBackpressure......-
DataflowCongestion Destination
NodeIIIinthefigurehasmoreinputdatathanitcanhandle.Itdropssomepackets
initsinputbufferandinformsnodeIItoslowdown.NodeII,inturn,maybecongested
becauseitisslowingdowntheoutputflowofdata.IfnodeIIiscongested, itinforms
nodeItoslowdown,whichinturnmaycreatecongestion."
7894,"Ifso,nodeIinformsthe
sourceofdatatoslowdown.This,intime,alleviates thecongestion."
7895,"Notethatthepressure
onnodeIIIismovedbackward tothesourcetoremovethecongestion."
7896,Noneofthevirtual-circuit networks westudiedinthisbookusebackpressure.
7897,"It
was,however, implemented inthefirstvirtual-circuit network, X.25.Thetechnique
cannotbeimplemented inadatagram network because inthistypeofnetwork, anode
(router)doesnothavetheslightestknowledge oftheupstream router."
7898,"ChokePacket
Achokepacketisapacketsentbyanodetothesourcetoinformitofcongestion."
7899,Notethedifference betweenthebackpressure andchokepacketmethods.
7900,"Inbackpres­
sure,thewarning isfromonenodetoitsupstream node,although thewarningmay
eventually reachthesourcestation.Inthechokepacketmethod,thewarningisfromthe
router,whichhasencountered congestion, tothesourcestationdirectly."
7901,"Theinter­
mediatenodesthroughwhichthepackethastraveledarenotwarned.Wehaveseen
anexample ofthistypeofcontrolinICMP.WhenarouterintheInternetisover­
wheh:ned withIPdatagrams, itmaydiscardsomeofthem;butitinformsthesource768 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
host,usingasourcequenchICMPmessage."
7902,"Thewarningmessagegoesdirectlytothe
sourcestation;theintermediate routers,anddoesnottakeanyaction.Figure24.7
showstheideaofachokepacket."
7903,"Figure24.7Chokepacket
Choke
packet
Source Congestion
DataflowDestination
ImplicitSignaling
Inimplicitsignaling, thereisnocommunication betweenthecongested nodeornodes
andthesource.Thesourceguessesthatthereisacongestion somewhere inthenetwork
fromothersymptoms."
7904,"Forexample, whenasourcesendsseveralpacketsandthereis
noacknowledgment forawhile,oneassumption isthatthenetworkiscongested."
7905,"The
delayinreceiving anacknowledgment isinterpreted ascongestion inthenetwork; the
sourceshouldslowdown.Wewillseethistypeofsignaling whenwediscussTCP
congestion controllaterinthechapter."
7906,"ExplicitSignaling
Thenodethatexperiences congestion canexplicitly sendasignaltothesourceordesti­
nation.Theexplicitsignaling method,however, isdifferent fromthechokepacket
method.Inthechokepacketmethod,aseparatepacketisusedforthispurpose; inthe
explicitsignaling method,thesignalisincluded inthepacketsthatcarrydata.Explicit
signaling, aswewillseeinFrameRelaycongestion control,canoccurineitherthe
forwardorthebackward direction."
7907,"Backward Signaling Abitcanbesetinapacketmovinginthedirection opposite
tothecongestion."
7908,"Thisbitcanwarnthesourcethatthereiscongestion andthatitneeds
toslowdowntoavoidthediscarding ofpackets."
7909,"Forward Signaling Abitcanbesetinapacketmovinginthedirection ofthe
congestion."
7910,Thisbitcanwarnthedestination thatthereiscongestion.
7911,"Thereceiverin
thiscasecanusepolicies,suchasslowingdowntheacknowledgments, toalleviatethei
congestion."
7912,"24.4TWOEXAMPLES
Tobetterunderstand theconceptofcongestion control,letusgivetwoexamples: onein
TCPandtheotherinFrameRelay.SECTION 24.41WOEXAMPLES 769
Congestion ControlinTCP
Wediscussed TCPinChapter23.WenowshowhowTCPusescongestion controlto
avoidcongestion oralleviate congestion inthenetwork."
7913,"Congestion Window
InChapter23,wetalkedaboutflowcontrolandtriedtodiscusssolutions whenthereceiver
isoverwhelmed withdata.Wesaidthatthesenderwindowsizeisdetermined bytheavail­
ablebufferspaceinthereceiver(rwnd).Inotherwords,weassumed thatitisonlythe
receiverthatcandictatetothesenderthesizeofthesender'swindow.Wetotallyignored
anotherentityhere-the network."
7914,"Ifthenetworkcannotdeliverthedataasfastastheyare
createdbythesender,itmusttellthesendertoslowdown.Inotherwords,inadditionto
thereceiver,thenetworkisasecondentitythatdetermines thesizeofthesender'swindow."
7915,"Today,thesender'swindowsizeisdetermined notonlybythereceiverbutalsoby
congestion inthenetwork."
7916,"Thesenderhastwopiecesofinformation: thereceiver-advertised windowsizeand
thecongestion windowsize.Theactualsizeofthewindowistheminimum ofthesetwo."
7917,"Actualwindow size;;;;;;minimum (rwnd,cwnd)
Weshowshortlyhowthesizeofthecongestion window(cwnd)isdetermined."
7918,"Congestion Policy
TCP'sgeneralpolicyforhandling congestion isbasedonthreephases:slowstart,con­
gestionavoidance, andcongestion detection."
7919,"Intheslow-start phase,thesenderstarts
withaveryslowrateoftransmission, butincreases theraterapidlytoreachathreshold."
7920,"Whenthethreshold isreached, thedatarateisreducedtoavoidcongestion."
7921,"Finallyif
congestion isdetected, thesendergoesbacktotheslow-start orcongestion avoidance
phasebasedonhowthecongestion isdetected."
7922,"SlowStart:Exponential Increase Oneofthealgorithms usedinTCPcongestion
controliscalledslowstart.Thisalgorithm isbasedontheideathatthesizeofthecon­
gestionwindow(cwnd)startswithonemaximum segment size(MSS).TheMSSis
determined duringconnection establishment byusinganoptionofthesamename.The
sizeofthewindowincreases oneMSSeachtimeanacknowledgment isreceived."
7923,"Asthe
nameimplies,thewindowstartsslowly,butgrowsexponentially."
7924,"Toshowtheidea,letus
lookatFigure24.8.Notethatwehaveusedthreesimplifications tomakethediscussion
moreunderstandable."
7925,"Wehaveusedsegmentnumbersinsteadofbytenumbers(asthough
eachsegment contains only1byte).Wehaveassumed thatrwndismuchhigherthan
cwnd,sothatthesenderwindowsizealwaysequalscwnd.Wehaveassumed thateach
segmentisacknowledged individually."
7926,"Thesenderstartswithcwnd=1MSS.Thismeansthatthesendercansendonly
onesegment."
7927,"Afterreceiptoftheacknowledgment forsegment 1,thesizeofthe
congestion windowisincreased by1,whichmeansthatcwndisnow2.Nowtwo
moresegments canbesent.Wheneachacknowledgment isreceived, thesizeof
thewindow isincreased by1MSS.Whenallsevensegments areacknowledged,
cwnd=8.770 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Figure24.8Slowstart,exponential increase
Rnd:Roundoftransmission
cwnd=20= 1D
cwnd=21=2o::::J
cwnd=22=41.---0----.----'---'
LISender
TimeSegment 4
Segment5
Segment 6
Segment7Receiver
r--
Time
Ifwelookatthesizeofcwndintermsofrounds(acknowledgment ofthewhole
windowofsegments), wefindthattherateisexponential asshownbelow:
Start ....."
7928,"cwnd=l
Afterround1....."
7929,"cwnd=21=2
Afterround2....."
7930,"cwnd=22=4
Afterround3....."
7931,"cwnd=23=8
WeneedtomentionthatifthereisdelayedACKs,theincreaseinthesizeofthe
windowislessthanpowerof2."
7932,Slowstartcannotcontinue indefinitely.
7933,"Theremustbeathreshold tostopthis
phase.Thesenderkeepstrackofavariablenamedssthresh (slow-start threshold)."
7934,"Whenthesizeofwindowinbytesreachesthisthreshold, slowstartstopsandthenext
phasestarts.Inmostimplementations thevalueofssthreshis65,535bytes."
7935,"Intheslow-start algorithm, thesizeofthecongestion window
increases exponentially untilitreachesathreshold."
7936,"Congestion Avoidance: Additive Increase Ifwestartwiththeslow-start algorithm,
thesizeofthecongestion windowincreases exponentially."
7937,"Toavoidcongestion before
ithappens, onemustslowdownthisexponential growth.TCPdefinesanotheralgo­
rithmcalledcongestion avoidance, whichundergoes anadditive increase insteadof
anexponential one.Whenthesizeofthecongestion windowreachestheslow-start
threshold, theslow-start phasestopsandtheadditivephasebegins.Inthisalgorithm,
eachtimethewholewindowofsegments isacknowledged (oneround),thesizeoftheSECTION 24.41WOEXAMPLES 771
congestion windowisincreased by1.Toshowtheidea,weapplythisalgorithm tothesame
scenarioasslowstart,although wewillseethatthecongestion avoidance algorithm usually
startswhenthesizeofthewindowismuchgreaterthan1.Figure24.9showstheidea."
7938,"Figure24.9Congestion avoidance, additiveincrease
Rnd:Roundoftransmission Sender Receiver
-- --
cwnd=e10
~[Segment 1
cwnd =e1+1=2c:::::I:J
~[Segment 2
Segment 3
cwnd=2+1=3 I
<"")Segment 5 ""0c:
~
cwnd=3+1=4I,----,------,----l.....--'
Time Time
Inthiscase,afterthesenderhasreceivedacknowledgments foracomplete window
sizeofsegments, thesizeofthewindowisincreased byonesegment."
7939,"Ifwelookatthesizeofcwndintermsofrounds,wefindthattherateisadditiveas
shownbelow:
Start
Afterround1
Afterround2
Afterround3........................cwnd=l
cwnd=1+1=2
cwnd=2+ 1=3
cwnd=3+ 1=4
Inthecongestion avoidance algorithm, thesizeofthecongestion
windowincreases additively untilcongestion isdetected."
7940,"Congestion Detection: Multiplicative Decrease Ifcongestion occurs,thecongestion
windowsizemustbedecreased."
7941,"Theonlywaythesendercanguessthatcongestion has
occurred isbytheneedtoretransmit asegment."
7942,"However, retransmission canoccurin
oneoftwocases:whenatimertimesoutorwhenthreeACKsarereceived."
7943,"Inboth
cases,thesizeofthethreshold isdroppedtoone-half, amultiplicative decrease."
7944,"Most
TCPimplementations havetworeactions:
I.Ifatime-out occurs,thereisastronger possibility ofcongestion; asegment has
probably beendroppedinthenetwork, andthereisnonewsaboutthesentsegments.772CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
InthiscaseTCPreactsstrongly:
a.Itsetsthevalueofthethreshold toone-halfofthecurrentwindowsize."
7945,b.Itsetscwndtothesizeofonesegment.
7946,c.Itstartstheslow-start phaseagain.
7947,"2.IfthreeACKsarereceived, thereisaweakerpossibility ofcongestion; asegment
mayhavebeendropped, butsomesegments afterthatmayhavearrivedsafelysince
threeACKsarereceived."
7948,Thisiscalledfasttransmission andfastrecovery.
7949,"Inthis
case,TCPhasaweakerreaction:
a.Itsetsthevalueofthethreshold toone-halfofthecurrentwindowsize."
7950,"b.Itsetscwndtothevalueofthethreshold (someimplementations addthree
segment sizestothethreshold)."
7951,c.Itstartsthecongestion avoidance phase.
7952,"Animplementations reactstocongestion detection inoneofthefollowing ways:
oIfdetection isbytime-out, anewslow-start phasestarts."
7953,"oIfdetection isbythreeACKs,anewcongestion avoidance phasestarts."
7954,"Summary InFigure24.10,wesummarize thecongestion policyofTCPandtherela­
tionships between thethreephases."
7955,"Figure24.10TCPcongestion policysummary
ssthresh=112window
cwnd=1MSS
{-
Time-out Slowstart 3ACKsCongestion Congestion
cwnd;:::ssthresh
ssthresh=112window
cwnd=ssthresh
Time-outCongestion3ACKs
Congestion avoidance Congestion
t
ssthresh=112wmdow
cwnd=ssthresh
Wegiveanexample inFigure24.11.Weassumethatthemaximum windowsizeis
32segments."
7956,"Thethreshold issetto16segments (one-half ofthemaximum window
size).Intheslow-start phasethewindow sizestartsfrom1andgrowsexponentially
untilitreachesthethreshold."
7957,"Afteritreachesthethreshold, thecongestion avoidance
(additive increase) procedure allowsthewindow sizetoincrease linearlyuntilatime­
outoccursorthemaximum windowsizeisreached."
7958,"InFigure24.11,thetime-out occurs
whenthewindowsizeis20.Atthismoment, themultiplicative decrease procedure takesSECTION 24.4TWOEXAMPLES 773
Figure24.11 Congestion example
cwnd
58
234SS:Slowstart
AI:Additive increase
MD:Multiplicative decreaseTime-out
7 8 9 10111213141516Rounds26
24
22
20
18Threshold=16
16
14
12
10
08
06
04
02
overandreducesthethreshold toone-halfoftheprevious windowsize.Theprevious
windowsizewas20whenthetime-out happened sothenewthreshold isnow10."
7959,"TCPmovestoslowstartagainandstartswithawindowsizeof1,andTCPmoves
toadditiveincrease whenthenewthreshold isreached."
7960,"Whenthewindowsizeis12,a
three-ACKs eventhappens."
7961,Themultiplicative decrease procedure takesoveragain.
7962,"Thethreshold issetto6andTCPgoestotheadditive increase phasethistime.It
remainsinthisphaseuntilanothertime-out oranotherthreeACKshappen."
7963,"Congestion ControlinFrameRelay
Congestion inaFrameRelaynetworkdecreases throughput andincreases delay.Ahigh
throughput andlowdelayarethemaingoalsoftheFrameRelayprotocol."
7964,"FrameRelay
doesnothaveflowcontrol.Inaddition, FrameRelayallowstheusertotransmitbursty
data.ThismeansthataFrameRelaynetwork hasthepotential tobereallycongested
withtraffic,thusrequiring congestion control."
7965,"Congestion Avoidance
Forcongestion avoidance, theFrameRelayprotocoluses2bitsintheframetoexplicitly
warnthesourceandthedestination ofthepresence ofcongestion."
7966,"BECN Thebackward explicitcongestion notification (BECN)bitwarnsthesenderof
congestion inthenetwork."
7967,"Onemightaskhowthisisaccomplished sincetheframesare
traveling awayfromthesender.Infact,therearetwomethods: Theswitchcanuseresponse
framesfromthereceiver(full-duplex mode),orelsetheswitchcanuseapredefined connec­
tion(DLCI=1023)tosendspecialframesforthisspecificpurpose.Thesendercanrespond
tothiswarningbysimplyreducing thedatarate.Figure24.12showstheuseofBECN."
7968,"FECN Theforward explicitcongestion notification (FECN) bitisusedtowarn
thereceiverofcongestion inthenetwork."
7969,"Itmightappearthatthereceivercannotdo
anything torelievethecongestion."
7970,"However, theFrameRelayprotocol assumesthatthe
senderandreceiverarecommunicating witheachotherandareusingsometypeofflow
controlatahigherlevel.Forexample, ifthereisanacknowledgment mechanism atthis774CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Figure24.12 BECN
Direction ofcongestion
~
FrameRelaynetwork
higherlevel,thereceivercandelaytheacknowledgment, thusforcingthesenderto
slowdown.Figure24.13showstheuseofFECN."
7971,"Figure24.13 FECN
FrameRelaynetwork
Whentwoendpoints arecommunicating usingaFrameRelaynetwork, foursitua­
tionsmayoccurwithregardtocongestion."
7972,"Figure24.14showsthesefoursituations
andthevaluesofFECNandBECN."
7973,"Figure24.14 Fourcasesofcongestion
~~ B~NI
I~B~N~
a.Nocongestion b.Congestion inthedirection A-B
~~N BE~NI
IFE~NBE~N~~~B~NI
!FE;NBE~~
c.Congestion inthedirection B-A d.Congestion inbothdirectionsSECTION 24.5QUALITY OFSERVICE 775
24.5QUALITY OFSERVICE
Qualityofservice(QoS)isaninternetworking issuethathasbeendiscussed morethan
defined.Wecaninformally definequalityofserviceassomething aflowseekstoattain."
7974,"FlowCharacteristics
Traditionally, fourtypesofcharacteristics areattributed toaflow:reliability, delay,
jitter,andbandwidth, asshowninFigure24.15."
7975,"Figure24.15 Flowcharacteristics
Reliability
Reliability isacharacteristic thataflowneeds.Lackofreliability meanslosinga
packetoracknowledgment, whichentailsretransmission."
7976,"However, thesensitivity of
application programs toreliability isnotthesame.Forexample, itismoreimportant
thatelectronic mail,filetransfer,andInternetaccesshavereliabletransmissions than
telephony oraudioconferencing."
7977,"Delay
Source-to-destination delayisanotherflowcharacteristic."
7978,"Againapplications cantolerate
delayindifferentdegrees.Inthiscase,telephony, audioconferencing, videoconferenc­
ing,andremotelog-inneedminimum delay,whiledelayinfiletransferore-mailisless
important."
7979,"Jitter
Jitteristhevariation indelayforpacketsbelonging tothesameflow.Forexample, if
fourpacketsdepartattimes0,1,2,3andarriveat20,21,22, 23,allhavethesame
delay,20unitsoftime.Ontheotherhand,iftheabovefourpacketsarriveat21,23,21,
and28,theywillhavedifferent delays:21,22,19,and24."
7980,"Forapplications suchasaudioandvideo,thefirstcaseiscompletely acceptable;
thesecondcaseisnot.Fortheseapplications, itdoesnotmatterifthepacketsarrive
withashortorlongdelayaslongasthedelayisthesameforallpackets.Forthisappli­
cation,thesecondcaseisnotacceptable."
7981,"Jitterisdefinedasthevariation inthepacketdelay.Highjittermeansthedifference
betweendelaysislarge;lowjittermeansthevariation issmall."
7982,"InChapter29,weshowhowmultimedia communication dealswithjitter.Ifthe
jitterishigh,someactionisneededinordertousethereceiveddata.776CHAPTER 24CONGEST/ON CONTROL ANDQUALITY OFSERVICE
Bandwidth
Different applications needdifferent bandwidths."
7983,"Invideoconferencing weneedto
sendmillionsofbitspersecondtorefreshacolor screen whilethetotalnumberofbits
inane-mailmaynotreachevenamillion."
7984,"FlowClasses
Basedontheflowcharacteristics, wecanclassifyflowsintogroups,witheachgroup
havingsimilarlevelsofcharacteristics."
7985,"Thiscategorization isnotformaloruniversal;
someprotocols suchasATMhavedefinedclasses,aswewillseelater."
7986,"24.6lECHNIQUES TOIMPROVE QoS
InSection24.5wetriedtodefineQoSintermsofitscharacteristics."
7987,"Inthissection,we
discusssometechniques thatcanbeusedtoimprovethequalityofservice.Webriefly
discussfourcommon methods: scheduling, trafficshaping, admission control,and
resource reservation."
7988,"Scheduling
Packetsfromdifferentflowsarriveataswitchorrouterforprocessing.A goodscheduling
technique treatsthedifferent flowsinafairandappropriate manner.Severalscheduling
techniques aredesigned toimprovethequalityofservice.Wediscussthreeofthemhere:
FIFOqueuing, priorityqueuing, andweighted fairqueuing."
7989,"FIFOQueuing
Infirst-in,first-out(FIFO)queuing, packetswaitinabuffer(queue)untilthenode
(routerorswitch)isreadytoprocessthem.Iftheaveragearrivalrateishigherthanthe
averageprocessing rate,thequeuewillfillupandnewpacketswillbediscarded."
7990,"AFIFO
queueisfamiliartothosewhohavehadtowaitforabusatabusstop.Figure24.16shows
aconceptual viewofaFIFOqueue."
7991,"Figure24.16 FIFOqueue
Arrival Departure
PriorityQueuing
Inpriorityqueuing, packetsarefirstassigned toapriorityclass.Eachpriorityclasshas
itsownqueue.Thepacketsinthehighest-priority queueareprocessed first.Packetsin
thelowest-priority queueareprocessed last.NotethatthesystemdoesnotstopservingSECTION 24.6TECHNIQUES TOIMPROVE QoS777
aqueueuntilitisempty.Figure24.17showspriorityqueuingwithtwoprioritylevels
(forsimplicity)."
7992,"Figure24.17 Priorityqueuing
Theswitchturnstotheother
1--queuewhenthecurrentone
:isempty."
7993,"I
I
Arrival
 4ocesso~ Departure
Discard
ApriorityqueuecanprovidebetterQoSthantheFIFOqueuebecause higher­
prioritytraffic,suchasmultimedia, canreachthedestination withlessdelay.However,
thereisapotential drawback.Ifthereisacontinuous flowinahigh-priority queue,the
packetsinthelower-priority queueswillneverhaveachancetobeprocessed."
7994,"Thisisa
condition calledstarvation."
7995,"Weighted FairQueuing
Abetterscheduling methodisweighted fairqueuing."
7996,"Inthistechnique, thepacketsare
stillassigned todifferent classesandadmitted todifferent queues.Thequeues,how­
ever,areweighted basedonthepriorityofthequeues;higherprioritymeansahigher
weight.Thesystemprocesses packetsineachqueueinaround-robin fashionwiththe
numberofpacketsselectedfromeachqueuebasedonthecorresponding weight.For
example, iftheweightsare3,2,and1,threepacketsareprocessed fromthefirstqueue,
twofromthesecondqueue,andonefromthethirdqueue.Ifthesystemdoesnot
imposepriorityontheclasses,allweightscanbeequaLInthisway,wehavefairqueuing
withpriority.Figure24.18showsthetechnique withthreeclasses."
7997,"TrafficShaping
Trafficshaping isamechanism tocontroltheamountandtherateofthetrafficsentto
thenetwork."
7998,Twotechniques canshapetraffic:leakybucketandtokenbucket.
7999,"LeakyBucket
Ifabuckethasasmallholeatthebottom,thewaterleaksfromthebucketataconstantrate
aslongasthereiswaterinthebucket.Therateatwhichthewaterleaksdoesnotdepend
ontherateatwhichthewaterisinputtothebucketunlessthebucketisempty.Theinput
ratecanvary,buttheoutputrateremainsconstant."
8000,"Similarly, innetworking, atechnique
calledleakybucketcansmoothoutburstytraffic.Burstychunksarestoredinthebucket
andsentoutatanaveragerate.Figure24.19showsaleakybucketanditseffects.778CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Figure24.18 Weighted fairqueuing
ArrivalThetumingswitchselects
3packetsfromfirstqueue,1------, then2packetsfromthesecond
'---'---'--'-'- ............-L.....J queue,thenIpacketfromthe
thirdqueue.Thecyclerepeats."
8001,"Departure
Figure24.19Leakybucket
BurstyflowI---12Mbps
2Mbps
I I
012345678910
Burstydata
o1--1-1 _~_Mb_1-=-P~-I-I-I-~
2345678910 s,Fixedflow
Fixed-rate data
Inthefigure,weassumethatthenetwork hascommitted abandwidth of3Mbps
forahost.Theuseoftheleakybucketshapestheinputtraffictomakeitconform tothis
commitment."
8002,"InFigure24.19thehostsendsaburstofdataatarateof12Mbpsfor2s,
foratotalof24Mbitsofdata.Thehostissilentfor5 sandthensendsdataatarateof
2Mbpsfor3s,foratotalof6Mbitsofdata.Inall,thehosthassent30Mbitsofdatain
lOs.Theleakybucketsmoothsthetrafficbysendingoutdataatarateof3Mbpsduring
thesame10s.Withouttheleakybucket,thebeginning burstmayhavehurtthenetwork
byconsuming morebandwidth thanissetasideforthishost.Wecanalsoseethatthe
leakybucketmaypreventcongestion."
8003,"Asananalogy, considerthe freewayduringrush
hour(burstytraffic).If,instead,commuters couldstaggertheirworkinghours,congestion
o'nourfreeways couldbeavoided."
8004,"Asimple leaky bucketimplementation isshowninFigure24.20.AFIFOqueue
holdsthepackets.Ifthetrafficconsists offixed-size packets (e.g.,cellsinATMSECTION 24.6TECHNIQUES TOIMPROVE QoS 779
Figure24.20Leakybucketimplementation
Leakybucketalgorithm
Arrival Departure
networks), theprocessremoves afixednumberofpacketsfromthequeueateachtick
oftheclock.Ifthetrafficconsistsofvariable-length packets,thefixedoutputratemust
bebasedonthenumberofbytesorbits."
8005,"Thefollowing isanalgorithm forvariable-length packets:
1.Initialize acountertonatthetickoftheclock."
8006,"2.Ifnisgreaterthanthesizeofthepacket,sendthepacketanddecrement the
counterbythepacketsize.Repeatthisstepuntilnissmallerthanthepacketsize."
8007,3.Resetthecounterandgotostep1.
8008,"Aleakybucketalgorithm shapesburstytrafficintofixed-rate trafficby
averaging thedatarate.Itmaydropthepacketsifthebucketisfull."
8009,"TokenBucket
Theleakybucketisveryrestrictive."
8010,"Itdoesnotcreditanidlehost.Forexample, ifa
hostisnotsendingforawhile,itsbucketbecomes empty.Nowifthehosthasbursty
data,theleakybucketallowsonlyanaveragerate.Thetimewhenthehostwasidleis
nottakenintoaccount."
8011,"Ontheotherhand,thetokenbucketalgorithm allowsidle
hoststoaccumulate creditforthefutureintheformoftokens.Foreachtickofthe
clock,thesystemsendsntokenstothebucket.Thesystemremoves onetokenfor
everycell(orbyte)ofdatasent.Forexample, ifnis100andthehostisidlefor100ticks,
thebucketcollects10,000tokens.Nowthehostcanconsume allthesetokensinone
tickwith10,000cells,orthehosttakes1000tickswith10cellspertick.Inother
words,thehostcansendburstydataaslongasthebucketisnotempty.Figure24.21
showstheidea."
8012,"Thetokenbucketcaneasilybeimplemented withacounter.Thetokenisinitial­
izedtozero.Eachtimeatokenisadded,thecounterisincremented by1.Eachtimea
unitofdataissent,thecounterisdecremented by1.Whenthecounteriszero,thehost
cannotsenddata."
8013,"Thetokenbucketallowsburstytrafficataregulated maximum rate.780CHAPTER 24CONGESTION CONTROL ANDQUAliTY OFSERVICE
Figure24.21 Tokenbucket
Onetokenadded
pertick
~
Arrival Departure
Combining TokenBucketandLeakyBucket
Thetwotechniques canbecombined tocreditanidlehostandatthesametimeregulate
thetraffic.Theleakybucketisappliedafterthetokenbucket;therateoftheleakybucket
needstobehigherthantherateoftokensdroppedinthebucket."
8014,"Resource Reservation
Aflowofdataneedsresources suchasabuffer,bandwidth, CPUtime,andsoon.The
qualityofserviceisimproved iftheseresources arereserved beforehand."
8015,"Wediscussin
thissectiononeQoSmodelcalledIntegrated Services, whichdependsheavilyonresource
reservation toimprovethequalityofservice."
8016,"Admission Control
Admission controlreferstothemechanism usedbyarouter,oraswitch,toacceptor
rejectaflowbasedonpredefined parameters calledflowspecifications."
8017,"Beforearouter
acceptsaflowforprocessing, itcheckstheflowspecifications toseeifitscapacity (in
termsofbandwidth, buffersize,CPUspeed,etc.)anditsprevious commitments toother
flowscanhandlethenewflow."
8018,"24.7INTEGRATED SERVICES
BasedonthetopicsinSections24.5and24.6,twomodelshavebeendesigned toprovide
qualityofserviceintheInternet: Integrated Services andDifferentiated Services."
8019,"Both
modelsemphasize theuseofqualityofserviceatthenetworklayer(IP),although the
modelcanalsobeusedinotherlayerssuchasthedatalinleWediscussIntegrated Services
inthissectionandDifferentiated ServiceinSection24.8.
AswelearnedinChapter20,IPwasoriginally designed forbest-effort delivery."
8020,Thismeansthateveryuserreceivesthesamelevelofservices.
8021,"ThistypeofdeliverySECTION 24.7INTEGRATED SERVICES 781
doesnotguarantee theminimum ofaservice,suchasbandwidth, toapplications such
asreal-time audioandvideo.Ifsuchanapplication accidentally getsextrabandwidth,
itmaybedetrimental tootherapplications, resulting incongestion."
8022,"Integrated Services, sometimes calledIntServ, isafiow-based QoSmodel,which
meansthatauserneedstocreateaflow,akindofvirtualcircuit,fromthesourcetothe
destination andinformallroutersoftheresource requirement."
8023,Integrated Servicesisaflow~based QoSmodeldesigned forIP.
8024,"Signaling
Thereadermayremember thatIPisaconnectionless, datagram, packet-switching pro­
tocol.Howcanweimplement aflow-based modeloveraconnectionless protocol?"
8025,"The
solutionisasignaling protocoltorunoverIPthatprovides thesignaling mechanism for
makingareservation."
8026,"Thisprotocol iscalledResource Reservation Protocol (RSVP)
andwillbediscussed short!y."
8027,"Flow Specification
Whenasourcemakesareservation, itneedstodefineaflowspecification."
8028,"Aflowsped­
ficationhastwoparts:Rspec(resource specification) andTspec(trafficspecification)."
8029,"Rspecdefinestheresourcethattheflowneedstoreserve(buffer,bandwidth, etc.).Tspec
definesthetrafficcharacterization oftheflow."
8030,"Admission
Afterarouterreceivestheflowspecification fromanapplication, itdecidestoadmitor
denytheservice.Thedecision isbasedontheprevious commitments oftherouterand
thecurrentavailability oftheresource."
8031,"ServiceClasses
TwoclassesofserviceshavebeendefinedforIntegrated Services: guaranteed service
andcontrolled-load service."
8032,"Guaranteed ServiceClass
Thistypeofserviceisdesigned forreal-time trafficthatneedsaguaranteed minimum
end-to-end delay.Theend-to-end delayisthesumofthedelaysintherouters,theprop­
agationdelayinthemedia,andthesetupmechanism."
8033,"Onlythefirst,thesumofthe
delaysintherouters,canbeguaranteed bytherouter.Thistypeofserviceguarantees
thatthepacketswillarrivewithinacertaindeliverytimeandarenotdiscarded ifflow
trafficstayswithintheboundary ofTspec.Wecansaythatguaranteed services are
quantitative services, inwhichtheamountofend-to-end delayandthedataratemustbe
definedbytheapplication.782 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Controlled-Load ServiceClass
This type ofserviceisdesigned for applications thatcanacceptsomedelays,butare
sensitive toanoverloaded network andtothedangeroflosingpackets.Goodexamples
ofthesetypesofapplications arefiletransfer,e-mail,andInternetaccess.Thecontrolled­
loadserviceisaqualitative typeofserviceinthattheapplication requeststhepossibility
oflow-loss orno-losspackets."
8034,"RSVP
IntheIntegrated Services model,anapplication program needsresource reservation."
8035,"As
welearnedinthediscussion oftheIntServmodel,theresource reservation isforaflow."
8036,"ThismeansthatifwewanttouseIntServattheIPlevel,weneedtocreateaflow,akind
ofvirtual-circuit network, outoftheIP,whichwasoriginally designed asadatagram
packet-switched network."
8037,"Avirtual-circuit networkneedsasignaling systemtosetupthe
virtualcircuitbeforedatatrafficcanstart.TheResource Reservation Protocol (RSVP)is
asignaling protocol tohelpIPcreateaflowandconsequently makearesource reserva­
tion.Beforediscussing RSVP,weneedtomention thatitisanindependent protocol
separatefromtheIntegrated Services model.Itmaybeusedinothermodelsinthefuture."
8038,"Multicast Trees
RSVPisdifferent fromsomeothersignaling systemswehaveseenbeforeinthatitisa
signaling systemdesigned formulticasting."
8039,"However, RSVPcanbealsousedforuni­
castingbecauseunicasting isjustaspecialcaseofmulticasting withonlyonemember
inthemulticast group.ThereasonforthisdesignistoenableRSVPtoprovideresource
reservations forallkindsoftrafficincluding multimedia whichoftenusesmulticasting."
8040,"Receiver-Based Reservation
InRSVP,thereceivers, notthesender,makethereservation."
8041,"Thisstrategymatches the
othermulticasting protocols."
8042,"Forexample, inmulticast routingprotocols, thereceivers,
notthesender,makeadecision tojoinorleaveamulticast group."
8043,"RSVPMessages
RSVPhasseveraltypesofmessages."
8044,"However, forourpurposes, wediscussonlytwo
ofthem:PathandResv."
8045,PathMessages Recallthatthereceivers inaflowmakethereservation inRSVP.
8046,"However, thereceivers donotknowthepathtraveledbypacketsbeforethereservation
ismade.Thepathisneededforthereservation."
8047,"Tosolvetheproblem, RSVPusesPath
messages."
8048,"APathmessage travelsfromthesenderandreachesallreceivers inthemulti­
castpath.Ontheway,aPathmessage storesthenecessary information forthereceivers."
8049,"APathmessage issentinamulticast environment; anewmessage iscreatedwhenthe
pathdiverges."
8050,Figure24.22showspathmessages.
8051,"ResvMessages Afterareceiverhasreceived aPathmessage, itsendsaResvmessage."
8052,"TheResvmessage travelstowardthesender(upstream) andmakesaresource reservation
ontheroutersthatsupportRSVP.IfarouterdoesnotsupportRSVPonthepath,itroutesSECTION 24.7INTEGRATED SERVICES 783
Figure24.22 Pathmessages
Path~
81Path0-Path0-
ReIPath0-
~path
Rc2Rc3
thepacketbasedonthebest-effort deliverymethodswediscussed before.Figure24.23
showstheResvmessages."
8053,"Figure24.23 Resvmessages
81Resv
~DResv~
Rcl Rc2
Reservation Merging
InRSVP,theresources arenotreserved foreachreceiverinaflow;thereservation is
merged.InFigure24.24,Rc3requestsa2-Mbpsbandwidth whileRc2requestsaI-Mbps
bandwidth."
8054,"RouterR3,whichneedstomakeabandwidth reservation, mergesthetwo
requests."
8055,"Thereservation ismadefor2Mbps,thelargerofthetwo,becausea2-Mbps
inputreservation canhandlebothrequests."
8056,"Thesamesituation istrueforR2.The
readermayaskwhyRc2andRc3,bothbelonging toonesingleflow,requestdifferent
amounts ofbandwidth."
8057,"Theansweristhat,inamultimedia environment, different
receivers mayhandledifferent gradesofquality.Forexample, Rc2maybeable'to
receivevideoonlyat1Mbps(lowerquality),whileRc3maybeabletoreceivevideoat
2Mbps(higherquality)."
8058,"Figure24.24 Reservation merging
3Mbps~ R2
Rcl2Mbps~
Rc2784CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
Reservation Styles
Whenthereismorethanoneflow,therouterneedstomakeareservation toaccommodate
allofthem.RSVPdefinesthreetypesofreservation styles,asshowninFigure24.25."
8059,"Figure24.25Reservation styles
WildCardFilterStyleInthisstyle,theroutercreatesasinglereservation forall
senders.Thereservation isbasedonthelargestrequest.Thistypeofstyleisusedwhen
theflowsfromdifferent sendersdonotoccuratthesametime."
8060,"FixedFilterStyleInthisstyle,theroutercreatesadistinctreservation foreachflow."
8061,"Thismeansthatiftherearenflows,ndifferent reservations aremade.Thistypeofstyle
isusedwhenthereisahighprobability thatflowsfromdifferent senderswilloccurat
thesametime."
8062,"SharedExplicitStyleInthisstyle,theroutercreatesasinglereservation whichcan
besharedbyasetofflows."
8063,"SoftState
Thereservation information (state)storedineverynodeforaflowneedstoberefreshed
periodically."
8064,"Thisisreferredtoasasoftstateascompared tothehardstateusedin
othervirtual-circuit protocols suchasATMorFrameRelay,wheretheinformation
abouttheflowismaintained untilitiserased.Thedefaultintervalforrefreshing is
currently 30s."
8065,"Problems withIntegrated Services
Thereareatleasttwoproblems with Integrated Servicesthatmaypreventitsfullimple­
mentation intheInternet: scalability andservice-type limitation."
8066,"Scalability
TheIntegrated Servicesmodelrequiresthateachrouterkeepinformation foreachflow."
8067,"AstheInternetisgrowingeveryday,thisisaseriousproblem."
8068,"Service-Type Limitation
TheIntegrated Services modelprovides onlytwotypesofservices, guaranteed and
control-load."
8069,"Thoseopposing thismodelarguethatapplications mayneedmorethan
thesetwotypesofservices.SECTION 24.8DIFFERENTIATED SERVICES 785
24.8DIFFERENTIATED SERVICES
Differentiated Services (DSorDiffserv) wasintroduced bytheIETF(Internet Engi­
neeringTaskForce)tohandletheshortcomings ofIntegrated Services."
8070,"Twofundamental
changesweremade:
1.Themainprocessing wasmovedfromthecoreofthenetworktotheedgeofthe
network."
8071,Thissolvesthescalability problem.
8072,"Theroutersdonothavetostore
information aboutflows.Theapplications, orhosts,definethetypeofservicethey
needeachtimetheysendapacket."
8073,"2.Theper-flowserviceischangedtoper-class service.Therouterroutesthepacket
basedontheclassofservicedefinedinthepacket,nottheflow.Thissolvesthe
service-type limitation problem."
8074,"Wecandefinedifferenttypesofclassesbasedon
theneedsofapplications."
8075,Differentiated Servicesisaclass-based QoSmodeldesigned forIP.
8076,"DSField
InDiffserv, eachpacketcontainsafieldcalledtheDSfield.Thevalueofthisfieldisset
attheboundary ofthenetworkbythehostorthefirstrouterdesignated astheboundary
router.IETFproposes toreplacetheexistingTOS(typeofservice)fieldinIPv4orthe
classfieldinIPv6bytheDSfield,asshowninFigure24.26."
8077,"Figure24.26 DSfield
DSCP .I~
TheDSfieldcontains twosubfields: DSCPandCU.TheDSCP(Differentiated
ServicesCodePoint)isa6-bitsubfieldthatdefinestheper-hopbehavior (PHB).The
2-bitCU(currently unused)subfieldisnotcurrently used."
8078,"TheDiffserv capablenode(router)usestheDSCP6bitsasanindextoatable
definingthepacket-handling mechanism forthecurrentpacketbeingprocessed."
8079,"Per-Hop Behavior
TheDiffserv modeldefinesper-hopbehaviors (PHBs)foreachnodethatreceivesa
packet.SofarthreePHBsaredefined:DEPHB,EFPHB,andAFPHB."
8080,"DEPHBTheDEPHB(defaultPHB)isthesameasbest-effort delivery, whichis
compatible withTOS."
8081,"EFPHBTheEFPHB(expedited forwarding PHB) provides thefollowing services:
oLowloss786CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
oLowlatency
oEnsuredbandwidth
Thisisthesameashavingavirtualconnection betweenthesourceanddestination."
8082,"AFPHBTheAFPHB(assured forwarding PHB)deliversthepacketwithahigh
assurance aslongastheclasstrafficdoesnotexceedthetrafficprofileofthenode.The
usersofthenetworkneedtobeawarethatsomepacketsmaybediscarded."
8083,"TrafficConditioner
Toimplement Oiffserv, theOSnodeusestrafficconditioners suchasmeters,markers,
shapers,anddroppers, asshowninFigure24.27."
8084,"Figure24.27 Trafficconditioner
Trafficconditioner
I""£&JInput-----""""J'-......-......"
8085,"Droppedkd
I-I-~~ Output
Meters Themetercheckstoseeiftheincoming flowmatchesthenegotiated traffic
profile.Themeteralsosendsthisresulttoothercomponents."
8086,"Themetercanuseseveral
toolssuchasatokenbuckettochecktheprofile."
8087,"Marker Amarkercanremarkapacketthatisusingbest-effort delivery (OSCP:
000000)ordown-mark apacketbasedoninformation receivedfromthemeter.Down­
marking(lowering theclassoftheflow)occursiftheflowdoesnotmatchtheprofile.A
markerdoesnotup-mark (promote theclass)apacket."
8088,"Shaper Ashaperusestheinformation receivedfromthemetertoreshapethetrafficif
itisnotcompliant withthenegotiated profile."
8089,"Dropper Adropper,whichworksasashaperwithnobuffer,discardspacketsifthe
flowseverelyviolatesthenegotiated profile."
8090,"24.9QoSINSWITCHED NETWORKS
Wediscussed theproposed modelsforQoSintheIPprotocols."
8091,"LetusnowdiscussQoS
asusedintwoswitched networks: FrameRelayandATM.Thesetwonetworks are
virtual-circuit networks thatneedasignaling protocolsuchasRSVP.SECTION 24.9QoSINSWITCHED NETWORKS 787
QoSinFrameRelay
Fourdifferent attributes tocontroltraffichavebeendevisedinFrameRelay:accessrate,
committed burstsizeBe'committed information rate(CIR),andexcessburstsizeBe'
Thesearesetduringthenegotiation between theuserandthenetwork."
8092,"ForPVCcon­
nections, theyarenegotiated once;forSVCconnections, theyarenegotiated foreach
connection duringconnection setup.Figure24.28showstherelationships betweenthese
fourmeasurements."
8093,"Figure24.28 Relationship between trafficcontrolattributes
Rate
(bps)
Access1-- _
rate
Area=B."
8094,"eIR1----------------
T(s)
AccessRate
Foreveryconnection, anaccessrate(inbitspersecond)isdefined.Theaccessrate
actuallydependsonthebandwidth ofthechannelconnecting theusertothenetwork."
8095,"Theusercanneverexceedthisrate.Forexample, iftheuserisconnected toaFrame
RelaynetworkbyaT-lline,theaccessrateis1.544Mbpsandcanneverbeexceeded."
8096,"Committed BurstSize
Foreveryconnection, FrameRelaydefinesacommitted burstsizeBe.Thisisthe
maximum numberofbitsinapredefined timethatthenetworkiscommitted totransfer
withoutdiscarding anyframeorsettingtheDEbit.Forexample, ifaBeof400kbitsfor
aperiodof4 sisgranted,theusercansendupto400kbitsduringa4-sintervalwithout
worrying aboutanyframeloss.Notethatthisisnotaratedefinedforeachsecond.Itis
acumulative measurement."
8097,"Theusercansend300kbitsduringthefirstsecond,nodata
duringthesecondandthethirdseconds, andfinally100kbitsduringthefourthsecond."
8098,"Committed Information Rate
Thecommitted information rate(CIR)issimilarinconcepttocommitted burstsize
exceptthatitdefinesanaveragerateinbitspersecond.Iftheuserfollowsthisratecon­
tinuously, thenetworkiscommitted todelivertheframes.However, becauseitisan
averagemeasurement, ausermaysenddataatahigherratethantheCIRattimesorat788 CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
alowerrateothertimes.Aslongastheaverageforthepredefined periodismet,the
frameswillbedelivered."
8099,"Thecumulative numberofbitssentduringthepredefined periodcannotexceedBe
NotethattheCIRisnotanindependent measurement; itcanbecalculated byusingthe
following formula:
BCIR==....Ebps
T
Forexample, iftheBeis5kbitsinaperiodof5s,theCIRis5000/5,or1kbps."
8100,"ExcessBurstSize
Foreveryconnection, FrameRelaydefinesanexcessburstsizeBe""Thisisthemaximum
numberofbitsinexcessofBethatausercansendduringapredefined time.Thenetwork
iscommitted totransferthesebitsifthereisnocongestion."
8101,"Notethatthereislesscom­
mitmentherethaninthecaseofBeThenetworkiscommitting itselfconditionally."
8102,"UserRate
Figure24.29showshowausercansendburstydata.IftheuserneverexceedsBC'the
networkiscommitted totransmittheframeswithoutdiscarding any.Iftheuserexceeds
BebylessthanBe(thatis,thetotalnumberofbitsislessthanBe+Be)'thenetworkis
committed totransferalltheframesifthereisnocongestion."
8103,"Ifthereiscongestion,
someframeswillbediscarded."
8104,"Thefirstswitchthatreceivestheframesfromtheuser
hasacounterandsetstheDEbitfortheframesthatexceedBeTherestoftheswitches
willdiscardtheseframesifthereiscongestion."
8105,"Notethatauserwhoneedstosenddata
fastermayexceedtheBelevel.AslongasthelevelisnotaboveBe+Be'thereisa
chancethattheframeswillreachthedestination withoutbeingdiscarded."
8106,"Remember,
however, thatthemomenttheuserexceedstheBe+Belevel,alltheframessentafter
thatarediscarded bythefirstswitch."
8107,"Figure24.29 UserrateinrelationtoBeandBe+Be
IfareaislessthanBe'nodiscarding (DE=0)."
8108,Rate Ifareaisbetween BeandBe+Be'possiblediscarding ifcongestion (DE=1).
8109,(bps) IfareaisgreaterthanBe+Be'discarding occurs.
8110,"Accessrater---------------------- ---------
Actual Actualrate
Actualrate rateeIRf------ --------------
Actualrate
Area=totalbitssentinTs
Actualrate
T(s)SECTION 24.9QoSINSWITCHED NETWORKS 789
QoSinATM
TheQoSinATMisbasedontheclass,user-related attributes, andnetwork-related attributes."
8111,"Classes
TheATMForumdefinesfourserviceclasses: CBR, VBR,ABR,andUBR(seeFig­
ure24.30)."
8112,"Figure24.30 Serviceclasses
CBRTheconstant-bit-rate (CBR)classisdesigned forcustomers whoneedreal­
timeaudioorvideoservices."
8113,"Theserviceissimilartothatprovided byadedicated line
suchasaTline."
8114,"VBRThevariable-bit-rate (VBR)classisdividedintotwosubclasses: real-time
(VBR-RT) andnon-real-time (VBR-NRT)."
8115,"VBR-RT isdesigned forthoseuserswho
needreal-time services(suchasvoiceandvideotransmission) andusecompression
techniques tocreateavariablebitrate.VBR-NRT isdesigned forthoseuserswhodo
notneedreal-time servicesbutusecompression techniques tocreateavariablebitrate."
8116,"ABRTheavailable-bit-rate (ABR)classdeliverscellsataminimum rate.Ifmore
networkcapacityisavailable, thisminimum ratecanbeexceeded."
8117,"ABRisparticularly
suitableforapplications thatarebursty."
8118,"UBRTheunspecified-bit-rate (UBR)classisabest-effort deliveryservicethatdoes
notguarantee anything."
8119,"Figure24.31showstherelationship ofdifferent classestothetotalcapacityofthe
network."
8120,"Figure24.31Relationship ofserviceclassestothetotalcapacityofthenetwork
Capacity
Time790CHAPTER 24CONGESTION CONTROL ANDQUAUTY OFSERVICE
User-Related Attributes
ATMdefinestwosetsofattributes."
8121,"User-related attributes arethoseattributes that
definehowfasttheuserwantstosenddata.Thesearenegotiated atthetimeofcontract
betweenauserandanetwork."
8122,"Thefollowing aresomeuser-related attributes:
SCRThesustained cellrate(SCR)istheaveragecellrateoveralongtimeinterval."
8123,"Theactualcellratemaybelowerorhigherthanthisvalue,buttheaverageshouldbe
equaltoorlessthantheSCR."
8124,"PCRThepeakcellrate(PCR)definesthesender'smaximum cellrate.Theuser's
cellratecansometimes reachthispeak,aslongastheSCRismaintained."
8125,"MCRTheminimum cellrate(MCR)definestheminimum cellrateacceptable tothe
sender.Forexample, iftheMCRis50,000,thenetworkmustguarantee thatthesender
cansendatleast50,000cellspersecond."
8126,"CVDT Thecellvariation delaytolerance (CVDT)isameasureofthevariation in
celltransmission times.Forexample, iftheCVDTis5ns,thismeansthatthediffer­
encebetweentheminimum andthemaximum delaysindelivering thecellsshouldnot
exceed5ns."
8127,"Network-RelatedAttributes
Thenetwork-related attributes arethosethatdefinecharacteristics ofthenetwork."
8128,"The
following aresomenetwork-related attributes:
CLRThecelllossratio(CLR)definesthefractionofcellslost(ordelivered solate
thattheyareconsidered lost)duringtransmission."
8129,"Forexample, ifthesendersends
100cellsandoneofthemislost,theCLRis
CLR=_1_=10-2
100
CTDThecelltransferdelay(CTD)istheaveragetimeneededforacelltotravel
fromsourcetodestination."
8130,"Themaximum CTDandtheminimum CTDarealsocon­
sideredattributes."
8131,"CDVThecelldelayvariation (CDV)isthedifference betweentheCTDmaximum
andtheCTDminimum."
8132,CERThecellerrorratio(CER)definesthefractionofthecellsdelivered inerror.
8133,"24.10RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets [...]refertothereference listattheendof
thetext.SECTION24.12 SUMMARY 791
Books
Congestion controlandQoSarediscussed inSections 5.3and5.5of[Tan03]andin
Chapter3of[Sta9S].EasyreadingaboutQoScanbefoundin[FH98].Thefulldiscus­
sionofQoSiscoveredin[BlaOO]."
8134,"24.11KEYTERMS
accessrate
additiveincrease
available bitrate(ABR)
averagedatarate
backward explicitcongestion notification
(BECN)
burstydata
chokepacket
closed-loop congestion control
committed burstsizeBe
committed information rate(CIR)
congestion
congestion avoidance
congestion control
constantbitrate(CBR)
delay
Differentiated Services (DSorDiffserv)
effective bandwidth
excessburstsizeBe
first-in,first-out(FIFO)queuing
forwardexplicitcongestion notification
(FECN)Integrated Services (IntServ)
jitter
leakybucket
load
maximum burstsize
multiplicative decrease
open-loop congestion control
Pathmessage
peakdatarate
per-hopbehavior (PHB)
priorityqueuing
qualityofservice(QoS)
reliability
Resource Reservation Protocol (RSVP)
Resvmessage
slowstart
throughput
tokenbucket
trafficshaping
unspecified bitrate(UBR)
variablebitrate(VBR)
weighted fairqueuing
24.12SUMMARY
oTheaveragedatarate,peakdatarate,maximum burstsize,andeffective bandwidth
arequalitative valuesthatdescribeadataflow."
8135,"oAdataflowcanhaveaconstantbitrate,avariablebitrate,ortrafficthatisbursty."
8136,"oCongestion controlreferstothemechanisms andtechniques tocontrolcongestion
andkeeptheloadbelowcapacity."
8137,oDelayandthroughput measuretheperformance ofanetwork.
8138,"oOpen-loop congestion controlprevents congestion; closed-loop congestion control
removes congestion.792CHAPTER 24CONGESTION CONTROL ANDQUALITY OFSERVICE
oTCPavoidscongestion throughtheuseoftwostrategies: thecombination ofslow
startandadditiveincrease, andmultiplicative decrease."
8139,"DFrameRelayavoidscongestion through theuseoftwostrategies: backward
explicitcongestion notification (BECN)andforwardexplicitcongestion notification
(FECN)."
8140,"DAflowcanbecharacterized byitsreliability, delay,jitter,andbandwidth."
8141,"oScheduling, trafficshaping, resource reservation, andadmission controlaretech-
niquestoimprovequalityofservice(QoS)."
8142,"DFIFOqueuing,priorityqueuing,andweighted fairqueuingarescheduling techniques."
8143,oLeakybucketandtokenbucketaretrafficshapingtechniques.
8144,DIntegrated Servicesisaflow-based QoSmodeldesigned forIP.
8145,"oTheResource Reservation Protocol (RSVP)isasignaling protocol thathelpsIP
createaflowandmakesaresource reservation."
8146,oDifferential Servicesisaclass-based QoSmodeldesigned forIP.
8147,"oAccessrate,committed burstsize,committed information rate,andexcessburst
sizeareattributes tocontroltrafficinFrameRelay."
8148,"oQualityofserviceinATMisbasedonserviceclasses,user-related attributes, and
network-related attributes."
8149,"24.13PRACTICE SET
ReviewQuestions
I.Howarecongestion controlandqualityofservicerelated?"
8150,2.Whatisatrafficdescriptor?
8151,3.Whatistherelationship betweentheaveragedatarateandthepeakdatarate?
8152,4.Whatisthedefinition ofburstydata?
8153,"5.Whatisthedifference between open-loop congestion controlandclosed-loop
congestion control?"
8154,6.Namethepoliciesthatcanpreventcongestion.
8155,7.Namethemechanisms thatcanalleviatecongestion.
8156,8.Whatdetermines thesenderwindowsizeinTCP?
8157,9.HowdoesFrameRelaycontrolcongestion?
8158,10.Whatattributes canbeusedtodescribe aflowofdata?
8159,11.Whatarefourgeneraltechniques toimprovequalityofservice?
8160,12.Whatistrafficshaping?
8161,Nametwomethods toshapetraffic.
8162,13.Whatisthemajordifference betweenIntegrated ServicesandDifferentiated Services?
8163,14.HowisResource Reservation Protocol relatedtoIntegrated Services?
8164,IS.Whatattributes areusedfortrafficcontrolinFrameRelay?
8165,"16.Inregardtoqualityofservice,howdouser-related attributes differfromnetwork­
relatedattributes inATM?SECTION 24.13PRACTICE SET 793
Exercises
17.TheaddressfieldofaFrameRelayframeis1011000000010 Ill.Isthereanycon­
gestionintheforwarddirection?"
8166,Isthereanycongestion inthebackward direction?
8167,18.AframegoesfromAtoB.Thereiscongestion inbothdirections.
8168,"IsthePECNbit
set?IstheBECNbitset?"
8169,"19.Inaleakybucketusedtocontrolliquidflow,howmanygallonsofliquidareleftinthe
bucketiftheoutputrateis5gal/min, thereisaninputburstof100gal/minfor12s,
andthereisnoinputfor48s?"
8170,"20.Anoutputinterface inaswitchisdesigned usingtheleaky bucket algorithm to
send8000bytes/s(tick).Ifthefollowing framesarereceived insequence, show the
framesthataresentduringeachsecond."
8171,"Frames1,2,3,4:4000byteseach
Frames5,6,7:3200byteseach
Frames8,9:400byteseach
Frames10,11,12:2000byteseach
21.Auserisconnected toaFrameRelaynetwork throughaT-lline.ThegrantedCIR
is1MbpswithaBeof5millionbits/5sandBeof1millionbits/5s."
8172,a.Whatistheaccessrate?
8173,b.Cantheusersenddataat1.6Mbps?
8174,"c.Cantheusersenddataat1Mbpsallthetime?Isitguaranteed thatframesare
neverdiscarded inthiscase?"
8175,"d.Cantheusersenddataat1.2Mbpsallthetime?Isitguaranteed thatframesare
neverdiscarded inthiscase?Iftheanswerisno,isitguaranteed thatframesare
discarded onlyifthereiscongestion?"
8176,e.Repeatthequestion inpart(d)foraconstant rateof1.4Mbps.
8177,"f.Whatisthemaximum dataratetheusercanuseallthetimewithoutworrying
abouttheframesbeingdiscarded?"
8178,"g.Iftheuserwantstotakearisk,whatisthemaximum dataratethatcan beused
withnochanceofdiscarding ifthereisnocongestion?"
8179,22.InExercise 21theusersendsdataat1.4Mbpsfor2 sandnothingforthenext3s.
8180,Isthereadangerofdiscarded dataifthereisnocongestion?
8181,"Isthereadangerof
discarded dataifthereiscongestion?"
8182,"23.InATM,ifeachcelltakes10Jlstoreachthedestination, whatistheCTD?"
8183,"24.AnATMnetworkhaslost5cellsoutof10,000and2areinerror.WhatistheCLR?"
8184,"WhatistheCER?Application Layer
Objectives
Theapplication layerenablestheuser,whetherhumanorsoftware, toaccessthenet­
work.Itprovides userinterfaces andsupportforservicessuchaselectronic mail,file
accessandtransfer,accesstosystemresources, surfingtheworldwideweb,andnet­
workmanagement."
8185,Theapplication layerisresponsible forproviding servicestotheuser.
8186,"Inthispart,webrieflydiscusssomeapplications thataredesigned asaclient/server
pairintheInternet."
8187,"Theclientsendsarequestforaservicetotheserver;theserver
responds totheclient."
8188,"Part6ofthebookisdevotedtotheapplication layer
andtheservicesprovided bythislayer."
8189,"Chapters
Thispartconsistsoffivechapters: Chapters 25to29."
8190,"Chapter25
Chapter25discusses theDomainNameSystem(DNS).DNSisaclient/server application
thatprovides nameservicesforotherapplications."
8191,"Itenablestheuseofapplication­
layeraddresses, suchasanemailaddress,insteadofnetworklayerlogicaladdresses."
8192,"Chapter26
Chapter26discusses threecommon applications intheInternet:remotelogin,electronic
mail,andfiletransfer.Aremoteloginapplication allowstheusertoremotely accessthe
resources ofasystem.Anelectronic mailapplication simulates thetasksofsnailmailata
muchhigherspeed.Afiletransferapplication transfersfilesbetweenremotesystems.Chapter27
Chapter27discusstheideasandissuesinthefamousworldwideweb(WWW).Italso
brieflydescribes theclient/server application program (HTTP)thatiscommonly used
toaccesstheweb."
8193,"Chapter28
Chapter28isdevotedtonetworkmanagement."
8194,"Wefirstdiscussthegeneralideabehind
network management."
8195,"Wethenintroduce theclient/server application, SNMP,thatis
usedforthispurposeintheInternet.Although networkmanagement canbeimplemented
ineverylayer,theInternethasdecidedtouseaclient/server application."
8196,"Chapter29
Chapter29discusses multimedia andasetofwiely-used application programs."
8197,"These
programs havegenerated newissuessuchastheneedfornewprotocols inotherlayers
tohandlethespecificproblems relatedtomultimedia."
8198,"Webrieflydiscusstheseissuesin
thischapter.CHAPTER 25
DomainNameSystem
Thereareseveralapplications intheapplication layeroftheInternetmodelthatfollow
theclient/server paradigm."
8199,"Theclient/server programs canbedividedintotwocategories:
thosethatcanbedirectlyusedbytheuser,suchase-mail,andthosethatsupportother
application programs."
8200,"TheDomainNameSystem(DNS)isasupporting program that
isusedbyotherprograms suchase-mail."
8201,"Figure25.1showsanexampleofhowaDNSclient/server programcansupportan
e-mailprogram tofindtheIP address ofane-mailrecipient."
8202,"Auserofane-mailpro­
grammayknowthee-mailaddressoftherecipient; however, theIPprotocolneedsthe
IPaddress.TheDNSclientprogram sendsarequesttoaDNSservertomapthee-mail
addresstothecorresponding IPaddress."
8203,"Figure25.1ExampleofusingtheDNSservice
UserSMTP:SimpleMailTransferProtocol (e-mail)
DNS:DomainNameSystem
aperson@wonderful.com
Application
layerwonderful."
8204,"com
200.200.200.5wonderfuI.com
200.200.200.5DNS
client
200.200.200.5
Transport layer
Toidentifyanentity,TCPIIPprotocols usetheIPaddress,whichuniquely identi­
fiestheconnection ofahosttotheInternet."
8205,"However, peopleprefertousenames
insteadofnumericaddresses."
8206,"Therefore, weneedasystemthatcanmapanametoan
addressoranaddresstoaname."
8207,"797798CHAPTER 25DOMAIN NAMESYSTEM
WhentheInternetwassmall,mapping wasdonebyusingahostfile.Thehostfile
hadonlytwocolumns: nameandaddress.Everyhostcouldstorethehostfileonits
diskandupdateitperiodically fromamasterhostfile.Whenaprogram orauser
wantedtomapanametoanaddress,thehostconsulted thehostfileandfoundthe
mapping."
8208,"Today,however, itisimpossible tohaveonesinglehostfiletorelateeveryaddress
withanameandviceversa.Thehostfilewouldbetoolargetostoreineveryhost.In
addition, itwouldbeimpossible toupdateallthehostfileseverytimetherewasa
change."
8209,"Onesolutionwouldbetostoretheentirehostfileinasinglecomputer andallow
accesstothiscentralized information toeverycomputer thatneedsmapping."
8210,"Butwe
knowthatthiswouldcreateahugeamountoftrafficontheInternet."
8211,"Anothersolution, theoneusedtoday,istodividethishugeamountofinformation
intosmallerpartsandstoreeachpartonadifferent computer."
8212,"Inthismethod,thehost
thatneedsmapping cancontacttheclosestcomputer holdingtheneededinformation."
8213,"ThismethodisusedbytheDomainNameSystem(DNS).Inthischapter,wefirst
discusstheconcepts andideasbehindtheDNS.Wethendescribe theDNSprotocol
itself."
8214,"25.1NAMESPACE
Tobeunambiguous, thenamesassigned tomachines mustbecarefully selectedfroma
namespacewithcomplete controloverthebindingbetweenthenamesandIPaddresses."
8215,"Inotherwords,thenamesmustbeuniquebecausetheaddresses areunique.Aname
spacethatmapseachaddresstoauniquenamecanbeorganized intwoways:fiator
hierarchical."
8216,"FlatNarneSpace
Inaflatnamespace,anameisassigned toanaddress."
8217,"Anameinthisspaceisa
sequence ofcharacters withoutstructure."
8218,"Thenamesmayormaynothaveacommon
section;iftheydo,ithasnomeaning."
8219,"Themaindisadvantage ofafiatnamespaceis
thatitcannotbeusedinalargesystemsuchastheInternetbecauseitmustbecentrally
controlled toavoidambiguity andduplication."
8220,"Hierarchical NarneSpace
Inahierarchical namespace,eachnameismadeofseveralparts.Thefirstpartcan
definethenatureoftheorganization, thesecondpartcandefinethenameofanorganiza­
tion,thethirdpartcandefinedepartments intheorganization, andsoon.Inthiscase,the
authority toassignandcontrolthenamespacescanbedecentralized."
8221,"Acentralauthority
canassignthepartofthenamethatdefinesthenatureoftheorganization andthename
oftheorganization."
8222,"Theresponsibility oftherestofthenamecanbegiventotheorgani­
zationitself.Theorganization canaddsuffixes(orprefixes) tothenametodefineitshost
orresources."
8223,"Themanagement oftheorganization neednotworrythattheprefixchosen
forahostistakenbyanotherorganization because, evenifpartofanaddressistheSECTION 25.2DOMAIN NAMESPACE 799
same,thewholeaddressisdifferent."
8224,"Forexample, assumetwocollegesandacompany
calloneoftheircomputers challenger."
8225,"Thefirstcollegeisgivenanamebythecentral
authority suchasjhda.edu, thesecondcollegeisgiventhenameberkeley.edu, andthe
company isgiventhenamesmart.com.Whentheseorganizations addthenamechal­
lengertothenametheyhavealreadybeengiven,theendresultisthreedistinguishable
names:challenger.jhda.edu, challenger.berkeley.edu, andchallenger.smart.com."
8226,"Thenames
areuniquewithouttheneedforassignment byacentralauthority."
8227,"Thecentralauthority
controlsonlypartofthename,notthewhole."
8228,"25.2DOMAIN NAMESPACE
Tohaveahierarchical namespace,adomainnamespacewasdesigned."
8229,"Inthisdesign
thenamesaredefinedinaninverted-tree structure withtherootatthetop.Thetreecan
haveonly128levels:level0(root)tolevel127(seeFigure25.2)."
8230,"Figure25.2Domainnamespace
Label
Eachnodeinthe treehasalabel,whichisastringwithamaximum of63characters."
8231,"Theroot label isanullstring(emptystring).DNSrequires thatchildren ofanode
(nodesthatbranchfromthesamenode)havedifferent labels,whichguarantees the
uniqueness ofthedomainnames."
8232,"DomainName
Eachnodeinthe treehasadomainname.Afulldomainnameisasequence oflabels
separated bydots(.).Thedomainnamesarealwaysreadfromthenodeuptotheroot."
8233,"Thelastlabelisthelabeloftheroot(null).Thismeansthatafulldomainnamealways
endsinanulllabel,whichmeansthelastcharacter isadotbecausethenullstringis
nothing.Figure25.3showssomedomainnames.800 CHAPTER 25DOMAIN NAMESYSTEM
Figure25.3Domainnamesandlabels
Root
~
~dU
FullyQualified Domain Name
Ifalabelisterminated byanullstring,itiscalledafullyqualified domainname
(FQDN)."
8234,"AnFQDNisadomainnamethatcontainsthefullnameofahost.Itcontains
alllabels,fromthemostspecifictothemostgeneral,thatuniquely definethenameof
thehost.Forexample, thedomainname
challenger.ate.tbda.edu."
8235,"istheFQDNofacomputer namedchallenger installed attheAdvanced Technology
Center(ATC)atDeAnzaCollege."
8236,"ADNSservercanonlymatchanFQDNtoan
address.Notethatthenamemustendwithanulllabel,butbecausenullmeansnothing,
thelabelendswithadot(.)."
8237,"Partially Qualified Domain Name
Ifalabelisnotterminated byanullstring,itiscalledapartially qualified domain
name(PQDN)."
8238,"APQDNstartsfromanode,butitdoesnotreachtheroot.Itisused
whenthenametoberesolvedbelongstothesamesiteastheclient.Heretheresolver
cansupplythemissingpart,calledthesuffix,tocreateanFQDN.Forexample, ifauser
atthejhda.edu."
8239,"sitewantstogettheIPaddressofthechallenger computer, heorshe
candefinethepartialname
challenger
TheDNSclientaddsthesuffixatc.jhda.edu."
8240,"beforepassingtheaddresstotheDNS
server."
8241,"TheDNSclientnormally holds alistofsuffixes.Thefollowing canbethelistof
suffixesatDeAnzaCollege.Thenullsuffixdefinesnothing.Thissuffixisaddedwhen
theuserdefinesanFQDN.SECTION 25.3DISTRIBUTION OFNAMESPACE 801
atc.fhda.edu
fhda.edu
null
Figure25.4showssomeFQDNsandPQDNs.
Figure25.4FQDNandPQDN
FQDN
challenger.atc.fhda.edu."
8242,cs.hnune.com.
8243,www.funny.int.
8244,"DomainPQDN
chal1engocMc.fhda.edll
cs.hmme
www
Adomainisasubtreeofthedomainnamespace.Thenameofthedomainisthedomain
nameofthenodeatthetopofthesubtree.Figure25.5showssomedomains."
8245,"Notethata
domainmayitselfbedividedintodomains(orsubdomains astheyaresometimes called)."
8246,"Figure25.5Domains
25.3DISTRIBUTION OFNAMESPACE
Theinformation contained inthedomainnamespacemustbestored.However, itis
veryinefficient andalsounreliable tohavejustonecomputer storesuchahugeamount
ofinformation."
8247,"Itisinefficient becauseresponding torequests fromallovertheworld
placesaheavyloadonthesystem.Itisnotunreliable becauseanyfailuremakesthedata
inaccessible.802 CHAPTER 25DOMAIN NAMESYSTEM
Hierarchy ofNameServers
Thesolutiontotheseproblems istodistribute theinformation amongmanycomputers
calledDNSservers.Onewaytodothisistodividethewholespaceintomanydomains
basedonthefirstlevel.Inotherwords,welettherootstandaloneandcreateasmany
domains (subtrees) astherearefirst-level nodes.Becauseadomaincreatedinthisway
couldbeverylarge,DNSallowsdomains tobedividedfurtherintosmallerdomains
(subdomains)."
8248,"Eachservercanberesponsible (authoritative) foreitheralargeora
smalldomain.Inotherwords,wehaveahierarchy ofserversinthesamewaythatwe
haveahierarchy ofnames(seeFigure25.6)."
8249,"Figure25.6Hierarchy ofnameservers
Rootserver
irwin.comcomserver usserver
~""\
==0.-...."
8250,"mcgraw.comeduserver arpaserver
Zone
Sincethecomplete domainnamehierarchy cannotbestoredonasingleserver,itis
dividedamongmanyservers.Whataserverisresponsible fororhasauthority overis
calledazone.Wecandefineazoneasacontiguous partoftheentiretree.Ifaserver
acceptsresponsibility foradomainanddoesnotdividethedomainintosmaller
domains, thedomainandthezonerefertothesamething.Theservermakesadatabase
calledazonefileandkeepsalltheinformation foreverynodeunderthatdomain.How­
ever,ifaserverdividesitsdomainintosubdomains anddelegates partofitsauthority to
otherservers,domainandzonerefertodifferent things.Theinformation aboutthe
nodesinthesubdomains isstoredintheserversatthelowerlevels,withtheoriginal
serverkeepingsomesortofreference totheselower-level servers.Ofcoursetheorigi­
nalserverdoesnotfreeitselffromresponsibility totally:Itstillhasazone,butthe
detailedinformation iskeptbythelower-level servers(seeFigure25.7)."
8251,"Aservercanalsodividepartofitsdomainanddelegateresponsibility butstillkeep
partofthedomainforitself.Inthiscase,itszoneismadeofdetailedinformation forthe
partofthedomainthatisnotdelegated andreferences tothosepartsthataredelegated.SECTION 25.4DNSINTHEINTERNET 803
Figure25.7Zonesanddomains
Root
,,,,
,,,,,,,,,,,,
I
I,
I,...-......,--- Zone,,."
8252,"......,l(f--- Domain
I,
..Zoneand""\.'-+--';-,-- domain.,
I
1,,--..._------.._--------
RootServer
Arootserverisaserverwhosezoneconsistsofthewholetree.Arootserverusually
doesnotstoreanyinformation aboutdomains butdelegates itsauthority tootherservers,
keepingreferences tothoseservers.Thereareseveralrootservers,eachcovering the
wholedomainnamespace.Theserversaredistributed allaroundtheworld."
8253,"Primary andSecondary Servers
DNSdefinestwotypesofservers:primaryandsecondary."
8254,"Aprimary serverisaserver
thatstoresafileaboutthezoneforwhichitisanauthority.Itisresponsible forcreating,
maintaining, andupdating thezonefile.Itstoresthezonefileonalocaldisk."
8255,"Asecondary serverisaserverthattransfers thecomplete information abouta
zonefromanotherserver(primary orsecondary) andstoresthefileonitslocaldisk.The
secondary serverneithercreatesnorupdatesthezonefiles.IfupdaJing isrequired, it
mustbedonebytheprimaryserver,whichsendstheupdatedversiontothesecondary."
8256,Theprimaryandsecondary serversarebothauthoritative forthezonestheyserve.
8257,"Theideaisnottoputthesecondary serveratalowerlevelofauthority buttocreate
redundancy forthedatasothatifoneserverfails,theothercancontinue servingclients."
8258,"Notealsothataservercanbeaprimaryserverforaspecificzoneandasecondary server
foranotherzone.Therefore, whenwerefertoaserverasaprimaryorsecondary server,
weshouldbecarefultowhichzonewerefer."
8259,"Aprimaryserverloadsallinformation fromthediskfile;thesecondary server
loadsallinformation fromtheprimaryserver.Whenthesecondary downloads
information fromtheprimary, itiscalledzonetransfer."
8260,"25.4DNSINTHEINTERNET
DNSisaprotocol thatcanbeusedindifferent platforms."
8261,"IntheInternet, thedomain
namespace(tree)isdividedintothreedifferent sections: genericdomains, country
domains, andtheinversedomain(seeFigure25.8).804CHAPTER 25DOMAIN NAMESYSTEM
Figure25.8DNSusedintheInternet
Inverse
domain
Generic DomainsGeneric
domainsCountry
domains
Thegenericdomains defineregistered hostsaccording totheirgenericbehavior."
8262,"Each
nodeinthetreedefinesadomain,whichisanindextothedomainnamespacedatabase
(seeFigure25.9)."
8263,"Figure25.9Genericdomains
Rootlevel
Indextoaddresses
GenericdomainsSECTION 25.4DNSINTHEINTERNET 805
Looking atthetree,weseethatthefirstlevelinthegenericdomains sectionallows
14possiblelabels.Theselabelsdescribetheorganization typesaslistedinTable25.1.
Table25.1Genericdomainlabels
Label Description
aero Airlinesandaerospace companies
biz Businesses orfirms(similarto""com"")
com Commercial organizations
coop Cooperativebusiness organizations
edu Educational institutions
gov Government institutions
info Information serviceproviders
int International organizations
mil Militarygroups
museum Museums andothernonprofit organizations
name Personal names(individuals)
net Network supportcenters
org Nonprofit organizations
pro Professional individual organizations
Country Domains
Thecountrydomains sectionusestwo-character countryabbreviations (e.g.,usfor
UnitedStates).Secondlabelscanbeorganizational, ortheycanbemorespecific,
national designations."
8264,"TheUnitedStates,forexample, usesstate abbreviations asa
subdivision ofus(e.g.,ca.us.)."
8265,"Figure25.10showsthecountrydomains section.Theaddressanza.cup.ca.us can
betranslated toDeAnzaCollegeinCupertino, California, intheUnitedStates."
8266,"InverseDomain
Theinversedomainisusedtomapanaddresstoaname.Thismayhappen,forexam­
ple,whenaserverhasreceivedarequestfromaclienttodoatask.Although theserver
hasafilethatcontains alistofauthorized clients,onlytheIPaddressoftheclient
(extracted fromthereceived IPpacket)islisted.Theserverasksitsresolvertosenda
querytotheDNSservertomapanaddresstoanametodetermine iftheclientisonthe
authorized list."
8267,"Thistypeofqueryiscalledaninverseorpointer(PTR)query.Tohandleapointer
query,theinversedomainisaddedtothedomainnamespacewiththefirst-level node
calledarpa(forhistorical reasons)."
8268,"Thesecondlevelisalsoonesinglenodenamed
in-addr(forinverseaddress)."
8269,TherestofthedomaindefinesIPaddresses.
8270,Theserversthathandletheinversedomainarealsohierarchical.
8271,"Thismeansthenetid
partoftheaddressshouldbeatahigherlevelthanthesubnetidpart,andthesubnetidpart806 CHAPTER 25DOMAIN NAMESYSTEM
Figure25.10 Countrydomains
Rootlevel
anza.cup.ca.us."
8272,"Indextoaddresses
Countrydomains
higherthanthehostidpart.Inthisway,aserverservingthewholesiteisatahigherlevel
thantheserversservingeachsubnet.Thisconfiguration makesthedomainlookinverted
whencompared toagenericorcountrydomain.Tofollowtheconvention ofreadingthe
domainlabelsfromthebottomtothetop,anIFaddresssuchas132.34.45.121 (aclassB
addresswithnetid132.34)isreadas121.45.34.132.in-addr."
8273,"arpa.SeeFigure25.11foran
illustration oftheinversedomainconfiguration."
8274,"25.5RESOLUTION
Mapping anametoanaddressoranaddresstoanameiscalledname-address resolution."
8275,"Resolver
DNSisdesigned asaclient/server application."
8276,"Ahostthatneedstomapanaddresstoa
nameoranametoanaddresscallsaDNSclientcalledaresolver."
8277,"Theresolveraccesses
theclosestDNSserverwithamapping request.Iftheserverhastheinformation, it
satisfiestheresolver; otherwise, iteitherreferstheresolvertootherserversorasksother
serverstoprovidetheinfonnation."
8278,"Aftertheresolverreceives themapping, itinterprets theresponse toseeifitisa
realresolution oranerror,andfinallydeliverstheresulttotheprocessthatrequested it.SECTION 25.5RESOLUTION 807
Figure25.11Inversedomain
Rootlevel
l21.45.34.132.in-addr.arpa."
8279,"Indextonames
Inversedomain
Mapping NamestoAddresses
Mostofthetime,theresolvergivesadomainnametotheserverandasksforthecorre­
sponding address.Inthiscase,theserverchecksthegenericdomains orthecountry
domains tofindthemapping."
8280,"Ifthedomainnameisfromthegenericdomains section,theresolverreceives a
domainnamesuchas""chal.atc.jhda.edu.""."
8281,"Thequeryissentbytheresolvertothelocal
DNSserverforresolution."
8282,"Ifthelocalservercannotresolvethequery,iteitherrefers
theresolvertootherserversorasksotherserversdirectly."
8283,"Ifthedomainnameisfromthecountrydomains section,theresolverreceives a
domainnamesuchas""ch.jhda.cu.ca.us.""."
8284,Theprocedure isthesame.
8285,"Mapping Addresses toNames
AclientcansendanIPaddresstoaservertobemappedtoadomainname.Asmentioned
before,thisiscalledaPTRquery.Toanswerqueriesofthiskind,DNSusestheinverse
domain.However, intherequest,theIPaddressisreversedandthetwolabelsin-addrand
arpaareappended tocreateadomainacceptable bytheinversedomainsection.For
example, iftheresolverreceivestheIFaddress132.34.45.121, theresolverfirstinverts
theaddressandthenaddsthetwolabelsbeforesending."
8286,"Thedomainnamesentis
""121.45.34.132.in-addr.arpa."" whichisreceivedbythelocalDNSandresolved.808CHAPTER 25DOMAIN NAMESYSTEM
Recursive Resolution
Theclient(resolver) canaskforarecursive answerfromanameserver.Thismeansthat
theresolverexpectstheservertosupplythefinalanswer.Iftheserveristheauthority
forthedomainname,itchecksitsdatabase andresponds.Iftheserverisnottheauthor­
ity,itsendstherequesttoanotherserver(theparentusually)andwaitsfortheresponse."
8287,"Iftheparentistheauthority, itresponds; otherwise, itsendsthequerytoyetanother
server.Whenthequeryisfinallyresolved, theresponse travelsbackuntilitfinally
reachestherequesting client.Thisiscalledrecursive resolution andisshownin
Figure25.12."
8288,"Figure25.12Recursive resolution
Rootserver&
~*' ed& g:m
~~
[I.&!l...~..- fhda.edu mcgraw.com
Client 10
Iterative Resolution
Iftheclientdoesnotaskforarecursive answer,themapping canbedoneiteratively."
8289,"If
theserverisanauthority forthename,itsendstheanswer.Ifitisnot,itreturns(tothe
client)theIPaddressoftheserverthatitthinkscanresolvethequery.Theclientis
responsible forrepeating thequerytothissecondserver.Ifthenewlyaddressed server
canresolvetheproblem, itanswersthequerywiththeIPaddress;otherwise, itreturns
theIPaddressofanewservertotheclient.Nowtheclientmustrepeatthequerytothe
thirdserver.Thisprocessiscallediterative resolution becausetheclientrepeatsthe
samequerytomultipleservers.InFigure25.13theclientqueriesfourserversbeforeit
getsananswerfromthemcgraw.com server."
8290,"Caching
Eachtimeaserverreceives aqueryforanamethatisnotinitsdomain, itneedsto
searchitsdatabaseforaserverIPaddress.Reduction ofthissearchtimewouldincrease
efficiency."
8291,DNShandlesthiswithamechanism calledcaching.
8292,"Whenaserverasksfor
amapping fromanotherserverandreceivestheresponse, itstoresthisinformation in
itscachememorybeforesendingittotheclient.Ifthesameoranotherclientasksfor
thesamemapping, itcancheckitscachememoryandsolvetheproblem."
8293,"However, toSECTION 25.6DNSMESSAGES 809
Figure25.13Iterative resolution
Rootserver
r-;::=5==&
6
Client.e._D."
8294,"I((_I:da.edU
2
7
8
10[Jeorn
~
informtheclientthattheresponse iscomingfromthecachememory andnotfroman
authoritative source,theservermarkstheresponse asunauthoritative."
8295,"Caching speedsupresolution, butitcanalsobeproblematic."
8296,"Ifaservercachesa
mapping foralongtime,itmaysendanoutdated mapping totheclient.Tocounterthis,
twotechniques areused.First,theauthoritative serveralwaysaddsinformation tothe
mapping calledtime-to-live (TTL).Itdefinesthetimeinsecondsthatthereceiving
servercancachetheinformation."
8297,"Afterthattime,themapping isinvalidandanyquery
mustbesentagaintotheauthoritative server.Second,DNSrequiresthateachserver
keepaTTLcounterforeachmapping itcaches.Thecachememory mustbesearched
periodically, andthosemappings withanexpiredTTLmustbepurged."
8298,"25.6DNSMESSAGES
DNShastwotypesofmessages: queryandresponse."
8299,Bothtypeshavethesameformat.
8300,"Thequerymessage consistsofaheaderandquestion records;theresponse message
consistsofaheader,question records,answerrecords,authoritative records,andaddi­
tionalrecords(seeFigure25.14)."
8301,"Header
Bothqueryandresponse messages havethesameheaderformatwithsomefieldsset
tozeroforthequerymessages."
8302,"Theheaderis12bytes,anditsformatisshownin
Figure25.15."
8303,Theidentification subfieldisusedbytheclienttomatchtheresponse withthequery.
8304,"Theclientusesadifferent identification numbereachtimeitsendsaquery.Theserver
duplicates thisnumberinthecorresponding response."
8305,"Theflagssubfieldisacollection of810CHAPTER 25DOMAIN NAMESYSTEM
Figure25.14Queryandresponse messages
,~r '_c-:;:f-'~ J
.--~~~-;_:-:;.'.-."
8306,":,,_' ~t':-';:-~Y--k-;.""_:.;~<
Question section "",,""""
a.Query
Figure25.15Headerformat.--~
c-- Header---- --'
...,:.7 Question section L7'
Z Answersection Z
Z Authoritative section Z
Z Additional section .<
b.Response
Identification Flags
Numberofquestion recordsNumberofanswerrecords
(allOsinquerymessage)
Numberofauthoritative records Numberofadditional records
(allOsinquerymessage) (allOsinquerymessage)
subfields thatdefinethetypeofthemessage, thetypeofanswerrequested, thetypeof
desiredresolution (recursive oriterative), andsoon.Thenumberofquestion recordssub­
fieldcontainsthenumberofqueriesinthequestion sectionofthemessage."
8307,"Thenumber
ofanswerrecordssubfieldcontainsthenumberofanswerrecordsintheanswersection
oftheresponse message."
8308,Itsvalueiszerointhequerymessage.
8309,"Thenumberofauthorita­
tiverecordssubfieldcontainsthenumberofauthoritative recordsintheauthoritative sec­
tionofaresponse message."
8310,Itsvalueiszerointhequerymessage.
8311,"Finally,thenumberof
additional recordssubfieldcontainsthenumberadditional recordsintheadditional sec­
tionofaresponse message."
8312,Itsvalueiszerointhequerymessage.
8313,"Question Section
Thisisasectionconsisting ofoneormorequestion records.Itispresentonbothquery
andresponse messages."
8314,Wewilldiscussthequestion recordsinafollowing section.
8315,"AnswerSection
Thisisasectionconsisting ofoneormoreresourcerecords.Itispresentonlyonresponse
messages."
8316,Thissectionincludes theanswerfromtheservertotheclient(resolver).
8317,"We
willdiscussresourcerecordsinafollowing section.SECTION 25.8REGISTRARS 811
Authoritative Section
Thisisasectionconsisting ofoneormoreresourcerecords.Itispresentonlyonresponse
messages."
8318,"Thissectiongivesinfonnation (domainname)aboutoneormoreauthoritative
serversforthequery."
8319,"Additional Information Section
Thisisasectionconsisting ofoneormoreresourcerecords.Itispresentonlyonresponse
messages."
8320,Thissectionprovides additional infonnation thatmayhelptheresolver.
8321,"For
example, aservermaygivethedomainnameofanauthoritative servertotheresolverin
theauthoritative section,andincludetheIPaddressofthesameauthoritative serverinthe
additional information section."
8322,"25.7TYPESOFRECORDS
AswesawinSection25.6,twotypesofrecordsareusedinDNS.Thequestion records
areusedinthequestion sectionofthequeryandresponse messages."
8323,"Theresource
recordsareusedintheanswer,authoritative, andadditional information sectionsofthe
response message."
8324,"Question Record
Aquestion recordisusedbytheclienttogetinformation fromaserver.Thiscontains
thedomainname."
8325,"-Resource Record
Eachdomainname(eachnodeonthetree)isassociated witharecordcalledtheresource
record.Theserverdatabase consistsofresource records.Resource recordsarealsowhat
isreturnedbytheservertotheclient."
8326,"25.8REGISTRARS
Howarenewdomains addedtoDNS?Thisisdonethrougharegistrar, acommercial
entityaccredited byICANN."
8327,"Aregistrar firstverifiesthattherequested domainnameis
uniqueandthenentersitintotheDNSdatabase."
8328,Afeeischarged.
8329,"Today,therearemanyregistrars; theirnamesandaddresses canbefoundat
http://www.intenic.net
Toregister,theorganization needstogivethenameofitsserverandtheIPaddress
oftheserver.Forexample, anewcommercial organization namedwonderful witha
servernamedwsandIPaddress200.200.200.5 needstogivethefollowing information
tooneoftheregistrars:
Domainname:WS.wonderful."
8330,"com
IPaddress:200.200.200.5812CHAPTER 25DOMAIN NAMESYSTEM
25.9DYNAMIC DOMAIN NAMESYSTEM (DDNS)
WhentheDNSwasdesigned, noonepredicted thattherewouldbesomanyaddress
changes."
8331,"InDNS,whenthereisachange,suchasaddinganewhost,removing ahost,
orchanging anIPaddress,thechangemustbemadetotheDNSmasterfile.Thesetypes
ofchangesinvolvealotofmanualupdating."
8332,"Thesizeoftoday'sInternetdoesnotallow
forthiskindofmanualoperation."
8333,TheDNSmasterfilemustbeupdateddynamically.
8334,"TheDynamic DomainName
System(DDNS)therefore wasdevisedtorespondtothisneed.InDDNS,whenabind­
ingbetweenanameandanaddressisdetermined, theinformation issent,usuallyby
DHCP(seeChapter21)toaprimaryDNSserver.Theprimaryserverupdatesthezone."
8335,Thesecondary serversarenotifiedeitheractivelyorpassively.
8336,"Inactivenotification, the
primaryserversendsamessagetothesecondary serversaboutthechangeinthezone,
whereasinpassivenotification, thesecondary serversperiodically checkforanychanges."
8337,"Ineithercase,afterbeingnotifiedaboutthechange,thesecondary requestsinformation
abouttheentirezone(zonetransfer)."
8338,"Toprovidesecurityandpreventunauthorized changesintheDNSrecords,DDNS
canuseanauthentication mechanism."
8339,"25.10ENCAPSULATION
DNScanuseeitherUDPorTCP.Inbothcasesthewell-known portusedbytheserver
isport53.UDPisusedwhenthesizeoftheresponse message islessthan512bytes
because mostUDPpackages havea512-byte packetsizelimit.Ifthesizeofthe
response messageismorethan512bytes,aTCPconnection isused.Inthatcase,oneof
twoscenarios canoccur:
oIftheresolverhaspriorknowledge thatthesizeoftheresponse message ismore
than512bytes,itusestheTCPconnection."
8340,"Forexample, ifasecondary name
server(actingasaclient)needsazonetransferfromaprimaryserver,itusesthe
TCPconnection because thesizeoftheinformation beingtransferred usually
exceeds512bytes."
8341,"oIftheresolverdoesnotknowthesizeoftheresponse message, itcanusetheUDP
port.However, ifthesizeoftheresponse message ismorethan512bytes,the
servertruncates themessage andturnsontheTCbit.Theresolvernowopensa
TCPconnection andrepeatstherequesttogetafullresponse fromtheserver."
8342,DNScanusetheservicesofUDPorTCPusingthewell-known port53.
8343,"25.11RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext.SECTION 25.13SUMMARY 813
Books
DNSisdiscussedin[AL98],Chapter17of[For06],Section9.1of[PD03],andSection7.1
of[Tan03]."
8344,"Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter."
8345,"owww.intenic.net/Information aboutregistrars
Dwww.ietf.org/rfc.html Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoDNS:
799,811.819,830,881,882,883,897,920,921, 1034,1035,1386,1480,1535,1536,1537,
1591,~1637,1664,
 1706,1112,1713.1982,2065,2137,2317,2535,2671
25.12KEYTERMS
caching
countrydomain
DNSserver
domaindomainname
domainnamespace
DomainNameSystem(DNS)
Dynamic DomainNameSystem(DDNS)
flatnamespace
fullyqualified domainname(FQDN)
genericdomain
hierarchical namespace
hostfile
inversedomain
iterativeresolution
labelnamespace
partiallyqualified domainname(PQDN)
primaryserver
querymessage
question record
recursive resolution
registrarresolver
resource record
response message
rootserver
secondary server
subdomain
suffix
zone
25.13SUMMARY
oTheDomainNameSystem(DNS)isaclient/server application thatidentifies each
hostontheInternetwithauniqueuser-friendly name."
8346,"DDNSorganizes thenamespaceinahierarchical structure todecentralize the
responsibilities involved innaming.814CHAPTER 25DOMAIN NAMESYSTEM
DDNScanbepicturedasaninvertedhierarchical treestructure withonerootnodeat
thetopandamaximum of128levels."
8347,DEachnodeinthetreehasadomainname.
8348,DAdomainisdefinedasanysubtreeofthedomainnamespace.
8349,"DThenamespaceinformation isdistributed amongDNSservers.Eachserverhas
jurisdiction overitszone."
8350,DArootserver'szoneistheentireDNStree.
8351,"DAprimaryservercreates,maintains, andupdatesinformation aboutitszone."
8352,DAsecondary servergetsitsinformation fromaprimaryserver.
8353,"DThedomainnamespaceisdividedintothreesections: genericdomains, country
domains, andinversedomain."
8354,"DThereare14genericdomains, eachspecifying anorganization type."
8355,DEachcountrydomainspecifies a country.
8356,"DTheinversedomainfindsadomainnameforagivenIPaddress.Thisiscalled
address-to-name resolution."
8357,"DNameservers,computers thatruntheDNSserverprogram, areorganized ina
hierarchy."
8358,"DTheDNSclient,calledaresolver,mapsanametoanaddressoranaddresstoaname."
8359,"DInrecursive resolution, the client sendsitsrequesttoaserverthateventually
returnsaresponse."
8360,"DIniterativeresolution, theclientmaysenditsrequesttomultiple serversbefore
gettingananswer."
8361,"DCachingisamethodwherebyananswertoaqueryisstoredinmemory(foralimited
time)foreasyaccesstofuturerequests."
8362,"DAfullyqualified domain name (FQDN)isadomainnameconsisting oflabelsbegin­
ningwiththehostandgoingbackthrougheachleveltotherootnode."
8363,"DApartiallyqualified domainname(PQDN) isadomainnamethatdoesnotinclude
allthelevelsbetweenthehostandtherootnode."
8364,DTherearetwotypesofDNSmessages: queriesandresponses.
8365,DTherearetwotypesofDNSrecords:questionrecordsandresource records.
8366,DDynamic DNS(DDNS) automatically updatestheDNSmasterfile.
8367,"DDNSusestheservicesofUDPformessages oflessthan512bytes;otherwise, TCP
isused."
8368,"25.14PRACTICE SET
ReviewQuestions
I.Whatisanadvantage ofahierarchical namespaceoveraflatnamespaceforasystem
thesizeoftheInternet?"
8369,2.Whatisthedifference betweenaprimaryserverandasecondary server?
8370,"3.Whatarethethreedomainsofthedomainnamespace?SECTION 25.14PRACTICE SET 815
4.Whatisthepurposeoftheinversedomain?"
8371,5.Howdoesrecursive resolution differfromiterativeresolution?
8372,6.WhatisanFQDN?
8373,7.WhatisaPQDN?
8374,8.Whatisazone?
8375,9.Howdoescachingincreasetheefficiency ofnameresolution?
8376,10.Whatarethetwomaincategories ofDNSmessages?
8377,11.WhywasthereaneedforDDNS?
8378,"Exercises
12.Determine whichofthefollowing isanFQDNandwhichisaPQDN."
8379,"a.xxx
b.xxx.yyy."
8380,"c.xxx.yyy.net
d.zzz.yyy.xxx.edu."
8381,13.Determine whichofthefollowing isanFQDNandwhichisaPQDN.
8382,a.mil.
8383,b.edu.
8384,"c.xxx.yyy.net
d.zzz.yyy.xxx.edu
14.Whichdomainisusedbyyoursystem,genericorcountry?"
8385,15.WhydoweneedaDNSsystemwhenwecandirectlyuseanIPaddress?
8386,"16.TofindtheIPaddressofadestination, weneedtheserviceofDNS.DNSneedsthe
serviceofUDPorTCP.UDPorTCPneedstheserviceofIP.IPneedsanIPdesti­
nationaddress.Isthisaviciouscyclehere?"
8387,"17.IfaDNSdomainnameisvoyager.fhda.edu, howmanylabelsareinvolved here?"
8388,Howmanylevelsofhierarchy?
8389,18.IsaPQDNnecessarily shorterthanthecorresponding FQDN?
8390,19.Adomainnameishello.customer.
8391,info.Isthisagenericdomainoracountrydomain?
8392,20.Doyouthinkarecursive resolution isnormally fasterthananinteractive one?
8393,Explain.
8394,"21.Canaquerymessage haveonequestion sectionbutthecorresponding response
message haveseveralanswersections?CHAPTER 26
RemoteLogging, Electronic Mail,
andFileTransfer
ThemaintaskoftheInternetistoprovideservicesforusers.Amongthemostpopular
applications areremotelogging,electronic mail,andfiletransfer.Wediscussthesethree
applications inthischapter;wediscussanotherpopularuseoftheInternet,accessing the
WorldWideWeb,inChapter27."
8395,"26.1REMOTE LOGGING
IntheInternet, usersmaywanttorunapplication programs ataremotesiteandcreate
resultsthatcanbetransferred totheirlocalsite.Forexample, studentsmaywanttocon­
necttotheiruniversity computer labfromtheirhometoaccessapplication programs for
doinghomework assignments orprojects."
8396,"Onewaytosatisfythatdemandandothersis
tocreateaclient/server application program foreachdesiredservice.Programs suchas
filetransferprograms (FTPs),e-mail(SMTP), andsoonarecurrently available."
8397,"How­
ever,itwouldbeimpossible towriteaspecificclient/server programforeachdemand."
8398,"Thebettersolutionisageneral-purp<Dse client/server program thatletsauseraccess
anyapplication program onaremotecomputer; inotherwords,allowtheusertologon
toaremotecomputer."
8399,"Afterloggingon,ausercanusetheservicesavailable onthe
remotecomputer andtransfertheresultsbacktothelocalcomputer."
8400,"TELNET
Inthissection,wediscusssuchaclient/server application program: TELNET."
8401,"TELNET
isanabbreviation forTErminaL NETwork."
8402,"ItisthestandardTCP/IPprotocolforvirtual
terminal serviceasproposed bytheInternational Organization forStandards (ISO)."
8403,"TELNET enablestheestablishment ofaconnection toaremotesysteminsuchaway
thatthelocalterminalappearstobeaterminalattheremotesystem."
8404,TELNET isageneral-purpose client/server application program.
8405,"817818CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Timesharing Environment
TELNET wasdesigned atatimewhenmostoperating systems, suchasUNIX,were
operating inatimesharing environment."
8406,"Insuchanenvironment, alargecomputer
supportsmultipleusers.Theinteraction betweenauserandthecomputer occursthrough
aterminal, whichisusuallyacombination ofkeyboard, monitor, andmouse.Evena
microcomputer cansimulateaterminalwithaterminalemulator."
8407,"Logging
Inatimesharing environment, usersarepartofthesystemwithsomerighttoaccess
resources."
8408,"Eachauthorized userhasanidentification andprobablY,a password."
8409,"Theuser
identification definestheuseraspartofthesystem.Toaccessthesystem,theuserlogs
intothesystemwithauseridorlog-inname.Thesystemalsoincludes password
checking topreventanunauthorized userfromaccessing th~resources."
8410,"Figure26.1
showstheloggingprocess."
8411,"Figure26.1Localandremotelog-in
Application programs
Operating
system/,,...,
/,,,
Tenninal
r-
a.Locallog-in
TELNET
\ I
\ I I
\ I I
'\1•••1
\ I /
\ II
\ IIApplication programs
I~;...~I ~~:;;server
Operating
system
InternetTELNET
client
Operating
system
Tenninal
r-~
b.Remotelog-inSECTION 26.1REMOTE LOGGING 819
Whenauserlogsintoalocaltimesharing system,itiscalledlocallog-in.Asauser
typesataterminalorataworkstation runningaterminalemulator, thekeystrokes are
accepted bytheterminaldriver.Theterminaldriverpassesthecharacters totheoperat­
ingsystem.Theoperating system,inturn,interprets thecombination ofcharacters and
invokesthedesiredapplication programorutility."
8412,"Whenauserwantstoaccessanapplication programorutilitylocatedonaremote
machine, sheperforms remotelog-in.HeretheTELNET clientandserverprograms
comeintouse.Theusersendsthekeystrokes totheterminal driver,wherethelocal
operating systemacceptsthecharacters butdoesnotinterpretthem.Thecharacters are
senttotheTELNET client,whichtransforms thecharacters toauniversal character set
callednetworkvirtualterminal (NVT)characters anddeliversthemtothelocalTCP/IP
protocolstack."
8413,"Thecommands ortext,inNVTform,travelthroughtheInternetandarriveatthe
TCP/IPstackattheremotemachine."
8414,"Herethecharacters aredelivered totheoperat­
ingsystemandpassedtotheTELNET server,whichchangesthecharacters tothe
corresponding characters understandable bytheremotecomputer."
8415,"However, thechar­
acterscannotbepasseddirectlytotheoperating systembecausetheremoteoperating
systemisnotdesigned toreceivecharacters fromaTELNET server:Itisdesigned to
receivecharacters fromaterminal driver.Thesolutionistoaddapieceofsoftware
calledapseudoterminal driverwhichpretends thatthecharacters arecomingfrom
aterminal."
8416,"Theoperating systemthenpassesthecharacters totheappropriate appli­
cationprogram."
8417,"Network VirtualTerminal
Themechanism toaccessaremotecomputer iscomplex."
8418,"Thisissobecauseeverycom­
puteranditsoperating systemacceptaspecialcombination ofcharacters astokens.For
example, theend-of-file tokeninacomputer runningtheDOSoperating systemis
Ctrl+z,whiletheUNIXoperating systemrecognizes Ctrl+d."
8419,"Wearedealingwithheterogeneous systems.Ifwewanttoaccessanyremotecom­
puterintheworld,wemustfirstknowwhattypeofcomputer wewillbeconnected to,
andwemustalsoinstallthespecificterminalemulator usedbythatcomputer."
8420,"TELNET
solvesthisproblembydefiningauniversal interface calledthenetwork virtualtermi­
nal(NVT)character set.Viathisinterface, theclientTELNET translates characters
(dataorcommands) thatcomefromthelocalterminalintoNVTformanddeliversthem
tothenetwork."
8421,"TheserverTELNET, ontheotherhand,translates dataandcommands
fromNVTformintotheformacceptable bytheremotecomputer."
8422,"Foranillustration of
thisconcept,seeFigure26.2.
NVTCharacter SetNVTusestwosetsofcharacters, one fordataandtheother
forcontrol.Bothare8-bitbytes.Fordata,NVTisan8-bitcharacter setinwhichthe
7lowest-order bitsarethesameasASCIIandthehighest-order bitisO.Tosendcontrol
characters betweencomputers (fromclienttoserverorviceversa),NVTusesan8-bit
character setinwhichthehighest-order bitissettol."
8423,"Table26.1listssomeofthecontrol characters andtheirmeanings.820 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Figure26.2ConceptofNVT
Terminalr,TELNET
client
InternetTELNET
server
Pseudoterminal
driver
Datacharacter
Table26.1SomeNVTcontrolcharactersControlcharacter
Character Decimal Binary Meaning
EOF 236 11101100 Endoffile
EOR 239 11101111 Endofrecord
SE 240 11110000 Suboption end
NOP 241 11110001 Nooperation
DM 242 11110010 Datamark
BRK 243 11110011 Break
IP 244 11110100 Interrupt process
AO 245 11110101 Abortoutput
AYT 246 11110110 Areyouthere?"
8424,"EC 247 11110111 Erasecharacter
EL 248 11111000 Eraseline
GA 249 11111001 Goahead
SB 250 11111010 Suboption begin
WILL 251 11111011 Agreement toenableoption
WONT 252 11111100 Refusaltoenableoption
DO 253 11111101 Approval tooptionrequest
DONT 254 11111110 Denialofoptionrequest
lAC 255 11111111 Interpret (thenextcharacter) ascontrol
Embedding
TELNET usesonlyoneTCPconnection."
8425,"Theserverusesthewell-known port23,and
theclientusesanephemeral port.Thesameconnection isusedforsendingbothdataandSECTION 26.1REMOTE LOGGING 821
controlcharacters."
8426,"TELNET accomplishes thisbyembedding thecontrolcharacters inthe
datastream.However, todistinguish datafromcontrolcharacters, eachsequence ofcon­
trolcharacters ispreceded byaspecialcontrolcharacter calledinterpret ascontrol(lAC)."
8427,"Forexample, imagineauserwantsaservertodisplayafile(filel)onaremoteserver."
8428,"Shecantype
catfilel
However, supposethenameofthefilehasbeenmistyped (fileainsteadoffilel).The
userusesthebackspace keytocorrectthissituation."
8429,"catjllea<backspace>l
However, inthedefaultimplementation ofTELNET, theusercannoteditlocally;the
editingisdoneattheremoteserver.Thebackspace character istranslated intotwo
remotecharacters (lACEC),whichareembedded inthedataandsenttotheremote
server.WhatissenttotheserverisshowninFigure26.3.
Figure26.3Anexampleofembedding
Typedattheremoteterminal
Options
TELNET letstheclientandservernegotiate optionsbeforeorduringtheuseoftheser­
vice.Optionsareextrafeaturesavailable toauserwithamoresophisticated terminal."
8430,"Userswithsimplerterminals canusedefaultfeatures.Somecontrolcharacters discussed
previously areusedtodefineoptions.Table26.2showssomecommon options."
8431,"Table26.2Options
Code Option Meaning
0Binary Interpret as8-bitbinarytransmission."
8432,1Echo Echothedatareceived ononesidetotheother.
8433,3Suppress goahead Suppress go-ahead signalsafterdata.
8434,5Status RequestthestatusofTELNET.
8435,6Timingmark Definethetimingmarks.
8436,24Terminal type Settheterminal type.
8437,32Terrninalspeed Settheterminal speed.
8438,"34Linemode Changetolinemode.822CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
OptionNegotiation Touseanyoftheoptionsmentioned intheprevious sectionfirst
requiresoptionnegotiation between theclientandtheserver.Fourcontrolcharacters
areusedforthispurpose; theseareshowninTable26.3.
Table26.3NVTcharacter setforoptionnegotiation
Character Decimal Binary Meaning
WILL 251 11111011 1.Offering toenable
2.Accepting arequesttoenable
WONT 252 11111100 1.Rejecting arequesttoenable
2.Offering todisable
3.Accepting arequesttodisable
DO 253 11111101 1.Approving anoffertoenable
2.Requesting toenable
DONT 254 11111110 1.Disapproving anoffertoenable
2.Approving anoffertodisable
3.Requesting todisable
Apartycanoffertoenableordisableanoptionifithastherighttodoso.The
offeringcanbeapproved ordisapproved bytheotherparty.Toofferenabling, theoffer­
ingpartysendstheWILLcommand, whichmeans""WillIenabletheoption?"" The
otherpartysendseithertheDOcommand, whichmeans""Pleasedo,""ortheDONT
command, whichmeans""Pleasedon't.""Toofferdisabling, theofferingpartysendsthe
WONTcommand, whichmeans""Iwon'tusethisoptionanymore.""Theanswermust
betheDONTcommand, whichmeans""Don'tuseitanymore.""
Apartycanrequestfromtheotherpartytheenabling orthedisabling ofanoption."
8439,"Torequestenabling, therequesting partysendstheDOcommand, whichmeans
""Pleasedoenablethe option."" TheotherpartysendseithertheWILLcommand, which
means""Iwill,""ortheWONTcommand, whichmeans""Iwon't.""Torequestdisabling,
therequesting partysendstheDONTcommand, whichmeans""Pleasedon'tusethis
optionanymore."" TheanswermustbetheWONTcommand, whichmeans""Iwon'tuse
itanymore.""
Example 26.1
Figure26.4showsanexampleofoptionnegotiation."
8440,"Inthisexample, theclientwantstheserverto
echoeachcharacter senttotheserver.Inotherwords,whenacharacter istypedattheuserkeyboard
terminal, itgoestotheserverandissentbacktothescreenoftheuserbeforebeingprocessed."
8441,"The
echooptionisenabledbytheserverbecauseitistheserverthatsendsthecharacters backtotheuser
tenninal."
8442,"Therefore, theclientshouldrequestfromtheservertheenabling oftheoptionusingDO."
8443,"Therequestconsistsofthreecharacters: lAC,DO,andECHO.Theserveracceptstherequest
andenablestheoption.Itinformstheclientbysendingthethree-character approval: lAC,WILL,
andECHO."
8444,Suboption Negotiation Someoptionsrequireadditional information.
8445,"Forexample,
todefinethetypeorspeedofaterminal, thenegotiation includesastringoranumberSECTION 26.1REMOTE LOGGING 823
Figure26.4Example 26.1:Echooption
ClientServer==cu:::u:::J~-
todefinethetypeorspeed.Ineithercase,thetwosuboption characters indicated
inTable26.4areneededforsuboption negotiation."
8446,"Table26.4NVTcharacter setforsuboption negotiation
Character Decimal Binary Meaning
SE 240 11110000 Suboption end
SB 250 11111010 Suboption begin
Example 26.2
Figure26.5showsanexample ofsuboption negotiation."
8447,"Inthisexample, theclientwantsto
negotiate thetypeoftheterminal."
8448,"Figure26.5Exampleofsuboption negotiation
Server==cu:::u:::J
E:::3-Iwillenabletheterminaloption1-------1 Terminal typeHWrLL~~f--------J""~1Client
r
Doenableterminaloption
~-----IIAC t~1 Terminal type1------1
Settheterminaltypeto""VT""
IrAC~[!J-~I Terminal typet[}!}~
ModeofOperation
MostTELNET implementations operateinoneofthreemodes:defaultmode,character
mode,orlinemode."
8449,"DefaultModeThedefaultmodeisusedifnoothermodesareinvokedthrough
optionnegotiation."
8450,"Inthismode,theechoingisdonebytheclient.Theusertypesa824CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
character, andtheclientechoesthecharacter onthescreen(orprinter)butdoesnot
sendituntilawholelineiscompleted."
8451,"Character ModeInthecharacter mode,eachcharacter typedissentbytheclientto
theserver.Theservernormally echoesthecharacter backtobedisplayed ontheclient
screen.Inthismodetheechoingofthecharacter canbedelayedifthetransmission
timeislong(suchasinasatelliteconnection)."
8452,"Italsocreatesoverhead (traffic)forthe
networkbecausethreeTCPsegments mustbesentforeachcharacter ofdata."
8453,"LineModeAnewmodehasbeenproposed tocompensate forthedeficiencies ofthe
defaultmodeandthecharacter mode.Inthismode,calledthelinemode,lineediting
(echoing, character erasing,lineerasing,andsoon)isdonebytheclient.Theclient
thensendsthewholelinetotheserver."
8454,"26.2ELECTRONIC MAIL
OneofthemostpopularInternetservicesiselectronic mail(e-mail)."
8455,"Thedesigners of
theInternetprobably neverimagined thepopularity ofthisapplication program."
8456,"Its
architecture consistsofseveralcomponents thatwediscussinthischapter."
8457,"Atthebeginning oftheInternet era,themessages sentbyelectronic mailwereshort
andconsisted oftextonly;theyletpeopleexchange quickmemos.Today,electronic
mailismuchmorecomplex."
8458,"Itallowsamessagetoincludetext,audio,andvideo.Italso
allowsonemessagetobesenttooneormorerecipients."
8459,"Inthischapter,wefirststudythegeneralarchitecture ofane-mailsystemincluding
thethreemaincomponents: useragent,message transferagent,andmessage access
agent.Wethendescribetheprotocols thatimplement thesecomponents."
8460,"Architecture
Toexplainthearchitecture ofe-mail,wegivefourscenarios."
8461,"Webeginwiththesimplest
situationand addcomplexity asweproceed.Thefourthscenarioisthemostcommon in
theexchange ofemail."
8462,"FirstScenario
Inthefirstscenario, thesenderandthereceiverofthee-mailareusers(orapplication
programs) onthesamesystem;theyaredirectlyconnected toasharedsystem.The
administrator hascreatedonemailboxforeachuserwherethereceived messages are
stored.Amailboxispartofalocalharddrive,aspecialfilewithpermission restrictions."
8463,"Onlytheownerofthemailboxhasaccesstoit.WhenAlice,auser,needstosenda
message toBob,anotheruser,Alicerunsauseragent(VA)program topreparethe
messageandstoreitinBob'smailbox."
8464,"Themessagehasthesenderandrecipient mail­
boxaddresses (namesoffiles).Bobcanretrieveandreadthecontentsofhismailboxat
hisconvenience, usingauseragent.Figure26.6showstheconcept."
8465,Thisissimilartothetraditional memoexchange betweenemployees inanoffice.
8466,"Thereisamailroom whereeachemployee hasamailboxwithhisorhernameonit.SECTION 26.2ELECTRONIC MAIL 825
Figure26.6Firstscenario inelectronic mail
VA:useragent
System
WhenAliceneedstosendamemotoBob,shewritesthememoandinsertsitinto
Bob'smailbox."
8467,"WhenBobcheckshismailbox, hefindsAlice'smemoandreadsit."
8468,"Whenthesenderandthereceiverofane-mailareonthesamesystem,
weneedonlytwouseragents."
8469,"SecondScenario
Inthesecondscenario, thesenderandthereceiverofthee-mailareusers(orapplication
programs) ontwodifferentsystems.The messageneedstobesentovertheInternet.Herewe
needuseragents(VAs)andmessagetransferagents(MTAs), asshowninFigure26.7.
Figure26.7Secondscenario inelectronic mail
VA:useragent
MTA:message transferagent
VAD
System
(mailserver)System
(mailserver)VAD
Aliceneedstouseauseragentprogram tosendhermessage tothesystemather
ownsite.Thesystem(sometimes calledthemailserver)athersiteusesaqueuetostore
messages waitingtobesent.Bobalsoneedsauseragentprogram toretrievemessages
storedinthemailboxofthesystemathissite.Themessage, however, needstobesent
throughtheInternetfromAlice'ssitetoBob'ssite.Heretwomessage transferagents
areneeded:one'clientandoneserver.Likemostclient/server programs ontheInternet,
theserverneedstorunallthetimebecauseitdoesnotknowwhenaclientwillaskfora826 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
connection."
8470,"Theclient,ontheotherhand,canbealertedbythesystemwhenthereisa
message inthequeuetobesent."
8471,"Whenthesenderandthereceiverofane-mailareondifferent systems,
weneedtwoVAsandapairofMTAs (clientandserver)."
8472,"ThirdScenario
Inthethirdscenario, Bob,asinthesecondscenario, isdirectlyconnected tohissystem."
8473,"Alice,however, isseparated fromhersystem.EitherAliceisconnected tothesystemvia
apoint-to-point WAN,suchasadial-upmodem,aDSL,oracablemodem;orsheiscon­
nectedtoaLANinanorganization thatusesonemailserverforhandling e-mails-all
usersneedtosendtheirmessages tothismailserver.Figure26.8showsthesituation."
8474,"Figure26.8Thirdscenario inelectronic mail
MTA
VA Alice client
[ja.[j,,,,
LAN
mWA;\\
,,,
II
a
I~~
System
(mailserver)VA:useragent
MTA:message transferagent
System
(mailserver)
Alicestill needs auseragenttopreparehermessage."
8475,"Shethenneedstosendthe
messagethroughtheLANorWAN.Thiscanbedonethrough apairofmessagetransfer
agents(clientandserver).Whenever Alicehasamessage tosend,shecallstheuser
agentwhich,intum,callstheMTAclient.TheMTAclientestablishes aconnection
withtheMTAserveronthesystem,whichisrunningallthetime.ThesystematAlice's
sitequeuesallmessages received."
8476,"ItthenusesanMTAclienttosendthemessages to
thesystematBob'ssite;thesystemreceivesthemessageandstoresitinBob'smailbox.SECTION 26.2ELECTRONIC MAIL 827
Athisconvenience, Bobuseshisuseragenttoretrievethemessage andreadsit.Note
thatweneedtwopairsofMTAclient/server programs."
8477,"Whenthesenderisconnected tothemailserverviaaLANoraWAN,
weneedtwoVAsandtwopaIrsofMTAs(clIentandserver)."
8478,"FourthScenario
Inthefourthandmostcommon scenario, Bobisalsoconnected tohismailserverbya
WANoraLAN.AfterthemessagehasarrivedatBob'smailserver,Bobneedstoretrieve
it.Here,weneedanothersetofclient/server agents,whichwecallmessage access
agents(MAAs)."
8479,BobusesanMAAclienttoretrievehismessages.
8480,"Theclientsendsa
requesttotheMAAserver,whichisrunningallthetime,andrequeststhetransferofthe
messages."
8481,"ThesituationisshowninFigure26.9.
Figure26.9Fourthscenario inelectronic mail
MTA
UA Alice client
DaD
\
\
\
LANOCW~'\
\
\
\
~~aUA:useragent
MTA:message transferagent
MAA:message accessagentMAA
client Bob UA
D&·D,,,
/lAhWAN
,,,
Therearetwoimportant pointshere.First,Bobcannotbypassthemailserverand
usetheMTAserverdirectly."
8482,"TouseMTAserverdirectly,Bobwouldneedtorunthe
MTAserverallthetimebecausehedoesnotknow when amessage willarrive.This
impliesthatBobmustkeephiscomputer onallthetimeifheisconnected tohissystem
throughaLAN.Ifheisconnected througha-WAN,hemustkeeptheconnection upall
thetime.Neitherofthesesituations isfeasibletoday.828 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Second, notethatBobneedsanotherpairofclient/server programs: message
accessprograms."
8483,"Thisissobecause an MTAclient/server programisapushprogram:
theclientpushesthemessagetotheserver.Bobneedsapullprogram."
8484,"Theclientneeds
topullthemessagefromtheserver.Figure26.10showsthedifference."
8485,"Figure26.10 Pushversuspullinelectronic email
MTA MTA
client serverDClientpushesmessagesD»
MAA MAA
client serverDClientpullsmessagesD0(
Whenbothsenderandreceiverareconnected tothemailserverviaaLANoraWAN,
weneedtwoVAs,twopairsofMTAs(clientandserver),andapairofMAAs
(clientandserver).Thisisthemostcommon situation today."
8486,"UserAgent
Thefirstcomponent ofanelectronic mailsystemistheuseragent(VA).Itprovides
servicetotheusertomaketheprocessofsendingandreceiving amessageeasier."
8487,"Services Provided byaUserAgent
Auseragentisasoftware package(program) thatcomposes, reads,repliesto,andfor­
wardsmessages."
8488,Italsohandlesmailboxes.
8489,"Figure26.11showstheservicesofatypical
useragent."
8490,"Figure26.11 Servicesofuseragent
Useragent
I
I I I I I
Composing Reading Replying to Forwarding Handling
messages messages messages messages mailboxes
Composing Messages Auseragenthelpstheusercompose thee-mailmessagetobe
sentout.Mostuseragentsprovideatemplate onthescreentobefilledinbytheuser."
8491,"Someevenhaveabuilt-ineditorthatcandospellchecking, grammar checking, andSECTION 26.2ELECTRONIC MAIL 829
othertasksexpected fromasophisticated wordprocessor."
8492,"Auser,ofcourse,couldalter­
nativelyusehisorherfavoritetexteditororwordprocessor tocreatethemessage and
importit,orcutandpasteit,intotheuseragenttemplate."
8493,"Reading Messages Theseconddutyoftheuseragentistoreadtheincoming mes­
sages.Whenauserinvokesauseragent,itfirstchecksthemailintheincoming mailbox."
8494,"Mostuseragentsshowaone-linesummary ofeachreceivedmail.Eache-mailcontains
thefollowing fields."
8495,1.Anumberfield.
8496,"2.Aflagfieldthatshowsthestatusofthemailsuchasnew,alreadyreadbutnot
repliedto,orreadandrepliedto."
8497,:).Thesizeofthemessage.
8498,4.Thesender.
8499,5.Theoptionalsubjectfield.
8500,"Replying toMessages Afterreadingamessage, ausercanusetheuseragenttoreply
toamessage."
8501,"Auseragentusuallyallowstheusertoreplytotheoriginalsenderorto
replytoallrecipients ofthemessage."
8502,"Thereplymessage maycontaintheoriginalmes­
sage(forquickreference) andthenewmessage."
8503,"Forwarding Messages Replying isdefinedassendingamessage tothesenderor
recipients ofthecopy.Forwarding isdefinedassendingthemessage toathirdparty.A
useragentallowsthereceivertoforwardthemessage, withorwithoutextracomments,
toathirdparty."
8504,"Handling Mailboxes
Auseragentnormally createstwomailboxes: aninboxandanoutbox.Eachboxisafile
withaspecialformatthatcanbehandledbytheuseragent.Theinboxkeepsallthereceived
e-mailsuntiltheyaredeletedbytheuser.Theoutboxkeepsallthesente-mailsuntil the
userdeletesthem.Mostuseragentstodayarecapableofcreatingcustomized mailboxes."
8505,"UserAgentTypes
Therearetwotypesofuseragents:command-driven andGUI-based."
8506,"Command-Driven Command-driven useragentsbelongtotheearlydaysofelectronic
mail.Theyarestillpresentastheunderlying useragentsinservers.Acommand-driven
useragentnormally acceptsaone-character command fromthekeyboard toperformits
task.Forexample, ausercantypethecharacter r,atthecommand prompt,toreplytothe
senderofthemessage, ortypethecharacter Rtoreplytothesenderandallrecipients."
8507,"Someexamples ofcommand-driven useragentsaremail,pine,andelm."
8508,"Someexamples ofcommand-driven useragentsaremail,pine,andelm."
8509,GUI-Based ModemuseragentsareGUI-based.
8510,"Theycontaingraphical-user inter­
face(GUI)components thatallowtheusertointeractwiththesoftware byusingboth
thekeyboard andthemouse.Theyhavegraphical components suchasicons,menu830 CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
bars,andwindows thatmaketheserviceseasytoaccess.Someexamples ofGUI-based
useragentsareEudora,Microsoft's Outlook, andNetscape."
8511,"Someexamples ofGUI·based useragentsareEudora,Outlook, andNetscape."
8512,"Sending Mail
Tosendmail,theuser,throughtheUA,createsmailthatlooksverysimilartopostal
mail.Ithasanenvelope andamessage (seeFigure26.12)."
8513,"Figure26.12Formatofane-mail
Behrollz Forouzan
DeAnzaCollege
Cupertino, CA96014
SophiaFegan
Com-Net
Cupertino, CA95014
a.PostalmailMailFrom:forouzan@deanza.eduv0-0RCPTTo:fegan@comnet.com ;:;
:>l::
~
From:Behrouz Forouzan..."
8514,"TQ:SophiaFeganv'0
Date:liS/OScd
tlJ
Subject:Network::c
tlJ
O/j
cd'""DearMs.Fegan: '""v
Wewanttoinformyouthat;;S
ournetworkisworkingpro- :>-.'0perlyafterthelastrepair.0
Il:I
Yourstruly,."
8515,"Behrouz Porouzan
b.Electromc mall
Envelope Theenvelope usuallycontainsthesenderandthereceiveraddresses."
8516,"Message Themessage containstheheaderandthebody.Theheaderofthemessage
definesthesender,thereceiver, thesubjectofthemessage, andsomeotherinformation
(suchasencoding type,asweseeshortly).Thebodyofthemessage containstheactual
information tobereadbytherecipient."
8517,"Receiving Mail
Theuseragentistriggered bytheuser(oratimer).Ifauserhasmail,theVAinforms
theuserwithanotice.Iftheuserisreadytoreadthemail.alist isdisplayed inwhich
eachlinecontains asummary oftheinformation aboutaparticular message inthemail­
box.Thesummary usuallyincludes thesendermailaddress,thesubject,andthetime
themailwassentorreceived."
8518,"Theusercanselectanyofthemessages anddisplayits
contentsonthescreen.SECTION 26.2ELECTRONIC MAIL 831
Addresses
Todelivermail,amailhandling systemmustuseanaddressing systemwithunique
addresses."
8519,"IntheInternet,theaddress consists oftwoparts:alocalpartandadomain
name,separated byan@sign(seeFigure26.13)."
8520,"Figure26.13E-mailaddress
Addressofthe
mailboxonthe
mailserver@
Thedomain
nameofthe
mailserver
LocalPartThelocalpartdefinesthenameofaspecialfile,calledtheusermailbox,
whereallthemailreceivedforauserisstoredforretrievalbythemessageaccessagent."
8521,"DomainNameThesecondpartoftheaddressisthedomainname.Anorganization
usuallyselectsoneormorehoststoreceiveandsende-mail;thehostsaresometimes
calledmailserversorexchangers."
8522,"Thedomainnameassigned toeachmailexchanger
eithercomesfromtheDNSdatabase orisalogicalname(forexample, thenameofthe
organization)."
8523,"MailingList
Electronic mailallowsonename,analias,torepresent severaldifferent e-mail
addresses; thisiscalledamailinglist.Everytimeamessageistobesent,thesystem
checkstherecipient's nameagainstthealiasdatabase; ifthereisamailinglistforthe
definedalias,separatemessages, oneforeachentryinthelist,mustbeprepared and
handedtotheMTA.Ifthereisnomailinglistforthealias,thenameitselfisthereceiving
addressandasinglemessageisdelivered tothemailtransferentity."
8524,"MIME
Electronic mailhasasimplestructure."
8525,"Itssimplicity, however, comesataprice.Itcan
sendmessages onlyinNVT7-bitASCIIformat.Inotherwords,ithassomelimita­
tions.Forexample, itcannotbeusedforlanguages thatarenotsupported by7-bit
ASCIIcharacters (suchasFrench,German, Hebrew,Russian, Chinese, andJapanese)."
8526,"Also,itcannotbeusedtosendbinaryfilesorvideooraudiodata."
8527,"Multipurpose InternetMailExtensions (MIME) isasupplementary protocolthat
allowsnon-ASCII datatobesentthroughe-mail.MIMEtransforms non-ASCII dataat
thesendersitetoNVTASCIIdataanddeliversthemtotheclientMTAtobesentthrough
theInternet.Themessageatthereceiving sideistransformed backtotheoriginaldata."
8528,"WecanthinkofMIMEasasetofsoftware functions thattransforms non-ASCII
data(streamofbits)toASCIIdataandviceversa,asshowninFigure26.14.832CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Figure26.14MIME
User
Non-ASCII code
7-bitNVTASCII
7-bitNVTASCIIUser
Non-ASCII code
7-bitNVTASCII
MIMEdefinesfiveheadersthatcanbeaddedtotheoriginale-mailheadersection
todefinethetransformation parameters:
1.MIME-Version
2.Content-Type
3.Content-Transfer-Encoding
4.Content-Id
5.Content-Description
Figure26.15showstheMIMEheaders."
8529,Wewilldescribe eachheaderindetail.
8530,"Figure26.15MIMEheader
E-mailheader
MIME-Version: 1.1
Content-Type: type/subtype
Content-Transfer-Encoding: encoding type MIMEheaders
Content-Id: messageid
Content-Description: textualexplanation ofnontextualcontents
MIME-Version ThisheaderdefinestheversionofMIMEused.Thecurrentversion
is1.1.SECTION 26.2ELECTRONIC MAIL 833
Content- TypeThisheaderdefinesthetypeofdatausedinthebodyofthemessage."
8531,"Thecontenttypeandthecontentsubtypeareseparated byaslash.Depending onthe
subtype,theheadermaycontainotherparameters."
8532,CDBtent-'I)pe:~Jsubtjl;pe;parameters> .
8533,"MIMEallowssevendifferent typesofdata.ThesearelistedinTable26.5.
Table26.5Datatypesandsubtypes inMIME
Type Subtype Description
TextPlain Unformatted
HTML HTML format(seeChapter27)
Mixed Bodycontainsorderedpartsofdifferent datatypes
Multipart Parallel Sameasabove,butnoorder
Digest Similartomixedsubtypes, butthedefaultismessage/
RFC822
Alternative Partsaredifferent versionsofthesamemessage
RFC822 Bodyisanencapsulated message
Message Partial Bodyisafragment ofabiggermessage
External-Body Bodyisareference toanothermessage
Image IPEG ImageisinIPEGformat
GIF ImageisinGIFformat
Video MPEG VideoisinMPEGformat
Audio Basic Single-channel encoding ofvoiceat8kHz
Application PostScript AdobePostScript
Octet-stream Generalbinarydata(8-bitbytes)
Content- Transfer-Encoding Thisheaderdefinesthemethodusedtoencodethe
messages intoOsandIsfortransport:
::,
i·:.~on~~Tta~~;ltne{)~iIlg: <tyti,~
.,o~, '
Thefivetypesofencoding methods arelistedinTable26.6.
Content-Id Thisheaderuniquely identifies thewholemessageinamultiple-message
environment.834CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Table26.6Content-trans fer-encoding
Type Description
7-bit NVTASCIIcharacters andshortlines
8-bit Non-ASCII characters andshortlines
Binary Non-ASCII characters withunlimited-length lines
Base-64 6-bitblocksofdataencodedinto8-bitASCIIcharacters
Quoted-printable Non-ASCII characters encoded asanequalssignfollowed
byanASCIIcode
Content-Description Thisheaderdefineswhetherthebodyisimage,audio,orvideo."
8534,"Content-Description: <description>
Message Transfer Agent:SMTP
Theactualmailtransferisdonethroughmessagetransferagents.Tosendmail,asystem
musthavetheclientMTA,andtoreceivemail,asystemmusthaveaserverMTA.The
formalprotocolthatdefinestheMTAclientandserverintheInternetiscalledtheSimple
MailTransfer Protocol (SMTP)."
8535,"Aswesaidbefore,twopairsofMTAclient/server
programs areusedinthemostcommon situation (fourthscenario)."
8536,"Figure26.16shows
therangeoftheSMTPprotocolinthisscenario."
8537,"Figure26.16SMTPrange
SMTP SMTP
13~~ceiver
,,,,
""LANorWAN,,,,sende~a._I~
,,,,
LANorWAN"",,,,
Mailserver Mailserver
SMTPisusedtwotimes,between thesenderandthesender's mailserverand
between thetwomailservers.Aswewillseeshortly,anotherprotocol isneeded
betweenthemailserverandthereceiver."
8538,SMTPsimplydefineshowcommands andresponses mustbesentbackandforth.
8539,Eachnetworkisfreetochooseasoftware packageforimplementation.
8540,"Wediscussthe
mechanism ofmailtransferbySMTPintheremainder ofthesection.SECTION 26.2ELECTRONIC MAIL 835
Commands andResponses
SMTPusescommands andresponses totransfermessages between anMTAclientand
anMTAserver(seeFigure26.17)."
8541,"Figure26.17Commands andresponses
Commands
MTA
client ResponsesMTA
server
Eachcommand orreplyisterminated byatwo-character (carriage returnandlinefeed)
end-of-line token."
8542,"Commands Commands aresentfromtheclienttotheserver.Thefonnatofacommand
isshowninFigure26.18.Itconsistsofakeyword followed byzeroormorearguments."
8543,SMTPdefines14commands.
8544,"Thefirstfivearemandatory; everyimplementation must
supportthesefivecommands."
8545,Thenextthreeareoftenusedandhighlyrecommended.
8546,"The
lastsixareseldomused."
8547,"Figure26.18 Commandformat
Keyword: argument(s)
Thecommands arelistedinTable26.7.
Table26.7Commands
Keyword Argument( s)
HELO Sender's hostname
MAILFROM Senderofthemessage
RCPTTO Intended recipient ofthemessage
DATA Bodyofthemail
QUIT
RSET
VRFY Nameofrecipient tobeverified
NOOP
TURN
EXPN Mailinglisttobeexpanded
HELP Command name836CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Table26.7Commands (continued)
Keyword Argument(s)
SENDFROM Intended recipient ofthemessage
SMOLFROM Intended recipient ofthemessage
SMALFROM Intended recipient ofthemessage
Responses Responses aresentfromtheservertotheclient.Aresponse isathree­
digitcodethatmaybefollowed byadditional textualinformation."
8548,"Table26.8listssome
oftheresponses."
8549,"Table26.8Responses
Code Description
PositiveCompletion Reply
211Systemstatusorhelpreply
214Helpmessage
220Serviceready
221Serviceclosingtransmission channel
250Requestcommand completed
251Usernotlocal;themessagewillbeforwarded
PositiveIntermediate Reply
354Startmailinput
Transient Negative Completion Reply
421Servicenotavailable
450Mailbox notavailable
451Command aborted:localerror
452Command aborted:insufficient storage
Permanent Negative Completion Reply
500Syntaxerror;unrecognized command
501Syntaxerrorinparameters orarguments
502Command notimplemented
503Badsequence ofcommands
504Command temporarily notimplemented
550Command isnotexecuted; mailboxunavailable
551Usernotlocal
552Requested actionaborted;exceeded storagelocation
553Requested actionnottaken;mailboxnamenotallowed
554Transaction failedSECTION 26.2ELECTRONIC MAIL 837
Asthetableshows,responses aredividedintofourcategories."
8550,"Theleftmost digitof
thecode(2,3,4,and5)definesthecategory."
8551,"MailTransfer Phases
Theprocessoftransferring amailmessage occursinthreephases:connection estab­
lishment, mailtransfer, andconnection termination."
8552,"Example 26.3
LetusseehowwecandirectlyuseSMTPtosendane-mailandsimulate thecommands
andresponses wedescribed inthissection.WeuseTELNET tologintoport25(theweIl­
knownportforSMTP).Wethenusethecommands directlytosendane-mail.Inthisexample,
forouzanb@adelphia.net issendingane-mailtohimself.ThefirstfewlinesshowTELNET try­
ingtoconnecttotheAdelphia mailserver."
8553,"Afterconnection, wecantypetheSMTPcommands andthenreceivetheresponses, as
shownbelow.Wehaveshownthecommands inblackandtheresponses incolor.Notethatwe
haveadded,forclarification, somecomment lines,designated bythe""=""signs.Theselinesare
notpartofthee-mailprocedure."
8554,"$teJnet mail.adelphia.netJ5~­
Trying68.168.78.100 •••,
Co~nectedro
~~.ad.elp~~~et\6~~1~~;~8!1~).,
======== c\lnnection EStablishment' --:===,==::::=
220mta13.auelphia.net SMTPserverready Fri,6Aug2004...-
HELO maP-.a9~lphia.net ..'
250mtal3:.adeJphia.net."
8555,"==-=::::===== MailTrallSfer
MAILFROM;."
8556,"forouzanb({fad~hia.nef ~
ZSOSender:<iorouzanb 0i;deJphia.net> :Ok
R~T
 TO~fOl'(1nzanb.@aa~pbia.net
.f50Recipie~t <forouzanbW'adelpbia.llet~ Ok
DATA
354OkSenddataendiQg~:with <CRLF>.<CRLF>
})~~lD: lt~ro~.~ ..' 'C< ...."
8557,"'
..TO:F'orotJzan::: :.."
8558,....
8559,"Tfiisisatest~age
to'showSMTPin action..."
8560,"~-==...:--== ConneetIDn Termination =:=:==-==:..:.-.- :::!:---::::::
,..250Message
 received~~atlelphia.net@mail.adelpllia.net
QUIT ,."
8561,"•'\0•.221mta:13~ade]phia.ntit SMTPservcJ;..closingcOl1l1ection
~ ,"", ,
COOnection closedbyforeignhost:."
8562,"Message AccessAgent:POPandIMAP
Thefirstandthesecondstagesofmaildelivery useSMTP.However, SMTPisnot
involved inthethirdstagebecauseSMTPisapushprotocol; itpushesthemessage from838CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
theclienttotheserver.Inotherwords,thedirection ofthebulk:data(messages) isfrom
theclienttotheserver.Ontheotherhand,thethirdstageneedsapullprotocol; theclient
mustpullmessages fromtheserver.Thedirection ofthebulkdataisfromtheserverto
theclient.Thethirdstageusesamessage accessagent."
8563,"Currently twomessageaccessprotocols areavailable: PostOfficeProtocol, version3
(POP3)andInternetMailAccessProtocol, version4(IMAP4)."
8564,"Figure26.19showsthe
positionofthesetwoprotocols inthemostcommon situation (fourthscenario)."
8565,"Figure26.19POP3andIMAP4
ISMTP
Alic~[I
sende~
........LANorWAN ............"
8566,"MailserverSMTPPOP3
IMAP4I
(]~~b~eiver
;
;
;
;
;;LANorWAN
;
;
;
;
Mailserver
POP3
PostOfficeProtocol, version3(POP3)issimpleandlimitedinfunctionality."
8567,"The
clientPOP3software isinstalled ontherecipient computer; theserverPOP3software
isinstalled onthemailserver."
8568,"Mailaccessstartswiththeclientwhentheuserneedstodownload e-mailfromthe
mailboxonthemailserver.Theclientopensaconnection totheserveronTCPport110."
8569,Itthensendsitsusernameandpassword toaccessthemailbox.
8570,"Theusercanthenlist
andretrievethemailmessages, onebyone.Figure26.20showsanexample ofdown­
loadingusingPOP3."
8571,"POP3hastwomodes:thedeletemodeandthekeepmode.Inthedeletemode,the
mailisdeletedfromthemailbox aftereachretrieval."
8572,"Inthekeepmode,themail
remainsinthemailboxafterretrieval."
8573,"Thedeletemodeisnormally usedwhentheuser
isworkingatherpermanent computer andcansaveandorganize thereceivedmailafter
readingorreplying."
8574,"Thekeepmodeisnormally usedwhentheuseraccesses hermail
awayfromherprimarycomputer (e.g.,alaptop).Themailisreadbutkeptinthesystem
forlaterretrievalandorganizing."
8575,"IMAP4
Anothermailaccessprotocol isInternet MailAccessProtocol, version4(IMAP4)."
8576,"IMAP4issimilartoPOP3,butithasmorefeatures; IMAP4ismorepowerful andmore
complex.SECTION 26.2ELECTRONIC MAIL 839
Figure26.20Theexchange ofcommands andresponses inPOP3
Mailserver Bob'scomputer
POP3isdeficient inseveralways.Itdoesnotallowtheusertoorganize hermailon
theserver;theusercannothavedifferent foldersontheserver.(Ofcourse,theusercan
createfoldersonherowncomputer.) Inaddition, POP3doesnotallowtheuserto
partiallycheckthecontentsofthemailbeforedownloading."
8577,"IMAP4provides thefollowing extrafunctions:
oAusercancheckthee-mailheaderpriortodownloading."
8578,"oAusercansearchthecontentsofthee-mailforaspecificstringofcharacters prior
todownloading."
8579,"oAusercanpartiallydownload e-mail.Thisisespecially usefulifbandwidth islimited
andthee-mailcontains multimedia withhighbandwidth requirements.oAusercancreate,delete,orrenamemailboxes onthemailserver."
8580,oAusercancreateahierarchy ofmailboxes inafolderfore-mailstorage.
8581,"Web-Based Mail
E-mailissuchacommon application thatsomewebsites todayprovidethisserviceto
anyonewhoaccessesthesite.Twocommon sitesareHotmailandYahoo.Theideaisvery
simple.MailtransferfromAlice'sbrowsertohermailserverisdonethroughHTTP(see
Chapter27).Thetransferofthemessage fromthesendingmailservertothereceiving840CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
mailserverisstillthroughSMTP.Finally,themessagefromthereceiving server(theWeb
server)toBob'sbrowserisdonethroughHTIP."
8582,Thelastphaseisveryinteresting.
8583,"InsteadofPOP3orIMAP4,HTTPisnormally
used.WhenBobneedstoretrievehise-mails,hesendsamessagetothewebsite(Hotmail,
forexample)."
8584,"ThewebsitesendsaformtobefilledinbyBob,whichincludesthelog-in
nameandthepassword.Ifthelog-innameandpassword match,thee-mailistransferred
fromtheWebservertoBob'sbrowserinHTMLformat."
8585,"26.3FILETRANSFER
Transferring filesfromonecomputer toanotherisoneofthemostcommon tasks
expected fromanetworking orinternetworking environment."
8586,"Asamatteroffact,the
greatestvolumeofdataexchange intheInternettodayisduetofiletransfer."
8587,"Inthis
section,wediscussonepopularprotocol involved intransferring files:FileTransfer
Protocol (FTP)."
8588,"FileTransfer Protocol (FTP)
FileTransfer Protocol (FTP)isthestandard mechanism provided byTCP/IPfor
copyingafilefromonehosttoanother.Although transferring filesfromonesystemto
anotherseemssimpleandstraightforward, someproblems mustbedealtwithfirst.For
example, two systems mayusedifferent filenameconventions."
8589,"Twosystemsmayhave
different waystorepresent textanddata.Twosystemsmayhavedifferent directory
structures."
8590,"Alltheseproblems havebeensolvedbyFTPinaverysimpleandelegant
approach."
8591,"FTPdiffersfromotherclient/server applications inthatitestablishes twoconnec­
tionsbetweenthehosts.Oneconnection isusedfordatatransfer,theotherforcontrol
information (commands andresponses)."
8592,"Separation ofcommands anddatatransfer
makesFTPmoreefficient."
8593,"Thecontrolconnection usesverysimplerulesofcommuni­
cation.Wcneedtotransferonlyalineofcommand oralineofresponse atatime.The
dataconnection, ontheotherhand,needsmorecomplex rulesduetothevarietyofdata
typestransferred."
8594,"However, thedifference incomplexity isattheFTPlevel,notTCP."
8595,"ForTCP,bothconnections aretreatedthesame."
8596,"FTPusestwowell-known TCPports:Port21isusedforthecontrolconnection,
andport20isusedforthedataconnection."
8597,FTPusestheservicesofTCP.ItneedstwoTCPconnections.
8598,"Thewell-known port21isusedforthe control connection
andthewell-known port20forthedataconnection."
8599,"Figure26.21showsthebasicmodelofFTP.Theclienthasthreecomponents: user
interface, clientcontrolprocess,andtheclientdatatransferprocess.Theserverhastwo
components: theservercontrolprocessandtheserverdatatransferprocess.Thecontrol
connection ismadebetweenthecontrolprocesses."
8600,"Thedataconnection ismadebetween
thedatatransferprocesses.SECTION 26.3FILETRANSFER 841
Figure26.21FTP
Usert
User
interface
Client Server
Thecontrolconnection remainsconnected duringtheentireinteractive FTPses­
sion.Thedataconnection isopenedandthenclosedforeachfiletransferred."
8601,"Itopens
eachtimecommands thatinvolvetransferring filesareused,anditcloseswhenthefile
istransferred."
8602,"Inotherwords,whenauserstartsanFTPsession,thecontrolconnection
opens.Whilethecontrolconnection isopen,thedataconnection canbeopenedand
closedmultipletimesifseveralfilesaretransferred."
8603,"Communication overControlConnection
FTPusesthesameapproach asSMTPtocommunicate acrossthecontrolconnection."
8604,"It
usesthe7-bitASCIIcharacter set(seeFigure26.22).Communication isachieved
throughcommands andresponses."
8605,"Thissimplemethodisadequate forthecontrolcon­
nectionbecause wesendonecommand (orresponse) atatime.Eachcommand or
response isonlyoneshortline,soweneednotworryaboutfileformatorfilestructure."
8606,"Eachlineisterminated withatwo-character (carriage returnandlinefeed)end-of-line
token."
8607,"Figure26.22Usingthecontrolconnection
Local
code
,"";,ConttO:( ,,
',;;:t't9C~~ ""'
ClientNVTASCII
Control
connectionLocal
code
'C6ntrol
""prt-icess
"" '
Server842CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Communication overDataConnection
Thepurposeofthedataconnection isdifferent fromthatofthecontrolconnection."
8608,"We
wanttotransferfilesthroughthedataconnection."
8609,"Filetransferoccursoverthedata
connection underthecontrolofthecommands sentoverthecontrolconnection."
8610,"How­
ever,weshouldremember thatfiletransferinFTPmeansoneofthreethings:
oAfileistobecopiedfromtheservertotheclient.Thisiscalledretrieving aft/e.It
isdoneunderthesupervision oftheRETRcommand,
oAfileistobecopiedfromtheclienttotheserver.Thisiscalledstoringaft/e.Itis
doneunderthesupervision oftheSTORcommand."
8611,"oAlistofdirectory orfilenamesistobesentfromtheservertotheclient.Thisis
doneunderthesupervision oftheLISTcommand."
8612,"NotethatFTPtreatsalistof
directory orfilenamesasafile.Itissentoverthedataconnection."
8613,"Theclientmustdefinethetypeoffiletobetransferred, thestructure ofthedata,
andthetransmission mode.Beforesendingthefilethroughthedataconnection, we
preparefortransmission throughthecontrolconnection."
8614,"Theheterogeneity problem is
resolved bydefining threeattributes ofcommunication: filetype,datastructure, and
transmission mode(seeFigure26.23)."
8615,"Figure26.23Usingthedataconnection
Localdatatype
andstructure
ClientFiletype,datastructure,
andtransmission mode
aredefinedbytheclient Localdatatype
andstructure
DatalTIlnSfe!.~----...r
process
Server
FileTypeFTPcantransferoneofthefollowing filetypesacrossthedataconnection:
anASCIIfile,EBCDIC file,orimagefile.TheASCIIfileisthedefaultformatfortrans­
ferringtextfiles.Eachcharacter isencoded using7-bitASCII.Thesendertransforms
thefilefromitsownrepresentation intoASCIIcharacters, andthereceivertransforms
theASCIIcharacters toitsownrepresentation."
8616,"Ifoneorbothendsoftheconnection
useEBCDIC encoding (thefileformatusedbyIBM),thefilecanbetransferred using
EBCDIC encoding."
8617,Theimagefileisthedefaultformatfortransferring binaryfiles.
8618,Thefileissentascontinuous streamsofbitswithoutanyinterpretation orencoding.
8619,Thisismostlyusedtotransferbinaryfilessuchascompiled programs.
8620,"DataStructure FTPcantransferafileacrossthedataconnection byusingoneofthe
following interpretations aboutthestructure ofthedata:filestructure, recordstructure,
andpagestructure."
8621,"Inthefilestructure format,thefileisacontinuous streamofbytes.In
therecordstructure, thefileisdividedintorecords.Thiscanbeusedonlywithtextfiles."
8622,"Inthepagestructure, thefileisdividedintopages,witheachpagehavingapagenumber
andapageheader.Thepagescanbestoredandaccessed randomly orsequentially.SECTION 26.3FILETRANSFER 843
Transmission ModeFTPcantransferafileacrossthedataconnection byusingone
ofthefollowing threetransmission modes:streammode,blockmode,andcompressed
mode.Thestreammodeisthedefaultmode.Dataaredelivered fromFTPtoTCPasa
continuous streamofbytes.TCPisresponsible forchopping dataintosegments of
appropriate size.Ifthedataaresimplyastreamofbytes(filestructure), noend-of-file
isneeded.End-of-file inthiscaseistheclosingofthedataconnection bythesender.If
thedataaredividedintorecords(recordstructure), eachrecordwillhaveaI-byteend­
of-record (EOR)character andtheendofthefilewillhaveaI-byteend-of-file (EOF)
character."
8623,"Inblockmode,datacanbedelivered fromFTPtoTCPinblocks.Inthis
case,eachblockispreceded bya3-byteheader.Thefirstbyteiscalledtheblock
descriptor; thenext2bytesdefinethesizeoftheblockinbytes.Inthecompressed
mode,ifthefileisbig,thedatacanbecompressed."
8624,"Thecompression methodnormally
usedisrun-length encoding."
8625,"Inthismethod,consecutive appearances ofadataunitare
replaced byoneoccurrence andthenumberofrepetitions."
8626,"Inatextfile,thisisusually
spaces(blanks)."
8627,"Inabinaryfile,nullcharacters areusuallycompressed."
8628,"Example 26.4
Thefollowing showsanactualFTPsessionforretrieving alistofitemsinadirectory."
8629,"Thecol­
oredlinesshowtheresponses fromtheservercontrolconnection; theblacklinesshowthecom­
mandssentbytheclient.Thelinesinwhitewithablackbackground showdatatransfer."
8630,"$ftpvoyager.deanza.tbda.edu
Connected tovoyager.deanza.tbda.edu."
8631,"220(vsFTPd 1.2.1)
530PleaseloginwithUSERandPASS."
8632,"Name(voyager.deanza.tbda.edu:forouzan): forouzan
331Pleasespecifythepassword."
8633,"Password:
230Loginsuccessful."
8634,RemotesystemtypeisUNIX.
8635,Usingbinarymodetotransferfiles.
8636,"ftp>Isreports
227Entering PassiveMode(153,18,17,11,238,169)
150Herecomesthedirectory listing."
8637,"drwxr-xr-x 23027 411 4096Sep242002business
drwxr-xr-x 23027 411 4096Sep242002personal
drwxr-xr-x 23027 411 4096Sep242002school
226Directory sendOK."
8638,"ftp>quit
221Goodbye."
8639,"1.Afterthecontrolconnection iscreated,theFIPserversendsthe220(serviceready)response
onthecontrolconnection."
8640,2.Theclientsendsitsname.
8641,"3.Theserverresponds with331(usernameisOK,password isrequired).844CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
4.Theclientsendsthepassword (notshown)."
8642,5.Theserverresponds with230(userlog-inisOK).
8643,"6.Theclientsendsthelistcommand Osreports)tofindthelistoffilesonthedirectory named
report."
8644,7.Nowtheserverresponds with150andopensthedataconnection.
8645,8.Theserverthensendsthelistofthefilesordirectories (asafile)onthedataconnection.
8646,"Whenthewholelist(file)issent,theserverresponds with226(closingdataconnection)
overthecontrolconnection."
8647,"9.Theclientnowhastwochoices.ItcanusetheQUITcommand torequesttheclosingofthe
controlconnection, oritcansendanothercommand tostartanotheractivity(andeventually
openanotherdataconnection)."
8648,"Inourexample, theclientsendsaQUITcommand."
8649,"10.Afterreceiving theQUITcommand, theserverresponds with221(serviceclosing)andthen
closesthecontrolconnection."
8650,"Anonymous FTP
TouseFfP,auserneedsanaccount(username)andapassword ontheremoteserver."
8651,"Somesiteshaveasetoffilesavailable forpublicaccess,toenableanonymous FTP.To
accessthesefiles,auserdoesnotneedtohaveanaccountorpassword."
8652,"Instead,theuser
canuseanonymous astheusernameandguestasthepassword."
8653,"Useraccesstothesystemisverylimited.Somesitesallowanonymous usersonly
asubsetofcommands."
8654,"Forexample, mostsitesallowtheusertocopysomefiles,butdo
notallownavigation throughthedirectories."
8655,"Example 26.5
Weshowanexample ofanonymous FTP.Weassumethatsomepublicdataareavailable at
intemic.net."
8656,"$ftpintemic.net
Connected tointernic.net
220Serverready
Name:anonymous
331GuestloginOK,send""guest"".as password'
.Password~guest .."
8657,.
8658,"-ftp>pwd""
257'I'iscurrentdirectory
jip>1s
:200-0K
150Opening ASCIImode
bin
..."
8659,"ttp>close
221Goodbye
ftp>quitSECTION 26.5KEYTERMS 845
26.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext."
8660,"Books
Remoteloggingisdiscussed inChapter 18of[For06]andChapter26of[Ste94]."
8661,"Electronic mailisdiscussed inChapter20of[For06],Section9.2of[PD03],Chapter32
of[Com04], Section7.2of[Tan03], andChapter28of[Ste94].FTPisdiscussed in
Chapter19of[For06],Chapter27of[Ste94],andChapter34of[Com04]."
8662,"Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter."
8663,"owww.ietf.org/rfc.htrnl Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoTELNET:
.~.:131~3~0,
393:i;4itj;'~~$.:,4~2;i·~,~4~S~$13f:529,,;~~2, ~~S;~&6;.:$99;i~6~~.b79,7()t,'<7{)2, 103""""
128~1Q4,:78~}g~8,~~4;~5;~j.&4~bas~ i~~~;;;."
8664,".,."".',.:"".....'....,..,,,
"","" ~~~ ~, ~,,~,,~--:~-/,', 0-',-,','~~ ~',:,""o'Y' ~o~,~'oo; ;
Thefollowing RFCsarerelatedtoSMTP,POP,andIMAP:
'/196/221, 224,~18"".~;ij.::5$:sl;1$( '~2~;7~(1;!f)6~ 82i;9j4~974;t041; 1081"" lO~2;::1~Z5;
'1.400' ;f.4~6:·:14:26.:1£it2~;:f{j5'2;: '"",<;l*i(~i:',>f7'l.5:i'¥34' '174iY 'r'~J:;j/'}67: lS6~r 1810·~();:tS':;'
':2~6:201t~;""~~~:::~~:11r2~SO:
 '2'f~2~;2OC~~';1~~:f~l~~i:~3$9::~~~~g~'~Q;:' ,""'';.;,'.""',
Thefollowing RFCsarerelatedtoFTP:
..114;,133;i4j~ 16.3.,:rii:.'~~~ •.2~~.Z4i;;zS~,25~~~;~~t
 i~~h~,81~,2~l.~54:~85~41i:;414,Ai~, ;'
··430··4~;~:448;·:463;'if.~~:~18:':1J:~6:505~°00'5'S4Z~~3;~24,630:61iO;'69t·765,·91j··9S~······ ;""o:'}(;3k
 t1:S§~;'?~~8~~~~1~::;.J;;~1;;'/ ;,;:~;.~.,.~;•.;~.:·;:;·t:;;;..';;;;<';'>:."
8665,","",.'...;..~
DNSisdiscussed in[AL98],chapter17of[For06], section9.1of[PD03],and
section7.1of[Tan03]."
8666,"26.5KEYTERMS
alias
anonymous FTP
ASCIIfile
blockmode
bodycharacter mode
compressed mode
controlcharacter
controlconnection
dataconnection846CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
defaultmode
domainname
envelope
filestructure
FileTransfer Protocol (FTP)
header
imagefile
InternetMailAccessProtocol, version4
(IMAP4)
linemode
locallog-in
localpart
message accessagent(MAA)
message transferagent(MTA)Multipurpose InternetMailExtensions
(MIME)
networkvirtualterminal (NVT)
optionnegotiation
pagestructure
PostOfficeProtocol, version3(POP3)
recordstructure
remotelog-in
SimpleMailTransferProtocol (SMTP)
streammode
suboption negotiation
terminal network(TELNET)
timesharing
useragent(VA)
26.6SUMMARY
oTELNET isaclient/server application thatallowsausertologontoaremote
machine, givingtheuseraccesstotheremotesystem."
8667,"oTELNET usesthenetworkvirtualterminal (NVT)systemtoencodecharacters on
thelocalsystem.Ontheservermachine, NVTdecodesthecharacters toaform
acceptable totheremotemachine."
8668,oNVTusesasetofcharacters fordataandasetofcharacters forcontrol.
8669,"oInTELNET, controlcharacters areembedded inthedatastreamandpreceded by
theinterpret ascontrol(lAC)controlcharacter."
8670,DOptionsarefeaturesthatenhancetheTELNET process.
8671,"oTELNET allowsnegotiation tosettransferconditions betweentheclientandserver
beforeandduringtheuseoftheservice."
8672,"DATELNET implementation operatesinthedefault,character, orlinemode."
8673,"1.Inthedefaultmode,theclientsendsonelineatatimetotheserver."
8674,"2.Inthecharacter mode,theclientsendsonecharacter atatimetotheserver."
8675,"3.Inthelinemode,theclientsendsonelineatatimetotheserver."
8676,"DSeveralprograms, including SMTP,POP3,andIMAP4,areusedintheInternetto
provideelectronic mailservices."
8677,"DInelectronic mail,theVAprepares themessage, createstheenvelope, andputsthe
message intheenvelope."
8678,"DInelectronic mail,themailaddressconsistsoftwoparts:alocalpart(usermailbox)
andadomainname.Theformislocalpart@domainname."
8679,"oInelectronic mail,Multipurpose InternetMailExtension (MIME)allowsthetransfer
ofmultimedia messages."
8680,"oInelectronic mail,theMTAtransfersthemailacrosstheInternet,aLAN,oraWAN.SECTION 26.7PRACTICE SET 847
oSMTPusescommands andresponses totransfermessages betweenanMTAclient
andanMTAserver."
8681,"oThestepsintransferring amailmessage are
1.Connection establishment·
2.Mailtransfer
3.Connection termination
oPostOfficeProtocol, version3(POP3)andInternetMailAccessProtocol, version4
(IMAP4) areprotocols usedforpullingmessages fromamailserver."
8682,"oOneoftheprograms usedforfiletransferintheInternetisFileTransfer Protocol
(FTP)."
8683,"oFTPrequirestwoconnections fordatatransfer: acontrolconnection and adata
connection."
8684,"oFTPemploys NVTASCIIforcommunication between dissimilar systems.oPriortotheactualtransferoffiles,thefiletype,datastructure, andtransmission
modearedefinedbythe client throughthecontrolconnection."
8685,oResponses aresentfromtheservertotheclientduringconnection establishment.
8686,"oTherearethreetypesoffiletransfer:
1.Afileiscopiedfromtheservertotheclient."
8687,2.Afileiscopiedfromtheclienttotheserver.
8688,3.Alistofdirectories orfilenamesissentfromtheservertotheclient.
8689,"oAnonymous FTPprovides amethodforthegeneralpublictoaccessfilesonremote
sites."
8690,"26.7PRACTICE SET
ReviewQuestions
1.Whatisthedifference betweenlocalandremotelog-ininTELNET?"
8691,2.Howarecontrolanddatacharacters distinguished inNVT?
8692,3.Howareoptionsnegotiated inTELNET?
8693,4.Describe theaddressing systemusedbySMTP.
8694,"5.Inelectronic mail,whatarethetasksofauseragent?"
8695,"6.Inelectronic mail,whatisMIME?"
8696,7.WhydoweneedPOP3orIMAP4forelectronic mail?
8697,8.WhatisthepurposeofFTP?
8698,9.Describe thefunctions ofthetwoFTPconnections.
8699,10.WhatkindsoffiletypescanFTPtransfer?
8700,11.WhatarethethreeFTPtransmission modes?
8701,12.Howdoesstoringafiledifferfromretrieving afile?
8702,"13.Whatisanonymous FTP?848CHAPTER 26REMOTE LOGGING, ELECTRONIC MAIL,ANDFILETRANSFER
Exercises
14.Showthesequence ofbitssentfromaclientTELNET forthebinarytransmission
of11110011 00111100 11111111."
8703,"15.IfTELNET isusingthecharacter mode,howmanycharacters aresentbackand
forthbetween theclientandservertocopyafilenamedfile1toanotherfilenamed
file2usingthecommand cpfile1file2?"
8704,"16.Whatis theminimum numberofbitssentattheTCPleveltoaccomplish thetask
inExercise IS?"
8705,"17.Whatistheminimum numberofbitssentatthedatalinklayerlevel(usingEthernet)
toaccomplish thetaskinExercise 15?"
8706,18.WhatistheratiooftheusefulbitstothetotalbitsinExercise 17?
8707,"19.Interpret thefollowing sequences ofcharacters (inhexadecimal) received bya
TELNET clientorserver."
8708,"a.FFFB01
b.FFFEOI
c.FFF4
d.FFF9
20.Asendersendsunformatted text.ShowtheMIMEheader."
8709,21.AsendersendsaIPEGmessage.
8710,ShowtheMIMEheader.
8711,"22.Whyisaconnection establishment formailtransferneededifTCPhasalready
established aconnection?"
8712,"23.Whyshouldtherebelimitations onanonymous FTP?Whatcouldanunscrupulous
userdo?"
8713,24.ExplainwhyFTPdoesnothaveamessage format.
8714,"Research Activities
25.Showthesequence ofcharacters exchanged between theTELNET clientandthe
servertoswitchfromthedefaultmodetothecharacter mode."
8715,"26.Showthesequence ofcharacters exchanged between theTELNET clientandthe
servertoswitchfromthedefaultmodetolinemode."
8716,"27.InSMTP,showtheconnection establishment phasefromaaa@xxx.com to
bbb@yyy.com."
8717,"28.InSMTP,showthemessage transferphasefromaaa@xxx.com tobbb@yyy.com."
8718,"Themessageis""Goodmorning myfriend.""
29.InSMTP,showtheconnection termination phasefromaaa@xxx.com to
bbb@yyy.com."
8719,"30.Whatdoyouthinkwouldhappenifthecontrolconnection wereaccidentally severed
duringanFTPtransfer?SECTION 26.7PRACTICE SET 849
31.Findtheextended optionsproposed forTELNET."
8720,"32.Anotherlog-inprotocoliscalledRlogin.Findsomeinformation aboutRloginand
compare itwithTELNET."
8721,"33.Amoresecurelog-inprotocolinUNIXiscalledSecureShell(SSH).Findsome
information aboutthisprotocol.CHAPTER 27
WWWandHTTP
TheWorldWideWeb(WWW) isarepository ofinformation linkedtogether from
pointsallovertheworld.TheWWWhasauniquecombination offlexibility, portability,
anduser-friendly featuresthatdistinguish itfromotherservicesprovided bytheInternet."
8722,"TheWWWprojectwasinitiatedbyCERN(European Laboratory forParticlePhysics)
tocreateasystemtohandledistributed resources necessary forscientific research."
8723,"In
thischapterwefirstdiscussissuesrelatedtotheWeb.Wethendiscussaprotocol,
HTTP,thatisusedtoretrieveinformation fromtheWeb."
8724,"27.1ARCHITECTURE
TheWWWtodayisadistributed clientJserver service,inwhichaclientusingabrowser
canaccessaserviceusingaserver.However, theserviceprovided isdistributed over
manylocations calledsites,asshowninFigure27.1.
Figure27.1Architecture ofWWW
Client
WebpageASiteA-DSiteB-
851852CHAPTER 27WWWANDHTTP
Eachsiteholdsoneormoredocuments, referredtoasWebpages.EachWebpagecan
containalinktootherpagesinthesamesiteoratothersites.Thepagescanberetrieved
andviewedbyusingbrowsers."
8725,"LetusgothroughthescenarioshowninFigure27.1.The
clientneedstoseesomeinformation thatitknowsbelongstositeA.Itsendsarequest
throughitsbrowser, aprogram thatisdesigned tofetchWebdocuments."
8726,"Therequest,
amongotherinformation, includestheaddressofthesiteandtheWebpage,calledthe
URL,whichwewilldiscussshortly.TheserveratsiteAfindsthedocument andsendsit
totheclient.Whentheuserviewsthedocument, shefindssomereferences tootherdocu­
ments,including aWebpageatsiteB.Thereference hastheURLforthenewsite.The
userisalsointerested inseeingthisdocument."
8727,"Theclientsendsanotherrequesttothenew
site,andthenewpageisretrieved."
8728,"Client(Browser)
Avarietyofvendorsoffercommercial browsers thatinterpret anddisplayaWebdocu­
ment,andallusenearlythesamearchitecture."
8729,"Eachbrowser usuallyconsistsofthree
parts:acontroller, clientprotocol, andinterpreters."
8730,"Thecontroller receivesinputfrom
thekeyboard orthemouseandusestheclientprograms toaccessthedocument."
8731,"After
thedocument hasbeenaccessed, thecontroller usesoneoftheinterpreters todisplaythe
document onthescreen.Theclientprotocolcanbeoneoftheprotocols described previ­
ouslysuchasFfPorHTIP(described laterinthechapter)."
8732,"Theinterpreter canbeHTML,
Java,orJavaScript, depending onthetypeofdocument."
8733,"Wediscusstheuseofthese
interpreters basedonthedocument typelaterinthechapter(seeFigure27.2)."
8734,"Figure27.2Browser
Browser
Interpreters
Server
TheWebpageisstoredattheserver.Eachtimeaclientrequestarrives,thecorresponding
document issenttotheclient.Toimproveefficiency, serversnormally storerequested
filesinacacheinmemory; memory isfastertoaccessthandisk.Aservercanalso
becomemoreefficientthroughmultithreading ormultiprocessing."
8735,"Inthiscase,aserver
cananswermorethanonerequestatatime.SECTION 27.1ARCHITECTURE 853
Uniform Resource Locator
AclientthatwantstoaccessaWebpageneedstheaddress.Tofacilitate theaccessofdoc­
umentsdistributed throughout theworld,HTTPuseslocators."
8736,"Theuniformresource
locator(URL)isastandardforspecifying anykindofinformation ontheInternet.The
URLdefinesfourthings:protocol, hostcomputer, port,andpath(seeFigure27.3)."
8737,"Figure27.3URL
IProtocol1://IHost
Theprotocol istheclient/server program usedtoretrievethedocument."
8738,"Many
different protocols canretrieveadocument; amongthemareFTPorHTTP.Themost
common todayisHTTP."
8739,"Thehostisthecomputer onwhichtheinformation islocated,although thenameof
thecomputer canbeanalias.Webpagesareusuallystoredincomputers, andcomputers
aregivenaliasnamesthatusuallybeginwiththecharacters ""www"".Thisisnotmandatory,
however, asthehostcanbeanynamegiventothecomputer thathoststheWebpage."
8740,"TheURLcanoptionally containtheportnumberoftheserver.Iftheportis
included, itisinsertedbetween thehostandthepath,anditisseparated fromthehost
byacolon."
8741,"Pathisthepathname ofthefilewheretheinformation islocated.Notethatthepath
canitselfcontainslashesthat,intheUNIXoperating system,separate thedirectories
fromthesubdirectories andfiles."
8742,"Cookies
TheWorldWideWebwasoriginally designed asastateless entity.Aclientsendsa
request;aserverresponds."
8743,"Theirrelationship isover.TheoriginaldesignofWWW,
retrieving publicly available documents, exactly fitsthispurpose."
8744,"TodaytheWebhas
otherfunctions; somearelistedhere."
8745,I.Somewebsites needtoallowaccesstoregistered clientsonly.
8746,"2.Websites arebeingusedaselectronic storesthatallowuserstobrowsethroughthe
store,selectwanteditems,puttheminanelectronic cart,andpayattheendwitha
creditcard."
8747,3.Somewebsites areusedasportals:theuserselectstheWebpageshewantstosee.
8748,4.Somewebsites arejustadvertising.
8749,"Forthesepurposes, thecookiemechanism wasdevised.Wediscussed theuseofcook­
iesatthetransport layerinChapter23;wenowdiscusstheiruseinWebpages."
8750,"Creation andStorageofCookies
Thecreationandstorageofcookiesdependontheimplementation; however, theprinciple
isthesame.854CHAPTER 27WWWANDHTTP
1.Whenaserverreceivesarequestfromaclient,itstoresinformation abouttheclient
inafileorastring.Theinformation mayincludethedomainnameoftheclient,the
contentsofthecookie(information theserverhasgathered abouttheclientsuchas
name,registration number,andsoon),atimestamp, andotherinformation'depend­
ingontheimplementation."
8751,2.Theserverincludesthecookieintheresponse thatitsendstotheclient.
8752,"3.Whentheclientreceivestheresponse, thebrowserstoresthecookieinthecookie
directory, whichissortedbythedomainservername."
8753,"UsingCookies
Whenaclientsendsarequesttoaserver,thebrowserlooksinthecookiedirectory to
seeifitcanfindacookiesentbythatserver.Iffound,thecookieisincluded inthe
request.Whentheserverreceivestherequest,itknowsthatthisisanoldclient,nota
newone.Notethatthecontentsofthecookieareneverreadbythebrowserordisclosed
totheuser.Itisacookiemadebytheserverandeatenbytheserver.Nowletusseehow
acookieisusedforthefourpreviously mentioned purposes:
1.Thesitethatrestrictsaccesstoregistered clientsonlysendsacookietotheclient
whentheclientregistersforthefirsttime.Foranyrepeated access,onlythoseclients
thatsendtheappropriate cookieareallowed."
8754,2.Anelectronic store(e-commerce) canuseacookieforitsclientshoppers.
8755,"Whena
clientselectsanitemandinsertsitintoacart,acookiethatcontains information
abouttheitem,suchasitsnumberandunitprice,issenttothebrowser."
8756,"Iftheclient
selectsaseconditem,thecookieisupdatedwiththenewselection information."
8757,"And
soon.Whentheclientfinishesshopping andwantstocheckout,thelastcookieis
retrieved andthetotalchargeiscalculated."
8758,"3.AWebportalusesthecookieinasimilarway.Whenauserselectsherfavorite
pages,acookieismadeandsent.Ifthesiteisaccessed again,thecookieissentto
theservertoshowwhattheclientislookingfor."
8759,4.Acookieisalsousedbyadvertising agencies.
8760,"Anadvertising agencycanplace
banneradsonsomemainwebsitethatisoftenvisitedbyusers.Theadvertising
agencysuppliesonlyaURLthatgivesthebanneraddressinsteadofthebanneritself."
8761,"Whenauservisitsthemainwebsiteandclicksontheiconofanadvertised corpora­
tion,arequestissenttotheadvertising agency.The advertising agencysendsthe
banner,aGIFfile,forexample, butitalsoincludesacookiewiththeilloftheuser."
8762,"AnyfutureuseofthebannersaddstothedatabasethatprofilestheWebbehaviorof
theuser.Theadvertising agencyhascompiled theinterestsoftheuserandcansell
thisinformation tootherparties.Thisuseofcookieshasmadethemverycontrover­
sial.Hopefully, somenewregulations willbedevisedtopreservetheprivacyofusers."
8763,"27.2WEBDOCUMENTS
Thedocuments intheWWWcanbegroupedintothreebroadcategories: static,dynamic,
andactive.Thecategory isbasedonthetimeatwhichthecontentsofthedocument are
determined.SECTION 27.2WEBDOCUMENTS 855
StaticDocuments
Staticdocuments arefixed-content documents thatarecreatedandstoredinaserver."
8764,Theclientcangetonlyacopyofthedocument.
8765,"Inotherwords,thecontents ofthefile
aredetermined whenthefileiscreated,notwhenitisused.Ofcourse,thecontents in
theservercanbechanged, buttheusercannotchangethem.Whenaclientaccesses the
document, acopyofthedocument issent.Theusercanthenuseabrowsing program to
displaythedocument (seeFigure27.4)."
8766,"Figure27.4Staticdocument
Server
Client
r--
Request
StaticHTMLdocument
HTML
Hypertext Markup Language (HTML) isalanguage forcreating Webpages.The
termmarkuplanguage comesfromthebookpublishing industry."
8767,"Beforeabookistype­
setandprinted,acopyeditorreadsthemanuscript andputs marks onit.Thesemarks
tellthecompositor howtoformatthetext.Forexample, ifthecopyeditorwantspartof
alinetobeprintedinboldface, heorshedrawsawavylineunderthatpart.Inthesame
way,dataforaWebpageareformatted forinterpretation byabrowser."
8768,Letusclarifytheideawithanexample.
8769,"Tomakepartofatextdisplayed inboldface
withHTML,weputbeginning andendingboldfacetags(marks)inthetext,asshown
inFigure27.5.
Figure27.5Boldface tags
IBOl~1 !!7bOld ]
<B> This isthetexttobeboldfaced.<!B>
Thetwotags<B>and</B>areinstructions forthebrowser."
8770,"Whenthebrowser
seesthesetwomarks,itknowsthatthetextmust beboldfaced (seeFigure27.6)."
8771,"Amarkuplanguage suchasHTMLallowsustoembedformatting instructions in
thefileitself.Theinstructions areincluded withthetext.Inthisway,anybrowsercan
readtheinstructions andformatthetextaccording tothespecificworkstation."
8772,"Onemight856CHAPTER 27WWWANDHTTP
Figure27.6Effectofboldface tags
Browser
askwhywedonotusethefonnatting capabilities ofwordprocessors tocreateandsave
formatted text.Theansweristhatdifferent wordprocessors usedifferent techniques or
procedures forformatting text.Forexample, imaginethatausercreatesformatted texton
aMacintosh computer andstoresitinaWebpage.AnotheruserwhoisonanIBMcom­
puterwouldnotbeabletoreceivetheWebpagebecausethetwocomputers usedifferent
fonnatting procedures."
8773,"HTMLletsususeonlyASCIIcharacters forboththemaintextandformatting
instructions."
8774,"Inthisway,everycomputer canreceivethewholedocument asanASCII
document."
8775,"Themaintextisthedata,andtheformatting instructions canbeusedbythe
browsertoformatthedata."
8776,"AWebpageismadeupoftwoparts:theheadandthebody.Theheadisthefirstpart
ofaWebpage.Theheadcontains thetitleofthepageandotherparameters thatthe
browserwilluse.Theactualcontentsofapageareinthebody,whichincludesthetextand
thetags.Whereas thetextistheactualinfonnation contained inapage,thetagsdefinethe
appearance ofthedocument."
8777,"EveryHTMLtagisanamefollowed byanoptionallistof
attributes, allenclosed betweenless-than andgreater-than symbols«and>)."
8778,"Anattribute, ifpresent,isfollowed byanequalssignandthevalueoftheattribute."
8779,"Sometagscanbeusedalone;othersmustbeusedinpairs.Thosethatareusedinpairs
arecalledbeginning andendingtags.Thebeginning tagcanhaveattributes andvalues
andstartswiththenameofthetag.Theendingtagcannothaveattributes orvaluesbut
musthaveaslashbeforethenameofthetag.Thebrowsermakesadecision aboutthe
structure ofthetextbasedonthetags,whichareembedded intothetext.Figure27.7
showsthefonnatofatag."
8780,"Figure27.7Beginning andendingtags
<TagNarne
a.Beginning tagAttribute =Value Attribute=Value •••>
1_- <_rr_a_gN_arn_e_> 1
b.Endingtag
Onecommonly usedtagcategory isthetextformatting tagssuchas<B>and<!B>,
whichmakethetextbold;<1>and<II>,whichmakethetextitalic;and<U>and<IV>,
whichunderline thetext.SECTION 27.2WEBDOCUMENTS 857
Anotherinteresting tagcategory istheimagetag.Nontextual information suchas
digitized photosorgraphicimagesisnotaphysical partofanHTMLdocument."
8781,"But
wecanuseanimagetagtopointtothefileofaphotoorimage.Theimagetagdefines
theaddress(URL)oftheimagetoberetrieved.Italsospecifies howtheimagecanbe
insertedafterretrievaL Wecanchoosefromseveralattributes."
8782,"Themostcommon are
SRC(source), whichdefinesthesource(address), andALIGN, whichdefinesthealign­
mentoftheimage.TheSRCattributeisrequired."
8783,"Mostbrowsers acceptimagesinthe
GIForIPEGformats."
8784,"Forexample, thefollowing tagcanretrieveanimagestoredas
imagel.gif inthedirectory /bin/images:
Athirdinteresting category isthehyperlink tag,whichisneededtolinkdocuments
together."
8785,"Anyitem(word,phrase,paragraph, orimage)canrefertoanotherdocument
throughamechanism calledananchor.Theanchorisdefinedby<A...>and<!A>tags,
andtheanchored itemusestheURLtorefertoanotherdocument."
8786,"Whenthedocument
isdisplayed, theanchored itemisunderlined, blinking, orboldfaced."
8787,"Theusercanclick
ontheanchored itemtogotoanotherdocument, whichmayormaynotbestoredon
thesameserverastheoriginaldocument."
8788,"Thereference phraseisembedded betweenthe
beginning andendingtags.Thebeginning tagcanhaveseveralattributes, buttheone
required isHREF(hyperlink reference), whichdefinestheaddress(URL)ofthelinked
document."
8789,"Forexample, thelinktotheauthorofabookcanbe
WhatappearsinthetextisthewordAuthor,onwhichtheusercanclicktogotothe
author'sWebpage."
8790,"Dynamic Documents
Adynamic document iscreatedbyaWebserverwhenever abrowserrequeststhedoc­
ument.Whenarequestarrives,theWebserverrunsanapplication program orascript
thatcreatesthedynamic document."
8791,"Theserverreturnstheoutputoftheprogram or
scriptasaresponse tothebrowserthatrequested thedocument."
8792,"Because afreshdocu­
mentiscreatedforeachrequest,thecontents ofadynamic document canvaryfrom
onerequesttoanother.Averysimpleexample ofadynamic document istheretrieval
ofthetimeanddatefromaserver.Timeanddatearekindsofinformation thatare
dynamic inthattheychangefrommomenttomoment."
8793,"Theclientcanasktheserverto
runaprogram suchasthedateprogram inUNIXandsendtheresultoftheprogram to
theclient."
8794,"Common Gateway Interface (CGI)
TheCommon Gateway Interface (CGI)isatechnology thatcreatesandhandles
dynamic documents."
8795,"CGIisasetofstandards thatdefines how adynamic document is
written,howdataareinputtotheprogram, andhowtheoutputresultisused.858CHAPTER 27WWWANDHTTP
COlisnotanewlanguage; instead,itallowsprogrammers touseanyofseveral
languages suchasC,C++,BoumeShell,KomShell,CShell,Tcl,orPerl.Theonly
thingthatCGIdefinesisasetofrulesandtennsthattheprogrammer mustfollow."
8796,"Thetenncommon inCOlindicates thatthestandard definesasetofrulesthatis
common toanylanguage orplatfonn."
8797,"Thetenngateway heremeansthataCOlpro­
gramcanbeusedtoaccessotherresources suchasdatabases, graphical packages, and
soon.Thetenninterface heremeansthatthereisasetofpredefined tenns,variables,
calls,andsoon thatcanbeusedinanyCOlprogram."
8798,"ACOlprogram initssimplest
fonniscodewritteninoneofthelanguages supporting COLAnyprogrammer whocan
encodeasequence ofthoughts inaprogram andknowsthesyntaxofoneoftheabove­
mentioned languages canwriteasimpleCGIprogram."
8799,"Figure27.8illustrates thesteps
increatingadynamic program usingCOltechnology."
8800,"Figure27.8Dynamic document usingCGI
Client
Request
Dynamic HTMLdocumentServeri
Program
Input Intraditional programming, whenaprogram isexecuted, parameters canbe
passedtotheprogram."
8801,"Parameter passingallowstheprogrammer towriteageneric
program thatcanbeusedindifferent situations."
8802,"Forexample, agenericcopyprogram
canbewrittentocopyanyfiletoanother.Ausercanusetheprogram tocopyafile
namedxtoanotherfilenamedybypassingxandyasparameters."
8803,"Theinputfromabrowsertoaserverissentbyusingaform.Iftheinfonnation ina
fonnissmall(suchasaword),itcanbeappended totheURLafteraquestionmark.For
example, thefollowing URLiscarryingfonninfonnation (23,avalue):
http://www.deanzalcgi-binlprog.pl?23
WhentheserverreceivestheURL,itusesthepartoftheURLbeforethequestion
marktoaccesstheprogram toberun,anditinterprets thepartafterthequestion mark
(23)astheinputsentbytheclient.Itstoresthisstringinavariable."
8804,"WhentheCGI
program isexecuted, itcanaccessthisvalue."
8805,"Iftheinputfromabrowseristoolongtofitinthequerystring,thebrowsercanask
theservertosendafonn.Thebrowsercanthenfillthefonnwiththeinputdataand
sendittotheserver.Theinfonnation inthefonncanbeusedastheinputtotheCOl
program.SECTION 27.2ltEBDOCUMENTS 859
Output ThewholeideaofCGIistoexecuteaCGIprogram attheserversiteand
sendtheoutputtotheclient(browser)."
8806,"Theoutputisusuallyplaintextoratextwith
HTMLstructures; however, theoutputcanbeavarietyofotherthings.Itcanbegraphics
orbinarydata,astatuscode,instructions tothebrowsertocachetheresult,orinstruc­
tionstotheservertosendan existing document insteadoftheactualoutput."
8807,"Tolettheclientknowaboutthetypeofdocument sent,aCGIprogram creates
headers."
8808,"Asamatteroffact,theoutputoftheCGIprogram alwaysconsistsoftwo
parts:aheaderandabody.Theheaderisseparated byablanklinefromthebody.This
meansanyCGIprogram createsfirsttheheader,thenablankline,andthenthebody."
8809,"Although theheaderandtheblanklinearenotshownonthebrowserscreen,theheader
isusedbythebrowsertointerpretthebody."
8810,"Scripting Technologies forDynamic Documents
TheproblemwithCGItechnology istheinefficiency thatresultsifpartofthedynamic
document thatistobecreatedisfixedandnotchanging fromrequesttorequest.For
example, assumethatweneedtoretrievealistofspareparts,theiravailability, and
pricesforaspecificcarbrand.Although theavailability andpricesvaryfromtimeto
time,thename,description, andthepictureofthepartsarefixed.IfweuseCGI,the
programmustcreateanentiredocument eachtimearequestismade.Thesolutionisto
createafilecontaining thefixedpartofthedocument usingHTMLandembedascript,
asourcecode,thatcanberunbytheservertoprovidethevaryingavailability andprice
section.Figure27.9showstheidea."
8811,"Figure27.9Dynamic document usingserver-site script
Client
f""""--
RequestServer
~
Dynamic HTMLdocument1-------ir;:;t1 Runthescript(8)
insidetheHTML
document
Afewtechnologies havebeeninvolvedincreatingdynamicdocuments usingscripts."
8812,"Amongthemostcommon areHypertext Preprocessor (pHP),whichusesthePerllan­
guage;JavaServerPages(JSP),whichusestheJavalanguage forscripting; Active
ServerPages(ASP),aMicrosoft productwhichusesVisualBasiclanguage forscripting;
andColdFusion, whichembedsSQLdatabasequeriesintheHTMLdocument."
8813,"Dynamic documents aresometimes referredtoas
server-site dynamic documents.860CHAPTER 27WWWANDHTTP
ActiveDocuments
Formanyapplications, weneedaprogram orascripttoberunattheclientsite.These
arecalledactivedocuments."
8814,"Forexample, supposewewanttorunaprogram that
createsanimated graphics onthescreenoraprogram thatinteracts withtheuser.The
program definitely needstoberunatthe client sitewheretheanimation orinteraction
takesplace.Whenabrowserrequestsanactivedocument, theserversendsacopyofthe
document orascript.Thedocument isthenrunattheclient(browser) site."
8815,"JavaApplets
Onewaytocreateanactivedocument istouseJavaapplets.Javaisacombination ofa
high-level programming language, arun-time environment, andaclasslibrarythat
allowsaprogrammer towriteanactivedocument (anapplet)and abrowsertorunit.It
canalsobeastand-alone program thatdoesn'tuseabrowser."
8816,"AnappletisaprogramwritteninJavaontheserver.Itiscompiled andreadytobe
run.Thedocument isinbyte-code (binary)format.Theclientprocess(browser) creates
aninstanceofthisappletandrunsit.AJavaappletcanberunbythebrowserintwo
ways.Inthefirstmethod,thebrowsercandirectlyrequesttheJavaappletprogram in
theURLandreceivetheappletinbinaryform.Inthesecondmethod,thebrowsercan
retrieveandrunanHTMLfilethathasembedded theaddressoftheappletasatag.Fig­
ure27.10showshowJavaappletsareusedinthefirstmethod; the secondissimilarbut
needstwotransactions."
8817,"Figure27.10Activedocument usingJavaapplet
Client
--
RequestServer-
~-----l Applett------I
Runtheapplet
togettheresult
Result
JavaScript
Theideaofscriptsindynamic documents canalsobeusedforactivedocuments."
8818,"Ifthe
activepartofthedocument issmall,itcanbewritteninascripting language; thenitcan
beinterpreted andrunbytheclientatthesametime.Thescriptisinsourcecode(text)
andnotinbinaryform.Thescripting technology usedinthiscaseisusuallyJavaScript."
8819,"JavaScript, whichbearsasmallresemblance toJava,isaveryhighlevelscripting
language developed forthispurpose.Figure27.11showshowJavaScript isusedtocreate
anactivedocument.SECTION 27.3HTTP 861
Figure27.11Activedocument usingclient-site script
Server
Client
Request
RuntheJavaScript (JS)
togettheresult
Result
Activedocuments aresometimes referredtoasclient-site dynamic documents."
8820,"27.3HTTP
TheHypertext Transfer Protocol (HTTP)isaprotocolusedmainlytoaccessdataon
theWorldWideWeb.HTTPfunctions asacombination ofFTPandSMTP.Itissimilarto
FfPbecauseittransfers filesandusestheservicesofTCP.However, itismuchsimpler
thanFfPbecauseitusesonlyoneTCPconnection."
8821,"Thereisnoseparatecontrolconnec­
tion;onlydataaretransferred betweentheclientandtheserver."
8822,"HTTPislikeSMTPbecausethedatatransferred betweentheclientandtheserver
looklikeSMTPmessages."
8823,"Inaddition, theformatofthemessages iscontrolled by
MIME-like headers.UnlikeSMTP,theHTTPmessages arenotdestinedtobereadby
humans; theyarereadandinterpreted bytheHTTPserverandHTTPclient(browser)."
8824,"SMTPmessages arestoredandforwarded, butHTTPmessages aredelivered immedi­
ately.Thecommands fromtheclienttotheserverareembedded inarequestmessage."
8825,"Thecontentsoftherequested fileorotherinformation areembedded inaresponse
message."
8826,HTTPusestheservicesofTCPonwell-known port80.
8827,HTTPusestheservicesofTCPonwell-known port80.
8828,"HTTPTransaction
Figure27.12illustrates theHTTPtransaction between theclientandserver.Although
HTTPusestheservicesofTCP,HTTPitselfisastatelessprotocol."
8829,"Theclientinitializes
thetransaction bysendingarequestmessage."
8830,Theserverrepliesbysendingaresponse.
8831,"Messages
Theformatsoftherequestandresponse messages aresimilar;bothareshowninFig­
ure27.13.Arequestmessageconsistsofarequestline,aheader,andsometimes abody."
8832,"Aresponse message consistsofastatusline,aheader,andsometimes abody.862CHAPTER 27WWWANDHTTP
Figure27.12HTTPtransaction
Client
Request
Figure27.13Requestandresponse messages
Headers
Ablankline
RequestmessageServer
===u:u::u
E::::l-
Ablankline
Response message
RequestandStatusLinesThefirstlineinarequestmessageiscalledarequestline;
thefirstlineintheresponse message iscalledthestatusline.Thereisonecommon
field,asshowninFigure27.14."
8833,"Figure27.14Requestandstatuslines
Space Space
RequesttypeI~ ~IHTTPversion
a.Request line
Space Space
I~ ~I HTTPversion Statusphrase
b.StatuslineSECTION 27.3HTTP 863
oRequest type.Thisfieldisusedintherequestmessage."
8834,"Inversion1.1ofHTTP,
severalrequesttypesaredefined.Therequesttypeiscategorized intomethods as
definedinTable27.1.
Table27.1Methods
Method Action
GET Requests adocument fromtheserver
HEAD Requests information aboutadocument butnotthedocument itself
POST Sendssomeinformation fromtheclienttotheserver
PUT Sendsadocument fromtheservertotheclient
TRACE Echoestheincoming request
CONNECT Reserved
OPTION Inquiresaboutavailable options
oURL.Wediscussed theURLearlierinthechapter."
8835,oVersion.
8836,"ThemostcurrentversionofHTTPis1.1.
oStatuscode.Thisfieldisusedintheresponse message."
8837,"Thestatuscodefieldis
similartothoseintheFTPandtheSMTPprotocols."
8838,Itconsistsofthreedigits.
8839,"Whereas thecodesinthe100rangeareonlyinformational, thecodesinthe200
rangeindicateasuccessful request.Thecodesinthe300rangeredirecttheclient
toanotherURL,andthecodesinthe400rangeindicateanerrorattheclientsite."
8840,"Finally,thecodesinthe500rangeindicateanerrorattheserversite.Welistthe
mostcommon codesinTable27.2.
oStatusphrase."
8841,"Thisfieldisusedintheresponse message.Itexplains thestatus
codeintextform.Table27.2alsogivesthestatusphrase."
8842,"Table27.2Statuscodes
Code Phrase Description
Informational
100Continue Theinitialpartoftherequesthasbeenreceived, andthe
clientmaycontinue withitsrequest."
8843,"101Switching Theserveriscomplying withaclientrequestto switch
protocols definedintheupgradeheader."
8844,"Success
200OK Therequestissuccessful."
8845,201Created AnewURLiscreated.
8846,"202Accepted Therequestisaccepted, butitisnotimmediately actedupon."
8847,"204Nocontent Thereisnocontentinthebody.864CHAPTER 27WWWANDHITP
Table27.2Statuscodes(continued)
Code Phrase Description
Redirection
301Movedpermanently Therequested URLisnolongerusedbytheserver."
8848,302Movedtemporarily Therequested URLhasmovedtemporarily.
8849,304Notmodified Thedocument hasnotbeenmodified.
8850,"ClientError
400Badrequest Thereisasyntaxerrorintherequest."
8851,401Unauthorized Therequestlacksproperauthorization.
8852,403Forbidden Serviceisdenied.
8853,404Notfound Thedocument isnotfound.
8854,405Methodnotallowed Themethodisnot supported inthisURL.
8855,406Notacceptable Theformatrequested isnotacceptable.
8856,"ServerError
500InternalservererrorThereisanerror,suchasacrash,attheserversite."
8857,501Notimplemented Theactionrequested cannotbeperformed.
8858,"503Serviceunavailable Theserviceistemporarily unavailable, butmayberequested
inthefuture."
8859,Header Theheaderexchanges additional information betweentheclientandtheserver.
8860,"Forexample, theclientcanrequestthatthedocument besentinaspecialformat,orthe
servercansendextrainformation aboutthedocument."
8861,"Theheadercanconsistofoneor
moreheaderlines.Eachheaderlinehasaheadername,acolon,aspace,andaheader
value(seeFigure27.15).Wewillshowsomeheaderlinesintheexamples attheendof
thischapter.Aheaderlinebelongstooneoffourcategories: generalheader,request
header,response header,andentityheader.Arequestmessage cancontainonlygen­
eral,request,andentityheaders.Aresponse message, ontheotherhand,cancontainonly
general,response, andentityheaders."
8862,"Figure27.15Headerformat
Space
IHeadernamelOtIHeadervalueI
oGeneralheaderThegeneralheadergivesgeneralinformation aboutthemessage
andcanbepresentinbotharequestandaresponse."
8863,"Table27.3listssomegeneral
headerswiththeirdescriptions.SECTION 27.3HTTP 865
Table27.3Generalheaders
Header Description
Cache-control Specifies infonnation aboutcaching
Connection Showswhethertheconnection shouldbeclosedornot
Date Showsthecurrentdate
MIME-version ShowstheMIMEversionused
Upgrade Specifies thepreferred communication protocol
oRequest headerTherequestheadercanbepresentonlyinarequestmessage.It
specifies theclient'sconfiguration andtheclient'spreferred document format.See
Table27.4foralistofsomerequestheadersandtheirdescriptions."
8864,"Table27.4Requestheaders
Header Description
Accept Showsthemediumfonnattheclientcanaccept
Accept-charset Showsthecharacter settheclientcanhandle
Accept-encoding Showstheencoding schemetheclientcanhandle
Accept-language Showsthelanguage theclientcanaccept
Authorization Showswhatpennissions theclienthas
From Showsthee-mail addressoftheuser
Host Showsthehostandportnumberoftheserver
If-modified-since Sendsthedocument ifnewerthanspecified date
If-match Sendsthedocument onlyifitmatchesgiventag
If-non-match Sendsthedocument onlyifitdoesnotmatchgiventag
~'-'-_._-- -- _._---.__.._-
If-range Sendsonlytheportionofthedocument thatismissing
If-unmodified-since Sendsthedocument ifnotchanged sincespecified date
Referrer Specifies theURLofthelinkeddocument
User-agent Identifies theclientprogram
oResponse headerTheresponse headercanbepresentonlyinaresponse message."
8865,Itspecifies theserver'sconfiguration andspecialinformation abouttherequest.
8866,SeeTable27.5foralistofsomeresponse headerswiththeirdescriptions.
8867,"Table27.5Response headers
Header Description
Accept-range Showsifserveracceptstherangerequested byclient
Age Showstheageofthe document
Public Showsthesupported listofmethods
Retry-after Specifies thedateafterwhichtheserver isavailable
Server Showstheservernameandversionnumber866CHAPTER 27WWWANDHTTP
oEntityheaderTheentityheadergivesinfonnation aboutthebodyofthedocu­
ment.Although itismostlypresentinresponse messages, somerequestmessages,
suchasPOSTorPUTmethods, thatcontainabodyalsousethistypeofheader."
8868,SeeTable27.6foralistofsomeentityheadersandtheirdescriptions.
8869,"Table27.6Entityheaders
Header Description
Allow Listsvalidmethods thatcanbeusedwithaURL
Content-encoding Specifies theencoding scheme
Content-language Specifies thelanguage
Content-length Showsthelengthofthedocument
Content-range Specifies therangeofthedocument
Content-type Specifies themediumtype
Etag Givesanentitytag
Expires Givesthedateandtimewhencontentsmaychange
Last-modified Givesthedateandtimeofthelastchange
Location Specifies thelocationofthecreatedormoveddocument
BodyThebodycanbepresentinarequestorresponse message."
8870,"Usually,itcontains
thedocument tobesentorreceived."
8871,"Example 27.1
Thisexample retrieves adocument."
8872,"WeusetheGETmethodtoretrieveanimagewiththe
path/usr/bin/imagel."
8873,"Therequestlineshowsthemethod(GET),theURL,andtheHTTPver­
sion(1.1).TheheaderhastwolinesthatshowthattheclientcanacceptimagesintheGIFor
JPEGformat.Therequestdoesnothaveabody.Theresponse message containsthestatusline
andfourlinesofheader.Theheaderlinesdefinethedate,server,MIMEversion,andlengthofthe
document."
8874,Thebodyofthedocument followstheheader(seeFigure27.16).
8875,"Figure27.16Example 27.1
Servercrtlen =g~
cu:::u::J
E::IRequest(GETmethod) -=p=
GETlusrlbinlimage1 HTTP/l.l
Accept:image/gif
Accept:image/jpeg
HTIP/l.l 200OK
Date:Mon,07-Jan-05 13:15:14 GMT
Server:Challenger
MIME-version: l.0
Content-length: 2048
(Bodyofthedocument)
ResponseSECTION 27.3HTTP 867
Example 27.2
Inthisexample, theclientwantstosenddatatotheserver.WeusethePOSTmethod.Therequest
lineshowsthemethod(POST), URL,andHTTPversion(1.1).Therearefourlinesofheaders."
8876,Therequestbodycontains theinputinformation.
8877,"Theresponse message contains thestatusline
andfourlinesofheaders.Thecreateddocument, whichisaCGIdocument, isincluded asthebody
(seeFigure27.17)."
8878,"Figure27.17 Example 27.2
Request(POSTmethod)
POST/cgi-binldoc.pl HTIP/1.l
Accept:*/*
Accept:image/gif
I-----t Accept:image/jpeg
Content-length: 50
(Inputinformation)
HTTP/l.1 200OK
Date:Mon,07-Jan-02 13:15:14 GMT
Server:Challenger
~---t MIME-version: 1.0
Content-length: 2000
(Bodyofthedocument)
Response
Example 27.3
HTTPusesASCIIcharacters."
8879,"AclientcandirectlyconnecttoaserverusingTELNET, which
logsintoport80.Thenextthreelinesshowthattheconnection issuccessful."
8880,"Wethentypethreelines.Thefirstshowstherequestline(GETmethod), thesecondisthe
header(defining thehost),thethirdisablank,terminating therequest."
8881,"Theserverresponse issevenlinesstartingwiththestatusline.Theblanklineattheendtermi­
natestheserverresponse."
8882,"Thefileof14,230linesisreceivedaftertheblankline(notshownhere)."
8883,Thelastlineistheoutputbytheclient.
8884,"$teinetwww.mhhe.com 80
Trying198.45.24.104 ..."
8885,Connected towww.mhhe.com (198.45.24.104).
8886,Escapecharacter is11\]'.
8887,"GET/engcslcompscilforouzan HTTP/I.t
From:forouzanbehrouz@fbda.edu
HTTP/t.l 200OK
Date:Thu,28Oct200416:27:46 GMT
Server:Apache/l.3.9 (Unix)ApacheJServ/1.1.2 PHP/4.1.2 PHP/3.0.18
MIME-version: 1.0
Content-Type:text/html868CHAPTER 27WWWANDHTTP
Last-modified: Friday,15-0ct-04 02:11:31 GMT
Content-length: 14230
Connection closedbyforeignhost."
8888,"Persistent VersusNonpersistent Connection
HTTPpriortoversion1.1specified anonpersistent connection, whileapersistent con­
nectionisthedefaultinversion1.1.
Nonpersistent Connection
Inanonpersistent connection, oneTCPconnection ismadeforeachrequest/response."
8889,"Thefollowing liststhestepsinthisstrategy:
1.TheclientopensaTCPconnection andsendsarequest."
8890,2.Theserversendstheresponse andclosestheconnection.
8891,"3.Theclientreadsthedatauntilitencounters anend-of-file marker;itthenclosesthe
connection."
8892,"Inthisstrategy,forNdifferent picturesindifferent files,theconnection mustbeopened
andclosedNtimes.Thenonpersistent strategyimposes highoverhead ontheserver
becausetheserverneedsNdifferent buffersandrequiresaslowstartprocedure each
timeaconnection isopened."
8893,"Persistent Connection
HTTPversion1.1specifiesapersistent connection bydefault.Inapersistent connection,
theserverleavestheconnection openformorerequestsaftersendingaresponse."
8894,"The
servercanclosetheconnection attherequestofaclientorifatime-outhasbeenreached."
8895,Thesenderusuallysendsthelengthofthedatawitheachresponse.
8896,"However, thereare
someoccasions whenthesenderdoesnotknowthelengthofthedata.Thisisthecase
whenadocument iscreateddynamically oractively.Inthesecases,theserverinforms
theclientthatthelengthisnotknownandclosestheconnection aftersendingthedataso
theclientknowsthattheendofthedatahasbeenreached."
8897,HTTPversion1.1specifies apersistent connection bydefault.
8898,"ProxyServer
HTTPsupports proxyservers."
8899,"Aproxyserverisacomputer thatkeepscopiesof
responses torecentrequests."
8900,"TheHTTPclientsendsarequesttotheproxyserver.The
proxyserverchecksitscache.Iftheresponse isnotstoredinthecache,theproxy
serversendstherequesttothecorresponding server.Incoming responses aresenttothe
proxyserverandstoredforfuturerequestsfromotherclients."
8901,"Theproxyserverreducestheloadontheoriginalserver,decreases traffic,and
improves latency.However, tousetheproxyserver,theclientmustbeconfigured to
accesstheproxyinsteadofthetargetserver.SECTION 27.5KEYTERMS 869
27.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext."
8902,"Books
HTTPisdiscussed inChapters 13and14of[Ste96],Section9.3of[PD03],Chapter35
of[Com04], andSection7.3of[Tan03]."
8903,"Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter."
8904,"owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoWWW:
1614,1630,1737,1738
Thefollowing RFCsarerelatedtoHTTP:
2068,2109
27.5KEYTERMS
activedocument
ActiveServerPages(ASP)
applet
browser
ColdFusion
Common Gateway Interface (CGI)
dynamic document
entityheader
generalheader
host
Hypertext MarkupLanguage
(HTML)
Hypertext Preprocessor (PHP)
Hypertext TransferProtocol (HTTP)
Java
JavaScriptJavaServerPages(JSP)
nonpersistent connection
path
persistent connection
proxyserver
requestheader
requestline
requesttype
response header
staticdocument
statuscode
statusline
tag
uniformresource locator(URL)
Web
WorldWideWeb(WWW)870CHAPTER 27WWWANDHITP
27.6SUMMARY
oTheWorldWideWeb(WWW) isarepository ofinformation linkedtogetherfrom
pointsallovertheworld."
8905,oHypertexts aredocuments linkedtooneanotherthroughtheconceptofpointers.
8906,oBrowsers interpret anddisplayaWebdocument.
8907,"oAbrowserconsistsofacontroller, clientprograms, andinterpreters."
8908,"oAWebdocument canbeclassified asstatic,dynamic, oractive."
8909,"oAstaticdocument isoneinwhichthecontents arefixedandstoredinaserver.The
clientcanmakenochangesintheserverdocument."
8910,oHypertext MarkupLanguage (HTML) isalanguage usedtocreatestaticWebpages.
8911,"oAnybrowser canreadformatting instructions (tags)embedded inanHTML
document."
8912,"oTagsprovidestructure toadocument, definetitlesandheaders,formattext,control
thedataflow,insertfigures,linkdifferent documents together, anddefineexecut­
ablecode."
8913,oAdynamic Webdocument iscreatedbyaserveronlyatabrowserrequest.
8914,"oTheCommon Gateway Interface (CGI)isastandard forcreating andhandling
dynamic Webdocuments."
8915,"oACGIprogram withitsembedded CGIinterface tagscanbewritteninalanguage
suchasC,C++,ShellScript,orPerl."
8916,"oAnactivedocument isacopyofaprogram retrieved bytheclientandrunatthe
clientsite."
8917,"oJavaisacombination ofahigh-level programming language, arun-time environ­
ment,andaclasslibrarythatallowsaprogrammer towriteanactivedocument and
abrowsertorunit."
8918,oJavaisusedtocreateapplets(smallapplication programs).
8919,"oTheHypertext Transfer Protocol (HTTP)isthemainprotocol usedtoaccessdata
ontheWorldWideWeb(WWW)."
8920,oHTTPusesaTCPconnection totransferfiles.
8921,oAnHTTPmessage issimilarinformtoanSMTPmessage.
8922,"oTheHTTPrequestlineconsistsofarequesttype,aURL,andtheHTTPversion
number."
8923,"oTheuniformresource locator(URL)consistsofamethod,hostcomputer, optional
portnumber,andpathnametolocateinformation ontheWWW."
8924,"oTheHTTPrequesttypeormethodistheactualcommand orrequestissuedbythe
clienttotheserver."
8925,"oThestatuslineconsistsoftheHTTPversionnumber, astatuscode,andastatus
phrase."
8926,"oTheHTTPstatuscoderelaysgeneralinformation, information relatedtoasuccessful
request,redirection information, orerrorinformation."
8927,"oTheHTTPheaderrelaysadditional information between theclientandserver.SECTION 27.7PRACTICE SET 871
DAnHTTPheaderconsistsofaheadernameandaheadervalue."
8928,"DAnHTTPgeneralheadergivesgeneralinformation abouttherequestorresponse
message."
8929,"DAnHTTPrequestheaderspecifies aclient'sconfiguration andpreferred document
format."
8930,"DAnHTTPresponse headerspecifies aserver'sconfiguration andspecialinformation
abouttherequest."
8931,DAnHTTPentityheaderprovides information aboutthebody ofadocument.
8932,"DHTTP,version1.1,specifies apersistent connection."
8933,DAproxyserverkeepscopiesofresponses torecentrequests.
8934,"27.7PRACTICE SET
ReviewQuestions
1.HowisHTTPrelatedtoWWW?"
8935,2.HowisHTTPsimilartoSMTP?
8936,3.HowisHTTPsimilartoFTP?
8937,4.WhatisaURLandwhatareitscomponents?
8938,5.WhatisaproxyserverandhowisitrelatedtoHTTP?
8939,6.Namethecommon threecomponents ofabrowser.
8940,7.WhatarethethreetypesofWebdocuments?
8941,8.WhatdoesHTMLstandforandwhatisitsfunction?
8942,9.Whatisthedifference between anactivedocument andadynamic document?
8943,10.WhatdoesCGIstandforandwhatisitsfunction?
8944,11.Describe therelationship between Javaandanactivedocument.
8945,"Exercises
12.Wherewilleachfigurebeshownonthescreen?"
8946,"Lookatthefollowing picture:
thentellmewhatyoufeel:
<IMGSRC=""PictureslFunnyl.gif"" ALIGN=middle>
<lMGSRC=""Pictures/Funny2.gif"" ALIGN=bottom>
<B>Whatisyourfeeling?<IE>
13.Showtheeffectofthefollowing HTMLsegment."
8947,"Thepublisher ofthisbookis<AHREF=""www.mhhe"">
McGraw-Hill Publisher <fA>
14.Showarequestthatretrieves thedocument /usr/users/doc/docl."
8948,"Useatleasttwo
generalheaders, tworequest headers, andoneentityheader."
8949,15.Showtheresponse toExercise 14forasuccessful request.
8950,"16.Showtheresponse toExercise 14foradocument thathaspermanently movedto
/usr/deads/doc1.872CHAPTER 27WWWANDHTTP
17.Showtheresponse toExercise 14ifthereisasyntaxerrorintherequest."
8951,18.ShowtheresponsetoExercise 14iftheclientisunauthorized toaccessthedocument.
8952,19.Showarequestthatasksforinformation aboutadocument at/bin/users/file.
8953,"Useat
leasttwogeneralheadersandonerequestheader."
8954,20.Showtheresponse toExercise 19forasuccessful request.
8955,21.Showtherequesttocopythefileatlocation/bin/usr/bin/file 1to/bin/file1.
8956,22.Showtheresponse toExercise 21.
8957,23.Showtherequesttodeletethefileatlocation/bin/file!.
8958,24.Showtheresponse toExercise 23.
8959,25.Showarequesttoretrievethefileatlocation/bin/etc/file!.
8960,"Theclientneedsthe
document onlyifitwasmodified afterJanuary23,1999."
8961,26.Showtheresponse toExercise 25.
8962,27.Showarequesttoretrievethefileatlocation/bin/etc/filel.
8963,"Theclientshouldiden­
tify itself."
8964,28.Showtheresponse toExercise 27.
8965,29.Showarequesttostoreafileatlocation/bin/letter.
8966,"Theclientidentifies thetypes
ofdocuments itcanaccept."
8967,"30.Showtheresponse toExercise 29.Theresponse showstheageofthedocument as
wellasthedateandtimewhenthecontentsmaychange.CHAPTER 28
Network Management: SNMP
Wecandefinenetwork management asmonitoring, testing,configuring, andtrouble­
shooting network components tomeetasetofrequirements definedbyanorganiza­
tion.Theserequirements includethesmooth,efficient operation ofthenetwork that
provides thepredefined qualityofserviceforusers.Toaccomplish thistask,anetwork
management systemuseshardware, software, andhumans."
8968,"Inthischapter,firstwe
brieflydiscussthefunctions ofanetwork management system.Thenweconcentrate
onthemostcommon management system,theSimpleNetwork Management Protocol
(SNMP)."
8969,"28.1NETWORK MANAGEMENT SYSTEM
Wecansaythatthefunctions performed byanetwork management systemcanbe
dividedintofivebroadcategories: configuration management, faultmanagement, per­
formance management, securitymanagement, andaccounting management, asshown
inFigure28.1.
Figure28.1Functions ofanetworkmanagement system
Response timeFunctions ofanetwork
management system
I
I I I I I
Configuration Fault Performance Security Accounting
management management management management management
~Reconfiguration ~Reactive -Capacity
'--Documentation '--Proactive f--Traffic
~Throughput
'--,
873874CHAPTER 28NETWORK MANAGEMENT: SNMP
Configuration Management
Alargenetworkisusuallymadeupofhundreds ofentitiesthatarephysically orlogically
connected tooneanother.Theseentitieshaveaninitialconfiguration whenthenetwork
issetup,butcanchangewithtime.Desktop computers maybereplaced byothers;
application software maybeupdatedtoanewerversion;andusersmaymovefromone
grouptoanother.Theconfiguration management systemmustknow,atanytime,the
statusofeachentityanditsrelationtootherentities.Configuration management can
bedividedintotwosubsystems: reconfiguration anddocumentation."
8970,"Reconfiguration
Reconfiguration, whichmeansadjusting thenetworkcomponents andfeatures,canbea
dailyoccurrence inalargenetwork."
8971,"Therearethreetypesofreconfiguration: hardware
reconfiguration, softwarereconfiguration, anduser-account reconfiguration."
8972,Hardware reconfiguration coversallchangestothe hardware.
8973,"Forexample, adesk­
topcomputer mayneedtobereplaced."
8974,"Aroutermayneedtobemovedtoanotherpart
ofthenetwork."
8975,Asubnetwork maybeaddedorremoved fromthenetwork.
8976,"Allthese
needthetimeandattention ofnetworkmanagement."
8977,"Inalargenetwork, theremustbe
specialized personnel trainedforquickandefficienthardware reconfiguration."
8978,"Unfortu­
nately,thistypeofreconfiguration cannotbeautomated andmustbemanually handled
casebycase."
8979,Software reconfiguration coversallchanges tothesoftware.
8980,"Forexample, new
software mayneedtobeinstalled onserversorclients.Anoperating systemmayneed
updating."
8981,"Fortunately, mostsoftware reconfiguration canbeautomated."
8982,"Forexample,
updating anapplication onsomeorallclientscanbeelectronically downloaded from
theserver."
8983,User-account reconfiguration isnotsimplyaddingordeletingusersonasystem.
8984,"Youmustalsoconsider theuserprivileges, bothasanindividual andasamemberofa
group.Forexample, ausermayhavereadandwritepermission withregardtosome
files,butonlyreadpermission withregardtootherfiles.User-account reconfiguration
canbe,tosomeextent,automated."
8985,"Forexample, inacollegeoruniversity, atthebegin­
ningofeachquarterorsemester, newstudentsareaddedtothesystem.Thestudentsare
normally groupedaccording tothecoursestheytakeorthemajorstheypursue."
8986,"Documentation
Theoriginalnetwork configuration andeachsubsequent changemustberecorded
meticulously."
8987,"Thismeansthattheremustbedocumentation forhardware, software, and
useraccounts."
8988,"Hardware documentation normally involves twosetsofdocuments: mapsand
specifications."
8989,Mapstrackeachpieceofhardware anditsconnection tothenetwork.
8990,"Therecanbeonegeneralmapthatshowsthelogicalrelationship betweeneachsubnet­
work.Therecanalsobeasecondgeneralmapthatshowsthephysicallocationofeach
subnetwork."
8991,"Foreachsubnetwork, then,thereisoneormoremapsthatshowallpieces
ofequipment."
8992,"Themapsusesomekindofstandardization tobeeasilyreadandunder­
stoodbycurrentandfuturepersonnel."
8993,"Mapsarenotenoughperse.Eachpieceofhard­
warealsoneedstobedocumented."
8994,"Theremustbeasetofspecifications foreachpieceSECTION 28.1NETWORK MANAGEMENT SYSTEM 875
ofhardware connected tothenetwork."
8995,"Thesespecifications mustincludeinformation
suchashardware type,serialnumber, vendor(address andphonenumber), timeof
purchase, andwarranty information."
8996,Allsoftware mustalsobedocumented.
8997,"Software documentation includesinforma­
tionsuchasthesoftwaretype,theversion,thetimeinstalled, andthelicenseagreement."
8998,"Mostoperating systemshaveautilitythatallowsthedocumentation ofuseraccounts
andtheirprivileges."
8999,"Themanagement mustmakesurethatthefileswiththisinformation
areupdatedandsecured.Someoperating systemsrecordaccessprivileges intwodocu­
ments;oneshowsallfilesandaccesstypesforeachuser;theothershowsthelistofusers
thathaveaparticular accesstoafile."
9000,"FaultManagement
Complex networks todayaremadeupofhundreds andsometimes thousands ofcompo­
nents.Properoperation ofthenetworkdependsontheproperoperation ofeachcomponent
individually andinrelationtoeachother.Faultmanagement istheareaofnetwork
management thathandlesthisissue."
9001,"Aneffective faultmanagement systemhastwosubsystems: reactivefaultmanage­
mentandproactive faultmanagement."
9002,"Reactive FaultManagement
Areactivefaultmanagement systemisresponsible fordetecting, isolating, correcting,
andrecording faults.Ithandlesshort-termsolutions tofaults."
9003,"Thefirststeptakenbyareactivefaultmanagement systemistodetecttheexact
locationofthefault.Afaultisdefinedasanabnormal condition inthesystem.Whena
faultoccurs,eitherthesystemstopsworkingproperly orthesystemcreatesexcessive
errors."
9004,A goodexampleofafaultisadamaged communication medium.
9005,"Thisfaultmay
interrupt communication orproduceexcessive errors."
9006,"Thenextsteptakenbyareactivefaultmanagement systemistoisolatethefault.A
fault,ifisolated, usuallyaffectsonlyafewusers.Afterisolation, theaffectedusersare
immediately notifiedandgivenanestimated timeofcorrection."
9007,"Thethirdstepistocorrectthefault.Thismayinvolvereplacing orrepairing the
faultycomponent(s)."
9008,"Afterthefaultiscorrected, itmustbedocumented."
9009,"Therecordshouldshowthe
exactlocationofthefault,thepossiblecause,theactionoractionstakentocorrectthe
fault,thecost,andtimeittookforeachstep.Documentation isextremely important for
severalreasons:
oTheproblemmayrecur.Documentation canhelpthepresentorfutureadministrator
ortechnician solveasimilarproblem."
9010,"oThefrequency ofthesamekindoffailureisanindication ofamajorproblem in
thesystem.Ifafaulthappensfrequently inonecomponent, itshouldbereplaced
withasimilarone,orthewholesystemshouldbechangedtoavoidtheuseofthat
typeofcomponent."
9011,"oThestatisticishelpfultoanotherpartofnetwork management, performance
management.876CHAPTER 28NETWORK MANAGEMENT: SNMP
Proactive FaultManagement
Proactive faultmanagement triestopreventfaultsfromoccurring."
9012,"Although thisisnot
alwayspossible, sometypesoffailurescanbepredicted andprevented."
9013,"Forexample, if
amanufacturer specifies alifetimeforacomponent orapartofacomponent, itisa
goodstrategytoreplaceitbeforethattime.Asanotherexample, ifafaulthappens
frequently atoneparticular pointofanetwork, itiswisetocarefully reconfigure the
networktopreventthefaultfromhappening again."
9014,"Performance Management
Performance management, whichiscloselyrelatedtofaultmanagement, triesto
monitorandcontrolthenetworktoensurethatitisrunningasefficiently aspossible."
9015,"Performance management triestoquantify performance byusingsomemeasurable
quantitysuchascapacity, traffic,throughput, orresponse time."
9016,"Capacity
Onefactorthatmustbemonitored byaperformance management systemisthecapacity
ofthenetwork."
9017,"Everynetworkhasalimitedcapacity, andtheperformance management
systemmustensurethatitisnotusedabovethiscapacity."
9018,"Forexample, ifaLANis
designed for100stationsatanaveragedatarateof2Mbps,itwillnotoperateproperlyif
200stationsareconnected tothenetwork."
9019,"Thedataratewilldecrease andblocking
mayoccur."
9020,"Traffic
Trafficcanbemeasured intwoways:internally andexternally."
9021,"Internaltrafficismea­
suredbythenumberofpackets(orbytes)traveling insidethenetwork."
9022,"External traffic
ismeasured bytheexchange ofpackets(orbytes)outsidethenetwork."
9023,"Duringpeak
hours,whenthesystemisheavilyused,blocking mayoccurifthereisexcessive traffic."
9024,"Throughput
Wecanmeasure thethroughput ofanindividual device(suchasarouter)orapartof
thenetwork."
9025,"Performance management monitors thethroughput tomakesurethatitis
notreducedtounacceptable levels."
9026,"Response Time
Response timeisnormally measured fromthetimeauserrequestsaservicetothetime
theserviceisgranted.Otherfactorssuchascapacityandtrafficcanaffecttheresponse
time.Performance management monitors theaverageresponse timeandthepeak-hour
response time.Anyincreaseinresponse timeisaveryserious condition asitisanindi­
cationthatthenetworkisworkingaboveitscapacity."
9027,"Security Management
Security management isresponsible forcontrolling accesstothenetworkbasedon
thepredefined policy.Wediscusssecurityandinparticular networksecurityinChap­
ters31and32.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 877
Accounting Management
Accounting management isthecontrolofusers'accesstonetworkresources through
charges.Underaccounting management, individual users,departments, divisions, or
evenprojectsarechargedfortheservicestheyreceivefromthenetwork."
9028,"Charging does
notnecessarily meancashtransfer;itmaymeandebitingthedepartments ordivisions
forbudgeting purposes."
9029,"Today,organizations useanaccounting management system
forthefollowing reasons:
oItpreventsusersfrommonopolizing limitednetworkresources."
9030,oItpreventsusersfromusingthesysteminefficiently.
9031,"oNetwork managers candoshort-andlong-term planning basedonthedemandfor
networkuse."
9032,"28.2SIMPLE NETWORK MANAGEMENT
PROTOCOL (SNMP)
TheSimpleNetwork Management Protocol (SNMP) isaframework formanaging
devicesinaninternetusingtheTCPIIPprotocolsuite.Itprovides asetoffundamental
operations formonitoring andmaintaining aninternet."
9033,"Concept
SNMPusestheconceptofmanager andagent.Thatis,amanager, usuallyahost,
controlsandmonitors asetofagents,usuallyrouters(seeFigure28.2)."
9034,"Figure28.2SNMPconcept
Agentvariables
AgentInternet
1------.-'1;':':1---,....,--Manager
SNMPisanapplication-level protocolinwhichafewmanager stationscontrola
setofagents.Theprotocol isdesigned attheapplication levelsothat itcanmonitor
devicesmadebydifferent manufacturers andinstalledondifferent physicalnetworks."
9035,"Inotherwords,SNMPfreesmanagement tasksfromboththephysicalcharacteristics
ofthemanaged devicesandtheunderlying networking technology."
9036,"Itcanbeusedina
heterogeneous internetmadeofdifferentLANsandWANsconnected byroutersmade
bydifferentmanufacturers.878CHAPTER 28NETWORK MANAGEMENT: SNMP
Managers andAgents
Amanagement station,calledamanager, isahostthatrunstheSNMPclientprogram."
9037,"A
managed station,calledanagent,isarouter(orahost)thatrunstheSNMPserverprogram."
9038,Management isachieved throughsimpleinteraction betweenamanager andanagent.
9039,Theagentkeepsperformance information inadatabase.
9040,"Themanager hasaccess
tothevaluesinthedatabase."
9041,"Forexample, aroutercanstoreinappropriate variables
thenumberofpacketsreceived andforwarded."
9042,"Themanager canfetchandcompare the
valuesofthesetwovariables toseeiftherouteriscongested ornot."
9043,"Themanager canalsomaketherouterperform certainactions.Forexample, a
routerperiodically checksthevalueofarebootcountertoseewhenitshouldreboot
itself.Itrebootsitself,forexample, ifthevalueofthecounterisO.Themanager can
usethisfeaturetoreboottheagentremotely atanytime.Itsimplysendsapacketto
forcea0valueinthecounter."
9044,"Agentscanalsocontribute tothemanagement process.Theserverprogram running
ontheagentcanchecktheenvironment, andifitnoticessomething unusual, itcansend
awarningmessage, calledatrap,tothemanager."
9045,"Inotherwords,management withSNMPisbasedonthreebasicideas:
1.Amanager checksanagentbyrequesting information thatreflects the behavior of
theagent."
9046,2.Amanager forcesanagenttoperformataskbyresetting valuesintheagentdatabase.
9047,"3.Anagentcontributes tothemanagement processbywarning themanager ofan
unusualsituation."
9048,"Management Components
Todomanagement tasks,SNMPusestwootherprotocols: Structure ofManagement
Information (SMI)andManagement Information Base(MIB).Inotherwords,man­
agement ontheInternetisdonethroughthecooperation ofthethreeprotocols SNMP,
SMI,andMIB,asshowninFigure28.3.
Figure28.3Components ofnetworkmanagement ontheInternet
Management
ISNMP
8MIIMIBI
Letuselaborate ontheinteractions between theseprotocols."
9049,"RoleofSNMP
SNMPhassomeveryspecificrolesinnetwork management."
9050,"Itdefinestheformatof
thepackettobesentfromamanager toanagentandviceversa.Italsointerprets theSECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 879
resultandcreatesstatistics (oftenwiththehelpofothermanagement software)."
9051,"The
packetsexchanged containtheobject(variable) namesandtheirstatus(values)."
9052,"SNMP
isresponsible forreadingandchanging thesevalues."
9053,SNMPdefinestheformatofpacketsexchanged betweenamanager andanagent.
9054,Itreadsandchangesthestatus(values)ofobjects(variables) in8NMPpackets.
9055,"RoleofSMI
TouseSNMP,weneedrules.Weneedrulesfornamingobjects.Thisisparticularly
important becausetheobjectsinSNMPformahierarchical structure (anobjectmay
haveaparentobjectandsomechildrenobjects)."
9056,"Partofanamecanbeinherited from
theparent.Wealsoneedrulestodefinethetypeoftheobjects.Whattypesofobjects
arehandledbySNMP?CanSNMPhandlesimpletypesorstructured types?Howmany
simpletypesareavailable?"
9057,"Whatarethesizesofthesetypes?Whatistherangeofthese
types?Inaddition, howareeachofthesetypesencoded?"
9058,"Weneedtheseuniversal rulesbecausewedonotknowthearchitecture ofthecom­
putersthatsend,receive,orstorethesevalues.Thesendermaybeapowerful computer
inwhichanintegerisstoredas8-bytedata;thereceivermaybeasmallcomputer that
storesanintegeras4-bytedata."
9059,"SMIisaprotocolthatdefinestheserules.However, wemustunderstand thatSMI
onlydefinestherules;itdoesnotdefinehowmanyobjectsaremanaged inanentityor
whichobjectuseswhichtype.SMIisacollection ofgeneralrulestonameobjectsand
tolisttheirtypes.Theassociation ofanobjectwiththetypeisnotdonebySMI."
9060,"8MIdefinesthegeneralrulesfornamingobjects,definingobjecttypes(including
rangeandlength),andshowinghowtoencodeobjectsandvalues."
9061,"8M1doesnotdefinethenumberofobjectsanentityshouldmanageornametheobjects
tobemanaged ordefinetheassociation betweentheobjectsandtheirvalues."
9062,"RoleofMIB
Wehopeitisclearthatweneedanotherprotocol."
9063,"Foreachentitytobemanaged, this
protocol mustdefinethenumberofobjects,namethemaccording totherulesdefined
bySMI,andassociate atypetoeachnamedobject.ThisprotocolisMIB.MIBcreates
asetofobjectsdefinedforeachentitysimilartoadatabase (mostlymetadata inadata­
base,namesandtypeswithoutvalues)."
9064,":MIBcreatesacollection ofnamedobjects,theirtypes,andtheirrelationships to
eachotherinanentitytobemanaged."
9065,"AnAnalogy
Beforediscussing eachoftheseprotocols ingreaterdetail,wegiveananalogy."
9066,"The
threenetworkmanagement components aresimilartowhatweneedwhenwewritea
programinacomputer language tosolveaproblem.880CHAPTER 28NETWORK MANAGEMENT: SNMP
Beforewewriteaprogram, thesyntaxofthelanguage (suchasCorJava)mustbe
predefined."
9067,"Thelanguage alsodefinesthestructure ofvariables (simple,structured,
pointer,andsoon)andhowthevariables mustbenamed.Forexample, avariablename
mustbe1toNcharacters inlengthandstartwithaletterfollowed byalphanumeric
characters."
9068,"Thelanguage alsodefinesthetypeofdatatobeused(integer,float,char,
etc.).Inprogramming therulesaredefinedbythelanguage."
9069,"Innetworkmanagement
therulesaredefinedbySMI."
9070,"Mostcomputer languages requirethatvariables bedeclaredineachspecificpro­
gram.Thedeclaration nameseachvariableanddefinesthepredefined type.Forexample,
ifaprogramhastwovariables (anintegernamedcounterandanarraynamedgradesof
typechar),theymustbedeclaredatthebeginning oftheprogram:
intcounter;
chargrades[40];
Notethatthedeclarations namethevariables (counterandgrades)anddefinethe
typeofeachvariable."
9071,"Becausethetypesarepredefined inthelanguage, theprogram
knowstherangeandsizeofeachvariable."
9072,MIBdoesthistaskinnetworkmanagement.
9073,"MIBnameseachobjectanddefines ~e
typeoftheobjects.BecausethetypeisdefinedbySMI,SNMPknowstherangeandsize."
9074,"Afterdeclaration inprogramming, theprogramneedstowritestatements tostore
valuesinthevariables andchangethemifneeded.SNMPdoesthistaskinnetwork
management."
9075,"SNMPstores,changes, andinterprets thevaluesofobjectsalready
declaredbyMIBaccording totherulesdefinedbySMI."
9076,Wecancompare thetaskofnetwork management tothetaskofwritingaprogram.
9077,oBothtasksneedrules.Innetworkmanagement thisishandledbySMI.
9078,oBothtasksneedvariabledeclarations.
9079,Innetworkmanagement thisishandledbyMIB.oBothtaskshaveactionsperformed bystatements.
9080,"Innetwork management thisis
handledbySNMP."
9081,"AnOverview
Beforediscussing eachcomponent indetail,weshowhoweachisinvolvedinasimple
scenario."
9082,"Thisisanoverview thatwillbedeveloped laterattheendofthechapter.A
manager station(SNMPclient)wantstosendamessage toanagentstation(SNMP
server)tofindthenumberofUDPuserdatagrams receivedbytheagent.Figure28.4
showsanoverview ofstepsinvolved."
9083,"MIBisresponsible forfindingtheobjectthatholdsthenumberoftheUDPuser
datagrams received."
9084,"SMI,withthehelpofanotherembedded protocol, isresponsible for
encoding thenameoftheobject.SNMPisresponsible forcreatingamessage, calleda
GetRequest message, andencapsulating theencoded message."
9085,"Ofcourse,thingsare
morecomplicated thanthissimpleoverview, butwefirstneedmoredetailsofeach
protocol.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 881
Figure28.4Management overview
NumberofUDPuserdatagrams?"
9086,"--------------~
Theobjecthasanintegervalueand
iscalledudpInDatagram withid
1.3.6.1.2.1.7.1.0
--------------~
Retrieve thevalueofanobject
withcode0609."
9087,"--------------jSNMPI
Encapsulate therequestina
GetRequest message
Structure ofManagement Information
TheStructure ofManagement Information, version2(SMIv2) isacomponent fornet­
workmanagement."
9088,"Itsfunctions are
1.Tonameobjects
2.Todefinethetypeofdatathatcanbestoredinanobject
3.Toshowhowtoencodedatafortransmission overthenetwork
SMIisaguideline forSNMP.Itemphasizes threeattributes tohandleanobject:name,
datatype,andencoding method(seeFigure28.5)."
9089,"Figure28.5Objectattributes
Objectattributes
Type
Name
SMIrequiresthateachmanaged object(suchasarouter,avariableinarouter,avalue)
haveauniquename.Tonameobjectsglobally, SMIusesanobjectidentifier, whichis
ahierarchical identifier basedonatreestructure (seeFigure28.6).882CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.6Objectidentifier
1.3.6.1(iso.org.dop.intemet)
1.3.6.1.2.1 (iso.org.dod.internet.mgmt.mib-2)
Thetreestructure startswithanunnamed root.Eachobjectcanbedefinedbyusing
asequence ofintegersseparated bydots.Thetreestructure canalsodefinean object by
usingasequence oftextualnamesseparated bydots.Theinteger-dot representation is
usedinSNMP.Thename-dot notationisusedbypeople.Forexample, thefollowing
showsthesameobjectintwodifferentnotations:
iso.org.dod.internet.mgmt.mib-2 ...1.3.6.1.2.1
TheobjectsthatareusedinSNMParelocatedunderthemib-2object,sotheir
identifiers alwaysstartwith1.3.6.1.2.1.
AUobjectsmanaged bySNMParegivenanobjectidentifier."
9090,"Theobjectidentifier alwaysstartswith1.3.6.1.2.1.
Type
Thesecondattributeofanobject isthetypeofdatastoredinit.Todefinethedatatype,
SMIusesfundamental Abstract SyntaxNotation 1(ASN.l) definitions andadds
somenewdefinitions."
9091,"Inotherwords,SMIisbothasubsetandasupersetofASN.1.
SMIhastwobroadcategories ofdatatype:simpleandstructured."
9092,"Wefirstdefine
thesimpletypesandthenshowhowthestructured typescanbeconstructed fromthe
simpleones(seeFigure28.7).SECTION 28.2SIMPLE NEIWORK MANAGEMENT PROTOCOL (SNMP) 883
Figure28.7Datatype
SimpleTypeThesimpledatatypesareatomicdatatypes.Someofthemaretaken
directlyfromASN.l;othersareaddedbySMI.Themostimportant onesaregivenin
Table28.1.ThefirstfivearefromASN.l;thenextsevenaredefinedbySMI."
9093,"Table28.1Datatypes
Type Size Description
INTEGER 4bytes Anintegerwithavaluebetween_231and231-1
Integer32 4bytes SameasINTEGER
Unsigned32 4bytes Unsigned withavaluebetween 0and232-1
OCTETSTRING Variable Bytestringupto65,535byteslong
OBJECT IDENTIFIER Variable Anobjectidentifier
IPAddress 4bytes AnIPaddressmadeoffourintegers
Counter32 4bytes Anintegerwhosevaluecanbeincremented
from0to232;whenitreachesitsmaximum
value,itwrapsbacktoO."
9094,"Counter64 8bytes 64-bitcounter
Gauge32 4bytes SameasCounter32, butwhenitreachesits
maximum value,itdoesnotwrap;itremains
thereuntilitisreset
TimeTicks 4bytes Acounting valuethatrecordstimeinl~s
BITS Astringofbits
Opaque Variable Uninterpreted string
Structured TypeBycombining simpleandstructured datatypes,wecanmakenew
structured datatypes.SMIdefinestwostructured datatypes:sequence andsequenceof
oSequence."
9095,"Asequence datatypeisacombination ofsimpledatatypes,notneces­
sarilyofthesametype.Itisanalogous totheconceptofastructorarecordusedin
programming languages suchasC."
9096,"oSequence of.Asequence ofdatatypeisacombination ofsimpledatatypesallof
thesametypeoracombination ofsequence datatypesallofthesametype.Itis
analogous totheconceptofanarrayusedinprogramming languages suchasC.884 CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.8showsaconceptual viewofdatatypes."
9097,"Figure28.8Conceptual datatypes-a.Simplevariable
b.Sequence of
(simplevariables)c.Sequence
d.Sequence of
(sequences)..."
9098,...
9099,"Encoding Method
SMIusesanotherstandard, BasicEncoding Rules(BER),toencodedatatobetrans­
mittedoverthenetwork."
9100,"BERspecifies thateachpieceofdatabeencoded intriplet
format:tag,length,andvalue,asillustrated inFigure28.9.
Figure28.9Encoding format
oTag.ThetagisaI-bytefieldthatdefinesthetypeofdata.Itiscomposed ofthree
subfields: class(2bits),fonnat (1bit),andnumber(5bits).Theclasssubfielddefines
thescopeofthedata.Fourclassesaredefined:universal (00),applicationwide (01),
context-specific (10),andprivate(11).Theuniversal datatypesarethosetakenfrom
ASN.l(INTEGER, OCTETSTRING, andObjectIdentifier)."
9101,"Theapplicationwide
datatypesarethoseaddedbySMI(IPAddress, Counter,Gauge,andTimeTicks)."
9102,"The
fivecontext-specific datatypeshavemeanings thatmaychangefromoneprotocolto
another.Theprivatedatatypesarevendor-specific."
9103,Theformatsubfieldindicates whetherthedataaresimple(0)orstructured (1).
9104,Thenumbersubfieldfurtherdividessimpleorstructured dataintosubgroups.
9105,"For
example, intheuniversal class,withsimpleformat,INTEGER hasavalueof2,
OCTETSTRING hasavalueof4,andsoon.Table28.2showsthedatatypeswe
useinthischapterandtheirtagsinbinaryandhexadecimal numbers.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 885
Table28.2Codesfordatatypes
DataType ClassFormat Number Tag(Binary) Tag(Hex)
INTEGER 00 000010 00000010 02
OCTETSTRING 00 000100 00000100 04
OBJECT IDENTIFIER 00 000110 00000110 06
NULL 00 000101 00000101 05
Sequence, sequence of00 110000 00110000 30
IPAddress 01 000000 01000000 40
Counter 01 000001 01000001 41
Gauge 01 000010 01000010 42
TimeTicks 01 000011 01000011 43
Opaque 01 000100 01000100 44
oLength."
9106,"ThelengthfieldisIormorebytes.Ifitis1byte,themostsignificant bit
mustbeO.Theother7bitsdefinethelengthofthedata.Ifitismorethan1byte,
themostsignificant bitofthefirstbytemustbe1.Theother7bitsofthefirstbyte
definethenumberofbytesneededtodefinethelength.SeeFigure28.10fora
depiction ofthelengthfield."
9107,"Figure28.10Lengthformat
~
a.Thecoloredpartdefinesthelength(2)."
9108,"~~~
b.Theshadedpartdermesthelengthofthelength(2bytes);
thecoloredbytesdefinethelength(260bytes)."
9109,"oValue.Thevaluefieldcodesthevalueofthedataaccording totherulesdefined
inBER."
9110,"Toshowhowthesethreefields-tag, length,andvalue-can defineobjects,wegive
someexamples."
9111,"Example 28.1
Figure28.11showshowtodefineINTEGER 14."
9112,"Example 28.2
Figure28.12showshowtodefinetheOCTETSTRING ""HI.""886CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.11Example 28.1,INTEGER 14
Value(14)02
Tag
(integer)04
,';
1.li.lOOO100
Length
(4bytes)00
0000000000
0000000000
00000000OE
00001110
Figure28.12Example 28.2,OCTETSTRING ""HI""
04 02 48 49
00000010~~'.01001000 01001001
Tag Length Value Value
(String) (2bytes) (H) (1)
Example 28.3
Figure28.13showshowtodefineObjectIdentifier 1.3.6.1(iso.org.dod.internet)."
9113,"Figure28.13Example 28.3,ObjectIdentifier 1.3.6.1
06 04
~(~ ..~~~OOOQQIQ(J~·J
Tag Length
(ObjectId) (4bytes)
I-01
00000001
Value
(1)03 06 01
00000011 00000110 00000001
Value Value Value
(3) (6) 0)
1.3.6.1(iso.org.dod.intemet)'I
Example 28.4
Figure28.14showshowtodefineIPAddress 131.21.14.8.
Figure28.14Example 28.4,IPAddress 131.21.14.8
04 83 15 OE 08
000oo100 10000011 00010101 00001110 00001000
Tag Length Value Value Value Value
(IPAddress) (4bytes) (131) (21) (14) (8)
I- 131.21.14.8 >I
Management Information Base(MIB)
TheManagement Information Base,version2(MIB2)isthesecondcomponent usedin
networkmanagement."
9114,"EachagenthasitsownMIB2,whichisacollection ofallthe
objectsthatthemanager canmanage."
9115,"TheobjectsinMIB2arecategorized under10SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 887
different groups:system,interface, addresstranslation, ip,icmp,tcp,udp,egp,trans­
mission, andsnmp.Thesegroupsareunderthemib-2objectintheobjectidentifier tree
(seeFigure28.15).Eachgrouphasdefinedvariables and/ortables."
9116,"Figure28.15mib-2
1.3.6.1.2.1
Thefollowing isabriefdescription ofsomeoftheobjects:
DsysThis object (system) definesgeneralinformation aboutthenode(system),
suchasthename,location, andlifetime."
9117,"DifThisobject(inteiface) definesinformation aboutalltheinterfaces ofthenode
including interface number,physical address,andIPaddress."
9118,DatThisobject(address translation) definestheinformation abouttheARPtable.
9119,"DipThisobjectdefinesinformation relatedtoIP,suchastheroutingtableandthe
IPaddress."
9120,"DicmpThisobjectdefinesinformation relatedtoICMP,suchasthenumberof
packetssentandreceived andtotalerrorscreated."
9121,"DtcpThisobjectdefinesgeneralinformation relatedtoTCP,suchastheconnection
table,time-out value,numberofports,andnumberofpacketssentandreceived."
9122,"DudpThis object definesgeneralinformation relatedtoUDP,suchasthenumber
ofportsandnumberofpacketssentandreceived."
9123,DsnmpThisobjectdefinesgeneralinformation relatedtoSNMPitself.
9124,"Accessing MIBVariables
Toshowhowtoaccessdifferent variables, weusetheudpgroupasanexample."
9125,"There
arefoursimplevariables intheudpgroupandonesequence of(tableof)records."
9126,Figure28.16showsthevariables andthetable.
9127,Wewillshowhowtoaccesseachentity.
9128,"SimpleVariables Toaccessanyofthesimplevariables, weusetheidofthegroup
(1.3.6.1.2.1.7) followed bytheidofthevariable."
9129,"Thefollowing showshowtoaccess
eachvariable."
9130,"udpInDatagrams
.udpNoPorts
udplnErrors
udpOutDatagrams1.3,6.1.2.1.7.1
1.3.6.1.2.1.7.2
1.3.6.1.2.1.7.3
1.3.6.1.2.1.7.4888 CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.16 udpgroup
udpLocal
AddressudpLocal
Port
However, theseobjectidentifiers definethevariable, nottheinstance(contents)."
9131,"Toshow
theinstanceorthecontentsofeachvariable, wemustaddaninstancesuffix.Theinstance
suffixforasimplevariableissimplyaO.Inotherwords,toshowaninstanceoftheabove
variables, weusethefollowing:
udpInDatagrams.O 1.3.6.1.2.1.7.1.0
udpNoPorts.O 1.3.6.1.2.1.7.2.0
udpInErrors.O 1.3.6.1.2.1.7.3.0
udpOutDa.tagrams.O 1.3.6.1.2.1.7.4.0
Tables Toidentifyatable,wefirstusethetableid.Theudpgrouphasonlyonetable
(withid5)asillustrated inFigure28.17."
9132,"Sotoaccessthetable,weusethefollowing:
udpTable...1.3.6.1.2.1.7.5
However, thetableisnotattheleaflevelinthetreestructure."
9133,"Wecannotaccessthe
table;wedefinetheentry(sequence) inthetable(withidof1),asfollows:
udpEntry...1.3.6.1.2.1.7.5.1
Thisentryisalsonotaleafandwecannotaccessit.Weneedtodefineeachentity
(field)intheentry."
9134,"udpLocalAddress 1.3.6.1.2.1.7.5.1.1
udpLocalPoo' 1.3.6.1.2.1.7.5.1.2
Thesetwovariables areattheleafofthetree.Although wecanaccesstheirinstances,
weneedto define whichinstance."
9135,"Atanymoment, thetablecanhaveseveralvaluesforSECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 889
Figure28.17udpvariables andtables
udpInDatagrams
(1.3.6.1.2.1.7.1)'---I
udpLocaIAddress
(1.3.6.1.2.1.7.5.1.1)---_I
udpLocaIPort
(1.3.6.1.2.1.7.5.1.2)
udpEntry
(1.3.6.1.2.1.7.5.1)
udpNoPorts
(1.3.6.1.2.1.7.2)_------I
udpLocaIAddress
(1.3.6.1.2.1.7.5.1.1)~~I
udpLocaIPort
(1.3.6.1.2.1.7.5.1.2)
udpEntry
(1.3.6.1.2.1.7.5.1)
udpEnn-y
(1.3.6.1.2.1. 7.5.1)udplnErrors
(1.3.6.1.2.1.7.3)
~------IudpOutDatagrams
(1.3.6.1.2.1.7.4)_------I
udpLocalAddress
(1.3.6.1.2.1.7.5.1.1)···
-------,udpLocalPon
(1.3.6.1.2.1.7.5.1.2)
udpTable
(1.3.6.1.2.1.7.5)
eachlocaladdress/local portpair.Toaccessaspecificinstance (row)ofthetable,we
addtheindextotheaboveids.InMIB,theindexesofarraysarenotintegers(likemost
programming languages)."
9136,"Theindexesarebasedonthevalueofoneormorefieldsin
theentries.Inourexample, theudpTable isindexedbasedonboththelocaladdressand
thelocalportnumber.Forexample, Figure28.18showsatablewithfourrowsandvalues
foreachfield.Theindexofeachrowisacombination oftwovalues."
9137,"Toaccesstheinstanceofthelocaladdressforthefirstrow,weusetheidentifier
augmented withtheinstanceindex:
udpLocalAddress.181.23.45.14.23 ......1.3.6.1.2.7.5.1.1.181.23.45.14.23
Note that notalltablesareindexedinthesameway.Sometablesareindexedbyusing
thevalueofonefield,othersbyusingthevalueoftwofields,andsoon."
9138,"Lexicographic Ordering
Oneinteresting pointabouttheMIBvariables isthattheobjectidentifiers (including
theinstanceidentifiers) followinlexicographic order.Tablesareorderedaccording to
column-row rules,whichmeansoneshouldgocolumnbycolumn.Ineachcolumn,one
shouldgofromthetoptothebottom,asshowninFigure28.19.890CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.18IndexesforudpTable
181.23.45.14I
1.3.6.1.2.1.7.5.1.1.181.23.45.14.23
192.13.5.10
1.3.6.1.2.1.7.5.1.1.192.13.5.10.161
227.2.45.18
1.3.6.1.2.1.7.5.1.1.227.2.45.18.180
230.20.5.24I
1.3.6.1.2.1.7.5.1.1.230.20.5.24.212
Figure28.19Lexicographic ordering23I
1.3.6.1.2.1.7.5.1.2.181.23.45.14.23
o
1.3.6.1.2.1.7.5.1.2.192.13.5.10.161
180I
1.3.6.1.2.1.7 .5.1.2.227.2.45.18.180
212I
1.3.6.1.2.1.7.5.1.2.230.20.5.24.212
I ~
I
I181.23.45.14I )23I
I
1.3.6.1.2.1.7.5.1. .181.23.45.14.23 1.3.6.1.2!1.7.5.1..181.23.45.14.23I
I
I
I
IIII I192.13.5.10I 161I
I
1.3.6.1.2.1.7.5.1. .192.13.5.10.161 /1.3.6.1.2.1.7.5.1. .192.13.5.10.161
I
I
I
I
IIII I227.2.45.18I180I
I
I1.3.6.1.2.1.7.5.1. 1.3.6.1.2.1.7.5.1. .227.2.45.18.1&0 .227.2.45.18.180
I
I
I
I
I230.20.5.24I I212I
I1.3.6.1.2.1.7 .5.1. 1.3.6.1.2.1.7.5.1. .23tl.20.5.24.212 .230.20.5.24.212
I
ISECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 891
Thelexicographic ordering enablesamanager toaccessasetofvariables oneafter
anotherbydefiningthefirstvariable, aswewillseeintheGetNextRequest command in
thenextsection."
9139,"SNMP
SNMPusesbothSMIandMIBinInternetnetwork management."
9140,"Itisanapplication
program thatallows
1.Amanager toretrievethevalueofanobjectdefinedinanagent
2.Amanager tostoreavalueinanobjectdefinedinanagent
3.Anagenttosendanalarmmessage aboutanabnormal situation tothemanager
PDUs
SNMPv3 defineseighttypesofpackets(orPDUs):GetRequest, GetNextRequest, Get­
BulkRequest, SetRequest, Response, Trap,InformRequest, andReport(seeFigure28.20)."
9141,"Figure28.20SNMPPDUs
UDP
connections
TrapSNMP
manager
Client
<r--~-....R_e-,""""-spo-....n-,,se,,---,~_: ~~',,,---',_''-I',I
~SNMP
agent
Server
-;~:~~~~epa~f~7 Toanothermanager'---_ ......"
9142,"GetRequest TheGetRequest PDUissentfromthemanager (client)totheagent
(server)toretrievethevalueofavariableorasetofvariables."
9143,"GetNextRequest TheGetNextRequest PDUissentfromthemanager totheagentto
retrievethevalueofavariable.Theretrieved valueisthevalueoftheobjectfollowing the
definedObjectidinthePDD.Itismostlyusedtoretrievethevaluesoftheentriesinatable."
9144,"Ifthemanagerdoesnotknowtheindexesoftheentries,itcannotretrievethevalues.How­
ever,itcanuseGetNextRequest anddefinetheObjectIdofthetable.Becausethefirstentry
hastheObjectId immediately aftertheObjectId ofthetable,thevalueofthefirstentryis
returned."
9145,"ThemanagercanusethisObjectIdtogetthevalueofthenextone,andsoon.892 CHAPTER 28NETWORK MANAGEMENT: SNMP
GetBulkRequest TheGetBulkRequest PODissentfromthemanager totheagent
toretrievealargeamountofdata.Itcanbeusedinsteadofmultiple GetRequest and
GetNextRequest PODs.
SetRequest TheSetRequest PDDissentfromthemanager totheagenttoset(store)
avalueinavariable."
9146,"Response TheResponse PDDissentfromanagenttoamanager inresponse to
GetRequest orGetNextRequest."
9147,"Itcontainsthevalue(s)ofthevariable(s) requested by
themanager."
9148,"TrapTheTrap(alsocalledSNMPv2 Traptodistinguish itfromSNMPv1Trap)
PODissentfromtheagenttothemanager toreportanevent.Forexample, iftheagent
isrebooted, itinfonnsthemanager andreportsthetimeofrebooting."
9149,"InformRequest TheInfonnRequest PODissentfromonemanagertoanotherremote
manager togetthevalueofsomevariables fromagentsunderthecontroloftheremote
manager."
9150,Theremotemanager responds withaResponse POD.
9151,Report TheReportPODisdesigned toreportsometypesoferrorsbetweenmanagers.
9152,Itisnotyetinuse.
9153,"Format
ThefonnatfortheeightSNMPPODsisshowninFigure28.21.TheGetBulkRequest
PODdiffersfromtheothersintwoareas,asshowninthefigure."
9154,"Figure28.21 SNMPPDUformat
PDU
VarBind list:I
I'l~-~IValueI···IVaria.ble:11Value1
Differences:
1.Errorstatusanderrorindexvaluesarezerosforallrequest
messages exceptGetBulkRequest."
9155,"2.Errorstatusfieldisreplaced bynonrepeater fieldanderrorindex
fieldisreplaced bymax-repetitions fieldinGetBulkRequest."
9156,"Thefieldsarelistedbelow:
oPDUtype.ThisfielddefinesthetypeofthePOD(seeTable28.4)."
9157,"oRequestID.Thisfieldisasequence numberusedbythemanagerinaRequestPOD
andrepeatedbytheagentinaresponse.Itisusedtomatcharequesttoaresponse.SECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 893
oErrorstatus.ThisisanintegerthatisusedonlyinResponse PDUstoshowthe
typesoferrorsreported bytheagent.Itsvalueis0inRequestPDUs.Table28.3
liststhetypesoferrorsthatcanoccur."
9158,"Table28.3Typesoferrors
Status Name Meaning
0noError No error
1tooBig Response toobigtofitinonemessage
2noSuchName Variable doesnotexist
3badValue Thevaluetobestoredisinvalid
4readOnly Thevaluecannotbemodified
5genErr Othererrors
oNonrepeaters."
9159,"ThisfieldISusedonlyinGetBulkRequest andreplacestheerror
statusfield,whichisemptyinRequestPDUs.
oErrorindex.Theerrorindexisanoffsetthattellsthemanager whichvariable
causedtheerrOr.
oMax~repetition."
9160,"ThisfieldisalsousedonlyinGetBulkRequest andreplacesthe
errorindexfield,whichisemptyinRequestPDUs.
oVarBind list.Thisisasetofvariables withthecorresponding valuesthemanager
wantstoretrieveorset.ThevaluesarenullinGetRequest andGetNextRequest."
9161,"In
aTrapPDU,itshowsthevariables andvaluesrelatedtoaspecificPDU."
9162,"Messages
SNMPdoesnotsendonlyaPDU,itembedsthePDUinamessage."
9163,"Amessage in
SNMPv3 ismadeoffourelements: version, header,security parameters, anddata
(whichincludetheencodedPDU),asshowninFigure28.22."
9164,"Becausethelengthoftheseelements isdifferentfrom message tomessage, SNMP
usesBERtoencodeeachelement."
9165,"Remember thatBERusesthetagandthelengthto
defineavalue.Theversiondefinesthecurrentversion(3).Theheadercontainsvaluesfor
message identification, maximum message size(themaximum sizeofthereply),mes­
sageflag(oneoctetofdatatypeOCTETSTRING whereeachbitdefinessecuritytype,
suchasprivacyorauthentication, Orotherinformation), and amessage securitymodel
(defining thesecurityprotocol)."
9166,"Themessage securityparameter isusedtocreateames­
sagedigest(seeChapter31).ThedatacontainthePDU.Ifthedataareencrypted, thereis
information abouttheencrypting engine(themanager programthatdidtheencryption)
andtheencrypting context(thetypeofencryption) followed bytheencrypted PDU.Ifthe
dataarenotencrypted, thedataconsistofjustthePDU."
9167,"TodefinethetypeofPDU,SNMPusesatag.Theclassiscontext-sensitive (10),the
formatisstructured (1),andthenumbers are0,1,2,3,5,6,7,and8(seeTable28.4)."
9168,"NotethatSNMPvl definedA4forTrap,whichisobsoletetoday.894CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.22SNMPmessage
Message
Version
Header
Securityparameter
Data
ContextengineID
Contextname
PDU
Table28.4CodesforSNMPmessages
, WholeTagWholeTag
Data ClassFormat Number (Binary) (Hex)
GetRequest 10 100000 10100000 AO
GetNextRequest 10 100001 10100001 Al
Response 10 100010 10100010 A2
SetRequest 10 100011 10100011 A3
GetBulkRequest 10 100101 10100101 AS
InformRequest 10 100110 10100110 A6
Trap(SNMPv2) 10 100111 10100111 A7
Report 10 101000 10101000 A8
Example 28,5
Inthisexample, amanager station(SNMPclient)usestheGetRequest message toretrievethe
numberofUDPdatagrams thatarouterhasreceived."
9169,"ThereisonlyoneVarBindentity.Thecorresponding MIDvariablerelatedtothisinforma­
tionisudpInDatagrams withtheobjectidentifier 1.3.6.1.2.1.7.1.0. Themanager wantstoretrieve
avalue(nottostoreavalue),sothevaluedefinesanullentity.Figure28.23showstheconceptualSECTION 28.2SIMPLE NETWORK MANAGEMENT PROTOCOL (SNMP) 895
Figure28.23 Example 28.5
3034
020103 INTEGER, version
300C1--...-IHeader,sequence
oflength12,notshown
020140 ]Two
0202 04 00 INTEGERs
040100J0400 Three
04 00 OCTETSTRINGs
30IF
AO10
0204000106IlThr
020100 ee
020100 INTEGERsData,a
30OFGetRequestsequencePDUofof31
30on length29bytesVarBindII0609010306010201070100Iv:Bindlist0500 arWholemessage
asequence of
52bytes
viewofthepacketandthehierarchical natureofsequences."
9170,"Wehaveusedwhiteandcoloredboxes
forthesequences andagrayoneforthePDU."
9171,TheVarBind listhasonlyoneVarBind.
9172,"Thevariableisoftype06andlength09.Thevalueis
oftype05andlength00.ThewholeVarBind isasequence oflengthOD(13).TheVarBind listis
alsoasequence oflengthOF(15).TheGetRequest PDUisoflengthID(29)."
9173,"NowwehavethreeOCTETSTRINGs relatedtothesecurityparameter, securitymodel,and
flags.Thenwehavetwointegers defining maximum size(1024)andmessage ID(64).The
headerisasequence oflength12,whichweleftblankforsimplicity."
9174,"Thereisoneinteger,version
(version3).Thewholemessage isasequence of52bytes."
9175,Figure28.24showstheactualmessagesentbythemanager station(client)totheagent(server).
9176,"UDPPorts
SNMPusestheservicesofUDPontwowell-known ports,161and162.Thewell­
knownport161isusedbytheserver(agent),andthewell-known port162isusedby
theclient(manager)."
9177,"Theagent(server)issuesapassiveopenonport161.Itthenwaitsforaconnection
fromamanager (client).Amanager (client)issuesanactiveopen,usinganephemeral
port,Therequestmessages are sentfromtheclienttotheserver,usingtheephemeral
portasthesourceportandthewell-known port161asthedestination port.The
response messages aresentfromtheservertotheclient,usingthewell-known port161
asthesourceportandtheephemeral portasthedestination port."
9178,"Themanager (client)issuesapassiveopenonport162.Itthenwaitsforaconnec­
tionfromanagent(server).Whenever ithasaTrapmessagetosend,anagent(server)
issuesanactiveopen,usinganephemeral port.Thisconnection isonlyone-way, from
theservertotheclient(seeFigure28.25).896CHAPTER 28NETWORK MANAGEMENT: SNMP
Figure28.24GetRequest message
&Packet me=!
cu::uJ~
Manager ..-
Agent
30340201
0330OC
02
CLl014002 02bOoj0400 04 01 '""'""800040004
tl0030IFAOCLl::;10020400 0'
~01061102O:l001000201
0030OF30
0006 09 01
03060102
01070100
0500
Figure28.25PortnumbersforSNMP
ClientPassive
openPassive
OII(0pen."
9179,IServer-_......
9180,"a.Passiveopenbybothclientandserver
Active
=8000:...,0II(f-°..;:.p_en --+j._
Client IServer--- '---
b.Exchange ofrequestandresponse messages
'__C_li_en_t_~f-ool(E---------A-O-~t1-~~-e~='__se_rv_e_r_
c.ServersendstrapmessageSECTION 28.4KEYTERMS 897
Theclient/server mechanism inSNMPisdifferent fromotherprotocols."
9181,"Hereboth
theclientandtheserverusewell-known ports.Inaddition, boththeclientandthe
serverarerunninginfinitely."
9182,"Thereasonisthatrequestmessages areinitiatedbyaman­
ager(client),butTrapmessages areinitiatedbyanagent(server)."
9183,"Security
Themaindifference betweenSNMPv3 andSNMPv2 istheenhanced security.SNMPv3
provides twotypesofsecurity:generalandspecific.SNMPv3 providesmessageauthenti­
cation,privacy,andmanagerauthorization."
9184,"WediscussthesethreeaspectsinChapter31.In
addition, SNMPv3 allowsamanager toremotely changethesecurityconfiguration, which
meansthatthemanagerdoesnothavetobephysically presentatthemanager station."
9185,"28.3RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext."
9186,"Books
SNMPisdiscussed in[MS01], Chapter 25of[Ste94], Section22.3of[Sta04],and
Chapter39of[Com04]."
9187,Network management isdiscussed in[Sub01].
9188,"Sites
Thefollowing sitesarerelatedtotopicsdiscussed inthischapter."
9189,"owww.ietf.org/rfc.html Information aboutRFCs
RFCs
Thefollowing RFCsarerelatedtoSNMP,MIB,andSMI:
1065,1067,1098, 1155,1157, 1212, 1213, 1229,1231,1243, 1284, 1351,1352,1354, 1389,
1398,1414,1441,1442,1443,1444,1445, 1446,1447,1448,1449, 1450, 1451,1452, 1461,
1472,1474, 1537, 1623,1643,1650, 1657, 1665, 1666,1696,1697, 1724, 1742,1743, 1748,
1749
28.4KEYTERMS
Abstract SyntaxNotation 1(ASN.l)
accounting management
agent
BasicEncoding Rules(BER)
configuration management
faultmanagement
hardware documentationlexicographic ordering
Management Information Base(MIB)
manager
networkmanagement
objectidentifier
performance management
securitymanagement898CHAPTER 28NE1WORK MANAGEMENT: SNMP
simpledatatype
SimpleNetwork Management Protocol
(SNMP)
structured datatypeStructure ofManagement Information
(SMI)
trap
28.5SUMMARY
oThefiveareascomprising networkmanagement areconfiguration management,
faultmanagement, performance management, accounting management, andsecurity
management."
9190,"oConfiguration management isconcerned withthephysical orlogicalchangesof
networkentities.Itincludes thereconfiguration anddocumentation ofhardware,
software, anduseraccounts."
9191,"oFaultmanagement isconcerned withtheproperoperation ofeachnetworkcompo­
nent.Itcanbereactiveorproactive."
9192,"oPerformance management isconcerned withthemonitoring andcontrolofthe
networktoensurethenetworkrunsasefficiently aspossible.Itisquantified by
measuring thecapacity, traffic,throughput, andresponse time."
9193,oSecuritymanagement isconcerned withcontrolling accesstothenetwork.
9194,"oAccounting management isconcerned withthecontrolofuseraccesstonetwork
resources throughcharges."
9195,"oSimpleNetwork Management Protocol (SNMP) isaframework formanaging
devicesinaninternetusingtheTCP/IPprotocolsuite."
9196,"oAmanager, usuallyahost,controlsandmonitors asetofagents,usuallyrouters."
9197,oThemanager isahostthatrunstheSNMPclientprogram.
9198,oTheagentisarouterorhostthatrunstheSNMPserverprogram.
9199,"oSNMPfreesmanagement tasksfromboththephysicalcharacteristics ofthemanaged
devicesandtheunderlying networking technology."
9200,"oSNMPusestheservicesoftwootherprotocols: Structure ofManagement Infor­
mation(SMI)andManagement Information Base(MIB)."
9201,"oSMInamesobjects,definesthetypeofdatathatcanbestoredinanobject,and
encodesthedata."
9202,oSMIobjectsarenamedaccording toahierarchical treestructure.
9203,oSMIdatatypesaredefinedaccording toAbstractSyntaxNotation 1(ASN.l).
9204,oSMIusesBasicEncoding Rules(BER)toencodedata.
9205,oMIBisacollection ofgroupsofobjectsthatcanbemanaged bySNMP.
9206,oMIBuseslexicographic orderingtomanageitsvariables.
9207,"oSNMPfunctions inthreeways:
1.Amanager canretrievethevalueofanobjectdefinedinanagent."
9208,2.Amanager canstoreavalueinanobjectdefinedinanagent.
9209,"3.Anagentcansendanalarmmessage tothemanager.SECTION 28.6PRACTICE SET 899
oSNMPdefineseighttypesofpackets: GetRequest, GetNextRequest, SetRequest,
GetBulkRequest, Trap,InformRequest, Response, andReport."
9210,"oSNMPusestheservicesofUDPontwowell-known ports,161and162."
9211,oSNMPv3 hasenhanced securityfeaturesoverprevious versions.
9212,"28.6PRACTICE SET
ReviewQuestions
I.Definenetworkmanagement."
9213,2.Listfivefunctions ofnetworkmanagement.
9214,.3.Defineconfiguration management anditspurpose.
9215,4.Listtwosubfunctions ofconfiguration management.
9216,S.Definefaultmanagement anditspurpose.
9217,6.Listtwosubfunctions offaultmanagement.
9218,7.Defineperformance management anditspurpose.
9219,8.Listfourmeasurable quantities ofperformance management.
9220,9.Definesecuritymanagement anditspurpose.
9221,10.Defineaccountmanagement anditspurpose.
9222,"Exercises
II.Showtheencoding forINTEGER 1456."
9223,"12.Showtheencoding fortheOCTETSTRING ""HelloWorld.""
13.Showtheencoding foranarbitrary OCTETSTRING oflength 1000."
9224,14.Showhowthefollowing record(sequence) isencoded.
9225,"INTEGER
2345OCTETSTRING
""COMPUTER""IPAddress
185.32.1.5
15.Showhowthefollowing record(sequence) isencoded."
9226,"TimeTick
12000INTEGER
14564ObjectId
1.3.6.1.2.1.7
16.Showhowthefollowing array(sequence of)isencoded."
9227,"Eachelement isan
integer."
9228,"2345
1236
122
1236900CHAPTER 28NETWORK MANAGEMENT: SNMP
17.Showhowthefollowing arrayofrecords(sequence ofsequence) isencoded."
9229,"INTEGER
2345
1123
3456OCTETSTRING
""COMPUTER""
""DISK""
""MONITOR""Counter
345
1430
2313
18.Decodethefollowing."
9230,"a.020401021432
b.30060201 11020114
c.300904034143420202 14 14
d.30OA400423516271020214 12CHAPTER 29
Multimedia
Recentadvances intechnology havechanged ouruseofaudioandvideo.Inthepast,
welistenedtoanaudiobroadcast througharadioandwatched avideoprogram broad­
castthroughaTV.Weusedthetelephone network tointeractively communicate with
anotherparty.Buttimeshavechanged."
9231,"PeoplewanttousetheInternetnotonlyfortext
andimagecommunications, butalsoforaudioandvideoservices."
9232,"Inthischapter, we
concentrate onapplications thatusetheInternetforaudioandvideoservices."
9233,"Wecandivideaudioandvideoservices intothreebroadcategories: streaming
storedaudio/video, streaming liveaudio/video, andinteractive audio/video, asshown
inFigure29.1.Streaming meansausercanlistento(orwatch)thefileafterthedown­
loadinghasstarted."
9234,"Figure29.1Internetaudio/video
Inthefirstcategory, streaming storedaudio/video, thefilesarecompressed and
storedonaserver.Aclientdownloads thefilesthroughtheInternet."
9235,"Thisissometimes
referred toason-demand audio/video."
9236,"Examples ofstoredaudiofilesaresongs,
symphonies, booksontape,andfamouslectures."
9237,"Examples ofstoredvideofilesare
movies,TVshows,andmusicvideoclips."
9238,"Streaming storedaudio/video referstoon-demand
requestsforcompressed audio/video files."
9239,"901902CHAPTER 29MULTIMEDIA
Inthesecondcategory, streaming liveaudio/video, auserlistenstobroadcast
audioandvideothroughtheInternet.Agoodexampleofthistypeofapplication isthe
Internetradio.Someradiostationsbroadcast theirprograms onlyontheInternet; many
broadcast thembothontheInternetandontheair.InternetTVisnotpopularyet,but
manypeoplebelievethatTVstationswillbroadcast theirprograms ontheInternetin
thefuture."
9240,"Streaming liveaudio/video referstothebroadcasting of
radioandTVprograms throughtheInternet."
9241,"Inthethirdcategory, interactive audio/video, peopleusetheInternettointeractively
communicate withoneanother.Agoodexampleofthisapplication isInternettelephony
andInternetteleconferencing."
9242,"Interactive audio/video referstotheuseoftheInternet
forinteractive audio/video applications."
9243,"Wewilldiscussthesethreeapplications inthischapter,butfirstweneedtodiscuss
someotherissuesrelatedtoaudio/video: digitizing audioandvideoandcompressing
audioandvideo."
9244,"29.1DIGITIZING AUDIOANDVIDEO
BeforeaudioorvideosignalscanbesentontheInternet, theyneedtobedigitized."
9245,"We
discussaudioandvideoseparately."
9246,"Digitizing Audio
Whensoundisfedintoamicrophone, anelectronic analogsignalisgenerated which
represents thesoundamplitude asafunction oftime.Thesignaliscalledananalog
audiosignal.Ananalogsignal,suchasaudio,canbedigitized toproduceadigitalsig­
nal.According totheNyquisttheorem, ifthehighestfrequency ofthesignalisf,we
needtosamplethesignal21timespersecond.Thereareothermethods fordigitizing
anaudiosignal,buttheprinciple isthesame."
9247,"Voiceissampledat8000samplespersecondwith8bitspersample.Thisresultsin
adigitalsignalof64kbps.Musicissampledat44,100samplespersecondwith16bits
persample.Thisresultsinadigitalsignalof705.6kbpsformonaural and1.411Mbps
forstereo."
9248,"Digitizing Video
Avideoconsistsofasequence offrames.Iftheframesaredisplayed onthescreenfast
enough,wegetanimpression ofmotion.Thereasonisthatoureyescannotdistinguish
therapidlyflashingframesasindividual ones.Thereisnostandardnumberofframes
persecond;inNorthAmerica 25framespersecondiscommon."
9249,"However, toavoidaSECTION 29.2AUDIOANDVIDEOCOMPRESSION 903
condition knownasflickering, aframeneedstoberefreshed."
9250,"TheTVindustryrepaints
eachframetwice.Thismeans50framesneedtobesent,orifthereismemory atthe
sendersite,25frameswitheachframerepainted fromthememory."
9251,"Eachframeisdividedintosmallgrids,calledpictureelements orpixels.Forblack­
and-white TV,each8-bitpixelrepresents oneof256differentgraylevels.ForacolorTV,
eachpixelis24bits,with8bitsforeachprimarycolor(red,green,andblue)."
9252,Wecancalculate thenumberofbitsin1sforaspecificresolution.
9253,"Inthelowest
resolution acolorframeismadeof1024x768pixels.Thismeansthatweneed
2x25xI024x768x 24=944Mbps
Thisdatarateneedsaveryhighdataratetechnology suchasSONET.Tosendvideo
usinglower-rate technologies, weneedtocompress thevideo."
9254,Compresswn isneededtosendvideoovertheInternet.
9255,"29.2AUDIOANDVIDEOCOMPRESSION
TosendaudioorvideoovertheInternetrequirescompression."
9256,"Inthissection,wediscuss
audiocompression firstandthenvideocompression."
9257,"AudioCompression
Audiocompression canbeusedforspeechormusic.Forspeech,weneedtocompress
a64-kHzdigitized signal;formusic,weneedtocompress a1.41I-MHzsignal.Two
categories oftechniques areusedforaudiocompression: predictive encoding and
perceptual encoding."
9258,"Predictive Encoding
Inpredictive encoding, the differences between thesamplesareencoded insteadof
encoding allthesampledvalues.Thistypeofcompression isnormally usedforspeech."
9259,"Severalstandards havebeendefinedsuchasGSM(13kbps),G.729(8kbps),and
G.723.3 (6.4or5.3kbps).Detailed discussions ofthesetechniques arebeyondthe
scopeofthisbook."
9260,"Perceptual Encoding: MP3
Themostcommon compression technique thatisusedtocreateCD-quality audiois
basedontheperceptual encoding technique."
9261,"Aswementioned before,thistypeof
audioneedsatleast1.411Mbps;thiscannotbesentovertheInt~rnetwithoutcompres­
sion.MP3(MPEGaudiolayer3),apartoftheMPEGstandard(discussed inthevideo
compression section),usesthistechnique."
9262,"Perceptual encoding isbasedonthescienceofpsychoacoustics, whichisthestudy
ofhowpeopleperceive sound.Theideaisbasedonflawsinourauditory system:
Somesoundscanmaskothersounds.Masking canhappeninfrequency andtime.In904CHAPTER 29MULTIMEDIA
frequency masking, aloudsoundinafrequency rangecanpartiallyortotallymaska
softersoundinanotherfrequency range.Forexample, wecannothearwhatourdance
partnersaysinaroomwherealoudheavymetalbandisperforming."
9263,"Intemporal
masking, aloudsoundcannumbourearsforashorttimeevenafterthesoundhas
stopped."
9264,"MP3usesthesetwophenomena, frequency andtemporal masking, tocompress
audiosignals.Thetechnique analyzes anddividesthespectrum intoseveralgroups."
9265,"Zerobitsareallocated tothefrequency rangesthataretotallymasked.Asmallnumber
ofbitsareallocated tothefrequency rangesthatarepartiallymasked.Alargernumberof
bitsareallocated tothefrequency rangesthatarenotmasked."
9266,"MP3produces threedatarates:96kbps,128kbps,and160kbps.Therateisbased
ontherangeofthefrequencies intheoriginalanalogaudio."
9267,"VideoCompression
Aswementioned before,videoiscomposed ofmultiple frames.Eachframeisone
image.Wecancompress videobyfirstcompressing images.Twostandards areprevalent
inthemarket.JointPhotographic ExpertsGroup(JPEG)isusedtocompress images."
9268,"MovingPictureExpertsGroup(MPEG) isusedtocompress video.Webrieflydiscuss
JPEGandthenMPEG."
9269,"ImageCompression: lPEG
Aswediscussed previously, ifthepictureisnotincolor(grayscale),eachpixelcanbe
represented byan8-bitinteger(256levels).Ifthepictureisincolor,eachpixelcan
berepresented by24bits(3x 8bits),witheach8bitsrepresenting red,blue,orgreen
(RBG).Tosimplifythediscussion, weconcentrate onagrayscalepicture."
9270,"InJPEG,agrayscalepictureisdividedintoblocksof8 x 8pixels(seeFigure29.2)."
9271,"Figure29.2lPEGgrayscale
.."
9272,"Thepurposeofdividingthepictureintoblocksistodecreasethenumberofcalcula­
tionsbecause, asyouwillseeshortly,thenumberofmathematical operations foreach
pictureisthesquareofthenumberofunits."
9273,"ThewholeideaofJPEGistochangethepictureintoalinear(vector)setofnumbers
thatrevealstheredundancies."
9274,"Theredundancies (lackofchanges) canthenberemovedSECTION 29.2AUDIOANDVIDEOCOMPRESSION 905
byusingoneofthetextcompression methods."
9275,"Asimplified schemeoftheprocessis
showninFigure29.3.
Figure29.3lPEGprocess
ThreephasesofJPEG
IT][]•••bI
GJQ;)···~
oD···(I
Blocked
imageQuantizationData
compression001111·..000001
Compressed
image
Discrete CosineTransform (DCT) Inthisstep,eachblockof64pixelsgoesthrough
atransformation calledthediscrete cosinetransform (DCT).Thetransformation
changesthe64valuessothattherelativerelationships betweenpixelsarekeptbutthe
redundancies arerevealed."
9276,"Wedonotgivetheformulahere,butwedoshowtheresults
ofthetransformation for threecases."
9277,"Case1Inthiscase,wehaveablockofuniformgray,andthevalueofeachpixelis
20.Whenwedothetransformations, wegetanonzero valueforthefirstelement
(upperleftcomer);therestofthepixelshaveavalueofO.ThevalueofT(O,O)isthe
average(multiplied byaconstant) oftheP(x,y)valuesandiscalledthedevalue(direct
current,borrowed fromelectrical engineering)."
9278,"Therestofthevalues,calledaevalues,
inT(m,n)represent changesinthepixelvalues.Butbecausetherearenochanges, the
restofthevaluesareOs(seeFigure29.4)."
9279,"Figure29.4Case1:uniformgrayscale
20 202020202020 20 16000 0 0 0 00
20 2020 20 20 20 2020o0 0 0 0 0 0 0
20 2020 2020202020o0 0 0 0 0 0 0
--+-202020 2020 202020---+o0 0 0 0 0 0 0
2020202020 20 20 20o0 0 0 0 0 0 0
20 20 20 20 2020 20 20 o0 000 000
Picture20 20 20 20 202020 20 o0 0 0 0 0 00
20202020 20 20 2020o000 0 0 0 0
P(X,y) T(m,n)
Case2Inthesecondcase,wehaveablockwithtwodifferentuniformgrayscalesec­
tions.Thereisasharpchangeinthevaluesofthepixels(from20to50).Whenwedo
thetransformations, wegetadcvalueaswellasnonzeroacvalues.However, thereare
onlyafewnonzerovaluesclustered aroundthedcvalue.Mostofthevaluesare0(see
Figure29.5)."
9280,"Case3Inthethirdcase,wehaveablockthatchangesgradually."
9281,"Thatis,thereisno
sharpchangebetweenthevaluesofneighboring pixels.Whenwedothetransformations,
wegetadevalue,withmanynonzeroacvaluesalso(Figure29.6).906CHAPTER 29MULTIMEDIA
Figure29.5Case2:twosections
20 2020205050 50 50 28021090390225022
20 202020505050 50 0 0 0 0 0 0 00
iL202020 2050505050 0 0 0 0 0 0 0 0
---+202020 205050 50 50---+0 0 0 0 0 0 00
2020202050 505050 0 0 00 0 0 0 0
t, 20 20202050 5050 50 0 0 0 0 000 0
Picture20 20202050 50 50 50 0 0 0 0 0 0 00
20 2020 2050 505050 00 0 0 0 0 00
P(x,y) T(m,n)
Figure29.6Case3:gradient grayscale
2030405060708090 400214602312132128
2030405060708090 0 0 00 0 0 0 0
2030405060 708090 0000000 0
2030405060 708090 000000 0 0
2030405060 708090 0000000 0
2030405060 708090 0 0 0 0 0 00 0
Picture2030405060708090 0 0 00 0 0 0 0
2030405060 708090 0 0 00 0 0 0 0
P(x,y) T(m,n)
FromFigures29.4,29.5, and29.6,wecanstatethefollowing:
oThetransformation createstableTfromtableP."
9282,oThedcvalueistheaveragevalue(multiplied byaconstant) ofthepixels.
9283,oTheacvaluesarethechanges.
9284,"oLackofchangesinneighboring pixelscreatesOs.
Quantization MtertheTtableiscreated, the valuesarequantized toreducethenum­
berofbitsneededforencoding."
9285,"Previously inquantization, wedroppedthefraction
fromeachvalueandkepttheintegerpart.Here,wedividethenumberbyaconstantand
thendropthefraction."
9286,"Thisreducestherequired numberofbitsevenmore.Inmost
implementations, aquantizing table(8x8)defineshowtoquantize eachvalue.The
divisordependsonthepositionofthevalueintheTtable.Thisisdonetooptimize the
numberofbitsandthenumberofOsforeachparticular application."
9287,"Notethattheonly
phaseintheprocessthatisnotreversible isthequantizing phase.Welosesomeinfor­
mationherethatisnotrecoverable."
9288,"Asamatteroffact,theonlyreasonthatlPEGis
calledlossycompression isbecauseofthisquantization phase."
9289,"Compression Afterquantization, thevaluesarereadfromthetable,andredundant
Osareremoved."
9290,"However, toclustertheOstogether, thetableisreaddiagonally ina
zigzagfashionratherthanrowbyroworcolumnbycolumn.Thereasonisthatifthe
picturechangessmoothly, thebottomrightcorneroftheTtableisallOs.Figure29.7
showstheprocess.SECTION 29.2AUDIOANDVIDEOCOMPRESSION 907
Figure29.7Reading thetable
20151512171200000""·0
Result
VideoCompression: MPEG
TheMovingPictureExpertsGroupmethodisusedtocompress video.Inprinciple, a
motionpictureisarapidflowofasetofframes,whereeachframeisanimage.Inother
words,aframeisaspatialcombination ofpixels,andavideoisatemporal combination
offramesthataresentoneafteranother.Compressing video,then,meansspatiallycom­
pressingeachframeandtemporally compressing asetofframes."
9291,"SpatialCompression Thespatialcompression ofeachframeisdonewithIPEG(or
amodification ofit).Eachframeisapicturethatcanbeindependently compressed."
9292,"Temporal Compression Intemporal compression, redundant frames are removed."
9293,"Whenwewatchtelevision, wereceive50framespersecond.However, mostofthecon­
secutiveframesarealmostthesame.Forexample, whensomeone istalking,mostofthe
frameisthesameasthepreviousoneexceptforthesegmentoftheframearoundthelips,
whichchangesfromoneframetoanother."
9294,"Totemporally compress data,theMPEGmethodfirstdividesframesintothree
categories: I-frames, P-frames, andB-frames."
9295,oI-frames.
9296,"Anintracoded frame(I-frame) isanindependent framethatisnot
relatedtoanyotherframe(nottotheframesentbeforeortotheframesentafter)."
9297,"Theyarepresentatregularintervals (e.g.,everyninthframeisanI-frame)."
9298,"An
I-framemustappearperiodically tohandlesomesuddenchangeintheframethat
theprevious andfollowing framescannotshow.Also,whenavideoisbroadcast, a
viewermaytuneinatanytime.IfthereisonlyoneI-frameatthebeginning ofthe
broadcast, theviewerwhotunesinlatewillnotreceiveacomplete picture."
9299,I-framesareindependent ofotherframesandcannotbeconstructed fromotherframes.
9300,oP-frames.
9301,"Apredicted frame(P-frame) isrelatedtothepreceding I-frameor
P-frame.Inotherwords,eachP-framecontainsonlythechangesfromthepreceding908CHAPTER 29MULTIMEDIA
frame.Thechanges, however, cannotcoverabigsegment."
9302,"Forexample, forafast­
movingobject,thenewchangesmaynotberecorded inaP-frame."
9303,"P-frames canbe
constructed onlyfromprevious 1-orP-frames."
9304,"P-frames carry muchlessinforma­
tionthanotherframetypesandcarryevenfewerbitsaftercompression."
9305,oB-frames.
9306,"Abidirectional frame(B.frame) isrelatedtothepreceding and
following I-frameorP-frame."
9307,"Inotherwords,eachB-frame isrelativetothepast
andthefuture.NotethataB-frame isneverrelatedtoanotherB-frame."
9308,Figure29.8showsasamplesequence offrames.
9309,"Figure29.8MPEGframes
Figure29.9showshow1-,P-,andB-frames areconstructed fromaseriesofseven
frames."
9310,"Figure29.9MPEGframeconstruction
.---1 1----1
151 1617
1 :1 :
1 I
I I 1 1 I I
L 01""""___ __.I 1.__ 01L _
MPEGhasgonethroughtwoversions."
9311,"MPEG1wasdesigned foraCD-ROM with
adatarateof1.5Mbps.MPEG2wasdesigned forhigh-quality DVDwithadatarateof
3to6Mbps."
9312,"29.3STREAMING STORED AUDIONIDEO
Nowthatwehavediscussed digitizing andcompressing audio/video, weturnour
attention tospecificapplications."
9313,"Thefirstisstreaming storedaudioandvideo.Down­
loadingthesetypesoffilesfromaWebservercanbedifferent fromdownloading otherSECTION 29.3STREAMING STORED AUDIOIVIDEO 909
typesoffiles.Tounderstand theconcept, letusdiscussfourapproaches, eachwitha
differentcomplexity."
9314,"FirstApproach: UsingaWebServer
Acompressed audio/video filecanbedownloaded asatextfile.Theclient(browser)
canusetheservicesofHTTPandsendaGETmessage todownload thefile.TheWeb
servercansendthecompressed filetothebrowser."
9315,"Thebrowsercanthenuseahelp
application, normally calledamediaplayer,toplaythefile.Figure29.10showsthis
approach."
9316,"Figure29.10 UsingaWebserver
ClientmachineaServermachinei
-.GET:audio/video file-WebBrowser
RESPONSE .....server-
4~
Audio/video
file
Media
player
Thisapproach isverysimpleanddoesnotinvolvestreaming."
9317,"However, ithasa
drawback."
9318,Anaudio/video fileisusuallylargeevenaftercompression.
9319,"Anaudiofile
maycontaintensofmegabits, andavideofilemaycontainhundreds ofmegabits."
9320,"In
thisapproach, thefileneedstodownload completely beforeitcanbeplayed.Using
contemporary datarates,theuserneedssomesecondsortensofsecondsbeforethefile
canbeplayed."
9321,"SecondApproach: UsingaWebServerwithMetafile
Inanotherapproach, themediaplayerisdirectlyconnected totheWebserverfordown­
loadingtheaudio/video file.TheWebserverstorestwofiles:theactualaudio/video file
andametafilethatholdsinformation abouttheaudio/video file.Figure29.11showsthe
stepsinthisapproach."
9322,1.TheHTTPclientaccessestheWebserverbyusingtheGETmessage.
9323,2.Theinformation aboutthemetafilecomesintheresponse.
9324,3.Themetafileispassedtothemediaplayer.
9325,4.ThemediaplayerusestheURLinthemetafiletoaccesstheaudio/video file.
9326,"5.TheWebserverresponds.910CHAPTER 29MULTIMEDIA
Figure29.11UsingaWebserverwithametafile
Clientmachine&Servermachinei
l- GET:metafile
r-
Browser
RESPONSE-""l;I
., Web
Metafileserver
GET:audio/video fIle '-
Media'""playerRESPONSE .---
ThirdApproach: UsingaMediaServer
Theproblemwiththesecondapproach isthatthebrowserandthemediaplayerboth
usetheservicesofHTIP.HTIPisdesigned torunoverTCP.Thisisappropriate for
retrieving themetafile, butnotforretrieving theaudio/video file.Thereasonisthat
TCPretransmits alostordamaged segment, whichiscountertothephilosophy of
streaming."
9327,"WeneedtodismissTCPanditserror control~weneedtouseUDP.How­
ever,HTTP,whichaccessestheWebserver,andtheWebserveritselfaredesigned for
TCP;weneedanotherserver,amediaserver.Figure29.12showstheconcept."
9328,1.TheHTTPclientaccessestheWebserverbyusingaGETmessage.
9329,2.Theinformation aboutthemetafilecomesintheresponse.
9330,"Figure29.12Usingamediaserver
Clientmachine[J~Servermachinei
l- GET:metafile
'U'WebBrowser
RESPONSE ....server-
4'Metafile
GET:audio/video file I-."
9331,"Media~Media
playerRESPONSE-serverSECTION 29.3STREAMING STORED AUDIOIVIDEO 911
3.Themetafileispassedtothemediaplayer."
9332,"4.ThemediaplayerusestheURLinthemetafiletoaccessthemediaservertodown­
loadthefile.Downloading cantakeplacebyanyprotocolthatusesUDP."
9333,5.Themediaserverresponds.
9334,"FourthApproach: UsingaMediaServerandRTSP
TheReal-Time Streaming Protocol (RTSP)isacontrolprotocoldesigned toaddmore
functionalities tothestreaming process."
9335,"UsingRTSP,wecancontroltheplayingof
audio/video."
9336,"RTSPisanout-of-band controlprotocolthatissimilartothesecondcon­
nectioninFTP.Figure29.13showsamediaserverandRTSP."
9337,"Figure29.13UsingamediaserverandRTSP
Clientmachinea
GET:metafile
Browser
RESPONSE
Metafile
SETUP
RESPONSE
PLAY
Media
player
RESPONSEServermachinei
Web
server
Media
server
1.TheHTTPclientaccessestheWebserverbyusingaGETmessage."
9338,2.Theinformation aboutthemetafilecomesintheresponse.
9339,3.Themetafileispassedtothemediaplayer.
9340,"4.ThemediaplayersendsaSETUPmessage tocreateaconnection withthemedia
server."
9341,5.Themediaserverresponds.
9342,6.ThemediaplayersendsaPLAYmessagetostartplaying(downloading).
9343,"7.Theaudio/video fileisdownloaded byusinganotherprotocolthatrunsoverUDP.912CHAPTER 29MULTIMEDIA
8.Theconnection isbrokenbyusingtheTEARDOWN message."
9344,9.Themediaserverresponds.
9345,Themediaplayercansendothertypesofmessages.
9346,"Forexample, aPAUSEmessage
temporarily stopsthedownloading; downloading canberesumedwithaPLAYmessage."
9347,"29.4STREAMING LIVEAUDIONIDEO
Streaming liveaudio/video issimilartothebroadcasting ofaudioandvideobyradio
andTVstations."
9348,"Insteadofbroadcasting totheair,thestationsbroadcast through
theInternet."
9349,"Thereareseveralsimilarities between streaming storedaudio/video and
streaming liveaudio/video."
9350,"They arebothsensitivetodelay;neithercanacceptretrans­
mission.However, thereisadifference."
9351,"Inthefirstapplication, thecommunication is
unicastandon-demand."
9352,"Inthesecond,thecommunication ismulticast andlive.Live
streaming isbettersuitedtothemulticast servicesofIPandtheuseofprotocols suchas
UDPandRTP(discussed later).However, presently, livestreaming isstillusingTCP
andmultipleunicasting insteadofmulticasting."
9353,"Thereisstillmuchprogresstobemade
inthisarea."
9354,"29.5REAL-TIMEINTERACTIVE AUDIONIDEO
Inreal-time interactive audio/video, peoplecommunicate withoneanotherinrealtime."
9355,TheInternetphoneorvoiceoverIPisanexample ofthistypeofapplication.
9356,"Video
conferencing isanotherexamplethatallowspeopletocommunicate visuallyandorally."
9357,"Characteristics
Beforeaddressing theprotocols usedinthisclassofapplications, wediscusssome
characteristics ofreal-time audio/video communication."
9358,"TimeRelationship
Real-time dataonapacket-switched networkrequirethepreservation ofthetimerela­
tionshipbetweenpacketsofasession.Forexample, letusassumethatareal-time video
servercreateslivevideoimagesandsendsthemonline.Thevideoisdigitized and
packetized."
9359,"Thereareonlythree packets, andeachpacketholdslOsofvideoinforma­
tion.Thefirstpacketstartsat00:00:00, thesecondpacketstartsat00:00:10,andthe
thirdpacketstartsat00:00:20."
9360,"Alsoimaginethatittakes1s(anexaggeration forsim­
plicity)foreachpackettoreachthedestination (equaldelay).Thereceivercanplay
backthefirstpacketat00:00:01, thesecondpacketat00:00:11, andthethirdpacketat
00:00:21."
9361,"Although thereisaI-stimedifference between whattheserversendsand
whattheclientseesonthecomputer screen,theactionishappening inrealtime.The
timerelationship betweenthepacketsispreserved."
9362,TheI-sdelayisnotimportant.
9363,"Fig­
ure29.14showstheidea.SECTION 29.5REAL-11ME INTERACTIVE AUDIOIVIDEO 913
Figure29.14Timerelationship
Server
Client IIliiIIIl
r-c;::;:w]
Internet ~-
00.00.0100.00.00
Firstpacket
00.00.1100.00.10
'"" enSecondpacket00 ('f)
t"""")
00.00.21
00.00.31
Arriveandplaytime Sendtime
Butwhathappensifthepacketsarrivewithdifferent delays?Forexample, saythe
firstpacketarrivesat00:00:01 (l-sdelay),thesecondarrivesat00:00:15(5-sdelay),
andthethirdarrivesat00:00:27 (7-sdelay).Ifthereceiverstartsplayingthefirstpacket
at00:00:01, itwillfinishat00:00:11.However, thenextpackethasnotyetarrived;it
arrives4 slater.Thereisagapbetween thefirstandsecondpacketsandbetween the
secondandthethirdasthevideoisviewedattheremotesite.Thisphenomenon iscalled
jitter.Figure29.15showsthesituation."
9364,Jitterisintroduced inreal-time databythedelaybetweenpackets.
9365,"Figure29.15Jitter
--Server
InternetClient
r-
00.00.01 ~ -IOO.OO.OO
Firstpacket
00.00.3000.00.20Secondpacket
00.00.3700.00.27
1:==========::::::====-,00.00.10
00.00.15
Arriveandplaytime Sendtime
Timestamp
Onesolutiontojitteristheuseofatimestamp."
9366,"Ifeachpackethasatimestamp that
showsthetimeitwasproduced relativetothefirst(orprevious) packet,thenthereceiver914CHAPTER 29MULTIMEDIA
canaddthistimetothetimeatwhichitstartstheplayback."
9367,"Inotherwords,thereceiver
knowswheneachpacketistobeplayed.Imaginethefirstpacketinthepreviousexample
hasatimestamp of0,thesecondhasatimestamp of10,andthethirdhasatimestamp of
20.Ifthereceiverstartsplayingback the firstpacketat00:00:08, thesecondwillbe
playedat00:00:18andthethirdat00:00:28."
9368,Therearenogapsbetween thepackets.
9369,Figure29.16showsthesituation.
9370,"Figure29.16Timestamp
Server
Client
Internet
00.00.01l------------100.00.00
Firstpacket(0)
00.00.3000.00.20
FlowSecondpacket(10)
00.00.3700.00.27
C===============~I 00.00.1000.00.15
00.00.28
00.00.3800.00.1800.00.08
Playtime Arrivetime Sendtime
Topreventjitter,wecantime-stamp thepacketsand
separate thearrivaltimefromtheplayback time."
9371,"Playback Buffer
Tobeabletoseparatethearrivaltimefromtheplayback time,weneedabuffertostore
thedatauntiltheyareplayedback.Thebufferisreferredtoasaplayback buffer."
9372,"Whenasessionbegins(thefirstbitofthefirstpacketarrives),thereceiverdelaysplaying
thedatauntilathreshold isreached."
9373,"Intheprevious example, thefirstbitofthefirst
packetarrivesat00:00:01; thethreshold is7s,andtheplayback timeis00:00:08."
9374,"The
threshold ismeasured intimeunitsofdata.Thereplaydoesnotstartuntilthetimeunits
ofdataareequaltothethreshold value."
9375,"Dataarestoredinthebufferatapossibly variable rate,buttheyareextracted
andplayedbackatafixedrate.Notethattheamountofdatainthebuffershrinksor
expands, butaslongasthedelayislessthanthetimetoplaybackthethreshold amount
ofdata,thereisnojitter.Figure29.17showsthebufferatdifferent timesforour
example."
9376,"Ordering
Inadditiontotimerelationship information andtimestamps forreal-time traffic,one
morefeatureisneeded.Weneedasequence numberforeachpacket.Thetimestamp
alonecannotinformthereceiverifapacketislost.Forexample, supposethetimestampsSECTION 29.5REAL-TIME INTERACTIVE AUDIOIVIDEO 915
Figure29.17Playbackbuffer
Attime00:00:08
Arrival"" j""PlaYbaCk
I·7.[
Attime00:00:18
Arrival"" I""Playback
I·3
·1
Attime00:00:28
Arrival"" I""PlaYbaCk
~
Aplayback bufferisrequired forreal-time traffic."
9377,"are0,10,and20.Ifthesecondpacketislost,thereceiverreceivesjusttwopacketswith
timestamps 0and20.Thereceiverassumes thatthepacketwithtimestamp 20isthe
secondpacket,produced 20safterthefirst.Thereceiverhasnowayofknowing that
thesecondpackethasactuallybeenlost.Asequence numbertoorderthepacketsis
neededtohandlethissituation."
9378,Asequence numberoneachpacketisrequired forreal-time traffic.
9379,"Multicasting
Multimedia playaprimaryroleinaudioandvideoconferencing."
9380,"Thetrafficcanbeheavy,
andthedataaredistributed byusingmulticasting methods."
9381,"Conferencing requirestwo­
waycommunication betweenreceivers andsenders."
9382,Real-time trafficneedsthesupportofmulticasting.
9383,"Translation
Sometimes real-time trafficneedstranslation."
9384,"Atranslator isacomputer thatcanchange
theformatofahigh-bandwidth videosignaltoalower-quality narrow-bandwidth signal."
9385,"Thisisneeded,forexample, forasourcecreatingahigh-quality videosignalat5Mbps
andsendingtoarecipient havingabandwidth oflessthan1Mbps.Toreceivethesignal,
atranslator isneededtodecodethesignalandencodeitagainatalowerqualitythat
needslessbandwidth.916CHAPTER 29MULTIMEDIA
Translation meanschanging theencoding ofapayloadtoalowerquality
tomatchthebandwidth ofthereceiving network."
9386,"Mixing
Ifthereismorethanonesourcethatcansenddataatthesametime(asinavideoor
audioconference), thetrafficismadeofmultiple streams."
9387,"Toconverge thetraffictoone
stream,datafromdifferent sourcescanbemixed.Amixermathematically addssignals
comingfromdifferent sourcestocreateonesinglesignal."
9388,Mixingmeanscombining severalstreamsoftrafficintoonestream.
9389,"SupportfromTransport LayerProtocol
Theprocedures mentioned intheprevious sectionscanbeimplemented intheapplication
layer.However, theyaresocommon inreal-time applications thatimplementation inthe
transport layerprotocol ispreferable."
9390,"Let'sseewhichoftheexistingtransport layers is
suitableforthistypeoftraffic."
9391,"TCPisnotsuitableforinteractive traffic.Ithasnoprovision fortime-stamping, and
itdoesnotsupportmulticasting."
9392,"However, itdoesprovideordering (sequence numbers)."
9393,"OnefeatureofTCPthatmakesitparticularly unsuitable forinteractive trafficisitserror
controlmechanism."
9394,"Ininteractive traffic,wecannotallowtheretransmission ofalostor
corrupted packet.Ifapacketislostorcorrupted ininteractive traffic,itmustbeignored."
9395,Retransmission upsetsthewholeideaoftime-stamping andplayback.
9396,"Todaythereisso
muchredundancy inaudioandvideosignals(evenwithcompression) thatwecansimply
ignorealostpacket.Thelistenerorviewerattheremotesitemaynotevennoticeit."
9397,"TCP,withallitssophistication, isnotsuitableforinteractive multimedia
trafficbecausewecannotallowretransmission ofpackets."
9398,"UDPismoresuitableforinteractive multimedia traffic.UDPsupports multicasting
andhasnoretransmission strategy."
9399,"However, UDPhasnoprovision fortime-stamping,
sequencing, ormixing.Anewtransport protocol, Real-time Transport Protocol (RTP),
provides thesemissingfeatures."
9400,"UDPismoresuitablethanTCPforinteractive traffic.However, weneedtheservices
ofRTP,anothertransport layerprotocol, tomakeupforthedeficiencies ofUDP."
9401,"29.6RTP
Real-time Transport Protocol (RTP)istheprotocol designed tohandlereal-time traffic
ontheInternet."
9402,"RTPdoesnothaveadelivery mechanism (multicasting, portnumbers,
andsoon);itmustbeusedwithUDP.RTPstandsbetween UDPandtheapplicationSECTION 29.6RTP 917
program."
9403,"Themaincontributions ofRTParetime-stamping, sequencing, andmixing
facilities."
9404,Figure29.18showsthepositionofRTPintheprotocolsuite.
9405,"Figure29.18RTP
I.Motion
IPEG•••
IMPEG2
video
IPMPEGI
videoMPEG
audio
UDP I~-~--
~
""
Underlying LANorWAN
technologyN<lWmkllayer
Physical
layerDatalink
layerTransport
layerApplicationGeMIH261I
layer
'---------'
RTPPacketFormat
Figure29.19showstheformatoftheRTPpacketheader.Theformatisverysimple
andgeneralenoughtocoverallreal-time applications."
9406,"Anapplication thatneeds
moreinformation addsittothebeginning ofitspayload."
9407,"Adescription ofeachfield
follows."
9408,OVer.
9409,This2-bitfielddefinestheversionnumber.Thecurrentversionis2.
9410,"Figure29.19RTPpacketheaderformat
veriplxl;~~~IMIPayloadtypeISequence number
Timestamp
Synchronization sourceidentifier
Contributor identifier
·••
."
9411,"Contributor identifier918CHAPTER 29MULTIMEDIA
oP.ThisI-bitfield,ifsetto1,indicates thepresence ofpaddingattheendofthe
packet.Inthiscase,thevalueofthelastbyteinthepaddingdefinesthelengthof
thepadding."
9412,Paddingisthenormifapacketisencrypted.
9413,"Thereisnopaddingif
thevalueofthePfieldisO."
9414,"oX.ThisI-bitfield,ifsetto1,indicates anextraextension headerbetween the
basicheaderandthedata.Thereisnoextraextension headerifthevalueofthis
fieldisO."
9415,oContributor count.This4-bitfieldindicates thenumberofcontributors.
9416,"Notethat
wecanhaveamaximum of15contributors becausea4-bitfieldonlyallowsanum­
berbetween0and15."
9417,"oM.ThisI-bitfieldisamarkerusedbytheapplication toindicate, forexample, the
endofitsdata."
9418,oPayload type.This7-bitfieldindicates thetypeofthepayload.
9419,"Severalpayload
typeshavebeendefinedsofar.Welistsomecommon applications inTable29.1.
Adiscussion ofthetypesisbeyondthescopeofthisbook."
9420,"Table29.1Payloadtypes
TypeApplication Type Application Type Application
aPCMj.lAudio 7LPCaudio 15G728audio
11016 8PCMAaudio 26MotionJPEG
2G721audio 9G722audio 31H.261
3GSMaudio 10-11 L16audio 32MPEGIvideo
5-6DV14audio 14MPEGaudio 33MPEG2video
oSequence number."
9421,"Thisfieldis16bitsinlength.ItisusedtonumbertheRTP
packets.Thesequence numberofthefirstpacketischosenrandomly; itisincre­
mentedby1foreachsubsequent packet.Thesequence numberisusedbythe
receivertodetectlostorout-of-order packets."
9422,oTimestamp.
9423,"Thisisa32-bitfieldthatindicates thetimerelationship between
packets.Thetimestamp forthefirstpacketisarandomnumber.Foreachsucceeding
packet,thevalueisthesumofthepreceding timestamp plusthetimethefirstbyte
isproduced (sampled)."
9424,Thevalueoftheclocktickdependsontheapplication.
9425,"For
example, audioapplications normally generate chunksof160bytes;theclocktick
forthisapplication is160.Thetimestamp forthisapplication increases 160for
eachRTPpacket."
9426,"oSynchronization sourceidentifier.Ifthereisonlyonesource,this32-bitfield
definesthesource.However, ifthereareseveralsources,themixeristhesynchroni­
zationsourceandtheothersourcesarecontributors."
9427,"Thevalueofthesourceidentifier
isarandomnumberchosenbythesource.Theprotocolprovidesastrategyincaseof
conflict(twosourcesstartwiththesamesequence number)."
9428,oContributor identifier.
9429,"Eachofthese32-bitidentifiers (amaximum of15)defines
asource.Whenthereismorethanonesourceinasession,themixeristhesynchro­
nizationsourceandtheremaining sourcesarethecontributors.SECTION 29.7RTCP 919
UDPPort
Although RTPisitselfatransport layerprotocol, theRTPpacketisnotencapsulated
directlyinanIPdatagram."
9430,"Instead, RTPistreatedasanapplication program andis
encapsulated inaUDPuserdatagram."
9431,"However, unlikeotherapplication programs, no
well-known portisassigned toRTP.Theportcanbeselectedondemandwithonlyone
restriction: Theportnumbermustbeanevennumber.Thenextnumber(anoddnumber)
isusedbythecompanion ofRTP,Real-time Transport ControlProtocol (RTCP)."
9432,RTPusesatemporary even-numbered UDPport.
9433,"29.7RTCP
RTPallowsonlyonetypeofmessage, onethatcarriesdatafromthesourcetothedesti­
nation.Inmanycases,thereisaneedforothermessages inasession.Thesemessages
controltheflowandqualityofdataandallowtherecipient tosendfeedback tothesource
orsources.Real-time Transport ControlProtocol (RTCP) isaprotocol designed for
thispurpose."
9434,"RTCPhasfivetypesofmessages, asshowninFigure29.20.Thenumber
nexttoeachboxdefinesthetypeofthemessage."
9435,"Figure29.20RTCPmessage types
---iSenderreport1200
---iReceiver report1201
RTCP ISourcedescription message1202message types I
---iByemessage1203
Application-specific message1204
SenderReport
Thesenderreportissentperiodically bytheactivesendersinaconference toreport
transmission andreception statistics forallRTPpacketssentduringtheinterval."
9436,"The
senderreportincludes anabsolute timestamp, whichisthenumberofseconds
elapsed sincemidnight onJanuary 1,1970.Theabsolute timestamp allowsthe
receiver tosynchronize different RTPmessages."
9437,"Itisparticularly important when
bothaudioandvideoaretransmitted (audioandvideotransmissions useseparate
relativetimestamps).920CHAPTER 29MULTIMEDIA
Receiver Report
Thereceiverreportisforpassiveparticipants, thosethatdonotsendRTPpackets.The
reportinfonnsthesenderandotherreceivers aboutthequalityofservice."
9438,"SourceDescription Message
Thesourceperiodically sendsasourcedescription message togiveadditional infonna­
tionaboutitself.Thisinfonnation canbethename,e-mailaddress, telephone number,
andaddressoftheowner orcontroller ofthesource."
9439,"ByeMessage
Asourcesendsabyemessage toshutdownastream.Itallowsthesourcetoannounce
thatitisleavingtheconference."
9440,"Although othersourcescandetecttheabsenceofa
source,thismessage isadirectannouncement."
9441,Itisalsoveryusefultoamixer.
9442,"Application-Specific Message
Theapplication-specific message isapacketforanapplication thatwantstousenew
applications (notdefinedinthestandard)."
9443,"Itallowsthedefinition ofanewmessage
type."
9444,"UDPPort
RTCP,likeRTP,doesnotuseawell-known UDPport.Itusesatemporary port.The
UDPportchosenmustbethenumberimmediately following theUDPportselectedfor
RTP.Itmustbeanodd-numbered port."
9445,"RTCPusesanodd-numbered UDPportnumberthat
followstheportnumberselectedforRTP.."
9446,"29.8VOICEOVERIP
Letusconcentrate ononereal-time interactive audio/video application: voiceoverIP,
orInternettelephony."
9447,"TheideaistousetheInternetasatelephone network withsome
additional capabilities."
9448,"Insteadofcommunicating overacircuit-switched network, this
application allowscommunication between twopartiesoverthepacket-switched Internet."
9449,1\voprotocols havebeendesigned tohandlethistypeofcommunication: SIPandH.323.
9450,Webrieflydiscussboth.
9451,"SIP
TheSessionInitiation Protocol (SIP)wasdesigned byIETEItisanapplication layer
protocol thatestablishes, manages, andterminates amultimedia session(call).Itcanbe
usedtocreatetwo-party, multiparty, ormulticast sessions."
9452,"SIPisdesigned tobeindepen­
dentoftheunderlying transport layer;itcanrunonUDP,TCP,orSCTP.SECTION 29.8VOICEOVERIP921
Messages
SIPisatext-based protocol, asisHTTP.SIP,likeHTTP,usesmessages."
9453,"Sixmessages
aredefined,asshowninFigure29.21."
9454,"Figure29.21 SIPmessages
SIP
messages
I
I I I I I I
INVITE ACK BYE OPTIONS CANCELIREGISTERI
Eachmessage hasaheaderandabody.Theheaderconsistsofseverallinesthat
describe thestructure ofthemessage, caller'scapability, mediatype,andsoon.We
giveabriefdescription ofeachmessage."
9455,"Thenweshowtheirapplications inasimple
session."
9456,Thecallerinitializes asessionwiththeINVITEmessage.
9457,"Afterthecalleeanswers
thecall,thecallersendsanACKmessage forconfirmation."
9458,"TheBYEmessage termi­
natesasession.TheOPTIONS message queriesamachine aboutitscapabilities."
9459,"The
CANCEL message cancelsanalreadystartedinitialization process.TheREGISTER
message makesaconnection whenthecalleeisnotavailable."
9460,"Addresses
Inaregulartelephone communication, atelephone numberidentifies thesender,and
anothertelephone numberidentifies thereceiver."
9461,"SIPisveryflexible.InSIP,ane-mail
address,anIPaddress,atelephone number,andothertypesofaddresses canbeusedto
identifythesenderandreceiver."
9462,"However, theaddressneedstobeinSIPformat(also
calledscheme)."
9463,Figure29.22showssomecommon formats.
9464,"Figure29.22SIPformats
sip:bob@201.23.45.78 11__siP_:_bo_b_@_fu_da_.e_d_u __11sip:bob@408~864-8900 ·1
IPv4address E-mailaddress Phonenumber
SimpleSession
AsimplesessionusingSIPconsistsofthreemodules: establishing, communicating, and
terminating."
9465,"Figure29.23showsasimplesessionusingSIP.922CHAPTER 29MULTIMEDIA
Figure29.23SIPsimplesession
Caller Calleeg- g-
INVITE: address,optionsOilQ
:.E
.~OK:address
~'"" I u.lACK."
9466,"I
I>/).5
~u
'13Exchanging audio='SS0u
I>/)
.S
~f-· .~."" J I."
9467,"l:: BYE·s 1 I
...."
9468,"~
Establishing aSession Establishing asessioninSIPrequiresathree-way handshake."
9469,"ThecallersendsanINVITEmessage, usingUDP,TCP,orSCTPtobeginthecommuni­
cation.Ifthecalleeiswillingtostartthesession,shesendsareplymessage."
9470,"Toconfirm
thatareplycodehasbeenreceived, thecallersendsanACKmessage."
9471,"Communicating Afterthesessionhasbeenestablished, thecallerandthecalleecan
communicate byusingtwotemporary ports."
9472,"Terminating theSession Thesessioncanbeterminated withaBYEmessage sentby
eitherparty."
9473,"Tracking theCallee
Whathappensifthecalleeisnotsittingatherterminal?"
9474,"Shemaybeawayfromhersystem
oratanotherterminal."
9475,ShemaynotevenhaveafixedIPaddressifDHCPisbeingused.
9476,"SIPhasamechanism (similartooneinDNS)thatfindstheIPaddressoftheterminalat
whichthecalleeissitting.Toperformthistracking, SIPusestheconceptofregistration."
9477,SIPdefinessomeserversasregistrars.
9478,"Atanymomentauserisregistered withatleastone
registrar server;thisserverknowstheIPaddressofthecallee."
9479,"Whenacallerneedstocommunicate withthecallee,thecallercanusethee-mail
addressinsteadoftheIPaddressintheINVITEmessage."
9480,"Themessage goestoaproxy
server.Theproxyserversendsalookupmessage (notpartofSIP)tosomeregistrar
serverthathasregistered thecallee.Whentheproxyserverreceives areplymessage
fromtheregistrarserver,theproxyservertakesthecaller'sINVITEmessage andinserts
thenewlydiscovered IPaddressofthecallee.Thismessage isthensenttothecallee."
9481,"Figure29.24showstheprocess.Figure29.24 Tracking thecalleeSECTION 29.8VOICEOVERIP923
CallerProxyserver
INVITE
OK
ACK~Registrar
Lookup~
Reply
INVITE
OK
ACKCallee
--
Exchanging audio
BYE
H.323
H.323isastandard designed bylTVtoallowtelephones onthepublictelephone
network totalktocomputers (calledterminals inH.323)connected totheInternet."
9482,Figure29.25showsthegeneralarchitecture ofH.323.
9483,"Figure29.25H.323architecture
Gateway
~
t------!w::::LWJ 1----(
E:::::J-
Agateway connects theInternettothetelephone network."
9484,"Ingeneral,agatewayis
afive-layer devicethatcantranslateamessagefromoneprotocolstacktoanother.The924CHAPTER 29MULTIMEDIA
gatewayheredoesexactlythesamething.Ittransforms atelephone networkmessageto
anInternetmessage."
9485,"Thegatekeeper serveronthelocalareanetworkplaystheroleof
theregistrarserver,aswediscussed intheSIP."
9486,"Protocols
H.323usesanumberofprotocols toestablishandmaintainvoice(orvideo)communica­
tion.Figure29.26showstheseprotocols."
9487,"Figure29.26H.323protocols
@""~'>
Compression
code
RTCP H.225
RTP
IP
H.323usesG.71orG.723.1forcompression."
9488,"Itusesaprotocol namedH.245
whichallowsthepartiestonegotiate thecompression method.Protocol Q.931isused
.forestablishing andterminating connections."
9489,"Anotherprotocol calledH.225,orRAS
(Registration! Administration!Status), isusedforregistration withthegatekeeper."
9490,"Operatio1l
Letusshowtheoperation ofatelephone communication usingH.323withasimple
example."
9491,"Figure29.27showsthestepsusedbyaterminal tocommunicate witha
telephone."
9492,1.Theterminalsendsabroadcast messagetothegatekeeper.
9493,"Thegatekeeper responds
withitsIPaddress."
9494,"2.Theterminalandgatekeeper communicate, usingH.225tonegotiate bandwidth."
9495,"3.Theterminal, gatekeeper, gateway, andtelephone communicate byusingQ.931to
setupaconnection."
9496,"4.Theterminal, gatekeeper, gateway, andtelephone communicate byusingH.245to
negotiate thecompression method."
9497,"5.Theterminal, gateway, andtelephone exchange audiobyusingRTPunderthe
management ofRTCP."
9498,"6.Theterminal, gatekeeper, gateway, andtelephone communicate byusingQ.931to
terminate thecommunication.SECTION 29.10KEYTERMS 925
Figure29.27H.323example
Tenninal
RTPforaudioexchange
RTCPformanagementGateway
Telephone
29.9RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext."
9499,"Books
Multimedia communication isdiscussed in[HalOl]andinSection7.4of[Tan03].Image
andvideocompression arefullydiscussed in[Dro02]."
9500,"Sites
owww.ietf.org/rfc.html Infonnation aboutRFCs
29.10KEYTERMS
bidirectional frame(B-frame)
compression
discretecosinetransform (DCT)
frequency masking
gatekeepergateway
H.323
interactive audio/video
intracoded frame(I-frame)
jitter926CHAPTER 29MULTIMEDIA
JointPhotographic ExpertsGroup(JPEG)
mediaplayer
mediaserver
metafile
mixer
MovingPictureExpertsGroup(MPEG)
MP3
multicasting
on-demand audio/video
perceptual encoding
pixel
playback buffer
predicted frame(P-frame)
predictive encoding
quantizationReal-TimeStreaming Protocol (RTSP)
real-time traffic
Real-time Transport ControlProtocol
(RTCP)
Real-time Transport Protocol (RTP)
registrarserver
SessionInitiation Protocol (SIP)
spatialcompression
streaming liveaudio/video
streaming storedaudio/video
temporal compression
temporal masking
timestamp
translation
voiceoverIP
29.11SUMMARY
oAudio/video filescanbedownloaded forfutureuse(streaming storedaudio/video)
orbroadcast toclientsovertheInternet(streaming liveaudio/video)."
9501,"TheInternet
canalsobeusedforliveaudio/video interaction."
9502,oAudioandvideoneedtobedigitized beforebeingsentovertheInternet.
9503,oAudiofilesarecompressed throughpredictive encoding orperceptual encoding.
9504,"oJointPhotographic ExpertsGroup(JPEG)isamethodtocompress picturesand
graphics."
9505,"oTheJPEGprocessinvolves blocking, thediscretecosinetransform, quantization,
andlosslesscompression."
9506,oMovingPicturesExpertsGroup(MPEG) isamethodtocompress video.
9507,oMPEGinvolves bothspatialcompression andtemporal compression.
9508,"Theformer
issimilartoJPEG,andthelatterremoves redundant frames."
9509,"oWecanuseaWebserver,oraWebserverwithametafile, oramediaserver,ora
mediaserverandRTSPtodownload astreaming audio/video file."
9510,"oReal-time dataonapacket-switched networkrequirethepreservation ofthetime
relationship betweenpacketsofasession."
9511,oGapsbetweenconsecutive packetsatthereceivercauseaphenomenon calledjitter.
9512,"oJittercanbecontrolled throughtheuseoftimestamps andajudicious choiceofthe
playback time."
9513,DAplayback bufferholdsdatauntiltheycanbeplayedback.
9514,"DAreceiverdelaysplayingbackreal-time dataheldintheplayback bufferuntila
threshold levelisreached.SECTION 29.12PRACTICE SET 927
oSequence numbers onreal-time datapacketsprovideaformoferrorcontrol."
9515,oReal-time dataaremulticast toreceivers.
9516,"oReal-time trafficsometimes requiresatranslator tochangeahigh-bandwidth signal
toalower-quality narrow-bandwidth signal."
9517,oAmixercombines signalsfromdifferent sourcesintoonesignal.
9518,"oReal-time multimedia trafficrequires bothUDPandReal-time Transport Protocol
(RTP)."
9519,"oRTPhandlestime-stamping, sequencing, andmixing."
9520,"oReal-time Transport ControlProtocol (RTCP)provides flowcontrol,qualityofdata
control,andfeedback tothesources."
9521,oVoiceoverIPisareal-time interactive audio/video application.
9522,"oTheSessionInitiation Protocol (SIP)isanapplication layerprotocol that establishes,
manages, andterminates multimedia sessions."
9523,"oH.323isanITUstandard thatallowsatelephone connected toapublictelephone
network totalktoacomputer connected totheInternet."
9524,"29.12PRACTICE SET
ReviewQuestions
1.Howdoesstreaming liveaudio/video differfromstreaming storedaudio/video?"
9525,2.Howdoesfrequency masking differfromtemporal masking?
9526,3.Whatisthefunctionofametafileinstreaming storedaudio/video?
9527,4.WhatisthepurposeofRTSPinstreaming storedaudio/video?
9528,5.Howdoesjitteraffectreal-time audio/video?
9529,6.DiscusshowSIPisusedinthetransmission ofmultimedia.
9530,7.WhenwouldyouuseJPEG?WhenwouldyouuseMPEG?
9531,"8.InJPEG,whatisthefunctionofblocking?"
9532,9.WhyistheDCTneededinJPEG?
9533,10.Whatisspatialcompression compared totemporal compression?
9534,"Exercises
11.InFigure29.17whatistheamountofdataintheplayback bufferateachofthe
following times?"
9535,"a.00:00:17
b.00:00:20
c.00:00:25
d.00:00:30
12.Compare andcontrastTCPwithRTP.Arebothdoingthesamething?"
9536,13.CanwesayUDPplusRTPisthesameasTCP?
9537,"14.WhydoesRTPneedtheserviceofanotherprotocol, RTCP,butTCPdoesnot?928CHAPTER 29MULTIMEDIA
15.InFigure29.12,cantheWebserverandmediaserverrunondifferent machines?"
9538,"16.WediscusstheuseofSIPinthischapterforaudio.Isthereanydrawback toprevent
usingitforvideo?"
9539,17.DoyouthinkH.323isactuallythesameasSIP?Whatarethedifferences?
9540,"Makea
comparison betweenthetwo."
9541,"18.Whataretheproblems forfullimplementation ofvoiceoverIP?Doyouthinkwe
willstopusingthetelephone networkverysoon?"
9542,19.CanrI.323alsobeusedforvideo?
9543,"Research Activities
20.FindtheformatofanRTCPsenderreport.Payparticular attention tothepacket
lengthandthepartsrepeated foreachsource.Describe eachfield."
9544,"21.FindtheformatofanRTCPreceiverreport.Payparticular attention tothepacket
lengthandthepartsrepeated foreachsource.Describe eachfield."
9545,22.FindtheformatofanRTCPsourcedescription.
9546,"Payparticular attention tothe
packetlengthandthepartsrepeated foreachsource.Describe eachfield."
9547,"23.Findthemeaningofthesourcedescription itemsusedintheRTCPsourcedescription
packet.Specifically, findthemeaning ofCNAME, NAME,EMAIL, PHONE, LOC,
TOOL,NOTE,andPRIY."
9548,24.FindtheformatofanRTCPbyemessage.
9549,"Payparticular attentiontothepacketlength
andthepartsrepeated foreachsource.Describe eachfield.Security
Objectives
Noonecandenytheimportance ofsecurityindatacommunications andnetworking."
9550,"Security innetworking isbasedoncryptography, thescienceandartoftransforming
messages tomakethemsecureandimmunetoattack.Cryptography canprovideseveral
aspectsofsecurityrelatedtotheinterchange ofmessages throughnetworks."
9551,"Theseaspects
areconfidentiality, integrity, authentication, andnonrepudiation."
9552,"Cryptography canprovideconfidentiality, integrity, authentication,
andnonrepudiation ofmessages."
9553,"Cryptography canalsobeusedtoauthenticate thesenderandreceiverofthemessage
toeachother.Forexample, auserwhoneedsaccesstotheresources ofasystemmust
firstbeauthorized."
9554,Wecallthisaspectentityauthentication.
9555,Cryptography canalsoprovideentityauthentication.
9556,"Inthispartofthebook,wefirstintroduce cryptography withoutdelvingintothe
mathematical foundations ofthissubject.Wethenbrieflyexplore security aspectsas
appliedtoanetwork."
9557,"Finally,wediscusssomecommon protocols thatimplement security
aspectsattheupperthreelayersoftheInternetmodel."
9558,Part7ofthebookisdevotedtodifferent securityaspects.
9559,"Chapters
Thispartconsistsofthreechapters: Chapters 30, 31,and32.Chapter30
Chapter30isabriefdiscussion ofabroadtopiccalledcryptography."
9560,"Although cryptography,
whichisbasedonabstractalgebra,canitselfbeacomplete course,weintroduce ithere
brieflyandavoidreferences toabstractalgebraasmuchaspossible."
9561,"Wegivejustenough
background information asafoundation forthematerialinthenexttwochapters."
9562,"Chapter31
Chapter 31isanintroduction, andmotivation, forthebroadtopicofnetwork security."
9563,"Wediscussselectedissuesthatareoftenencountered whendealingwithcommunications
andnetworking problems."
9564,"Chapter32
Chapter32brieflydiscusses theapplications oftopicsdiscussed inChapters 30and31
totheInternetmodel.Weshowhownetwork securityandcryptography canbeusedin
threeupperlayersoftheInternetmodel.CHAPTER 30
Cryptography
Network securityismostlyachieved throughtheuseofcryptography, asciencebased
onabstractalgebra.Inthischapter,webrieflydiscussthecryptography suitableforthe
scopeofthisbook.Wehavetriedtolimitourdiscussion ofabstract algebra asmuchas
wecould.Ourgoalistogiveenoughinformation aboutcryptography tomakenetwork
securityunderstandable."
9565,"Thechapteropensthedoorforstudying network securityin
Chapter31andInternetsecurityinChapter32."
9566,"30.1INTRODUCTION
Letusintroduce theissuesinvolvedincryptography."
9567,"First,weneedtodefinesometerms;
thenwegivesometaxonomies."
9568,"Definitions
Wedefinesometermsherethatareusedintherestofthechapter."
9569,"Cryptography
Cryptography, awordwithGreekorigins,means""secretwriting."" However, weusethe
termtorefertothescienceandartoftransforming messages tomakethemsecureand
immunetoattacks.Figure30.1showsthecomponents involved incryptography."
9570,"Figure30.1Cryptography components
Receiver
Plaintext
Encryption1------------+-1 DecryptionCiphertext
931932CHAPTER 30CRYPTOGRAPHY
Plaintext andCiphertext
Theoriginalmessage, beforebeingtransformed, iscalledplaintext."
9571,"Afterthemessage
istransformed, itiscalledciphertext."
9572,"Anencryption algorithm transforms theplain­
textintociphertext; adecryption algorithm transforms theciphertext backintoplain­
text.Thesenderusesanencryption algorithm, andthereceiver usesadecryption
algorithm."
9573,"Cipher
Werefertoencryption anddecryption algorithms asciphers."
9574,"Thetermcipherisalso
usedtorefertodifferent categories ofalgorithms incryptography."
9575,"Thisisnottosay
thateverysender-receiver pairneedstheirveryownuniquecipherforasecurecommu­
nication."
9576,"Onthecontrary, oneciphercanservemillionsofcommunicating pairs."
9577,"Key
Akeyisanumber(orasetofnumbers) thatthecipher,asanalgorithm, operateson.To
encryptamessage, weneedanencryption algorithm, anencryption key,andtheplaintext."
9578,Thesecreatetheciphertext.
9579,"Todecryptamessage, weneedadecryption algorithm, a
decryption key,andtheciphertext."
9580,Theserevealtheoriginalplaintext.
9581,"Alice,Bob,andEve
Incryptography, itiscustomary tousethreecharacters inaninformation exchange
scenario; weuseAlice,Bob,andEve.Aliceisthepersonwhoneedstosendsecure
data.Bobistherecipient ofthedata.Eveisthepersonwhosomehow disturbsthecom­
munication betweenAliceandBobbyintercepting messages touncoverthedataorby
sendingherowndisguised messages."
9582,"Thesethreenamesrepresent computers orpro­
cessesthatactuallysendorreceivedata,orintercept orchangedata."
9583,"TwoCategories
Wecandivideallthecryptography algorithms (ciphers) intotwogroups:symmetric­
key(alsocalledsecret-key) cryptography algorithms andasymmetric (alsocalled
public-key) cryptography algorithms."
9584,Figure30.2showsthetaxonomy.
9585,"Figure30.2Categories ofcryptography
Secret-key Public-keySECTION 30.1INTRODUCTION 933
Symmetric·Key Cryptography
Insymmetric-key cryptography, thesamekeyisusedbybothparties.Thesenderuses
thiskeyandanencryption algorithm toencryptdata;thereceiverusesthesamekeyand
thecorresponding decryption algorithm todecryptthedata(seeFigure30.3)."
9586,"Figure30.3Symmetric-key cryptography
Sharedsecretkey
1---------------11---------------I
1 I
1 I
l t
I------------~ Decryption
L............__ -' CiphertextBob
r--
Plaintext
Insymmetric·key cryptography, thesamekeyisusedbythesender
(forencryption) andthereceiver(fordecryption)."
9587,Thekeyisshared.
9588,"Asymmetric-Key Cryptography
Inasymmetric orpublic-key cryptography, therearetwokeys:aprivatekeyandapublic
key.Theprivatekeyiskeptbythereceiver."
9589,Thepublickeyisannounced tothepublic.
9590,"InFigure30.4,imagineAlicewantstosendamessage toBob.Aliceusesthepublickey
toencryptthemessage."
9591,"Whenthemessage isreceived byBob,theprivatekeyisusedto
decryptthemessage."
9592,"Figure30.4Asymmetric-key cryptography
Tothepublic1A
I 1_________________________ 1::.:.=_=_=_=_=:::: jBob'spublickey
....-----tBob'sprivatekey
y
Encryption1----- ~-----+1 DecryptionCiphertextBob
r
Plaintext
Inpublic-key encryption/decryption, thepublickeythatisusedforencryption is
different fromtheprivatekeythatisusedfordecryption."
9593,"Thepublickey isavailable to
thepublic;'theprivatekeyisavailable onlytoanindividual.934CHAPTER 30CRYPTOGRAPHY
ThreeTypesofKeys
Thereadermayhavenoticedthatwearedealingwiththreetypesofkeysincryptography:
thesecretkey,thepublickey,andtheprivatekey.Thefirst,thesecretkey,istheshared
keyusedinsymmetric-key cryptography."
9594,"Thesecondandthethirdarethepublic
andprivatekeysusedinasymmetric-key cryptography."
9595,"Wewillusethreedifferent icons
forthesekeysthroughout thebooktodistinguish onefromtheothers,asshownin
Figure30.5.
Figure30.5Keysusedincryptography
I
Secretkey
Symmetric-key cryptographyPublickeyPrivatekey
Asynunetric-key cryptography
Comparison
Letuscompare symmetric-key andasymmetric-key cryptography."
9596,"Encryption canbe
thoughtofaselectronic locking; decryption aselectronic unlocking."
9597,"Thesenderputs
themessage inaboxandlockstheboxbyusingakey;thereceiverunlocksthebox
withakeyandtakesoutthemessage."
9598,"Thedifference liesinthemechanism ofthelocking
andunlocking andthetypeofkeysused."
9599,"Insymmetric-key cryptography, thesamekeylocksandunlocks thebox.In
asymmetric-key cryptography, onekeylocksthebox,butanotherkeyisneededto
unlockit.Figure30.6showsthedifference."
9600,"Figure30.6Comparison betweentwocategories ofcryptography
Alice
Ciphertext
a.Symmetric-key cryptography
Alice
Ciphertext
b.Asymmetric-key cryptographySECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 935
30.2SYMMETRIC-KEY CRYPTOGRAPHY
Symmetric-key cryptography startedthousands ofyearsagowhenpeopleneededto
exchange secrets(forexanlple, inawar).Westillmainlyusesymmetric-key cryptography
inournetworksecurity."
9601,"However, today'sciphersaremuchmorecomplex."
9602,"Letusfirst
discusstraditional algorithms, whichwerecharacter-oriented."
9603,"Thenwediscussthemodem
ones,whicharebit-oriented."
9604,"Traditional Ciphers
Webrieflyintroduce sometraditional ciphers,whicharecharacter-oriented."
9605,"Although
these are nowobsolete, thegoalistoshowhowmodernciphersevolvedfromthem.We
candividetraditional symmetric-key ciphersintotwobroadcategories: substitution
ciphersandtransposition ciphers,asshowninFigure30.7.
Figure30.7Traditional ciphers
Transposition
ciphers
Substitution Cipher
Asubstitution ciphersubstitutes onesymbolwithanother.Ifthesymbolsintheplain­
textarealphabetic characters, wereplaceonecharacter withanother.Forexample, we
canreplacecharacter AwithD,andcharacter TwithZ.Ifthesymbols aredigits(0to
9),wecanreplace3with7,and2with6.Substitution ciphers canbecategorized as
eithermonoalphabetic orpolyalphabetic ciphers."
9606,Asubstitution cipherreplacesonesymbolwithanother.
9607,"Inamonoalphabetic cipher,acharacter (orasymbol)intheplaintext isalways
changedtothesamecharacter (orsymbol)intheciphertext regardless ofitspositionin
thetext.Forexample, ifthealgorithm saysthatcharacter Aintheplaintext ischanged
tocharacter D,everycharacter Aischangedtocharacter D.Inotherwords,therelation­
shipbetweencharacters intheplaintext andtheciphertext isaone-to-one relationship."
9608,"Inapolyalphabetic cipher,eachoccurrence ofacharacter canhaveadifferent
substitute."
9609,"Therelationship between acharacter intheplaintext toacharacter inthe936CHAPTER 30CRYPTOGRAPHY
ciphertext isaone-to-many relationship."
9610,"Forexample, character Acouldbechangedto
Dinthebeginning ofthetext,butitcouldbechangedtoNatthemiddle.Itisobvious
thatiftherelationship betweenplaintext characters andciphertext characters isone-to­
many,thekeymusttelluswhichofthemanypossible characters canbechosenfor
encryption."
9611,"Toachievethisgoal,weneedtodividethetextintogroupsofcharacters
anduseasetofkeys.Forexample, wecandividethetext""THISISANEASYTASK""
intogroupsof3characters andthenapplytheencryption usingasetof3keys.Wethen
repeattheprocedure forthenext3characters."
9612,"Example 30.1
Thefollowing showsaplaintext anditscorresponding ciphertext."
9613,Istheciphermonoalphabetic?
9614,"Plaintext: HELLO
Ciphertext: KHOOR
Solution
Thecipherisprobably monoalphabetic becausebothoccurrences ofL'sareencrypted asO's."
9615,"Example 30.2
Thefollowing showsaplaintext anditscorresponding ciphertext."
9616,Istheciphermonoalphabetic?
9617,"Plaintext: HELLO
Ciphertext: ABNZF
Solution
Thecipherisnotmonoalphabetic becauseeachoccurrence ofLisencrypted byadifferent char­
acter.ThefirstLisencrypted asN;the second asZ."
9618,"ShiftCipher Thesimplest monoalphabetic cipherisprobably theshiftcipher.We
assumethattheplaintext andciphertext consistofuppercase letters(AtoZ)only.In
thiscipher,theencryption algorithm is""shiftkeycharacters down,""withkeyequalto
somenumber.Thedecryption algorithm is""shiftkeycharacters up.""Forexample, ifthe
keyis5,theencryption algorithm is""shift5characters down""(towardtheendofthe
alphabet)."
9619,"Thedecryption algorithm is""shift5characters up""(towardthebeginning of
thealphabet)."
9620,"Ofcourse,ifwereachtheendorbeginning ofthealphabet, wewrap
around."
9621,"JuliusCaesarusedtheshiftciphertocommunicate withhisofficers.Forthisreason,
theshiftcipherissometimes referredtoastheCaesarcipher.Caesarusedakeyof3
forhiscommunications."
9622,Theshiftcipherissometimes referredtoastheCaesarcipher.
9623,"Example 30.3
Usetheshiftcipherwithkey=15toencryptthemessage ""HELLO.""SECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 937
Solution
Weencryptonecharacter atatime.Eachcharacter isshifted15characters down.LetterHis
encrypted toW.LetterEisencrypted toT.ThefirstLisencrypted toA.ThesecondLisalso
encrypted toA.And0isencrypted toD.TheciphertextisWTAAD."
9624,"Example 30.4
Usetheshiftcipherwithkey=15todecryptthemessage""WTAAD.""
Solution
Wedecryptonecharacter atatime.Eachcharacter isshifted15characters up.LetterWis
decrypted toH.LetterTisdecrypted toE.ThefirstAisdecrypted toL.ThesecondAis
decrypted toL.And,finally,Disdecrypted toO.Theplaintext isHELLO."
9625,"Transposition Ciphers
Inatransposition cipher,thereisnosubstitution ofcharacters; instead,theirlocations
change.Acharacter inthefirstpositionoftheplaintext mayappearinthetenthposition
oftheciphertext."
9626,Acharacter intheeighthpositionmayappearinthefirstposition.
9627,"In
otherwords,atransposition cipherreordersthesymbolsinablockofsymbols."
9628,Atransposition cipherreorders (permutes) symbols inablockofsymbols.
9629,"KeyInatransposition cipher,thekeyisamapping betweenthepositionofthesymbols
intheplaintext andciphertext.Forexample, thefollowing showsthekeyusingablock
offourcharacters:
Plaintext:
Ciphertext:2 4 1 3
1234
Inencryption, wemovethecharacter atposition2toposition 1,thecharacter at
position4toposition2,andsoon.Indecryption, wedothereverse.Notethat,tobe
moreeffective, thekeyshouldbelong,whichmeansencryption anddecryption oflong
blocksofdata.Figure30.8showsencryption anddecryption forourfour-character
Figure30.8Transposition cipher
Plaintext
(block)Key."
9630,"Plaintext
(block)
I""1123 4
111...+
11(rKIReorderI IReorderI (downward direction) (upwarddirection)
Encryption Decryption
Ciphertext (block)938CHAPTER 30CRYPTOGRAPHY
blockusingtheabovekey.Thefigureshowsthattheencryption anddecryption usethe
samekey.Theencryption appliesitfromdownward whiledecryption appliesitupward."
9631,"Example 30.5
Encryptthemessage ""HELLO MYDEAR,""usingtheabovekey."
9632,"Solution
Wefirstremovethespacesinthemessage."
9633,Wethendividethetextintoblocksoffourcharacters.
9634,"Weaddaboguscharacter Zattheendofthethirdblock.TheresultisHELLOMYDEARZ.We
createathree-block ciphertext ELHLMDOYAZER."
9635,"Example 30.6
UsingExample 30.5,decryptthemessage ""ELHLMDOYAZER""."
9636,"Solution
TheresultisHELLOMYDEARZ.Afterremoving theboguscharacter andcombining thechar­
acters,wegettheoriginalmessage ""HELLO MYDEAR.""
SimpleModern Ciphers
Thetraditional cipherswehavestudiedsofararecharacter-oriented."
9637,"Withtheadventof
thecomputer, ciphersneedtobebit-oriented."
9638,"Thisissobecausetheinformation tobe
encrypted isnotjusttext;itcanalsoconsistofnumbers, graphics, audio,andvideodata."
9639,"Itisconvenient toconvertthesetypesofdataintoastreamofbits,encryptthestream,
andthensendtheencrypted stream.Inaddition, whentextistreatedatthebitlevel,each
character isreplaced by8(or16)bits,whichmeansthenumberofsymbolsbecomes 8
(or16).Mingling andmangling bitsprovides moresecuritythanmingling andmangling
characters."
9640,"Modemciphersuseadifferent strategythanthetraditional ones.Amodern
symmetric cipherisacombination ofsimpleciphers.Inotherwords,amoderncipher
usesseveralsimplecipherstoachieveitsgoal.Wefirstdiscussthesesimpleciphers."
9641,"XORCipher
Moderncipherstodayarenormally madeofasetofsimpleciphers, whicharesimple
predefined functions inmathematics orcomputer science.Thefirstonediscussed here
iscalledtheXORcipherbecauseitusestheexclusive-or operation asdefinedincomputer
science.Figure30.9showsanXORcipher."
9642,"Figure30.9XORcipherSECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 939
AnXORoperation needstwodatainputsplaintext, asthefirstandakeyasthesec­
ond.Inotherwords,oneoftheinputsistheblocktobetheencrypted, theotherinputis
akey;theresultistheencrypted block.NotethatinanXORcipher,thesizeofthekey,
theplaintext, andtheciphertext areallthesame.XORciphershaveaveryinteresting
property: theencryption anddecryption arethesame."
9643,"Rotation Cipher
Another common cipheristherotationcipher,inwhichtheinputbitsarerotatedto
theleftorright.Therotationciphercanbekeyedorkeyless.Inkeyedrotation,thevalueof
thekeydefinesthenumberofrotations; inkeylessrotationthenumberofrotations isfixed."
9644,"Figure30.10showsanexampleofarotationcipher.Notethattherotationciphercanbe
considered aspecialcaseofthetranspositional cipherusingbitsinsteadofcharacters."
9645,"Figure30.10Rotation cipher
Input
Output
Therotationcipherhasaninteresting property.Ifthelengthoftheoriginalstream
isN,afterNrotations, wegettheoriginalinputstream.Thismeansthatitisuselessto
applymorethanN-1rotations."
9646,"Inotherwords,thenumberofrotations mustbebetween
1andN-1."
9647,"Thedecryption algorithm fortherotationcipherusesthesamekeyandtheopposite
rotationdirection."
9648,"Ifweusearightrotationintheencryption, weusealeftrotationin
decryption andviceversa."
9649,"Substitution Cipher:S-box
AnS-box(substitution box)parallels thetraditional substitution cipherforcharacters."
9650,"TheinputtoanS-boxisastreamofbitswithlengthN;theresultisanotherstreamof
bitswithlengthM.AndNandMarenotnecessarily thesame.Figure30.11showsan
S-box."
9651,"TheS-boxisnormally keylessandisusedasanintermediate stageofencryption
ordecryption."
9652,"Thefunction thatmatchestheinputtotheoutputmaybedefinedmathe­
matically orbyatable."
9653,"Transposition Cipher:P-box
AP-box(permutation box)forbitsparallelsthetraditional transposition cipherforchar­
acters.Itperforms atransposition atthebitlevel;ittransposes bits.Itcanbeimplemented940CHAPTER 30CRYPTOGRAPHY
Figure30.11S-box
S-boxNinputbits
Afunction thatmatchesNinputs
toMoutputs
Moutputbits
insoftware orhardware, buthardware isfaster.P-boxes, likeS-boxes, arenonnally key­
less.Wecanhavethreetypesofpennutations inP-boxes: thestraight permutation,
expansion permutation, andcompression permutation asshowninFigure30.12."
9654,"Figure30.12P-boxes: straight, expansion, andcompression
2 3 45
22
3a.Straight
3
452 3 45
23
24
35
b.Expansion c.Compression
Astraightpermutation cipherorastraightP-boxhasthesamenumberofinputsas
outputs.Inotherwords,ifthenumberofinputsisN,thenumberofoutputsisalsoN.In
anexpansion pennutation cipher,thenumberofoutputportsisgreaterthanthenumber
ofinputports.Inacompression pennutation cipher,thenumberofoutputportsisless
thanthenumberofinputports."
9655,"Modern RoundCiphers
Theciphersoftodayarecalledroundciphersbecausetheyinvolvemultiple rounds,
whereeachroundisacomplex ciphermadeupofthesimpleciphersthatwepreviouslySECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 941
described."
9656,"Thekeyusedineachroundisasubsetorvariation ofthegeneralkeycalledthe
roundkey.IfthecipherhasNrounds,akeygenerator producesNkeys,KbKz,...,KN,
whereK1isusedinround1,K2inround2,andsoon."
9657,"Inthissection,weintroduce twomodemsymmetric-key ciphers:DESandAES."
9658,"Theseciphersarereferredtoasblockciphersbecausetheydividetheplaintext into
blocksandusethesamekeytoencryptanddecrypttheblocks.DEShasbeenthede
factostandard untilrecently.AESistheformalstandardnow."
9659,"DataEncryption Standard (DES)
Oneexampleofacomplex blockcipheristheDataEncryption Standard (DES).DES
wasdesigned byIBMandadoptedbytheU.S.government asthestandard encryption
methodfornonmilitary andnonclassified use.Thealgorithm encrypts a64-bitplaintext
blockusinga64-bitkey,asshowninFigure30.13."
9660,"Figure30.13DES
64-bitplaintext
DES
IInitialpermutationI
r---------I---------~I IIKj
Round1I~
•I
I
IIIK2
Round2p
Round
key...."
9661,"...-
• •generator
• ••·
Kl6
ILRound16
I
~--------1t---------
IFinalpermutationI
,..64-bitkey
64-bitciphertext
DEShastwotransposition blocks(P-boxes) and16complexroundciphers(theyare
repeated)."
9662,"Although the16iterationroundciphersareconceptually thesame,eachuses
adifferent keyderivedfromtheoriginalkey."
9663,"Theinitialandfinalpermutations arekeylessstraightpermutations thatarethe
inverseofeachother.Thepermutation takesa64-bitinputandpermutes themaccording
topredefined values.942CHAPTER 30CRYPTOGRAPHY
EachroundofDESisacomplex roundcipher,asshowninFigure30.14.Notethat
thestructure oftheencryption roundciphersisdifferentfromthatofthedecryption one."
9664,"Figure30.14OneroundinDESciphers
Kj
(48bits)
a.Encryption round b.Decryption roundK;
(48bits)
DESFunction TheheartofDESistheDESfunction."
9665,"TheDESfunction appliesa
48-bitkeytotherightmost 32bitsRitoproducea32-bitoutput.Thisfunctionismade
upoffouroperations: anXOR,anexpansion permutation, agroupofS-boxes, anda
straightpermutation, asshowninFigure30.15."
9666,"Figure30.15DESfunction
R;
(32bits)
Function
S-boxesXOR~---- ...-K;(48bits)
32bitsSECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 943
TripleDES
CriticsofDEScontendthatthekeyistooshort.Tolengthen thekey,TripleDESor3DES
hasbeenproposed andimplemented."
9667,"ThisusesthreeDESblocks,asshowninFigure30.16."
9668,"Notethattheencrypting blockusesanencryption-decryption-encryption combination of
DESs,whilethedecryption blockusesadecryption-encryption-decryption combination."
9669,Twodifferentversionsof3DESareinuse:3DESwithtwokeysand3DESwiththreekeys.
9670,"Tomakethekeysize112bitsandatthesametimeprotectDESfromattackssuchasthe
man-in-the-middle attack,3DESwithtwokeyswasdesigned."
9671,"Inthisversion,thefirstand
thethirdkeysarethesame(KeYl=KeY3)'Thishastheadvantage inthatatextencrypted by
asingleDESblockcanbedecrypted bythenew3DES.WejustsetallkeysequaltoKeYl'
Manyalgorithms usea3DEScipherwiththreekeys.Thisincreases thesizeofthekey
to168bits."
9672,"Figure30.16TripleDES
64-bitplaintext 64-bitplaintext
EncryptDES KeYl Decrypt DES KeYl
filtn
QDecrypt DES KeY2gs
EncryptDES KeY2.., ..,
15.."
9673,"""S.."
9674,"'I::ES E-;
EncryptDESKeY3DecryptDESKeY3
64-bitciphertext 64-bitciphertext
a.Encryption TripleDES b.Decryption TripleDES
Advanced Encryption Standard (AES)
TheAdvanced Encryption Standard (AES)wasdesigned becauseDES'skeywastoo
small.Although TripleDESODES)increased thekeysize,theprocesswastooslow."
9675,"TheNational Institute ofStandards andTechnology (NIST)chosetheRijndael
algorithm, namedafteritstwoBelgianinventors, VincentRijmenandJoanDaemen,
asthebasisofAES.AESisaverycomplex roundcipher.AESisdesigned withthree
keysizes:128,192,or256bits.Table30.1showstherelationship betweenthedatablock,
numberofrounds,andkeysize."
9676,"Table30.1AESconfiguration
SizeofDataBlock NumberofRounds KeySize
10 128bits
128bits 12 192bits
14 256bits944CHAPTER 30CRYPTOGRAPHY
AEShasthreedifferent configurations withrespect
tothenumberofroundsandkeysize."
9677,"Inthistext,wediscussjustthelO-round, 12S-bitkeyconfiguration."
9678,"Thestructure and
operation oftheotherconfigurations aresimilar.Thedifference liesinthekeygeneration."
9679,"Thegeneralstructure isshowninFigure30.17.ThereisaninitialXORoperation
followed by10roundciphers.Thelastroundisslightlydifferent fromthepreceding
rounds;itismissingoneoperation."
9680,"Although the10iteration blocksarealmostidentical, eachusesadifferent key
derivedfromtheoriginalkey."
9681,"Figure30.17AES
12S-bitplaintext
AES
+""""Ko
/
r--------- -----------,
iII~K1
Ronnd1II
I•I
iII RoundIIK2keyRound2Iigenerator
I
II
II
I·I
I·I·· I·I· I I
I I
I I
iIRound10 IlKIO
(slightlydifferent) III'---------------______ 1
,r12S-bitkey
l2S-bitciphertext
Structure ofEachRound EachroundofAES,exceptforthelast,isacipherwithfour
operations thatareinvertible."
9682,Thelastroundhasonlythreeoperations.
9683,"Figure30.18is
aflowchart thatshowstheoperations ineachround.Eachofthefouroperations usedin
eachroundusesacomplex cipher;thistopicisbeyondthescopeofthisbook."
9684,"OtherCiphers
Duringthelasttwodecades, afewothersymmetric blockciphershavebeendesigned and
used.Mostoftheseciphershavesimilarcharacteristics tothetwocipherswediscussed in
thischapter(DESandAES).Thedifference isusuallyinthesizeoftheblockorkey,the
numberofrounds,andthefunctions used.Theprinciples arethesame.Inordernotto
burdentheuserwiththedetailsoftheseciphers,wegiveabriefdescription ofeach.SECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 945
Figure30.18Structure ofeachround
Roundi
SubByte128-bitdata
Bytesubstitution
ShiftRow
Bytepermutation
MixCo1umn
~~~~IKi
1__ _ _ _ _ _ _ _ _ _ _ _ _ J
128-bitdata
IDEATheInternational DataEncryption Algorithm (IDEA)wasdeveloped byXuejia
LaiandJamesMassey.Theblocksizeis64andthekeysizeis128.Itcanbeimple­
mentedinbothhardware andsoftware."
9685,Blowfish Blowfish wasdeveloped byBruceSchneier.
9686,"Theblocksizeis64andthe
keysizebetween32and448."
9687,"CAST-128CAST-128 wasdeveloped byCarlisleAdamsandStaffordTavares.Itisa
Feistelcipherwith16roundsandablocksizeof64bits;thekeysizeis128bits."
9688,"ReSRCSwasdesigned byRonRivest.Itisafamilyofcipherswithdifferent block
sizes,keysizes,andnumbers ofrounds."
9689,"ModeofOperation
Amodeofoperation isatechnique thatemploysthemodernblockcipherssuchasDES
andAES thatwediscussed earlier(seeFigure30.19)."
9690,"Figure30.19Modesofoperation forblockciphers946CHAPTER 30CRYPTOGRAPHY
Electronic CodeBook
Theelectronic codebook(ECB)modeisapurelyblockciphertechnique."
9691,"Theplain­
textisdividedintoblocksofNbits.Theciphertext ismadeofblocksofNbits.The
valueofNdependsonthetypeofcipherused.Figure30.20showsthemethod."
9692,"Figure30.20ECBmode
KPi:Plaintext blocki
Ci:Ciphertext blocki
NbitsK
Wementionfourcharacteristics ofthismode:
1.Becausethekeyandtheencryption/decryption algorithm arethesame,equalblocks
intheplaintext becomeequalblocksintheciphertext."
9693,"Forexample, ifplaintext
blocks1,5,and9arethesame,ciphertext blocksI,5,and9arealsothesame."
9694,"Thiscanbeasecurityproblem; theadversary canguessthattheplaintext blocks
arethesameifthecorresponding ciphertext blocksarethesame."
9695,"2.Ifwereordertheplaintext block,theciphertext isalsoreordered."
9696,"3.Blocksareindependent ofeachother.Eachblockisencrypted ordecrypted inde­
pendently."
9697,"Aprobleminencryption ordecryption ofablockdoesnotaffectother
blocks."
9698,"4.Anerrorinoneblockisnotpropagated tootherblocks.Ifoneormorebitsarecor­
ruptedduringtransmission, itonlyaffectsthebitsinthecorresponding plaintext
afterdecryption."
9699,Otherplaintext blocksarenotaffected.
9700,"Thisisarealadvantage if
thechannelisnotnoise-free."
9701,"CipherBlockChaining
Thecipherblockchaining (CBC)modetriestoalleviatesomeoftheproblems inECB
byincluding thepreviouscipherblockinthepreparation ofthecurrentblock.Ifthecur­
rentblockisi,thepreviousciphertext blockCi-1isincludedintheencryption ofblocki."
9702,"Inotherwords,whenablockiscompletely enciphered, theblockissent,butacopyofit
iskeptinaregister(aplacewheredatacanbeheld)tobeusedintheencryption ofthe
nextblock.Thereadermaywonderabouttheinitialblock.Thereisnociphertext block
beforethefirstblock.Inthiscase,aphonyblockcalledtheinitiation vector(IV)is
used.Boththesenderandreceiveragreeuponaspecificpredetermined IV.Inother
words,theIVisusedinsteadofthenonexistent CO,Figure30.21showstheCBCmode."
9703,Thereadermaywonderaboutthedecryption.
9704,"Doestheconfiguration showninthe
figureguarantee thecorrectdecryption?"
9705,"Itcanbeproventhatitdoes,butweleavethe
prooftoatextbook innetworksecurity.SECTION 30.2SYMMETRIC-KEY CRYPTOGRAPHY 947
Figure30.21 CBCmode
KInitiated
,..--------''------.--.--"" withIVF,:Plaintext blocki
CiCiphertext blocki
IV:Initialization vector
NbitsInitiated
withIV,------''------""
K
Thefollowing aresomecharacteristics ofCBC."
9706,"1.Eventhoughthekeyandtheencryption/decryption algorithm arethesame,equal
blocksintheplaintext donotbecomeequalblocksintheciphertext."
9707,"Forexample,
ifplaintext blocks1,5,and9arethesame,ciphertext blocksI,5,and9willnotbe
thesame.Anadversary willnotbeabletoguessfromtheciphertext thattwoblocks
arethesame."
9708,"2.Blocksaredependent oneachother.Eachblockisencrypted ordecrypted basedon
aprevious block.Aproblem inencryption ordecryption ofablockaffectsother
blocks."
9709,"3.Theerrorinoneblockispropagated totheotherblocks.Ifoneormorebitsare
corrupted duringthetransmission, itaffectsthebitsinthenext blocks oftheplain­
textafterdecryption."
9710,"CipherFeedback
Thecipherfeedback (CFB)modewascreatedforthosesituations inwhichweneed
tosendorreceiverbitsofdata,whererisanumberdifferent fromtheunderlying
blocksizeoftheencryption cipherused.Thevalueofrcanbe1,4,8,oranynumberof
bits.Sinceallblockciphersworkonablockofdataatatime,theproblem ishowto
encryptjustrbits.Thesolution istoletthecipherencryptablockofbitsanduseonly
thefirstrbitsasanewkey(streamkey)toencrypttherbitsofuserdata.Figure30.22
showstheconfiguration."
9711,"Thefollowing aresomecharacteristics oftheCFBmode:
1.IfwechangetheIVfromoneencryption toanotherusingthesameplaintext, the
ciphertext isdifferent."
9712,2.Theciphertext Cidepends onbothPiandthepreceding ciphertext block.
9713,3.Errorsinoneormorebitsoftheciphertext blockaffectthenextciphertext blocks.
9714,"OutputFeedback
Theoutputfeedback (OFB)modeisverysimilartotheCFBmodewithonedifference."
9715,"Eachbitintheciphertext isindependent oftheprevious bitorbits.Thisavoidserror948CHAPTER 30CRYPTOGRAPHY
Figure30.22CFBmode
N-bit
shiftregister
initiallyIV
rbits
Pi--~rbits
- - - Ci_1
p/Plaintext blocki
Ci:Ciphertext blocki
IV:Initialization vector
rbitsActualkeyN-bit
shiftregister
initiallyIVrbits---Ci-1
propagation."
9716,"Ifanerroroccursintransmission, itdoesnotaffectthefuturebits.Note
that,asinCFB,boththesenderandthereceiverusetheencryption algorithm."
9717,"Note
alsothatinOFB,blockcipherssuchasDESorAEScanonlybeusedtocreatethekey
stream.Thefeedback forcreatingthenextbitstreamcomesfromtheprevious bitsof
thekeystreaminsteadoftheciphertext."
9718,"Theciphertext doesnottakepartincreating
thekeystream.Figure30.23showstheOFBmode."
9719,"Figure30.23OFBmode
N-bit
shiftregister
initiallyIV
Actualkeyrbits
Pi:Plaintext blocki
Cj:Ciphertext blocki
IV:Initialization vectorKN-bit
shiftregister
initiallyIV
Actualkeyrbits
rbits +rbitsPi
+}----------------+J PiCi
Thefollowing aresomeofthecharacteristics oftheOFBmode."
9720,"1.IfwechangetheIVfromoneencryption toanotherusingthesameplaintext, the
ciphertext willbedifferent."
9721,"2.Theciphertext Cidependsontheplaintext Pi'
3.Errorsinoneormorebitsoftheciphertext donotaffectfutureciphertext blocks.SECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 949
30.3ASYMMETRIC-KEY CRYPTOGRAPHY
Intheprevious sections, wediscussed symmetric-key cryptography."
9722,"Inthissectionwe
introduce asymmetric-key (publickeycryptography)."
9723,"Aswementioned before,an
asymmetric-key (orpublic-key) cipherusestwokeys:oneprivateandonepublic.We
discusstwoalgorithms: RSAandDiffie-Hellman."
9724,"RSA
Themostcommon publickeyalgorithm isRSA,namedforitsinventors Rivest,Shamir,
andAdleman (RSA).Itusestwonumbers, eandd,asthepublicandprivatekeys,as
showninFigure30.24."
9725,"Figure30.24RSA
Topublic
i!i
, , I
I , I,__L L __J _
I
.~:
;;5,e::>,
0-<,,
Y
j
C=pemodn
EncryptionCiphertextCalculating e,d,
mldn
p=Cemodn
DecryptionBob
--
Plaintext
Thetwokeys,eandd,haveaspecialrelationship toeachother,adiscussion ofthis
relationship isbeyondthescopeofthisbook.Wejustshowhowtocalculate thekeys
withoutproof."
9726,"Selecting Keys
Bobusethefollowing steps toselecttheprivateandpublickeys:
1.Bobchoosestwoverylargeprimenumberspandq.Remember thataprimenum­
berisonethatcanbedividedevenlyonlyby1anditself."
9727,"2.Bobmultiplies theabovetwoprimestofindn,themodulus forencryption and
decryption."
9728,"Inotherwords,n:::pXq.
3.Bobcalculates anothernumber <1>:::(p-1)X(q-1)."
9729,4.Bobchoosesarandomintegere.Hethencalculates dsothatdxe:::1mod <1>.
9730,5.Bobannounces eandntothepublic;hekeeps <1>anddsecret.
9731,"InRSA,eandnareannounced tothepublic;dand<I>arekeptsecret.950CHAPTER 30CRYPTOGRAPHY
Encryption
Anyonewhoneedstosendamessage toBobcanusenande.Forexample, ifAlice
needstosendamessage toBob,shecanchangethemessage, usuallyashortone,toan
integer.Thisistheplaintext."
9732,"Shethencalculates theciphertext, usingeandn."
9733,"C=pt!(modn)
AlicesendsC,theciphertext, toBob."
9734,"Decryption
Bobkeeps <panddprivate.Whenhereceivestheciphertext, heuseshisprivatekeydto
decryptthemessage:
P=Cd(modn)
Restriction
ForRSAtowork,thevalueofPmustbelessthanthevalueofn.IfPisalargenumber,
theplaintext needstobedividedintoblockstomakePlessthann."
9735,"Example 30.7
Bobchooses7and11aspandqandcalculates n= 7 .11=77.Thevalueof<p=(7-1)(11-1)
or60.Nowhechoosestwokeys,eandd.Ifhechooses etobe13,thendis37.Nowimagine
Alicesendstheplaintext 5toBob.Sheusesthepublickey13toencrypt5."
9736,"Plaintext: 5
C=513;::::26mod77
Ciphertext: 26
Bobreceivestheciphertext 26andusestheprivatekey37todecipher theciphertext:
Ciphertext: 26
P=2637=5mod77
Plaintext: 5 Intended m~agesentbY'Alice
Theplaintext 5sentbyAliceisreceived asplaintext 5byBob."
9737,"Example 30.8
Jennifercreatesapairofkeysforherself.Shechoosesp=397andq=401.Shecalculates n=
159,197and<p=396.400=158,400."
9738,"Shethenchooses e=343andd=12,007.ShowhowTed
cansendamessage toJenniferifheknowseandn."
9739,"Solution
Suppose Tedwantstosendthemessage ""NO""toJennifer."
9740,"Hechangeseachcharacter toanumber
(from00to25)witheachcharacter codedastwodigits.Hethenconcatenates thetwocoded
characters andgetsafour-digit number.Theplaintext is1314.Tedthenuseseandntoencrypt
themessage."
9741,"Theciphertext is1314343=33,677mod159,197."
9742,"Jennifer receives themessageSECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 951
33,677andusesthedecryption keydtodecipheritas33,67712,007=1314mod159,197.Jennifer
thendecodes1314asthemessage""NO"".Figure30.25showstheprocess."
9743,"Figure30.25Example 30.8
Jennifer
r
id=12,007P''''391q'""401
n;::;·159,197
e"",)43d""'·12,007
I-------i~ P=33.67712,007mod159,1971------'je=343
C=1314:>43.mod159,197
Example 30.9
Letusgivearealisticexample."
9744,"Wechoosea512-bitp andq.Wecalculatenand <1>.Wethen
chooseeandtestforrelativeprimeness with<I>(n).Wecalculate d.Finally,weshowtheresultsof
encryption anddecryption."
9745,"WehavewrittenaprogramwritteninJavatodoso;thistypeofcalcula­
tioncannotbedonebyacalculator."
9746,Werandomly choseanintegerof512bits.Theintegerpisa159-digitnumber.
9747,"p=96130345313583504574191581280615427909309845594996215822583150879647940
45505647063849125716018034750312098666606492420191808780667421096063354
219926661209
Theintegerqisa160-digitnumber."
9748,"q=12060191957231446918276794204450896001555925054637033936061798321731482
14848376465921538945320917522527322683010712069560460251388714552496900
0359660045617
Wecalculate n.Ithas309digits."
9749,"n=11593504I73967614968892509864615887523771457375454144775485526137614788
54083263508172768788159683251684688493006254857641112501624145523391829
27162507656772727460097082714127730434960500556347274566628060099924037
10299142447229221577279853172703383938133469268413732762200096667667183
1831088373420823444370953
Wecalculate <1>.Ithas309digits:
<1>=
115935041739676149688925098646158875237714~7375454144775485526137614788
54083263~0817276878&159683251684688493OO6254857641112501624145523391829
27162507656751054233608492916752034482627988117554787657013923444405716
98958172819609822636107546721186461217135910735864061400888517026537727
1264467341066243857664128952CHAPTER 30CRYPTOGRAPHY
Wechoosee=35,535.Wethenfindd."
9750,"e=35335
d=58oo8302860037763936093661289677917594669062089650962180422866111380593852
82235873170628691003002171085904433840217072986908760061153062025249598844
48047568240966247081485817130463240644077704833134010850947385295645071936
77406119732655742423721761767462077637164207600337085333288532144708859551
36670294831
Alicewantstosendthemessage ""THISISATEST""whichcanbechanged toanumeric
valuebyusingthe00-26encoding scheme(26isthespacecharacter)."
9751,"P=1907081826081826002619041819
Theciphertext calculated byAliceisC=pe,whichis
c'=
475309123646226827206365550610545J80942371796070491716523239243aS44j~',
60613199328566617843418359114151197411252005682979794571736036101278:21'
8847892741566090480023507190715277185914975188465888632101148354103361
6578984679683867637337657774656250792805211481418440481418443081277305"",
9004692874248559166462108656
Bobcanrecovertheplaintext fromtheciphertext byusingP=Cd,whichis
P=:1907081826081826002619041819
Therecovered plaintext isTHISISATESTafterdecoding."
9752,"Applications
Although RSAcanbeusedtoencryptanddecryptactualmessages, itisveryslowifthe
message islong.RSA,therefore, isusefulforshortmessages suchasasmallmessage
digest(seeChapter31)orasymmetric keytobeusedforasymmetric-key cryptosystem."
9753,"Inparticular, wewillseethatRSAisusedindigitalsignatures andothercryptosystems
thatoftenneedtoencryptasmallmessage withouthavingaccesstoasymmetric key."
9754,RSAisalsousedforauthentication aswewillseelater.
9755,"Diffie-Hellman
RSAisapublic-key cryptosystem thatisoftenusedtoencryptanddecryptsymmetric
keys.Diffie-Hellman, ontheotherhand,wasoriginally designed forkeyexchange."
9756,"Inthe
Diffie-Hellman cryptosystem, twopartiescreateasymmetric sessionkeytoexchange
datawithouthavingtoremember orstorethekeyforfutureuse.Theydonothavetomeet
toagreeonthekey;itcanbedonethroughtheInternet.Letusseehowtheprotocolworks
whenAliceandBobneedasymmetric keytocommunicate."
9757,"Beforeestablishing asym­
metrickey,thetwopartiesneedtochoosetwonumberspandg.Thefirstnumber,p,isaSECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 953
largeprimenumberontheorderof300decimaldigits(1024bits).Thesecondnumberis
arandomnumber.Thesetwonumbers neednotbeconfidential."
9758,"Theycanbesentthrough
theInternet;theycanbepublic."
9759,"Procedure
Figure30.26showstheprocedure."
9760,"Thestepsareasfollows:
Figure30.26Diffie-Hellman method
0,-....,._ ...Thevaluesof
pandgarepublic."
9761,"Sharedsecretkey~-.;.,._...."
9762,"-------------------0-------------------
K=gXYmodp
oStep1:Alicechoosesalargerandomnumberxandcalculates R1=Ifmodp."
9763,oStep2:Bobchoosesanotherlargerandomnumberyandcalculates R2=gYmodp.
9764,"oStep3:AlicesendsR1toBob.NotethatAlicedoesnotsendthevalueofx;she
sendsonlyR1-oStep4:BobsendsR2toAlice.Again,notethatBobdoesnotsendthevalueofy,
hesendsonlyR2."
9765,oStep5:Alicecalculates K=(R2lmodp.
9766,oStep6:Bobalsocalculates K=(R1?modp.
9767,Thesymmetric keyforthesessionisK.
9768,"(.fmodp)Ymodp=(gYmodp)Xmodp=.fYmodp
Bobhascalculated K=(R1?modp=(Ifmodp?modp=lfYmodp.Alicehas
calculated K=(R2)Xmodp=(gYmodp)Xmod=lfYmodp.Bothhavereachedthesame
valuewithoutBobknowing thevalueofxandwithoutAliceknowing thevalueofy."
9769,"Thesymmetric (shared)keyintheDiffie-Hellman protocolis
K=!tYmodp.954CHAPTER 30CRYPTOGRAPHY
Example 30.10
Letusgiveatrivialexample tomaketheprocedure clear.Ourexample usessmallnum­
bers,butnotethatinarealsituation, thenumbers areverylarge.Assumeg=7andp=23."
9770,"Thestepsareasfollows:
1.Alicechoosesx=3andcalculates R1=73mod23=21."
9771,2.Bobchoosesy=6andcalculates R2=76mod23=4.
9772,3.Alicesendsthenumber21toBob.
9773,4.Bobsendsthenumber4toAlice.
9774,5.Alicecalculates thesymmetric keyK=43mod23=18.
9775,6.Bobcalculates thesymmetric keyK=216mod23=18.
9776,ThevalueofKisthesameforbothAliceandBob;EfYmodp=718mod23=18.
9777,"IdeaofDiffie-Hellman
TheDiffie-Hellman concept, showninFigure30.27,issimplebutelegant.Wecanthink
ofthesecretkeybetweenAliceandBobasmadeofthreeparts:g,x,andy.Thefirstpart
ispublic.Everyone knowsone-third ofthekey;gisapublicvalue.Theothertwoparts
mustbeaddedbyAliceandBob.Eachaddsonepart.Aliceaddsxasthesecondpartfor
Bob;BobaddsyasthesecondpartforAlice.WhenAlicereceivesthetwo-thirds com­
pletedkeyfromBob,sheaddsthelastpart,herx,tocomplete thekey.WhenBobreceives
thetwo-thirds completed keyfromAlice,headdsthelastpart,hisy,tocomplete thekey."
9778,"Notethatalthough thekeyinAlice'shandconsistsofg-y-xandthekeyinBob'shandis
g-x-y,thesetwokeysarethesamebecauseEfY=gYx.
Figure30.27Diffie-Hellman idea
Alice_...."
9779,"bd
Alicefillsupanother!
one-third ofthe
secretkeyusing
herrandomnumber
fBOne-third ofthekeyispublic."
9780,"Thetwokeysarethesame
becauseitdoesnotmatter
ifxisfilledfirstory.Bobfillsupanother
one-third ofthe
secretkeyusing
hisrandomnumberSECTION 30.3ASYMMETRIC-KEY CRYPTOGRAPHY 955
Notealsothatalthoughthetwokeysarethesame,Alicecannotfindthevalueyusedby
Bobbecausethe calculation isdoneinmodulop;Alicereceives gYmodpfromBob,notgY."
9781,"Man-in-the-Middle Attack
Diffie-Hellman isaverysophisticated symmetric-key creationalgorithm.Ifxandyare
verylargenumbers, itisextremely difficultforEvetofindthekey,knowing onlypand
g.Anintruderneedstodetermine xandyifR1andR2areintercepted."
9782,"Butfindingx
fromR1andyfromR2aretwodifficulttasks.Evenasophisticated computer would
needperhapsyearstofindthekeybytryingdifferent numbers."
9783,"Inaddition, Aliceand
Bobwillchangethekeythenexttimetheyneedtocommunicate."
9784,"However, theprotocoldoeshaveaweakness."
9785,"Evedoesnothavetofindthevalueof
xandytoattacktheprotocol."
9786,"ShecanfoolAliceandBobbycreatingtwokeys:one
between herselfandAliceandanotherbetween herselfandBob.Figure30.28shows
thesituation."
9787,"Figure30.28Man-in-the-middle attack
pandgarepublic."
9788,"Alice
Eve
Rz=gZmodp
K]:=;(R1)tmodp
Kz""""(R;FmodpBob""."
9789,"R3=gYmodp
Alice-Eve key Eve-Bob key-----------1----------------------1----------
K1=gXZmodp Kz=gZYmodp
Thefollowing canhappen:
1.Alicechoosesx,calculates R1=gXmodp,andsendsR1toBob."
9790,"2.Eve,theintruder, intercepts Rl'Shechoosesz,calculates R2=Efmodp,andsends
R2tobothAliceandBob.956CHAPTER 30CRYPTOGRAPHY
3.Bobchooses y,calculates R3=gYmodp,andsendsR3toAlice;R3isintercepted
byEveandneverreachesAlice."
9791,"4.AliceandEvecalculate KI=Etzmodp,whichbecomes asharedkeybetweenAlice
andEve.Alice,however, thinksthatitisakeysharedbetweenBobandherself."
9792,"5.EveandBobcalculate K2=gZYmodp,whichbecomes asharedkeybetweenEve
andBob.Bob,however, thinksthatitisakeysharedbetweenAliceandhimself."
9793,"Inotherwords,twokeys,insteadofone,arecreated:onebetweenAliceandEveand
onebetweenEveandBob.WhenAlicesendsdatatoBobencrypted withK1(sharedby
AliceandEve),itcanbedeciphered andreadbyEve.EvecansendthemessagetoBob
encrypted byK2(sharedkeybetweenEveandBob);orshecanevenchangethemes­
sageorsendatotallynewmessage."
9794,"Bobisfooledintobelieving thatthemessage has
comefromAlice.AsimilarscenariocanhappentoAliceintheotherdirection."
9795,"Thissituationiscalledaman-in-the-middle attackbecauseEvecomesinbetween
andintercepts RI,sentbyAlicetoBob,andR3,sentbyBobtoAlice.Itisalsoknown
asabucketbrigadeattackbecauseitresembles ashortlineofvolunteers passinga
bucketofwaterfrompersontoperson."
9796,"Authentication
Theman-in-the-middle attackcanbeavoidedifBobandAlicefirstauthenticate each
other.Inotherwords,theexchange keyprocesscanbecombined withanauthentication
schemetopreventaman-in-the-middle attack.Wediscussauthentication inChapter31."
9797,"30.4RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Theitemsinbrackets[...]refertothereference listattheendofthetext."
9798,"Books
Cryptography canbefoundinmanybooksdedicated tothesubjectsuchas[Bar02],
[GartH], [Sti02],[Mao04], [MOV97], and[Sch96]."
9799,"30.5KEYTERMS
Advanced Encryption Standard (AES)
blockcipher
bucketbrigadeattack
Caesarcipher
cipherblockchaining (CBC)mode
cipherfeedback (CFB)mode
ciphertext
compression permutationcryptography
DataEncryption Standard (DES)
decryption
decryption algorithm
DESfunction
Diffie-Hellman cryptosystem
electronic codebook(ECB)mode
encryptionencryption algorithm
expansion permutation
initiation vector(IV)
key
man-in-the-middle attack
modeofoperation
monoalphabetic cipher
National InstituteofStandards and
Technology (NIST)
outputfeedback (OFB)mode
P-box
plaintext
polyalphabetic cipher
privatekey
publickeySECTION 30.6SUMMARY 957
Rijndael algorithm
Rivest,Shamir,Adleman (RSA)
rotationcipher
round
roundcipher
S-box
secretkey
sessionkey
shiftcipher
simplecipher
straightpermutation
substitution cipher
transposition cipher
TripleDES
XORcipher
30.6SUMMARY
oCryptography isthescienceandartoftransforming messages tomakethemsecure
andimmune toattacks."
9800,"oTheplaintext istheoriginalmessage beforetransformation; theciphertext isthe
message aftertransformation."
9801,"oAnencryption algorithm transforms plaintext tociphertext; adecryption algorithm
transforms ciphertext toplaintext."
9802,"oAcombination ofanencryption algorithm andadecryption algorithm iscalleda
cipher."
9803,oThekeyisanumberorasetofnumbers onwhichthecipheroperates.
9804,"oWecandivideallciphersintotwobroadcategories: symmetric-key ciphersand
asymmetric-key ciphers."
9805,"oInasymmetric-key cipher,thesamekeyisusedbyboththesenderandreceiver."
9806,"The
keyiscalledthesecretkey."
9807,"oInanasymmetric-key cipher,apairofkeysisused.Thesenderusesthepublickey;
thereceiverusestheprivatekey."
9808,oAsubstitution cipherreplaces onecharacter withanothercharacter.
9809,"oSubstitution cipherscanbecategorized intotwobroadcategories: monoalphabetic
andpolyalphabetic."
9810,"oTheshiftcipheristhesimplest monoalphabetic cipher.Itusesmodular arithmetic
withamodulus of26.TheCaesarcipherisashiftcipherthathasakeyof3."
9811,oThetransposition cipherreorders theplaintext characters tocreateaciphertext.oAnXORcipheristhe simplest cipherwhichisself-invertible.
9812,"oArotationcipherisaninvertible cipher.958CHAPTER 30CRYPTOGRAPHY
oAnS-boxisakeylesssubstitution cipherwithNinputsandMoutputsthatusesa
formulatodefinetherelationship between theinputstreamandtheoutputstream."
9813,"oAP-boxisakeylesstransposition cipherwithNinputsandMoutputsthatusesa
tabletodefinetherelationship between theinputstreamandtheoutputstream.A
P-boxisinvertible onlyifthenumbersofinputsandoutputsarethesame.AP-boxcan
useastraightpermutation, acompression peilliutation, oranexpansion permutation."
9814,"oAmoderncipherisusuallyaroundcipher;eachroundisacomplex ciphermadeof
acombination ofdifferent simpleciphers."
9815,oDESisasymmetric-key methodadoptedbytheU.S.government.
9816,"DEShasaninitial
andfinalpermutation blockand16rounds."
9817,oTheheartofDESistheDESfunction.
9818,"TheDESfunction hasfourcomponents: an
expansion permutation, anXORoperation, S-boxes, andastraightpermutation."
9819,oDESusesakeygenerator togenerate sixteen48-bitroundkeys.
9820,"oTripleDESwasdesigned toincreasethesizeoftheDESkey(effectively 56bits)
forbettersecurity."
9821,"oAESisaroundcipherbasedontheRijndael algorithm thatusesa128-bitblockof
data.AEShasthreedifferent configurations: 10roundswithakeysizeof128bits,
12roundswithakeysizeof192bits,and14roundswithakeysizeof256bits."
9822,oModeofoperation referstotechniques thatdeploythecipherssuchasDESorAES.
9823,"Fourcommon modesofoperation areECB,CBC,CBF,andOFB.ECBandCBC
areblockciphers;CBFandOFBarestreamciphers."
9824,"oOnecommonly usedpublic-key cryptography methodistheRSAalgorithm,
invented byRivest,Shamir,andAdleman."
9825,oRSAchoosesntobetheproductoftwoprimespandq.
9826,oTheDiffie-Hellman methodprovides aone-time sessionkeyfortwoparties.
9827,"oTheman-in-the-middle attackcanendanger thesecurityoftheDiffie-Hellman
methodiftwopartiesarenotauthenticated toeachother."
9828,"30.7PRACTICE SET
ReviewQuestions
1.Insymmetric-key cryptography, howmanykeysareneededifAliceandBobwant
tocommunicate witheachother?"
9829,"2.Insymmetric-key cryptography, canAliceusethesamekeytocommunicate with
bothBobandJohn?Explainyouranswer."
9830,"3.Insymmetric-key cryptography, ifeverypersoninagroupof10peopleneedsto
communicate witheveryotherpersoninanothergroupof10people,howmany
secretkeysareneeded?"
9831,"4.Insymmetric-key cryptography, ifeverypersoninagroupof10peopleneedstocom­
municate witheveryotherpersoninthegroup,howmanysecretkeysareneeded?"
9832,"5.RepeatQuestion 1forasymmetric-key cryptography.SECTION 30.7PRACTICE SET 959
6.RepeatQuestion 2forasymmetric-key cryptography."
9833,7.RepeatQuestion 3forasymmetric-key cryptography.
9834,8.RepeatQuestion 4forasymmetric-key cryptography.
9835,"Exercises
9.Insymmetric-key cryptography, howdoyouthinktwopersonscanestablish asecret
keybetweenthemselves?"
9836,"10.Inasymmetric-key cryptography, howdoyouthinktwopersonscanestablish two
pairsofkeysbetweenthemselves?"
9837,"11.Encryptthemessage""THISISANEXERCISE"" usingashiftcipherwithakeyof20."
9838,Ignorethespacebetweenwords.Decryptthemessagetogettheoriginalplaintext.
9839,"12.Canweusemonoalphabetic substitution ifoursymbols arejust0 andI?Isita
goodidea?"
9840,"13.Canweusepolyalphabetic substitution ifoursymbolsarejust0 andI?Isitagood
idea?"
9841,"14.Encrypt""INTERNET"" usingatransposition cipherwiththefollowing key:
35214
1 2345
15.Rotate11100Ithreebitstotheright."
9842,16.Rotate100111threebitstotheleft.
9843,"17.A6-by-2S-boxaddsthebitsattheodd-numbered positions (1,3,5,...)togetthe
rightbitoftheoutputandaddsthebitsattheeven-numbered positions (2,4,6,...)
togettheleftbitoftheoutput.Iftheinputis1100I0,whatistheoutput?Ifthe
inputis10110I,whatistheoutput?Assumetherightmost bitisbitI."
9844,"18.Whatareallthepossiblenumbercombinations ofinputsina6-by-2S-box?What
isthepossiblenumberofoutputs?"
9845,"19.Theleftmostbitofa4-by-3S-boxrotatestheother3bits.Iftheleftmostbitis0,
the3otherbitsarerotatedtotheright1bit.IftheleftmostbitisI,the3otherbits
arerotatedtotheleftIbit.Iftheinputis10II,whatistheoutput?Iftheinputis
0110,whatistheoutput?"
9846,20.AP-boxusesthefollowing tableforencryption.
9847,"Showtheboxandconnecttheinput
totheoutput."
9848,"4 2,
13
21."
9849,"IstheP-boxstraight,compression, orexpansion?"
9850,"21.InRSA,giventwoprimenumbersp=19andq=23,findnand<p.Choosee=5 and
trytofindd,suchthateanddmeetthecriteria."
9851,"22.Tounderstand thesecurityoftheRSAalgorithm, finddifyouknowthate=17and
n=187.ThisexerciseproveshoweasyisforEvetobreakthesecretifnissmall.960CHAPTER 30CRYPTOGRAPHY
23.FortheRSAalgorithm withalargen,explainwhyBobcancalculate dfromn,but
Evecannot."
9852,"24.Usinge=13,d=37,andn=77intheRSAalgorithm, encryptthemessage""FINE""
usingthevaluesof00to25forlettersAtoZ.Forsimplicity, dotheencryption and
decryption character bycharacter."
9853,25.Whycan'tBobchoose1asthepublickeyeinRSA?
9854,26.Whatisthedangerinchoosing 2asthepublickeyeinRSA?
9855,"27.EveusesRSAtosendamessage toBob,usingBob'spublickey.Later,atacock­
tailparty,EveseesBobandaskshimifthemessage hasarrivedandBobconfirms
it.Afterafewdrinks,EveasksBob,""Whatwastheciphertext?"" Bobgivesthe
valueoftheciphertext toEve.Canthisendanger thesecurityofBob'sprivatekey?"
9856,Explainyouranswer.
9857,"28.Whatisthevalueofthesymmetric keyintheDiffie-Hellman protocolifg=7,p=23,
x=2,andy=5?"
9858,"29.IntheDiffie-Hellman protocol, whathappensifxandyhavethesamevalue?That
is,AliceandBobhaveaccidentally chosenthesamenumber.ArethevaluesofR1
andR2thesame?Arethevaluesofthesessionkeyscalculated byAliceandBob
thesame?Useanexample toproveyourclaims."
9859,"Research Activities
30.Anotherasymmetric-key algorithm iscalledEIGamal."
9860,"Dosomeresearch andfind
outsomeinformation aboutthisalgorithm."
9861,"Whatisthedifference between RSA
andEIGamal?"
9862,"31.Anotherasymmetric-key algorithm isbasedonellipticcurves.Ifyouarefamiliar
withellipticcurves,dosomeresearch andfindthealgorithms basedonelliptic
curves."
9863,"32.TomakeDiffie-Helman algorithm morerobust,oneusescookies.Do some research
andfindoutabouttheuseofcookiesintheDiffie-Helman algorithm.CHAPTER 31
Network Security
InChapter30,weintroduced thescienceofcryptography."
9864,"Cryptography hasseveral
applications innetworksecurity."
9865,"Inthischapter,wefirstintroduce thesecurityservices
wetypically expectinanetwork."
9866,"Wethenshowhowtheseservicescanbeprovided
usingcryptography."
9867,"Attheendofthechapter,wealsotouchontheissueofdistributing
symmetric andasymmetric keys.Thechapterprovides thebackground necessary for
Chapter32,wherewediscusssecurityintheInternet."
9868,"31.1SECURITY SERVICES
Network securitycanprovideoneofthefiveservicesasshowninFigure31.1.Fourof
theseservicesarerelatedtothemessageexchanged usingthenetwork: messageconfi­
dentiality, integrity, authentication, andnonrepudiation."
9869,"Thefifthserviceprovides
entityauthentication oridentification."
9870,"Figure31.1Securityservicesrelatedtothemessageorentity
Message
Security
services
EntityConfidentiality
Integrity
Authentication
Nonrepudiatton
Authentication
961962CHAPTER 31NETWORK SECURiTY
Message Confidentiality
Message confidentiality orprivacymeansthatthesenderandthereceiverexpectcon­
fidentiality."
9871,Thetransmitted message mustmakesensetoonlytheintended receiver.
9872,"To
allothers,themessage mustbegarbage."
9873,"Whenacustomer communicates withher
bank,sheexpectsthatthecommunication istotallyconfidential."
9874,"Message Integrity
Message integrity meansthatthedatamustarriveatthereceiverexactlyastheywere
sent.Theremustbenochangesduringthetransmission, neitheraccidentally normali­
ciously.Asmoreandmoremonetary exchanges occurovertheInternet,integrityiscrucial."
9875,"Forexample, itwouldbedisastrous ifarequestfortransferring $100changed toa
requestfor$10,000or$100,000."
9876,"Theintegrity ofthemessage mustbepreserved ina
securecommunication."
9877,"Message Authentication
Message authentication isaservicebeyondmessageintegrity."
9878,"Inmessageauthentication
thereceiverneedstobesureofthesender'sidentityandthatanimposter hasnotsentthe
message."
9879,"Message Nonrepudiation
Message nonrepudiation meansthatasendermustnotbeabletodenysendingamessage
thatheorshe,infact,didsend.Theburdenofprooffallsonthereceiver."
9880,"Forexample,
whenacustomer sendsamessage totransfermoneyfromoneaccounttoanother,the
bankmusthaveproofthatthecustomer actuallyrequested thistransaction."
9881,"EntityAuthentication
Inentityauthentication (oruseridentification) theentityoruserisverifiedpriorto
accesstothesystemresources (files,forexample)."
9882,"Forexample, astudentwhoneedsto
accessheruniversity resources needstobeauthenticated duringtheloggingprocess."
9883,Thisistoprotecttheinterestsoftheuniversity andthestudent.
9884,"31.2MESSAGE CONFIDENTIALITY
Theconceptofhowtoachievemessage confidentiality orprivacyhasnotchangedfor
thousands ofyears.The message mustbeencrypted atthesendersiteanddecrypted
atthereceiversite.Thatis,themessagemustberendered unintelligible tounauthorized
parties.Agoodprivacytechnique guarantees tosomeextentthatapotential intruder
(eavesdropper) cannotunderstand thecontents ofthemessage."
9885,"Aswediscussed in
Chapter30,thiscanbedoneusingeithersymmetric-key cryptography orasymmetric­
keycryptography."
9886,"Wereviewboth.SECTION 31.2MESSAGE CONFIDENTIALITY 963
Confidentialitywith Symmetric-Key Cryptography
Although modernsymmetric-key algorithms aremorecomplex thantheonesused
throughthelonghistoryofthesecretwriting,theprinciple isthesame.Toprovideconfi­
dentiality withsymmetric-key cryptography, asenderandareceiverneedtosharea
secretkey.Inthepastwhendataexchange wasbetweentwospecificpersons(forexam­
ple,twofriendsorarulerandherarmychief),itwaspossibletopersonallyexchange the
secretkeys.Today'scommunication doesnotoftenprovidethisopportunity."
9887,"Aperson
residingintheUnitedStatescannotmeetandexchange asecretkeywithapersonliving
inChina.Furthermore, thecommunication isbetweenmillionsofpeople,notjustafew."
9888,"Tobeabletousesymmetric-key cryptography, weneedtofindasolutiontothe
keysharing.Thiscanbedoneusingasessionkey.Asessionkeyisonethatisusedonly
forthedurationofonesession.Thesessionkeyitselfisexchanged usingasymmetric­
keycryptography aswewillseelater.Figure31.2showstheuseofasessionsymmetric
keyforsendingconfidential messages fromAlicetoBobandviceversa.Notethatthe
natureofthesymmetric keyallowsthecommunication tobecarriedoninbothdirec­
tionsalthough itisnotrecommended today.Usingtwodifferent keysismoresecure,
becauseifonekeyiscompromised, thecommunication isstillconfidential intheother
direction."
9889,"Figure31.2Message confidentiality usingsymmetric keysintwodirections
Alice GI Sharedkeys nmr-----------------------------lIBob
Plaintext ,----------, Ciphertext ,...-------, Plaintext1-------------1
Dataflow
a.AsharedsecretkeycanbeusedinAlice-Bob communication
Alice
Plaintext Ciphertext .....-----, PlaintextI-----l Decry;pnonI---------'-------f
.."
9890,"L..........""""""::""::""--o....J
Dataflow
b.Adifferent sharedsecretkeyisrecommended inBob-Alice communicationBob
Thereasonsymmetric-key cryptography isstillthedominant methodforconfiden­
tialityofthemessageisitsefficiency."
9891,"Foralongmessage, symmetric-key cryptography
ismuchmoreefficientthanasymmetric-key cryptography."
9892,"Confidentiality withAsymmetric- KeyCryptography
Theproblem wementioned aboutkeyexchange insymmetric-key cryptography for
privacyculminated inthecreationofasymmetric-key cryptography."
9893,"Here,thereisno
keysharing;thereisapublicannouncement."
9894,"Bobcreatestwokeys:oneprivateandone964CHAPTER 31NETWORK SECURITY
public.Hekeepstheprivatekeyfordecryption; hepubliclyannounces thepublickeyto
theworld.Thepublickeyisusedonlyforencryption; theprivatekeyisusedonlyfor
decryption."
9895,Thepublickeylocksthemessage; theprivatekeyunlocksit.
9896,"Foratwo-way communication between AliceandBob,twopairsofkeysare
needed.WhenAlicesendsamessage toBob,sheusesBob'spair;whenBobsendsa
messagetoAlice,heusesAlice'spairasshowninFigure31.3.
Figure31.3Message confidentiality usingasymmetric keys
Alice
r-,------------- ---~~f f~r ~ B~
PlaintextI."
9897,"I Ciphertext r------, PlaintextEncryption----2-------1
•'-----_----J
Dataflow
a.Bob'skeysareusedinAlice-Bob communication
~r-----------------~ t t
~ ~ r
it
Dataflow
b.Alice'skeysareusedinBob·Alice communicationBob
Confidentiality withasymmetric-key cryptosystem hasitsownproblems."
9898,"First,the
methodisbasedonlongmathematical calculations usinglongkeys.Thismeansthat
thissystemisveryinefficient forlongmessages; itshouldbeappliedonlytoshortmes­
sages.Second,thesenderofthemessage still needs tobecertainaboutthepublickey
ofthereceiver."
9899,"Forexample, inAlice-Bob communication, Aliceneedstobesurethat
Bob'spublickeyisgenuine; Evemayhaveannounced herpublickeyinthenameof
Bob.Asystemoftrustisneeded,aswewillseelaterinthechapter."
9900,"31.3MESSAGE INTEGRITY
Encryption anddecryption providesecrecy,orconfidentiality, butnotintegrity."
9901,"How­
ever,onoccasion wemaynotevenneedsecrecy,butinsteadmusthaveintegrity."
9902,"For
example, Alicemaywriteawilltodistribute herestateuponherdeath.Thewilldoes
notneedtobeencrypted."
9903,"Afterherdeath,anyonecanexaminethewill.Theintegrityof
thewill, however, needstobepreserved."
9904,"AlicedoesnotwantthecontentsofthewilltoSECTION 31.3MESSAGE INTEGRITY 965
bechanged."
9905,"Asanotherexample, supposeAlicesendsamessage instructing herbanker,
Bob,topayEveforconsulting work.Themessage doesnotneedtobehiddenfromEve
becauseshealreadyknowssheistobepaid.However, themessage doesneedtobesafe
fromanytampering, especially byEve."
9906,"Document andFingerprint
Onewaytopreserve theintegrity ofadocument isthroughtheuseofafingerprint."
9907,"If
Aliceneedstobesurethatthecontentsofherdocument willnotbeillegally changed,
shecanputherfingerprint atthebottomofthedocument."
9908,"Evecannotmodifythecontents
ofthisdocument orcreateafalsedocument because shecannotforgeAlice'sfinger­
print.Toensurethatthedocument hasnotbeenchanged, Alice'sfingerprint onthedoc­
umentcanbecompared toAlice'sfingerprint onfile.Iftheyarenotthesame,the
document isnotfromAlice."
9909,"Topreserve theintegrity ofadocument,
boththedocument andthefingerprint areneeded."
9910,"Message andMessageDigest
Theelectronic equivalent ofthedocument andfingerprint pairisthemessage andmes­
sagedigestpail:Topreserve theintegrity ofamessage, themessage ispassedthrough
analgorithm calledahashfunction."
9911,"Thehashfunction createsacompressed imageof
themessage thatcanbeusedasafingerprint."
9912,"Figure31.4showsthemessage, hash
function, andthemessage digest."
9913,"Figure31.4Message andmessage digest
Message
(Document)Hash
function
Difference
Thetwopairsdocument/fingerprint andmessage/message digestaresimilar,withsome
differences."
9914,"Thedocument andfingerprint arephysically linkedtogether; also,neither
needstobekeptsecret.Themessage andmessage digestcanbeunlinked (orsent)sep­
aratelyand,mostimportantly, themessage digestneedstobekeptsecret.Themessage
digestiseitherkeptsecretinasafeplaceorencrypted ifweneedtosenditthrougha
communications channel."
9915,"Themessagedigestneedstobekeptsecret.966CHAPTER 31NETWORK SECURITY
Creating andChecking theDigest
Themessage digestiscreatedatthesendersiteandissentwiththemessage tothe
receiver."
9916,"Tochecktheintegrityofamessage, ordocument, thereceivercreatesthehash
function againandcompares thenewmessage digestwiththeonereceived.Ifbothare
thesame,thereceiverissurethattheoriginalmessagehasnotbeenchanged."
9917,"Ofcourse,
weareassuming thatthedigesthasbeensentsecretly.Figure31.5showstheidea."
9918,"Figure31.5Checking integrity
Alice&
HashFunction CriteriaMessage
and
digestBob
&
Tobeeligibleforahash,afunction needstomeetthreecriteria:one-wayness, resis­
tancetoweakcollision, andresistance tostrongcollision asshowninFigure31.6.
Figure31.6Criteriaofahashfunction
Hashfunction
criteria
I
I I I
Onc-wayncssWeakcollisionIStron~collision
resistance resistance
One-wayness
Ahashfunction musthaveone-wayness; amessage digestiscreatedbyaone-way
hashingfunction."
9919,"Wemustnotbeabletorecreatethemessage fromthedigest.Some­
timesitisdifficulttomakeahashfunction 100percentone-way; thecriteriastatethatit
mustbeextremely difficultorimpossible tocreatethemessageifthemessagedigestis
given.Thisissimilartothedocument/fingerprint case.Noonecanmakeadocument
fromafingerprint.SECTION 31.3MESSAGE INTEGRITY 967
Example 31.1
Canweuseaconventional losslesscompression methodasahashingfunction?"
9920,"Solution
Wecannot.Alosslesscompression methodcreatesacompressed message thatisreversible."
9921,"You
canuncompress thecompressed message togettheoriginalone."
9922,"Example 31.2
Canweuseachecksum methodasahashingfunction?"
9923,"Solution
Wecan.Achecksum function isnotreversible; itmeetsthefirstcriterion."
9924,"However, itdoesnot
meettheothercriteria."
9925,"WeakCollision Resistance
Thesecondcriterion, weakcollision resistance, ensuresthatamessage cannoteasily
beforged.IfAlicecreatesamessage andadigestandsendsbothtoBob,thiscriterion
ensuresthatEvecannoteasilycreateanothermessage thathashesexactlytothesame
digest.Inotherwords,givenaspecificmessage anditsdigest,itisimpossible (orat
leastverydifficult) tocreateanothermessage withthesamedigest."
9926,"Whentwomessages createthesamedigest,wesaythereisacollision."
9927,"Inaweek
collision, givenamessage digest,itisveryunlikelythatsomeone cancreateamessage
withexactlythesamedigest.Ahashfunction musthaveweakcollision resistance."
9928,"StrongCollision Resistance
Thethirdcriterion, strongcollision resistance, ensuresthatwecannotfindtwomessages
thathashtothesamedigest.ThiscriterionisneededtoensurethatAlice,thesenderofthe
message, cannotcauseproblems byforgingamessage.IfAlicecancreatetwomessages
thathashtothesamedigest,shecandenysendingthefirsttoBobandclaimthatshesent
onlythesecond."
9929,"Thistypeofcollision iscalledstrongbecausetheprobability ofcollision ishigher
thanintheprevious case.Anadversary cancreatetwomessages thathashtothesame
digest.Forexample, ifthenumberofbitsinthemessage digestissmall,itislikely
Alicecancreatetwodifferent messages withthesamemessage digest.Shecansendthe
firsttoBobandkeepthesecondforherself.Alicecanlatersaythatthesecondwas
theoriginalagreed-upon document andnotthefirst."
9930,"Suppose twodifferent willscanbecreatedthathashtothesamedigest.Whenthe
timecomesfortheexecution ofthewill,thesecondwillispresented totheheirs.Since
thedigestmatchesbothwills,thesubstitution issuccessful."
9931,"HashAlgorithms: SHA-l
Whilemanyhashalgorithms havebeendesigned, themostcommon isSHA-l.SHA-1
(SecureHashAlgorithm 1)isarevisedversionofSHAdesigned bytheNational
InstituteofStandards andTechnology (NIST).Itwaspublished asaFederalInformation
Processing Standard (PIPS).968CHAPTER 31NETWORK SECURITY
Averyinteresting pointaboutthisalgorithm andothersisthattheyallfollowthe
sameconcept."
9932,EachcreatesadigestoflengthNfromamultiple-block message.
9933,"Each
blockis512bitsinlength,asshowninFigure31.7.
Figure31.7Message digestcreation
512bitsMessage, multiple5l2-bitblocks
•••
..."
9934,...
9935,"Message digest·1
AbufferofNbitsisinitialized toapredetermined value.Thealgorithm mangles
thisinitialbufferwiththefirst512bitsofthemessage tocreatethefirstintermediate
message digestofNbits.Thisdigestisthenmangled withthesecond512-bitblockto
createthesecondintermediate digest.The(n-l)thdigestismangled withthenthblock
tocreatethenthdigest.Ifablockisnot512bits,padding (Os)isaddedtomakeitso."
9936,"Whenthelastblockisprocessed, theresulting digestisthemessage digestforthe
entiremessage."
9937,"SHA-lhasamessagedigestof160bits(5words,eachof32bits)."
9938,"SHA-lhashalgorithms createanN-bitmessage
digestoutofamessage of512-bitblocks."
9939,SHA-lhasamessagedigestof160bits(5wordsof32bits).
9940,"WordExpansion
Beforeprocessing, theblockneedstobeexpanded."
9941,"Ablockismadeof512bitsor16
32-bitwords,butweneed80wordsintheprocessing phase.Sothe16-wordblockneeds
tobeexpanded to80words,wordOtoword79."
9942,"Processing EachBlock
Figure31.8showsthegeneraloutlinefortheprocessing ofoneblock.Thereare80steps
inblockprocessing."
9943,"Ineachstep,onewordfromtheexpanded blockandone32-bit
constant aremangled together andthenoperated ontocreateanewdigest.Atthe
beginning ofprocessing, thevaluesofdigestwords(A,B,C,D,andE)aresavedinto
fivetemporary variables."
9944,"Attheendoftheprocessing (afterstep79),thesevaluesareSECTION 31.4MESSAGE AUTHENTICATION 969
Figure31.8Processing ofoneblockinSHA-1
Resultsoftheprevious block
ortheinitialdigest
IAIBICIDtE I
• ,Wl}""Step0j.;...KotttttIAIBjCtDIEI·•·-t-t-t-t-t
.~Wi9 Step79~K79tttttIAIBICIDIEI
Final
adding
""
"""",~""""rtJI lliI'-+l:t:Jl:!::JltJ l:!:J
'f'f'f'f'fIAIBIC/DIE
Valuesforthenextblock
orthefinaldigest
addedtothevaluescreatedfromstep79.Thedetailofeachstepiscomplex andbeyond
thescopeofthisbook.Theonlythingweneedtoknowisthateachstepmangles a
wordofdataandaconstanttocreatearesultthatisfedtothenextstep."
9945,"31.4MESSAGE AUTHENTICATION
Ahashfunction guarantees theintegrityofamessage.Itguarantees thatthemessagehas
notbeenchanged."
9946,"Ahashfunction, however, doesnotauthenticate thesenderofthemes­
sage.WhenAlicesendsamessagetoBob,Bobneedstoknowifthemessage iscoming
fromAliceorEve.Toprovidemessage authentication, Aliceneedstoprovideproofthat
itisAlicesendingthemessage andnotanimposter."
9947,"Ahashfunction persecannot
providesuchaproof.Thedigestcreatedbyahashfunctionisnormally calledamodifi­
cationdetection code(MDC).Thecodecandetectanymodification inthemessage."
9948,"MAC
Toprovidemessage authentication, weneedtochangeamodification detection codeto
amessage authentication code(MAC)."
9949,"AnMDCusesakeylesshash function~ a
MACusesakeyedhashfunction."
9950,"Akeyedhashfunction includes thesymmetric key970 CHAPTER 31NETWORK SECURITY
betweenthesenderandreceiverwhencreatingthedigest.Figure31.9showshowAlice
usesakeyedhashfunction toauthenticate hermessage andhowBobcanverifythe
authenticity ofthemessage."
9951,"Figure31.9MAC,createdbyAliceandcheckedbyBob
Alice Bob
Message
and
MAC
Alice,usingthesymmetric keybetween herselfandBob(KAB)andakeyedhash
function, generates aMAC.Shethenconcatenates theMACwiththeoriginalmessage
andsendsthetwotoBob.Bobreceivesthemessage andtheMAC.Heseparates the
message fromtheMAC.Heappliesthesamekeyedhashfunctiontothemessage using
thesymmetric keyKABtogetafreshMAC.Hethencompares theMACsentbyAlice
withthenewlygenerated MAC.IfthetwoMACsareidentical, themessagehasnotbeen
modified andthesenderofthemessage isdefinitely Alice."
9952,"HMAC
Thereareseveralimplementations ofMACinusetoday.However, inrecent'years,
someMACshavebeendesigned thatarebasedonkeylesshashfunctions suchas
SHA-l.ThisideaisahashedMAC,calledHMAC, thatcanuseanystandardkeyless
hashfunction suchasSHA-l.HMACcreatesanestedMACbyapplying akeyless
hashfunction totheconcatenation ofthemessage and asymmetric key.Figure31.10
showsthegeneralidea."
9953,Acopyofthesymmetric keyisprepended tothemessage.
9954,"Thecombination is
hashedusingakeylesshashfunction, suchasSHA-1.Theresultofthisprocessisan
intermediate HMACwhichisagainprependedwiththekey(thesamekey),andthe
resultisagainhashedusingthesamealgorithm."
9955,ThefinalresultisanHMAC.
9956,ThereceiverreceivesthisfinalHMACandthemessage.
9957,"Thereceivercreatesits
ownHMACfromthereceived message andcompares thetwoHMACs tovalidatethe
integrity ofthemessage andauthenticate thedataorigin.Notethatthedetailsofan
HMACcanbemorecomplicated thanwhatwehaveshownhere.SECTION 31.5DIGITAL SIGNATURE 971
Figure31.10HMAC
Message
HMAC
31.5DIGITAL SIGNATURE
Although aMACcanprovidemessage integrity andmessage authentication, ithasa
drawback."
9958,"Itneedsasymmetric keythatmustbeestablished between thesenderand
thereceiver.Adigitalsignature, ontheotherhand,canuseapairofasymmetric keys(a
publiconeandaprivateone)."
9959,Weareallfamiliarwiththeconceptofasignature.
9960,"Wesignadocument toshow
thatitoriginated fromusorwasapproved byus.Thesignature isprooftotherecipient
thatthedocument comesfromthecorrectentity.Whenacustomer signsacheckto
himself,thebankneedstobesurethatthecheckisissuedbythatcustomer andnobody
else.Inotherwords,asignature onadocument, whenverified,isasignofauthentica­
tion;thedocument isauthentic."
9961,"Consider apaintingsignedbyanartist.Thesignature
ontheart,ifauthentic, meansthatthepaintingisprobably authentic."
9962,"WhenAlicesendsamessage toBob,Bobneedstochecktheauthenticity ofthe
sender;heneedstobesurethatthemessagecomesfromAliceandnotEve.Bobcanask
Alicetosignthemessage electronically."
9963,"Inotherwords,anelectronic signature can
provetheauthenticity ofAliceasthesenderofthemessage."
9964,"Werefertothistypeofsig­
natureasadigitalsignature."
9965,"Comparison
Beforewecontinue anyfurther,letusdiscussthedifferences betweentwotypesofsig­
natures:conventional anddigital."
9966,"Inclusion
Aconventional signature isincluded inthedocument; itispartofthedocument."
9967,"When
wewriteacheck,thesignature isonthecheck;itisnotaseparatedocument."
9968,"Onthe
otherhand,whenwesignadocument digitally, wesendthesignature asaseparatedoc­
ument.Thesendersendstwodocuments: themessage andthesignature."
9969,"Therecipient
receivesbothdocuments andverifiesthatthesignature belongstothesupposed sender."
9970,"Ifthisisproved,themessage iskept;otherwise, itisrejected.972CHAPTER 31NETWORK SECURITY
Verification Method
Theseconddifference between thetwotypesofdocuments isthemethodofverifying
thesignature."
9971,"Inconventional signature, whentherecipient receivesadocument, she
compares thesignature onthedocument withthesignature onfile.Iftheyarethesame,
thedocument isauthentic."
9972,"Therecipient needstohaveacopyofthissignature onfile
forcomparison."
9973,"Indigitalsignature, therecipient receivesthemessage andthesigna­
ture.Acopyofthesignature isnotstoredanywhere."
9974,"Therecipient needstoapplya
verification technique tothecombination ofthemessage andthesignature toverifythe
authenticity."
9975,"Relationship
Inconventional signature, thereisnormally aone-to-many relationship betweenasig­
natureanddocuments."
9976,"Aperson,forexample, hasasignature thatisusedtosignmany
checks,manydocuments, etc.Indigitalsignature, thereisaone-to-one relationship
betweenasignature and amessage."
9977,Eachmessage hasitsownsignature.
9978,"Thesignature
ofonemessage cannotbeusedinanothermessage.IfBobreceivestwomessages, one
afteranother,fromAlice,hecannotusethesignature ofthefirstmessage toverifythe
second.Eachmessageneedsanewsignature."
9979,"Duplicity
Anotherdifference betweenthetwotypesofsignatures isaqualitycalledduplicity."
9980,"In
conventional signature, acopyofthesigneddocument canbedistinguished fromthe
originaloneonfile.Indigitalsignature, thereisnosuchdistinction unlessthereisa
factoroftime(suchasatimestamp) onthedocument."
9981,"Forexample, supposeAlice
sendsadocument instructing BobtopayEve.IfEveintercepts thedocument andthe
signature, shecanresenditlatertogetmoneyagainfromBob."
9982,"NeedforKeys
Inconventional signature asignature islikeaprivate""key""belonging tothesignerof
thedocument."
9983,Thesignerusesittosignadocument; nooneelsehasthissignature.
9984,"The
copyofthesignature isonfilelikeapublickey;anyonecanuseittoverifyadocument,
tocompare ittotheoriginalsignature."
9985,"Indigitalsignature, thesignerusesherprivatekey,appliedtoasigningalgorithm,
tosignthedocument."
9986,"Theverifier,ontheotherhand,usesthepublickeyofthesigner,
appliedtotheverifying algorithm, toverifythedocument."
9987,Canweuseasecret(symmetric) keytobothsignandverifyasignature?
9988,"Theanswer
isnoforseveralreasons.First,asecretkeyisknownonlybetween twoentities(Alice
andBob,forexample)."
9989,"SoifAliceneedstosignanotherdocument andsendittoTed,
sheneedstouseanothersecretkey.Second,aswewillsee,creatingasecretkeyfora
sessioninvolvesauthentication, whichnormally usesdigitalsignature."
9990,"Wehaveavicious
cycle.Third,BobcouldusethesecretkeybetweenhimselfandAlice,signadocument,
sendittoTed,andpretendthatitcamefromAlice."
9991,"Adigitalsignature needsapublic-key system.SECTION 31.5DIGITAL SIGNATURE 973
Process
Digitalsignature canbeachieved intwoways:signingthedocument orsigningadigest
ofthedocument."
9992,"SigningtheDocument
Probably, theeasier,butlessefficientwayistosignthedocument itself.Signingadoc­
umentisencrypting itwiththeprivatekeyofthesender;verifying thedocument is
decrypting itwiththepublickeyofthesender.Figure31.11showshowsigningand
verifying aredone."
9993,"Figure31.11Signingthemessage itselfindigitalsignature
~ t tkeys
Alicei jBob-~ -~
Plaintext Signeddocument PlaintextEncryption Decryption.-
Signing Dataflow Verifying
Weshouldmakeadistinction between privateandpublickeysasusedindigital
signature andpublicandprivatekeysasusedforconfidentiality."
9994,"Inthelatter,theprivate
andpublickeysofthereceiverareusedintheprocess.Thesenderusesthepublickey
ofthereceivertoencrypt;thereceiveruseshisownprivatekeytodecrypt.Indigital
signature, theprivateandpublickeysofthesenderareused.Thesenderusesherpri­
vatekey;thereceiverusesthepublickeyofthesender."
9995,"Inacryptosystem, weusetheprivateandpublickeysofthereceiver;
indigitalsignature, weusetheprivateandpublickeyofthesender."
9996,"SigningtheDigest
Wementioned thatthepublickeyisveryinefficient inacryptosystem ifwearedealing
withlongmessages."
9997,"Inadigitalsignature system,ourmessages arenormally long,but
wehavetousepublickeys.Thesolutionisnottosignthemessage itself;instead,we
signadigestofthemessage."
9998,"Aswelearned,acarefully selectedmessage digesthasa
one-to-one relationship withthemessage."
9999,"Thesendercansignthemessage digest,and
thereceivercanverifythemessage digest.Theeffectisthesame.Figure31.12shows
signingadigestinadigitalsignature system."
10000,"Adigestismadeoutofthemessage atAlice'ssite.Thedigestthengoesthrough
thesigningprocessusingAlice'sprivatekey.Alicethensendsthemessage andthesig­
naturetoBob.Aswewillseelaterinthechapter,therearevariations intheprocessthat
aredependent onthesystem.Forexample, theremightbeadditional calculations before
thedigestismadeorothersecretkeysmightbeused.Insomesystems, thesignature is
asetofvalues.974CHAPTER 31NETWORK SECURITY
Figure31.12Signingthedigestinadigitalsignature
Sign
Alice
Message
and
signatureVerify
Bob
&
AtBob'ssite,usingthesamepublichashfunction, adigestisfirstcreatedoutof
thereceivedmessage."
10001,"Calculations aredoneonthesignature andthedigest.Theverifying
processalsoappliescriteriaontheresultofthecalculation todetennine theauthenticity
ofthesignature.Ifauthentic, themessage isaccepted; otherwise, itisrejected."
10002,"Services
Adigitalsignature canprovidethreeoutofthefiveserviceswementioned forasecurity
system:messageintegrity, message authentication, andnonrepudiation."
10003,"Notethatadig­
italsignature schemedoesnotprovideconfidential communication."
10004,"Ifconfidentiality is
required, themessage andthesignature mustbeencrypted usingeitherasecret-key or
public-key cryptosystem."
10005,"Message Integrity
Theintegrity ofthemessage ispreserved evenifwesignthewholemessage because
wecannotgetthesamesignature ifthemessageischanged."
10006,"Thesignature schemestoday
useahashfunctioninthesigningandverifying algorithms thatpreserve theintegrityof
themessage."
10007,Adigitalsignature todayprovides messageintegrity.
10008,"Message Authentication
Asecuresignature scheme,likeasecureconventional signature (onethatcannotbe
easilycopied),canprovidemessage authentication."
10009,"Bobcanverifythatthemessage is
sentbyAlicebecauseAlice'spublickeyisusedinverification."
10010,"Alice'spublickeycannot
createthesamesignature asEve'sprivatekey."
10011,"Digitalsignature provides messageauthentication.SECTION 31.5DIGITAL SIGNATURE 975
Message Nonrepudiation
IfAlicesignsamessage andthendeniesit,canBoblaterprovethatAliceactually
signedit?Forexample, ifAlicesendsamessage toabank(Bob)andaskstotransfer
$10,000 fromheraccounttoTed'saccount, canAlicelaterdenythatshesentthis
message?"
10012,"Withtheschemewehavepresented sofar,Bobmighthaveaproblem."
10013,"Bobmustkeepthesignature onfileandlateruseAlice'spublickeytocreatethe
originalmessage toprovethemessage inthefileandthenewlycreatedmessage are
thesame.ThisisnotfeasiblebecauseAlicemayhavechanged herprivate/public
keyduringthistime;shemayalsoclaimthatthefilecontaining thesignature isnot
authentic."
10014,"Onesolutionisatrustedthirdparty.Peoplecancreateatrustedpartyamongthem­
selves.InChapter32,wewillseethatatrustedpartycansolvemanyotherproblems
concerning securityservicesandkeyexchange."
10015,"Figure31.13showshowatrustedparty
canpreventAlicefromdenyingthatshesentthemessage."
10016,"Figure31.13Usingatrustedcenterfornonrepudiation
Alice,Bob,
M,SAM:Message
SA:Signature fromAlice
ST:Signature fromtrustedcenter
Trustedcenter
Alice,Bob,
M,ST
Alicecreatesasignature fromhermessage (SA)andsendsthemessage, heriden­
tity,Bob'sidentity, andthesignature tothecenter.Thecenter,afterchecking that
Alice'spublickeyisvalid,verifiesthroughAlice'spublickeythatthemessagecomes
fromAlice.Thecenterthensavesacopyofthemessagewiththesenderidentity,recip­
ientidentity,andatimestamp initsarchive.Thecenterusesitsprivatekeytocreate
anothersignature (ST)fromthemessage."
10017,"Thecenterthensendsthemessage, thenew
signature, Alice'sidentity,andBob'sidentitytoBob.Bobverifiesthemessage using
thepublickeyofthetrustedcenter."
10018,"IfinthefutureAlicedeniesthatshehassentthemessage, thecentercanshowa
copyofthesavedmessage."
10019,"IfBob'smessageisaduplicate ofthemessagesavedatthe
center,Alicewilllosethedispute.Tomakeeverything confidential, alevelofencryption!
decryption canbeaddedtotheschemeasdiscussed inthenextsection."
10020,"Nonrepudiation canbeprovided usingatrustedparty.976CHAPTER 31NETWORK SECURITY
Signature Schemes
Severalsignature schemes haveevolvedduringthelastfewdecades."
10021,"Someofthem
havebeenimplemented."
10022,SuchasRSAandDSS(DigitalSignature Standard) schemes.
10023,Thelatterwillprobably becomethestandard.
10024,"However, thedetailsoftheseschemes are
beyondthescopeofthisbook."
10025,"31.6ENTITY AUTHENTICATION
Entityauthentication isatechnique designed toletonepartyprovetheidentityof
anotherparty.Anentitycanbeaperson,aprocess, aclient,oraserver.Theentity
whoseidentityneedstobeprovediscalledtheclaimant; thepartythattriestoprove
theidentityoftheclaimant iscalledtheverifier.WhenBobtriestoprovetheidentityof
Alice,Aliceistheclaimant, andBobistheverifier."
10026,Therearetwodifferences betweenmessageauthentication andentityauthentication.
10027,"First,message authentication maynothappeninrealtime;entityauthentication does."
10028,"Intheformer,AlicesendsamessagetoBob.WhenBobauthenticates themessage, Alice
mayormaynotbepresentinthecommunication process."
10029,"Ontheotherhand,when
Alicerequests entityauthentication, thereisnorealmessage communication involved
untilAliceisauthenticated byBob.Aliceneedstobeonlineandtakespartintheprocess."
10030,Onlyaftersheisauthenticated canmessages becommunicated betweenAliceandBob.
10031,"Message authentication isrequired whenane-mailissentfromAlicetoBob.Entity
authentication isrequiredwhenAlicegetscashfromanautomatic tellermachine."
10032,"Second,
message authentication simplyauthenticates onemessage; theprocessneedstobe
repeated foreachnewmessage."
10033,"Entityauthentication authenticates theclaimant forthe
entiredurationofasession."
10034,"Inentityauthentication, theclaimant mustidentifyherselftotheverifier.Thiscanbe
donewithoneofthreekindsofwitnesses: something known,something possessed, or
something inherent."
10035,"oSomething known.Thisisasecretknownonlybytheclaimant thatcanbechecked
bytheverifier.Examples areapassword, aPINnumber,asecretkey,andaprivatekey."
10036,oSomething possessed.
10037,Thisissomething thatcanprovetheclaimant's identity.
10038,"Examples areapassport, adriver'slicense,anidentification card,acreditcard, and
asmartcard."
10039,oSomething inherent.
10040,Thisisaninherentcharacteristic oftheclaimant.
10041,"Examples
areconventional signature, fingerprints, voice,facialcharacteristics, retinalpattern,
andhandwriting."
10042,"Passwords
Thesimplestandtheoldestmethodofentityauthentication isthepassword, something
thattheclaimant possesses."
10043,"Apassword isusedwhenauserneedstoaccessasystemto
usethesystem's resources (log-in).Eachuserhasauseridentification thatispublicand
apassword thatisprivate.Wecandividethisauthentication schemeintotwoseparate
groups:thefixedpassword andtheone-time password.SECTION 31.6ENTITYAUTHENTICATION 977
FixedPassword
Inthisgroup,thepassword isfixed;thesamepassword isusedoverandoverforevery
access.Thisapproach issubjecttoseveralattacks."
10044,oEavesdropping.
10045,EvecanwatchAlicewhenshetypesherpassword.
10046,"Mostsystems,
asasecuritymeasure, donotshowthecharacters ausertypes.Eavesdropping can
takeamoresophisticated form.Evecanlistentothelineandthenintercept the
message, therebycapturing thepassword forherownuse."
10047,oStealingaPassword.
10048,"ThesecondtypeofattackoccurswhenEvetriestophysically
stealAlice'spassword."
10049,"Thiscanbeprevented ifAlicedoesnotwritedown the
password; instead,shejustcommits ittomemory."
10050,"Therefore, apassword shouldbe
verysimpleorelserelatedtosomething familiartoAlice,whichmakesthepassword
vulnerable toothertypesofattacks."
10051,"oAccessing afile.Evecanhackintothesystemandgetaccesstothefilewherethe
passwords arestored.EvecanreadthefileandfindAlice'spassword oreven
changeit.Topreventthistypeofattack,thefilecanberead/write protected."
10052,"How­
ever,mostsystemsneedthistypeoffiletobereadable bythepublic."
10053,oGuessing.
10054,"EvecanlogintothesystemandtrytoguessAlice'spassword bytrying
different combinations ofcharacters."
10055,"Thepassword isparticularly vulnerable ifthe
userisallowedtochooseashortpassword (afewcharacters)."
10056,"Itisalsovulnerable
ifAlicehaschosensomething unimaginative, suchasherbirthday, herchild'sname,
orthenameofherfavoriteactor.Topreventguessing, alongrandompassword is
recommended, something thatisnotveryobvious.However, theuseofsucharandom
password mayalsocreateaproblem; Alicemightstorethepassword somewhere
soasnottoforgetit.Thismakesthepassword subjecttostealing."
10057,"Amore secure approach istostorethehashofthepassword inthepassword file
(insteadoftheplaintext password)."
10058,"Anyusercanreadthecontentsofthefile,but,
becausethehashfunction isaone-way function, itisalmostimpossible toguessthe
valueofthepassword."
10059,"ThehashfunctionpreventsEvefromgainingaccesstothesystem
eventhoughshehasthepassword file.However, thereisapossibility ofanothertypeof
attackcalledthedictionary attack.Inthisattack,Eveisinterested infindingonepass­
word,regardless oftheuserID.Forexample, ifthepassword is6digits,Evecancreate
alistof6-digitnumbers (000000to999999), andthenapplythehashfunction toevery
number; theresultisalistof1millionhashes.Shecanthengetthepassword fileand
searchthesecond-column entriestofindamatch.Thiscouldbeprogrammed andrun
offlineonEve'sprivatecomputer."
10060,"Afteramatchisfound,Evecangoonlineandusethe
password toaccessthesystem.Wewillseehowtomakethisattackmoredifficultinthe
thirdapproach."
10061,Anotherapproach iscalledsaltingthepassword.
10062,"Whenthepassword stringiscreated,
arandomstring,calledthesalt,isconcatenated tothepassword."
10063,"Thesaltedpassword is
thenhashed.TherD,salt,andthehasharethenstoredinthefile.Now,whenauserasks
foraccess,thesystemextractsthesalt,concatenates itwiththereceived password,
makesahashoutoftheresult,andcompares itwiththehashstoredinthefile.Ifthere
\~amatc\\., a.cce.~~ \~%,tal\te.d:, C)fue.N1\I2,e., \t\~de.me.d. Salt\w~,mak.e.12,the.d\ct\c)l\aI'j attack
moredifficult.Iftheoriginalpassword is6digitsandthesaltis4digits,thenhashingis978CHAPTER 31NETWORK SECURITY
doneoveralO-digitvalue.ThismeansthatEvenowneedstomakealistof10million
itemsandcreateahashforeachofthem.Thelistofhasheshas10millionentriesand
thecomparison takesmuchlonger.Saltingisveryeffective ifthesaltisaverylongran­
domnumber.TheUNIXoperating systemusesavariation ofthismethod."
10064,"Inanotherapproach, twoidentification techniques arecombined."
10065,"Agoodexample
ofthistypeofauthentication istheuseofanATMcardwithaPIN(personal identifica­
tionnumber)."
10066,"Thecardbelongstothecategory ""something possessed"" andthePIN
belongstothecategory ""something known."" ThePINisactually apassword that
enhances thesecurityofthecard.Ifthecardisstolen,itcannotbeusedunlessthePIN
isknown.ThePIN,however, istraditionally veryshortsoitiseasilyremembered by
theowner.Thismakesitvulnerable totheguessing typeofattack."
10067,"One-Time Password
Inthistypeofscheme,apassword isusedonlyonce.Itiscalledtheone-time password."
10068,"Aone-time password makeseavesdropping andstealinguseless.However, thisapproach
isverycomplex, andweleaveitsdiscussion tosomespecialized books."
10069,"Challenge- Response
Inpassword authentication, theclaimant provesheridentitybydemonstrating thatshe
knowsasecret,thepassword."
10070,"However, sincetheclaimant revealsthissecret,thesecret
issusceptible tointerception bytheadversary."
10071,"Inchallenge-response authentication,
theclaimant provesthatsheknowsasecretwithoutrevealing it.Inotherwords,the
claimant doesnotrevealthesecrettotheverifier;theverifiereitherhasitorfindsit."
10072,"Inchallenge-response authentication,
theclaimant provesthatsheknowsasecretwithoutrevealingit."
10073,"Thechallenge isatime-varying valuesuchasarandomnumberoratimestamp
whichissentbytheverifier.Theclaimant appliesafunctiontothechallenge andsends
theresult,calledaresponse, totheverifier.Theresponse showsthattheclaimant knows
thesecret."
10074,"Thechallenge isatime-varying valuesentbytheverifier;
theresponseistheresultofafunctionappliedonthechanenge."
10075,"UsingaSymmetric-Key Cipher
Inthefirstcategory, thechallenge-response authentication isachieved usingsymmetric­
keyencryption."
10076,"Thesecrethereisthesharedsecretkey,knownbyboththeclaimant
andtheverifier.Thefunction istheencrypting algorithm appliedonthechallenge."
10077,Figure31.14showsoneapproach.
10078,"Thefirstmessage isnotpartofchallenge-response,
itonlyinformstheverifierthattheclaimant wantstobechallenged."
10079,"Thesecondmes­
sageisthechallenge."
10080,"AndRBisthenoncerandomly chosenbytheverifiertochallenge
theclaimant."
10081,"Theclaimant encryptsthenonceusingthesharedsecretkeyknownonly
totheclaimant andtheverifierandsendstheresulttotheverifier.TheverifierdecryptsSECTION 31.6ENTITYAUTHENTICATION 979
Figure31.14 Challenge/response authentication usinganonce
Bob
(server)Alice
(user)
...-----------iAlicel------------'l~
I+----------i RB1-----------'
themessage."
10082,"Ifthenonceobtained fromdecryption isthesameastheonesentbythe
verifier,Aliceisgrantedaccess."
10083,"Notethatinthisprocess,theclaimant andtheverifierneedtokeepthesymmetric
keyusedintheprocesssecret.Theverifiermustalsokeepthevalueofthenoncefor
claimantidentification untiltheresponse isreturned."
10084,"Thereadermayhavenoticedthatuseofanoncepreventsareplayofthethirdmes­
sagebyEve.Evecannotreplaythethirdmessage andpretendthatitisanewrequest
forauthentication byAlicebecauseonceBobreceivestheresponse, thevalueofRBis
notvalidanymore.Thenexttimeanewvalueisused."
10085,"Inthesecondapproach, thetime-varying valueisatimestamp, whichobviously
changeswithtime.Inthisapproach thechallenge messageisthecurrenttimesentfrom
theverifiertotheclaimant."
10086,"However, thissupposes thattheclientandtheserverclocks
aresynchronized; theclaimantknowsthecurrenttime.Thismeansthatthereisnoneed
forthechallenge message."
10087,Thefirstandthirdmessages canbecombined.
10088,"Theresultis
thatauthentication canbedoneusingonemessage, theresponsetoanimplicitchallenge,
thecurrenttime.Figure31.15showstheapproach."
10089,"Figure31.15 Challenge-response authentication usingatimestamp
Alice
(user)Bob
(server)---
Alice,T
UsingKeyed-Hash Functions
Insteadofusingencryption anddecryption forentityauthentication, wecanusea
keyed-hash function (MAC).Therearetwoadvantages tothisscheme."
10090,"First,the980CHAPTER 31NETWORK SECURITY
encryption/decryption algorithm isnotexportable tosomecountries."
10091,"Second,inusinga
keyed-hash function, wecanpreservetheintegrityofchallenge andresponse messages
andatthesametimeuseasecret,thekey."
10092,"Letusseehowwecanuseakeyed-hash functiontocreateachallenge response with
atimestamp."
10093,Figure31.16showsthescheme.
10094,"Figure31.16Challenge-response authentication usingakeyed-hash function
Alice
(user)
Alice,TIn+T
HashBob
(server)
Notethatinthiscase,thetimestamp issentbothasplaintext andastextscrambled
bythekeyed-hash function."
10095,"WhenBobreceivesthemessage, hetakestheplaintext T,
appliesthekeyed-hash function, andthencompares hiscalculation withwhathe
receivedtodetermine theauthenticity ofAlice."
10096,"UsinganAsymmetric-Key Cipher
Insteadofasymmetric-key cipher,wecanuseanasymmetric-key cipherforentity
authentication."
10097,Herethesecretmustbetheprivatekeyoftheclaimant.
10098,"Theclaimant
mustshowthatsheownstheprivatekeyrelatedtothepublickeythatisavailable to
everyone."
10099,"Thismeansthattheverifiermustencryptthechallenge usingthepublickey
oftheclaimant; theclaimant thendecrypts themessage usingherprivatekey.The
response tothechallenge isthedecrypted challenge."
10100,"Weshowtwoapproaches: onefor
unidirectional authentication andoneforbidirectional authentication."
10101,"Inoneapproach,
Bobencrypts thechallenge usingAlice'spublickey.Alicedecrypts themessage with
herprivatekeyandsendsthenoncetoBob.Figure31.17showsthisapproach."
10102,"Figure31.17Authentication, asymmetric-key
Alice
(user)
AliceBob
(server)-SECTION 31.7KEYMANAGEMENT 981
UsingDigitalSignature
Wecanusedigitalsignature forentityauthentication."
10103,"Inthismethod,welettheclaim­
antuseherprivatekeyforsigninginsteadofusingitfordecryption."
10104,"Inoneapproach
showninFigure31.18,Bobusesaplaintext challenge."
10105,Alicesignstheresponse.
10106,"Figure31.18Authentication, usingdigitalsignature
Alice
(user)
Alice
Bob
31.7KEYMANAGEMENTBob
(server)
Wehaveusedsymmetric-key andasymmetric-key cryptography inourdiscussion
throughout thechapter.However, weneverdiscussed howsecretkeysinsymmetric-key
cryptography andhowpublickeysinasymmetric-key cryptography aredistributed and
maintained."
10107,"Inthissection,wetouchonthesetwoissues.Wefirstdiscussthedistribu­
tionofsymmetric keys;wethendiscussthedistribution ofasymmetric keys."
10108,"Symmetric- KeyDistribution
Wehavelearnedthatsymmetric-key cryptography ismoreefficientthanasymmetric­
keycryptography whenweneedtoencryptanddecryptlargemessages."
10109,"Symmetric­
keycryptography, however, needsasharedsecretkeybetween twoparties."
10110,"IfAliceneedstoexchange confidential messages withNpeople,sheneedsNdifferent
keys.WhatifNpeopleneedtocommunicate withoneanother?AtotalofN(N-1)/2keys
isneeded.EachpersonneedstohaveN-1keystocommunicate witheachoftheother
people,butbecausethekeysareshared,weneedonlyN(N-1)12.Thismeansthatif
1millionpeopleneedtocommunicate withoneanother,eachpersonhasalmost0.5mil­
liondifferentkeys;intotal,almost1billionkeysareneeded.Thisisnormally referredtoas
theN2problembecausethenumberofrequiredkeysforNentitiesisclosetoN2."
10111,"Thenumberofkeysisnottheonlyproblem; thedistribution ofkeysisanother.If
AliceandBobwanttocommunicate, theyneedtosomehow exchange asecretkey;if
Alicewantstocommunicate with1millionpeople,howcansheexchange 1million
keyswith1millionpeople?UsingtheInternetisdefinitely notasecuremethod.982CHAPTER 31NETWORK SECURITY
Itisobviousthatweneedanefficientwayofmaintaining anddistributing secret
keys."
10112,"KeyDistribution Center:KDC
Apractical solutionistheuseofatrustedparty,referredtoasakeydistribution cen­
ter(KDC).Toreducethenumberofkeys,eachpersonestablishes asharedsecretkey
withtheKDCasshowninFigure31.19."
10113,"Figure31.19KDC
Alice~."
10114,"KAlice K~Bob~~~ Bb~~~
&
K~'~~""""';- ""'~""'K~~~~~& Ann George
Ann------------ c;:::;:::u:J---------- --George
E:9
• ""-......KBetsy
:Krd"",KDC .....Ie, ....., ..."
10115,", .."
10116,"Ted&,/ ..........& Betsy
Asecretkeyisestablished betweenKDCandeachmember."
10117,"Alicehasasecretkey
withKDC,whichwerefertoasKAlice;BobhasasecretkeywithKDC,whichwerefer
toasKBob;andsoon.Nowthequestion is,HowcanAlicesendaconfidential message
toBob?Theprocessisasfollows:
1.AlicesendsarequesttoKDC,statingthatsheneedsasession(temporary) secret
keybetweenherselfandBob."
10118,2.KDCinformsBobofAlice'srequest.
10119,"3.IfBobagrees,asessionkeyiscreatedbetweenthetwo."
10120,"Thesecretkeybetween AliceandBobthatisestablished withtheKDCisusedto
authenticate AliceandBobtotheKDCandtopreventEvefromimpersonating either
ofthem.Wediscusshowasessionkeyisestablished betweenAliceandBoblaterinthe
chapter."
10121,"SessionKeys
AKDCcreatesasecretkeyforeachmember."
10122,"Thissecretkeycanbeusedonlybetween
thememberandtheKDC,notbetween twomembers."
10123,"IfAliceneedstocommunicate
secretlywithBob,sheneedsasecretkeybetweenherselfandBob.AKDCcancreatea
session(temporary) keybetweenAliceandBobusingtheirkeyswiththecenter.The
keysofAliceandBobareusedtoauthenticate AliceandBobtothe center andtoeach
otherbeforethesessionkeyisestablished."
10124,"Aftercommunication isterminated, theses­
sionkeyisnolongervalid."
10125,"Asessionsymmetric keybetweentwopartiesisusedonlyonce.SECTION 31.7KEYMANAGEMENT 983
Severaldifferent approaches havebeenproposed tocreatethesessionkeyusing
ideaswepreviously discussed forentityauthentication."
10126,"Letusdiscussoneapproach, thesimplest one,asshowninFigure31.20.Although
thissystemhassomeflaws,itshowstheidea.Moresophisticated approaches canbe
foundinsecuritybooks."
10127,"Figure31.20 Creating asessionkeybetweenAliceandBobusingKDC
KDC­u:;:L::UJ~-- ••-----1 Alice,BobI---~~IBob_...."
10128,"DStep1Alicesendsaplaintext message totheKDCtoobtainasymmetric session
keybetween Bobandherself.Themessage contains herregistered identity(the
wordAliceinthefigure)andtheidentityofBob(thewordBobinthefigure).This
message isnotencrypted, itispublic.KDCdoesnotcare."
10129,"DStep2KDCreceivesthemessage andcreateswhatiscalledaticket.Theticketis
encrypted usingBob'skey(KB).Theticketcontainstheidentities ofAliceandBob
andthesessionkey(KAB).TheticketwithacopyofthesessionkeyissenttoAlice."
10130,"Alicereceives themessage, decrypts it,andextractsthesessionkey.Shecannot
decryptBob'sticket;theticketisforBob,notforAlice.Notethatwehaveadouble
encryption inthismessage; theticketisencrypted andtheentiremessage isalso
encrypted."
10131,"Inthesecondmessage, Aliceisactually authenticated totheKDC,
becauseonlyAlicecanopenthewholemessageusinghersecretkeywithKDC."
10132,"DStep3AlicesendsthetickettoBob.BobopenstheticketandknowsthatAliceneeds
tosendmessages tohimusingKABasthesessionkey.Notethatinthismessage,
Bobisauthenticated totheKDCbecauseonlyBobcanopentheticket.SinceBobis
authenticated totheKDC,heisalsoauthenticated toAlicewhotruststheKDC.In
thesameway,Aliceisalsoauthenticated toBob,becauseBobtruststheKDCand
theKDChassentthetickettoBobwhichincludestheidentityofAlice."
10133,"Kerberos
Kerberos isanauthentication protocol andatthesametimeaKDCthathasbecome
verypopular.Severalsystemsincluding Windows 2000useKerberos."
10134,"Itisnamedafter
thethree-headed doginGreekmythology thatguardstheGatesofHades.Originally
designed atM.LT.,ithasgonethroughseveralversions."
10135,"Wediscussonlyversion4,the
mostpopular.Bob(Server)984CHAPTER 31NETWORK SECURITY
Servers Threeserversareinvolved intheKerberos protocol: anauthentication server
(AS),aticket-granting server(TGS),andareal(data)serverthatprovides servicesto
others.Inourexamples andfiguresBobistherealserverandAliceistheuserrequest­
ingservice.Figure31.21showstherelationship betweenthesethreeservers."
10136,"Figure31.21Kerberos servers
1.Request ticketforTGS
2.Alice-TGSsessionkey
andticketforTGSIil
Alire
~: ~AS,:;:;,
~II(-~'8
3.Request ticketforBob
4.Alice-Bob sessionkey
__an_d_tl_'c_ke_t_fo_r_Bo_b •~
5.Request access~
6.Grantaccess
oAuthentication Server(AS).ASistheKDCinKerberos protocol."
10137,"Eachuserreg­
isterswithASandisgrantedauseridentityandapassword."
10138,"AShasadatabase
withtheseidentities andthecorresponding passwords."
10139,"ASverifiestheuser,issues
asessionkeytobeusedbetweenAliceandTGS,andsendsaticketforTGS."
10140,"oTicket-Granting Server(TGS).TGSissuesaticketfortherealserver(Bob).It
alsoprovides thesessionkey(KAB)between AliceandBob.Kerberos hassepa­
ratedtheuserverification fromticketissuing.Inthisway,although Aliceverifies
herIDjustoncewithAS,shecancontactTGSmultipletimestoobtainticketsfor
different realservers."
10141,"oRealServer.Therealserver(Bob)provides servicesfortheuser(Alice).Kerberos
isdesigned foraclient/server program suchasFTP,inwhichauserusestheclient
processtoaccesstheserverprocess."
10142,"Kerberos isnotusedforperson-to-person
authentication."
10143,"Operation Aclientprocess(Alice)canaccessaprocessrunningontherealserver
(Bob)insixstepsasshowninFigure31.22."
10144,"oStep1.AlicesendsherrequesttoASinplaintext, usingherregistered identity."
10145,"oStep2.ASsendsamessage encrypted withAlice'ssymmetric keyKA-Themes­
sagecontainstwoitems:asessionkeyKsthatisusedbyAlicetocontactTGSanda
ticketforTGSthatisencrypted withtheTGSsymmetric keyKTG.Alicedoesnot
knowKA,butwhenthemessage arrives,shetypeshersymmetric password."
10146,"The
password andtheappropriate algorithm togethercreateKAifthepassword iscorrect."
10147,"Thepassword isthenimmediately destroyed; itisnotsenttothenetwork, anditdoesSECTION 31.7KEYMANAGEMENT 985
Figure31.22 Kerberos example
Server(Bob)
ASTGS =i-Aliceiu::::u::u
E:=l
~iii.!!!!!!
1--1""""..'""
I~B~KBI1I;IIf----------- l:2]c'0lice,KABI-------·~I
1+---------1
 f&ful---------·~~I:
notstayintheterminal.ItisonlyusedforamomenttocreateKA-Theprocessnow
usesKAtodecryptthemessagesent.BothKsandtheticketareextracted."
10148,"oStep3.AlicenowsendsthreeitemstoTGS.Thefirstistheticketreceivedfrom
AS.Thesecondisthenameoftherealserver(Bob),thethirdisatimestamp which
isencrypted byKs.Thetimestamp preventsareplaybyEve."
10149,"oStep4.Now,TGSsendstwotickets,eachcontaining thesessionkeybetween
AliceandBobKAB.TheticketforAliceisencrypted withKs;theticketforBobis
encrypted withBob'skeyKB.NotethatEvecannotextractKABbecauseshedoes
notknowKsorKB.Shecannotreplaystep3becauseshecannotreplacethetimestamp
withanewone(shedoesnotknowKS)'Evenifsheisveryquickandsendsthe
step3message beforethetimestamp hasexpired,shestillreceivesthesametwo
ticketsthatshecannotdecipher."
10150,oStep5.AlicesendsBob'sticketwiththetimestamp encrypted byKAB.
10151,oStep6.Bobconfirms thereceiptbyadding1tothetimestamp.
10152,"Themessage is
encrypted withKABandsenttoAlice."
10153,"UsingDifferent Servers NotethatifAliceneedstoreceiveservicesfromdifferent
servers,sheneedrepeatonlysteps3to6.ThefirsttwostepshaveverifiedAlice'siden­
tityandneednotberepeated."
10154,"AlicecanaskTGStoissueticketsformultipleserversby
repeating steps3to6.986CHAPTER 31NETWORK SECURITY
Realms Kerberos allowstheglobaldistribution ofASsandTGSs,witheachsystem
calledarealm.Ausermaygetaticketforalocalserveroraremoteserver.Inthesec­
ondcase,forexample, AlicemayaskherlocalTGStoissueaticketthatisaccepted by
aremoteTGS.ThelocalTGScanissuethisticketiftheremoteTGSisregistered with
thelocalone.ThenAlicecanusetheremoteTGStoaccesstheremoterealserver."
10155,"Public-KeyDistribution
Inasymmetric-key cryptography, peopledonotneedtoknowasymmetric sharedkey."
10156,"IfAlicewantstosendamessage toBob,sheonlyneedstoknowBob'spublickey,
whichisopentothepublicandavailable toeveryone.IfBobneedstosendamessage
toAlice,heonlyneedstoknowAlice'spublickey,whichisalsoknowntoeveryone."
10157,"In
public-key cryptography, everyone shieldsaprivatekeyandadvertises apublickey."
10158,"Inpublic-key cryptography, everyone hasaccesstoeveryone's publickey;
publickeysareavailable tothepublic."
10159,"Publickeys,likesecretkeys,needtobedistributed tobeuseful.Letusbrieflydis­
cussthewaypublickeyscanbedistributed."
10160,"PublicAnnouncement
Thenaiveapproach istoannounce publickeyspublicly."
10161,"Bobcanputhispublickeyon
hiswebsiteorannounce itinalocalornationalnewspaper."
10162,"WhenAliceneedstosenda
confidential message toBob,shecanobtainBob'spublickeyfromhissiteorfromthe
newspaper, orshecanevensendamessagetoaskforit.Figure31.23showsthesituation."
10163,"Figure31.23 Announcing apublickey
I
I
\ I I
"" I"" '.....',:,' ."".'
"" \ I I."".'
......\I'------'-.....j:'------
Publickey
Bob
Thisapproach, however, isnotsecure;itissubjecttoforgery.Forexample, Eve
couldmakesuchapublicannouncement."
10164,"BeforeBobcanreact,damagecouldbedone."
10165,"EvecanfoolAliceintosendingheramessage thatisintended forBob.Evecouldalso
signadocument withacorresponding forgedprivatekeyandmakeeveryone believeit
wassignedbyBob.Theapproach isalsovulnerable ifAlicedirectlyrequests Bob's
publickey.Evecanintercept Bob'sresponse andsubstitute herownforgedpublickey
forBob'spublickey.SECTION 31.7KEYMANAGEMENT 987
TrustedCenter
Amoresecureapproach istohaveatrustedcenterretainadirectory ofpublickeys.The
directory, liketheoneusedinatelephone system,isdynamically updated."
10166,"Eachuser
canselectaprivate/public key,keeptheprivatekey,anddeliverthepublickeyforinser­
tionintothedirectory."
10167,"Thecenterrequires thateachuserregisterinthecenterand
provehisorheridentity.Thedirectory canbepubliclyadvertised bythetrustedcenter."
10168,"Thecentercanalsorespondtoanyinquiryaboutapublickey.Figure31.24showsthe
concept."
10169,"Figure31.24 Trustedcenter
,,,
\..."
10170,"\""', \......,
"".....\."
10171,"Directory· ·· ·
AliceKA· ···· ·
BobKB· ·· ·· ·
Trustedcenter
Controlled TrustedCenter
Ahigherlevelofsecuritycanbeachieved ifthereareaddedcontrolsonthedistribution
ofthepublickey.Thepublic-key announcements canincludeatimestamp andbe
signedbyanauthority topreventinterception andmodification oftheresponse."
10172,"IfAlice
needstoknowBob'spublickey,shecansendarequesttothecenterincluding Bob's
nameandatimestamp."
10173,"Thecenterresponds withBob'spublickey,theoriginalrequest,
andthetimestamp signedwiththeprivatekeyofthecenter.Aliceusesthepublickeyof
thecenter,knownbyall,todecryptthemessageandextractBob'spublickey.Figure31.25
showsonescenario."
10174,"Certification Authority
Theprevious approach cancreateaheavyloadonthecenterifthenumberofrequests
islarge.Thealternative istocreatepublic-key certificates."
10175,"Bobwantstwothings:he
wantspeopletoknowhispublickey,andhewantsnoonetoacceptapublickeyforged
ashis.Bobcangotoacertification authority (CA)-a federalorstateorganization
thatbindsapublickeytoanentityandissuesacertificate."
10176,"TheCAhasawell-known
publickeyitselfthatcannotbeforged.TheCAchecksBob'sidentification (usinga988 CHAPTER 31NETWORK SECURITY
Figure31.25 Controlled trustedcenter
Directory······
AliceKA······
BobKg·:··
Alice
r'--Trustedcenter cw:::w:::J
E:::3-
NeedBob'skey,Time
KCenter
NeedBob'skey,Time,KB
pictureIDalongwithotherproof).ItthenasksforBob'spublickeyandwritesitonthe
certificate."
10177,"Topreventthecertificate itselffrombeingforged,theCAsignsthecertificate
withitsprivatekey.NowBobcanuploadthesignedcertificate."
10178,"Anyonewhowants
Bob'spublickeydownloads thesignedcertificate andusesthepublickeyofthecenter
toextractBob'spublickey.Figure31.26showstheconcept."
10179,"Figure31.26 Certification authority
Directory
__A""p~IX jL.....-K......B_I-_=-=cw:::w:::JTrustedE3center-
Issue· ··:·
AliceKA······
,~BobKg· ··:·
Bob
.."
10180,"-"",' II
.."
10181,"II,,' II
"" II I
I I
I I
IAnnounce topUblic
I
\ I
, I
\ I
,I
""....',I
"" \ I
....,, I..-------- ~--- -SECTION 31.7KEYMANAGEMENT 989
X.509Although theuseofaCAhassolvedtheproblemofpublic-key fraud,ithas
createdasideeffect.Eachcertificate mayhaveadifferent format.IfAlicewa.!1tstouse
aprogram toautomatically download different certificates anddigestsbelonging todif­
ferentpeople,theprogram maynotbeabletodoso.Onecertificate mayhavethepublic
keyinoneformatandanotherinanotherformat.Thepublickeymaybeonthefirstline
inonecertificate andonthethirdlineinanother.Anything thatneedstobeuseduniver­
sallymusthaveauniversal format."
10182,"Toremovethissideeffect,lTDhasdesigned aprotocolcalledX.509,whichhasbeen
accepted bytheInternetwithsomechanges.X.509isawaytodescribethecertificate ina
structured way.Itusesawell-known protocolcalledASN.1(Abstract Syntax Notation 1)
thatdefinesfieldsfamiliartoCprogrammers."
10183,Thefollowing liststhefieldsinacertificate.
10184,DVersion ThisfielddefinestheversionofX.509ofthecertificate.
10185,"Theversion
numberstartedat0;thecurrentversionis2(thethirdversion)."
10186,oSerialnumber Thisfielddefinesanumberassigned toeachcertificate.
10187,"Thevalue
isuniqueforeachcertificate issued."
10188,"oSignature Thisfield,forwhichthenameisinappropriate, identifies thealgorithm
usedtosignthecertificate."
10189,"Anyparameter thatisneededforthesignature isalso
definedinthisfield."
10190,oIssuerThisfieldidentifies thecertification authority thatissuedthecertificate.
10191,"The
nameisnormally ahierarchy ofstringsthatdefinesacountry,state,organization,
department, andsoon.oPeriodofvalidity Thisfielddefinestheearliestandthelatesttimesthecertificate
isvalid.oSubject Thisfielddefinestheentitytowhichthepublickeybelongs.Itisalsoa
hierarchy ofstrings.Partofthefielddefineswhatiscalledthecommon name,
whichistheactualnameofthebeholder ofthekey."
10192,"oSubject's publickeyThisfielddefinesthesubject's publickey,theheartofthe
certificate."
10193,"Thefieldalsodefinesthecorresponding algorithm (RSA,forexample)
anditsparameters."
10194,"oIssueruniqueidentifier Thisoptionalfieldallowstwoissuerstohavethesame
issuerfieldvalue,iftheissueruniqueidentifiers aredifferent."
10195,"DSubjectuniqueidentifier Thisoptionalfieldallowstwodifferent subjectstohave
thesamesubjectfieldvalue,ifthesubjectuniqueidentifiers aredifferent."
10196,oExtension Thisfieldallowsissuerstoaddmoreprivateinformation tothecertificate.
10197,"oEncrypted Thisfieldcontains thealgorithm identifier, asecurehashoftheother
fields,andadigitalsignature ofthathash."
10198,"Public-Key Infrastructures (PKI)
Whenwewanttousepublickeysuniversally, wehaveaproblem similartosecret-key
distribution."
10199,"WefoundthatwecannothaveonlyoneKDCtoanswerthequeries.We
needmanyservers.Inaddition, wefoundthatthebestsolutionistoputtheserversina
hierarchical relationship withoneanother.Likewise, asolutiontopublic-key queriesis
ahierarchical structure calledapublic-key infrastructure (PKI).Figure31.27shows
anexampleofthishierarchy.990CHAPTER 31NETWORK SECURITY
Figure31.27PKIhierarchy
Level-l
CAl
Atthefirstlevel,wecanhavearootCAthatcancertifytheperformance ofCAsin
thesecondlevel;theselevel-lCAsmayoperateinalargegeographic orlogicalarea."
10200,Thelevel-2CAsmayoperateinsmallergeographic areas.
10201,"Inthishierarchy, everybody truststheroot.Butpeoplemayormaynottrustinter­
mediateCAs.IfAliceneedstogetBob'scertificate, shemayfindaCAsomewhere to
issuethecertificate."
10202,"ButAlicemaynottrustthatCA.Inahierarchy Alicecanaskthe
next-higher CAtocertifytheoriginalCA.Theinquirymaygoallthewaytotheroot."
10203,"31.8RECOMMENDED READING
Formoredetailsaboutthesubjectsdiscussed inthischapter,werecommend thefollowing
booksandsites.Theitemsinbrackets[...]refertothereference listattheendofthetext."
10204,"Books
Severalbooksarededicated tonetworksecurity,suchas[PHS02], [Bis03],and[SalO3]."
10205,"31.9KEYTERMS
authentication server(AS)
certification authority (CA)
challenge-response authentication
claimant
dictionary attack
digitalsignature
eavesdropping
entityauthentication
fingerprint
fixedpassword
hashfunctionhashedmessage authentication code
(HMAC)
identification
integrity
Kerberos
keydistribution center(KDC)
message authentication
message authentication code(MAC)
message confidentiality orprivacy
message digest
message integritymessage nonrepudiation
modification detection code
(MDC)
nonce
nonrepudiation
one-time password
one-wayness
password
privacy
public-key infrastructure
(PKI)
saltingSECTION 31.10SUMMARY 991
sessionkey
SHA-I
signature scheme
signingalgorithm
strongcollision
ticket
ticket-granting server
(TGS)
verifier
verifying algorithm
weakcollision
X.509
31.10SUMMARY
DCryptography canprovidefiveservices."
10206,"Fourofthesearerelatedtothemessage
exchange between AliceandBob.Thefifthisrelatedtotheentitytryingtoaccessa
systemforusingitsresources."
10207,DMessage confidentiality meansthatthesenderandthereceiverexpectprivacy.
10208,DMessage integrity meansthatthedatamustarriveatthereceiverexactlyassent.
10209,"DMessage authentication meansthatthereceiverisensuredthatthemessage iscoming
fromtheintended sender,notanimposter."
10210,"DNonrepudiation meansthatasender must notbeabletodenysendingamessage
thathesent."
10211,"DEntityauthentication meanstoprovetheidentityoftheentitythattriestoaccess
thesystem's resources."
10212,DAmessage digestcanbeusedtopreserve theintegrityofadocument oramessage.
10213,Ahashfunction createsamessage digestoutofamessage.
10214,"DAhashfunction mustmeetthreecriteria:one-wayness, resistance toweakcollision,
andresistance tostrongcollision."
10215,"DAkeylessmessage digestisusedasamodification detection code(MDC).Itguar­
anteestheintegrity ofthemessage."
10216,"Toauthenticate thedataorigin,oneneedsa
message authentication code(MAC)."
10217,"DMACsarekeyedhashfunctions thatcreateacompressed digestfromthemessage
addedwiththekey.Themethodhasthesamebasisasencryption algorithms."
10218,"DAdigitalsignature schemecanprovidethesameservices provided byaconven­
tionalsignature."
10219,"Aconventional signature isincluded inthe document; adigital
signature isaseparateentity."
10220,"DDigitalsignature provides message integrity, authentication, andnonrepudiation."
10221,"Digitalsignature cannotprovideconfidentiality forthemessage.Ifconfidentiality
isneeded,acryptosystem mustbeappliedoverthescheme.992CHAPTER 31NETWORK SECURiTY
oAdigitalsignature needsanasymmetric-key system."
10222,"oInentityauthentication, aclaimant provesheridentitytotheverifierbyusingone
ofthethreekindsofwitnesses: something known,something possessed, orsome­
thinginherent."
10223,"oInpassword-based authentication, theclaimant usesastringofcharacters assome­
thingsheknows."
10224,"oPassword-based authentication canbedividedintotwobroadcategories: fixedand
one-time."
10225,"oInChallenge-response authentication, theclaimant provesthatsheknowsasecret
withoutactuallysendingit."
10226,"oChallenge-response authentication canbedividedintofourcategories: symmetric­
keyciphers,keyed-hash functions, asymmetric-key ciphers,anddigitalsignature."
10227,"DAkeydistribution center(KDC)isatrustedthirdpartythatassignsasymmetric
keytotwoparties."
10228,"oKDCcreatesasecretkeyonlybetween amemberandthecenter.Thesecretkey
between members needstobecreatedasasessionkeywhentwomembers con­
tactKDC."
10229,"DKerberos isapopularsessionkeycreatorprotocolthatrequiresanauthentication
serverandaticket-granting server."
10230,"DAcertification authority (CA)isafederalorstateorganization thatbindsapublic
keytoanentityandissuesacertificate."
10231,"DApublic-key infrastructure (PKI)isahierarchical systemtoanswerqueriesabout
keycertification."
10232,"31.11PRACTICE SET
ReviewQuestions
1.Whatisanonce?"
10233,2.WhatistheN2problem?
10234,3.NameaprotocolthatusesaKDCforuserauthentication.
10235,4.WhatisthepurposeoftheKerberos authentication server?
10236,5.WhatisthepurposeoftheKerberos ticket-granting server?
10237,"6.WhatisthepurposeofX,S09?"
10238,7.Whatisacertification authority?
10239,8.Whataresomeadvantages anddisadvantages ofusinglongpasswords?
10240,9.Wediscussed fixedandone-time passwords astwoextremes.
10241,"Whataboutfrequently
changedpasswords?"
10242,Howdoyouthinkthisschemecanbeimplemented?
10243,"Whatare
theadvantages anddisadvantages?"
10244,10.Howcanasystempreventaguessing attackonapassword?
10245,"Howcanabank
preventPINguessing ifsomeone hasfoundorstolenabankcardandtriedto
useit?SECTION 31.11PRACTICE SET 993
Exercises
11.Amessage ismadeof10numbers between 00and99.Ahashalgorithm createsa
digestoutofthismessage byaddingallnumbers modulo100.Theresulting digest
isanumberbetween 00and99.Doesthisalgorithm meetthefirstcriterion ofa
hashalgorithm?"
10246,Doesitmeetthesecondcriterion?
10247,Doesitmeetthethirdcriterion?
10248,12.Amessage ismadeof100characters.
10249,"Ahashalgorithm createsadigestoutofthis
message bychoosing characters 1,11,21,...,and91.Theresulting digesthas
10characters."
10250,Doesthisalgorithm meetthefirstcriterion ofahashalgorithm?
10251,Doesitmeetthesecondcriterion?
10252,Doesitmeetthethirdcriterion?
10253,"13.Ahashalgorithm createsadigestofNbits.Howmanydifferent digestscanbe
createdfromthisalgorithm?"
10254,"14.Ataparty,whichismoreprobable, apersonwithabirthday onaparticular dayor
two(ormore)personshavingthesamebirthday?"
10255,"15.HowisthesolutiontoExercise 14relatedtothesecondandthirdcriteriaofahashing
function?"
10256,"16.Whichoneismorefeasible, afixed-size digestoravariable-size digest?Explain
youranswer."
10257,"17.Amessage is20,000characters."
10258,WeareusingadigestofthismessageusingSHA-l.
10259,"Aftercreatingthedigest,wedecidedtochangethelast10characters."
10260,"Canwesay
howmanybitsinthedigestwillbechanged?"
10261,"18.Aretheprocesses ofcreatingaMACandofsigningahashthesame?Whatarethe
differences?"
10262,"19.Whenapersonusesamoneymachine togetcash,isthisamessage authentication,
anentityauthentication, orboth?"
10263,"20.ChangeFigure31.14toprovidetwo-way authentication (AliceforBobandBob
forAlice)."
10264,"21.ChangeFigure31.16toprovidetwo-way authentication (AliceforBobandBob
forAlice)."
10265,"22.ChangeFigure31.17toprovidetwo-way authentication (AliceforBobandBob
forAlice)."
10266,"23.ChangeFigure31.18toprovidetwo-way authentication (AliceforBobandBob
forAlice)."
10267,"24.Inauniversity, astudentneedstoencryptherpassword (withauniquesymmetric
key)beforesendingitwhenshelogsin.Doesencryption protecttheuniversity or
thestudent?Explainyouranswer."
10268,"25.InExercise24,doesithelpifthestudentappendsatimestamp tothepassword before
encryption?"
10269,Explainyouranswer.
10270,"26.InExercise 24,doesithelpifastudenthasalistofpasswords andusesadifferent
oneeachtime?"
10271,"27.InFigure31.20,whathappensifKDCisdown?"
10272,"28.InFigure31.21,whathappensiftheASisdown?WhathappensiftheTGSisdown?"
10273,Whathappensifthemainserverisdown?
10274,"29.InFigure31.26,whathappensifthetrustedcenterisdown?994CHAPTER 31NETWORK SECURITY
30.Addasymmetric-key encryption/decryption layertoFigure31.11toprovideprivacy."
10275,31.Addanasymmetric-key encryption/decryption layertoFigure31.11toprovideprivacy.
10276,"Research Activities
32.Thereisahashingalgorithm calledMD5.Findthedifference betweenthisalgorithm
andSHA-l."
10277,33.Thereisahashingalgorithm calledRIPEMD-160.
10278,"Findthedifference between
thisalgorithm andSHA-l."
10279,"34.Compare MD5.SHA-1,andRIPEMD-160."
10280,35.Findsomeinfonnation aboutRSAdigitalsignature.
10281,"36.Findsomeinformation aboutDSSdigitalsignature.CHAPTER 32
SecurityintheInternet: IPSec,
SSUTLS, PGp,VPN,andFirewalls
Inthischapter,wewant toshowhowcertainsecurityaspects,particularly privacyand
messageauthentication, canbeappliedtothenetwork, transport, andapplication layersof
theInternetmodel.WebrieflyshowhowtheIPSecprotocol canaddauthentication and
confidentiality totheIPprotocol, howSSL(orTLS)candothesamefortheTCPprotocol,
andhowPGPcandoitfortheSMTPprotocol(e-mail)."
10282,"Inalltheseprotocols, therearesomecommon issuesthatweneedtoconsider."
10283,"First,
weneedtocreateaMAC.ThenweneedtoenCl)'ptthemessage and,probably, the
MAC.Thismeans,thatwithsomeminorvariations, thethreeprotocols discussed inthis
chaptertakeapacketfromtheappropriate layerandcreateanewpacketwhichisauthen­
ticatedandencrypted."
10284,Figure32.1showsthisgeneralidea.
10285,"Figure32.1Common structureofthreesecurityprotocols
Headerofsecurityprotocol
Payload
(fromIP,TCP,orSMTP)
)
Dataflow
Notethattheheaderorthetrailerofthesecurityprotocolmayormaynotbeincluded
intheencryption process.Notealsothatsomeprotocols may needmoreinformation in
thesecuredpacket;thefigureshowsonlythegeneralidea."
10286,Onecommon issueinalltheseprotocols issecurityparameters.
10287,"Even the simplified
structure inFigure32.1suggeststhatAliceandBobneedtoknowseveralpiecesofinfor­
mation,securityparameters, beforetheycansendsecureddatatoeachother.Inparticular,
theyneedtoknowwhichalgorithms touseforauthentication andencryption/decryption."
10288,"995996CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSl./TLS, PGP,VPN,ANDFIREWALLS
Evenifthesealgorithms canbepredetermined foreveryone intheworld,whichtheyare
notaswewillsee,BobandAlicestillneedatleasttwokeys:onefortheMACandone
forencryption/decryption."
10289,"Inotherwords,thecomplexity oftheseprotocols liesnotin
thewaytheMAC dataarecalculated orthewayencryption isperformed; itliesinthefact
thatbeforecalculating the MAC andperforming encryption, weneedtocreateasetof
securityparameters betweenAliceandBob."
10290,"Atfirstglance,itlooksasiftheuseofanyoftheseprotocols mustinvolveaninfi­
nitenumberofsteps.Tosendsecureddata,weneedasetofsecurityparameters."
10291,"The
secureexchange ofsecurityparameters needsasecondsetofsecurityparameters."
10292,"The
secureexchange ofthesecondsetofsecurityparameters needsathirdsetofsecurity
parameters."
10293,Andsoonadinfinitum.
10294,"Tolimitthesteps,wecanusepublic-key cryptography ifeachpersonhasaprivate
andpublickeypair.Thenumberofstepscanbereducedtooneortwo.Intheone-step
version,wecanusesessionkeystocreatetheMACandencryptbothdataandMAC."
10295,"Thesessionkeysandthelistofalgorithms canbesentwiththepacketbutencrypted by
usingpublic-key ciphers.Inthetwo-step version,wefirstestablish thesecuritypara­
metersbyusingpublic-key ciphers.Wethenusethesecurityparameters tosecurely
sendactualdata.Oneofthethreeprotocols, PGP,usesthefirstapproach; theothertwo
protocols, IPSecandSSLITLS, usethesecond."
10296,"Wealsodiscussacommon protocol, thevirtualprivatenetwork(VPN),thatuses
theIPSec.Attheendofthechapter,wediscussthefirewall,amechanism forpreventing
theattackonthenetworkoftheorganization."
10297,"32.1IPSecurity (IPSec)
IPSecurity (IPSec)isacollection ofprotocols designed bytheInternetEngineering
TaskForce(IETF)toprovidesecurityforapacketatthenetworklevel.IPSechelpsto
createauthenticated andconfidential packetsfortheIPlayerasshowninFigure32.2.
Figure32.2TCPIIPprotocol suiteandIPSec
Applications
UDP,TCP,orSCTP
TwoModesIP
Underlying physical networksI
IIPSecisdesigned
toprovidesecurity
atthenetworklayer."
10298,"IPSecoperatesinoneoftwodifferent modes:thetransport modeorthetunnelmodeas
showninFigure32.3.SECTION 32.1IPSecurity (IPSec) 997
Figure32.3Transport modeandtunnelmodesofIPSecprotocol
Transport layer
Transport, layer
payload
Network layer
IPSec
a.Transport modeNetwork layer
IPSec
b.Tunnelmode
Transport Mode
Inthetransport mode,IPSecprotectswhatisdelivered fromthetransport layertothe
network layer.Inotherwords,thetransport modeprotectsthenetwork layerpayload,
thepayloadtobeencapsulated inthenetworklayer."
10299,"Notethatthetransport modedoesnotprotecttheIPheader.Inotherwords,the
transport modedoesnotprotectthewholeIPpacket;itprotectsonlythepacketfrom
thetransport layer(theIPlayerpayload)."
10300,"Inthismode,theIPSecheaderandtrailerare
addedtotheinformation corningfromthetransport layer.TheIPheaderisaddedlater."
10301,"IPSecinthetransport modedoesnotprotecttheIPheader;
itonlyprotectstheinformation comingfromthetransport layer."
10302,"Thetransport modeisnormally usedwhenweneedhost-to-host (end-to-end) pro­
tectionofdata.ThesendinghostusesIPSectoauthenticate and/orencryptthepayload
delivered fromthetransport layer.Thereceiving hostusesIPSectochecktheauthenti­
cationandlordecrypttheIPpacketanddeliverittothetransport layer.Figure32.4
showsthisconcept."
10303,"Figure32.4Transport modeinaction
!~."
10304,"Transport layer fI Transport layerJI:;!IPSeclayer )!=i::jl:::::::::::=±=!l IPSeclayer
!II! INetwork layer I1il!ll!C::::.=:::::::::::::::ll Network layer
~-----illlac::::::=:=::::::::::::rt>>----&
HostA HostB998CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
TunnelMode
Inthetunnelmode,IPSecprotectstheentireIPpacket.IttakesanIPpacket,including
theheader,appliesIPSecsecuritymethods totheentirepacket,andthenaddsanewIP
headerasshowninFigure32.5.
ThenewIPheader,aswewillseeshortly,hasdifferent information thantheoriginal
IFheader.Thetunnelmodeisnormally usedbetween tworouters,between ahostanda
router,orbetween arouterandahostasshowninFigure32.5.
Figure32.5Tunnelmodeinaction
HostA
r--!I:
I·Network layer
IPSeclayer
Network layer
Tunnel~~HostB
r--
Inotherwords,weusethetunnelmodewheneitherthesenderorthereceiverisnot
ahost.Theentireoriginalpacketisprotected fromintrusion between thesenderandthe
receiver."
10305,It'sasifthewholepacketgoesthroughanimaginary tunnel.
10306,IPSecintunnelmodeprotectstheoriginalIPheader.
10307,"TwoSecurity Protocols
IPSecdefinestwoprotocols-the Authentication Header(AH)Protocol andtheEncap­
sulatingSecurity Payload(ESP)Protocol-to provideauthentication and/orencryption
forpacketsattheIPlevel."
10308,"Authentication Header(AH)
TheAuthentication Header(AH)Protocol isdesigned toauthenticate thesourcehost
andtoensuretheintegrity ofthepayloadcarriedintheIPpacket.Theprotocol usesa
hashfunction andasymmetric keytocreateamessage digest;thedigestisinsertedin
theauthentication header.TheAHisthenplacedintheappropriate locationbasedonthe
mode(transport ortunnel).Figure32.6showsthefieldsandthepositionoftheauthen­
ticationheaderinthetransport mode."
10309,"WhenanIPdatagram carriesanauthentication header,theoriginalvalueinthepro­
tocolfieldoftheIPheaderisreplaced bythevalue51.Afieldinsidetheauthentication
header(thenextheaderfield)holdstheoriginalvalueoftheprotocol field(thetypeof
payload beingcarriedbytheIPdatagram)."
10310,"Theaddition ofanauthentication header
followsthesesteps:
1.Anauthentication headerisaddedtothepayloadwiththeauthentication datafield
settozero.SECTION 32.1IPSecurity (IPSec) 999
Figure32.6Authentication Header(AH)Protocol intransport mode
I,Datausedincalculation ofauthentication data
(exceptthosefieldsinIPheaderchanging duringtransmission)
Transport layerpayload
Securityparameter index
Sequence number
Authentication data(digest)
(variable length),I
2.Padding maybeaddedtomakethetotallengthevenforaparticular hashing
algorithm."
10311,"3.Hashingisbasedonthetotalpacket.However, onlythosefieldsoftheIPheaderthat
donotchangeduringtransmission areincluded inthecalculation ofthemessage
digest(authentication data)."
10312,4.Theauthentication dataareinsertedintheauthentication header.
10313,S.TheIPheaderisaddedafterthevalueoftheprotocolfieldischanged to51.
10314,"Abriefdescription ofeachfieldfollows:
oNextheader."
10315,"The8-bitnext-header fielddefinesthetypeofpayloadcarriedbythe
IPdatagram (suchasTCP,UDP,ICMP,orOSPF).Ithasthesamefunction asthe
protocol fieldintheIPheaderbeforeencapsulation."
10316,"Inotherwords,theprocess
copiesthevalueoftheprotocol fieldintheIPdatagram tothisfield.Thevalueof
theprotocol fieldinthenewIPdatagram isnowsetto51toshowthatthepacket
carriesanauthentication header."
10317,oPayloadlength.Thenameofthis8-bitfieldismisleading.
10318,"Itdoesnotdefinethe
lengthofthepayload; itdefinesthelengthoftheauthentication headerin4-byte
multiples, butitdoesnotincludethefirst8bytes."
10319,"oSecurity parameter index.The32-bitsecurityparameter index(SPI)fieldplays
theroleofavirtual-circuit identifier andisthesameforallpacketssentduringa
connection calledasecurityassociation (discussed later)."
10320,oSequence number.
10321,"A32-bitsequence numberprovides ordering information for
asequence ofdatagrams."
10322,Thesequence numbers preventaplayback.
10323,"Notethatthe
sequence numberisnotrepeated evenifapacketisretransmitted."
10324,"Asequence num­
berdoesnotwraparoundafteritreaches232;anewconnection mustbeestablished."
10325,"oAuthentication data.Finally,theauthentication datafieldistheresultofapplying
ahashfunctiontotheentireIPdatagram exceptforthefieldsthatarechangedduring
transit(e.g.,time-to-live),1000 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PCP,VPN,ANDFIREWALLS
TheAHProtocol provides sourceauthentication anddataintegrity, butnotprivacy."
10326,"Encapsulating Security Payload(ESP)
TheAHProtocol doesnotprovideprivacy,onlysourceauthentication anddataintegrity."
10327,"IPSeclaterdefinedanalternative protocolthatprovides sourceauthentication, integrity,
andprivacycalledEncapsulating Security Payload (ESP).ESPaddsaheaderand
trailer.NotethatESP'sauthentication dataareaddedattheendofthepacketwhich
makesitscalculation easier.Figure32.7showsthelocation oftheESPheaderand
trailer."
10328,"Figure32.7Encapsulation SecurityPayload(ESP)Protocol intransport mode
I'
Securityparameter index
Sequence numberAuthenticated
Encrypted
.PaddingSbits
Nextheader
WhenanIPdatagram carriesanESPheaderandtrailer,thevalueoftheprotocol
fieldintheIPheaderis50.AfieldinsidetheESPtrailer(thenext-header field)holdsthe
originalvalueoftheprotocolfield(thetypeofpayloadbeingcarriedbytheIPdatagram,
suchasTCPorUDP).TheESPprocedure followsthesesteps:
1.AnESPtrailerisaddedtothepayload."
10329,2.Thepayloadandthetrailerareencrypted.
10330,3.TheESPheaderisadded.
10331,"4.TheESPheader,payload, andESPtrailerareusedtocreatetheauthentication data."
10332,5.Theauthentication dataareaddedtotheendoftheESPtrailer.
10333,6.TheIPheaderisaddedaftertheprotocol valueischangedto50.
10334,"Thefieldsfortheheaderandtrailerareasfollows:
oSecurity parameter index.The32-bitsecurityparameter indexfieldissimilarto
thatdefinedfortheAHProtocol."
10335,oSequence number.
10336,"The32-bitsequence numberfieldissimilartothatdefinedfor
theAHProtocol."
10337,oPadding.
10338,Thisvariable-length field(0to255bytes)ofOsservesaspadding.
10339,"oPadlength.The8-bitpadlengthfielddefinesthenumberofpaddingbytes.The
valueisbetween 0and255;themaximum valueisrare."
10340,oNextheader.The8-bitnext-header fieldissimilartothatdefinedintheAHProtocol.
10341,"ItservesthesamepurposeastheprotocolfieldintheIPheaderbeforeencapsulation.SECTION 32.1IPSecurity (iPSec) 1001
oAuthentication data.Finally,theauthentication datafieldistheresultofapplying
anauthentication schemetopartsofthedatagram."
10342,"Notethedifference betweenthe
authentication datainAHandESP.InAH,partoftheIPheaderisincluded inthe
calculation oftheauthentication data;inESP,itisnot."
10343,"ESPprovides sourceauthentication, dataintegrity, andprivacy."
10344,"IPv4andIPv6
IPSecsupports bothIPv4andIPv6.InIPv6,however, AHandESParepartofthe
extension header."
10345,"AHVersusESP
TheESPProtocol wasdesigned aftertheAHProtocol wasalreadyinuse.ESPdoes
whatever AHdoeswithadditional functionality (privacy)."
10346,"Thequestion is,Whydowe
needAH?Theansweris,Wedon't.However, theimplementation ofAHisalready
included insomecommercial products, whichmeansthatAHwillremainpartofthe
Internetuntiltheproducts arephasedout."
10347,"Services Provided byIPSec
The twoprotocols, AHandESP,canprovideseveralsecurityservicesforpacketsatthe
networklayer.Table32.1showsthelistofservicesavailable foreachprotocol."
10348,"Table32.1IPSecservices
Services AH ESP
Accesscontrol Yes Yes
Message authentication (message integrity) Yes Yes
Entityauthentication (datasourceauthentication) Yes Yes
Confidentiality No Yes
Replayattackprotection Yes Yes
AccessControl IPSecprovides accesscontrolindirectly byusingaSecurityAssoci­
ationDatabase (SADB)aswewillseeinthenextsection.Whenapacketarrivesata
destination, andthereisnosecurityassociation alreadyestablished forthispacket,the
packetisdiscarded."
10349,"Message Authentication Theintegrityofthemessage ispreserved inbothAHand
ESPbyusingauthentication data.Adigestofdataiscreatedandsentbythesenderto
becheckedbythereceiver."
10350,"EntityAuthentication Thesecurityassociation andthekeyed-hashed digestofthe
datasentbythesenderauthenticate thesenderofthedatainbothAHandESP."
10351,Confidentiality Theencryption ofthemessageinESPprovides confidentiality.
10352,"AH,
however, doesnotprovideconfidentiality."
10353,"Ifconfidentiality isneeded,oneshoulduse
ESPinsteadofAH.1002 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
ReplayAttackProtection Inbothprotocols, thereplayattackisprevented byusing
sequence numbers andaslidingreceiverwindow.EachIPSecheadercontainsaunique
sequence numberwhenthesecurityassociation isestablished."
10354,"Thenumberstartsfrom
oandincreases untilthevaluereaches232-1(thesizeofthesequence numberfieldis
32bits).Whenthesequence numberreachesthemaximum, itisresettozeroand,atthe
sametime,theoldsecurityassociation (seethenextsection)isdeletedandanewoneis
established."
10355,"Topreventprocessing ofduplicate packets,IPSecmandates theuseofa
fixed-size windowatthereceiver.Thesizeofthewindowisdetermined bythereceiver
withadefaultvalueof64."
10356,"Security Association
Aswementioned intheintroduction tothechapter,eachofthreeprotocols wediscuss
inthischapter(IPSec,SSLffLS, andPGP)needsasetofsecurityparameters beforeit
canbeoperative."
10357,"InIPSec,theestablishment ofthesecurityparameters isdoneviaa
mechanism calledsecurityassociation (SA)."
10358,"IP,aswehaveseen,isaconnectionless protocol: Eachdatagram isindependent of
theothers.Forthistypeofcommunication, thesecurityparameters canbeestablished
inoneofthreeways."
10359,1.Securityparameters relatedtoeachdatagram canbeincluded ineachdatagram.
10360,Thedesigner ofIPSecdidnotchoosethisoptionprobably becauseofoverhead.
10361,"Addingsecurityparameters toeachdatagram createsalargeoverhead, particularly
ifthedatagram isfragmented severaltimesduringitsjourney."
10362,2.Asetofsecurityparameters canbeestablished foreachdatagram.
10363,"Thismeansthat
beforeeachdatagram istransmitted, asetofpacketsneedstobeexchanged between
thesenderandreceivertoestablish securityparameters."
10364,"Thisisprobably lesseffi­
cientthanthefirstchoice,anditisnotusedinIPSec."
10365,"3.IPSecusesthethirdchoice.Asetofsecurityparameters canbeestablished between
asenderandaparticular receiverthefirsttimethesenderhasadatagram tosendto
thatparticular receiver.Thesetcanbesavedforfuturetransmission ofIPpacketsto
thesamereceiver."
10366,"Security association isaveryimportant aspectofIPSec.Usingsecurityassociation,
IPSecchangesaconnectionless protocol, IP,toaconnection-oriented protocol."
10367,"We
canthinkofanassociation asaconnection."
10368,"WecansaythatwhenAliceandBob
agreeuponasetofsecurityparameters betweenthem,theyhaveestablished alogical
connection betweenthemselves (whichiscalledassociation)."
10369,"However, theymaynot
usethisconnection allthetime.Afterestablishing theconnection, Alicecansenda
datagram toBobtoday,anotherdatagram afewdayslater,andsoon.Thelogical
connection isthereandreadyforsendingasecuredatagram."
10370,"Ofcourse,theycan
breaktheconnection, ortheycanestablish anewoneafterawhile(whichisamore
securewayofcommunication)."
10371,"ASimpleExample
Asecurityassociation isaverycomplex setofpiecesofinformation."
10372,"However, wecan
showthesimplestcaseinwhichAlicewantstohaveanassociation withBobforuseinSECTION 32.11PSecurity (IPSec) 1003
atwo-way communication."
10373,"Alicecanhaveanoutbound association (fordatagrams to
Bob)andaninboundassociation (fordatagrams fromBob).Bobcanhavethesame.In
thiscase,thesecurityassociations arereducedtotwosmalltablesforbothAliceand
BobasshowninFigure32.8.
Figure32.8Simpleinboundandoutbound securityassociations
ToProtocol AuthenticationOutbound SA
ESP SHA-I,xDES,yOutbound SA
ToProtocol Authentication Encryption
Bob ESP SHA-l,xDES,y Alice AH MD5,z
Authentication Encryption
Authenticate
andencrypt
VerifyAlice
--
IPSecpacket
IPSecpacketBobIf""""':·
Verify
anddecrypt
Authenticate
ThefigureshowsthatwhenAliceneedstosendadatagram toBob,sheusesthe
ESPProtocolofIPSec.Authentication isdonebyusingSHA-lwithkeyx.Theencryption
isdonebyusingDESwithkeyy.WhenBobneedstosendadatagram toAlice,heuses
theARProtocol ofIPSec.Authentication isdonebyusingMD5withkeyz.Notethat
theinboundassociation forBobisthesameastheoutbound association forAlice,and
viceversa."
10374,"SecurityAssociation Database (SADB)
Asecurityassociation canbeverycomplex."
10375,"Thisisparticularly trueifAlicewantsto
sendmessages tomanypeopleandBobneedstoreceivemessages frommanypeople."
10376,"Inaddition, eachsiteneedstohavebothinboundandoutbound SAstoallowbidirectional
communication."
10377,"Inotherwords,weneedasetofSAsthatcanbecollected intoadatabase."
10378,Thisdatabase iscalledthesecurityassociation database (SADB).
10379,"Thedatabase can
bethoughtofasatwo-dimensional tablewitheachrowdefiningasingleSA.Normally,
therearetwoSADBs,oneinboundandoneoutbound."
10380,"SecurityParameter Index
Todistinguish oneassociation fromtheother,eachassociation isidentified byaparameter
calledthesecurityparameter index(SPI).Thisparameter, inconjunction withthe
destination address(outbound) orsourceaddress(inbound) andprotocol (ARorESP),
uniquely definesanassociation.1004 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDF/REWALLS
Internet KeyExchange (IKE)
Nowwecometothelastpartofthepuzzle-how SADBsarecreated.TheInternetKey
Exchange (IKE)isaprotocol designed tocreatebothinbound andoutbound security
associations inSADBs.
IKEcreatesSAsforIPSec."
10381,"IKEisacomplex protocol basedonthreeotherprotocols-Oakley, SKEME, and
ISAKMP-as showninFigure32.9.
Figure32.9IKEcomponents
InternetSecurityAssociation
andKeyManagement Protocol
(ISAKMP)
Oakley SKEMEI'-
InternetKeyExchange (IKE)
TheOakleyProtocol wasdeveloped byHilarieOrman.Itisakeycreationprotocol
basedontheDiffie-Hellman key-exchange method,butwithsomeimprovements."
10382,"Oakley
isafree-formatted protocolinthesensethatitdoesnotdefinetheformatofthemessage
tobeexchanged."
10383,"SKEME, designed byHugoKrawcyzk, isanotherprotocol forkeyexchange."
10384,"It
usespublic-key encryption forentityauthentication inakey-exchange protocol."
10385,"TheInternetSecurityAssociation andKeyManagement Protocol (ISAKMP) is
aprotocoldesigned bytheNational SecurityAgency(NSA)thatactuallyimplements the
exchanges definedinIKE.Itdefinesseveralpackets,protocols, andparameters thatallow
theIKEexchanges totakeplaceinstandardized, formatted messages tocreateSAs.
OnemayaskhowISAKMP iscarriedfromthesendertothereceiver."
10386,"Thisprotocol
isdesigned soastobeapplicable withanyunderlying protocol."
10387,"Forexample, the
packetcanbeusedasthepayloadinthenetworklayerortransport layer.Whenweuse
IPSec,itisnaturalthatthispacketbeconsidered asapayloadfortheIPprotocol and
carriedinthedatagram."
10388,"Nowthenextquestion is,Howarethedatagrams thatcarry
ISAKMP securely exchanged?"
10389,"Theansweristhatthereisnoneed.Thereisnothingin
theISAKMP packetsthatneedstobesecured."
10390,"VirtualPrivateNetwork
Virtualprivatenetwork (VPN)isatechnology thatisgainingpopularity amonglarge
organizations thatusetheglobalInternetforbothintra-andinterorganization commu­
nication, butrequireprivacyintheirinternalcommunications."
10391,"WediscussVPNhere
becauseitusestheIPSecProtocol toapplysecuritytotheIPdatagrams.SECT/ON 32.//PSecurity (/PSec) 1005
PrivateNetworks
Aprivatenetwork isdesigned foruseinsideanorganization."
10392,"Itallowsaccesstoshared
resources and,atthesametime,provides privacy.Beforewediscusssomeaspectsof
thesenetworks, letusdefinetwocommonly used,relatedterms:intranetandextranet."
10393,"Intranet Anintranet isaprivatenetwork (LAN)thatusestheInternetmodel.How­
ever,accesstothenetwork islimitedtotheusersinsidetheorganization."
10394,"Thenetwork
usesapplication programs definedfortheglobalInternet, suchasHTTP,andmayhave
Webservers,printservers,fileservers,andsoon."
10395,"Extranet Anextranet isthesameasanintranetwithonemajordifference: Some
resources maybeaccessed byspecificgroupsofusersoutsidetheorganization under
thecontrolofthenetwork administrator."
10396,"Forexample, anorganization mayallow
authorized customers accesstoproductspecifications, availability, andonlineordering."
10397,"Auniversity oracollegecanallowdistance learning students accesstothecomputer
labafterpasswords havebeenchecked."
10398,Addressing Aprivatenetwork thatusestheInternet modelmustuseIPaddresses.
10399,"Threechoicesareavailable:
1.Thenetworkcanapplyforasetofaddresses fromtheInternetauthorities andusethem
withoutbeingconnected totheInternet.Thisstrategyhasanadvantage."
10400,"Ifinthefuture
theorganization decidestobeconnected totheInternet,itcandosowithrelativeease."
10401,"However, thereisalsoadisadvantage: Theaddressspaceiswastedinthemeantime."
10402,"2.Thenetwork canuseanysetofaddresses withoutregistering withtheInternet
authorities."
10403,"Because thenetworkisisolated, theaddresses donothavetobeunique."
10404,"However, thisstrategyhasaseriousdrawback: Usersmightmistakenly confusethe
addresses aspartoftheglobalInternet."
10405,"3.Toovercome theproblems associated withthefirstandsecondstrategies, theInternet
authorities havereserved threesetsofaddresses, showninTable32.2.
Table32.2Addresses forprivatenetworks
Prefix Range Total
10/8 10.0.0.0to10.255.255.255 224
172.16/12 172.16.0.0 to172.31.255.255 220
192.168/16 192.168.0.0 to192.168.255.255 216
Anyorganization canuseanaddressoutofthissetwithoutpermission fromtheInternet
authorities."
10406,Everybody knowsthatthesereserved addresses areforprivatenetworks.
10407,"Theyareuniqueinsidetheorganization, buttheyarenotuniqueglobally."
10408,"Norouterwill
forwardapacketthathasoneoftheseaddresses asthedestination address."
10409,"Achieving Privacy
Toachieveprivacy, organizations canuseoneofthreestrategies: privatenetworks,
hybridnetworks, andvirtualprivatenetworks.1006 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
PrivateNetworks Anorganization thatneedsprivacywhenroutinginformation inside
theorganization canuseaprivatenetwork asdiscussed previously."
10410,"Asmallorganiza­
tionwithonesinglesitecanuseanisolatedLAN.Peopleinsidetheorganization can
senddatatooneanotherthattotallyremaininsidetheorganization, securefromoutsiders."
10411,Alargerorganization withseveralsitescancreateaprivateinternet.
10412,"TheLANsat
different sitescanbeconnected toeachotherbyusingroutersandleasedlines.Inother
words,aninternetcanbemadeoutofprivateLANsandprivateWANs.Figure32.10
showssuchasituation foranorganization withtwosites.TheLANsareconnected to
eachotherbyroutersandoneleasedline."
10413,"Figure32.10 Privatenetwork
~A ~B
I
I
I
IIIII
______________ .JLeasedlineI
I
I
I
I
I
I
• I
• I• I
R2 :
I
I
I
I
I ______________ -.J
Inthissituation, theorganization hascreatedaprivateinternetthatistotallyisolated
fromtheglobalInternet."
10414,"Forend-to-end communication between stationsatdifferent
sites,theorganization canusetheInternetmodel.However, thereisnoneedforthe
organization toapplyforIPaddresses withtheInternetauthorities."
10415,"Itcanuseprivate
IPaddresses."
10416,"Theorganization canuseanyIPclassandassignnetwork andhost
addresses internally."
10417,"Becausetheinternetisprivate,duplication ofaddresses byanother
organization intheglobalInternetisnotaproblem."
10418,"HybridNetworks Today,mostorganizations needtohaveprivacyinintraorganization
dataexchange, but,atthesametime,theyneedtobeconnected totheglobalInternet
fordataexchange withotherorganizations."
10419,"Onesolution istheuseofahybrid
network."
10420,"Ahybridnetworkallowsanorganization tohaveitsownprivateinternetand,
atthesametime,accesstotheglobalInternet.Intraorganization dataareroutedthrough
theprivateinternet; interorganization dataareroutedthroughtheglobalInternet."
10421,"Fig­
ure32.11showsanexampleofthissituation."
10422,"Anorganization withtwositesusesroutersRlandR2toconnectthetwositespri­
vatelythroughaleasedline;itusesroutersR3andR4toconnectthetwositestothe
restoftheworld.Theorganization usesglobalIPaddresses forbothtypesofcommuni­
cation.However, packetsdestinedforinternalrecipients areroutedonlythroughrouters
RlandR2.RoutersR3andR4routethepacketsdestinedforoutsiders."
10423,"VirtualPrivateNetworks Bothprivateandhybridnetworks haveamajordrawback:
cost.Privatewide-area networks (WANs) areexpensive."
10424,"Toconnectseveralsites,an
organization needsseveralleasedlines,whichmeansahighmonthlyfee.OnesolutionSECTION 32.1IPSecurity (IPSec)1007
Figure32.11Hybridnetwork
Internet
Leasedline
R2
istousetheglobalInternetforbothprivateandpubliccommunications."
10425,"Atechnology
calledvirtualprivatenetwork allowsorganizations tousetheglobalInternetforboth
purposes."
10426,"VPNcreatesanetworkthatisprivatebutvirtual.Itisprivatebecauseitguarantees
privacyinsidetheorganization."
10427,"ItisvirtualbecauseitdoesnotuserealprivateWANs;
thenetworkisphysically publicbutvirtually private."
10428,Figure32.12showstheideaofavirtual private network.
10429,"RoutersRlandR2use
VPNtechnology toguarantee privacyfortheorganization."
10430,"Figure32.12Virtualprivatenetwork
R2SiteA SiteB
I
----~----------
VPNTechnology
VPNtechnology usesIPSecinthetunnelmodetoprovideauthentication, integrity, and
privacy."
10431,"Tunneling Toguarantee privacyandothersecurity measures foranorganization,
VPNcanusetheIPSecinthetunnelmode.Inthismode,each IPdatagram destinedfor
privateuseintheorganization isencapsulated inanotherdatagram."
10432,"TouseIPSecin
tunneling, theVPNsneedtousetwosetsofaddressing, asshowninFigure32.13.1008 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
Figure32.13 Addressing inaVPN
r------------------,SiteA
R2SiteB
~------------------1
1
1
I
I
I
II
I
I
I
I
I
I
II
Station200:
I
I-------- ---------~Internet
FromRl toR211
I
I
I
I
I
I
I_____ ..JStation100
1 ------
From100to200 From100to200
Thepublicnetwork(Internet) isresponsible forcarryingthepacketfromRltoR2."
10433,"Outsiders cannotdecipher thecontents ofthepacketorthesourceanddestination
addresses."
10434,"Deciphering takesplaceatR2,whichfindsthedestination addressofthe
packetanddeliversit."
10435,"32.2SSL/TLS
Atransport layersecurityprovides end-to-end securityservicesforapplications thatuse
areliabletransport layerprotocol suchasTCP.Theideaistoprovidesecurityservices
fortransactions ontheInternet.Forexample, whenacustomer shopsonline,thefollow­
ingsecurityservicesaredesired:
1.Thecustomer needstobesurethattheserverbelongstotheactualvendor,notan
imposter."
10436,"Thecustomer doesnotwanttogiveanimposter hercreditcardnumber
(entityauthentication)."
10437,"Likewise, thevendorneedstoauthenticate thecustomer."
10438,"2.Thecustomer andthevendorneedtobesurethatthecontents ofthemessage are
notmodified duringtransition (message integrity)."
10439,"3.Thecustomer andthevendorneedtobesurethatanimposter doesnotintercept
sensitive information suchasacreditcardnumber(confidentiality)."
10440,"Twoprotocols aredominant todayforproviding securityatthetransport layer:theSecure
SocketsLayer(SSL)Protocol andtheTransport LayerSecurity (TLS)Protocol."
10441,"The
latterisactuallyanIETFversionoftheformer.FirstwediscussSSL,thenwebriefly
mention themaindifferences between SSLandTLS.Figure32.14showstheposition
ofSSLandTLSintheInternetmodel."
10442,"SSLServices
SecureSocketLayer(SSL)isdesigned toprovidesecurityandcompression services
todatagenerated fromtheapplication layer.Typically, SSLcanreceivedatafromany
application layerprotocol, butusuallytheprotocolisHTTP.Thedatareceived fromtheSECTION 32.2SSUTLS 1009
Figure32.14LocationofSSLandTLSintheInternetmodel
IApplications
~---_----I
ITCP
IP
Underlying physicalnetworksI
ISSLrrLS isdesigned
toprovidesecurity
atthetransport layer."
10443,"application arecompressed (optional), signed,andencrypted."
10444,"Thedataarethenpassed
toareliabletransport layerprotocol suchasTCP.Netscape developed SSLin1994."
10445,"Versions 2and3werereleasedin1995.Inthischapter,wediscussSSLv3.SSLprovides
severalservicesondatareceived fromtheapplication layer."
10446,"Fragmentation
First,SSLdividesthedataintoblocksof214bytesorless."
10447,"Compression
Eachfragment ofdataiscompressed byusingoneofthelosslesscompression methods
negotiated betweentheclientandserver.Thisserviceisoptional."
10448,"Message Integrity
Topreserve theintegrityofdata,SSLusesakeyed-hash function tocreateaMAC."
10449,"Confidentiality
Toprovideconfidentiality, theoriginaldataandtheMACareencrypted usingsymmetric­
keycryptography."
10450,"Framing
Aheaderisaddedtotheencrypted payload."
10451,"The,payload isthenpassedtoareliable
transport layerprotocol."
10452,"Security Parameters
Whenwediscussed IPSecintheprevious section,wementioned thateachofthetwo
partiesinvolved indataexchange needstohaveasetofparameters foreachassociation
(SA).SSLhasasimilargoal,butadifferent approach."
10453,"TherearenoSAs,butthereare
ciphersuitesandcryptographic secretsthattogethermakethesecurityparameters."
10454,"CipherSuite
Thecombination ofkeyexchange, hash,andencryption algorithms definesaciphersuite
foreachSSLsession.EachsuitestartswiththetermSSL,followed bythekey-exchange1010 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUILS, PGP,VPN,ANDFIREWALLS
algorithm."
10455,"ThewordWITHseparates thekeyexchange algorithm fromtheencryption
andhashalgorithms."
10456,"Forexample,
SSL_DBE_RSA_WITH_DES_CBC~SHA
definesDHE_RSA (ephemeral Diffie-Hellman withRSAdigitalsignature) asthekey
exchange withDES_CBC astheencryption algorithm andSHAasthehashalgorithm."
10457,"NotethatDHisfixedDiffie-Hellman, DHEisephemeral Diffie-Hellman, andDH-anon is
anonymous Diffie-Hellman."
10458,"Table32.3showsthesuitesusedintheUnitedStates.We
havenotincluded thosethatareusedforexport.Notethatnotallcombinations ofkey­
exchange algorithms (toestablish keysformessage authentication andencryption),
encryption algorithms, andauthentication algorithms areincluded intheciphersuitelist."
10459,"Wehavenotdefinedordiscussed severalalgorithms youcanfindinthetable,butwewish
todescribethewholepicturesothatthereadercanhaveanideaofhowgeneralthesuiteis."
10460,"Table32.3SSLciphersuitelist
KeyExchange Encryption Hash
CipherSuite Algorithm Algorithm Algorithm
SSL_NULL_WITH_NULL_NULL NULL NULL NULL
SSL_RSA_ WITH_NULL_MD5 RSA NULL MD5
SSL_RSA_WITH_NULL_SHA RSA NULL SHA
SSL_RSA_ WITH_RC4_128_MD5 RSA RCU28 MD5
SSL_RSA_WITH_RC4_128_SHA RSA RC4-128 SHA
SSL_RSA_WITH_IDEA_CBC_SHA RSA IDEA_CSC SHA
SSL_RSA_WITH_DES_CBC_SHA RSA DES_eSC SHA
SSL_RSA_ WITH_3DES_EDE_ CBC_SHA RSA 3DES_EDE_CBC SHA
SSL_DH3ll0ll_WITH_RC4_128_MD5 DH_anon RC4_128 MD5
SSL_DH_anon_ WITH_DES_ CRC_SHA DH_anon DES_CBC SHA
SSL_DH_anon_ WITH_3DES_EDE_CBC_SHA DH_anon 3DES_EDE_CBC SHA
SSL_DHE_RSA_WITH_DES_CBC_SHA DHE_RSA DES_CBC SHA
SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA DHE_RSA 3DES_EDLCBC SHA
SSL_DHE_DSS_WITH_DES_CBCSHA DHE_DSS DES_CBC SHA
SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA DHE_DSS 3DBS_EDE_CSC SHA
SSL_DH_RSA_WITH_DES_CRC_SHA DH_RSA DES_CBC SHA
SSL_DH_RSA_WITH_3DES_EDE_CBC_SHA DH_RSA 30BS_EDE_CSC SHA
SSL_DH_DSS_ WITH_DES_CBC_SHA DH_DSS DES_CEC SHA
SSL_DH_DSS_ WITH_3DES_EDE_CBC_SHA DH_DSS .'\DES_EDEJ'SC SHA
SSL_FORTEZZA_DMS_WITH_NULL_SHA FORTEZZA_DMS NULL SHA
SSL_FORTEZZA_DMS_WITH_FORTEZZA_CRC_SHA FORTEZZA_DMS FORTEZZA_CBC SHA
SSL]ORTEZZA_DMS_WITH_RC4_128_SHA FORTEZZA_DMS RC-U28 SHA
Cryptographic Secrets
Thesecondpartofsecurityparameters isoftenreferredtoascryptographic secrets.To
achievemessage integrity andconfidentiality, SSLneedssixcryptographic secrets,four
keys,andtwoIVs.SECTION 32.2SSl./TLS 1011
Theclientandtheserverhavesixdifferent cryptography secrets."
10461,"TheprocessofcreatingthesesecretsisshowninFigure32.15.Theclientneeds
onekeyformessage authentication, onekeyforencryption, andoneIVforblock
encryption."
10462,"Theserverneedsthesame.SSLrequiresthatthekeysforonedirection be
different fromthosefortheotherdirection.Ifthereisanattackinonedirection, the
otherdirection isnotaffected."
10463,"Theseparameters aregenerated byusinganegotiation
protocol, aswewillseeshortly."
10464,"Figure32.15Creationofcryptographic secretsinSSL
Client
I--Clientauthentication key
II--Serverauthentication key
III--Clientencryption key
IV--Serverencryption key
V--Clientinitiation vector
VI--Serverinitiation vector
Acomplex algorithm
usingSHA-IandMD5Server
Some constants
Someconstants
IIIIV
1.Theclientandserverexchange tworandomnumbers; oneiscreatedbytheclient
andtheotherbytheserver."
10465,"2.Theclientandserverexchange onepremaster secretbyusingoneofthekey­
exchange algorithms wediscussed previously."
10466,"3.A48-bytemastersecretiscreatedfromthepremaster secretbyapplying twohash
functions (SHA-landMD5)."
10467,"4.Themastersecretisusedtocreatevariable-length secretsbyapplying thesameset
ofhashfunctions andprepending withdifferentconstants."
10468,"SessionsandConnections
ThenatureofIPandTCPprotocols isdifferent."
10469,"IPisaconnectionless protocol; TCPis
aconnection-oriented protocol."
10470,"Anassociation inIPSectransforms theconnectionless
IPtoaconnection-oriented securedprotocol."
10471,"TCPisalreadyconnection-oriented.1012 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSurLS, PGP,VPN,ANDFIREWALLS
However, thedesigners ofSSLdecidedthattheyneededtwo-levels ofconnectivity:
sessionandconnection."
10472,"Asessionbetweentwosystemsisanassociation thatcanlastfor
alongtime;aconnection canbeestablished andbrokenseveraltimesduringasession."
10473,"Someofthesecurityparameters arecreatedduringthesessionestablishment and
areineffectuntilthesessionisterminated (forexample, ciphersuiteandmasterkey)."
10474,"Someofthesecurityparameters mustberecreated (oroccasionally resumed) foreach
connection (forexample, sixsecrets)."
10475,"FourProtocols
Wehavediscussed theideaofSSLwithoutshowing howSSLaccomplishes itstasks."
10476,"SSLdefinesfourprotocols intwolayers,asshowninFigure32.16.TheRecordProtocol
isthecarrier.Itcarriesmessages fromthreeotherprotocols aswellasthedatacoming
fromtheapplication layer.Messages fromtheRecordProtocol arepayloads tothe
transport layer,normally TCP.TheHandshake Protocol provides securityparameters
fortheRecordProtocol.Itestablishes aciphersetandprovides keysandsecurity
parameters."
10477,"Italsoauthenticates theservertotheclientandtheclienttotheserver,if
needed.TheChangeCipherSpec Protocol isusedforsignaling thereadiness ofcryp­
tographic secrets.TheAlertProtocol isusedtoreportabnormal conditions."
10478,"Wewill
brieflydiscusstheseprotocols inthissection."
10479,"Figure32.16FourSSLprotocols
SSL,---------------------------------------------------1
L--:d:::------
-~~:g:~~::I~Y-~-----~;~------1-----J
Protocol Protocol Protocol
I RecordProtocol I
, f 1
: Transport layer :I J
Handshake Protocol
TheHandshake Protocol usesmessages tonegotiate theciphersuite,toauthenticate the
servertotheclientandtheclienttotheserver(ifneeded), andtoexchangeinformation
forbuildingthecryptographic secrets.Thehandshaking isdoneinfourphases,asshown
inFigure32.17."
10480,"ChangeCipherSpec Protocol
Wehaveseenthatthenegotiation oftheciphersuiteandthegeneration ofcrypto­
graphicsecretsareformedgradually duringtheHandshake Protocol."
10481,"Thequestion now
is,Whencanthetwopartiesusetheseparameter secrets?SSLmandates thatthepartiesSECTION 32.2SSUFLS 1013
Figure32.17 Handshake Protocol
Client
r--
PhaseI Establishing SecurityCapabilities
Serverauthentication andkeyexchangeServer-
PhaseII
PhaseIII
,,',PhaseIV
notusetheseparameters orsecretsuntiltheyhavesentorreceived aspecialmessage,
theChangeCipherSpec message, whichisexchanged duringtheHandshake Protocoland
definedintheChangeCipherSpec Protocol."
10482,"Beforetheexchange ofanyChangeCipherSpec
messages, onlythependingcolumnshavevalues."
10483,"AlertProtocol
SSLusestheAlertProtocolforreporting errorsandabnormal conditions."
10484,"Ithasonlyone
messagetype,thealertmessage, thatdescribes theproblemanditslevel(warning orfatal)."
10485,"RecordProtocol
TheRecordProtocol carriesmessages fromtheupperlayer(Handshake Protocol,
ChangeCipherSpec Protocol, AlertProtocol, orapplication layer).Themessageisfrag­
mentedandoptionally compressed; aMACisaddedtothecompressed message by
usingthenegotiated hashalgorithm."
10486,"Thecompressed fragment andtheMACare
encrypted byusingthenegotiated encryption algorithm."
10487,"Finally,theSSLheaderis
addedtotheencrypted message."
10488,"Figure32.18showsthisprocessatthesender.The
processatthereceiverisreversed."
10489,"Transport LayerSecurity
Transport LayerSecurity (TLS)istheIETFstandard versionofSSL.Thetwoare
verysimilar,withslightdifferences."
10490,"Wehighlight thedifferences below:
oVersion."
10491,"TheSSLv3.0 discussed inthissectioniscompatible withTLSv1.0.
oCipherSuite.TLSciphersuitedoesnotsupportFortezza."
10492,"oCryptography Secret.Thereareseveraldifferences inthegeneration ofcrypto­
graphicsecrets.TLSusesapseudorandom function (PRF)tocreatethemaster
keyandthekeymaterials.1014 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
Figure32.18Processing donebytheRecordProtocol
SSLHeaderAuthentication keyConstant
COmpIeS&edl,;Fi-agroent ~d
'JCompressionr'IPayloadfromupper-layer protocol
---~i"""""";""""""';--""""""
: I
'JEncryptionG--Encryption key
, ""r'..Encrypted fragment' .')
~'..SSLpayload ..~
a.Process b.PacketCompressed fragment
oAlertProtocol."
10493,TLSdeletessomealertmessages andaddssomenewones.
10494,oHandshake Protocol.
10495,Thedetailsofsomemessages havebeenchanged inTLS.
10496,oRecordProtocol.
10497,"InsteadofusingMAC,TLSusestheHMACasdefinedin
Chapter31."
10498,"32.3PGP
Oneoftheprotocols toprovidesecurityattheapplication layerisPrettyGoodPrivacy
(PGP).PGPisdesigned tocreateauthenticated andconfidential e-mails.Figure32.19
showsthepositionofPGPintheTCP/IPprotocol suite."
10499,"Figure32.19PositionofPGPintheTCPlIPprotocol suite
IUDP,TCP.orSCTP _____ -01IApplications (e-mail)I
IPGPisdesigned
toprovidesecurity
attheapplication layer."
10500,I IP .....
10501,"Underlying physicalnetworksSECTION 32.3PGP 1015
Sending ane-mailisaone-time activity.Thenatureofthisactivityisdifferent
fromthosewehaveseenintheprevious twosections."
10502,"InIPSecorSSL,weassumethat
thetwopartiescreateasessionbetween themselves andexchange datainbothdirec­
tions.Ine-mail,there isnosession.AliceandBobcannotcreateasession.Alicesends
amessage toBob;sometime later,Bobreadsthemessage andmayormaynotsenda
reply.Wediscussthesecurityofaunidirectional message becausewhatAlicesendsto
Bobistotallyindependent ofwhatBobsendstoAlice."
10503,"Security Parameters
Ife-mailisaone-time activity,howcanthesenderandreceiveragreeonthesecurity
parameters tousefore-mailsecurity?"
10504,"Ifthereisnosessionandnohandshaking to
negotiate thealgorithms forencryption andauthentication, howcanthereceiverknow
whichalgorithm thesenderhaschosenforeachpurpose?"
10505,"Howcanthereceiverknow
thevaluesofthekeysusedforencryption andauthentication?"
10506,"PhilZimmerman, thedesignerandcreatorofPGP,hasfoundaveryelegantsolution
totheabovequestions."
10507,Thesecurityparameters needtobesentwiththemessage.
10508,"InPGP,thesenderofthemessage needstoincludetheidentifiers ofthe
algorithms usedinthemessage aswellasthevaluesofthekeys."
10509,"Services
PGPcanprovideseveralservicesbasedontherequirements oftheuser.Ane-mailcan
useoneormoreoftheseservices."
10510,"Plaintext
Thesimplest caseistosendthee-mailmessage inplaintext (noservice)."
10511,"Alice,the
sender,composes amessage andsendsittoBob,thereceiver."
10512,"Themessage isstoredin
Bob'smailboxuntilitisretrieved byhim."
10513,"Message Authentication
Probably thenextimprovement istoletAlicesignthemessage."
10514,"Alicecreatesadigest
ofthemessage andsignsitwithherprivatekey.WhenBobreceivesthemessage, he
verifiesthemessage byusingAlice'spublickey.Twokeysareneededforthisscenario."
10515,Aliceneedstoknowherprivatekey;BobneedstoknowAlice'spublickey.
10516,"Compression
Afurtherimprovement istocompress themessage anddigesttomakethepacketmore
compact."
10517,"Thisimprovement hasnosecuritybenefit,butiteasesthetraffic."
10518,"Confidentiality withOne·TimeSessionKey
Aswediscussed before,confidentiality inane-mailsystemcanbeachieved byusing
conventional encryption withaone-time sessionkey.Alicecancreateasessionkey,use
thesessionkeytoencryptthemessage andthedigest,andsendthekeyitselfwiththe
message."
10519,"However, toprotectthesessionkey,AliceencryptsitwithBob'spublickey.1016 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PGP,VPN,ANDFIREWALLS
CodeConversion
Anotherserviceprovided byPGPiscodeconversion."
10520,"Moste-mailsystemsallowthe
message toconsistofonlyASCIIcharacters."
10521,"Totranslate othercharacters notinthe
ASCIIset,PGPusesRadix64conversion."
10522,"Eachcharacter tobesent(afterencryption)
isconverted toRadix64code."
10523,"Segmentation
PGPallowssegmentation ofthemessage afterithasbeenconverted toRadix64to
makeeachtransmitted unittheuniformsizeallowedbytheunderlying e-mailprotocoL
AScenario
Letusdescribe ascenario thatcombines someoftheseservices, authentication and
confidentiality."
10524,"ThewholeideaofPGPisbasedontheassumption thatagroupofpeople
whoneedtoexchange e-mailmessages trustoneanother.Everyone inthegroupsome­
howknows(withadegreeoftrust)thepublickeyofanyotherpersoninthegroup."
10525,"Basedonthissingleassumption, Figure32.20showsasimplescenario inwhichan
authenticated andencrypted message issentfromAlicetoBob."
10526,"Figure32.20Ascenario inwhichane-mailmessage isauthenticated andencrypted
Alice'sBob's
privatepublic
j
Alice
r---Bob'sAlice's
privatepublic
j
Bob
PGPmessage
PGP
header
PAl+
PAl:Public-key algorithm 1(forencrypting sessionkey)
PA2:PubliC-key algorithm (forencrypting thedigest)
.SA:Symmetric-key algorithm identification (forencrypting message anddigest)
HA:Hashalgorithm identification (forcreatingdigest)
SenderSite
Thefollowing showsthestepsusedinthisscenarioatAlice'ssite:
1.Alicecreatesasessionkey(forsymmetric encryption/decryption) andconcatenates
itwiththeidentityofthealgorithm whichwillusethiskey.TheresultisencryptedSECTION 32.3PGP 1017
withBob'spublickey.Aliceaddstheidentification ofthepublic-key algorithm
usedabovetotheencrypted result.Thispartofthemessage containsthreepieces
ofinformation: thesessionkey,thesymmetric encryption/decryption algorithm to
beusedlater,andtheasymmetric encryption/decryption algorithm thatwasused
forthispart."
10527,2.
10528,"a.Aliceauthenticates themessage (e-mail)byusingapublic-key signature algo­
rithmandencrypts itwithherprivatekey.Theresultiscalledthesignature."
10529,"Aliceappendstheidentification ofthepublickey(usedforencryption) aswell
astheidentification ofthehashalgorithm (usedforauthentication) tothesigna­
ture.Thispartofthemessage contains thesignature andtwoextrapiecesof
information: theencryption algorithm andthehashalgorithm."
10530,"b.Aliceconcatenates thethreepiecesofinformation createdabovewiththemessage
(e-mail)andencryptsthewholething,usingthesessionkeycreatedinstep1."
10531,"3.Alicecombines theresultsofsteps1and 2andsendsthemtoBob(afteraddingtue
appropriate PGPheader)."
10532,"Receiver Site
Thefollowing showsthestepsusedinthisscenarioatBob'ssideafterhehasreceived
thePGPpacket:
1.Bobuseshisprivatekeytodecryptthecombination ofthesessionkeyand
symmetric-key algorithm identification."
10533,"2.Bobusesthesessionkeyandthealgorithm obtained instep1todecrypttherestof
thePGPmessage."
10534,"Bobnowhasthecontentofthemessage, theidentification ofthe
publicalgorithm usedforcreatingandencrypting thesignature, andtheidentifica­
tionofthehashalgorithm usedtocreatethehashoutofthemessage."
10535,3.BobusesAlice'spublickeyandthealgorithm definedbyPA2todecryptthedigest.
10536,"4.Bob uses thehashalgorithm definedbyHAtocreateahashoutofmessage he
obtained instep2."
10537,"5.Bobcompares thehashcreatedinstep4andthehashhedecrypted instep3.Ifthe
twoareidentical, heacceptsthemessage; otherwise, hediscardsthemessage."
10538,"PGPAlgorithms
Table32.4showssomeofthealgorithms usedinPOP.Thelistisnotcomplete; new
algorithms arecontinuously added."
10539,"Table32.4
Algorithm ID Description
Publickey 1RSA(encryption orsigning)
2RSA(forencryption only)
3RSA(forsigningonly)
17DSS(forsigning)1018 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSLfTLS, PGP,VPN,ANDFIREWALLS
Table32.4(continued)
Algorithm ID Description
Hashalgorithm 1MD5
2SHA-l
3RIPE-MD
Encryption 0Noencryption
1IDEA
2TripleDES
9AES
KeyRings
Intheprevious scenarios, weassumedthatAliceneededtosendamessagetoonlyBob."
10540,"Thatisnotalwaysthecase.Alicemayneedtosendmessages tomanypeople.Inthis
case,Aliceneedsakeyringofpublickeys,withakeybelonging toeachpersonwith
whomAliceneedstocorrespond (sendorreceivemessages)."
10541,"Inaddition, thePGP
designers specified aringofprivate/public keys.OnereasonisthatAlicemaywishto
changeherpairofkeysfromtimetotime.Another reason isthatAlicemayneedto
correspond withdifferent groupsofpeople(friends,colleagues, andsoon).Alicemay
wishtouseadifferent keypairforeachgroup.Therefore, eachuserneedstohave
twosetsofrings:aringofprivate/public keysandaringofpublickeysofotherpeople."
10542,"Figure32.21showsacommunity offourpeople,eachhavingaringofpairsofprivate/
publickeysand,atthesametime,aringoffourpublickeysbelonging totheotherfour
peopleinthecommunity."
10543,"Thefigureshowssevenpublickeysforeachpublicring.Each
personintheringcankeepmorethanonepublickeyforeachotherperson."
10544,"Figure32.21Rings
Alice'srings Bob'srings
A
*~
John'sringsSECTION 32.3PGP 1019
Alice,forexample, hasseveralpairsofprivate/public keysbelonging toherand
publickeysbelonging tootherpeople.Notethateveryone canhavemorethanonepublic
key.Twocasesmayarise."
10545,1.Aliceneedstosendamessage tooneofthepersonsinthecommunity.
10546,a.Sheusesherprivatekeytosignthedigest.
10547,b.Sheusesthereceiver's publickeytoencryptanewlycreatedsessionkey.
10548,c.Sheencrypts themessage andsignsthedigestwiththesessionkeycreated.
10549,2.Alicereceivesamessage fromoneofthepersonsinthecommunity.
10550,a.Sheusesherprivatekeytodecryptthesessionkey.
10551,b.Sheusesthesessionkeytodecryptthemessage anddigest.
10552,c.Sheusesherpublickeytoverifythe digest.
10553,"PGPCertificates
Totrusttheownerofthepublickey,eachuserinthePGPgroupneedstohave,implicitly
orexplicitly, acopyofthecertificate ofthepublic-key owner.Although thecertificate
cancomefromacertificate authority (CA),thisrestriction isnotrequired inPGP.PGP
hasitsowncertificate system."
10554,"Protocols thatuseX509certificates dependonthehierarchical structure ofthe
trust.Thereisapredefined chainoftrustfromtheroottoanycertificate."
10555,"Everyuser
fullytruststheauthority oftheCAattherootlevel(prerequisite)."
10556,"Therootissuescertif­
icatesfortheCAsatthesecondlevel,asecond-level CAissuesacertificate forthe
thirdlevel,andsoon.Everypartythatneedstobetrustedpresents acertificate from
someCAinthetree.IfAlicedoesnottrustthecertificate issuerforBob,shecanappeal
toahigher-level authority uptotheroot(whichmustbetrustedforthesystemtowork)."
10557,"Inotherwords,thereisonesinglepathfromafullytrustedCAtoacertificate."
10558,"InPGP,thereisnoneedforCAs;anyoneintheringcansignacertificate forany­
oneelseinthering.Bobcansignacertificate forTed,John,Anne,andsoon.Thereis
nohierarchy oftrustinPGP;thereisnotree.Asaresultofthelackofhierarchical
structure, Tedmayhaveonecertificate fromBobandanothercertificate fromLiz.If
Alicewantstofollowthelineofcertificates forTed,ithastwopaths:onestartsfrom
BobandtheotherstartsfromLiz.Aninteresting pointisthatAlicemayfullytrustBob,
butonlypartially trustLiz.Therecanbemultiple paths inthelineoftrustfromafully
orpartially trustedauthority toacertificate."
10559,"InPGP,theissuerofacertificate isusually
calledanintroducer."
10560,"InPGP,therecanbemultiplepathsfromrunyor
partiallytrustedauthorities toanysubject."
10561,"TrustsandLegitimacy
Theentireoperation ofPGPisbasedonintroducer trust,thecertificate trust,andthe
legitimacy ofthepublickeys."
10562,"Introducer TrustLevels Withthelackofacentralauthority, itisobviousthatthering
cannotbeverylargeifeveryuserinthePGPringofusershastofullytrusteveryone else.1020 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PGP,VPN,ANDFIREWALLS
(Eveninreallifewecannotfullytrusteveryone thatweknow.)Tosolvethisproblem,
PGPallowsdifferent levelsoftrust.Thenumberoflevelsismostlyimplementation­
dependent, butforsimplicity, letusassignthreelevelsoftrusttoanyintroducer: none,
partial,andfull.Theintroducer trustlevelspecifiesthetrustlevelsissuedbytheintro­
ducerforotherpeopleinthering.Forexample, AlicemayfullytrustBob,partiallytrust
Anne,andnottrustJohnatalLThereisnomechanism inPGPtodetermine howtomake
adecisionaboutthetrustworthiness oftheintroducer; itisuptotheusertomakethis
decision."
10563,"Certificate TrustLevels When Alicereceivesacertificate fromanintroducer, she
storesthecertificate underthenameofthesubject(certified entity).Sheassigns a level
oftrusttothiscertificate."
10564,"Thecertificate trustlevelisnormally thesameastheintro­
ducertrustlevelthatissuedthecertificate."
10565,"AssumeAlicefullytrustsBob,partially
trustsAnneandJanette,andhasnotrustin John.Thefollowing scenarios canhappen."
10566,"1.Bobissuestwocertificates, oneforLinda(withpublickeyK1)andoneforLesley
(withpublickeyK2).Alicestoresthepublickeyandcertificate forLindaunder
Linda'snameandassignsafullleveloftrusttothiscertificate."
10567,"Alicealsostoresthe
certificate andpublickeyforLesleyunderLesley'snameandassignsafulllevelof
trusttothiscertificate."
10568,"2.Anneissuesacertificate forJohn(withpublickeyK3).Alicestoresthiscertificate
andpublickeyunderJohn'sname,butassignsapartiallevelforthiscertificate."
10569,"3.Janetteissuestwocertificates, oneforJohn(withpublickeyK3)andoneforLee
(withpublickeyK4).AlicestoresJohn'scertificate underhisnameandLee'scer­
tificateunderhisname,eachwithapartialleveloftrust.NotethatJohnnowhas
twocertificates, onefromAnneandonefromJanette,eachwithapartiallevel
oftrust."
10570,"4.Johnissuesacertificate forLiz.Alicecandiscardorkeepthiscertificate witha
signature trustofnone."
10571,"KeyLegitimacy Thepurposeofusingintroducer andcertificate trustsistodeter­
minethelegitimacy ofapublickey.Aliceneedstoknowhowlegitimate arethepublic
keysofBob,John,Liz,Anne,andsoon.PGPdefinesaveryclearprocedure fordeter­
miningkeylegitimacy."
10572,"Thelevelofthekeylegitimacy forauseristheweighted trust
l~velofthatuser.Forexample, supposeweassignthefollowing weightstocertificate
trustlevels:
1.Aweightof0toanontrusted certificate
2.Aweightof~toacertificate withpartialtrust
3.Aweightof1toacertificate withfulltrust
Thentofullytrustanentity,Aliceneedsonefullytrustedcertificate ortwopartially
trustedcertificates forthatentity.Forexample, AlicecanuseJohn'spublickeyinthe
previous scenario becausebothAnneandJanettehaveissuedacertificate forJohn,
eachwithacertificate trustlevelof!.Notethatthelegitimacy ofapublickeybelonging2toanentitydoesnothaveanything todowiththetrustlevelofthatperson.Although
BobcanuseJohn'spublickeytosendamessagetohim,Alicecannotacceptanycertif­
icateissuedbyJohnbecause,forAlice,Johnhasatrustlevelofnone.SECTION 32.4FIREWALLS 1021
StartingtheRing
Youmighthaverealizedaproblemwiththeabovediscussion."
10573,"Whatifnobodysendsa
certificate forafullyorpartially trustedentity?Forexample, howcanthelegitimacy
ofBob'spublickeybedetermined ifnoonehassentacertificate forBob?InPGP,the
keylegitimacy ofatrustedorpartiallytrustedentitycanbealsodetermined byother
methods."
10574,"1.Alicecanphysically obtainBob'spublickey.Forexample, AliceandBobcanmeet
personally andexchange apublickeywrittenonapieceofpaperortoadisk."
10575,"2.IfBob'svoiceisrecognizable toAlice,Alicecancallhimandobtainhispublickey
onthephone."
10576,"3.Abettersolutionproposed byPGPisforBobtosendhispublickeytoAliceby
e-mail.BothAliceandBobmakea16-byteMD5(or20-byteSHA-l)digest
fromthekey.Thedigestisnormally displayed aseightgroupsoffourdigits(or
10groupsoffourdigits)inhexadecimal andiscalledafingerprint."
10577,"Alicecanthen
callBobandverifythefingerprint onthephone.Ifthekeyisalteredorchanged
duringthee-mailtransmission, thetwofingerprints donotmatch.Tomakeiteven
moreconvenient, PGPhascreatedalistofwords,eachrepresenting afour-digit
combination."
10578,"WhenAlicecallsBob,Bobcanpronounce theeightwords(or
10words)forAlice.Thewordsarecarefully chosenbyPGPtoavoidthosesimilar
inpronunciation; forexample, ifswordisinthelist,wordisnot."
10579,"4.InPGP,nothingpreventsAlicefromgettingBob'spublickeyfromaCAinasepa­
rateprocedure."
10580,Shecantheninsertthepublickeyinthepublic-key ring.
10581,"WebofTrust
PGPcaneventually makeaweboftrustbetween agroupofpeople.Ifeachentity
introduces moreentitiestootherentities,thepublic-key ringforeachentitygetslarger
andlargerandentitiesintheringcansendsecuree-mailtooneanother."
10582,"KeyRevocation
Itmaybecomenecessary foranentitytorevokehisorherpublickeyfromthering."
10583,"Thismayhappeniftheownerofthekeyfeelsthatthekeyiscompromised (stolen,for
example) orjusttoooldtobesafe.Torevokeakey,theownercansendarevocation
certificate signedbyherself.Therevocation certificate mustbesignedbytheoldkey
anddisseminated toallthepeopleintheringwhousethatpublickey."
10584,"32.4FIREWALLS
Allprevioussecuritymeasures cannotpreventEvefromsendingaharmfulmessagetoa
system.Tocontrolaccesstoasystem,weneedfirewalls."
10585,"Afirewallisadevice(usuallya
routeroracomputer) installedbetweentheinternalnetworkofanorganization andthe
restoftheInternet.Itisdesigned toforwardsomepacketsandfilter(notforward) others."
10586,"Figure32.22showsafirewall.1022 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
Figure32.22 Firewall
Firewall
Forexample, afirewallmayfilterallincoming packetsdestinedforaspecifichost
oraspecificserversuchasHTTP.Afirewallcanbeusedtodenyaccesstoaspecific
hostoraspecificserviceintheorganization."
10587,Afirewallisusuallyclassified asapacket-filter firewalloraproxy-based firewall.
10588,"Packet-FilterFirewall
Afirewallcanbeusedasapacketfilter.Itcanforwardorblockpacketsbasedonthe
information inthenetwork layerandtransport layerheaders: sourceanddestination
IPaddresses, sourceanddestination portaddresses, andtypeofprotocol(TCPorUDP)."
10589,"Apacket-filter firewallisarouterthatusesafilteringtabletodecidewhichpackets
mustbediscarded (notforwarded)."
10590,"Figure32.23showsanexample ofafilteringtable
forthiskindofafirewall."
10591,"Figure32.23 Packet-filter firewall
Packet-filter
firewall
Toandfrom
globalInternet-----I
InterfaceSource Source Destination Destination
IP porl IP port
131.34.0.0 * * *
* * *23
* *194.78.20.8 *
2 * 80 * *
According toFigure32.23,thefollowing packetsarefiltered:
).Incoming packetsfromnetwork131.34.0.0 areblocked(security precaution)."
10592,"Note
thatthe*(asterisk) means""any.""
2.Incoming packetsdestinedforanyinternalTELNET server(port23)areblocked."
10593,3.Incoming packetsdestinedforinternalhost194.78.20.8 areblocked.
10594,"Theorganiza­
tionwantsthishostforinternaluseonly."
10595,4.Outgoing packetsdestined foranHTfPserver(port80)areblocked.
10596,"Theorgani­
zationdoesnotwantemployees tobrowsetheInternet.SECTION 32.4FlREWALLS 1023
Apackef.filter firewallfiltersatthenetworkortransport layer."
10597,"ProxyFirewall
Thepacket-filter firewallisbasedontheinformation available inthenetworklayerand
transport layerheaders(IPandTCPIUDP)."
10598,"However, sometimes weneedtofiltera
message basedontheinformation available inthemessage itself(attheapplication
layer).Asanexample, assumethatanorganization wantstoimplement thefollowing
policiesregarding itsWebpages:OnlythoseInternetuserswhohavepreviously estab­
lishedbusinessrelations withthecompany canhaveaccess;accesstootherusersmust
beblocked."
10599,"Inthiscase,apacket-filter firewallisnotfeasiblebecauseitcannotdistin­
guishbetweendifferent packetsarrivingatTCPport80(HTTP).Testingmustbedone
attheapplication level(usingURLs)."
10600,"Onesolutionistoinstallaproxycomputer (sometimes calledanapplication gate­
way),whichstandsbetween thecustomer (userclient)computer andthecorporation
computer showninFigure32.24."
10601,"Figure32.24 Proxyfirewall
Errors
HTIPproxy
GlobalInternetAllHTIP
packets
HTIPserverAccepted
packets
Whentheuserclientprocesssendsamessage, theproxyfirewallrunsaserver
processtoreceivetherequest.Theserveropensthepacketattheapplication leveland
findsoutiftherequestislegitimate.Ifitis,theserveractsasaclientprocessandsends
themessagetotherealserverinthecorporation."
10602,"Ifitisnot,themessageisdroppedand
anerrormessage issenttotheexternaluser.Inthisway,therequestsoftheexternal
usersarefilteredbasedonthecontentsattheapplication layer..Figure32.24showsa
proxyfirewallimplementation."
10603,"Aproxyfirewallfiltersattheapplication layer.1024 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUTLS, PGP,VPN,ANDFIREWALLS
32.5RECOMMENDED READING
Formoredetailsaboutsubjectsdiscussed inthischapter,werecommend thefollowing
books.Thebrackets, [...],refertothereference listattheendofthetext."
10604,"Books
IPSecisdiscussed inChapter7of[Rhe03], Section18.1of[PHS03], andChapters 17
and18of[KPS02]."
10605,"Afulldiscussion ofIPSec canbefoundin[DH03].SSLITLS isdis­
cussedinChapter8of[Rhe03], andChapter19of[KPS02]."
10606,"Afulldiscusion ofSSLand
TLScanbefoundin[ResOl]and[ThoOO]."
10607,"PGPisdiscussed inChapter9of[Rhe03], and
Chapter22of[KPS02]."
10608,"Firewalls arediscussed inChapter10of[Rhe03]andChapter23
of[KPS02]."
10609,Firewalls arefullydiscussed in[CBR03].
10610,"Virtualprivatenetworks arefully
discussed in[YSO1]and[SWE99]."
10611,"32.6KEYTERMS
AlertProtocol
Authentication Header(AH)
Protocol
certificate trust
ChangeCipherSpec Protocol
ciphersuite
connection
Encapsulating SecurityPayload
(ESP)
extranet
fingerprint
firewall
Handshake Protocol
hybridnetwork
InternetKeyExchange (IKE)
InternetSecurityAssociation andKey
Management Protocol (lSAKMP)
intranet
introducer
introducer trust
IPSecurity (IPSec)
keylegitimacy
keymaterial
keyringmastersecret
Oakley
packet-filter firewall
premaster secret
PrettyGoodPrivacy(PGP)
privatenetwork
proxyfirewall
pseudorandom function (PRF)
RecordProtocol
replayattack
SecureSocketLayer(SSL)
securityassociation (SA)
securityassociation database
(SADB)
securityparameter index(SPI)
session
SKEME
Transport LayerSecurity
(TLS)
transport mode
tunnelmode
tunneling
virtualprivatenetwork(VPN)
weboftrustSECTION 32.7SUMMARY 1025
32.7SUMMARY
oIPSecurity (IPSec)isacollection ofprotocols designed bytheIETF(Internet
Engineering TaskForce)toprovidesecurityforapacketatthenetworklevel."
10612,oIPSecoperatesinthetransport modeorthetunnelmode.
10613,"oInthetransport mode,IPSecprotectsinformation delivered fromthetransport
layertothenetworklayer.IPSecinthetransport modedoesnotprotecttheIPheader."
10614,"Thetransport modeisnormally usedwhenweneedhost-to-host (end-to-end) pro­
tectionofdata."
10615,"oInthetunnelmode,IPSecprotectsthewholeIPpacket,including theoriginalIP
header."
10616,"oIPSecdefinestwoprotocols-Authentication Header(AH)Protocol andEncapsu­
latingSecurity Payload(ESP)Protocol-to provideauthentication orencryption
orbothforpacketsattheIPlevel."
10617,"oIPSecrequiresalogicalrelationship betweentwohostscalledasecurityassociation
(SA).IPSecusesasetofSAscalledthesecurityassociation database orSADB."
10618,"oTheInternetKeyExchange (IKE)istheprotocoldesigned tocreatesecurityasso­
ciations,bothinboundandoutbound."
10619,IKEcreatesSAsforIPSec.
10620,"[lIKEisacomplex protocol basedonthreeotherprotocols: Oakley,SKEME, and
ISAKMP."
10621,oAprivatenetworkisusedinsideanorganization.
10622,"oAnintranetisaprivatenetwork thatusestheInternetmodel.Anextranetisan
intranetthatallowsauthorized accessfromoutsideusers."
10623,oTheInternetauthorities havereserved addresses forprivatenetworks.
10624,"[]Avirtualprivatenetwork(VPN)provides privacyforLANsthatmustcommunicate
throughtheglobalInternet."
10625,"oAtransport layersecurityprotocolprovides end-to-end securityservicesforappli­
cationsthatusetheservicesofareliabletransport layerprotocolsuchasTCP."
10626,"oTwoprotocols aredominant todayforproviding securityatthetransport layer:
SecureSocketsLayer(SSL)andTransport LayerSecurity (TLS).Thesecondis
actuallyanIETFversionofthefirst."
10627,"oSSLisdesigned toprovidesecurityandcompression services todatagenerated
fromtheapplication layer.Typically, SSLcanreceiveapplication datafromany
application layerprotocol, buttheprotocolisnormally HTTP."
10628,"ClSSLprovides servicessuchasfragmentation, compression, messageintegrity, con­
fidentiality, andframingondatareceivedfromtheapplication layer."
10629,"oThecombination ofkeyexchange, hash,andencryption algorithms definesacipher
suiteforeachSSLsession.Thenameofeachsuiteisdescriptive ofthecombination."
10630,"UIne-mail,thecryptographic algorithms andsecretsaresentwiththemessage."
10631,"DOnesecurityprotocol forthee-mailsystemisPrettyGoodPrivacy(PGP).PGP
wasinvented byPhilZimmerman toprovideprivacy,integrity, andauthentication
ine-mail.1026 CHAPTER 32SECURITY INTHEINTERNET: IPSec,SSUFLS, PGP,VPN,ANDFIREWALLS
oToexchange e-mailmessages, auserneedsaringofpublickeys;onepublickeyis
neededforeache-mailcorrespondent."
10632,"oPOPhasalsospecified aringofprivate/public keypairstoallowausertochange
herpairofkeysfromtimetotime.POPalsoallowseachusertohavedifferent user
IDs(e-mailaddresses) fordifferent groupsofpeople."
10633,"oPOPcertification isdifferent fromX509.InX509,thereisasinglepathfromthe
fullytrustedauthority toanycertificate."
10634,"InPOP,therecanbemultiple pathsfrom
fullyorpartially trustedauthorities."
10635,opapusestheideaofcertificate trustlevels.
10636,"oWhenauserreceives acertificate fromanintroducer, itstoresthecertificate under
thenameofthesubject(certified entity).Itassignsaleveloftrusttothiscertificate."
10637,"32.8PRACTICE SET
ReviewQuestions
1.WhydoesIPSecneedasecurityassociation?"
10638,2.HowdoesIPSeccreateasetofsecurityparameters?
10639,3.Whatarethetwoprotocols definedbyIPSec?
10640,4.WhatdoesAHaddtotheIPpacket?
10641,5.WhatdoesESPaddtotheIPpacket?
10642,6.ArebothAHandESPneededforIPsecurity?
10643,Whyorwhynot?
10644,"7.Whatarethetwoprotocols discussed inthischapterthatprovidesecurity atthe
transport layer?"
10645,8.WhatisIKE?
10646,9.Whatisthedifference between asessionandaconnection inSSL?
10647,10.HowdoesSSLcreateasetofsecurityparameters?
10648,"11.Whatisthenameoftheprotocol, discussed inthischapter,thatprovides security
fore-mail?"
10649,12.HowdoesPGPcreateasetofsecurityparameters?
10650,13.WhatisthepurposeoftheHandshake Protocol inSSL?
10651,14.WhatisthepurposeoftheRecordProtocol inSSL?
10652,15.Whatisthepurposeofafirewall?
10653,16.Whatarethetwotypesoffirewalls?
10654,17.WhatisaVPNandwhyisitneeded?
10655,18.HowdoLANsonafullyprivateinternetcommunicate?
10656,"Exercises
19.ShowthevaluesoftheAHfieldsinFigure32.6.Assume thereare128bitsof
authentication data."
10657,"20.ShowthevaluesoftheESPheaderandtrailerfieldsinFigure32.7.SECTION 32.8PRACTICE SET 1027
21.RedrawFigure32.6ifAHisusedintunnelmode."
10658,22.RedrawFigure32.7ifESPisusedintunnelmode.
10659,23.DrawafiguretoshowthepositionofAHinIPv6.
10660,24.DrawafiguretoshowthepositionofESPinIPv6.
10661,25.DoestheIPSecProtocol needtheservicesofaKDC?Explainyouranswer.
10662,26.DoestheIPSecProtocol needtheservicesofaCA?Explainyouranswer.
10663,27.DoestheSSLProtocol needtheservicesofaKDC?Explainyouranswer.
10664,28.DoestheSSLProtocol needtheservicesofaCA?Explainyouranswer.
10665,29.DoesthePGPProtocol needtheservicesofaKDC?Explainyouranswer.
10666,30.DoesthepapProtocol needtheservicesofaCA?Explainyouranswer.
10667,31.ArethereanyciphersuitesinIPSec?Explainyouranswer.
10668,"32.ArethereanyciphersuitesinPGP?Explainyouranswer.APPENDIX A
Unicode
Computers usenumbers."
10669,"Theystorecharacters byassigning anumberforeachone.The
originalcodingsystemwascalledASCII(American Standard CodeforInformation
Interchange) andhad128numbers (0to127)eachstoredasa7-bitnumber.ASCIIcould
satisfactorily handlelowercase anduppercase letters,digits,punctuation characters, and
somecontrolcharacters."
10670,AnattemptwasmadetoextendtheASCIIcharacter setto8bits.
10671,"Thenewcode,whichwascalledExtended ASCII,wasneverinternationally standardized."
10672,"Toovercome thedifficulties inherentinASCIIandExtended ASCII,theUnicode
Consortium (agroupofmultilingual software manufacturers) createdauniversal
encoding systemtoprovideacomprehensive character setcalledUnicode."
10673,"Unicode wasoriginally a2-bytecharacter set.Unicode version3,however, isa
4-bytecodeandisfullycompatible withASCIIandExtended ASCII.TheASCIIset,
whichisnowcalledBasicLatin,isUnicodewith theupper25bitssettozero.Extended
ASCII,whichisnowcalledLatin-I,isUnicode withthe24upperbitssettozero.Fig­
ureA.Ishowshowthedifferent systemsarecompatible."
10674,"FigureA.lUnicode compatibility
""Extended ASCIII
1-.-1• D_e_fin_in_g_p_lan_e_s __ -+I'I 1•ASCII :
1__8_b_its_---..JII__8_b_its_---..J1 ~=,*f.,.."",~c;...,....*M""""""""'~~=~i'.."".,~""""""""'~l ~;Ji~~j~]j*ii£:~'-l
I, Unicode .j
A.IUNICODE
Theprevalent codetodayisUnicode."
10675,"Eachcharacter orsymbolinthiscodeisdefined
bya32-bitnumber.Thecodecandefineupto232(4,294,967,296) characters orsym­
bols.Thenotationuseshexadecimal digitsinthefollowing format:
10291030 APPENDIX AUNICODE
EachXisahexadecimal digit.Therefore, thenumbering goesfromU-OOOOOOOO to
U-FFFFFFFF."
10676,"Planes
Unicode dividestheavailable spacecodesintoplanes.Themostsignificant 16bits
definetheplane,whichmeanswecanhave65,535planes.Eachplanecandefineupto
65,536character orsymbols."
10677,"FigureA.2showsthestructure ofUnicode spacesand
planes."
10678,"FigureA.2Unicodeplanes
o ~M{'tjoa a aa a a aa a a aReserved
§i§g:;~=88888Reserved
Plane0000:BasicMultilingual Plane(BMP)
Plane0001:Supplementary Multilingual Plane(SMP)
Plane0002:Supplementary Ideographic Plane(SIP)PlaneOOOE:Supplementary SpecialPlane(SSP)
PlaneOOOF:PrivateUsePlane(PUP)
Plane0010:PrivateUsePlane(PUP)
BasicMultilingual Plane(BMP)
Plane0000,thebasicmultilingual plane(BMP),isdesigned tobecompatible withthe
previous 16-bitUnicode."
10679,"Themostsignificant 16bitsinthisplaneareallzeros.Thecodes
arenormally shownasU+XXXX withtheunderstanding thatXXXXdefinesonlythe
leastsignificant 16bits.Thisplanemostlydefinescharacter setsindifferent languages
withtheexception ofsomecodesusedforcontrolorotherspecialcharacters."
10680,"TableA.I
showsthemainclassification ofcodesinplane0000."
10681,"TableA.IUnicodeBMP
Range Description,
A-Zone(Alphabetical Characters andSymbols)
U+OOOO toU+OOFF BasicLatinandLatin-l
U+OIOOtoU+OIFF Latinextended
U+0200 toU+02FF IPAextension, andspacemodifier letters
U+0300toU+03FF Combining diacritical marks,Greek
U+0400 toU+04FF Cyrillic
U+0500toU+05FF Armenian, Hebrew
U+0600toU+06FF ArabicTableA.IUnicodeBMP(continued)APPENDIX AUNICODE 1031
Range Description
U+0700toU+08FF Reserved
U+0900toU+09FF Devanagari, Bengali
U+OAOO toU+OAFF Gumukhi, Gujarati
U+OBOO toU+OBFF Oriya,Tamil
U+OCOO toU+OCFF Telugu,Kannda
U+ODOO toU+ODFF Malayalam
U+OEOO toU+OEFF Thai,Lao
U+OFOO toU+OFFF Reserved
U+1000toU+lOFF Georgian
U+1100 toU+llFF HangulJamo
U+1200 toU+1DFF Reserved
U+IEOO toU+1EFF Latinextended additional
U+1FOO toU+1FFF Greekextended
U+2000toU+20FF Punctuation, sub/superscripts, currency, marks
U+2100toU+21FF Letterlike symbols, numberforms,arrows
U+2200toU+22FF Mathematical operations
U+2300 toU+23FF Miscellaneous technical symbols
U+2400toU+24FF Controlpictures, OCR,andenclosed alphanumeric
U+2500toU+25FF Boxdrawing, blockdrawing, andgeometric shapes
U+2600toU+26FF Miscellaneous symbols
U+2700toU+27FF Dingbats andBraillepatterns
U+2800toU+2FFF Reserved
U+3000toU+30FF CJKsymbols andpunctuation, hiragana, katakana
U+3100toU+31FF Bopornfo, hanguljambo,cjkmiscellaneous
U+3200toU+32FF Enclosed CJKlettersandmonths
U+3300toU+33FF CJKcompatibility
U+3400toU+4DFF Hangul
I-Zone(Ideographic Characters)
U+4EOO toU+9FFF CJKunifiedideographic
O-Zone(Open)
U+AOOO toU+DFFF Reserved
R·Zone(Restricted Use)
U+EOOO toU+F8FF Privateuse
U+F900 toU+FAFF CJKcompatibility ideographs
U+FBOO toU+FBFF Arabicpresentation form-A1032 APPENDIX AUNICODE
TableA.IUnicodeBMP(continued)
Range DescriptionI
I
U+FCOO toU+FDFF Arabicpresentation form-B
U+FEOO toU+FEFF Halfmarks,smallforms
U+FFOOtoU+FFFF Half-width andfull-width forms I
I
Supplementary Multilingual Plane(SMP)
Plane0001,thesupplementary multilingual plane(SMP),isdesigned toprovidemore
codesforthosemultilingual characters thatarenotincluded intheBMP."
10682,"Supplementary Ideographic Plane(SIP)
Plane0002,thesupplementary ideographic plane(SIP),isdesigned toprovidecodesfor
ideographic symbols, symbolsthatprimarily denoteanidea(ormeaning) incontrasttoa
sound(orpronunciation)."
10683,"Supplementary SpecialPlane(SSP)
PlaneOOOE,thesupplementary specialplane(SSP),isusedforspecialcharacters."
10684,"PrivateUsePlanes(PUPs)
PlanesOOOFand0010,privateuseplanes(PUPs),areforprivateuse."
10685,"A.2ASCII
TheAmerican Standard CodeforInformation Interchange (ASCII)isa7-bitcodethat
wasdesigned toprovidecodefor128symbols, mostlyinAmerican English."
10686,"Today,
ASCII,orBasicLatin,ispartofUnicode.Itoccupies thefirst128codesinUnicode
(00000000 to0000007F)."
10687,"TableA.2contains thedecimal, hexadecimal, andgraphic
codes(symbols) withanEnglishinterpretation, ifappropriate."
10688,"Thecodesinhexadecimal
justdefinethetwoleastsignificant digitsinUnicode."
10689,"Tofindtheactualcode,weprepend
000000inhexadecimal tothecode.Thedecimalcodeisjusttoshowtheintegervalue
ofeachsymbolwhenconverted."
10690,"TableA.2ASCIICodes
Decimal Hex Symbol Interpretation
0 00 null Nullvalue
1 01 SOH Startofheading
2 02 STX Startoftext
3 03 ETX Endoftext
4 04 EaT EndoftransmissionTableA.2ASCIICodes(continued)APPENDIX AUN/CODE 1033
Decimal Hex Symbol Interpretation
5 05 ENQ Enquiry
6 06 ACK Acknowledgment
7 07 BEL Ringbell
8 08 BS Backspace
9 09 HT Horizontal tab
10 OA LF Linefeed
11 OB VT Verticaltab
12 OC FF Fonnfeed
13 OD CR Carriage return
14 OE SO Shiftout
15 OF SI Shiftin
16 10 DLE Datalinkescape
17 11 DC1 Devicecontrol1
18 12 DC2 Devicecontrol2
19 13 DC3 Devicecontrol3
20 14 DC4 Devicecontrol4
21 15 NAK Negative acknowledgment
22 16 SYN Synchronous idle
23 17 ETB Endoftransmission block
24 18 CAN Cancel
25 19 EM Endofmedium
26 1A SUB Substitute
27 lB ESC Escape
28 1C FS Fileseparator
29 10 GS Groupseparator
30 IE RS Recordseparator
31 IF US Unitseparator
32 20 SP Space
33 21 !
34 22nDoublequote
35 23 #
36 24 $
37 25 %
38 26 &
39 27,Apostrophe1034 APPENDIX AUNICODE
TableA.2ASCIICodes(continued)
Decimal Hex Symbol InterpretationI
40 28 (
41 29 )
42 2A*
43 2B +
44 2C , Comma
45 2D - Minus
46 2E
47 2F /
48 30 0
49 31 1
50 32 2
51 33 3
52 34 4
53 35 5
54 36 6
55 37 7
56 38 8
57 39 9
58 3A Colon
59 3B , Semicolon
60 3C<
61 3D=
62 3E>
63 3F ?"
10691,"64 40 @
65 41 A
66 42 B
67 43 C
68 44 D
69 45 E
70 46 F
71 47 G
72 48 H
73 49 I
74 4A JTableA.2ASCIICodes(continued)APPENDIX AUNICODE 1035
Decimal Hex Symbol Interpretation
75 4B K
76 4C L
77 4D M
78 4E N
79 4F 0
80 50 P
81 51Q_."
10692,".f------ ...'--_.-_..-""
82 52 R
83 53 S
84 54 T
85 55 U
86 56 V
87 57 W
88 58 X
89 59 y
90 5A Z
91 5B [ Openbracket
92 5C \ Backs1ash
93 5D ] Closebracket
94 5EA Caret
95 5F-Underscore
96 60,Graveaccent
97 61 a
98 62 b
99 63 c
100 64 d
101 65 e
102 66 f
103 67 g
104 68 h
105 69 i
106 6A J
107 6B k
108 6C 1
109 6D m1036 APPENDIX AUNICODE
TableA.2ASCIICodes(continued)
Decimal Hex Symbol Interpretation
110 6E n
111 6F 0
112 70 p
113 71 q
114 72 r
115 73 s
116 74 t
117 75 u
118 76 v
119 77 w
120 78 x
121 79 y
122 7A z
123 7B { Openbrace
124 7C I Bar
125 7D } Closebrace
126 7E- Tilde
127 7F DEL Delete
SOllIeProperties ofASCII
ASCIIhas some interesting properties thatwebrieflymentionhere."
10693,"I.Thefirstcode(0)isthenullcharacter, whichmeansthelackofanycharacter."
10694,"2.Thefirst32codes,0to31,arecontrolcharacters."
10695,"3.Thespacecharacter, whichisaprintable character, isatposition32."
10696,"4.Theuppercase lettersstartfrom65(A).Thelowercase lettersstartfrom97.When
compared, uppercase lettersarenumerically smallerthanlowercase letters.This
meansthatinasortedlistbasedonASCIIvalues,theuppercase lettersappear
beforethelowercase letters."
10697,"5.Theuppercase andlowercase lettersdifferbyonlyonebitinthe7-bitcode.Forexam­
ple,character Ais1000001(Ox4l)andcharacter ais110000I(Ox61).Thedifference
isinbit6,whichis0inuppercase lettersand1inlowercase letters.Ifweknowthe
codeforonecase,wecaneasilyfindthecodefortheotherbyaddingorsubtracting
32indecimal(Ox20inhexadecimal), orwecanjustflipthesixthbit."
10698,"6.Theuppercase lettersarenotimmediately followed bylowercase letters.Thereare
somepunctuation characters inbetween."
10699,"7.Digits(0to9)startfrom48(Ox3).Thismeansthatifyouwanttochangeanumeric
character toitsfacevalueasaninteger,youneedtosubtract48.APPENDIXB
Numbering Systems
Weusedifferent numbering systems:base10(decimal), base2(binary), base8(octal),
base16(hexadecimal), base256,andsoon.Allthenumbering systemsexamined here
arepositional, meaning thatthepositionofasymbolinrelationtoothersymbolsdeter­
minesitsvalue.Eachsymbolinanumberhasaposition."
10700,"Thepositiontraditionally
startsfrom0andgoeston-1,wherenisthenumberofsymbols."
10701,"Forexample, inFig­
ureB.1,thedecimalnumber14,782hasfivesymbolsinpositions 0to4."
10702,"FigureB.lPositions andsymbolsinanumber
Decimal number:14.782
2 3 4___ 4__7_--,--_8_-,--_2_1 Symbols
(JPositions
Aswewillsee,thedifference betweendifferentnumbering systemsisbasedonthe
weightassigned toeachposition."
10703,"B.lBASE10:DECIMAL
Thebase-10ordecimalsystemistheonemostfamiliartousineveryday life.Allour
termsforindicating countable quantities arebasedonit,and,infact,whenwespeakof
othernumbering systems, wetendtorefertotheirquantities bytheirdecimalequiva­
lents.ThetermdecimalisderivedfromtheLatinstemdeci,meaning 10.Thedecimal
systemuses10symbolstorepresent quantitative values:0,1,2,3,4,5,6, 7,8,and9."
10704,"Decimalnumbers use10symbols: 0,1,2,3,4,5,6,7,8, and9."
10705,"10371038 APPENDIX BNUMBERING SYSTEMS
Weights
Inthedecimalsystem,eachweightequals10raisedtothepowerofitsposition."
10706,"The
weightofthesymbolatposition0is100(1);theweightofthesymbolatposition1is
101(10);andsoon."
10707,"B.2BASE2:BINARY
Thebinarynumbersystemprovides thebasisforallcomputer operations."
10708,"Computers
workbyturningelectriccurrentonandoff.Thebinarysystemusestwosymbols, 0and
1,soitcorresponds naturally toatwo-state device,suchasaswitch,with0torepresent
theoffstateand1torepresent theonstate.ThewordbinaryderivesfromtheLatin
stembi,meaning 2."
10709,Binarynumbers usetwosymbols: 0and1.
10710,"Weights
Inthebinarysystem,eachweightequals2raisedtothepowerofitsposition."
10711,"The
weightofthesymbolatposition0is20(1);theweightofthesymbolatposition1is21(2);
andsoon."
10712,"Conversion
Nowletusseehowwecanconvertbinarytodecimalanddecimaltobinary.FigureB.2
showthetwoprocesses."
10713,"FigureB.2Binary-to-decimal anddecimal~to-binary conversion
11001110IBinarynumber
6432168 4 2 1 Weights
64008420Weighted results~
~Decimalnumber
a.Binarytodecimal...l-- Q_uo_ti_en_ts Decimal
I( number
~11100111 0~
Binarynumber
b.Decimal tobinary
Toconvertabinarynumbertodecimal,weusetheweights.Wemultiplyeachsymbol
byitsweightandaddalltheweighted results.FigureB.2showshowwecanchange
binary1001110 toitsdecimalequivalent 78."
10714,"Asimpledivisiontrickgivesusaconvenient waytoconvertadecimalnumberto
itsbinaryequivalent, asshowninFigureB.2.Toconvertanumberfromdecimalto
binary,dividethenumberby2andwritedowntheremainder (lor0).Thatremainder
istheleastsignificant binarydigit.Now,dividethequotientofthatdivisionby2andAPPENDIX BNUMBERING SYSTEMS 1039
writedownthenewremainder inthesecondposition."
10715,"Repeatthisprocessuntilthequo­
tientbecomes zero."
10716,"B.3BASE16:HEXADECIMAL
Anothersystemusedinthistextisbase16.Thetermhexadecimal isderivedfromthe
Greektermhexadec, meaning 16.Thehexadecimal numbersystemisconvenient for
identifying alargebinarynumberinashorterform.Thehexadecimal systemuses
16symbols: 0,1,...,9,A,B,C,D,E,andF.Thehexadecimal systemusesthesame
first10symbols asthedecimalsystem,butinsteadofusing10,11,12,13, 14,and
15,itusesA,B, C,D,E,andF.Thisprevents anyconfusion between twoadjacent
symbols."
10717,"Hexadecimal numbers use16symbols: 0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,andF."
10718,"Weights
Inthehexadecimal system,eachweightequals16raisedtothepowerofitsposition."
10719,"Theweightofthesymbolatposition0is16°(1);theweightofthesymbolatposition1is
161(16);andsoon."
10720,"Conversion
Nowletusseehowwecanconverthexadecimal todecimalanddecimaltohexadecimal."
10721,FigureB.3showthetwoprocesses.
10722,"FigureB.3Hexadecimal-to-decimal anddecimal-to-hexadecimal conversion
QuotientsI3
4,096A
2567
16Decimal
.......f--------- number
Hexadecimal number
a.Hexadecimal todecimal b.Decimal tohexadecimal
Toconvertahexadecimal numbertodecimal, weusetheweights."
10723,"Wemultiply
eachsymbolbyitsweightandaddalltheweighted results.FigureB.3showshow
hexadecimal Ox3A73istransformed toitsdecimalequivalent 14,963."
10724,"Weusethesametrickweusedforchanging decimaltobinarytotransform a
decimaltohexadecimal."
10725,"Theonly difference isthatwedividethenumberby16instead
of2.Thefigurealsoshowshow14,963indecimalisconverted tohexadecimal Ox3A73.1040 APPENDIX BNUMBERING SYSTEMS
AComparison
TableB.lshowshowsystemsrepresent thedecimalnumbers 0through15.Asyoucan
see,decimal13isequivalent tobinary1101,whichisequivalent tohexadecimal D."
10726,"TableB.IComparison ofthreesystems
Decimal Binary Hexadecimal
0 0 0
1 1 1
2 10 2
3 11 3
4 100 4
5 101 5
6 110 6
7 111 7Decimal Binary Hexadecimal
8 1000 8
9 1001 9
10 1010 A
11 1011 B
12 1100 C
13 1101 D
14 1110 E
15 1111 F
B.4BASE256:IPADDRESSES
Onenumbering systemthatisusedintheInternetisbase256.IPv4addresses use this
basetorepresent anaddressindotteddecimalnotation."
10727,"WhenwedefineanIPv4
addressas131.32.7.8, weareusingabase-256 number.Inthisbase,wecouldhave
used256uniquesymbols, butremembering thatmanysymbolsandtheirvaluesisbur­
densome."
10728,"Thedesigners oftheIPv4addressdecidedtousedecimalnumbers 0to255
assymbolsandtodistinguish between thesymbols, adotisused.Thedotisusedto
separatethesymbols; itmarkstheboundary betweenthepositions."
10729,"Forexample, the
IPv4address131.32.7.8 ismadeofthefoursymbols 8,7,32,and131atpositions 0,1,2,
and3,respectively."
10730,IPv4addresses usethebase-256 numbering system.
10731,"Thesymbolsin1Pv4aredecimalnumbers between 0and255;
theseparator isadot."
10732,"Weights
Inbase256,eachweightequals256raisedtothepowerofitsposition."
10733,"Theweightof
thesymbolatposition0is2560(1);theweightofthesymbolatposition 1is2561
(256);andsoon."
10734,"Conversion
Nowletusseehowwecanconverthexadecimal todecimalanddecimaltohexadecimal."
10735,"FigureB.4showthetwoprocesses.APPENDIX BNUMBERING SYSTEMS 1041
FigureB.4IPv4addresstodecimaltransformation
12,215,708,6861 Decimal number__1_3_2 1_7 8 14_1IPv4address
2563256225612560Weights
2,214,592,512 1,114,112 2,048 14Results..Quotients Decimal
~---- number
a.IPaddresstodecimal b.DecimaltoIPaddress
ToconvertanIPv4addresstodecimal,weusetheweights.Wemultiplyeachsymbol
byitsweightandaddalltheweighted results.ThefigureshowshowtheIPv4address
131.32.7.8 istransformed toitsdecimalequivalent."
10736,"Weusethesametrickweusedforchanging decimaltobinarytotransform adecimal
toanIPv4address.Theonlydifference isthatwedividethenumberby256insteadof2."
10737,"However, weneedtoremember thattheIPv4addresshasfourpositions."
10738,"Thismeans
thatwhenwearedealingwithanIPv4address,wemuststopafterwehavefoundfour
values.FigureBAshowsanexample foranIPv4address."
10739,"B.5OTHER CONVERSIONS
Thereareothertransformations suchasbase2tobase16orbase16tobase256.Itis
easytousebase10astheintermediate system.Inotherwords,tochangeanumber
frombinarytohexadecimal wefirstchangethebinarytodecimalandthenchangethe
decimaltohexadecimal."
10740,Wediscusssomeeasymethods forcommon transformations.
10741,"BinaryandHexadecimal
Thereisasimplewaytoconvertbinarytohexadecimal andviceversaasshownin
FigureB.5.
FigureB.5Transformation frombinarytohexadecimal
I10]100011110IBinary~~~
2 8 E Hexadecimal
a.BinarytohexadecimalHexadecimal
Binary'----'---'----------'
b.Hexadecimal tobinary
Tochangeanumberfrombinarytohexadecimal, wegroupthebinarydigitsfrom
therightbyfours.Thenweconverteach4-bitgrouptoitshexadecimal equivalent,1042 APPENDIX BNUMBERING SYSTEMS
usingTableB.1.Inthefigure,weconvertbinary1010001110 tohexadecimal Ox28E."
10742,"Tochangeahexadecimal numbertobinary,weconverteachhexadecimal digittoits
equivalent binarynumber,usingTableB.1,andconcatenate theresults.InFigureB.5
weconverthexadecimal Ox28Etobinary."
10743,"Base256andBinary
Toconvertabase256numbertobinary,wefirstneedtoconvertthenumberineach
position toan8-bitbinarygroupandthenconcatenate thegroups.Toconvertfrom
binarytobase256,weneedtodividethebinarynumberintogroupsof8bits,convert
eachgrouptodecimal, andtheninsertseparators (dots)betweenthedecimalnumbers.APPENDIXC
Mathematical Review
Inthisappendix, wereviewsomemathematical concepts thatmayhelpyoutobetter
understand thetopicscoveredinthebook.Perhapsthemostimportant conceptindata
communications issignalsandtheirrepresentation."
10744,"Westartwithabriefreviewoftrig­
onometric functions, asdiscussed inatypicalprecalculus book.Wethenbrieflydiscuss
Fourieranalysis, whichprovides atoolforthetransformation between thetimeandfre­
quencydomains."
10745,Wefinallygiveabrieftreatment ofexponential andlogarithmic functions.
10746,"C.lTRIGONOMETRIC FUNCTIONS
Letusbrieflydiscusssomecharacteristics ofthetrigonometric functions asusedinthe
book."
10747,"SineWave
Wecanmathematically describeasinewaveas
set)==Asin(21tft) ::::Asin(2;t)
wheresistheinstantaneous amplitude, Aisthepeakamplitude,fisthefrequency, and
Tistheperiod(phasewillbediscussed later).FigureC.lshowsasinewave."
10748,"FigureC.IAsinewave
Time
T
Notethatthevalueof21tfiscalledtheradianfrequency andwrittenas0)(omega),
whichmeansthatasinefunctioncanwrittenasset)=Asin(rot)."
10749,"10431044 APPENDIX CMATHEMATICAL REVIEW
Example C.l
Findthepeakvalue,frequency, andperiodofthefollowing sinewaves."
10750,"a.set)=5sin(10m)
b.set)=sin(lOt)
Solution
a.Peakamplitude: A=5
Frequency: 101t=2rtf,sof=5
Period:T=IIJ=1/5s
b.Peakamplitude: A=1
Frequency: 10=2rtf,sof=1O/(2rt)=1.60
Period:T=IIJ=1/1.60=0.628s
Example C.2
Showthemathematical representation ofasinewavewithapeakamplitude of2andafrequency
of1000Hz.
Solution
Themathematical representation isset)=2sin(20001tt)."
10751,"Horizontal Shifting(Phase)
Allthesinefunctions wediscussed sofarhaveanamplitude ofvalue0attheorigin."
10752,"Whatifweshiftthesignaltotheleftortotheright?FigureC.2showstwosimplesine
waves,oneshiftedtotherightandonetotheleft."
10753,"FigureC.2Twohorizontally shiftedsinewaves
Is(t)=Asin(COt-<Il)
A---
Time
<Il
00 T
Is(t)=Asin(cot+<Il) CO=21tfI
..."
10754,"Time
<Il
<0 T
Whenasignalisshiftedtotheleftorright,itsfirstzerocrossingwillbeatapoint
intimeotherthantheorigin.Toshowthis,weneedtoaddorsubtractanotherconstant
tooot,asshowninthefigure.APPENDIX CMATHEMATICAL REVIEW 1045
Shiftingasinewavetotheleftorrightisapositiveornegativeshift,respectively."
10755,"VerticalShifting
Whenasinewaveisshiftedvertically, aconstant isaddedtotheinstantaneous ampli­
tudeofthesignal.Forexample, ifweshiftasinewave2unitsofamplitude upward, the
signalbecomes set)=2+sin(rot);ifweshiftit2unitsofamplitude downward, wehave
set)=-2+sin(rot).FigureC.3showstheidea."
10756,"FigureC.3Verticalshiftingofsinewaves
Is(t)=2+Asin(rot) 00=2rrfI
Time
Is(t)=-2+Asin(rot) 00=2rtfI
CosineWave
IfweshiftasinewaveT/2totheleft,wegetwhatiscalledacosinewave(cos)."
10757,"Asin(rot+1tI2) =Acos(rot)
FigureC.4showsacosinewave."
10758,"FigureC.4Acosinewave
s(t~tIs(t)=Asin(rot+T/4)=Acos(rot) 00=2rtfI
-w=~---
f/\
r~V\7
4 T----)­
Time1046 APPENDIX CMATHEMATICAL REVIEW
OtherTrigonometric Functions
Therearemanytrigonometric functions; twoofthemorecommon aretan(cot)and
cot(illt).Theyaredefinedastan((Ot)=sine(Ot)/cos( cot)andcot(cot)=cos(ffit)/sin((Ot)."
10759,Notethattanandcotaretheinverseofeachother.
10760,"Trigonometric Identities
Thereareseveralidentities betweentrigonometric functions thatwesometimes needto
know.TableC.lgivestheseidentities forreference."
10761,"Otheridentities canbeeasily
derivedfromthese."
10762,"TableC.lSometrigonometric identities
Name Formula
Pythagorean sin2x+cos2x=1
Even/odd sin(-x)=-sin(x)cos(-x)=cos(x)
Sum sin(x+y)=sin(x)cos(y)+cos(x)sin(y)
cos(x+y)=cos(x)cos(y)-sin(x)sin(y)
Difference sin(x-y)=sin(x)cos(y)-cos(x)sin(y)
cos(x-y)=cos(x)cos(Y)+sin(x)sin(y)
Producttosum sin(x)sin(y)=1/2[cos(x-y)-cos(x+y)]
cos(x)cos(y)=1/2[cos(x-y)+cos(x+y)]
sin(x)cos(y)=1/2[sin(x+y)+sin(x-y)]
cos(x)sin(y)=1/2[sin(x+y)-sin(x-y)]
C.2FOURIER ANALYSIS
Fourieranalysisisatoolthatchangesatime-domain signaltoafrequency-domain signal
andviceversa."
10763,"FourierSeries
Fourierprovedthatacomposite periodic signalwithperiodT(frequency f)canbe
decomposed intoaseriesofsineandcosinefunctions inwhicheachfunction isan
integralharmonic ofthefundamental frequencyfofthecomposite signal.Theresultis
calledtheFourierseries.Inotherwords,wecanwriteacomposite signalasshownin
FigureC.S.Usingtheseries,wecandecompose anyperiodicsignalintoitsharmonics."
10764,"NotethatAoistheaveragevalueofthesignaloveraperiod,Anisthecoefficient ofthe
nthcosinecomponent, andBnisthecoefficient ofthenthsinecomponent."
10765,"Example C.3
Letusshowthecomponents ofasquarewavesignalasseeninFigureC.6.Thefigurealsoshows
thetimedomainandthefrequency domain.According tothefigure,suchasquarewavesignalhas
onlyAncoefficients."
10766,"NotealsothatthevalueofAo=0becausetheaveragevalueofthesignalis0;
itisoscillating aboveandbelowthetimeaxis.Thefrequency domainofthesignalisdiscrete;APPENDIX CMATHEMATICAL REVIEW 1047
FigureC.SFourierseriesandcoefficients oftenns
Fourierseries
~ ~
s(t)=Ao+LAllsin(21tnft)+LB""cos(21tnft)n=l n=l
Coefficients
Fourierseries
Timedomain:periodic Frequency domain:discrete
onlyoddharmonics arepresentandtheamplitudes arealternatively positiveandnegative."
10767,"Avery
important pointisthattheamplitude oftheharmonics approaches zeroaswemovetowardinfin­
ity.Something whichisnotshowninthefigureisthephase.However, weknowthatallcompo­
nentsarecosinewaves,whichmeansthateachhasaphaseof90°."
10768,"FigureC.6FindingtheFourierseriesofaperiodic squarefunction
Timedomain
Time oA----;I---+---+--+---t--t---+---..-
-A
T
Ao=O
set)=~cos(21tft)-j~cos(21t3ft)+1~cos(21t5ft)-j~cos(2rr:7ft)+•••
4A1t
f
4A
31t4A
51t
Frequency
Frequency domain1048 APPENDIX CMATHEMATICAL REVIEW
Example C.4
Nowletusshowthecomponents ofasawtooth signalasseeninFigureC.7.Thistime,wehave
onlyEncomponents (sinewaves).Thefrequency spectrum, however, isdenser;wehaveallhar­
monicsif,2j,3j,...).Apointwhichisnotclearfromthediagramisthephase.Allcomponents
aresinewaves,whichmeanseachcomponent hasaphaseof00."
10769,"FigureC.7FindingtheFourierseriesforasawtooth signal
Timedomain
IA •••----,.'----I----:ll..r----i------::;.,,;-:---1----+-
~ TI~
set)=2,¢sin(2rcft)-~sin(2rc2ft)+~sin(21t3ft)-~sin(21t4!t)+•••
2A
1t
f21
I
2A
-2rc2A
3rcI4f
3fI
2A
-4rc2A
5
11t6f
5f'2A
-61tFrequency
Frequency domain
FourierTransform
WhiletheFourierseriesgivesthediscretefrequency domainofaperiodicsignal,the
Fouriertransform givesthecontinuous frequency domainofanonperiodic signal."
10770,"FigureC.Sshowshowwecancreateacontinuous frequency domainfromanonperiodic
time-domain functionandviceversa."
10771,"FigureC.SFouriertransform andinverseFouriertransform
S(f)=f~t)e-j2""ft dt set)=L~f)ej21tft dt
Fouriertransform InverseFouriertransformAPPENDIX CMATHEMATICAL REVIEW 1049
Fouriertransform
Timedomain: nonperiodic Frequency domain:continuous
ExampleC.s
FigureC.9showsthetimeandfrequency domainsofonesinglesquarepulse.Thetimedomainis
between-t/2andtl2;thefrequency domainisacontinuous function thatstretches fromnegative
infinitytopositiveinfinity.Unliketheprevious examples, thefrequency domainiscontinuous; all
frequencies arethere,notjusttheintegralones."
10772,"FigureC.9FindingtheFouriertransform ofasquarepulse
Timedomain
-'t/201;/2
sin(1t'tj)
Sif)=A't1tTj
Frequency domainAt
Frequency
Time-Limited andBand-Limited Signals
Twoveryinteresting concepts relatedtotheFouriertransform arethetime-limited
andband-limited signals.Atime-limited signalisasignalforwhichtheamplitude of
set)isnonzeroonlyduringaperiodoftime;theamplitude iszeroeverywhere else."
10773,"Aband-limited signal,ontheotherhand,isthesignalforwhichtheamplitude ofSif)
isnonzeroonlyforarangeoffrequencies; theamplitude iszeroeverywhere else.A
band-limited signalplaysaveryimportant roleinthesampling theoremandNyquist
frequency becausethecorresponding timedomaincanberepresented asaseriesof
samples."
10774,"Time-limited signal:s(t)=0forItI~T
Band-limited signal:Sif)=0forIfI~B1050 APPENDIX CMATHEMATICAL REVIEW
C.3EXPONENT ANDLOGARITHM
Insolvingnetworking problems, weoftenneedtoknowhowtohandleexponential and
logarithmic functions."
10775,Thissectionbrieflyreviewsthesetwoconcepts.
10776,"Exponential Function
Theexponential functionwithbaseaisdefinedas
y=cr
Ifxisaninteger(integralvalue),wecaneasilycalculate thevalueofybymultiplying
thevalueofabyitselfxtimes."
10777,"Example C.6
Calculate thevalueofthefollowing exponential functions."
10778,"a.y=32
b.Y=5.26
Solution
a.y=3x3=9
b.y=5.2x5.2x5.2x5.2x5.2x5.2=19,770.609664
Ifxisnotinteger,weneedtouseacalculator."
10779,"Example C.7
Calculate thevalueofthefollowing exponential functions."
10780,"a.y=32.2
b.y=5.26.3
Solution
a.y=11.212(approximately)
b.y=32,424.60 (approximately)
NaturalBase
Oneverycommon baseusedinscienceandmathematics isthenaturalbasee,which
hasthevalue2.71828183 ....Mostcalculators showthisfunction as£1,whichcanbe
calculated easilybyenteringonlythevalueoftheexponent."
10781,"ExampleC.s
Calculate thevalueofthefollowing exponential functions."
10782,"_ 4a.y-e
b.y=e6.3
Solution
a.y=54.56(approximately)
b.y=544.57(approximately)APPENDIX CMATHEMATICAL REVIEW 1051
Properties oftheExponential Function
Exponential functions haveseveralproperties; someareusefultousinthistext:
First:
Second:
Third:y=aO=1
y=a1=a
_y=a-x=.!."
10783,"aX
Example C.9
Thethirdproperty isusefultousbecause wecancalculate thevalueofanexponential function
withanegative value.Wefirstcalculate thepositivevalueandwetheninverttheresult."
10784,"a.y=e-4
b.y=e-6·3
Solution
a.y=1/54.56=0.0183
b.y=1/544.57=0.00183
Logarithmic Function
Alogarithmic functionistheinverseofanexponential function, asshownbelow.Just
asintheexponential function, aiscalledthebaseofthelogarithmic function:
y=£c.-..x=lo~y
Inotherwords,ifxisgiven,wecancalculate ybyusingtheexponential function~
ifyisgiven,wecancalculate xbyusingthelogarithmic function."
10785,Exponential andlogarithmic functions aretheinverseofeachother.
10786,"Example C.10
Calculate thevalueofthefollowing logarithmic function,s."
10787,"a.x=log39
b.x=log216
Solution
Wehavenotyetshownhowtocalculate thelogfunction indifferent bases,butwecansolvethis
problem intuitively."
10788,"a.Because 32:=9,wecansaythatlog39=2,usingthefactthatthetwofunctions arethe
inverseofeachother."
10789,"b.Because24=16,wecansaythatlog2l6=4byusingtheprevious fact."
10790,"TwoCommon Bases
Thetwocommon basesforlogarithmic functions, thosethatcanbehandledbyacalcu­
lator,arebaseeandbase10.Thelogarithm inbaseeisnormally shownasIn(natural
logarithm); thelogarithm inbase10isnormally shownaslog(omitting thebase).1052 APPENDIX CMATHEMATICAL REVIEW
ExampleCll
Calculate thevalueofthefollowing logarithmic functions."
10791,"a.x=log233
b.x=In45
Solution
Forthesetwobaseswecanuseacalculator."
10792,"a.x=log233=2.367
b.x=In45=3.81
BaseTransformation
Weoftenneedtofindthevalueofalogarithmic functioninabaseotherthaneor10.If
theavailable calculator cannotgivetheresultinourdesiredbase,wecanuseavery
fundamental property ofthelogarithm, basetransformation, asshown:
10gbY
IO&1Y=-­10gba
Notethattheright-hand sideistwologfunctions withbaseb,whichisdifferent
fromthebaseaattheleft-hand side.Thismeansthatwecanchooseabasethatis
available inourcalculator (baseb)andfindthelogofabasethatisnotavailable
(basea)."
10793,"Example C12
Calculate thevalueofthefollowing logarithmic functions."
10794,"a.x=log3810
b.x=log5600
Solution
Thesetwobases,3and5,arenotavailable onacalculator, butwecanusebase10whichisavailable."
10795,"loglO8102.908a.x=log3810= =--=6.095log1030.477
log106002.778
b.x=log5600= =--=3.975
log1050.699
Properties ofLogarithmic Functions
Likeanexponential function, alogarithmic functionhassomeproperties thatareuseful
in:simplifying thecalculation ofalogfunction."
10796,"First:
Second:
Third:10&11=0
10&1a=1
10&1!=-10&1xxFourth:
Fifth:
Sixth:10&1(xxY)=10&1x+lo~y
10&1:!:=l0&zx-10&1yy
lo&zxY=Yx10&1xAPPENDIX CMATHEMATICAL REVIEW 1053
Example C13
Calculate thevalueofthefollowing logarithmic functions."
10797,"a.x=log31
b.x=log33
c.x=loglO(l/10)
d.loga(xxy)ifweknowthatlogax=2andlogay=3
e.logz(1024)withoutusingacalculator
Solution
Weusethepropertyoflogfunctions tosolvetheproblems."
10798,"a.x=log31=0
b.x=log33=1
c.x=loglO(1110)=loglOlO-l=-loglO10=-1
d.loga(xxy)=logax+logaY=2+3=5
e.10gz(1024)=logz(210)=10logz2=10x 1=10APPENDIXD
8B/6TCode
Thisappendix isatabulation of8B/6Tcodepairs.The8-bitdataareshowninhexadecimal
format.The6Tcodeisshownas+(positive signal),-(negative signal),and0(lackof
signal)notation."
10799,"TableD.l8B/6Tcode
Data Code Data Code Data Code Data Code
00-+00-+ 20-++-00 40-00+0+ 600++0-0
010-+-+0 21+00+-- 410-00++ 61+0+-00
020-+0-+ 22-+0-++ 420-0+0+ 62+0+0-0
030-++0- 23+-0-++ 430-0++0 63+0+00-
04-+0+0- 24+-0+00 44-00++0 640++00-
05+0--+0 25-+0+00 4500-0++ 65++0-00
06+0-0-+ 26+00-00 4600-+0+ 66++00-0
07+0-+0- 27-+++-- 4700-++0 67++000-
08-+00+- 280++-0- 4800+000 680++-+-
090-++-0 29+0+0-- 49++-000 69+0++--
OA0-+0+- 2A+0+-0- 4A+-+000 6A+0+-+-
OB0-+-0+ 2B+0+--0 4B-++000 6B+0+--+
OC-+0-0+ 2C0++--0 4C0+-000 6C0++--+
OD+0-+-0 2D++00-- 4D+0-000 6D++0+--
OE+0-0+- 2E++0-0- 4E0-+000 6E++0-+-
OF+0--0+ 2F++0--0 4F-0+000 6F++0--+
100--+0+ 30+-00-+ 50+--+0+ 70000++-
11-0-0++ 310+--+0 51-+-0++ 71000+-+
12-0-+0+ 320+-0-+ 52-+-+0+ 72000-++
13-0-++0 330+-+0- 53-+-++0 73 000+00
10551056 APPENDIX D8B/6TCODE
TableD.I8B/6Tcode(continued)
Data Code Data Code Data Code Data Code
140--++0 34+-0+0- 54+--++0 74 000+0-
15--00++ 35-0+-+0 55--+0++ 75000+-0
16--0+0+ 36-0+0-+ 56--++0+ 76 000-0+
17--0++0 37-0++0- 57--+++0 77 000-+0
18-+0-+0 38+-00+- 58--0+++ 78+++--0
19+-0-+0 390+-+-0 59-0-+++ 79+++-0-
lA-++-+0 3A0+-0+- 5A0--+++ 7A+++0--
IB+00-+0 3B0+--0+ 5B0--0++ 7B0++0--
lC+00+-0 3C+-0-0+ 5C+--0++ 7C-00-++
ID-+++-0 30-0++-0 50-000++ 7D -00+00
IE+-0+-0 3E-0+0+- 5E0+++-- 7E+---++
IF-+0+-0 3F-0+-0+ 5F0++-00 7F+--+00
80-00+-+ AO-++0-0 CO-+0+-+ EO-++0-+
810-0-++ Al+-+-00 Cl0-+-++ El+-++0
820-0+-+ A2+-+0-0 C20-++-+ E2+-+0-+
830-0++- A3+-+00- C30-+++- E3+-++0-
84-00++- A4-++00- C4-+0++- E4-+++0-
8500--++ A5++--00 C5+0--++ E5++--+0
8600-+-+ A6++-0-0 C6+0-+-+ E6++-0-+
8700-++- A7++-00- C7+0-++- E7++-+0-
88-000+0 A8-++-+- C8-+00+0 E8-++0+-
890-0+00 A9+-++-- C90-++00 E9+-++-0
8A0-00+0 AA+-+-+- CA0-+0+0 EA+-+0+-
8B0-000+ AB+-+--+ CB0-+00+ EB+-+-0+
8C-0000+ AC-++--+ CC-+000+ EC-++-0+
8000-+00 AD++-+-- CD+0-+00 ED++-+-0
8E00-0+0 AE++--+- CE+0-0+0 EE++-0+-
8F00-00+ AF++---+ CF+0-00+ EF++--0+
90+--+-+ BO+000-0 DO+-0+-+ FO+000-+
91-+--++ Bl0+0-00 010+--++ Fl0+0-+0
92-+-+-+ B20+00-0 020+-+-+ F20+00-+
93-+-++- B30+000- D30+-++- F30+0+0-
94+--++- B4+0000- D4+-0++- F4+00+0-TableD.I8B/6Tcode (continued)APPENDIX D8B/6TCODE 1057
Data Code Data Code Data Code Data Code
95--+-++ B500+-00 05-0+-++ F500+-+0
96--++-+ B600+0-0 06-0++-+ F600+0-+
97--+++- B700+00- 07-0+++- F700++0-
98+--0+0 B8+00-+- 08+-00+0 F8+000+-
99-+-+00 B90+0+-- 090+-+00 F90+0+-0
9A-+-0+0 BA0+0-+- OA0+-0+0 FA0+00+-
9B-+-00+ BB0+0--+ OB0+-00+ FB0+0-0+
9C+--00+ BC+00--+ OC+-000+ FC+00-0+
90--++00 BO00++-- 00-0++00 FD00++-0
9E--+0+0 BE00+-+- OE-0+0+0 FE00+0+-
9F--+00+ BF00+--+ OF-0+00+ FF00+-0+APPENDIXE
Telephone History
InChapter9,wediscussed telephone networks."
10800,"Inthisappendix, webrieflyreviewthe
historyoftelephone networks."
10801,"ThehistoryintheUnitedStatescanbedividedintothree
eras:priorto1984,between 1984and1996,andafter1996."
10802,"Before1984
Before1984,almostalllocalandlong-distance serviceswereprovided bytheAT&TBell
System.In1970,theU.S.government, believing thattheBellSystemwasmonopolizing
thetelephone serviceindustry, suedthecompany."
10803,"Theverdictwasinfavorofthegovern­
mentandresultedinadocument calledtheModified FinalJudgment (MFJ).Beginning on
January1,1984,AT&TwasbrokenintoAT&TLongLines,23BellOperating Compa­
nies(BOCs), andothers.The23BOCsweregrouped tomakeseveralRegional Bell
Operating Companies (RBOSs)."
10804,"Thislandmark event,theAT&Tdivestiture of1984,was
beneficial tocustomers oftelephone services."
10805,Telephone rateswerelowered.
10806,"Between 1984and1996
Thedivestiture dividedthecountryintomorethan200LATAs;somecompanies were
allowedtoprovideservicesinsideaLATA(LECs),andotherswereallowedtoprovide
servicesbetween LATAs(IXCs).Competition, particularly between long-distance car­
riers,increased asnewcompanies wereformed.However, noLECcouldprovidelong­
distanceservices, andnoIXCscouldprovidelocalservices."
10807,"After1996
Another majorchangeintelecommunications occurred in1996.TheTelecommunica­
tionsActof1996combined thedifferent services provided bydifferent companies
undertheumbrella oftelecommunication services; thisincluded localservices, long­
distancevoiceanddataservices, videoservices, andsoon.Inaddition, theactallowed
anycompany toprovideanyofthese services atthelocalandlong-distance levels.In
otherwords,acommon carriercompany provides servicesbothinsidetheLATAand
betweentheLATAs.However, topreventtherecabling ofresidents, thecarriersthatwere
givenintra-LATA services (ILECs) continued toprovidethemainservices; thenew
competitors (CLECs) provided otherservices."
10808,"1059APPENDIXF
ContactAddresses
Thefollowing isalistofcontactaddresses forvariousorganizations mentioned in
thetext."
10809,"oATMForum
PresidioofSanFrancisco
P.O.Box29920(mail)
572BRugerStreet(surface)
SanFrancisco, CA94129-0920
Telephone: 415561-6275
E-mail:info@atmforum.com
www.atmforum.com
oFederalCommunications Commission (FCC)
44512thStreetS.W.
Washington, DC20554
Telephone: 1-888-225-5322
E-mail:fccinfo@fcc.gov
www.fcc.gov
oInstitute ofElectrical andElectronics Engineers (IEEE)
Operations Center
445HoesLane
Piscataway, NJ08854-1331
Telephone: 732981-0060
www.ieee.org
10611062 APPENDIX FCONTACT ADDRESSES
oInternational Organization forStandardization (ISO)
1,ruedeVarembe
CaissePosta1e56
CH-1211 Geneve20
Switzerland
Telephone: 41227490111
E-mail:central@iso.ch
www.iso.orgoInternational Telecommunication Union(ITU)
PlacedesNations
CH-1211Geneva20
Switzerland
Telephone: 41227305852
E-mail:tsbmail@itu.int
www.itu.intlhome
oInternetArchitecture Board(lAB)
E-mail:lAB@isi.edu
www.iab.orgoInternetCorporation forAssigned NamesandNumbers (ICANN)
4676Admiralty Way,Suite330
MarinadelRey,CA90292-6601
Telephone: 310823-9358
E-mail:icann@icann.org
www.icann.org
oInternetEngineering Steering Group(IESG)
E-mail:iesg@ietf.org
www.ietf.org/iesg.html
oInternetEngineering TaskForce(IETF)
E-mail:ietf-infor@ietf.org
www.ietf.org
oInternetResearch TaskForce(IRTF)
E-mail:irtf-chair@ietf.org
www.irtf.org
oInternetSociety(ISOC)
1775WeihleAvenue,Suite102
Reston,VA20190-5108
Telephone: 703.326-9880
E-mail:info@isoc.org
www.isoc.orgAPPENDIXG
RFCs
InTableG.1,welistalphabetically byprotocol theRFCsthataredirectlyrelatedto
thematerial inthistext.Formoreinformation gotothefollowing site:http://
www.rfc-editor.org."
10810,"TableG.tRFCsforeachprotocol
Protocol RFC
ARPandRARP 826,903,925,1027,1293,1329,1433,1868,1931,2390
BGP 1092,1105,1163,1265,1266,1267,1364,1392,1403,1565,
1654,1655,1665,1771,1772,1745,1774,2283
BOOTPandDHCP 951,1048,1084,1395,1497, 1531, 1532, 1533, 1534,1541,
1542,2131,2132
CIDR 1322,1478,1479,1517,1817
DHCP SeeBOOTPandDHCP
DNS 799,811,819,830,881,882,883,897,920,921,1034,1035,
1386,1480,1535,1536,1537,1591,1637,1664,1706,1712,
1713,1982,2065,2137,2317,2535,2671
FTP 114,133,141,163,171,172,238,242,250,256,264,269,281,
291,354,385,412,414,418,430,438,448,463,468,478,486,
505,506,542,553,624,630,640,691,765,913,959,1635,
1785,2228,2577
HTML 1866
HTTP 2068,2109
ICMP 777,792,1016,1018,1256,1788,2521
IGMP 966,988,1054,1112,1301,1458,1469,1768,2236,2357,2365,
2502,2588
IMAP SeeSMTP,MIME,POP,IMAP
IP 760,781,791,815, 1025, 1063, 1071,1141, 1190, 1191,
1624,2113
10631064 APPENDIX GRFCs
TableG.!RFCsfor eachprotocol (continued)
Protocol RFC
IPv6 1365,1550,1678, 1680,1682,1683,1686,1688,1726,1752,
1826,1883,1884,1886,1887,1955,2080,2373,2452,2463,
2465,2466,2472,2492,2545,2590
MIB SeeSNMP,MIB,SMI
MIME SeeSMTP,MIME,POP,IMAP
Multicast Routing 1584,1585,2117,2362
NAT 1361,2663,2694
OSPF 1131,1245,1246,1247,1370,1583, 1584, 1585, 1586,1587,
2178,2328,2329,2370
POP SeeSMTP,MIME,POP,IMAP
RARP SeeARPandRARP
RIP 1131,1245,1246,1247,1370,1583, 1584,1585, 1586, 1587,
1722,1723,2082,2453
SCTP 2960,3257,3284,3285,3286,3309,3436,3554,3708,3758
SMI SeeSNMP,MIB,SMI
SMTP,MIME,POP, 196,221,224,278,524,539,753,772,780,806,821,934,974,
IMAP 1047, 1081, 1082, 1225, 1460,1496,1426, 1427, 1652,1653,
1711,1725,1734,1740,1741,1767,1869,1870,2045,2046,
2047,2048,2177,2180,2192,2193,2221,2342,2359,2449,
2683,2503
SNMP,MIB,SMI 1065,1067,1098, 1155, 1157,1212,1213,1229,1231,1243,
1284,1351,1352,1354,1389, 1398, 1414,1441,1442,1443,
1444, 1445, 1446,1447,1448,1449,1450,1451,1452, 1461,
1472,1474,1537,1623,1643, 1650, 1657, 1665, 1666, 1696,
1697,1724,1742, 1743, 1748,1749
TCP 675,700,721,761,793,879,896,1078,1106,1110,1144,1145,
1146,1263,1323,1337,1379,1644,1693,1901,1905,2001,
2018,2488,2580
TELNET 137,340,393,426,435,452,466,495,513,529,562,595,596,
599,669,679,701,702,703,728,764,782,818,854,855,1184,
1205,2355
TFfP 1350,1782,1783,1784
UDP 768
VPN 2547,2637,2685
WWW 1614,1630,1737,1738APPENDIXH
UDPandTCPPorts
TableH.Iliststhecommon well-known portsorderedbyportnumber."
10811,"TableH.IPortsbyportnumber
PortNumber UDPffCP Protocol
7 TCP ECHO
13 UDPrrCp DAYTIME
19 UDPITCP CHARACTER GENERATOR
20 TCP FTP-DATA
21 TCP FTP-CONTROL
23 TCP TELNET
25 TCP SMTP
37 UDPrrCp TIME
67 UDP BOOTP-SERVER
68 UDP BOOTP-CLIENT
69 UDP TFTP
70 TCP GOPHER
79 TCP FINGER
80 TCP HTTP
109 TCP POP-2
110 TCP POP-3
111 UOPITCP RPC
161 UOP SNMP
162 UOP SNMP-TRAP
179 TCP BGP
520 UOP RIP
10651066 APPENDIX HUDPANDTCPPORTS
TableH.2liststheports,orderedalphabetically byprotocol."
10812,"TableH.2Portnumbers byprotocol
Protocol UDPITCP PortNumber
BGP TCP 179
BOOTP-SERVER UDP 67
BOOTP-CLIENT UDP 68
CHARACTER GENERATOR UDP/TCP 19
DAYTIME UDP/TCP 13
ECHO TCP 7
FINGER TCP 79
FTP-CONTROL TCP 21
FTP-DATA TCP 20
GOPHER TCP 70
HTTP TCP 80
POP-2 TCP 109
POP-3 TCP 110
RIP UDP 520
RPC UDP/TCP 111
SMTP TCP 25
SNMP UDP 161
SNMP-TRAP UDP 162
TELNET TCP 23
TFTP UDP 69
TIME UDP/TCP 37Acronyms
AAL application adaptation layer BER BasicEncoding Rules
ABM asynchronous balanced mode BOP BorderGateway Protocol
ACK acknowledgment BNC Bayone-Neill-Concelman
ACL asynchronous connectionless link BOOTP Bootstrap Protocol
AOSL asymmetric digitalsubscriber line BSS basicserviceset
AES Advanced Encryption Standard BUS broadcast/unknown server
AH Authentication Header CA Certification Authority
AM amplitude modulation CATV community antennaTV
AMI alternate markinversion CBC cipherblockchaining mode
AMPS Advanced MobilePhoneSystem CBR constantbitrate
ANSI American NationalStandards Institute CBT Core-Based Tree
AP accesspoint CCITT Consultative Committee for
ARP AddressResolution Protocol International Telegraphy and
ARPA Advanced Research ProjectsAgencyTelephony
ARPANET Advanced Research ProjectsAgencyCCK complementary codekeying
Network COMA codedivisionmultipleaccess
ARQ automatic repeatrequest CFB cipherfeedback mode
AS authentication server COl Common Gateway Interface
AS autonomous system CHAP Challenge Handshake Authentication
ASCII American Standard CodeforProtocol
Information Interchange CrOR Classless InterDomain Routing
ASK amplitude shiftkeying CrR committed information rate
ASN.l Abstract SyntaxNotation 1 CLEC competitive localexchange carrier
ATM Asynchronous TransferMode CMTS cablemodemtransmission system
AUr attachment unitinterface CRC cyclicredundancy check
B8ZS bipolarwith8-zerosubstitution CS convergence sublayer
Be committed burstsize CSM cipherstreammode
Be excessburstsize CSMA carriersensemultipleaccess
BECN backward explicitcongestion CSMAICA carriersensemUltipleaccesswith
notification collision avoidance
10671068 ACRONYMS
CSMA/CD carriersensemultipleaccesswith FSK frequency shiftkeying
collision detectionFTP FileTransfer Protocol
D-AMPS digitalAMPSGPS GlobalPositioning System
DARPA DefenseAdvanced Research Projects GSM GlobalSystemforMobile
Agency Communication
dB decibelHDLC High-level DataLinkControl
DC directcurrent HDSL highbitratedigitalsubscriber line
DCF distributed coordination function HFC hybrid-fiber-coaxial network
OCT discretecosinetransform HMAC hashed-message authentication code
DONS Dynamic DomainNameSystem HR-DSSS HighRateDirectSequence Spread
DDS digitaldataservice Spectrum
DE discardeligibility HTML HyperText MarkupLanguage
DEMUX demultiplexer HTTP HyperText TransferProtocol
DES dataencryption standard Hz hertz
DHCP Dynamic HostConfiguration Protocol lAB InternetArchitecture Board
DIFS distributed interframe space lANA InternetAssigned Numbers Authority
DLCI datalinkconnection identifier ICANN InternetCorporation forAssigned
DMT discretemultitone techniqueNamesandNumbers
DNS DomainNameSystemICMP InternetControlMessage Protocol
DOCSIS DataOverCableSystemInterfaceICMPv6 InternetControlMessage Protocol,
Specificationsversion6
DS digitalsignalIEEE InstituteofElectrical andElectronics
EngineersOS Differentiated ServicesIESG InternetEngineering SteeringGroupDSL digitalsubscriber lineIETF InternetEngineering TaskForceDSLAM digitalsubscriber lineaccessIFS interframe spacemultiplexer
DSSS directsequence spreadspectrumIGMP InternetGroupManagement Protocol
DVMRP Distance VectorMulticast RoutingIKE InternetKeyExchange
ProtocolILEC incumbent localexchange carrier
DWDM densewave-division multiplexingIMAP4 InternetMailAccessProtocol, version4
EIA Electronics Industries AssociationINTERNIC InternetNetwork Information Center
ESP Encapsulating SecurityPayloadIntServ Integrated Services
ESS Extended ServiceSetIP InternetProtocol
FCC FederalCommunications CommissionIPCP Internetwork ProtocolControlProtocol
FDM frequency-division multiplexingIPng InternetProtocol nextgeneration
FDMA frequency divisionmultipleaccessIPSec IPSecurity
IPv4 InternetProtocol version4FDMA frequency-division multipleaccessIPv6 InternetProtocol, version6FECN forwardexplicitcongestion notificationIRTF InternetResearch TaskForce
FHSS frequency hoppingspreadspectrumIS-95 InterimStandard 95
FIFO first-in,first-outISAKMP InternetSecurityAssociation andKey
FM frequency modulation Management Protocol
FQDN fullyqualified domainnameISO International Organization of
FRAD FrameRelayassembler/disassembler StandardizationACRONYMS 1069
ISOC InternetSociety MTU maximum transferunit
ISP Internetserviceprovider MUX multiplexer
ISUP ISDNuserport NAP networkaccesspoint
ITM-2000 InternetMobileCommunication NAT networkaddresstranslation
ITU-T International Telecommunications NAV networkallocation vector
Union-Telecommunication NCP Network ControlProtocol
Standardization SectorNIC networkinterface card
IXC interexchange carrierNNI network-to-network interface
IPEG JointPhotographic ExpertsGroupNRM nonnalresponse mode
KOC keydistribution centerNRZ nonreturn tozero
L2CAP LogicalLinkControlandAdaptationNRZ-I nonreturn tozero,invertProtocolNRZ-L nonreturn tozero,levelLAN localareanetworkNVT Network VirtualTenninalLANE LANemulationOC opticalcarrierLANE localareanetworkemulationOFB outputfeedbackLATA localaccessandtransport areaOFOM orthogonal frequency divisionLCP LinkControlProtocolmultiplexing
LEC LANemulation clientOSI OpenSystemsInterconnection
LEC localexchange carrierOSPF openshortestpathfirst
LEO lowearthorbitPAM pulseamplitude modulation
LES LANemulation serverPAP Password Authentication Protocol
LLC logicallinkcontrolPCF pointcoordination function
LMI localmanagement infonnationPCM pulsecodemodulation
LSA linkstateadvertisementPCS personal communication system
LSP linkstatepacketPGP PrettyGoodPrivacy
MA multipleaccessPHB perhopbehavior
MAA messageaccessagentPIM ProtocolIndependent Multicast
MAC mediumaccesscontrolsublayerPIM-OM ProtocolIndependent Multicast,
MAC message authentication code DenseMode
MAN metropolitan areanetwork PIM-SM ProtocolIndependent Multicast,
MBONE multicast backbone SparseMode
MOC modification detection mode PKI publickeyinfrastructure
MEO mediumEarthorbit PM phasemodulation
MIB Management Infonnation Base PN pseudorandom noise
MIl mediumindependent interface POP pointofpresence
MIME Multipurpose InternetMailExtension POP3 PostOfficeProtocol, version3
MLT-3 multiline transmission, 3-level POTS plainoldtelephone system
MOSPF Multicast OpenShortestPathFirst PPP Point-to-Point Protocol
MPEG motionpictureexpertsgroup PQON partiallyqualified domainname
MSC mobileswitching center PSK phaseshiftkeying
MTA mailtransferagent PVC permanent virtualcircuit
MTA message transferagent QAM quadrature amplitude modulation
MTSO mobiletelephone switching office QoS qualityofservice1070 ACRONYMS
RADSL rateadaptive asymmetrical digital STM synchronous transport module
subscriber line STP shielded twisted-pair
RARP ReverseAddressResolution Protocol STP signaltransport port
RFC RequestforComment STS synchronous transport signal
RIP RoutingInformation Protocol SVC switched virtualcircuit
ROM read-only memory TCAP transaction capabilities application port
RPB reversepathbroadcasting TCP Transmission ControlProtocol
RPF reversepathforwarding TCP/IP Transmission ControlProtocol!
RPM reversepathmulticasting Internetworking Protocol
RSA Rivest,Shamir,Adleman TDD-TDMA timedivisionduplexing TDMA
RSVP Resource Reservation Protocol TDM time-division multiplexing
RTCP Real-time Transport ControlProtocol TDMA timedivisionmultipleaccess
RTP Real-time Transport Protocol TELNET Terminal Network
RTSP Real-TimeStreaming Protocol TFTP TrivialFileTransfer Protocol
RTT round-trip time TGS ticket-granting server
RZ returntozero TLS Transport LayerSecurity
SA SecurityAssociation TOS typeofservice
SADB securityassociation database TSI time-slot interchange
SAR segmentation andreassembly TTL timetolive
SCCP signaling connection controlpoint TUP telephone userport
seo synchronous connection oriented UA useragent
SCP servercontrolpoint UBR unspecified bitrate
SCTP StreamControlTransmission Protocol UDP UserDatagram Protocol
SDH Synchronous DigitalHierarchy UNI usernetworkinterface
SDSL symmetric digitalsubscriber line UNI user-to-network interface
SEAL simpleandefficientadaptation layer URL Uniform Resource Locator
SHA-l SecureHashAlgorithm 1 UTP unshielded twisted-pair
SIFS shortinterframe space VBR variablebitrate
SIP SessionInitiation Protocol ve virtualcircuit
SMI Structure ofManagement Information VDSL veryhighbitratedigitalsubscriber
SMTP SimpleMailTransfer Protocol line
SNMP SimpleNetwork Management Protocol VLAN virtuallocalareanetwork
SNR signal-to-noise ratio VOFR VoiceOverFrameRelay
SONET Synchronous OpticalNetwork VPN virtualprivatenetwork
SP signalpoint VT virtualtributary
SPE synchronous payloadenvelope WAN wideareanetwork
SPI securityparameter index WATS wideareatelephone service
SS7 Signaling SystemSeven WDM wave-division multiplexing
SSL SecureSocketLayer WWW WorldWideWeb1000Base-CX Thetwo-wire STPimplementation ofGigabitEthernet."
10813,1000Base-LX Thetwo-wire fiberimplementation ofGigabitEthernet usinglong-wave laser.
10814,1000Base-SX Thetwo-wire fiberimplementation ofGigabitEthernet usingshort-wave laser.
10815,1000Base- TThefour-wire UTPimplementation ofGigabitEthernet.
10816,100Base-FX Thetwo-wire fiberimplementation ofFastEthernet.
10817,100Base- T4Thefour-wire UTPimplementation ofFastEthernet.
10818,IOOBase-TXThetwo-wire UTPimplementation ofFastEthernet.
10819,IOBase2 Thethincoaxialcableimplementation ofStandard Ethernet.
10820,IOBase5 Thethickcoaxialcableimplementation ofStandard Ethernet.
10821,10Base-F Thefiberimplementation ofStandard Ethernet.
10822,10Base-T Thetwisted-pair implementation ofStandard Ethernet.
10823,10GBase-E Theextended implementation ofTen-Gigabit Ethernet.
10824,10GBase-L Thefiberimplementation ofTen-Gigabit Ethernet usinglong-wave laser.
10825,10GBase-S Thefiberimplementation ofTen-Gigabit Ethernet usingshort-wave laser.
10826,"I-persistent strategy ACSMApersistence strategyinwhichastationsendsaframeimme­
diatelyifthelineisidle."
10827,2BIQencoding Alineencoding technique inwhicheachpulserepresents 2bits.
10828,4B/5Bencoding Ablockcodingtechnique inwhich4bitsareencodedintoa5-bitcode.
10829,8B/10Bencoding Ablockcodingtechnique inwhich8bitsareencodedintoalO-bitcode.
10830,"8B6Tencoding Athree-level lineencoding schemethatencodesablockof8bitsintoasig­
nalof6ternarypulses."
10831,"4-dimensional, 5-levelpulseamplitude modulation (4D-PAM5) Anencoding
schemeusedby1OOOBase- T."
10832,"56Kmodem Amodemtechnology usingtwodifferent datarates:oneforuploading andone
fordownloading fromtheInternet."
10833,"10711072 GLOSSARY
A
Abstract SyntaxNotation 1(ASN.l) Astandard forrepresenting simpleandstructured
data."
10834,accesspoint(AP)AcentralbasestationinaBSS.
10835,"acknowledgment (ACK) Aresponse sentbythereceivertoindicatethesuccessful receipt
ofdata."
10836,"activedocument IntheWorldWideWeb,adocument executed atthelocalsiteusingJava."
10837,"adaptive deltamodulation Adeltamodulation technique inwhichthevalueofdelta
changesaccording totheamplitude oftheanalogsignal."
10838,"add/drop multiplexer ASONETdevicethatremoves andinsertssignalsinapathwithout
demultiplexing andre-multiplexing."
10839,"additive increase Withslowstart,acongestion avoidance strategyinwhichthewindowsize
isincreased byjustonesegment insteadofexponentially."
10840,"addressaggregation Amechanism inwhichtheblocksofaddresses forseveralorganizations
areaggregated intoonelargerblock."
10841,"Address Resolution Protocol (ARP) InTCPIIP,aprotocol forobtaining thephysical
addressofanodewhentheInternetaddressisknown."
10842,addressspaceThetotalnumberofaddresses available byaprotocol.
10843,"ADSLLiteAsplitterless ADSL.Thistechnology allowsanASDLLitemodemtobeplugged
directlyintoatelephone jackandconnected tothecomputer."
10844,"Thesplittingisdoneatthetelephone
company."
10845,"Advanced Encryption Standard (AES) Asecret-key cryptosystem adaptedbyNISTto
replaceDES."
10846,"Advanced MobilePhoneSystem(AMPS) ANorthAmerican analogcellularphone
systemusingFDMA."
10847,"Advanced Research Projects Agency(ARPA) Thegovernment agencythatfunded
ARPANET."
10848,"Advanced Research Projects AgencyNetwork (ARPANET) Thepacket-switching
networkthatwasfundedbyARPA."
10849,"ALOHA Theoriginalrandommultiple accessmethodinwhichastationcansendaframeany
timeithasonetosend."
10850,"alternate markinversion (AMI) Adigital-to-digital bipolarencoding methodinwhich
theamplitude representing 1alternates between positiveandnegative voltages."
10851,"American National Standards Institute (ANSI) Anationalstandards organization that
definesstandards intheUnitedStates."
10852,"American Standard CodeforInformation Interchange (ASCII) Acharacter code
developed byANSIthatusedextensively fordatacommunication."
10853,"amplitude Thestrengthofasignal,usuallymeasured involts."
10854,"amplitude modulation (AM)Ananalog-to-analog conversion methodinwhichthecarrier
signal'samplitude varieswiththeamplitude ofthemodulating signal."
10855,"amplitude shiftkeying(ASK) Amodulation methodinwhichtheamplitude ofthecarrier
signalisvariedtorepresent binary0or1."
10856,"analogdataDatathatarecontinuous andsmoothandnotlimitedtoaspecificnumberofvalues.GLOSSARY 1073
analogsignal Acontinuous waveform thatchangessmoothly overtime."
10857,"analog-to-analog conversion Therepresentation ofanaloginformation byananalog
signal."
10858,analog-to-digital conversion Therepresentation ofanaloginformation byadigitalsignal.
10859,"angleofincidence Inoptics,theangleformedbyalightrayapproaching theinterface
between twomediaandthelineperpendicular totheinterface."
10860,"anycastaddress Anaddressthatdefinesagroupofcomputers withaddresses thathavethe
samebeginning."
10861,aperiodic signal Asignalthatdoesnotexhibitapatternorrepeating cycle.
10862,applet Acomputer program forcreatinganactiveWebdocument.
10863,ItisusuallywritteninJava.
10864,"application adaptation layer(AAL) AlayerinATMprotocol thatbreaksuserdatainto
48-bytepayloads."
10865,application layerThefifthlayerintheInternetmodel;provides accesstonetworkresources.
10866,"areaAcollection ofnetworks, hosts,androutersallcontained withinanautonomous system."
10867,association Aconnection inSCTP.
10868,"asymmetric digitalsubscriber line(ADSL) Acommunication technology inwhichthe
downstream datarateishigherthantheupstream rate."
10869,"asynchronous balanced mode(ABM) InHDLC,acommunication modeinwhichall
stationsareequal."
10870,"asynchronous connectionless link(ACL) AlinkbetweenaBluetooth masterandslave
inwhichacorrupted payloadisretransmitted."
10871,"Asynchronous Transfer Mode(ATM) Awideareaprotocolfeaturing highdatarates
andequal-sized packets(cells);ATMissuitablefortransferring text,audio,andvideodata."
10872,"asynchronous transmission Transfer ofdatawithstartandstopbites)andavariabletime
intervalbetweendataunits."
10873,ATMLANALANusingATMtechnology.
10874,"ATMlayerAlayerinATMthatprovides routing,trafficmanagement, switching, andmulti­
plexingservices."
10875,"attachment unitinterface (AUI) AlOBase5 cablethatperforms thephysicalinterface
functions betweenthestationandthetransceiver."
10876,attenuation Thelossofasignal'senergyduetotheresistance ofthemedium.
10877,audio Recording ortransmitting ofsoundormusic.
10878,authentication Verification ofthesenderofamessage.
10879,"Authentication Header(AB)Protocol AprotocoldefinedbyIPSecatthenetworklayer
thatprovidesintegritytoamessagethrough thecreationofadigitalsignature byahashingfunction."
10880,authentication server(AS)TheKDCintheKerberos protocol.
10881,"automatic repeatrequest(ARQ) Anerror-control methodinwhichcorrection ismadeby
retransmission ofdata."
10882,"autonegotiation AFastEthernet featurethatallowstwodevicestonegotiate themodeor
datarate."
10883,"autonomous system(AS)Agroupofnetworks androutersundertheauthority ofasingle
administration.1074 GLOSSARY
B
backward explicitcongestion notification (BECN) AbitintheFrameRelaypacket
thatnotifiesthesenderofcongestion."
10884,band-pass channel Achannelthatcanpassarangeoffrequencies.
10885,"bandwidth Thedifference between thehighestandthelowestfrequencies ofacomposite
signal.Italsomeasures theinformation-carrying capacityofalineoranetwork."
10886,"bandwidth ondemand Adigitalservicethatallowssubscribers higherspeedsthroughthe
useofmultiplelines."
10887,"bandwidth-delay product Ameasureofthenumberofbitsthatcanbesentwhilewaiting
fornewsfrom the receiver."
10888,"banyanswitch Amultistage switchwithmicroswitchesateachstagethatroutethepackets
basedontheoutputportrepresented asabinarystring."
10889,Barkersequence Asequence of11bitsusedforspreading.
10890,"baseband transmission Transmission ofdigitaloranalogsignalwithoutmodulation using
alow-pass channel."
10891,"baseheader InIPv6,themainheaderofthedatagram."
10892,"baseline wandering Indecoding adigitalsignal,thereceivercalculates arunningaverage
ofthereceivedsignalpower.Thisaverageiscalledthebaseline."
10893,"AlongstringofOsorIscan
causeadriftinthebaseline(baseline wandering) andmakeitdifficultforthereceivertodecode
correctly."
10894,"BasicEncoding Rule(BER) Astandard thatencodesdatatobetransferred througha
network."
10895,BasicLatin ASCIIcharacter set.
10896,"basicserviceset(BSS) ThebuildingblockofawirelessLANasdefinedbytheIEEE
802.11standard."
10897,"Batcher-banyan switch Abanyanswitchthatsortsthearrivingpacketsbasedontheir
destination port."
10898,"baudrateThenumberofsignalelements transmitted persecond.Asignalelementconsistsof
oneormorebits."
10899,Bayone-Neill-Concelman (BNC)connector Acommon coaxialcableconnector.
10900,"bidirectional authentication Anauthentication methodinvolving achallenge anda
response fromsendertoreceiverandviceversa."
10901,"bidirectional frame(B-frame) AnMPEGframethatisrelatedtothepreceding and
following I-frameorP-frame."
10902,"binaryexponential backup Incontention accessmethods, aretransmission delaystrategy
usedbyasystemtodelayaccess."
10903,binarynotation Representation ofIPaddresses inbinary.
10904,biphase Atypeofpolarencoding wherethesignalchangesatthemiddleofthebitinterval.
10905,Manchester anddifferential Manchester areexamples ofbiphaseencoding.
10906,"bipolarencoding Adigital-to-digital encoding methodinwhich0amplitude represents
binary0andpositiveandnegativeamplitudes represent alternate Is.
bipolarwith8-zerosubstitution (B8ZS) Ascrambling technique inwhichastreamof8
zerosarereplaced byapredefined patterntoimprovebitsynchronization.GLOSSARY 1075
bitBinarydigit.Thesmallestunitofdata(0or1)."
10907,bitrateThenumberofbitstransmitted persecond.
10908,"bitstuffing Inabit-oriented protocol, theprocessofaddinganextrabitinthedatasectionof
aframetopreventasequence ofbitsfromlookinglikeaflag."
10909,bit-oriented protocol Aprotocolinwhichthedataframeisinterpreted asasequence ofbits.
10910,blockcipher Anencryption/decryption algorithm thathasablockofbitsasitsbasicunit.
10911,"blockcodeAnerrordetection/correction codeinwhichdataaredividedintounitscalled
datawords."
10912,Redundant bitsareaddedtoeachdataword tocreateacodeword.
10913,blockcoding Acodingmethodtoensuresynchronization anddetection oferrors.
10914,"blocking Aneventthatoccurswhenaswitched networkisworking atitsfullcapacity and
cannotacceptmoreinput."
10915,"Bluetooth AwirelessLANtechnology designed toconnectdevicesofdifferentfunctions such
astelephones andnotebooks inasmallareasuchasaroom."
10916,"Bootstrap Protocol (BOOTP) Theprotocol thatprovides configuration information from
atable(file)."
10917,"BorderGateway Protocol (BGP) Aninterautonomous systemroutingprotocolbasedon
pathvectorrouting."
10918,"bridge Anetworkdeviceoperating atthefirsttwolayersoftheInternetmodelwithfiltering
andforwarding capabilities."
10919,"broadband transmission Transmission ofsignalsusingmodulation ofahigherfrequency
signal.Thetermimpliesawide-bandwidth datacombined fromdifferent sources."
10920,broadcast address Anaddressthatallowstransmission ofamessagetoallnodesofanetwork.
10921,"broadcast/unknown server(BUS) Aserverconnected toanATMswitchthatcanmulticast
andbroadcast franles."
10922,broadcasting Transmission ofamessage toallnodesinanetwork.
10923,browser Anapplication program thatdisplaysaWWWdocument.
10924,"Abrowserusuallyuses
otherInternetservicestoaccessthedocument."
10925,"BSS-transition mobility InawirelessLAN,astationthatcanmovefromoneBSSto
anotherbutisconfined insideoneESS."
10926,bucketbrigadeattack Seeman-in-the middleattack.
10927,bursterrorErrorinadataunitinwhichtwoormorebitshavebeenaltered.
10928,burstydataDatawithvaryinginstantaneous transmission rates.
10929,bustopology Anetworktopology inwhichallcomputers areattached toasharedmedium.
10930,"bytestuffing Inabyte-oriented protocol, theprocessofaddinganextrabyteinthedatasection
ofaframetopreventabytefromlookinglikeaflag."
10931,"byte-oriented protocol Aprotocol inwhichthedatasectionoftheframeisinterpreted asa
sequence ofbytes(characters)."
10932,"c
cablemodem Atechnology inwhichtheTVcableprovides Internetaccess."
10933,"cablemodemtransmission system(CMTS) Adeviceinstalled inside the distribution
hubthatreceivesdatafromtheInternetandpassesthemtothecombiner.1076 GLOSSARY
cableTVnetwork Asystemusingcoaxialorfiberopticcablethatbringsmultiplechannels
ofvideoprograms intohomes."
10934,"caching Thestoringofinformation inasmall,fastmemory."
10935,Caesarcipher AshiftcipherusedbyJuliusCaesarwiththekeyvalueof3.
10936,"carrierextension Atechnique inGigabitEthernetthatincreases theminimum lengthofthe
frametoachieveahighermaximum cablelength."
10937,"carriersensemultiple access(CSMA) Acontention accessmethodinwhicheachstation
listenstothelinebeforetransmitting data."
10938,"carriersensemultiple accesswithcollision avoidance (CSMA/CA) Anaccess
methodinwhichcollision isavoided."
10939,"carriersensemultiple accesswithcollision detection (CSMA/CD) Anaccessmethod
inwhichstationstransmitwhenever thetransmission mediumisavailable andretransmit when
collisionoccurs."
10940,"carriersignal Ahighfrequency signalusedfordigital-to-analog oranalog-to-analog modu­
lation.Oneofthecharacteristics ofthecarriersignal(amplitude, frequency, orphase)ischanged
according tothemodulating data."
10941,"cellAsmall,fixed-size dataunit;also,incellulartelephony, ageographical areaservedbya
celloffice."
10942,cellnetwork Anetworkusingthecellasitsbasicdataunit.
10943,"cellular telephony Awirelesscommunication technique inwhichanareaisdividedinto
cells.Acellisservedbyatransmitter."
10944,"Certification Authority (CA)Anagencysuchasafederalorstateorganization thatbinds
apublickeytoanentityandissuesacertificate."
10945,"Challenge Handshake Authentication Protocol (CHAP) InPPp,athree-way handshaking
protocolusedforauthentication."
10946,channel Acommunications pathway.
10947,"channelization Amultipleaccessmethodinwhichtheavailable bandwidth ofalinkis
sharedintime."
10948,character-oriented protocol Seebyte-oriented protocol.
10949,"checksum Avalueusedforerrordetection.Itisformedbyaddingdataunitsusingone's
complement arithmetic andthencomplementing theresult."
10950,"chipInCDMA,anumberinacodethatisassignedtoastation."
10951,chokepointApacketsentbyaroutertothesourcetoinformitofcongestion.
10952,chunk Aunitoftransmission inSCTP.
10953,cipher Anencryption/decryption algorithm.
10954,"cipherblockchaining (CBC)modeADESandtripleDESoperation modeinwhichthe
encryption (ordecryption) ofablockdependsonallpreviousblocks."
10955,"cipherfeedback mode(CFB) ADESandtripleDESoperation modeinwhichdataissent
andreceivedIbitatatime,witheachbitindependent ofthepreviousbits."
10956,"cipherstreammode(CSM) ADESandtripleDESoperation modeinwhichdataissent
andreceived1byteatatime."
10957,"ciphersuiteAlistofpossibleciphers.GLOSSARY 1077
ciphertext Theencrypted data."
10958,"circuitswitching Aswitching technology thatestablishes anelectrical connection between
stationsusingadedicated path."
10959,"cladding Glassorplasticsurrounding thecoreofanopticalfiber;theopticaldensityofthe
claddingmustbelessthanthatofthecore."
10960,"classfuladdressing AnIPv4addressing mechanism inwhichtheIPaddressspaceisdivided
into5classes:A,B, C,D,andE.Eachclassoccupies somepartofthewholeaddressspace."
10961,"classless addressing Anaddressing mechanism inwhichtheIPaddressspaceisnotdivided
intoclasses."
10962,"Classless InterDomain Routing (CIDR) Atechnique toreducethenumberofrouting
tableentrieswhensupemetting isused."
10963,"clientprocess Arunningapplication programonalocalsitethatrequestsservicefroma
runningapplication programonaremotesite."
10964,"client-server model Themodelofinteraction betweentwoapplication programs inwhicha
programatoneend(client)requestsaservicefromaprogramattheotherend(server)."
10965,closed-loop congestion control Amethodtoalleviatecongestion afterithappens.
10966,"coaxialcableAtransmission mediumconsisting ofaconducting core,insulating material,
andasecondconducting sheath."
10967,"codedivision multiple access(CDMA) Amultipleaccessmethodinwhichonechannel
carriesalltransmissions simultaneously."
10968,codeword Theencodeddataword.
10969,"ColdFusion Adynamicwebtechnology thatallowsthefusionofdataitemscomingfroma
conventional database."
10970,"collision Theeventthatoccurswhentwotransmitters sendatthesametimeonachannel
designed foronlyonetransmission atatime;datawillbedestroyed."
10971,collision domain Thelengthofthemediumsubjecttocollision.
10972,"committed burstsize(Be)Themaximum numberofbitsinaspecifictimeperiodthata
FrameRelaynetworkmusttransferwithoutdiscarding anyframes."
10973,committed information rate(CIR)Thecommitted burstsizedividedbytime.
10974,"common carrier Atransmission facilityavailable tothepublicandsubjecttopublicutility
regulation."
10975,"Common Gateway Interface (CGI) Astandardforcommunication betweenHTTPservers
andexecutable programs."
10976,CGIisusedincreatingdynamicdocuments.
10977,"community antenna TV(CATV) Acablenetworkservicethatbroadcasts videosignalsto
locations withpoorornoreception."
10978,"compatible address AnIPv6addressconsisting of96bitsofzerofollowed by32bitsof
IPv4."
10979,"competitive localexchange carrier(CLEC) Atelephone company thatcannotprovide
maintelephone services; instead,otherservicessuchasmobiletelephone serviceandtollcalls
insideaLATAareprovided."
10980,"complementary codekeying(CCK) AnHR-DSSS encoding methodthatencodesfouror
eightbitsintoonesymboL
composite signal Asignalcomposed ofmorethanonesinewave.1078 GLOSSARY
congestion Excessive network orinternetwork trafficcausingageneraldegradation ofservice."
10981,connecting device Atoolthatconnects computers ornetworks.
10982,"connection establishment Thepreliminary setupnecessary foralogicalconnection priorto
actualdatatransfer."
10983,"connectionless service Aservicefordatatransferwithoutconnection establishment or
terminati on."
10984,"constant bitrate(CBR) ThedatarateofanATMserviceclassthatisdesigned forcustomers
requiring real-time audioorvideoservices."
10985,"constellation diagram Agraphical representation ofthephaseandamplitude ofdifferent bit
combinations indigital-to-analog modulation."
10986,"Consultative Committee forInternational Telegraphy andTelephony (CCITT) An
international standards groupnowknownasthelTD-T."
10987,"contention Anaccessmethodinwhichtwoormoredevicestrytotransmitatthesametime
onthesamechannel."
10988,"controlled access Amultiple accessmethodinwhichthestationsconsultoneanotherto
determine whohastherighttosend."
10989,"convergence sublayer (CS)InATMprotocol, theupperAALsublayer thataddsaheader
oratrailertotheuserdata."
10990,"cookie Astringofcharacters thatholdssomeinformation abouttheclientandmustbe
returned tothe server untouched."
10991,coreTheglassorplasticcenterofanopticalfiber.
10992,"Core-Based Tree(CBT) Inmulticasting, agroup-shared protocol thatusesacenterrouter
astherootofthetree."
10993,"countrydomain Asubdomain intheDomainNameSystemthatusestwocharacters asthe
lastsuffix."
10994,"crossbar switch Aswitchconsisting ofalatticeofhorizontal andverticalpaths.Atthe
intersection ofeachhorizontal andverticalpath,thereisacrosspoint thatcanconnecttheinput
totheoutput."
10995,crosspoint Thejunctionofaninputandanoutputonacrossbar switch.
10996,crosstalk Thenoiseonalinecausedbysignalstraveling alonganotherline.
10997,"cryptography Thescienceandartoftransforming messages tomakethemsecureand
immunetoattacks."
10998,"cycliccodeAlinearcodeinwhichthecyclicshifting(rotation) ofeachcodeword creates
anothercodeword."
10999,"cyclicredundancy check(CRC) Ahighlyaccurateerror-detection methodbasedon
interpreting apatternofbitsasapolynomial."
11000,"D
dataelement Thesmallestentitythatcanrepresent apieceofinformation."
11001,Abit.
11002,"dataencryption standard (DES) TheU.S.government standard encryption methodfor
nonmilitary andnonclassified use."
11003,"datalinkconnection identifier (DLCI) Anumberthatidentifies thevirtualcircuitin
FrameRelay.GLOSSARY 1079
datalinkcontrol Theresponsibilities ofthedatalinklayer:flowcontrolanderrorcontrol."
11004,datalinklayerThesecondlayerintheInternetmodel.Itisresponsible fornode-to-node delivery.
11005,"DataOverCableSystemInterface Specifications (DOCSIS) Astandard fordata
transmission overanHFCnetwork."
11006,datarateThenumberofdataelements sentinonesecond.
11007,"datatransfer phase Theintermediate phaseincircuit-switched orvirtual-circuit networkin
whichdatatransfertakesplace."
11008,"datatransparency Theabilitytosendanybitpatternasdatawithoutitbeingmistaken for
controlbits."
11009,"datagram Inpacketswitching, anindependent dataunit."
11010,"datagram network Apacket-switched networkinwhichpacketsareindependent fromeach
other."
11011,dataword Thesmallestblockofdatainblockcoding.
11012,"defactostandard Aprotocol thathasnotbeenapproved byanorganized bodybutadopted
asastandard throughwidespread use."
11013,dejurestandard Aprotocol thathasbeenlegislated byanofficially recognized body.
11014,"deadlock Asituation inwhichataskcannotproceedbecauseitiswaitingforaneventhatwill
neveroccur."
11015,decibel(dB)Ameasure oftherelativestrengthoftwosignalpoints.
11016,decryption Recovery oftheoriginalmessage fromtheencrypted data.
11017,defaultmaskThemaskforanetworkthatisnotsubnetted.
11018,"defaultrouting Aroutingmethodinwhicharouterisassigned toreceiveallpacketswithno
matchintheroutingtable."
11019,"DefenseAdvanced Research Projects Agency(DARPA) Agovernment organization,
which,underthenameofARPAfundedARPANET andtheInternet."
11020,"deltamodulation Ananalog-to-digital conversion technique inwhichthevalueofthedigital
signalisbasedonthedifference between thecurrentandtheprevious samplevalues."
11021,demodulation Theprocessofseparating thecarriersignalfromtheinformation-bearing signal.
11022,"demultiplexer (DEMUX) Adevicethatseparates amultiplexed signalintoitsoriginal
components."
11023,"denialofserviceattack Aformofattackinwhichthesiteisfloodedwithsomanyphony
requeststhatiseventually forcedtodenyservice."
11024,"densewave-division multiplexing (DWDM) AWDMmethodthatcanmultiplex avery
largenumberofchannels byspacingchannels closertogether."
11025,"differential Manchester encoding Adigital-to-digital polarencoding methodthatfeaturesa
transition atthemiddleofthebitintervalaswellasaninversion atthebeginning ofeach1bit."
11026,Differentiated Services (DSorDiffserv) Aclass-based QoSmodeldesigned forIF.
11027,"Diffie-Hellman protocol Akeymanagement protocol thatprovides aone-time sessionkey
fortwoparties."
11028,digest Acondensed versionofadocument.
11029,"digitalAMPS(D-AMPS) Asecond-generation cellularphonesystemthatisadigitalversion
ofAMPS.1080 GLOSSARY
digitaldataDatarepresented bydiscretevaluesorconditions."
11030,digitaldataservice(DDS) Adigitalversionofananalogleasedlinewitharateof64Kbps.
11031,digitalsignal Adiscretesignalwithalimitednumberofvalues.
11032,"digitalsignal(DS)service Atelephone company servicefeaturing ahierarchy ofdigital
signals."
11033,digitalsignature Amethodtoauthenticate thesenderofamessage.
11034,"digitalsubscriber line(DSL) Atechnology usingexistingtelecommunication networks to
accomplish high-speed deliveryofdata,voice,video,andmultimedia."
11035,"digitalsubscriber lineaccessmultiplexer (DSLAM) Atelephone company sitedevice
thatfunctions likeanADSLmodem."
11036,digital-to-analog conversion Therepresentation ofdigitalinformation byananalogsignal.
11037,digital-to-digital conversion Therepresentation ofdigitalinformation byadigitalsignal.
11038,digitization Conversion ofanaloginformation todigitalinformation.
11039,"Dijkstra's algorithm Inlinkstaterouting,analgorithm thatfindstheshortestpathtoother
routers."
11040,directcurrent (DC)Azero-frequency signalwithaconstantamplitude.
11041,directdelivery Adeliveryinwhichthefinaldestination ofthepacketisahostconnected to·c.
11042,thesamephysicalnetworkasthesender.
11043,"directsequence spreadspectrum (DSSS) Awirelesstransmission methodinwhicheach
bittobesentbythesenderisreplacedbyasequence ofbitscalledachipcode."
11044,"discard eligibility (DE)Abitthatidentifies apacketthatcanbediscarded ifthereis
congestion inthenetwork."
11045,"discrete cosinetransform (DCT) AJPEGphaseinwhichatransformation changesthe
64valuessothattherelativerelationships betweenpixelsarekeptbuttheredundancies arerevealed."
11046,"discrete multitone technique (DMT)Amodulation methodcombining elements ofQAM
andFDM."
11047,"Distance VectorMulticast Routing Protocol (DVMRP) Aprotocolbasedondistance
vectorroutingthathandlesmulticast routinginconjunction withIGMP."
11048,"distance vectorrouting Aroutingmethodinwhicheachroutersendsitsneighbors alistof
networks itcanreachandthedistancetothatnetwork."
11049,"distortion Anychangeinasignalduetonoise,attenuation, orotherinfluences."
11050,"distributed coordination function (DCF) ThebasicaccessmethodinwirelessLANs;
stationscontendwitheachothertogetaccesstothechannel."
11051,distributed database Information storedinmanylocations.
11052,"distributed interframe space(DIFS) InwirelessLANs,aperiodoftimethatastation
waitsbeforesendingacontrolframe."
11053,"distributed processing Astrategyinwhichservicesprovided forthenetworkresideat
multiplesites."
11054,DNSserver Acomputer thatholdsinformation aboutthenamespace.
11055,"domainnameIntheDNS,asequence oflabelsseparated bydots."
11056,"domainnamespaceAstructure fororganizing thenamespaceinwhichthenamesare
definedinaninverted-tree structure withtherootatthetop.GLOSSARY 1081
DomainNameSystem(DNS) ATCP/IPapplication servicethatconvertsuser-friendly
namestoIPaddresses."
11057,"dotted-decimal notation AnotationdevisedtomaketheIPaddresseasiertoread;each
byteisconverted toitsdecimalequivalent and then setofffromitsneighbor byadecimal."
11058,downlink Transmission fromasatellitetoanearthstation.
11059,downloading Retrieving afileOrdatafromaremotesite.
11060,"dynamic document A Webdocument createdbyrunningaCOlprogram attheserver
site."
11061,"Dynamic DomainNameSystem(DDNS) AmethodtoupdatetheDNSmasterfile
dynamically."
11062,"Dynamic HostConfiguration Protocol (DHCP) Anextension toBOOTPthatdynamically
assignsconfiguration information."
11063,dynamic mapping Atechnique inwhichaprotocolisusedforaddressresolution.
11064,"dynamic routing Routinginwhichtheroutingtableentriesareupdatedautomatically bythe
routingprotocol."
11065,"E
ElinesTheEuropean equivalent ofTlines."
11066,electromagnetic spectrum Thefrequency rangeoccupied byelectromagnetic energy.
11067,"electronic codeblock(ECB)modeADESandtripleDESoperation methodinwhicha
longmessage isdividedinto64-bitblocksbeforebeingencrypted separately."
11068,"Electronics Industries Association (EIA) Anorganization thatpromotes electronics
manufacturing concerns."
11069,"Ithasdeveloped interface standards suchasEIA-232, EIA-449, and
EIA-530."
11070,"Encapsulating Security Payload (ESP) AprotocoldefinedbyIPSecthatprovides privacy
aswellasacombination ofintegrity andmessage authentication."
11071,"encapsulation Thetechnique inwhichadataunitfromoneprotocolisplacedwithinthedata
fieldportionofthedataunitofanotherprotocol."
11072,"encryption Converting amessage intoanunintelligible formthatisunreadable unless
decrypted."
11073,endofficeAswitching officethatistheterminus forthelocalloops.
11074,endsystem AsenderOrreceiverofdata.
11075,ephemeral portnumber Aportnumberusedbytheclient.
11076,errorcontrol Thehandling oferrorsindatatransmission.
11077,Ethernet AlocalareanetworkusingtheCSMAlCD accessmethod.
11078,"excessburstsize(Be)InFrameRelay,themaximum numberofbitsinexcessofBethatthe
usercansendduringapredefined periodoftime."
11079,"Extended ServiceSet(ESS) AwirelessLANservicecomposed oftwoormoreBSSswith
APsasdefinedbytheIEEE802.11standard."
11080,exteriorrouting Routingbetweenautonomous systems.
11081,"extranet AprivatenetworkthatusestheTCP/IPprotocol suitethatallowsauthorized access
fromoutsideusers.1082 GLOSSARY
F
FastEthernet Ethernetwithadatarateof100Mbps."
11082,"fastretransmission Retransmission ofasegmentintheTCPprotocolwhenthreeacknowledg­
mentshavebeenreceivedthatimplythelossorcorruption ofthatsegment."
11083,"FederalCommunications Commission (FCC) Agovernment agencythatregulates
radio,television, andtelecommunications."
11084,"fiber-optic cableAhigh-bandwidth transmission mediumthatcarriesdatasignalsinthe
formofpulsesoflight.Itconsistsofathincylinderofglassorplastic,calledthecore,surrounded
byaconcentric layerofglassorplasticcalledthecladding."
11085,"FileTransfer Protocol (FTP) InTCPIIP,anapplication layerprotocolthattransfers files
betweentwosites."
11086,filtering Aprocessinwhichabridgemakesforwarding decisions.
11087,finitestatemachine Amachinethatgoesthroughalimitednumberofstates.
11088,"firewall Adevice(usuallyarouter)installedbetweentheinternalnetworkofanorganization
andtherestoftheInternettoprovidesecurity."
11089,"first-in,first-out (FIFO)queue Aqueueinwhichthefirstiteministhefirstitemout."
11090,"flagAbitpatternoracharacter addedtothebeginning andtheendofaframetoseparatethe
frames."
11091,flatnamespaceAnamespaceinwhichthereisnohierarchical structure.
11092,flooding Saturation ofanetworkwithamessage.
11093,flowcontrol Atechnique tocontroltherateofflowofframes(packetsormessages).
11094,footprint AnareaonEarththatiscoveredbyasatelliteataspecifictime.
11095,forwarderrorcorrection Correction oferrorsatthereceiver.
11096,"forward explicitcongestion notification (FECN) AbitintheFrameRelaypacketthat
notifiesthedestination ofcongestion."
11097,forwarding Placingthepacketinitsroutetoitsdestination.
11098,"Fourieranalysis Themathematical technique usedtoobtainthefrequency spectrum ofan
aperiodic signalifthetime-domain representation isgiven."
11099,fragmentation Thedivisionofapacketintosmallerunitstoaccommodate aprotocol's MTU.
11100,frame Agroupofbitsrepresenting ablockofdata.
11101,"framebursting Atechnique inCSMAlCD GigabitEthernet inwhichmultipleframesare
logically connected toeachothertoresemble alongerframe."
11102,"FrameRelay Apacket-switching specification definedforthefirsttwolayersoftheInternet
model.Thereisnonetworklayer.Errorchecking isdoneonend-to-end basisinsteadofon
eachlink."
11103,"FrameRelayassembler/disassembler (FRAD) AdeviceusedinFrameRelaytohandle
framescomingfromotherprotocols."
11104,frequency Thenumberofcyclespersecondofaperiodicsignal.
11105,"frequency divisionmultiple access(FDMA) Amultipleaccessmethodinwhichthe
bandwidth isdividedintochannels."
11106,"frequency hopping spreadspectrum (FHSS) Awirelesstransmission methodinwhich
thesendertransmits atonecarrierfrequency forashortperiodoftime,thenhopstoanotherGLOSSARY 1083
carrierfrequency forthesameamountoftime,hopsagainforthesameamountoftime,andso
on.AfterNhops, the cycleisrepeated."
11107,"frequency modulation (FM)Ananalog-to-analog modulation methodinwhichthecarrier
signal'sfrequency varieswiththeamplitude ofthemodulating signal."
11108,"frequency shiftkeying(FSK) Adigital-to-analog encoding methodinwhichthefrequency
ofthecarriersignalisvariedtorepresent binary0or1."
11109,"frequency-division multiple access(FDMA) Anaccessmethodtechnique inwhich
multiple sourcesuseassigned bandwidth inadatacommunication band."
11110,"frequency-division multiplexing (FDM) Thecombining ofanalogsignalsintoasingle
signal."
11111,frequency-domain plotAgraphical representation ofasignal'sfrequency components.
11112,"full-duplex mode Atransmission modeinwhichbothpartiescancommunicate
simultaneously."
11113,"full-duplex switched Ethernet Ethernet inwhicheachstation,initsownseparatecollision
domain,canbothsendandreceive."
11114,"fullyqualified domainname (FQDN) Adomainnameconsisting oflabelsbeginning
withthehostandgoingbackthrougheachleveltotherootnode."
11115,fundamental frequency Thefrequency ofthedominant sinewaveofacomposite signal.
11116,"G
gatekeeper IntheH.323standard, aserverontheLANthatplaystheroleoftheregistrar
server."
11117,"gateway Adeviceusedtoconnecttwoseparatenetworks thatusedifferent communication
protocols."
11118,genericdomain Asubdomain inthedomainnamesystemthatusesgenericsuffixes.
11119,"geographical routing Aroutingtechnique inwhichtheentireaddressspaceisdividedinto
blocksbasedonphysical landmasses."
11120,GigabitEthernet Ethernet witha1000Mbpsdatarate.
11121,"GlobalPositioning System(GPS) AnMEOpublicsatellitesystemconsisting of24satellites
andusedforlandandseanavigation."
11122,GPSisnotusedforcommunications.
11123,"GlobalSystemforMobileCommunication (GSM) Asecond-generation cellular
phonesystemusedinEurope."
11124,"Globalstar AnLEOsatellitesystemwith48satellites insixpolarorbitswitheachorbithosting
eightsatellites."
11125,"Go-Back-N ARQAnerror-control methodinwhichtheframeinerrorandallfollowing
framesmustberetransmitted."
11126,grafting Resumption ofmulticast messages.
11127,"groundpropagation Propagation ofradiowavestlU""oughthelowestportionoftheatmosphere
(hugging theearth)."
11128,"group-shared treeAmulticast routingfeatureinwhicheachgroupinthesystemsharesthe
sametree."
11129,guardbandAbandwidth separating twosignals.
11130,"guidedmedia Transmission mediawithaphysical boundary.1084 GLOSSARY
H
H.323Astandard designed byITUtoallowtelephones onthepublictelephone networktotalk
tocomputers (calledterminals inH.323)connected totheInternet."
11131,"half-duplex mode Atransmission modeinwhichcommunication canbetwo-way butnotat
thesametime."
11132,"Hamming codeAmethodthataddsredundant bitstoadataunittodetectandcorrectbit
errors."
11133,"Hamming distance Thenumberofdifferences between thecorresponding bitsintwo
datawords."
11134,handoff Changing toanewchannelasamobiledevicemovesfromonecelltoanother.
11135,"harmonics Components ofadigitalsignal,eachhavingadifferent amplitude, frequency, and
phase."
11136,hashfunction Analgorithm thatcreatesafixed-size digestfromavariable-length message.
11137,"hashed-message authentication code(HMAC) AMACbasedonakeylesshashfunction
suchasSHA-l."
11138,header Controlinformation addedtothebeginning ofadatapacket.
11139,hertz(Hz)Unitofmeasurement forfrequency.
11140,"hexadecimal colonnotation InIPv6,anaddressnotationconsisting of32hexadecimal
digits,witheveryfourdigitsseparated byacolon."
11141,"hierarchical routing Aroutingtechnique inwhichtheentireaddressspaceisdividedinto
levelsbasedonspecificcriteria."
11142,"highbitratedigitalsubscriber line(HDSL) AservicesimilartotheTl-linethatcan
operateatlengthsupto3.6km."
11143,"HighRateDirectSequence SpreadSpectrum (HR-DSSS) Asignalgeneration
methodsimilartoDSSSexceptfortheencoding method(CCK)."
11144,"High-level DataLinkControl(HDLC) Abit-oriented datalinkprotocol definedby
theISO."
11145,"hopcount Thenumberofnodesalongaroute.Itisameasurement ofdistanceinrouting
algorithms."
11146,hop-to-hop delivery Transmission offramesfromonenodetothenext.
11147,hornantenna Ascoop-shaped antennausedinterrestrial microwave communication.
11148,hostAstationornodeonanetwork.
11149,hostid ThepartofanIPaddressthatidentifies ahost.
11150,"host-specific routing AroutingmethodinwhichthefullIPaddressofahostisgiveninthe
routingtable."
11151,hubAcentraldeviceinastartopology thatprovides acommon connection amongthenodes.
11152,"Huffman encoding Astatistical compression methodusingvariable-length codestoencode
asetofsymbols."
11153,hybridnetwork AnetworkwithaprivateinternetandaccesstotheglobalInternet.
11154,"hybrid-fiber-coaxial (HFC)network Thesecondgeneration ofcablenetworks; uses
fiberopticandcoaxialcable."
11155,"hypertext Information containing textthatislinkedtootherdocuments throughpointers.GLOSSARY 1085
HyperText Markup Language (HTML) Thecomputer language forspecifying the
contentsandformatofawebdocument."
11156,"Itallowsadditional texttoincludecodesthatdefine
fonts,layouts,embedded graphics, andhypertext links."
11157,"HyperText Transfer Protocol (HTTP) Anapplication serviceforretrieving aweb
document."
11158,"I
inbandsignaling Usingthesamechannelfordataandcontroltransfer."
11159,"incumbent localexchange carrier(ILEC) Atelephone company thatprovided services
before1996andistheownerofthecablingsystem."
11160,"indirect delivery Adeliveryinwhichthesourceanddestination ofapacketareindifferent
networks."
11161,"infrared waveAwavewithafrequency between300GHzand400THz;usuallyusedfor
short-range communications."
11162,"innerproduct Anumberproduced bymultiplying twosequences, elementbyelement,and
summing theproducts."
11163,"Institute ofElectrical andElectronics Engineers (IEEE) Agroupconsisting of
professional engineers whichhasspecialized societies whosecommittees preparestandards in
members' areasofspecialty."
11164,Integrated Services (IntServ) Aflow-based QoSmodeldesigned forIP.
11165,interactive audio/video Real-time communication withsoundand images.
11166,"interautonomous systemrouting protocol Aprotocoltohandletransmissions between
autonomous systems."
11167,interdomain routing Routingamongautonomous systems.
11168,"interexchange carrier(IXC) Along-distance company that,priortotheActof1996,
provided communication servicesbetweentwocustomers indifferentLATAs.
interface Theboundary betweentwopiecesofequipment."
11169,"Italsoreferstomechanical, electrical,
andfunctional characteristics oftheconnection."
11170,interference Anyundesired energythatinterferes withthedesiredsignals.
11171,"interframe space(IFS)InwirelessLANs,atimeintervalbetweentwoframestocontrol
accesstothechannel."
11172,"InterimStandard 95(IS-95) Oneofthedominant second-generation cellulartelephony
standards inNorthAmerica."
11173,interior routing Routinginsideanautonomous system.
11174,"interleaving Inmultiplexing, takingaspecificamountofdata from eachdeviceinaregular
order."
11175,"International Organization ofStandardization (ISO)Aworldwide organization that
definesanddevelops standards onavarietyoftopics."
11176,"International Telecommunications Union-Telecommunication Standardization
Sector(ITU-T)Astandards organization formerly knownastheCCITT."
11177,"internet Acollection ofnetworks connected byinternetworking devicessuchasroutersor
gateways."
11178,"Internet AglobalinternetthatusestheTCPIIPprotocolsuite.1086 GLOSSARY
Internet address A32-bitorl28-bitnetwork-layer addressusedtouniquely defineahoston
aninternetusingtheTCP/IPprotocol."
11179,"Internet Architecture Board(lAB) Thetechnical advisertotheISOC;oversees the
continuing development oftheTCP/IPprotocol suite."
11180,"Internet Assigned Numbers Authority (lANA) Agroupsupported bytheU.S.govern­
mentthatwasresponsible forthemanagement ofInternetdomainnamesandaddresses until
October1998."
11181,"Internet ControlMessage Protocol (ICMP) Aprotocol intheTCP/IPprotocol suite
thathandleserrorandcontrolmessages."
11182,"Internet ControlMessage Protocol, version6(ICMPv6) Aprotocol inIPv6that
handleserrorandcontrolmessages."
11183,"Internet Corporation forAssigned NamesandNumbers (ICANN) Aprivate,
nonprofit corporation managed byaninternational boardthatassumed lANAoperations."
11184,"Internet draftAworkingInternetdocument (aworkinprogress) withnoofficialstatusanda
six-month lifetime."
11185,"Internet Engineering Steering Group(IESG) Anorganization thatoversees theactivities
ofIETF."
11186,"Internet Engineering TaskForce(IETF) Agroupworkingonthedesignanddevelopment
oftheTCP/IPprotocol suiteandtheIntemet."
11187,"Internet GroupManagement Protocol (IGMP) Aprotocol intheTCP/IPprotocol
suitethathandlesmulticasting."
11188,"Internet KeyExchange (IKE) Aprotocol designed tocreatesecurityassociations in
SADBs.
Internet MailAccessProtocol, version4(IMAP4) Acomplex andpowerful protocol
tohandlethetransmission ofelectronic mail."
11189,"Internet MobileCommunication (ITM-2000) AnITUissuedblueprint thatdefines
criteriaforthirdgeneration cellulartelephony."
11190,"Internet model A5-layerprotocolstackthatdominates datacommunications andnetworking
today."
11191,"Internet Network Information Center(INTERNIC) Anagencyresponsible for
collecting anddistributing information aboutTCP/IPprotocols."
11192,"Internet Protocol (lP)Thenetwork-layer protocol intheTCP/IPprotocol suitegoverning
connectionless transmission acrosspacketswitching networks."
11193,Internet Protocol nextgeneration (IPng) SeeInternetProtocol version6(IPv6).
11194,"Internet Protocol version4(IPv4) ThecurrentversionofInternetProtocoL
Internet Protocol, version6(IPv6) ThesixthversionoftheInternetProtocol."
11195,"Internet Research TaskForce(IRTF) Aforumofworkinggroupsfocusing onlong-term
research topicsrelatedtotheInternet."
11196,"Internet Security Association andKeyManagement Protocol (ISAKMP) Aprotocol
designed bytheNational SecurityAgency(NSA)thatactuallyimplements theexchanges defined
inIKE."
11197,"Internet serviceprovider (ISP)Usually,acompany thatprovides Internetservices."
11198,"Internet Society(ISOC) Thenonprofit organization established topublicize theInternet.GLOSSARY 1087
Internetstandard Athoroughly testedspecification thatisusefultoandadheredtobythose
whoworkwiththeInternet."
11199,Itisaformalized regulation thatmustbefollowed.
11200,internetwork (internet) Anetworkofnetworks.
11201,"Internetwork Protocol ControlProtocol (lPCP) InPPP,thesetofprotocols that
establish andterminate anetwork layerconnection forIPpackets."
11202,"internetworking Connecting severalnetworks together usinginternetworking devicessuch
asroutersandgateways."
11203,intranetAprivatenetwork thatusestheTCP/IPprotocol suite.
11204,inversedomain Asubdomain intheDNSthatfindsthedomainnamegiventheIPaddress.
11205,"inversemultiplexing Takingdatafromonesourceandbreaking itintoportions thatcanbe
sentaCroSSlower-speed lines."
11206,IPdatagram TheInternetworking Protocol dataunit.
11207,"IPSecurity (IPSec) Acollection ofprotocols designed bytheIETF(Internet Engineering
TaskForce)toprovidesecurityforapacketcarriedontheInternet."
11208,IrDAportAportthatallowsawireless keyboard tocommunicate withaPC.
11209,Iridium A66-satellite networkthatprovides communication fromanyEarthsitetoanother.
11210,"ISDNuserport(ISUP) Aprotocol attheupperlayerofSS7thatprovides servicessimilar
tothoseofanISDNnetwork."
11211,"isochronous transmission Atypeoftransmission in which theentirestreamofbitsis
synchronized underthecontrolofacommon clock."
11212,"iterative resolution Resolution oftheIPaddressin which theclientmaysenditsrequestto
multiple serverSbeforegettingananswer."
11213,"J
jamming signal InCSMAlCD, asignalsentbythefirststationthatdetectscollision toalert
everyotherstationofthesituation."
11214,JavaAprogramming language usedtocreateactiveWebdocuments.
11215,jitterAphenomenon inreal-time trafficcausedbygapsbetweenconsecutive packetsatthereceiver.
11216,"JointPhotographic ExpertsGroup(JPEG) Astandardforcompressing continuous-tone
picture."
11217,"K
Kerberos Anauthentication protocol usedbyWindows 2000."
11218,"keydistribution center(KDC) Insecretkeyencryption, atlustedthirdpartythatsharesa
keywitheachuser."
11219,"L
LANemulation (LANE) Localareanetwork emulation usingATMswitches."
11220,"LANemulation client(LEC) InATMLANs,clientsoftwarethatreceivesservicesfromaLES."
11221,"LANemulation server(LES) InATMLANs,serversoftware thatcreatesavirtualcircuit
between thesourceanddestination."
11222,"leakybucketalgorithm Analgorithm toshapeburstytraffic.1088 GLOSSARY
least-cost treeAnMOSPFfeatureinwhichthetreeisbasedonachosenmetricinsteadof
shortestpath."
11223,"legacyATMLANLANinwhichATMtechnology isusedasabackbone toconnect
traditional LANs.
linecoding Converting binarydataintosignals."
11224,"linearblockcodeAblockcodeinwhichaddingtwocodewords createsanother
codeword."
11225,"line-of-sight propagation Thetransmission ofveryhighfrequency signalsinstraightlines
directlyfromantennatoantenna."
11226,linkThephysical communication pathway thattransfers datafromonedevicetoanother.
11227,"LinkControlProtocol (LCP) APPPprotocolresponsible forestablishing, maintaining,
configuring, andterminating links."
11228,linklocaladdress AnIPv6addressusedbyaprivateLAN.
11229,"linkstate advertisement (LSA) InOSPF,amethodtodisperseinformation."
11230,"linkstatedatabase Inlinkstaterouting,adatabase common toallroutersandmadefrom
LSPinformation."
11231,"linkstatepacket(LSP) Inlinkstaterouting,asmallpacketcontaining routinginformation
sentbyaroutertoallotherrouters."
11232,"linkstaterouting Aroutingmethodinwhicheachroutersharesitsknowledge ofchangesin
itsneighborhood withallotherrouters."
11233,"localaccessandtransport area(LATA) Anareacoveredbyoneormoretelephone
companies."
11234,"localareanetwork (LAN) Anetworkconnecting devicesinsideasinglebuildingorinside
buildings closetoeachother."
11235,"localareanetwork emulation (LANE) Software thatenablesanATMswitchtobehave
likeaLANswitch."
11236,localexchange carrier(LEC) Atelephone company thathandlesservicesinsideaLATA.
11237,localloopThelinkthatconnects asubscriber tothetelephone centraloffice.
11238,"localmanagement information (LMI) Aprotocol usedinFrameRelaythatprovides
management features."
11239,logicaladdress Anaddressdefinedinthenetworklayer.
11240,"logicallinkcontrol(LLC) TheuppersublayerofthedatalinklayerasdefinedbyIEEE
Project802.2.
LogicalLinkControlandAdaptation Protocol (L2CAP) ABluetooth layerusedfor
dataexchange onanACLlink."
11241,"logicaltunnel Theencapsulation ofamulticast packetinsideaunicast packet toenable
multicast routingbynon-multicast routers."
11242,"longestmaskmatching Thetechnique inCIDRinwhichthelongestprefixishandledfirst
when searching aroutingtable."
11243,lowearthorbit(LEO)Apolarsatelliteorbitwithanaltitudebetween500and2000km.
11244,Asatellitewiththisorbithasarotationperiodof90to120minutes.
11245,"low-pass channel Achannelthatpassesfrequencies betweenaand!GLOSSARY 1089
M
mailtransferagent(MTA)AnSMTPcomponent thattransfers themailacrossthe
Internet."
11246,"Management Information Base(MIB) Thedatabase usedbySNMPthatholdsthe
information necessary formanagement ofanetwork."
11247,"Manchester encoding Adigital-to-digital polarencoding methodinwhichatransition
occursatthemiddleofeachbitintervaltoprovidesynchronization."
11248,"man-in-the-middle attack Akeymanagement probleminwhichanintruderintercepts and
sendsmessages between theintended senderandreceiver."
11249,"mappedaddress AnIPv6addressusedwhenacomputer thathasmigrated toIPv6wantsto
sendapackettoacomputer stillusingIPv4."
11250,"maskForIPv4,a32-bitbinarynumberthatgivesthefirstaddressintheblock(thenetwork
address)whenANDedwithanaddressintheblock."
11251,maximum transferunit(MTU) Thelargestsizedataunitaspecificnetworkcanhandle.
11252,"medium accesscontrol(MAC)sublayer Thelowersublayer inthedatalinklayer
definedbytheIEEE802project.Itdefinestheaccessmethodandaccesscontrolindifferent local
areanetworkprotocols."
11253,mediumEarthorbit(MEO) Asatelliteorbitpositioned between thetwoVanAllenbelts.
11254,Asatelliteatthisorbittakessixhourstocircletheearth.
11255,"meshtopology Anetworkconfiguration inwhicheachdevicehasadedicated point-to-point
linktoeveryotherdevice."
11256,"message accessagent(MAA) Aclient-server program thatpullsthestoredemail
messages."
11257,"message authentication Asecuritymeasureinwhichthesenderofthemessage isverified
foreverymessage sent."
11258,message authentication code(MAC) Akeyedhashfunction.
11259,"message transferagent(MTA) AnSMTPcomponent thattransfers themessage across
theInternet."
11260,metric Acostassigned forpassingthroughanetwork.
11261,"metropolitan areanetwork (MAN) Anetworkthatcanspanageographical areathesize
ofacity."
11262,"microwave Electromagnetic wavesrangingfrom2GHzto40GHz.
minimum Hamming distance Inasetofwords,thesmallestHamming distancebetween
allpossiblepairs."
11263,mobilehostAhostthatcanmovefromonenetworktoanother.
11264,"mobileswitching center(MSC) Incellulartelephony, aswitching officethatcoordinates
communication between allbasestationsandthetelephone centraloffice."
11265,"mobiletelephone switching office(MTSO) Anofficethatcontrolsandcoordinates
communication betweenallofthecellofficesandthetelephone controloffice."
11266,modem Adeviceconsisting ofamodulator andademodulator.
11267,"Itconvertsadigitalsignalinto
ananalogsignal(modulation) andviceversa(demodulation)."
11268,"modification detection code(MDC) Thedigestcreatedbyahashfunction.1090 GLOSSARY
modular arithmetic Arithmetic thatusesalimitedrangeofintegers(0ton-1)."
11269,"modulation Modification ofoneormorecharacteristics ofacarrierwavebyaninformation­
bearingsignal."
11270,modulus Theupperlimitinmodular arithmetic (n).
11271,"monoalphabetic substitution Anencryption methodinwhicheachoccurrence ofa
character isreplaced byanothercharacter intheset."
11272,motionpictureexpertsgroup(MPEG) Amethodtocompress videos.
11273,multicast address Anaddressusedformulticasting.
11274,"multicast backbone (MBONE) Asetofinternetrouterssupporting multicasting through
theuseoftunneling."
11275,"Multicast OpenShortest PathFirst(MOSPF) Amulticast protocol thatusesmulticast
linkstateroutingtocreateasource-based leastcosttree."
11276,"multicast router Arouterwithalistofloyalmembers relatedtoeachrouterinterface that
distributes themulticast packets."
11277,multicast routing Movingamulticast packettoitsdestinations.
11278,"multicasting Atransmission methodthatallowscopiesofasinglepackettobesenttoa
selectedgroupofreceivers."
11279,"multihoming service Aserviceprovided bySCTPthatallowsacomputer tobeconnected to
different networks."
11280,"multiline transmission, 3-level(MLT-3)encoding Alinecodingschemefeaturing
3levelsofsignalsandtransitions atthebeginning ofthe1bit."
11281,"multimode graded-index fiberAnopticalfiberwithacorehavingagradedindexof
refraction."
11282,multimode step-index fiberAnopticalfiberwithacorehavingauniformindexofrefraction.
11283,Theindexofrefraction changessuddenly atthecorelcladding boundary.
11284,multiple access(MA)Alineaccessmethodinwhicheverystationcanaccessthelinefreely.
11285,"multiple unicasting Sendingmultiple copiesofamessage, eachwithadifferent unicast
address."
11286,multiplexer (MUX) Adeviceusedformultiplexing.
11287,"multiplexing Theprocessofcombining signalsfrommultiplesourcesfortransmission across
asingledatalink."
11288,"multiplicative decrease Acongestion avoidance technique inwhichthethreshold issetto
halfofthelastcongestion windowsize,andthecongestion windowsizestartsfromoneagain."
11289,"Multipurpose Internet MailExtension (MIME) Asupplement toSMTPthatallows
non-ASCII datatobesentthroughSMTP."
11290,multistage switch AnmTayofswitches designed toreducethenumberofcrosspoints.
11291,"multistream service Aserviceprovided bySCTPthatallowsdatatransfertobecarried
usingdifferent streams."
11292,"N
namespace Allthenamesassigned tomachines onaninternet."
11293,"name-address resolution Mapping anametoanaddressoranaddresstoaname.GLOSSARY 1091
Needham-Schroeder protocol Akeymanagement protocol usingmultiplechallenge­
response interactions between 2entities."
11294,netidThepartofanIPaddressthatidentifies thenetwork.
11295,"network Asystemconsisting ofconnected nodesthatsharedata,hardware, andsoftware."
11296,network accesspoint(NAP) Acomplex switching stationthatconnects backbone networks.
11297,"network address Anaddressthatidentifies anetworktotherestoftheInternet; itisthefirst
addressinablock."
11298,"network addresstranslation (NAT) Atechnology thatallowsaprivatenetworktousea
setofprivateaddresses forinternalcommunication andasetofglobalInternetaddresses for
externalcommunication."
11299,"network allocation vector(NAV)InCSMAlCA, theamountoftimethatmustpassbefore
astationcancheckforanidleline."
11300,"Network ControlProtocol (NCP) InPPP,asetofcontrolprotocols thatallowsthe
encapsulation ofdatacomingfromnetworklayerprotocols."
11301,"network interface card(NIC) Anelectronic device,internalorexternaltoastation,that
containscircuitry toenablethestationtobeconnected tothenetwork."
11302,"network layerThethirdlayerintheInternetmodel,responsible forthedeliveryofapacket
tothefinaldestination."
11303,Network VirtualTerminal (NVT) ATCPJIPapplication protocolthatallowsremotelogin.
11304,"network-specific routing Routinginwhichallhostsonanetworkshareoneentryinthe
routingtable."
11305,"network-to-network interface (NNI) InATM,theinterface between twonetworks."
11306,"next-hop routing Aroutingmethodinwhichonlytheaddressofthenexthopislistedinthe
routingtableinsteadofacomplete listofthestopsthepacketmustmake."
11307,"nodeAnaddressable communication device(e.g.,acomputer orrouter)onanetwork."
11308,node-to-node delivery Transferofadataunitfromonenodetothenext.
11309,"noiseRandom electrical signalsthatcanbepickedbythetransmission mediumandcause
degradation ordistortion ofthedata."
11310,noiseless channel Anerror-free channel.
11311,noisychannel Achannelthatcanproduceerrorindatatransmission.
11312,"nonce Alargerandomnumberthatisusedoncetodistinguish afreshauthentication request
fromausedone."
11313,"nonpersistent strategy Arandommultipleaccessmethodinwhichastationwaitsarandom
periodoftimeafteracollision issensed."
11314,"nonrepudiation Asecurityaspectinwhichareceivermustbeabletoprovethatareceived
message camefromaspecificsender."
11315,"nonreturn tozero(NRZ) Adigital-to-digital polarencoding methodinwhichthesignal
levelisalwayseitherpositiveornegative."
11316,"nonreturn tozero,invert(NRZ-I) AnNRZencoding methodinwhichthesignallevelis
invertedeachtimea 1isencountered."
11317,"nonreturntozero,level(NRZ-L) AnNRZencoding methodinwhichthesignallevelis
directlyrelatedtothebitvalue.1092 GLOSSARY
normalresponse mode(NRM) InHDLC,acommunication modeinwhichthesecondary
stationmusthavepermission fromtheprimarystationbeforetransmission canproceed."
11318,NyquistbitrateThedataratebasedontheNyquisttheorem.
11319,"Nyquisttheorem Atheoremthatstatesthatthenumberofsamplesneededtoadequately
represent ananalogsignalisequaltotwicethehighestfrequency oftheoriginalsignal."
11320,"o
Oakley Akeycreationprotocol, developed byHilarieOrman,whichisoneofthethree
components ofIKEprotocol."
11321,omnidirectional antenna Anantennathatsendsoutorreceivessignalsinalldirections.
11322,"one'scomplement Arepresentation ofbinarynumbers inwhichthecomplement ofa
numberisfoundbycomplementing allbits."
11323,"openshortestpathfirst(OSPF) Aninteriorroutingprotocol basedonlinkstate
routing."
11324,"OpenSystemsInterconnection (OSI)model Aseven-layer modelfordatacommunication
definedbyISO."
11325,open-loop congestion control Policiesappliedtopreventcongestion.
11326,opticalcarrier(OC)Thehierarchy offiber-optic carriersdefinedinSONET.
11327,opticalfiberAthinthreadofglassorothertransparent materialtocarrylightbeams.
11328,orbitThepathasatellitetravelsaroundtheearth.
11329,"Orthogonal Frequency Division Multiplexing (OFDM) Amultiplexing method
similartoFDM,withallthesubbands usedbyonesOurceatagiventime."
11330,orthogonal sequence Asequence withspecialproperties between elements.
11331,"Otway-Reesprotocol Akeymanagement protocolwithlessstepsthantheNeedham-Schroeder
method."
11332,out-of-band signaling Usingtwoseparatechannels fordataandcontrol.
11333,outputfeedback (OFB)modeAmodesimilartotheCFBmodewithonedifference.
11334,"Each
bitintheciphertext isindependent oftheprevious bitorbits."
11335,"p
packetswitching Datatransmission usingapacket-switched network."
11336,"packet-filter firewall Afirewallthatforwards orblockspacketsbasedontheinformation in
thenetwork-layer andtransport-layer headers."
11337,"packet-switched network Anetworkinwhichdataaretransmitted inindependent units
calledpackets."
11338,"parabolic dishantenna Anantennashapedlikeaparabola usedforterrestrial microwave
communication."
11339,"paralleltransmission Transmission inwhichbitsinagrouparesentsimultaneously, each
usingaseparatelink."
11340,paritycheck Anerror-detection methodusingaparitybit.
11341,"partially qualified domainname(PQDN) Adomainnamethatdoesnotincludeallthe
levelsbetweenthehostandtherootnode.GLOSSARY 1093
Password Authentication Protocol (PAP)Asimpletwo-step authentication protocol
usedinPPP."
11342,"pathvectorrouting AroutingmethodonwhichBGPisbased;inthismethod,theASs
throughwhichapacketmustpassareexplicitly listed."
11343,P-boxAhardware circuitusedinencryption thatconnects inputtooutput.
11344,"peer-to-peer process Aprocessonasendingandareceiving machine thatcommunicates at
agivenlayer."
11345,"perhopbehavior (PUB) IntheDiffservmodel,a6-bitfieldthatdefinesthepacket-handling
mechanism forthepacket."
11346,period Theamountoftimerequired tocomplete onefullcycle.
11347,periodic signalAsignalthatexhibitsarepeating pattern.
11348,"permanent virtualcircuit(PVC) Avirtualcircuittransmission methodinwhichthesame
virtualcircuitisusedbetweensourceanddestination onacontinual basis."
11349,"persistent connection Aconnection whichtheserverleavesopenforadditional requests
aftersendingaresponse."
11350,"Personal Communication System(peS) Agenerictermforacommercial cellular
systemthatoffersseveralkindsofcommunication services."
11351,phase Therelativepositionofasignalintime.
11352,"phasemodulation (PM)Ananalog-to-analog modulation methodinwhichthecarrier
signal'sphasevarieswiththeamplitude ofthemodulating signal."
11353,"phaseshiftkeying(PSK) Adigital-to-analog modulation methodinwhichthephaseofthe
carriersignalisvariedtorepresent aspecificbitpattern."
11354,PUYsublayer Thetransceiver inFastEthernet.
11355,physical address Theaddressofadeviceatthedatalinklayer(MACaddress).
11356,"physical layerThefirstlayeroftheInternetmodel,responsible forthemechanical and
electrical specifications ofthemedium."
11357,piconet ABluetooth network.
11358,piggybacking Theinclusion ofacknowledgment onadataframe.
11359,"pipelining InGo-Back-n ARQ,sendingseveralframesbeforenewsisreceived concerning
previous frames."
11360,pixelApictureelementofanimage.
11361,"plainoldtelephone system(POTS) Theconventional telephone networkusedforvoice
communication."
11362,"plaintext Inencryption/decryption, theoriginalmessage."
11363,playback buffer Abufferthatstoresthedatauntiltheyarereadytobeplayed.
11364,"pointcoordination function (PCF) InwirelessLANs,anoptionalandcomplex access
methodimplemented inaninfrastructure network."
11365,pointofpresence (POP)Aswitching officewherecarrierscaninteractwitheachother.
11366,point-to-point connection Adedicated transmission linkbetween twodevices.
11367,Point-to-Point Protocol (PPP)Aprotocolfordatatransfer aCrOSSaserialline.
11368,"poisonreverse Afeatureaddedtosplithorizoninwhichatableentrythathascomethrough
oneinterface issettoinfinityintheupdatepacket.1094 GLOSSARY
polarencoding Adigital-to-analog encoding methodthatusestwolevels(positive and
negative) ofamplitude."
11369,"policyrouting Apathvectorroutingfeatureinwhichtheroutingtablesarebasedonrulesset
bythenetwork administrator ratherthanametric."
11370,"pollIntheprimary/secondary accessmethod,aprocedure inwhichtheprimarystationasksa
secondary stationifithasanydatatotransmit."
11371,"poll/final (PIF)bitAbitinthecontrolfieldofHDLC;iftheprimaryissending, itcanbea
pollbit;ifthesecondary issending, itcanbeafinalbit."
11372,poll/select Anaccessmethodprotocol usingpollandselectprocedures.
11373,Seepoll.Seeselect.
11374,"polling Anaccessmethodinwhichonedeviceisdesignated asaprimarystationandthe
othersasthesecondary stations.Theaccessiscontrolled bytheprimarystation."
11375,"polyalphahetic substitution Anencryption methodinwhicheachoccurrence ofacharacter
canhaveadifferent substitute."
11376,polynomial Analgebraic tennthatcanrepresent aCRCdivisor.
11377,portaddress InTCPJIPprotocol anintegerthatidentifies aprocess.
11378,portnumber Seeportaddress.
11379,"PostOfficeProtocol, version3(POP3) ApopularbutsimpleSMTPmailaccessprotocol."
11380,"p-persistent ACSMApersistence strategyin which astationsendswithprobability pifit
findsthelineidle."
11381,"preamble The7-bytefieldofanIEEE802.3frameconsisting ofalternating IsandOsthat
alertandsynchronize thereceiver."
11382,"predictive encoding Inaudiocompression, encoding onlythedifferences betweenthesamples."
11383,prefix Thecommon partofanaddressrange.
11384,"presentation layerThesixthlayeroftheOSImodel;responsible fortranslation, encryption,
authentication, anddatacompression."
11385,"PrettyGoodPrivacy(PGP) Aprotocol thatprovides allfouraspectsofsecurityinthe
sendingofemail."
11386,"primary station Inprimary/secondary accessmethod,astationthatissuescommands tothe
secondary stations."
11387,"priorityqueueing Aqueuingtechnique inwhichpacketsareassigned toapriorityclass,
eachwithitsownqueue."
11388,privacy Asecurityaspectinwhichthemessage makessenseonlytotheintended receiver.
11389,"privatekeyInconventional encryption, akeysharedbyonlyonepairofdevices, asender
andareceiver."
11390,"Inpublic-key encryption, theprivatekeyisknownonlytothereceiver."
11391,privatenetwork AnetworkthatisisolatedfromtheInternet.
11392,process Arunningapplication program.
11393,"process-to-process delivery Delivery ofapacketfromthesendingprocesstothedestina­
tionprocess."
11394,Project802Theprojectundertaken bytheIEEEinanattempttosolveLANincompatibility.
11395,SeealsoIEEEProject802.
11396,propagation speed Therateatwhichasignalorbittravels;measured bydistance/second.
11397,"propagation timeThetimerequired forasignaltotravelfromonepointtoanother.GLOSSARY 1095
protocol Rulesforcommunication."
11398,"Protocol Independent Multicast (PIM) Amulticasting protocolfamilywithtwomembers,
PIM-DM andPIM-SM; bothprotocols areunicast-protocol dependent."
11399,"Protocol Independent Multicast, DenseMode(PIM-DM) Asource-based routing
protocol thatusesRPFandpruning/grafting strategies tohandlemulticasting."
11400,"Protocol Independent Multicast, SparseMode(PIM-SM)Agroup-shared routing
protocol thatissimilartoCBTandusesarendezvous pointasthesourceofthetree."
11401,protocol suiteAstackorfamilyofprotocols definedforacomplex communication system.
11402,"proxyARPAtechnique thatcreatesasubnetting effect;oneserveranswersARPrequestsfor
multiplehosts."
11403,"proxyfirewall A firewall thatfiltersamessage basedontheinformation available inthe
message itself(attheapplication layer)."
11404,proxyserver Acomputer thatkeepscopiesofresponses torecentrequests.
11405,pruning Stopping thesendingofmulticast messages fromaninterface.
11406,"pseudoheader Information from the IPheaderusedonlyforchecksum calculation inthe
UDPandTCPpacket."
11407,pseudorandom noise(PN)Apseudorandom codegenerator usedinFHSS.
11408,publickeyinfrastructure (PKI) Ahierarchical structure ofCAservers.
11409,"public-key cryptography Amethodofencryption basedonanonreversible encryption
algorithm."
11410,"Themethodusestwotypesofkeys:Thepublickeyisknowntothepublic;theprivate
key(secretkey)isknownonlytothereceiver."
11411,"pulseamplitude modulation (PAM) Atechnique inwhichananalogsignalissampled;
theresultisaseriesofpulsesbasedonthesampleddata."
11412,pulsecodemodulation (PCM) Atechnique thatmodifiesPAMpulsestocreateadigitalsignal.
11413,"pulsestuffing InTDM,atechnique thataddsdummybitstotheinputlineswithlowerrates."
11414,pureALOHA TheoriginalALOHA.
11415,"Q
quadrature amplitude modulation (QAM) Adigital-to-analog modulation methodin
whichthephaseandamplitude ofthecarriersignalvarywiththemodulating signal."
11416,qualityofservice(QoS) Asetofattributes relatedtotheperformance oftheconnection.
11417,quantization Theassignment ofaspecificrangeofvaluestosignalamplitudes.
11418,"quantization errorErrorintroduced inthesystemduringquantization (analog-to-digital
conversion)."
11419,queue Awaitinglist.
11420,"R
radiowaveElectromagnetic energyinthe3-KHzto300-GHz range."
11421,"randomaccess Amediumaccesscategory inwhicheachstationcanaccessthemedium
withoutbeingcontrolled byanyotherstation."
11422,"ranging InanHFCnetwork, aprocessthatdetermines thedistance between theCMand
theCMTS.1096 GLOSSARY
rateadaptive asymmetrical digitalsubscriber line(RADSL) ADSL-based technology
thatfeaturesdifferent dataratesdepending onthetypeofcommunication."
11423,read-only memory (ROM) Permanent memory withcontents thatcannotbechanged.
11424,"Real-Time Streaming Protocol (RTSP) Anout-of-band controlprotocol designed toadd
morefunctionality tothestreaming audio/video process."
11425,"Real-time Transport ControlProtocol (RTCP) Acompanion protocol toRTPwith
messages thatcontroltheflowandqualityofdataandallowtherecipient tosendfeedback tothe
sourceorsources."
11426,"Real-time Transport Protocol (RTP) Aprotocolforreal-time traffic;usedinconjunction
withUDP."
11427,"reconciliation sublayerAFastEthernet sublayer whichpassesdatain4-bitformattotheMIL
recursive resolution Resolution oftheIPaddressinwhichtheclientsendsitsrequesttoa
serverthateventually returnsaresponse."
11428,redundancy Theadditionofbitstoamessage forerrorcontrol.
11429,"Reed-Solomon Acomplex, butefficient, cycliccode."
11430,reflection Thephenomenon relatedtothebouncing backoflightattheboundary oftwomedia.
11431,"refraction Thephenomenon relatedtothebendingoflightwhenitpassesfromonemedium
toanother."
11432,"regionalISP AsmallISPthatisconnected tooneormoreNSPs.
registrar Anauthority toregisternewdomainnames."
11433,"relayagent ForBOOTP, arouterthatcanhelpsendlocalrequests toremoteservers."
11434,reliability AQoSflowcharacteristic; dependability ofthetransmission.
11435,"remotebridge Adevicethatconnects LANsandpoint-to-point networks; oftenusedina
backbone network."
11436,"rendezvous router Arouterthatisthecoreorcenterforeachmulticast group;itbecomes
therootofthetree."
11437,rendezvous-point treeAgroup-shared treemethodinwhichthereisonetreeforeachgroup.
11438,repeater Adevicethatextendsthedistance asignalcantravelbyregenerating thesignal.
11439,replayattack Theresending ofamessage thathasbeenintercepted byanintruder.
11440,RequestforComment (RFC)AformalInternetdocument concerning anInternetissue.
11441,"resolver TheDNSclientthatisusedbyahostthatneedstomapanaddresstoanameora
nametoanaddress."
11442,"Resource Reservation Protocol (RSVP) Asignaling protocol tohelpIPcreateaflow
andmakearesource reservation toimproveQoS."
11443,retransmission time-out Theexpiration ofatimerthatcontrolstheretransmission ofpackets.
11444,"returntozero(RZ)Adigital-to-digital encoding technique inwhichthevoltageofthe
signaliszeroforthesecondhalfofthebitinterval."
11445,"reusefactor Incellulartelephony, thenumberofcellswithadifferent setoffrequencies."
11446,"ReverseAddress Resolution Protocol (RARP) ATCPIIPprotocol thatallowsahostto
finditsInternetaddressgivenitsphysical address."
11447,"reversepathbroadcasting (RPB) Atechnique inwhichtherouterforwards onlythepackets
thathavetraveledtheshortestpathfromthesourcetotherouter.GLOSSARY 1097
reversepathforwarding (RPF) Atechnique inwhichtherouterforwards onlythepackets
thathavetraveledtheshortestpathfromthesourcetotherouter."
11448,"reversepathmulticasting (RPM) Atechnique thataddspruningandgraftingtoRPBto
createamulticast shortestpathtreethatsupports dynamic membership changes."
11449,"Rijndael algorithm Analgorithm namedafteritstwoBelgianinventors, VincentRijmen
andJoanDaemen thatisthebasisofAES."
11450,"ringtopology Atopology inwhichthedevicesareconnected inaring.Eachdeviceonthering
receivesthedataunitfromtheprevious device,regenerates it,andforwards ittothenextdevice."
11451,"Rivest,Shamir,Adleman (RSA)encryption SeeRSAencryption."
11452,RJ45Acoaxialcableconnector.
11453,"roaming Incellulartelephony, theabilityofausertocommunicate outsideofhisownservice
provider's area."
11454,"rootserver InDNS,aserverwhosezoneconsistsofthewholetree.Arootserverusually
doesnotstoreanyinformation aboutdomains butdelegates itsauthority tootherservers,keeping
references tothoseservers."
11455,"rotarydialing Accessing theswitching stationthroughaphonethatsendsadigitalsignalto
theendoffice."
11456,"rotationcipher Akeyedorkeylesscipherinwhichtheinputbitsarerotatedtotheleftor
righttocreateoutputbits."
11457,"round-trip time(RTT) Thetimerequiredforadatagram togofromasourcetoadestination
andthenbackagain."
11458,routeApathtraveledbyapacket.
11459,"router Aninternetworking deviceoperating atthefirstthreelayers.Arouterisattached totwo
ormorenetworks andforwards packetsfromonenetworktoanother."
11460,routing Theprocessperformed byarouter;findingthenexthopforadatagram.
11461,"RoutingInformation Protocol (RIP) Aroutingprotocol basedonthedistancevector
routingalgorithm."
11462,"routingtableAtablecontaining information arouterneedstoroutepackets.Theinformation
mayincludethenetworkaddress,thecost,theaddressofthenexthop,andsoon."
11463,"RSAcryptosystem Apopularpublic-key encryption methoddeveloped byRivest,Shamir,
andAdleman."
11464,"s
sampling Theprocessofobtaining amplitudes ofasignalatregularintervals."
11465,sampling rateThenumberofsamplesobtained persecondinthesampling process.
11466,"satellitenetwork Acombination ofnodesthatprovides communication formonepointon
theearthtoanother."
11467,"S-box Anencryption devicemadeofdecoders, P-boxes, andencoders."
11468,scatternet Acombination ofpiconets.
11469,"scrambling Indigital-to-digital conversion, modifying partofthelUlesinlinecodingscheme
tocreatebitsynchronization."
11470,"secondary station Inthepoll/select accessmethod,astationthatsendsaresponse inanswer
toacommand fromaprimarystation.1098 GLOSSARY
secret-key encryption Asecuritymethodinwhichthekeyforencryption isthesameasthe
keyfordecryption; bothsenderandreceiverhavethesamekey."
11471,"SecureHashAlgorithm 1(SHA-l) Ahashalgorithm designed bytheNational Institute
ofStandards andTechnology (NIST).Itwaspublished asaFederalInformation Processing
Standard (PIPS)."
11472,"SecureSocketLayer(SSL)Aprotocoldesigned toprovidesecurityandcompression
servicestodatagenerated fromtheapplication layer."
11473,"Security Association (SA)AnIPSecprotocolthatcreatesalogicalconnection betweentwo
hosts."
11474,"securityassociation database (SADB) Adatabase definingasetofsinglesecurity
associations."
11475,"securityparameter index(SPI)Aparameter thatuniquely distinguish onesecurity
association fromtheothers."
11476,"segment ThepacketattheTCPlayer.Also,thelengthoftransmission mediumsharedby
devices."
11477,"segmentation Thesplittingofamessage intomultiple packets;usuallyperformed atthe
transport layer."
11478,"segmentation andreassembly (SAR) ThelowerAALsublayer intheATMprotocol in
whichaheaderand/ortrailermaybeaddedtoproducea48-byteelement."
11479,"selectInthepolVselect accessmethod,aprocedure inwhichtheprimarystationasksasecondary
stationifitisreadytoreceivedata."
11480,selective-repeat ARQAnerror-control methodinwhichonlytheframeinerrorisresent.
11481,self-synchronization Synchronization oflongstringsof1sorOsthroughthecodingmethod.
11482,semantics Themeaningofeachsectionofbits.
11483,sequence number Thenumberthatdenotesthelocationofaframeorpacketinamessage.
11484,serialtransmission Transmission ofdataonebitatatimeusingonlyonesinglelink.
11485,"server Aprogram thatcanprovideservicestootherprograms, calledclients."
11486,"servercontrolpoint(SCP) InSS7terminology, thenodethatcontrolsthewholeoperation
ofthenetwork."
11487,"SessionInitiation Protocol (SIP)InvoiceoverIP,anapplication protocolthatestablishes,
manages, andterminates amultimedia session."
11488,"sessionlayerThefifthlayeroftheOSImodel,responsible fortheestablishment, manage­
ment,andtermination oflogicalconnections betweentwoendusers."
11489,"setupphase Invirtualcircuitswitching, aphaseinwhichthesourceanddestination usetheir
globaladdresses tohelpswitches maketableentriesfortheconnection."
11490,Shannon capacity Thetheoretical highestdatarateforachannel.
11491,"shielded twisted-pair (STP) Twisted-pair cableenclosed inafoilormeshshieldthat
protectsagainstelectromagnetic interference."
11492,"shiftcipher Thesimplestmonoalphabetic cipherinwhichtheplaintext andciphertext consist
ofletters.Intheencryption algorithm, thecharacters areshifteddownthecharacter list;inthe
decryption algorithm, thecharacters areshiftedupthecharacter list."
11493,"shiftregister Aregisterinwhicheachmemorylocation, atatimeclick,acceptsthebitatits
inputport,storesthenewbit,anddisplaysitontheoutputport.GLOSSARY 1099
shortinterframe space(SIFS) InCSMAlCA, aperiodoftimethatthedestination waits
afterreceiving theRTS."
11494,shortestpathtreeAroutingtableformedbyusingtheDijkstraalgorithm.
11495,"signalingconnection controlpoint(SCCP) InSS7,thecontrolpointsusedforspecial
servicessuchas800calls."
11496,signalelement Theshortest section ofasignal(time-wise) thatrepresents adataelement.
11497,"signalpoint(SP)InSS7terminology, theusertelephone orcomputer isconnected tothe
signalpoints."
11498,signalrateThenumberofsignalelements sentinonesecond.
11499,"signaltransport port(STP) InSS7terminology, thenodeusedbythesignaling network."
11500,Signaling SystemSeven(SS7)Theprotocolthatisusedinthesignaling network.
11501,signal-to-noise ratio(SNR) Theratioofaveragesignalpowertoaveragenoisepower.
11502,"sillywindowsyndrome Asituation inwhichasmallwindowsizeisadvertised bythe
receiverandasmallsegmentsentbythesender."
11503,"simpleandefficientadaptation layer(SEAL) AnAALlayerdesigned fortheInternet
(AAL5)."
11504,"simplebridge Anetworking devicethatlinkstwosegments; requiresmanualmaintenance
andupdating."
11505,"SimpleMailTransfer Protocol (SMTP) TheTCP/IPprotocoldefiningelectronic mail
serviceontheInternet."
11506,"SimpleNetwork Management Protocol (SNMP) TheTCPIIPprotocolthatspecifies
theprocessofmanagement intheInternet."
11507,"SimpleProtocol Thesimpleprotocol weusedtoshowanaccessmethodwithoutflowand
errorcontrol."
11508,simplexmodeAtransmission modeinwhichcommunication isoneway.
11509,sinewaveAnamplitude-versus-time representation ofarotatingvector.
11510,single-bit errorErrorinadataunitinwhichonlyonesinglebithasbeenaltered.
11511,"single-mode fiberAnopticalfiberwithanextremely smalldiameter thatlimitsbeamstoa
fewangles,resulting inanalmosthorizontal beam."
11512,"sitelocaladdress AnIPv6addressforasitehavingseveralnetworks butnotconnected to
theInternet."
11513,SKEME Aprotocolforkeyexchange designed byHugoKrawcyzk.
11514,"Itisoneofthethree
protocols thatformthebasisofIKE."
11515,skypropagation Propagation ofradiowavesintotheionosphere andthenbacktoearth.
11516,slashnotation Ashorthand methodtoindicatethenumberof1sinthemask.
11517,"slidingwindow Aprotocolthatallowsseveraldataunitstobeintransition beforereceiving
anacknowledgment."
11518,slidingwindowARQAnerror-control protocolusingslidingwindowconcept.
11519,"slottedALOHA Themodified ALOHA accessmethodinwhichtimeisdividedintoslots
andeachstationisforcedtostartsendingdataonlyatthebeginning oftheslot."
11520,"slowconvergence ARIPshortcoming apparent whenachangesomewhere intheinternet
propagates veryslowlythroughtherestoftheinternet.1100 GLOSSARY
slowstartAcongestion-control methodinwhichthecongestion windowsizeincreases
exponentially atfirst."
11521,socketaddress Astructure holdinganIPaddressandaportnumber.
11522,"sourcequench Amethod,usedinICMPforflowcontrol,inwhichthesourceisadvisedto
slowdownorstopthesendingofdatagrams becauseofcongestion."
11523,sourcerouting Explicitly definingtherouteofapacketbythesenderofthepacket.
11524,"sourceroutingbridgeAsourceordestination station thatperforms someofthedutiesofa
transparent bridgeasamethodtopreventloops."
11525,"source-based treeAtreeusedformulticasting bymulticasting protocols inwhichasingle
treeismadeforeachcombination ofsourceandgroup."
11526,"source-to-destination delivery Thetransmission ofamessage fromtheoriginalsenderto
theintended recipient."
11527,spacepropagation Atypeofpropagation thatcanpenetrate theionosphere.
11528,space-division switching Switching inwhichthepathsareseparated fromeachotherspatially.
11529,"spanning treeAtreewiththesourceastherootandgroupmembers asleaves;atreethat
connects allofthenodes."
11530,spatialcompression Compressing animagebyremoving redundancies.
11531,spectrum Therangeoffrequencies ofasignal.
11532,"splithorizon AmethodtoimproveRIPstabilityinwhichtherouterselectively choosesthe
interface fromwhichupdating information issent."
11533,"spreadspectrum Awirelesstransmission technique thatrequiresabandwidth severaltimes
theoriginalbandwidth."
11534,Standard Ethernet Theconventional Ethernet operating at10Mbps.
11535,startopology Atopology inwhichallstationsareattachedtoacentraldevice(hub).
11536,"startbitInasynchronous transmission, abittoindicatethebeginning oftransmission."
11537,statetransition diagram Adiagramtoillustrate thestatesofafinitestatemachine.
11538,"staticdocument OntheWorldWideWeb,afixed-content document thatiscreatedand
storedinaserver."
11539,"staticmapping Atechnique inwhichalistoflogicalandphysical addresscorrespondences
isusedforaddressresolution."
11540,staticrouting Atypeofroutinginwhichtheroutingtableremainsunchanged.
11541,stationary hostAhostthatremainsattached toonenetwork.
11542,"statistical TDMATDMtechnique inwhichslotsaredynamically allocated toimprove
efficiency."
11543,"statuslineIntheHTTPresponse message alinethatconsistsoftheHTTPversion,aspace,a
statuscode,aspace,astatusphrase."
11544,"stopbitInasynchronous transmission, oneormorebitstoindicatetheendoftransmission."
11545,stop-aDd-wait ARQAnerror-control protocolusingstop-and-wait flowcontrol.
11546,"Stop-aDd- WaitProtocol Aprotocol inwhichthesendersendsoneframe,stopsuntilit
receivesconfirmation fromthereceiver, andthensendsthenextframe."
11547,"store-aDd-forward switchAswitchthatstorestheframeinaninputbufferuntilthewhole
packethasarrived.GLOSSARY 1101
straighttipconnector Atypeoffiber-optic cableconnector usingabayonetlockingsystem."
11548,"StreamControlTransmission Protocol (SCTP) Thetransport layerprotocol designed
forInternettelephony andrelatedapplications."
11549,streaming liveaudio/video Broadcast datafromtheInternet that ausercanlistentoorwatch.
11550,"streaming storedaudio/video Datadownloaded asfilesfromtheInternetthatausercan
listentoorwatch."
11551,strongcollision Creating twomessage withthesamedigest.
11552,"Structure ofManagement Information (SMI) InSNMP,acomponent usedinnetwork
management."
11553,"STSmultiplexer/demultiplexer ASONETdevicethatmultiplexes anddemultiplexes
signals."
11554,stublinkAnetwork thatisconnected toonlyonerouter.
11555,subnet subnetwork.
11556,subnetaddress Thenetwork addressofasubnet.
11557,subnetmaskThemaskforasubnet.
11558,subnetwork Apartofanetwork.
11559,"subscriber channelconnector Afiber-optic cableconnector usingapushipulllocking
mechanism."
11560,"substitution cipher Abit-level encryption methodinwhichnbitssubstitute foranother
nbitsasdefinedbyP-boxes, encoders, anddecoders."
11561,"suffix Foranetwork, thevaryingpart(similartothehostid)oftheaddress.InDNS,astring
usedbyanorganization todefineitshostorresources."
11562,"summary linktoASboundary routerLSAAnLSApacketthatletsarouterinsidean
areaknowtheroutetoanautonomous boundary router."
11563,"summary linktonetwork LSAAnLSApacketthatfindsthecostofreaching networks
outsideofthearea."
11564,supergroup Asignalcomposed offivemultiplexed groups.
11565,supernet Anetwork formedfromtwoormoresmallernetworks.
11566,supernet maskThemaskforasupernet.
11567,switch Adeviceconnecting multiple communication linestogether.
11568,"switched Ethernet AnEthernet inwhichaswitch,replacing thehub,candirectatransmission
toitsdestination."
11569,"switched virtualcircuit(SVC) Avirtualcircuittransmission methodinwhichavirtual
circuitiscreatedandinexistence onlyforthedurationoftheexchange."
11570,switched/56 Atemporary 56-Kbps digitalconnection between twousers.
11571,switching office Theplacewheretelephone switches arelocated.
11572,"symmetric digitalsubscriber line(SDSL) ADSL-based technology similartoHDSL,
butusingonlyonesingletwisted-pair cable."
11573,"symmetric-key cryptography Acipherinwhichthesamekeyisusedforencryption and
decryption."
11574,"synchronization points Reference pointsintroduced intothedatabythesessionlayerfor
thepurposeofflowanderrorcontrol.1102 GLOSSARY
synchronous connection oriented (SCO)linkInaBluetooth network, aphysical link
createdbetween amasterandaslavethatreservesspecificslotsatregularintervals."
11575,Synchronous DigitalHierarchy (SDH) ThelTD-Tequivalent ofSONET.
11576,"Synchronous OpticalNetwork (SONET) Astandard developed byANSIforfiberoptic
teChnology thatcantransmithigh-speed data.Itcanbeusedtodelivertext,audio,andvideo."
11577,"synchronous payloadenvelope (SPE) ThepartoftheSONETframecontaining userdata
andtransmission overhead."
11578,"synchronous TDM ATDMtechnique inwhicheachinputhasanallotment intheoutput
evenwhenitisnotsendingdata."
11579,"synchronous transmission Atransmission methodthatrequiresaconstanttimingrelationship
between thesenderandthereceiver."
11580,synchronous transport module(STM) AsignalintheSDHhierarchy.
11581,synchronous transport signal(STS) AsignalintheSONEThierarchy.
11582,syndrome Asequence ofbitgenerated byapplying theerrorchecking function toacodeword.
11583,"syntax Thestructure orformatofdata,meaning theorderinwhichtheyarepresented."
11584,"T
TlinesAhierarchy ofdigitallinesdesigned tocarryspeechandothersignalsindigitalforms."
11585,"Thehierarchy definesT-I,T-2,T-3,andT-41ines."
11586,tandemoffice Thetollofficeinatelephone network.
11587,"TCPIIPprotocol suiteAfive-layer protocolsuitethatdefinestheexchange oftransmissions
acrosstheInternet."
11588,"teardownphase Invirtualcircuitswitching, thephaseinwhichthesourceanddestination
informtheswitchtoerasetheirentry."
11589,telecommunications Exchange ofinformation overdistanceusingelectronic equipment.
11590,teleconferencing Audioandvisualcommunication betweenremoteusers.
11591,"Teledesic Asystemofsatellites thatprovides fiber-optic communication (broadband channels,
lowerrorrate,andlowdelay)
telephone userport(TUP) Aprotocol attheupperlayerofSS7thatisresponsible for
settingupvoicecalls."
11592,temporal compression AnMPEGcompression methodinwhichredundant framesareremoved.
11593,Ten-Gigabit Ethernet Thenewimplementation ofEthernet operating at10Gbps.
11594,"Terminal Network (TELNET) Ageneralpurposeclient-server program thatallows
remotelogin."
11595,"three-way handshaking Asequence ofeventsforconnection establishment ortermination
consisting oftherequest,thentheacknowledgment oftherequest,andthenconfirmation ofthe
acknowledgment."
11596,throughput Thenumberofbitsthatcanpassthroughapointinonesecond.
11597,ticket-granting server(TGS) AKerberos serverthatissuestickets.
11598,"timedivisionduplexingTDMA(TDD-TDMA) InaBluetooth network, akindofhalf­
duplexcommunication inwhichtheslaveandreceiversendandreceivedata,butnotatthesame
time(half-duplex).GLOSSARY 1103
timedivisionmultipleaccess(TDMA) Amultipleaccessmethodinwhichthebandwidth
isjustonetime-shared channel."
11599,timetolive(TTL) Thelifetimeofapacket.
11600,"time-division multiplexing (TDM) Thetechnique ofcombining signalscomingfrom
low-speed channels tosharetimeonahigh-speed path."
11601,"time-division switching Acircuit-switching technique inwhichtime-division multiplexing
isusedtoachieveswitching."
11602,time-domain plotAgraphical representation ofasignal'samplitude versustime.
11603,time-slot interchange (TSI)Atime-division switchconsisting ofRAMandacontrolunit.
11604,tokenAsmallpacketusedintoken-passing accessmethod.
11605,"tokenbucket Analgorithm thatallowsidlehoststoaccumulate creditforthefutureinthe
fonnoftokens."
11606,tokenpassing Anaccessmethodinwhichatokeniscirculated inthenetwork.
11607,"Thestation
thatcapturesthetokencansenddata."
11608,TokenRingALANusingaringtopology andtoken-passing accessmethod.
11609,topology Thestructure ofanetworkincluding physicalarrangement ofdevices.
11610,trafficcontrol Amethodforshapingandcontrolling trafficinawideareanetwork.
11611,"trafficshaping Amechanism tocontroltheamountandtherateofthetrafficsenttothe
networktoimproveQoS."
11612,trailer Controlinformation appended toadataunit.
11613,"transaction capabilities application port(TCAP) AprotocolattheupperlayerofSS7
thatprovides remoteprocedure callsthatletanapplication program onacomputer invokea
procedure onanothercomputer."
11614,transceiver Adevicethatbothtransmits andreceives.
11615,transient linkAnetworkwith severalroutersattachedtoit.
11616,Transmission ControlProtocol (TCP) Atransport protocolintheTCP/IPprotocolsuite.
11617,"Transmission ControlProtocollInternetworking Protocol (TCP/IP) Afive-layer
protocolsuitethatdefinestheexchange oftransmissions acrosstheInternet."
11618,transmission medium Thephysicalpathlinkingtwocommunication devices.
11619,transmission rateThenumberofbitssentpersecond.
11620,"transparency Theabilitytosendanybitpatternasdatawithoutitbeingmistaken for
controlbits."
11621,transparent bridge Anothernameforalearningbridge.
11622,transparent dataDatathatcancontaincontrolbitpatternswithoutbeinginterpreted ascontrol.
11623,"transport layerThefourthlayerintheInternetandOSImodel;responsible forreliable
end-to-end deliveryanderrorrecovery."
11624,"Transport LayerSecurity (TLS) TheIETFstandard versionofSSL.Thetwoarevery
similar,withslightdifferences."
11625,"transposition cipher Acharacter-level encryption methodinwhichthepositionofthe
character changes."
11626,"trellis-coded modulation Amodulation technique thatincludeserrorcorrection.1104 GLOSSARY
trilateration Atwo-dimensional methodoffindingalocationgiventhedistances from3different
points."
11627,"tripleDESAnalgorithm compatible withDESthatusesthreeDESblocksandtwo
56-bitkeys."
11628,"TrivialFileTransfer Protocol (TFTP) Anunreliable TCP/IPprotocol forfiletransfer
thatdoesnotrequirecomplex interaction between clientandserver."
11629,trunk Transmission mediathathandlecommunications between offices.
11630,"tunneling Inmulticasting, aprocessinwhichthemulticast packetisencapsulated inaunicast
packetandthensentthroughthenetwork."
11631,"InVPN,theencapsulation ofanencrypted IPdatagram
inasecondouterdatagram."
11632,"ForIPv6,astrategyusedwhentwocomputers usingIPv6wantto
communicate witheachotherwhenthepacketmustpassthrougharegionthatusesIPv4."
11633,"twisted~pair cableAtransmission mediumconsisting oftwoinsulated conductors inatwisted
configuration."
11634,two-dimensional paritycheck Anerrordetection methodintwodimensions.
11635,typeofservice(TOS) AcriteriaOrvaluethatspecifies thehandling ofthedatagram.
11636,"u
unbalanced configuration AnHDLCconfiguration inwhichonedeviceisprimaryandthe
otherssecondary."
11637,unguided medium Atransmission mediumwithnophysicalboundaries.
11638,unicastaddress Anaddressbelonging toonedestination.
11639,unicastrouting Thesendingofapackettojustonedestination.
11640,unicasting Thesendingofapackettojustonedestination.
11641,Unicode Theinternational character setusedtodefinevalidcharacters incomputer science.
11642,unidirectional antenna Anantennathatsendsorreceivessignalsinonedirection.
11643,"Uniform Resource Locator(URL) Astringofcharacters (address) thatidentifies apage
ontheWorldWideWeb."
11644,"unipolar encoding Adigital-to-digital encoding methodinwhichonenonzerovaluerepresents
either1or0;theotherbitisrepresented byazerovalue."
11645,"unshielded twisted-pair (UTP) Acablewithwiresthataretwistedtogethertoreduce
noiseandcrosstalk."
11646,Seealsotwisted-pair cableandshielded twisted-pair.
11647,"unspecified bitrate(UBR) ThedatarateofanATMserviceclassspecifying onlybest-effort
delivery."
11648,uplink Transmission fromanearthstationtoasatellite.
11649,uploading Sendingalocalfileordatatoaremotesite.
11650,"useragent(UA)AnSMTPcomponent thatprepares themessage, createstheenvelope, and
putsthemessage intheenvelope."
11651,"userauthentication Asecuritymeasureinwhichthesenderidentityisverifiedbeforethe
startofacommunication."
11652,userdatagram ThenameofthepacketintheUDPprotocol.
11653,UserDatagram Protocol (UDP) Aconnectionless TCP/IPtransport layerprotocol.
11654,"usernetwork interface (UNI) Theinterface between auserandtheATMnetwork.GLOSSARY 1105
usersupportlayers Thesession,presentation, andapplication layers."
11655,"user-to-network interface (UNI) InATM,theinterface between anendpoint(user)and
anATMswitch."
11656,"v
Vseries ITU-Tstandards thatdefinedatatransmission overtelephone lines.Somecommon
standards areY.32,V.32bis,Y.90,andV92."
11657,"variable bitrate(VBR) ThedatarateofanATMserviceclassforusersneedingavarying
bitrate."
11658,"veryhighbitratedigitalsubscriber line(VDSL) ADSL-based technology forshort
distances."
11659,videoRecording ortransmitting ofapictureoramovie.
11660,"Vigenere cipher Apolyalphabetic substitution schemethatusesthepositionofacharacter in
theplaintext andthecharacter's positioninthealphabet."
11661,virtualcircuit(Ve)Alogicalcircuitmadebetween thesendingandreceiving computer.
11662,"virtualcircuitswitching Aswitching technique usedinswitched WANs.
virtuallinkAnOSPFconnection betweentworoutersthatiscreatedwhenthephysical link
isbroken.Thelinkbetweenthemusesalongerpaththatprobably goesthroughseveralrouters."
11663,"virtuallocalareanetwork (VLAN) Atechnology thatdividesaphysicalLANintovirtual
workgroups throughsoftware methods."
11664,"virtualprivatenetwork (VPN) Atechnology thatcreatesanetworkthatisphysically
public,butvirtually private."
11665,"virtualtributary (VT)ApartialpayloadthatcanbeinsertedintoaSONETframeand
combined withotherpartialpayloads tofillouttheframe."
11666,VoiceOverFrameRelay(VOFR) AFrameRelayoptionthatcanhandlevoicedata.
11667,voiceoverIPAtechnology inwhichtheInternetisusedasatelephone network.
11668,"w
WalshtableInCDMA,atwo-dimensional tableusedtogenerate orthogonal sequences."
11669,wave-division multiplexing (WDM) Thecombining ofmodulated lightsignalsintoonesignal.
11670,wavelength Thedistanceasimplesignalcantravelinoneperiod.
11671,"weakcollision Givenadigest,creatingasecondmessage withthesamedigest."
11672,webpageAunitofhypertext orhypermedia available ontheWeb.
11673,"weighted fairqueueing Apacketscheduling technique toimproveQoSinwhichthepackets
areassigned toqueuesbasedonagivenprioritynumber."
11674,well-known portnumber Aportnumberthatidentifies aprocessontheserver.
11675,"wideareanetwork (WAN) Anetwork thatusesatechnology thatcanspanalarge
geographical distance."
11676,"wideareatelephone service(WATS)Atelephone serviceinwhichthechargesarebased
onthenumberofcallsmade."
11677,"WorldWideWeb(WWW) Amultimedia Internetservicethatallowsuserstotraversethe
Internetbymovingfromonedocument toanothervialinksthatconnectthemtogether.1106 GLOSSARY
x
X.25AnITU-Tstandard thatdefinestheinterface between adataterminal deviceanda
packet-switching network
X.509 AnITU-Tstandard forpublickeyinfrastructure (PKI)
z
zoneInDNS,whataserverisresponsible fororhasauthority over.[AL98]
[AZ03]
[Bar02]
[BELOO]
[Ber96J
[Bis03]
[BlaOO]
[81a03][CBR03]
[ComOO]
[Com04]
[CouOl]
[DH03]
[Dro02]Albitz,P.andLiu,C.DNSandBIND.Sebastopol, CA:O'Reilly, 1998."
11678,"Agrawal D.andZeng,Q.Introduction toWireless andMobileSystems."
11679,"PacificGrove,CA,NJ:Brooks/Cole Thomson Learning, 2003."
11680,"Barr,T,Invitation toCryptology."
11681,"UpperSaddleRiver,NJ:PrenticeHall,
2002."
11682,"Bellamy, J.DigitalTelephony."
11683,"NewYork,NY:Wiley,2000."
11684,"Bergman, J.DigitalBaseband Transmission andRecording."
11685,"Boston,
MA:Kluwer,1996."
11686,"Bishop,M.Computer Security."
11687,"Reading, MA:Addison-Wesley, 2003."
11688,"Black,U.QoSInWideAreaNetwork."
11689,"UpperSaddleRiver,NJ:Prentice
Hall,2000."
11690,"Blahut,R.Algebraic CodesforDataTransmission."
11691,"Cambridge, UK:
Cambridge University Press,2003."
11692,"Cheswick, W.,Bellovin, S.,andRubin,A.Firewalls andInternetSecurity."
11693,"Reading, MA:Addison-Wesley, 2003."
11694,"Comer,D.Internetworking withTCPlIp,Volume1:Principles, Protocols,
andArchitecture."
11695,"UpperSaddleRiver,NJ:PrenticeHall,2000."
11696,"Comer,D.Computer Networks."
11697,"UpperSaddleRiver,NJ:PrenticeHall,
2004."
11698,"Couch,L.DigitalandAnalogCommunication Systems."
11699,"UpperSaddle
River,NJ:PrenticeHall,2000."
11700,"Doraswamy, H.andHarkins, D.IPSec.UpperSaddleRiver,NJ:Prentice
Hall,2003."
11701,"Drozdek, A.ElementsofDataCompression."
11702,"Brooks/Cole Thomson
Learning, 2003."
11703,"11071108 REFERENCES
[DutOl]
[FH98]
[For03]
[For06]
[FRE96]
[GarOl]
[Gas02]
[GW04]
[HaIOl]
[Ham80]
[Hsu03]
[HuiOO]
[IzzOO]
[Jam03]
[KCK98]
[Kei02]
[Kes97]
[KMK04]
[KPS02]
[KROS]
[Los04]
[Mao04]Dutcher, D.TheNATHandbook."
11704,"NewYork,NW:Wiley,2001."
11705,"Ferguson, P.andHuston,G.Qualityo/Service."
11706,"NewYork,NW:Wiley,1996."
11707,"Forouzan, B.LocalAreaNetworks."
11708,"NewYork,NY:McGraw-Hill, 2003."
11709,"Forouzan, B.TCPIIPProtocol Suite.NewYork,NY:McGraw-Hill, 2006."
11710,"Freeman, R.Telecommunication SystemEngineering."
11711,"NewYork,NW:
Wiley,1996."
11712,"Garret,P.Making,Breaking Codes.UpperSaddleRiver,NJ:Prentice
Hall,2001."
11713,"Gast,M.802.11WirelessNetwork."
11714,"Sebastopol, CA:O'Reilly, 2000."
11715,"Garcia,A.andWidjaja,I,Communication Networks."
11716,"NewYork,NY:
McGraw-Hill, 2003."
11717,"Halsall,F.Multimedia Communication."
11718,"Reading, MA:Addison-Wesley,
2001."
11719,"Hamming, R.CodingandInformation Theory.UpperSaddleRiver,NJ:
Prentice Hall,1980."
11720,"Hsu,H.AnalogandDigitalCommunications."
11721,"NewYork,NY:
McGraw-Hill, 2003."
11722,"Huitema, C.RoutingintheInternet."
11723,"UpperSaddleRiver,NJ:Prentice
Hall,2000."
11724,"Izzo,P.GigabitNetworks."
11725,"NewYork,NY:Wiley,2000."
11726,"Jamalipour, A.WirelessMobileInternet."
11727,"NewYork,NY:Wiley,2003."
11728,"Kadambi, j.,Crayford, I.,andKalkunte, M.GigabitEthernet."
11729,"Upper
SaddleRiver,NJ:Prentice Hall,1998."
11730,"Keiser,G.LocalAreaNetworks."
11731,"NewYork,NY:McGraw-Hill, 2002."
11732,"Keshav,S.AnEngineering Approach toComputer Networking."
11733,"Reading,
MA:Addison-Wesley, 1997."
11734,"KumarA.,Manjunath, D.,andKuri,1.Communication Networking."
11735,"San
Francisco, CA:Morgan, Kaufmans, 2004."
11736,"Kaufman,c.,Pedmann, R.,andSpeciner, M.NetworkSecurity."
11737,"Upper
SaddleRiver,NJ:Prentice Hall,2000."
11738,"Kurose, 1.andRoss,K.Computer Networking."
11739,"Reading, MA:Addison­
Wesley,2005."
11740,"Loshin, P.IPv6:Theory,Protocol, andPractice."
11741,"SanFrancisco, CA:
Morgan, Kaufmans, 2001."
11742,"Mao,W.ModemCryptography."
11743,"UpperSaddleRiver,NJ:Prentice Hall,
2004.[Max99]
[MOV97]
[Moy98]
[MSOl]
[PD03]
[Pea92]
[PerOO]
[PHS03]
[ResOl]
[Rhe03]
[Ror96]
[SaI03]
[Sau98]
[Sch96]
[Sch03]
[Spi74]
[SpuOO]
[S8805][8ta02]
[Sta03]
[8ta04]REFERENCES 1109
Maxwell, K.Residential Broadband."
11744,"NewYork,NY:Wiley,2003."
11745,"Menezes, A.,Oorschot, P.,andVanstone, S.Handbook ofApplied
Cryptograpy."
11746,"NewYork,NY:CRCPress,1997."
11747,"Moy,J.OSPF:AnatomyofanInternetRoutingProtocol."
11748,"Reading, MA:
Addison- Wesley,1998."
11749,"MauroD.andSchmidtK.Essential SNMPSebastopol, CA:O'Reilly,
2001."
11750,"Peterson, L.,andDavieB.Computer Networks: ASystemsApproach."
11751,"SanFrancisco, CA:Morgan, Kaufmans, 2000."
11752,"Pearson, J.BasicCommunication Theory.UpperSaddleRiver,NJ:
Prentice Hall,'1992."
11753,"Perlman,R.Interconnection: Bridges,Routers,Switches, andIntemet­
workingProtocols."
11754,"Reading, MA:Addison-Wesley, 2000."
11755,"Pieprzyk, J.,Hardjono, T,andSeberry,J,Fundamentals ofComputer
Security."
11756,"Berlin,Germany: Springer, 2003."
11757,"Rescorla, E.SSLandTSL.UpperSaddleRiver,NJ:Prentice Hall,2000."
11758,"Rhee,M,InternetSecurity."
11759,"NewYork,NY:Wiley,2003."
11760,"Rorabaugh, C.ErrorCodingCookbook."
11761,"NewYork,NY:
McGraw-Hill, 1996."
11762,"Solomon, D."
11763,DataPrivacyandSecurity.
11764,"Berlin,Germany: Springer,
2003."
11765,"Sauders, S.GigabitEthernet Handbook."
11766,"NewYork,NY:McGraw-Hill,
1998."
11767,"Schneier, B.AppliedCryptography."
11768,"Reading, MA:Addison-Wesley,
1996."
11769,"Schiller,B.MobileCommunications."
11770,"Reading, MA:Addison-Wesley,
2003."
11771,"Spiegel,M.FourierAnalysis."
11772,"NewYork,NY:McGraw-Hill, 1974."
11773,"Spurgeon, C.Ethernet."
11774,"Sebastopol, CA:O'Reilly, 2000."
11775,"Shimonski, R.,Steiner,R.Sheedy,S.Network CablingIlluminated."
11776,"Sudbury, MA:JonesandBartlette, 2005."
11777,"Stallings, W.Wireless Communications andNetworks."
11778,"UpperSaddle
River,NJ:Prentice Hall,2002."
11779,"Stallings, W.Cryptography andNetwork Security."
11780,"UpperSaddleRiver,
NJ:Prentice Hall,2003."
11781,"Stallings, W.DataAndComputer Communications."
11782,"UpperSaddleRiver,
NJ:Prentice Hall,2004.1110 REFERENCES
[S1398]
[Ste94]
[Ste96]
[Ste99]
[Sti02]
[SubOl]
[SWE99]
[SX02]
[Tan03]
[ThoOO]
[WVOO]
[WZOl]
[YSOl]
[Zar02]Stallings, W.HighSpeedNetworks."
11783,"UpperSaddleRiver,NJ:Prentice
Hall,1998."
11784,"Stevens, W.TCPIIPIllustrated, Volume1.UpperSaddleRiver,NJ:
Prentice Hall,2000."
11785,"Stevens, W.TCPIIPIllustrated, Volume3.UpperSaddleRiver,NJ:
Prentice Hall,2000."
11786,"StewartIII,J.BGP4:Inter-Domain RoutingintheInternet."
11787,"Reading,
MA:Addison-Wesley, 1999."
11788,"Stinson,D.Cryptography."
11789,"NewYork,NY:Chapman &Hall/CRC, 2002."
11790,"Subramanian, M.Network Management."
11791,"Reading, MA:Addison­
Wesley,2000."
11792,"Scott,C.,Wolfe,P,andErwin,M.VirtualPrivateNetworks."
11793,"Sebastopol,
CA:O'Reilly, 1998."
11794,"Stewart,R.andXie,Q.StreamControlTransmission Protocol (SCTP)."
11795,"Reading, MA:Addison-Wesley, 2002."
11796,"Tanenbaum, A.Computer Networks."
11797,"UpperSaddleRiver,NJ:Prentice
Hall,2003."
11798,"Thomas, S.SSLandTLSEssentials."
11799,"NewYork,NY:Wiley,2000."
11800,"Warland, J.andVaraiya, P.HighPeiformance Communication
Networks."
11801,"SanFrancisco, CA:Morgan, Kaufmans, 2000."
11802,"Wittmann, R.andZitterbart, M.Multicast Communication."
11803,"San
Francisco, CA:Morgan, Kaufmans, 2001."
11804,"YuanR.andStrayer,W.VirtualPrivateNetwork."
11805,"Reading, MA: Addison­
Wesley,2001."
11806,"Zaragoza, R.TheArtofErrorCorrecting Coding.Reading, MA:
Addison- Wesley,2002.Numerics
1000Base-CX, 414
1000Base-LX, 414
lOOOBase-SX, 414
1000Base- T,414
100Base-FX,410-411
100Base-T4, 410,412
1OOBase-TX,410-411
lOBase2, 404
10Base5,403
lOBase-F,405
lOBase-T,404
full-duplex, 408
lOGBase-E,416
10GBase-L,416
IOGBase-S, 416
2BIQ,111
HDSL,255
3DES.SeeTripleDES
4B/5B,1164D-PAM5,
113
GigabitEthernet, 415
56Kmodem,250
ADSL,252
5-s10tframe,439
800service,247
802.11,428
8BIlOB,118
GigabitEthernet, 415
8B/6Tcode,1055
8B6T,112
900service,247
A
AAbattery,60
AAL,532
AALl,532
AAL2,532
AAL3/4,534
AAL5,535
ABM,341
ACvalue,905
access,363
accesscontrol
datalinklayer,35
accesspoint.SeeAPaccessrate,787
accounting management, 877
ACK,724
duplicate, 732
inpoll,381
Selective RepeatARQ,339
ACKframe,318
ACKmessage, 921
acknowledgement number,
319,719
acknowledgement policy,766
acknowledgment, 731
circuitswitching, 217~218
CSMAlCA, 378
flowcontrol,311
Go-Back-N, 326
virtual-circuit network, 225
ACL,439
activedocument, 860
activeopen,723
adhocarchitecture
network,421
additiveincrease, 770
address,1061
IP,47
link,46
logical,36
needformultiple, 612
physical, 46
port,49
service-point, 38,701
types,45,52
virtual-circuit network, 222
addressaggregation,
561,652
addressallocation, 561
addressblock,555
addressfield
HDLC,342
addressmask
ICMPv6,640
addressmaskmessage, 626
addressresolution protocol."
11807,"SeeARP
addressspace,550
addresstoname
resolution, 807addressing, 45
circuitswitching, 215
Ethernet, 400
VPN,1007
admission, 781
admission control,780
admission policy,766
ADSL,252-253, 255
adaptive, 252
DMT,254
downstream dataand
control,253
HDSL,255
idlechannels, 252
localloop,252
upstream dataandcontrol,
253
VDSL,255
voice,252
ADSLLite,254
Advanced Encryption
Standard."
11808,"SeeAES
Advanced MobilePhone
System.SeeAMPS
Advanced Research Projects
Agency.SeeARPA
AES,943
configurations, 944
round,944
structure, 944
AFPHB,786
agent,877-878
database, 878
function, 891
MIB,886
passiveopen,895
trap,878
AHprotocol, 998
authentication data
field,999
ESP,1001
nextheaderfield,999
sequence number,999
SPIfield,999
ALfield,534
alias,831
Alice,932allocation ofresources, 745
ALOHA,365
collision, 365
pureALOHA, 365
vulnerable time,367
alternate markinversion."
11809,"SeeAMI
AM,153-155
bandwidth, 153-154
carrier,153
AMbandwidth, 153
AMradio,71,167
AMstation,154
American National Standards
Institute."
11810,"SeeANSI
Amelican Standard Codefor
Information Interchange."
11811,"SeeASCII
AMI,110
B8ZS,119
HDSL,255
synchronization, 111
amplifier, 447
attenuation, 81
cableTV,256
amplitude, 142,144
ASK,143
FM,154
FSK,146
measurement, 59
PM,155
PSK,148
sinewave,65
amplitude modulation."
11812,"SeeAM
amplitude shiftkeying."
11813,"SeeASK
AMPS,470
analogdata,57
analoghierarchy
telephone system,165
analogleasedservice,
165,247
analogservice,247
analogsignal,57-58,
101,120
digitize,120
periodic, 59
11111112 INDEX
analogswitched service,247
analogtransmission, 141
Tline,177
analogTV,71
analog-to-analog conversion,
141,152
analog-to-digital
conversion, 101
ANDoperation, 557
angleofincidence, 198
anonymous FTP,844
ANSI,20
antenna
focus,206
hom,207
line-of-sight, 203
parabolic dish,207
satellite,480
anti-jamming, 183
anycastaddress,570
AP,421
APNIC,569
applet,860
application adaptation layer."
11814,"SeeAAL
application layer,41
directory services, 42
filemanipulation, 42
mailservices, 42
NVT,41
responsibilities, 41,795
services, 41
TCPIIP,42,45
architecture
e-mail,824
OSImodel,30
area,671
areaborderrouter,671
ARP,43-44,613
broadcast query,612
encapsulation, 615
fourcases,615
hardware lengthfield,614
hardware typefield,614
hosttohostondifferent
networks, 616
hosttohostonsingle
network, 615
ICMPv6, 596,640
operation, 615
operation field,614
packetcomponents, 612
packetformat,613
process,615
protocollengthfield,614
protocoltypefield,614
proxy,617querypacket,612
response packet,612
response packet
components, 612
routertohostondifferent
networks, 616
routertohostonsame
network, 616
senderhardware address
field,614
senderprotocoladdress
field,614
targethardware address
field,614
targetprotocoladdress
field,614
unicastresponse, 612
ARPA,17
ARPANET, 17
ARQ,311
AS,659,984
graphical
representation, 673
multihomed, 677
speakernode,674
stub,676
transit,677
types,676
ASCII,5,628,1029
character codetable,1032
ASK,142
bandwidth, 144,146
binary,144
carriersignal,143
constellation, 151
implementation, 144
multilevel, 145
withPSK,152
ASN.1,989
simpletypeexamples, 883
SMI,882
ASP,859
association, 737,743
termination, 748
asymmetric
cryptography, 932
asymmetrical DSL."
11815,"SeeADSL
asymmetric-key
cryptography, 933
keys,933
asynchronous balanced mode."
11816,"SeeABM
asynchronous connectionless
link.SeeACL
asynchronous TDM
ATM,525asynchronous
transmission, 133-134
Asynchronous Transmission
Mode.SeeATM
AT&TBellSystem,1059
AT&Tdivestiture, 1059
ATM,227,308,523,
526-527
AALl,532
AAL2,532
AAL3/4,534
AAL5,535
architecture, 526
asynchronousTDM,525
ATMlayer,530
available bitrateclass,789
backward compatibility, 523
cell,527
celldelayvariation, 790
cellerrorratio,790
celllossratio,790
celltransferdelay,790
cellvariation delay
tolerance, 790
connection
establishment, 528
connection release,528
connection types,536
connection-oriented, 538
connections, 528
constantbitrateclass,789
designgoals,523
example, 526
headerforNNI,531
hierarchical routing,527
Identifier, 527
Information Super-
Highway, 523
layers,529
minimum cellrate,790
multimedia, 536
multiplexing, 525
network-related
attributes, 790
peakcellrate,790
physicallayer,530
QoS,789
SONET,530
sustained cellrate,790
SVC,529
switching, 529
switching fabric,529
unspecified bitrateclass,789
user-related attributes, 790
variablebitrateclass,789
variablebitratenon-real
time,789variablebitratenonreal
time,789
variablebitrate
real-time, 789
virtualconnection, 526
WAN,536
ATMForum,523
address,1061
ATMLAN,536
advantages, 536
architecture, 536
BUS,539
client/server, 540
expansion, 536
LANE,538
legacy,536
mixedarchitecture, 537
pure,536
ATMlayer,529
celllosspriority,532
cellsize,530
congestion control,532
function, 530
genericflowcontrol,531
headererror
correction, 532
headerforUN!.531
headerformat,531
NNIlevelflowcontrol,531
payloadtype,531
UNIlevelflowcontrol,531
VCIfield,531
VPI,531
VPIfield,531
ATMswitch,536
attenuation,81,446
amplifier, 81
opticalfiber,202
attribute, 856
audio
compression, 903
audiosignal,902
authentication, 349
AHprotocol, 1000
Diffie-Hellman, 956
entity,962
IPv6,567,596
message, 962
packet,349
PPP,352
authentication data,999
authentication extension
header,602
Authentication Header
protocol."
11817,"SeeAHprotocol
authentication serve.SeeAS
authentication state,349automatic repeatrequest."
11818,"SeeARQ
autonegotiation, 409
autonomous system,671."
11819,"SeealsoAS
averagedatarate,762
B
B8ZS,118
backbone, 671
areaid,671
bus,11
logicalbus,456
logicalstar,457
virtuallink,671
backbone network, 456
backbone router,67\
backoffstrategy
CSMAlCA,378
backofftime,366
backward explicit
congestion notification."
11820,"SeeBECN
backward signal,768
band,204
AMPS,470
Bluetooth, 437
D-AMPS, 471
GSM,472
IS-95,474
band-limited signal,1049
band-pass channel,79,141
low-pass, 79
bandwidth, 69,89,103,143,
154,248,518
AM,153-154
AMradio,154,167
ASK,144,146
audiosignal,154--155
baudrate,104
BFSK,146
bitrate,78
BPSK,149
bridge,406
cellulartelephone, 167
digitalsignal,74
digitalsignal
approximation, 77
effective, 104
Ethernet, 406
FDM,162
flowcharacteristic, 776
FM,154--155
FMrequirement, 154
group,166
inbps,89
inhertz,89infinite,74
localloop,242
mastergroup,166
minimum, 104
non-periodic signal,69
NRZ-IandNRZ-L,108
opticalfiber,202
periodicsignal,69
PM,156
QAM,152
real-time traffic,915
supergroup, 166
telephone line,248
throughput, 90
transmission time,91
bandwidth ondemand
burstydata,518
bandwidth-delay product,
92,322
banyanswitch,233
internalcollision, 235
Barkersequence, 184
base,1050
base10,1051
base256,1037,1040
tobinary,1042
weightandvalue,1040
basee,1051
baseheader,597
basestation(BS),467
hasetransfonnation, 1052
baseband layer,437
baseband transmission, 75
approximation, 78
baseline, 104
baselinewandering, 104
Manchester, 109
NRZ-L,107
BasicEncoding Rules."
11821,"SeeBER
BasicLatin,1029
basicmultilingual plane
(BMP),1030
basicserviceset."
11822,"SeeBSS
BAsize,534
Batcher,235
Batcher-banyan switch,235
baudrate,103,142
andbitrate,142
bandwidth, 104
Be,787
Be,788
beaconframe,426
BECN,521
mechanism, 773
sender,773Bell Operating Company."
11823,"SeeBOC
BER,884
classsubfield, 884
format,884
formatsubfield, 884
integerexample, 885
lengthfield,885
numbersubfield, 884
SNMP,893
tagfield,884
valuefield,885
best-effort delivery, 44,583
B-frame, 908
BFSK,146
BGP,659,676
external, 677
internal,677
pathattributes, 677
pathvectorrouting,676
port,1065
session,677
bidirectional edge,673
bidirectional frame,908
binaryASK,144
binaryexponential
backoff,366
binarynotation, 550
findingtheclass,552
binarynumber,1038-1040
binaryPSK,148
symbols, 1038-1039
tobase256,1042
tohexadecimal, 1041
weightandvalue,1038
binarysystem,
1037-1038
biphasecoding,109
bipolarAMI,110
bipolarcoding,110
bit,102
bitpadding, 174,176
bitrate,73,103,142
andbaudrate,142
bandwidth, 78
bitstuffing,174,310
bit-oriented cipher,938
bit-oriented protocol, 309
bitspersecond,73
block,555
messagedigest,968
blockcode
errorcorrection, 277
linear,277
minimum Hamming
distance, 276
non-linear, 277INDEX' 1113
blockcoding,115,269
8B/I0B,118
combination, 115
division, 115
errorcorrection, 273
errordetection, 272
substitution, 115
blockdescriptor, 843
blockprocessing
RIPEMD-160, 968
blocking, 229
Blowfish, 945
Bluetooth, 421,434
applications, 434
architecture, 435
device,436
framefonnat,439
layers,436
Bluetooth LAN,435
BNCconnector, 196
Bob,932
BOC,1059
BOOTP, 618-619
binding,620
relayagent,619
staticconfiguration
protocol, 620
staticprotocol, 620
BorderGateway Protocol."
11824,"SeeBGP
BPSK,148
constellation, 151
implementation, 149
QPSK,149
bridge,406,447
asafilter,448
collision domain,407
connecting LANs,454
dynarnic, 449
Ethernet, 406
function, 406,447
loopproblem, 450
multipleLANissues,454
redundant, 450
sourcerouting,454
transparent, 449
bridgeprotocoldataunit
(BPDU),452
bridgedEthernet, 406
broadcast address
Ethernet, 400
broadcast/unknown server."
11825,"Seebus
broadcasting, 680
VLAN,460
browser, 852
clientprotocol, 8521114 INDEX
browser-Cant."
11826,"controller, 852
dynamic document, 857
HTML,855
interpreter, 852
markuplanguage, 855
streaming storedaudio/
video,909
BSS,421
BSS-transition mobility, 423
Btag,534
bucketbrigadeattack,956
buffer
circular,717
flowcontrol,311
message digest,968
packetswitch,232
receiversite,717
sendersite,717
TCP,717
bufferallocation, 534
burst,267
bursterror,267-268
2single-bit errors,296
example, 268
burstydata,518
FrameRelay,518
T-line,518
trafficcontrol,788
burstyflow,763
burstytraffic
leakybucket,779
tokenbucket,779
bus,9,11-12
advantages, II
backbone, II
disadvantages, 12
droplines,11
fault,12
tap,11
busringtopology, 382
bustopology, 34
BYEmessage, 921
bytenumber,719
bytestuffing,308
bytesynchronization, 135
byte-oriented protocol, 736
byte-stuffing, 349
C
CA,987,992
cable
coaxial,195
twisted-pair, 193
cablemodem."
11827,"SeeCM
cablemodemtransmission
system.SeeCMTScablenetwork, 241
cableTV,256
coaxialcable,197
headend,256
caching,808
counter,809
problems, 809
time-to-live, 809
unauthoritative source,809
CaesarCipher,936
CANCEL message, 921
capacities, 178,876
carrier,79,370
AM,153-154
FM,154-155
inter-LATA, 243
PM,155
carrierdivisionmultiple
access.SeeCOMA
carrierextension, 413
carrierfrequency, 143-144
carriersensemultipleaccess."
11828,"SeeCSMA
carriersensemultiple aCCess
withcollision avoidance."
11829,"SeeCSMAICA
carriersensemultipleaccess
withcollision detection."
11830,"SeeCSMAICO
carriersignal,143
ASK,143
cascading, 82
casefactor,103
CAST-l28,945
CATV,256
CBC,946
characteristics, 947
CBT,690
autonomous system,690
corerouter,691
OVMRP andMOSPF, 690
encapsulation, 691
leavingthegroup,690
multicast packet,691
rendezvous router,690
CCITT,20
CCK,434
COMA,162,383,385,
474-475,478
encoding, 387
sequence generation, 389
COMAmultiplexer, 475
COMA2000,478
cell,524, 527-528, 790
ATM,527
definition, 524
header,528payload,527
size,527
structure, 528
cellnetwork, 524
concept,524
example, 525
multiplexing, 524
real-time transmission, 525
stream,525
vsframenetwork, 524
cellrelay,523
cellulartelephone, 167
cellulartelephony, 467
firstgeneration, 469
handoff,469
MSC,469
placingacall,468
querysignal,469
radius,467
receiving acall,469
secondgeneration, 470
thirdgeneration, 477
tracking, 467
transmission power,467
weaksignal,469
centerrouter,684
Cerf,Vint,17
certification authority."
11831,"SeeCA
CFB,947
CGI,857
body,859
form,858
header,859
output,859
parameter passing,858
querystring,858
Challenge Handshake
Authentication Protocol."
11832,"SeeCHAP
channel,8,162
channelidentifier, 533
channelization, 383
channels
FDM,162
CHAP,352
packettypes,353
password, 353
security,353
three-way handshake, 352
character-oriented cipher,938
character-oriented
protocol, 308
Cheapemet."
11833,"SeelOBase2
checksum, 298,711,731
ashashfunction, 967
example, 594examples, 298
fragmentation, 591
headercoverage, 594
IPv4,594
option,712
performance, 301
protocolfield,712
receiverprocedure, 300
SCTP,740
senderprocedure, 300
testing,628
UOP,711-712
chip,l84,386
chokepoint,767
chunk,739,743
format,743
identifier, 741
TSN,739
CIDR,556
cipher,932
AES,943
bit-oriented, 938
Caesar,936
character-oriented, 938
compression
permutation, 940
monoalphabetic, 935
polyalphabetic, 935
rotation,939
shift,936
straightpermutation, 940
substitution, 935,939
transposition, 937
XOR,938
cipherblockchaining mode."
11834,"SeeCBC
cipherfeedback mode."
11835,"SeeCFB
ciphertext, 932
RSA,950
CIR,787
circuit
dedicated, 217
circuitswitching, 214
acknowledgment, 217
datatransfer,217
delay,217
efficiency, 217
telephone company, 218
circuit-switched network,
214,217
telephone network, 244
circularbuffer,717
cladding, 198
step-index multimode, 199
classAaddress,553
classBaddress,553classCaddress,553
classfuladdressing, 552
blocks,553
classes,553
classless addressing, 554
classless addressing, 555
addressallocation, 561
c1assfuladdressing, 554
firstaddress,556
hierarchy, 561
lastaddress,556
restrictions, 555
routingtable,656
Classless Interdomain
Routing."
11836,"SeeClDR
cleartosend(CTS),425
CLEC,242,1059
POP,243
client,704
clientprogram
portnumber,704
client/server
DNS,797
e-mail,827
LANE,539
paradigm, 704
remotelogin,817
types,797
WWW,851
client-server paradigm, 704
Closcriteria,230
closed-loop congestion
control,765
coax.Seecoaxialcable
coaxialcable,192,195
applications, 197
cableTV,197,256
conductor, 196
connector, 196
Ethernet, 198
frequency range,195
HFC,257
performance, 197
sheath,196
standards, 196
telephone networlc, 197
code,5
codedivisionmultipleaccess."
11837,"SeeCDMA
codepoint, 585
codeword, 271,275
dataword, 292
geometry, 276
coding,10I,269
AMI,110
complexity, 106
errOrdetection, 106noise
coding,106
NRZ,107
schemes, 106
summary, 114
codingtheory,386
coherent BFSK,147
ColdFusion, 859
collision, 364
CSMA,370
CSSMAJCD,374
hashfunction, 967
slottime,401
wireless, 425
collision domain,407
Committed, 787
committed burstsize."
11838,"SeeBe
committed information rate."
11839,"SeealsoCIR
calculation, 788
common carrier,242
after1996,1059
Common Gateway Interface."
11840,"SeeCGI
community antennaTV,256
compatible address,571
competitive localexchange
carrier.SeeCLEC
complement
Walshtable,389
complementary codekeying."
11841,"SeeCCK
composite analogsignal,74
composite signal,66,1046
distortion, 83
compression
FTP,843
MPEG,907
spatial,907
computer data,80
conductor
twisted-pair, 193
unguided media,203
confidentiality, 962, 964, 991
configuration
management, 874
documentation, 874
hardware
reconfiguration, 874
reconfiguration, 874
subsystems, 874
congestion, 521,763,773
additive increase, 770
buffer,623
destination host,623
example, 763FrameRelay,521
ICMPv6,639
leakybucket,778
mUltiplicative
decrease, 771
prevention, 766
queue,764
routers,623
congestion avoidance
FrameRelay,773
congestion avoidance
(additive increase), 772
congestion control,522,720,
761,763,765
closed-loop, 767
FrameRelay,773
networkrole,769
open-loop, 766
SCTP,742,753
congestion policy,769
congestion window, 769
congestion window
(cwnd),730
congestion-controlled
traffic,599
connecting device,
36,445
connection
nonpersistent, 868
persistent, 868
connection control,38
connection establishment
procedure, 723
three-way
handshaking, 723
connection setup,217
connection teardown, 217
connection termination, 748
connectionless, 219
connectionless network, 219
connectionless service,
582,707
UDP,713
connectionless transport
layer,38,701
connection-oriented
protoco\' 538
connection-oriented service,
582,707,718,738
TCP,45
connection-oriented transport
layer,38,701
connector, 193
coaxialcable,196
opticalfiber,200
constantbitratetraffic,762
constellation diagram, 150INDEX 1115
Consultative Committee for
International Telegraphy
andTelephony."
11842,"See
CCITT
contactaddress,1061
contention, 364
contention window, 378
controlchunk,742
controlfield
HDLC,342
types,343
controlframe,428
controlinformation
SCTP,740
controlvariable, 319
controlled access,379
controller, 10,852
convergence sublayer."
11843,"SeeCS
convolution coding,269
cookie,725,744-745,853-854
advertising agency,854
COOKIE ACKchunk,744
COOKIE ECHOchunk,744
core,198
corerouter,684,690
Core-Based Tree.SeeCBT
corrupted frame,318
cosinewave,1045
cosmicray,192
cotangent, 1046
countrydomain,805
example, 805
mapping, 807
CPI,534-535
CRC,284,535
ATM,532
design,290
hardware
implementation, 287
HDLC,342
PPP,348
standardpolynomial, 297
CRC-32,399
wireless, 427
criticalangle,198
crossbarswitch,228,233
limitation, 228
crosspoint, 228
crosstalk, 84,193
cryptography, 931,957
comparison, 934
cryptosystem
Diffie-Hellman, 952
CS,532
CSMA,370,377
collision, 370
vulnerable time,3711116 INDEX
CSMAlCA, 365,377
procedure, 378
wirelessnetwork, 378
CSMAlCD, 365,373,
377,401
Ethernet, 399,401
framesize,374
full-duplex switched
Ethernet, 408
procedure, 375
wireless, 423,425
CTS,425
CU,785
curTSN,749
cycle,58
infinite,62
phase,63
cycliccode,284
advantages, 297
analysis, 293
cyclicredundancy check."
11844,"SeeCRC
D
DA,399
D-AMPS, 471
data,4,311
transmission, 57
datachunk,742
datacommunications, 4
datacompression
presentation layer,41
datadelivery, 747
dataelement, 102,142
DataEncryption Standard."
11845,"SeeDES
dataframe,428
inpoll,381
DataLinkConnection
Identifier."
11846,"SeeDLCI
datalinkcontrol,
307,311,363
datalinklayer,34,307
accesscontrol,35
addressing, 35
errorcontrol,35,311
flowcontrol,35,311
framing, 35,308
function, 34
physicaladdressing, 35
PPP,347
sub-layers, 363,395
virtual-circuit network, 227
datalinkprocessor, 232
DataoverCableSystem
Interface Specification."
11847,"SeeDOCSISdatarate,103
bandwidth, 104
maximum, 129
signalrate,103
dataratelimits,85
datatraffic,761
descriptor, 761
datatransfer,725,747
circuitswitching, 217
multi-homing, 747
SCTP,745
virtual-circuit network, 223
vsdatadelivery, 747
database
DHCP,620
multicasting, 681
datagram, 45,219,583
format,583
inIPv4,583
IP,44
datagram network, 214,219
dataword, 271,275
augmented, 288
codeword, 292
dccomponent, 105
8B6T,112
bipolar,110
Manchester, 109
NRZ-IandNRZ-L,108
DCF,423,442
PIFS,425
repetition interval,426
DCT,905
ACvalue,905
gradientcase,905
sharpchangecase,905
uniformgrayscale
case,905
DDNS,812
DHCp,812
DDS,248
defactostandard, 20
dejurestandard, 20
DEPHB,785
decibel,81decimalnumber,1037
decimalsystem,1037
symbols, 1037
tobinary,1038
weightandvalue,1038
decisionlogicanalyzer, 280
decoder, 278
decoding
CDMA,387
decryption, 932
RSA,950
defaultmask,553defaultmethod,649
defaultrouter,624
degreeofpolynomial, 291
delay,90,764
circuitswitching, 217
datagram network, 221
load,765
real-time, 912
time-division switch,231
virtual-circuit network, 226
delayedresponse, 633
delimiter, 309
delivery, 647
direct,647
end-to-end, 37,701
indirect,647
source-to-destination,
36-37,547,701
station-to-station, 36,547
deltamodulation."
11848,"SeeDM
demodulator, 164
demultiplexer, 162
demultiplexing, 164,707
filters,164
transport layer,707
DEMUX."
11849,"Seedemultiplexer
denialofserviceattack,725
denseWDM,168
Department ofDefense."
11850,"SeeDOD
DES,941
triple,943
designated parentrouter,688
destination address.SeeDA
destination host
reassembly, 590
destination option,603
destination serviceaccess
point(DSAP), 396
destination unreachable, 623
ICMPv6,639
DHCP,620
BOOTP, 620
configuration, 620
database, 620
DDNS,812
dynamic configuration
protocol, 620
dialogcontrol,39
Differential Manchester, 109
Differentiated Services."
11851,"SeeDF
Diffie-Hellman, 952
DIFS,425
digital
vsanalog,57
digitalAMPS.SeeD-AMPSdigitalcellulartelephone, 80
digitaldata,57,101
digitaldataservice.SeeDDS
digitalservice,247
noise,247
digitalserviceunit.SeeDSU
digitalsignal,57-58,
71,101
bandwidth, 74
bitrate,73
composite analogsignal,
74,79
levels,71
non-periodic, 74
digitalsignalservice.SeeDS
digitalsubscriber line."
11852,"SeeDSL
digitalsubscriber lineaccess
multiplexer."
11853,"SeeDSLAM
digitaltoanalog
encoding, 142
digitaltransmission, 101
digital-to-analog, 141-142
bandwidth, 143
digital-to-digital
conversion, 101
Dijkstraalgorithm, 668
multicast linkstate
routing,685
directcurrent,105
directdelivery, 647
directsequence spread
spectrum."
11854,"SeeDSSS
directory services, 42
discarding policy,766
DiscreteCosineTransform."
11855,"SeeDCT
discretemultitonetechnique."
11856,"SeeDMT
disklessmachine, 618
distanceleaming, 682
Distance VectorMulticast
RoutingProtocol."
11857,"SeeDVMRP
distancevector
routing,660
initialtables,661
instability, 663
RIP,665
sharing,661
distortion, 83
distributed coordination
function."
11858,"SeeDCF
distributed interframe space
(DIFS),425
distributed processing, 7
distribution hub,257distribution system,422
divisor
CRC,286-287
DLCI,519
FrameRelay,520
DM,129
adaptive, 131
demodulator, 130
modulator, 130
quantization error,131
DMT,252,255
ADSL,253
divisionofbandwidth, 252
FDM,252
QAM,252
VDSL,255
voice,252
DNS,797-798
caching,808
countrydomain,805
divisions, 803
domain,802
encapsulation, 812
genericdomain,804
Internet, 803
inverted-tree
structure, 799
labels,799
levels,799
message, 809
primaryserver,803
questionrecord,811
recordtypes,811
resolver, 806
resource record,811
reversedomain,805
rootserver,803
secondary server,803
server,802
TCP,812
UDP,812
updating, 812
zone,802
DNSmessage
additional information
section,811
answersection,810
authoritative section,811
header,809
identification field,809
question section,810
DNSresponse
answerrecordsfield,810
question records
field,810
DOcommand, 822
donotfragment bit,591DOCSIS,260
downstream, 261
upstream, 260
document, 854,965
active,860
dynamic, 857
static,855
DOD,17
domain,801
country,805
generic,805
inverse,805
domainname,799,831
full,799
DomainNameSystem."
11859,"SeeDNS
domains, 802
DONTcommand, 822
dotted-decimal notation, 550
downlink, 481
downloading
V90,250
dropcable,256
dropline,11
dropper,786
DS,176,785
DS-Oservice,176
DS-lservice,176
DS-2service,176
DS-3service,177
DS-4service,177
field,785
hierarchy ofdigital
signals,176
DS-O,I77
DSCP,785
DSL,241,251
limitation, 257
DSLAM,254
DSSS,184,474-475
bandwidth sharing,185
HR-DSSS,434
wireless, 432
DSU,248
dualringtopology, 382
dualstack,604
duplex,7
duplicate ACKs,732
DVMRP, 686,690
CBT,690
MBONE,693
PIM-DM,692
DWDM,168
dynamic, 658
dynamic database, 620
dynamic document, 857
example, 857
script,859Dynamic DomainName
System.SeeDDNS
Dynamic HostConfiguration
Protocol."
11860,"SeeDHCP
dynamic mapping, 612
dynamic port,705
dynamicrouting,655
dynamic routingtable,656
dynamic table,658
E
Eline,178
capacity, 178
eavesdropping, 603
ECB,946
echorequestandreply
messages, 625
ICMPv6,640
e-commerce, 854
EFPHB,785
effective bandwidth,
104,762
efficiency
circuitswitching, 217
datagram network, 220
virtual-circuit network, 226
EHF,204
EIA,20
interfaces, 21
manufacturing concerns, 21
electromagnetic energy,192
electromagnetic signals,57
electromagnetic spectrum,
192,203
bands,204
Electronic CodeBlock
(ECB),946
electronic codebookmode."
11861,"SeeECB
Electronic Industries
Association."
11862,"SeeEIA
electronic mail.Seee-mail
electronic serialnumber
(ESN),474
elm,829
e-mail,824
address,831
alias,831
architecture, 824
composing, 828
forwarding, 829
reading,829
replying, 829
encapsulati on
ARP,615
DNS,812
IGMP,635INDEX 1117
Encapsulation Security
Payload."
11863,"SeeESP
encoder, 278
CRC,286
encoding
Ethernet, 403
RZ,108
encrypted securitypayload."
11864,"SeeESP
encryption, 932
DES,941
IPv6,596
presentation layer,40
RSA,950
symmetric-key, 933
endoffice,241-242
endswitch,243
POP,243
endingtag,534
end-of-option option,595
energylevel,375
entity,19
envelope, 830
AM,153
ephemeral portnumber,704
queue,714
error,267
errorcontrol,38,307,311,
702,720,731
concept, 311
datalinklayer,311
HDLC,343
PPP,348
retransmission, 31]
SACKchunk,753
SCTP,742,751
TCP,715
transport layer,37,701
UDP,713
errorcorrection, 269,273
blockcoding,273
minimum distance, 276
retransmission, 269
errordetection, 269
blockcoding,116,272
checksum, 298
FrameRelay,518
HDLC,342
tools,731
errorreporting, 638
ICMP,622
ICMPv6,639
escapecharacter (ESC),309
ESP,603,1000
AHprotocol, 1001
authentication data
field,10011118 INDEX
ESP-Cont."
11865,"nextheaderfield,1000
padlengthfield,1000
paddingfield,1000
procedure, 1000
sequence number
field,1000
SPIfield,1000
ESS,421
communication, 422
composition, 422
stations,422
ESS-transition mobility, 423
established, 528
establishment state,349
Etag,534
Ethernet
addresstransmission, 400
addressing, 400
BNC,196
bridged,406
collision, 401
collision domain,407
CRC,399
CSMA/CD, 408
DA,399
datafield,399
fields,398
framelength,399
full-duplex switched, 408
implementations, 402
IPv6address,570
length/type field,399
MACcontrolsublayer, 409
MACframe,398
MACsublayer, 409
maximum frame
length,399
minimum datalength,399
multicast address,400
multicasting, 636
networklength,402
preamble, 398
SA,399
SFD,398
sharedcapacity, 406
slottime,401
switched, 407
thick,403--405
thin,404
unicastaddress,400
Ethernet address,46
Eudora,830
Eve,932
excessburstsize.SeeBe
exclusive OR.SeeXOR
exponential function, 1050exponential increase, 769
exposedstation,429,431
extended address,521
Extended ASCII,1029
extended serviceset.SeeESS
extension header,602
authentication, 602
destination option,603
ESP,603
fragmentation, 602
hop-by-hop option,602
sourcerouting,602
externalBGP(E-BGP), 677
extremely highfrequency."
11866,"SeeEHF
F
fall-back, 249
fall-forward, 249
FastEthernet, 397,409
autonegotiation, 409
backward compatibility, 409
encoding, 411
MACsublayer, 409
physicallayer,410
fastretransmission, 732
faultidentification, 10
faultisolation
ring,12
faultmanagement, 875
isolating thefault,875
performance
management, 876
proactive, 876
reactive, 875
subsystems, 875
FCC,205,477
address,1061
FCS,342
HDLC,342
PPP,348
FDM,162
applications, 167
carrier,162
cellulartelphone, 167
channels, 162
circuit-switched
network, 214
FDMA,384
guardbands,163
implementation, 167
OFDM,433
process,163
telephone system,165
TV,167
FDMA,383,470,473,478
FDM,384FECN,521
receiver, 773
FederalCommunications
Committee."
11867,"SeeFCC
Feistel,942
DES,941
FHSS,181
bandwidth, 182
bandwidth sharing,183
Bluetooth, 437
wireless, 432
fiber,168,491
fibernode,257
fiber-optic cable,192
bandwiddth
capabilities, 491
trunk,242
FIFOqueueing, 776
leakybucket,778
priorityqueueing, 777
fifthharmonic, 68
filetransfer
problems, 840
filetransferprotocol."
11868,"SeeFrP
filter
localloop,252
filtering, 448
FINsegment, 727~728
FIN+ACK segment, 728
final,343
fingerprint, 965
firewall,1021
packetfilter,1022
proxy,1023
firstharmonic, 68,77
fixedfilterstyle,784
flag
character-oriented
protocol, 308
flagfield
HDLC,342
flat-topsampling, 121
flickering, 903
flooding, 667
multicast distancevector
routing,686
RPF,686
flowcharacteristics, 775
flowclass,776
flowcontrol,38,307,311,
701,720
buffer,311
concept, 311
congestion, 623
datalinklayer,311
FrameRelay,773
HDLC,343inIF,623
PPP,348
receiver, 311
SCTP,742,748
TCP,715
transport layer,37,701
UDP,713
flowlabel,597,600
real-time transmission, 601
rulesforuse,601
flowspecification, 780-781
FM,153
bandwidth, 154
FMradio,71,167
bandwidth, 167
footprint, 480
LEO,484
forums, 20~21
forwarderrorcorrection, 269
forwardexplicit
congestion notification."
11869,"SeeFECN
forwardsignal,768
forwarding, 647-648
classless addrressing, 650
forwarding techniques, 648
four-dimensional five-level
pulseamplitude
modulation."
11870,"See4D-PAM5
Fourieranalysis, 67,
74,1046
Fourierseries,1046
Fouriertransform, 1048
four-way handshake,
722,744
FQDN
DNSserver,800
FRAD,522
FrameRelay,522
fragmenation
fragment ofa
fragment, 593
fragmentation, 589,602,747
checksum, 591
definition, 590
donotfragment bit,591
example, 591
fieldscopied,590
flagsfield,591
fragmentation offset,591
headerfields,591
ICMPerrormessage, 591
identification field,591
IPv6,639
morefragment bit,591
offset,591reassembly, 590
reassembly steps,593
SCTP,747
wireless, 426
frame,35,307,342,519,521,
773-774
Bluetooth, 439
HDLC,341
MPEG,907
TDM,170
video,902
framebursting, 413
framechecksequence."
11871,"SeeFCS
framelength
Ethernet, 399
fraInenetwork, 523
framesize,524
FrameRelay,227,517
accessrate,787
addressfield,520
architecture, 518
BC,787
Be,788
BECN,521
burstydata,518
CIR,787
command response
bit,521
congestion, 521
congestion avoidance, 773
congestion situation, 774
cost,518
datalinklayer,520
datarate, 518
discardeligibility bit,521
DLCI,519
extended addressbit,521
FECN,521
flowcontrol,773
FRAD,522
frameformat,520
framesize,518
layers,518-519
LMI,522
QoS,787
switchtable,519
userrate,788
virtualcircuitnetwork, 519
YOFR,522
FrameRelayassembler/
disassembler."
11872,"SeeFRAD
framesize
CSMAlCD, 374
frametag,462
framenetwork
delay,524framing, 307,396
fixed-size, 308
MAC,397
variable-length, 308
framingbit,J75
frequency, 60, 62,121,
142,153
AM,153
asrateofchange,62
ASK,143
carriersignal,143
cellulartelephony, 467
extremes, 62
FM,154
high,62
infinite,62
inverse,60
low,62
non-periodic signal,74
periodicsignal,74
PM,155
PSK,148
sinewave,65
units,61
wavelength, 64
zero,62
frequency band
satellite
communication, 480
frequency divisionmultiple
access.SeeFDMA
frequency hoppingspread
spectrum."
11873,"SeeFHSS
frequency masking, 904
frequency modulation."
11874,"SeeFM
frequency shiftkeying."
11875,"SeeFSK
frequency-division
mUltiplexing."
11876,"SeeFDM
frequency-domain plot,65
FSK,142,144
frequency, 146
FTP,840,852-853
anonymous FTP,844
ASCIIfile,842
attributes of
communication, 842
binaryfile,842-843
block mode, 843
clientcomponents, 840
clientdefinitions, 842
communication, 841
compressed mode,843
connections, 840
controlconnection,
840-841dataconnection, 840-842
datastructure, 842
fileretrieval, 842
filestorage,842
filestructure, 843
filetransfer,843
filetype,842
HTTP,861
NYT,841
pagestructure, 842
port,1065
ports,840
recordstructure, 842-843
sendingadirectory orfile
name,842
servercomponents, 840
textfile,843
transmission mode,843
fulldomainname,799
full-duplex, 7,34
Seeduplex
full-duplex service,718,738
FullyQualified Domain
Name.SeeFQDN
fundamental frequency, 68
G
G.71,924
G.723.1,924
G.723.3,903
G.729,903
gammaray,192
gap
asynchronous
transmission, 133
gatekeeper, 924
gateway, 923
gatewaylink(GWL),484
G-Back-N
sendersite,328
generalheader
SCTP,743
generalquerymessage
generator, 272, 278, 282, 953
CRC,285
examples, 297
generator polynomial, 294
genericdomain,804
firstlevel,805
mapping, 807
GEOsatellite,480-481
geographical routing,655
geosynchronous orbit,481
geosynchronous satellite,481
GETmessage, 909-911
GFSK,437
GIF,857INDEX 1119
GigabitEthernet, 397,412
carrierextension, 413
encoding, 415
framebursting, 413
implementation, 414
MACsublayer, 412
mediumaccess,412
networklength,413
physicallayer,414
traditional, 413
gigabitLAN
4D-PAM5, 113
globaladdress,222
globaladdressing, 549
GlobalPositioning System
(GPS),481
GlobalSystemforMobile
Communication."
11877,"SeeGSM
Globalstar, 486
Go-Back-N, 324
acknowledgment, 327
design,327
receiversite,330
receivewindow size,328
sendwindowsize,328
senderslidingwindow, 324
sequence number,324
timer,326
Go-Back-N ARQ
Stop-and-WaitARQ,331
Go-Back-N window, 766
Gopher,853
port,1065
government regulatory
agencies, 20
GPS,482
graded-index multimode
opticalfiber,199
grafting, 689
groundpropagation, 203
antenna, 203
group,166
bandwidth, 166
groupaddress,679
groupid, 632
group-shared tree,684
GSM,472,903
guardband,163,383
jumbogroup,166
telephone system,166
guardtime,384
guestpassword, 844
guidedmedia,192
conductor, 192
definition, 192
fiber-optic cable,1921120 INDEX
H
H.225,924
H.245,924
H.248,736
H.323,736,920, 923
half-close, 727-728
half-duplex, 6,34
Hamming, 280
Hamming code,280
performance, 283
Hamming distance, 274
error,275
minimum, 274
handoff, 469
handshaking
wireless, 425
hardhandoff, 469
hardstate,784
harmonics, 1047
hashalgorithm, 967
hashfunction, 965
criteria,966
MAC,969
weakcollision, 967
hashing
AHprotocol, 999
HDB3,119
HDLC,340,346
addressfield,342
controlfield,342
definition, 340
errordetection, 342
flagfield,342
frameformat,342
frametypes,341
information field,342
LLC,396
NRM,340
stationaddress,342
synchronization pattern,342
transfermodes,340
HDSL,255
2BIQencoding, 255
HDTV,73
headend,256
header,32
cell,528
CGI,859
SCTP,740,743
headererror,624
headertranslation, 605
HEC,534
hexadecimal colon
notation, 567
hexadecimal system,
1037,1039
tobinary,1042
weightandvalue,1039HF,204
HFC,256
bands,258
bandwidth, 257
datarate,258-259
downstream data,258
downstream sharing,259
modulation, 258
sharing,259
transmission medium, 256
upstream data,258
upstream sharing,259
videoband,258
hiddenstation,423,429
hierarchical namespace,798
hierarchical routing,653
hierarchy
nameserver,802
highbitratedigitalsubscriber
line.SeeHDSL
high-density bipolar3-zero."
11878,"SeeHDB3
High-level DataLink
Control."
11879,"SeeHDLC
high-rate DSSS."
11880,"SeeHR-DSSS
HMAC,970
hopcount,658
RIP,665
hop-by-hop option,602
jumbopayload, 602
Padl,602
PadN,602
payload, 602
homantenna, 206-207
host
routingtable,624
hostfile,798
hostid,553
host-to-host delivery,
579,703
host-to-host protocol, 44
Hotmail, 839
housevoltage,59
HR-DSSS, 434
HTML,852,855
anchor,857
attribute, 856
browser, 856
example, 855
graphicimage,857
markuplanguage, 855
tag,856
HTTP,839,852-853, 861,
909-911
body,866
client,861embedded commands, 861
entityheader,866
FrPsimilarity, 861
generalheader,864
header,864
headercategories, 864
message format,861
MIME,861
port,1065
proxyserver,868
requestheader,865
response header,865
retrieval Example, 866
server,861
SMTPsimilarity, 861
statuscode,863
statusphrase,863
transaction, 861
version,863
WWW,861
hub,10
humanvoice,69
hybridnetwork, 1005-1006
IPaddress, 1006
hybrid-fiber-coaxial network."
11881,"SeeHFC
HyperText Markup
Language."
11882,"SeeHTML
Hypertext Transfer Protocol."
11883,"SeeHTTP
I
IAB
address, 1062
IANA,705
ICANN, 561,811
address, 1062
ICMP,43,621
checksum, 626
checksum field,622
codefield,622
datasection,622
echorequestandreply
messages, 625
errorcorrection, 622
errorhandled, 622
errorhandling, 44
errormessage, 622
errorreporting, 622
error-reporting
message, 621
ICMPtypefield,621
IPheader,623
loop,624
message format,621
message types,621messages, 44
modifications, 597
nongeneration of
message, 622
parameter problem
message, 624,639
portnumbers, 623
purpose, 622
querymessage, 621,625
redirectmessage, 624
routersolicitation and
Advertisement, 626
sourcequench
message, 623
timeexceeded
message, 624,639
timestamp messages, 626
ICMPv6
compared toICMPv4,
638-639
destination umeachable
message, 639
echorequestandreply,640
errorpacket,638
errorreporting, 638
groupmembership, 640
IGMP,640
neighbor solicitation and
advertisement, 640
packettoobig,639
parameter problem, 639
querymessages, 639
redirection, 639
routersolicitation and
advertisement, 640
timeexceeded, 639
idealsampling, 121
IEEE,20
address, 1061
Project802,395
IEEE802.11,421
IEEE802.11FHSS,432
IEEE802.11infrared, 432
IEEE802.11aOFDM,433
IEEE802.11bDSSS,434
IEEE802.15,435
IESG
address, 1062
IETF,920
address, 1062
ifconfig, 657
I-frame, 341,343,907
IFS,377
IGMP,43,630
addressconversion, 636
addressmapping, 636
checksum field,632data-link layer,636
delayedresponse,
633-634
destination IP
address,635
distributing router,632
domain,635
encapsulation, 635
Ethernet address,636
function, 630
groupaddressfield,632
hostlist,632
hostmembership, 632
ICMPv6,596,640
IPprotocol, 630
joiningagroup,632
leavereport,631
leavingagroup,633
loyalmember, 632
maximum response type
field,631
membership report,631
message format,631
messagetypes,631
monitoring group
membership, 633
multicast routing,685
physicalmulticast
addressing, 636
protocolfield,635
queryformembership
continuation, 633
querymessage, 631
queryrouter,635
routermembership, 632
TTLfield,635
tunneling, 637
typefield,631
WAN,637
ILEC,242,1059
POP,243
image,5
IMAP4,838
IMP,17
impulsenoise,84
IMT-DS, 478
IMT-FT,478
IMT-MC,478
IMT-SC,478
IMT-TC,478
inbox,829
incumbent local
exchange carrier."
11884,"SeeILEC
indexofrefraction, 199
indirectdelivery, 647
inducednoise,84infinity
distancevector
routing,664
RIP,665
information
analoganddigital,57
types,5
information field
HDLC,342
InfraredDataAssociation
(IrDA),208
infraredlight,192
infraredwaves,204,207
applications, 208
frequencies, 207
infrastructure network, 421
INITACKchunk,744
INITchunk,744
initial sequence number
(ISN),721
initiation vector(IV),946
innerproduct,387
inputport
packetswitch,232
instability
distancevector
routing,663
instancesuffix,888
InstituteofElectrical &
Electronics Engineers."
11885,"SeeIEEE
Integrated Services."
11886,"SeeIntServ
integrity, 962,964
AHprotocol, 1000
checking, 966
interactive audio/video, 901
interconnectivity, 20
interdomain routing,659
pathvectorrouting,674
interexchange carrier."
11887,"SeeIXC
interface
LSP,668
OSImodel,31
interface message processor."
11888,"SeeIMP
interference, 193,267
interframe space.SeeIFS
InterimStandard-95."
11889,"SeeIS-95
inter-LATA service,243
interleaving
cellnetwork, 525
framebuilding, 172
synchronousTDM,171
TDM,l72internal,235
internalBGP(I-BGP), 677
International DataEncryption
Algorithm (IDEA),945
International Standards
Organization."
11890,"SeeISO
International
Telecommunications
Union.SeeITU
International
Telecommunications
Union­
Telecommunication
Standards Sector."
11891,"SeeITU-T
Internet, 16~17,241
checksum,299,303
current,17
datagram approach, 581
datagram network, 221
DNS,803
draft,21
history,17
packet-switched
network, 581
standard, 21
internet, 15
concept,611
definition, 17
logicaladdress,611
packet,611,658
packetdelivery, 612
physicaladdress,611
purpose, 817
InternetControlMessage
Protocol."
11892,"SeeICMP
InternetGroupManagement
ProtocoL SeeIGMP
InternetMailAccess
Protocol, version4."
11893,"SeeIMAP4
InternetMobile
Communication, 477
Internetphone,912
InternetProtocol, 579
InternetProtocol Control
Protocol."
11894,"SeeIPCP
InternetProtocol version4."
11895,"SeeIPv4
InternetProtocol, Next
Generation."
11896,"SeeIPng
InternetProtocol, Version6."
11897,"SeeIPv6
Internetradio,902
InternetTV,902
internetwork layer."
11898,"SeenetworklayerINDEX 1121
internetwork protocol."
11899,"SeeIP
internetwork."
11900,"Seeinternet
internetworking protocol."
11901,"SeeIP
INTERNIC, 569
interoperability, 19
Interpret AsControL SeelAC
interpreter, 852
inter-satellite link(ISL),484
intracoded frame,907
intradomain routing,659
intra-LATA service,242
inTransit, 749
IntServ,781
DF,785
problems, 784
RSVP,782
inversedomain,805
mapping, 807
server,805
inversequery,805
INVITEmessage, 921
ionosphere, 203
IP,17,43--44
advantages, 44
analogy,583
congestion, 623
connectionless protocol, 44
datagram, 44
deficiencies, 621
flowcontrol,623
host-to-host protocol, 44
lackoferrorhandling, 621
lackofmanagement
communication, 621
networklayerprotocol, 43
protocols, 43
routing,44
IPaddress,45,52,549,704
ARP,44
binarynotation, 550
depletion, 554
disklessmachine, 618
dotted-decimal
notation, 550
example, 47
format,47
hierarchy, 559
host,705
hostid,553
location, 618
needfor,47
netid,553
notation, 550
RARP,44
unique,549
universal, 5501122 INDEX
IPaddressing, 549
lPpacket,647
lPSecurity."
11902,"SeelPSec
lPtelephony, 736
lPCP,354
packetformat,354
IPng,584
IPSec,996
modes,996
lPv4,549, 579, 582, 1040
addressspace,550
addressspaceproblems,
566,596
analogy,583
audioandvideo
problems, 596
best-effort delivery, 583
compared tolPv6
header,601
comparison tolPv6,603
congestion handling, 584
connectionless, 583
datagram, 583
deficiencies, 596
headertranslation, 605
IPSec,IOO1
pairedwithTCP,583
reliability, 583
securityproblems, 596
transition toIPv6,603
tunneling, 604
unreliable, 583
IPv4datagram
checksum field,588
destination address
field,588
destination protocol, 587
differentiated
services, 584
fragmentation, 586,590
fragmentation offset
field,587
headerlength
calculation, 586
headerlengthfield,584
hopsallowed,587
identification field,587
loopproblem, 587
precedence subfield, 584
priority,584
protocolfield,587
reassembly, 590
sourceaddressfield,588
time-to-live field,587
TOSbitssubfield, 584
totallengthfield,586
versionfield,584IPv6,549,567,596
addressabbreviation, 567
addressnotation, 567
addressspace,568,597
compared tolPv4
header,601
comparison toIPv4,603
destination address
field,599
destination option,603
ESP,603
extension header,602
extension ofthe
protocol, 597
flowlabel,598,600
flowofpackets,600
fragmentation, 602
headerformat,597
headertranslation, 605
hoplimitfield,598
IPSec,1001
newfeatures, 567,596
newoptions,597
nextheaderfield,598
PadN,602
payloadlengthfield,598
priorityfield,597,599
resource aIlocation, 597
routingprotocols, 597
runsofzero,568
sourceaddressfield,598
sourcerouting,602
transition fromIPv4,603
tunneling, 604
versionfield,597
IPv6address
abbreviation example, 568
consecutive zeros,568
fields,569
lPv4,571
multicast, 570
provider-based, 569
spaceassignment, 568
unicast,569
IPv6packet
baseheader,597
baseheaderfields,597
extension header,597
format,597
payload, 597
lPv6traffic,599
congestion-controlled, 599
flowlabel,601
noncongestion-
controlled, 600
priorityassignments, 599
IrDAport,208Iridium,485
IRTF
IS-95,474,478
dataratesets,476
reversetransmission, 475
ISMband,432
DSSS,432
FHSS,432
ISO,20,29
address,1062
purpose, 29
ISOC
address,1062
isochronous transmission, 135
ISP,653
addrressallocation, 561
local,653
national, 653
PPP,346
regional, 653
issues,454
iterativeresolution, 808
ITM-2000,477
ITV,20
address,1062
ITD-T,20
ATM,523
IVA,736
IXC,1059
POP,244
IXCs,243
J
jamming, 161
Java,852,860
Javaapplet,860
JavaScript, 852,860
jitter,94,913
timestamp, 913
JointPhotographic Experts
Group.SeeJPEG
JPEG,857,904,908
compression, 906
DCT,905
quantization, 906
redundancy, 904
spatialcompression, 907
jumbogroup,166
bandwidth, 166
jumbopayloadoption, 602
K
Kahn,Bob,17
KDC,983
AS,984
Kerberos,983
ticket,983Kepler'slaw,479
Kerberos, 983-984
operation, 984
realm,986
Kevlar,200
key,932,934
private,934
public,934
RSA,949
S-box,939
secret,934
keyedhashfunction, 969
L
L2CAP,440
multiplexing, 441
label
countrydomain,805
genericdomain,805
LAN,395
bridge,454
connection less,538
datarate,14
example, 14
Internet,395
interoperability, 538
logicalsegments, 459
media,14
multicasting, 538
physicaladdress,538
purpose, 14
size,14
switched, 459
virtualconnection
identifier, 538
VLAN,459
wireless, 421
LANemulation."
11903,"SeeLANE
LANE,538
ATMLAN,538
client/server model,539
connectionless
protocol, 538
LEC,539
LECS,539
LES,539
LANEclient.SeeLEC
LANEconfiguration server."
11904,"SeeLECS
LANs,454
LATA,242,1059
communication, 243
POP,244
latency,90
components, 90
Latin-I,1029LCP,350
codefield,350
PPP,350
leakybucket,777
tokenbucket,780
lease,620
leavereport,631,633
leavereportmessage
destination IPaddress,636
LEC,242,539,1059
POP,243
LECS,539
legacyATMLAN,536
lengthfield,534
lengthindicator, 533,535
LEOsatellite,480,484
lexicographic ordering, 889
LF,204
LI,535
light,192
linebandwidth, 248
linecoding,101
linearblockcode,277
cycliccode,284
minimum distance, 278
line-of-sight
microwaves, 206
line-of-sight propagation,
203,481
antenna,203
link,8,36,162
OSPF,671
point-to-point, 672
stub,673
transient, 672
virtual,673
linkaddress,46
LinkControlProtocol."
11905,"SeeLCP
linklocaladdress,572
linkstatepacket.SeeLSP
linkstaterouting,666
LISTcommand, 842
LLC,363,395-397
framing, 396
MAC,396
LMI,522
keepalive mechanism, 522
multicast mechanism, 522
statuschecking, 522
load
delay,765
localaccesstransport area."
11906,"SeeLATA
localaddress,571
localareanetwork."
11907,"SeeLAN
localcallservice,247localcentraloffice,242
localexchange carrier."
11908,"SeeLEC
localInternetservice
provider."
11909,"SeelocalISP
localISP,19
locallogin
procedure, 819
localloop,241-242
ADSL,252
bandwidth, 252
filter,252
signal,247
switching office,242
LocalManagement
Information."
11910,"SeeLMI
localpart,831
LocalTalk address,46
locator,853
logarithmic function, 1051
logicaladdress,36
logicaladdressing, 549
logicallinkcontrol."
11911,"SeeLLC
logicalring,382
logicalstarbackbone, 457
login,818
longsequence ofOs,108
long-distance company, 243
longestmaskmatching, 653
loop
multicast distancevector
routing,686
RPB,687
timeexceeded
message, 624
loopprevention, 675
loopback address,571
looseSOurceroute,602
loosesourceroute
option,596
lossycompression, 906
lostframe,318
low-Earth orbitsatellite,484
low-pass channel, 75,141
band-pass, 79
digitalsignal
approximation, 76-77
limitedbandwidth, 75-76
widebandwidth, 75-76
LSP,667
flooding, 668
generation, 668
M
M2UA,736
M3UA,736MA,365
MAA,827,838
MAC,307,363, 395,969
modules, 397
Standard Ethernet, 398
MACaddress,579,704
MACcontrolsublayer, 409
MACsublayer
FastEthernet, 409
GigabitEthernet, 412
wirelessLAN,423,442
mail,829
mailaccessagents.SeeMAA
mailexchanger, 831
mailserver,825
mailbox, 824,831
management frame,427
Management Information
Base.SeeMIB
manager, 877-878
activeopen,895
database, 878
function, 891
remotereboot,878
Manchester
Ethernet, 402
Manchester coding,109
transition, 109
man-in-the-middle attack,
955-956
mappedaddress,571
mapping
dynamic, 612
hostfile,798
logicaltophysical
address,612
static,612
marker,786
markuplanguage, 855
mask,553
classless addressing,
556,559
mastergroup,166
masterstation,435
maximum burstsize,762
maximum transferunit."
11912,"SeeMTU
mBlnB,115
mBnL,111
MBONE,693MD5,967
MDC,969
media
guided,192
unguided, 203
mediaaccesscontrol."
11913,"SeeMACINDEX 1123
mediagatewaycontrol,736
mediaplayer,909
medium, 4
mediumaccess
contention, 364
GigabitEthernet, 412
random,364
medium-Emth orbit
satellite,481
membership report,631,633
destination IPaddress,635
MEOsatellite,480-481
mesh,9
advantages, 10
backbone, 10
definition, 9
disadvantages, 10
port,9
meshtopology, 34
message, 4,965
e-mail,830
messageauthentication code."
11914,"SeeMAC
messagedigest,965,968
secrecy,965
message switching, 214
messagetransferagents."
11915,"SeeMTA
messagetransport part."
11916,"SeeMTP
message-oriented
protocol, 736
metafile,909
metric,658,671
OSPF,671
TOS,659
typeofservice,671
MF,204
MFSK,147
MIB,878,886
accessing simple
variable, 887
agent,886
example, 887
indexes,889
instancedefinition, 888
lexicographic ordering, 889
objectcategories, 886
objectidentifier tree,887
role,879
Tableidentification, 888
mibobject,882
microswitch, 234
microwaves, 204,206
applications, 207
band,206
frequencies, 2061124 INDEX
microwaves-Cont."
11917,"homantenna,207
IrDAport,208
parabolic dish
antenna,206
propagation, 206
unidirectional, 206
unidirectional
antenna,206
MID,535
MIME,831
contentsubtype,833
content-description
header,834
content-Id header,833
content-transfer-encoding
header,833
content-type
header,833
headers,832
NVTASCII,831
textdatatype,833
typesofdata,833
versionheader,832
minimum bandwidth, 104
minimum Hamming
distance, 274-275
parity-check code,278
minislot, 261
mixedarchitecture
LAN,537
mixer,916
mixing,916
MLT-3,113
mobilestation(MS),467
mobileswitching center."
11918,"SeeMSC
modeofoperation, 945
modem,80,241,248-249
function, 248
Shannon formula, 250
standards, 249
V.32,249
Y.32bis,26l
Y.33,261Y.34bis,249
Y.90,250
Y.92,25l
modification detection code."
11919,"SeeMDC
modulararithmetic, 270
modulation, 143
AM,153
analog-to-analog, 153
Bluetooth, 437
DSSS,432
FHSS,432PM,154
HR-DSSS, 434
OFDM,434
PM,155
transmission, 79
trelliscoding,249
modulation rate,103
modulator
function, 248
modulo2arithmetic, 270
modulo2binarydivision, 286
moduloarithmetic
addition, 270
subtraction, 270
modulus, 270
monoalphabetic
substitution, 935
morefragment bit,591
MOSPF,685
CBT,690
MotionPictureExperts
Group.SeeMPEG
MP3,903
compression, 904
datarates,904
MPEG,904,907
B-frame, 908
frametypes,907
I-frame,907
P-frame, 907
temporal compression, 907
versions, 908
MPEGaudiolayer3,903
MSC,467
handoff,469
receiving asignal,469
transmission ofsignal,468
MSS,769
MTA,825,834
client,834
server,834
MTP,246
MT-RJ,201MTU,589,639
fragmentation, 602
maximum length,590
SCTP,752
valuesforprotocols, 589
multicast address,400
IPv6,570
IPv6permanent, 570
IPv6transient, 570
multicast backbone."
11920,"SeeMBONE
multicast distancevector
routing,686
DVMRP,690multicast linkstate
routing,685
Multicast OpenShortestPath
First.SeeMOSPF
multicast router,632
groupid,632
purpose,633
multicast routing,682
designated parent,688
shortestpathtree,682
source-based tree,683
multicasting, 630,678-679
applications, 630,681
dissemination, 681
distancelearning, 682
emulation, 681
LAN,538
newsdissemination, 681
real-time, 915
routerinterface, 679
RSVP,782
teleconferencing, 682
tunneling, 693
UDP,715
unicasting, 681
multidrop, 8
multihomed AS,677
multi-homing, 738
multilevel ASK,145
multilevel binarycoding,110
multilevel coding,111
multilevel FSK.SeeMFSK
multilevel multiplexing, 174
multiline transmission, three
level.SeeMLT-3
multimode,199
opticalfiber,199
step-index, 199
multipleaccess,363."
11921,"SeealsoMA
multipleslot
multiplexing, 174
multipleunicasting, 680-681
multicasting, 681
multiple-bit error,270,273
multiple-secondary
communication, 438
multiple-stream delivery, 737
multiplexer, 162
multiplexing, 161,525, 707
definition, 161
L2CAP,441
manytoone/oneto
many,161
transport layer,707
multiplexing
identification, 535multiplicative decrease,
771-772
multiplicative inverse,949
multipoint, 8,11
multipoint configuration, 34
Multipurpose InternetMail
Extensions."
11922,"SeeMIME
multistage switch,228,
231-233
banyan,233
blocking, 229
time-space-time
(TST),231
music
sampling rate,902
MUX.Seemultiplexer
N
NAK
inpoll,381
Selective Repeat
ARQ,336
nameserver
hierarchy, 802
namespace,798
centralauthority, 798
distribution, 801
flat,798
hierarchical, 798
name-address resolution, 806
NAP,18
NAT,563
National Instituteof
Standards and
Technology."
11923,"SeeNIST
naturalbase,1050
naturalsampling, 121
NAV,425
NCP,17,353
netid,553
Netscape,830
network, 7,790
categories, 13
criteria,7
definition, 17
hybrid,1006
performance, 7
private,1006
reliability, 8
networkaccesspoint."
11924,"SeeNAP
networkaddress,557
networkaddresstranslation."
11925,"SeeNAT
networkcapacity, 765
Network ControlProtocol."
11926,SeeNCPnetworkinterface card.
11927,"SeeNIC
networklayer,36,547,579,
701,795,929
atdestination, 581
atrouter,581
atsource,580
logicalAddressing, 36
packet,36,547
responsibilities, 36
routing,36-37,547
TCPIIP,43
networklayerreliability, 708
networklength
GigabitEthernet, 413
networkmanagement,
873,879
accounting
management, 877
configuration, 874
faultmanagement, 875
performance
management, 876
programming analogy,880
securitymanagement, 876
networkperformance,
89,764
networksecurity, 8
networkservice,582
networksupportlayers,31
networktonetwork
interfaces."
11928,"SeeNNI
networkvirtualtenninal."
11929,"SeeNVT
network-specific method,648
next-hop method,648
NIC,400
Ethernet, 400
stationaddress,44
NIST,943
NNI,526-527
VPIlength,527
nooperation option,594
node,7,213
nodeidentifier, 570
node-to-node delivery, 703
noise,84
bursterror,269
coaxialcable,196
crosstalk, 84
digitalservice,247
impulse, 84
induced,84
thermal,84
noiseless channel, 86,
307,312
noisychannel, 87,318non-blocking switch,230
non-coherent BFSK,147
noncongestion-controlled
traffic,GOO
non-periodic composite
signal,67-68
non-periodic signal,58
frequency, 74
nonpersistent connection, 868
non-return tozero.SeeNRZ
nonnalresponse mode."
11930,"SeeNRM
normalized error,126
no-transition mobility, 422
NRM,340
NEtZ,106-107, 144
ASK,144
BFSK,147
BPSK,149
NEtZ-I,107
synchronization, 108
NRZ-Invert,107
NEtZ-L,107
baselinewandering, 107
polarityswitch,108
synchronization, 108
NEtZ-Level, 107
internet,354
nullsuffix,800
numbersystem
comparison, 1040
transformation, 1041
NVT,41,819
character set,819
controlcharacters, 819
FTP,841
TCPIIPstack,819
TELNET,819
tokens,819
Nyquist
bitrate,86
Nyquistbitrate,86
Nyquistformula, 104
Shannon capacity, 88
Nyquistnoiseless channel, 86
Nyquisttheorem, 121,902
frequency, 121
o
objectidentifier, 881
octalsystem,1037
octet,550
oddnumberoferrors,296
OFB,947
OFDM,433
offset,64
offsetfield,591omnidirectional antenna,205
on-demand audio/
video,901
one'scomplement
arithmetic, 298
one-slotframe,439
one-to-many relationship, 936
one-to-one relationship, 935
one-wayness, 966
OOK,I44
OpenShortestPathFirst."
11931,"SeeOSPF
opensystem,29
OpenSystemsInterconnection."
11932,"SeeOSI
open-loop congestion
control,765
operating system
locallogin,819
NVT,819
operation, 234
opticalfiber,198
advantages, 202
applications, 201
ATM,523
attenuation, 202
bandwidth, 202
cableTV,202
cladding, 200
composition, 200
connectors, 200
core,200
corrosive materials, 202
cost,203
density,199
disadvantages, 203
electromagnetic noise,202
expertise, 203
graded-index multimode,
198-199
HFC,257
installationl
maintenance, 203
Kevlar,200
LAN,202
light,198
lightweight,203
multimode, 198
outerjacket,200
performance, 201
propagation modes,198
reflection, 198
single-mode, 198-199
sizes,200
standardization, 491
step-index multimode, 198
tapping,203INDEX 1125
unidirectional
propagation, 203
WDM,168
options
endofoption,595
function, 594
IPv4datagram, 594
loosesourceroute,596
nooperation option,594
recordrouteoption,595
strictsourceroute,595
timestamp, 596
OPTIONS message, 921
ORoperation, 557
orbit,479
orthogonal frequency­
divisionmultiplexing
(OFDM),433
orthogonal sequence, 386,389
oscillator, 144
OSImodel,29,32,43
application layer,41
architecture, 30
datalinklayer,34
grouping offunctions, 30
header,32
layerinterface, 31
layeroverview, 32
layers,29-30,33
layerstraversed, 30
networklayer,36,547
networksupportlayers,31
organization, 31
peer-to-peer process,30
physicallayer,30,33
presentation layer,39
sessionlayer,39
summary oflayers,42
TCPIIP,29,42--43
trailer,32
transport layer,37,701
usersupportlayers,32
OSPF,659,671
linktypes,671
metric,671
networkasalink,671
stublink, 673
transient link,672
virtuallink,673
outbox,829
Outlook, 830
out-of-order segment, 732
outputfeedback mode."
11933,"SeeOFB
outputport
packetswitch,232
outstanding frame,3251126 INDEX
p
packet,658
SCTP,739
packetformat
SCTP,742
packetpayloadtype,533
packetpriority,599
packetswitch,224
components, 232
outputport,233
switching fabric,233
packetswitching, 214
IPv4,583
packettoobig,639
packet-filter firewall,1022
packet-switched
network, 214
Pad1option,602
padding, 587
AHprotocol, 999
chunk,743
endofoptionoption,595
Ethernet, 399
RTP,918
PadN,602
page,852
paging,469,475
PAM,121
PAP,352
parabolic dishantenna,206
paralleltransmission, 131
parameter problem
message, 624
ICMPv6,639
parity-check bit,282
parity-check code,278
parkedstate,435
PartiallyQualified Domain
Name.SeePQDN
PASScommand, 844
passiveopen,723
password, 352
Password Authentication
Protocol."
11934,"SeePAP
path
virtual-circuit
network, 222
pathattribute, 677
non-transitive, 677
ORIGIN, 677
transitive, 677
pathattributes
AS]ATH,677
NEXT-HOP, 677
pathmessage, 782
pathMTUdiscovery
technique, 602pathvectorrouting,674
loops,675
policyrouting,676
sharing,675
P-box,939
peF,423,425
AP,425
repetition interval,426
PCFIFS.SeePIFS
PCM,121
bandwidth, 128
coding,127
decoding, 127
filter,128
sampling, 121
PCS,477
PDU
LLC,396
peakamplitude, 59
peakdatarate,762
peer-to-peer process,30
perceptual encoding, 903
performance, 7
checksum, 301
Hamming code,283
performance
management, 876
capacity, 876
response time,876
throughput, 876
traffic,876
period,58,60,479
example, 60
inverse,60
units,61
periodicanalogsignal,59
periodiccomposite
signal,67
periodicsignal,58-59
frequency, 74
periodicupdate,663
permutation
finalDES,941
initialDES,941
permutation box."
11935,"SeeP-box
persistence method
I-persistent, 372
non-persistent
approach, 372
p-persistent, 373
persistence methods, 372
persistent connection, 868
personal areanetwork
(PAN),435
Personal Communications
System(peS),477P/Fbit,343
P-frame,908
Phase,155
phase,142,153
AM,153
ASK,143
definition, 63
example, 64
FM,154
FSK,146
offset,64
PM,155
PSK,148
sinewave,65
phasemodulation."
11936,"SeePM
phaseshift,63
phaseshiftkeying."
11937,"SeePSK
PHP,859
physical, 520
physicaladdress,45-47,
52,612
ARP,44
authority, 46
needfor,612
RARP,44
sizeandformat,46
physicallayer,33,55
ATM,529
bitrepresentation, 33
bitsynchronization, 34
circuitswitching, 215
datarate,34
Ethernet, 397,402
FrameRelay,520
function, 33
lineconfiguration, 34
OSImodel,30
purpose, 33
signals,57
tasks,55
TCPIIP,43
topology, 34
transmission media,191
transmission mode,34
wireless, 432
physicallayerprocessor, 232
physicalringtopology, 382
piconet,435
PIFS,425
piggybacking, 312,339,343,
720,722
example, 345
Go-Back-N ARQ,339
wirelesstransmission, 426
pilotchannel,475
PIM,692PIM-DM,692
PIM-SM,692
pipelining, 323
pixel,S,71,903,907
plaintext, 932
plane,1030
PLAYmessage, 911
playback buffer,914
PM,153
pointcontroller, 426
pointcoordination function."
11938,"SeePCF
pointofpresence."
11939,"SeePOP
pointerquery,805
point-to-point, 8,10
definition, 8
mesh,9
point-to-point
configuration, 34
point-to-point
connection, 213
point-to-point link,672
Point-to-Point Protocol."
11940,"SeePPP
poisonreversed, 664
polarcoding,107
polarwith8-zerosubstitution."
11941,"SeeB8ZS
policyrouting,676
poll,343,381
polling,380
poll,381
select,381
polyalphahetic
substitution, 935
polynomial, 291
addition, 291
characteristics, 297
CRC,291
division, 292
multiplying, 292
shifting,292
subtracting, 291
POP,243
POP3,838
port,705
portaddress,49
portnumber,704
ephemeral, 704
ICMP,623
process,705
well-known, 705,709
PostOfficeProtocol,
version3.SeePOP3
POTS,241
power,192
satellite,480PPM,432
PPP,346
addressfield,348
authentication, 352
authentication state,349
controlfield,348
deadstate,349
establishment state,349
flagfield,348
frame,348
ISP,346
LCP,350
multilink, 355
multiplexing, 350
networking state,349
openstate,350
optionnegotiation, 351
payloadfield,348
protocolfield,348
termination state,350
transition states,349
PQDN
suffix,800
preamble, 398
predicted frame,907
predictive encoding, 903
presentation layer,39
compression, 41
encryption, 40
responsibilities, 40
translation, 40
primary
Bluetooth, 435
inpolling,381
primaryaddress,747
primaryserver,803
primarystation,340,380
priorityfield,599
priorityqueueing, 776
privacy,161,962
AHprotocol, 1000
privateaddress
NAT,563
privatekey,933-934, 986
privatenetwork,
1005-1006
Ipaddress,1006
privateuseplane
(PUP),1032
process-ta-process
commumcation,709,715
process-ta-process
delivery, 703
Project802,395
propagation delay,221
CSMA,370
LEO,484propagation speed,402
distortion, 83
wavelength, 64
propagation time,90-91
circuitswitching, 218
CSMA,371
latency,90
propagation speed,90
protocol,S, 19,30
definition, 19
elements, 19
protocolfield
AHprotocol, 999
ProtocolIndependent
Multicast."
11942,"SeePIM
protocolIndependent
Multicast, DenseMode."
11943,"SeePIM-DM
Protocol Independent
Multicast, SparseMode."
11944,"SeePIM-SM
provideridentifier, 570
provider-based
address,569
proxyARP,617
proxyfirewall,1023
proxyserver,868
pruning,689
pseudoheader,712
purpose, 712
pseudoterminal
driver,819
pseudoternary coding,110
PSK,142,148,249
bandwidth example, 150
limitations, 152
modern,249
withASK,152
psychoacoustics, 903
publickey,933-934, 986
Diffie-Hellman, 954
publickeyinfrastructure
(PKI),989
public-key cryptography."
11945,"Seealsoasymmetric-key
cryptography
RSAalgorithm, 949
pullprogram, 828
pullprotocol, 838
pulseamplitude modulation."
11946,"SeePAM
pulsecodemodulation."
11947,"SeePCM
pulsepositionmodulation
(PPM),432
pulserate,103
pulsestuffing,174pureALOHA, 365
throughput, 368
pureATMLAN,536
pushoperation, 726
pushprogram, 828
pushprotocol, 837
PVC,528
ATM,528
establishment, 528
Q
Q.931,924
QAM,142,252
bandwidth, 152
trelliscoding,249
variations, 152
QoS,775
admission control,780
ATM,789
Bluetooth,441
DF,785
FrameRelay,787
howtoimprove, 776
IntServ,781
leakybucket,777
resourcereservation, 780
switched network, 786
trafficshaping,777
QPSK,149-150
constellation, 151
quadrature amplitude
modulation."
11948,"SeeQAM
quadrature PSK.SeeQPSK
qualityofservice.SeeQoS
quantization, 125,906
non-uniform, 127
uniform, 127
zone,125
quantization error,126
quantization level,126
quantization noise
V90,250
query
DNS,809
querymessage, 625,631
destination IPaddress,635
ICMP,621
ICMPv4andICMPv6, 640
ICMpv6,639
response time,633
special,633
queryrouter,634-635
questionrecord,811
queue,764
input,764
output,764
overflow inUDP,714INDEX 1127
UDP,714
UDPclientsite,714
UDPoverflow, 715
UDPport,714
UDPserversite,714
queuingtime,92
QUITcommand, 844
R
radiogovernment."
11949,"SeeRG
radiolayer,436
radiowave,192,204
band,205
ionospheric
propagation, 203
mdiowaves,192,204
omnidirectional, 205
penetration, 205
RAM,231
TSI,231
randomaccess,364
mndomaccessmemory."
11950,"SeeRAM
ranging,260
RARP,43
firstboot,44
ICMPv6,596
logicaladdress,618
physicalmachine, 618
purpose, 44
RARPreply,618
RARPrequest,618
RBOC,1059
RC5,945
RCH,257
realm,986
real-time
playback buffer,914
threshold,914
real-time audio,596
IPv6,567
real-time audio/video
example, 912
real-time data
timerelationship, 912
real-time intemctive audio/
video,912
Real-Time Streaming
Protocol (RTSP),911
real-time traffic
errorcontrol,916
mixer,916
multicasting, 915
RTP,916
sequence number,915
TCP,9161128 INDEX
real-time traffic-Cant."
11951,"timestamp, 914
translation, 915
translator, 915
UDP,916
real-time transmission, 4
Real-time Transport Control
Protocol."
11952,"SeeRTCP
Real-time Transport Protocol."
11953,"SeeRTP
receiveslidingwindow, 324
receiver, 4,300
flowcontrol,311
reservation, 782
SCTPerrorcontrol,751
SCTPflowcontrol,748
receiverwindow
(rwnd),730
recordrouteoption,595
pointer-length
comparison, 595
recursive resolution, 808
redirectmessage, 624
purpose, 624
redirection
ICMPv6,639
redundancy, 269,904
checksum, 298
spreadspectrum, 181
reflection, 198
refraction, 198
Regional BellOperating
System.SeeRBOC
regionalcablehead,257
Regional InternetService
Providers orregional
ISP.SeeregionalISP
regionalISP,19
regionaloffice,241
REGISTER message, 921
registered port,705
registrar, 811
registrar server,922
Registration! Administration!
Status(RAS),924
regulatory agencies, 21
REI,344
relayagent,619
reliability, 7-8,775
reliableservice
SCTP,738
reliabletransport layer
service,708
remainder
CRC,288
cycliccode,294
remotebridge,458rendezvous, 684
rendezvous router,684,690
selection, 691
repeater
amplifier, 447
HDSL,255
hub,447
location, 447
ring,12
segment, 446
repetition interval,426
RequestforComment."
11954,"SeeRFC
RequestToSend(RTS),425
reservation, 379,781
refreshing, 784
reservation frame,379
reserved address,571
resolution, 903
iterative, 808
nametoaddress,806
recursive, 808
resolver, 806
resource allocation, 218
resource record,811
resource reservation,
226,780
Resource Reservation
Protocol."
11955,"SeeRSVP
resources
circuitswitching, 215
response
DNS,809
response time,876
Resvmessage, 782
RETRcommand, 842
retransmission, 732
correction, 269
Go-Back-N, 327
retransmission policy,766
retransmission timeout
(RTO),732
reusefactor,468
GSM,473
IS-95,476
reverseaddressresolution
protocol.See RARP
reversepathbroadcasting."
11956,"SeeRPB
reversepathforwarding."
11957,"SeeRPF
reversepathmulticasting."
11958,"SeeRPM
RFC,21,1063
RG,196
coaxialcable,196
ratings,196Rijndael algorithm, 943
ring,9,12
advantages, 12
definition, 12
disadvantages, 12
dual,12
repeater, 12
ringtopology, 34
RIP,665
port,1065
RIPNIC,569
RJ45,193
Rn,326
RNR,344
roaming, 469
root,668
rootserver,803
rotarytelephone, 244
rotation, 939
rotationcipher,939
round,940
AES,944
roundcipher,940
AES,943
roundkey,941
router,36
address,626
areaborder,671
backbone, 671
designated parent,688
fragmentation, 589
inputport,232
multicast, 632
routeradvertisement
message, 626
routersolicitation and
advertisement message
function, 626
ICMPv6,640
routersolicitation message, 626
routing
distancevector,660
example, 654
multicast, 682
networklayer,36-37,547
RoutingInformation
Protocol."
11959,"SeeRIP
routingprocessor, 233
packetswitch,232
routingprotocol, 658
multicast, 678
routingtable,220,224,648,
656,658
addedbyredirection
ftag,657
distancevector
routing,663dynamic, 656,658
flagsfield,656
gatewayflag,656
hierarchy, 653
host-specific flag,657
interface field,656
linkstaterouting,667
maskfield,656
modified byredirection
flag,657
networkaddressfield,656
nexthopaddressfield,656
reference countfield,657
shortestpathtree,670
static,656
upflag,656
updating of,624
usefield,657
RPB,687
RPF,688
RPC
port,1065
RPF,686
RPB,688
RPM,689
graftmessage, 689
prunemessage, 689
RR,343
RSA,949
keys,949
realisticexample, 951
Rspec,781
RSVP,781-782
IntServ,782
message, 782
reservation merging, 783
reservation style,784
RTCP,919
application specific
message, 920
byemessage, 920
message types,919
portnumber,920
receiverreport,920
RTP,919
senderreport,919
sourcedescription
message, 920
RTO,732
RTP,916
contributor, 918
contributor count,918
extension header,918
header,917
marker,918
padding, 918
payloadtype,918portnumber,919
RTCP,919
sequence number,918
synchronization
source,918
timestamp, 918
UTP,916
versionfield,917
run-length encoding, 843
rwnd,749
RZ,108
complexity, 108
disadvantage, 108
signalchange,108
values,108
S
SA,399
SACKchunk,753
sampleandhold,121
sampling, 121
PCM,121
sampling frequency, 121
sampling interval, 121
sampling rate,121,902
example, 127
humanvoice,127
telephone company, 124
SAR,532
satellite,478
frequency band,481
geosynchronos, 481
geosynchronous, 481
trunk,242
satellitecommunication, 478
satellitenetwork, 478
satelliteorbit,479
satelliteperiod,479
sawtooth signal,1048
S-box,939
scalability, 784
DF,785
scatternet, 435
scheduling, 776
FIFOqueue,776
priorityqueue,777
weighted fairqueueing, 777
SCO,439
scrambling, 118
script
COl,859
SCTP,732
acknowledgment
number,741
association, 737
chunk,739
dataransfer,746datatransfervsdata
delivery, 747
features, 736
flowcontrol,748
header,743
packetformat,742
reliableservice,738
stream,740
verification tag,743
SCTPassociation, 743
SCTPheader,740
checksum field,743
destination portaddress
field,743
sourceportaddress
field,743
SCTPpacket,739
vsTCPsegment, 740
SDL
2BIQ,111
SDSL,255
SEAL,535
searching
classless addressing, 655
secondary
Bluetooth, 435
inpolling,381
secondary server,803
secondary station,
340,380
secrecy,964-965
secretkey,934
secret-key cryptography."
11960,"Seesymmetric-key
cryptogtaphy
secret-key encryption
key,933
SecureHashAlgorithm."
11961,"SeeSHA-1
security,7-8
authentication, 962,991
FHSS,183
integrity, 962,991
nonrepudiation, 962,991
privacy,962,991
securitymanagement, 876
securityparameter index."
11962,"SeeSPI
segment, 38,406,446, 701,
718,721
format,721
headerfields,721
IPdatagram, 45
size,721
TCP,45
TCP/lP,45
segmenttype,535segmentation
L2CAP,441
segmentation andreassembly."
11963,"SeeSAR
select
addressing, 381
frame,381
polling,381
Selective Repeat,766
Selective RepeatARQ,332
design,334
variables, 337
window,333
windowsize,334
self-synchronization, 105
semantics, 19
sendslidingwindow, 324
Sender,300
sender,4,773
flowcontrol,311
SCTPerrorcontrol,752
SCTPflowcontrol,749
sequence number,318,324,
532,535,719,914
ICMP,623
range,318
sequence numberfield,318
sequence number
protection, 532
serialtransmission, 131-132
advantage, 132
classes,131
conversion device,132
types,132
server,704
primary,803
root,803
secondary, 803
UDPqueue,714
WWW,852
serverprogram, 705
portnumber,705
serviceclass,781,789
controlled-load, 782
guaranteed, 781
servicetype.SeeTOS
service-point address,
38,701
service-point addressing, 38
service-type limitation, 784
DF,785
SessionInitiation Protocol."
11964,"SeeSIP
sessionkey,952
TGS,984
sessionlayer,39
dialogcontrol,39INDEX 1129
responsibilities, 39
synchronization, 39
setup,215
virtual-circuit network,
221,223
SETUPmessage, 911
setuprequest,224
SFD,398
S-frame, 341,343
SHA-I,967
Shannon,87
Shannon capacity, 87
example, 87
noisychannel,87
Nyquistformula, 88
telephone line,87
shaper,786
sharedexplicitstyle,784
shared-group tree
CBT,691
sharing,661
distancevector
routing,661
pathvectorrouting,675
sheath.196
SHF,204
shieldedtwisted-pair, 193
shift,1044
shiftcipher,936
shiftkeying,143
shiftregister,290
shortinterframe space
(SIFS),425
shortest path tree,668
linkstaterouting,667
multicast routing,682
root,668
routingtable,670
unicastrouting,682
SI,739
SIFS,425
signal
amplitude, 59
analoganddigital,58
aperiodic, 58
CDMA,388
composite periodic
analog,59
degradation, 12
non-periodic, 58
periodic, 58
types,95-96
signalbandwidth, 248
signalelement,
102,142
signallevel,86
signalpoint,2451130 INDEX
signalrate,103
2B1Q,111
datarate,103
Manchester, 110
NRZ-IandNRZ-L, 108
worstcase,103
signaltransport port,245
signaling connection control
point,246
Signaling SystemSeven."
11965,"SeeSS7
signal-to-noise ratio."
11966,"SeeSNR
simpleandefficient
adaptation layer."
11967,"SeeSEAL
simpleciphers,938
SimpleMailTransfer
Protocol."
11968,"SeeSMTP
SimpleNetwork Management
Protocol."
11969,"SeeSNMP
simplest protocol, 312
algorithm, 314
design,313
receiversite,314
sendersite,314
simplex, 6,34
simultaneous open,725
sinewave,59,1043
characteristics, 59,
65,142
frequency, 60
horizontal shift,1044
period,60
verticalshift,1045
single-bit error,
267-268,294
example, 268
frequency, 268
two,295
single-mode, 199
density,199
distortion, 199
opticalfiber,199
single-secondary
communication, 437
single-stage switch
blocking, 229
SIP,736,920
addresses, 921
messages, 921
modules, 921
tracking, 922
sitelocaladdress,572
skypropagation, 203
ionosphere, 203
slavestation,435slidingwindow, 324
slottime,401
collision, 401
propagation speed,402
slottedALOHA, 369
throughput, 369
vulnerable time,369
slowstart,769,868
slowstartthreshold, 770
SMI,881
ASN.1,882
BER,884
datatype,881
encoding, 884
encoding method,881
functions, 881
objectidentifier, 881
objectname,881
objectrepresentation, 882
objecttype,882
objects,881
role,879
sequence ofstructured
type,883
sequence structured
type,883
simpledatatype,882
simpletype,883
simpletypeexamples, 883
structured datatype,882
structured type,883
treestructure, 882
SMTP,834
clientcommands, 835
commands, 835
concept, 834
HTTP,861
mailtransferphases,837
port,1065
responses, 835-836
Sn,319,325
SNMP,877,891
agent,877
agentdatabase, 878
BER,893
clientprogram, 878
client/server
mechanism, 897
concept, 877
data,893
errorindexfield,893
errorstatusfield,893
errortypes,893
format,892
function, 877
GetBulkRequest, 892
GetNextRequest, 891GetRequest, 891
header,893
InformRequest, 892
management basics,878
manager, 877-878
message elements, 893
PDU,891
port,1065
report,892
requestID,892-893
response, 892
role,878
securityparameters, 893
serverprogram, 878
SetRequest, 892
tag,893
trap,892
UDPPORTS, 895
VarBindList field,893
version,893
SNMPv3,893
security, 897
SNMPv2,897
SNR,84
decibel,84
high,84
indB,88
low,84
Shannon capacity, 87
SNRdB,126
socketaddress,706
IPheader,706
pair,706
portnumber,706
softhandoff, 469
IS-95,477
softstate,784
SONET,530
ATM,530
byteinterleaving, 504
video,903
WDM,168
sourceaddress.SeeSA
sourcequenchmessage,
623,639
sourceroutingbridge,453
sourceroutingextension
header,602
sourceserviceaccesspoint
(SSAP),396
source-based tree
multicast distancevector
routing,686
space,231
space-division switch,227
advantage, 231
time-division, 231spanning tree
algorithm, 452
spatialcompression, 907
speakernode,674
initialization, 674
specialquery
message, 633
spectrum, 154-155
speedoflight,65
SPI,999
splithorizon, 664
splitter,254
cableTV,256
splitterless ADSL,254
spreadspectrum, 180
bandwidth,181
spreading process, 181
spreading, 161
squarewavesignal,1046
SREJ,344
SS7,218,245
datalinklayer,246
networklayer,246
physical layer,246
transport layer,246
upperlayers,246
SSN,739
ssthresh, 770
ST,535
staircase signal,130
Standard Ethernet, 397
standards, 19
categories, 20
creationcommittees, 20
needfor,19
ratification, 21
standards organizations, 20
star,9,11,24
advantages, 10
centralcontroller, 10
disadvantages, 11
star-ring topology, 382
startbit
asynchronous
transmission, 133
startframedelimiter."
11970,"SeeSFD
state
multicast routing,685
staticdatabase, 620
staticmapping, 612
limitations, 612
overhead, 612
staticrouting,655
staticroutingtable,655
statictable,658
stationaddress,44statistical TDM,179
addressing, 179
bandwidth, 180
slotsize,180
synchronization bit,180
step-index multimode, 199
stopbit
asynchronous
transmission, 133
stop-and-wait, 315
design,315
receiversite,317
sendersite,315
Stop-and-WaitARQ,318-
319
design,319
efficiency, 322
Go-Back-N,331
receiversite,321
sendersite,320
STORcommand, 842
STP,193
straightpermutation, 940
straight-tip connector
(ST),201
stream
definition, 45
SCTP,740
streamdelivery, 716
streamidentifier."
11971,"SeeSI
streamofbits,55
streamsequence number."
11972,"SeeSSN
streaming, 909
streaming liveaudio!video,
901,912
streaming server,910
streaming storedaudio!
video,901
streaming server,910
streaming serverand
RTSP,911
webserver,909
webserverandmeta
file,909
streaming storedaudio!
visual,908
strictsourceroute,602
strictsourcerouteoption,595
concept,595
rules,596
strongcollision, 967
stubAS,676
subblock, 559
subnet
classless addressing, 559
subnetidentifier field,570subnetmasking
ICMPv6,640
subnetting, 554,647
Subscriber Channel
Connector (SC),201
subscriber identifier, 570
substitution, 935
monoalphabetic, 935
substitution box."
11973,"SeeS-box
substitution cipher,935
S-box,939
suffix,800
supergroup, 166
supernet, 554
supervisory frame."
11974,"SeeS-frame
supplementary ideographic
plane(SIP),1032
supplementary multilingual
plane(SMP),1032
supplementary specialplane
(SSP),1032
SVC,528-529
ATM,528-529
switch,37,2l3,233,408
banyan,233
Batcher-banyan, 235
bridge,408
crossbar, 228,233
logicalstarbckbone, 457
multistage, 228
non-blocking, 230
space-division, 227
structure, 227
telephone network, 242
time-division, 230
time-space-time
example, 231
two-layer, 454
switched backbone, 457
switched Ethernet, 407
switched/56, 248
subscriber, 248
switching
concept,213
example, 213
methods, 214
needfor,213
nodes,213
spacevstimedivision, 231
switching fabric,232-233
packetswitch,232
switching office,241-242
switching table,224
symmetric digitalsubscriber
line.SeeSDSLsymmetric key
Diffie-Hellman, 952,955
symmetric-key cryptography,
932-933
SYNfloodingattack,725
SYNsegment, 724
SYN+ACK,724
synchronization
asynchronous
transmission, 133
blockcoding,115,117
bytelevel,133
clock,105
example, 105
IS-95,474
NRZ-I,108
NRZ-L,108
TDMA,384
synchronization points,39
synchronous connection­
oriented (SCO)
link,439
synchronous TDM,169
datarate,170
frame,170
synchronous transmission,
131,134
advantage, 135
example, 134
grouping ofbits,134
receiverfunction, 134
synchronization, 134
syndrome, 279
Hamming code,282
syntax,19
T
Tline,177
digitaltransmission, 177
T-lline,177
capacity, 178
datarate,178
frame,177
overhead, 177
synchronization bit,177
table
virtual-circuit
network, 223
tablelookup,233
tag
format,856
tandemoffice,241
tandemswitch,243
POP,243
tangent,1046
tap,11,256
TCB,745INDEX 1131
TCP,17,45,583, 703,708
andIPv4,583
buffer,717,725
checksum, 722
circularbuffer,717
connection-oriented
protocol, 723
DNS,812
encapsulation, 723
errorcontrol,731,751
full-duplex, 718
fUll-duplex mode,723
function, 45
ICMP,623
OSImodel,42
ports,1065
pseudoheader, 722
pushbit,726
pushoperation, 726
pushingdata,725
real-time traffic,916
reliableservice,719
segment, 718,721
segmentre-ordering, 45
segmentation, 45,843
sequence number,45
SIP,920
streamdelivery, 716
streamtransport
protocol, 45
streaming liveaudio!
video,912
stream-oriented
protocol, 726
transport layerprotocol, 43
urgentdata,726
vsSCTP,736
well-known port
number,709
TCPheader
acknowledgment number
field,72l
checksum field,722
controlfield,722
destination portaddress
field,721
headerlengthfield,722
optionsfield,723
reservedfield,722
sequence number
field,72l
sourceportaddress
field,72l
urgentpointerfield,723
windowsizefield,722
TCPsegment
vsSCTPpacket,7391132 INDEX
TCP/IP,43
addresses, 45,52
application layer,42,45
application layerandOSI
model,45
datalinklayer,43
filetransfer,840
hierarchical structure, 43
hierarchy, 43
Ip,582
networklayer,43
NVT,819
OSImodel,29,42--43
physicalanddatalink
layers,43
physicallayer,43
standard filetransfer,840
transport layer,43--44
UDP,45
TCPIIPprotocolsuite,42
TDD-TDMA,437
TDM,162,169
applications, 179
circuit-switched
network,214
concept, 169
datarate,170
dataratemanagement, 173
emptyslot,173
framesynchronization, 175
framingbit,175
TDMA,385
timeslot,169
TDMA,383-384,473,478
Bluetooth,437
TDM,385
teardown
virtual-circuit network, 221
TEARDOWN message, 912
teardown phase,226
telecommunication, 3
Telecommunications Actof
1996,242,1059
teleconferencing, 682
Teledesic, 486
telephone company, 218
telephone network, 241
analogleasedservice,247
analogservices, 247
bandwidth, 247
components, 241
datatransfer,245
digitalservice,247
signaling, 245
signaling system,244
telephone subscriber
line,80telephone system
analogswitched
service,165
hierarchy, 166
multiplexing, 165
telephone USerport,246
telephony signalling, 736
TELNET,817-849
character mode,824
client,819
defaultmode,823
DONTcommand, 822
embedding, 820
linemode,824
mode,823
offertoenable,822
optionnegotiation, 822
sendingcontrol
character, 821
sendingdata,820
suboption negotiation, 822
timesharing, 818
userinterface, 823
WILLcommand, 822
WONTcommand, 822
temporal compression, 907
temporal masking, 904
Ten-Gigabit Ethernet, 397,
416
terminal, 818
terminal network."
11975,"See
TELNET
termination
SCTP,748
TFTP
port,1065
TGS,984
AS,984
Kerberos, 984
thermalnoise,84
thickEthernet."
11976,"SeeIOBASE5
Thicknet."
11977,"SeeIOBase5
thinEthernet."
11978,"SeelOBase2
thirdharmonic, 68
three-node instability, 664
three-way handshaking, 723,
727,744
throughput, 90,764-765,876
bandwidth, 90
CSMA/CD, 376
load,765
pureALOHA, 368
slottedALOHA, 369
ticket,983
ticket-granting server."
11979,SeeTGStimedivisionmultipleaccess.
11980,"SeeTDMA
timeexceeded message, 624
latefragments, 624
time-to-live field,624
timeslot
switching, 231
time-division multiplexing."
11981,"SeeTDM
time-division switch,
227,230
proandcon,231
time-domain plot,65
time-limited signal,1049
time-out, 731
timer,326
Selective RepeatARQ,339
time-slot interchange."
11982,"SeeTSI
timestamp, 913
ICMPv6,640
RTP,918
senderreport,919
timestamp messages
clocksynchronization, 626
round-trip time,626
timestamp option,596
timestamp requestandreply
messages, 626
time-to-live
caching, 809
time-to-live field,624
timing,19
T-line
analogtransmission, 177
burstydata,518
DSrelationship, 177
E-line,178
framesize,177
multiplexing, 177
token,381
tokenbucket,777,779
leakybucket,780
meter,786
tokenbus,382
tokenpassing,381
network, 382
tollcall,243
tollcallservice,247
tollfreecall,243
topology
definition, 8
TOS,584
categories, 585
interpretations, 584
valuesforapplication
programs, 585TP,526
traffic,876
framesize,524
trafficcontrol
FrameRelay,787
PVC,787
SVC,787
trafficdescriptor, 761
trafficprofile,762
trafficshaping,777
transceiver, 404
transient link
costassignment, 673
graphical representation,
673
transitAS,677
transition
strategies, 603
transition phasediagram, 349
transition strategy,603
headertranslation, 605
tunneling, 604
translation, 915-916
presentation layer,40
translator, 915
transmission, 57,526
AMPS,470
baseband, 75
D-AMPS, 471
digitalsignal,74
IS-95,474
modulation, 79
serial,131
Transmission Control
Protocol."
11983,"SeeTCP
transmission controlprotocol."
11984,"SeeTCP
transmission impairment,
80,88
transmission medium, 55
location, 191
physicallayer,55
transmission mode,131
transmission paths.SeeTP
transmission sequence
number.SeeTSN
transmission time,91
bandwidth,91
latency,91
transport layer,37,
44,45,701
connection control,38
demultiplexing, 707
errorcontrol,38,702
flowcontrol,38
multiplexing, 707
protocols, 44,708real-time traffic,916
reassembly, 38
responsibilities, 37,44,701
segmentation, 38
service-point addressing,
38,701
TCP,45
TCPIIP,43-44
transport mode,996
transposition
DES,941
transposition cipher,
935,937
P-box,939
trap,878
trellis-coding, 249
triangulation, 482
triggered update,663
trigonometric functions, 1043
trigonometric identities, 1046
TripleDES,943
2keys,943
3keys,943
trunk,241-242
TSI
example, 230
RAM,231
TSN,739
Tspec,781
TST,231
tunneling, 604,637
multicasting, 693
VPN,1007
TV,167
TVchannel, 71
twisted-pair, 192-193
applications, 195
categOlies, 193
components, 193
DSL,195
interference, 193
LAN,195
localloop,242
perfonnance, 194
RJ45,193
telephone network, 195
twists,193
twisted-pair cable,193
twisted-pair Ethernet."
11985,"See1OBase-T
twisting, 193
two-dimensional parity
check,280
two-node loop
instability, 664
typeofservice.SeeTOS
typeprefix,568U
UA,824,828
command-driven, 829
envelope, 830
envelope addresses, 830
GUI-based, 829
mailformat,830
mailsummary, 830
message, 830
message body,830
message header,830
receiving mail,830
types,829
UDP,43,45,703,707-708
advantages, 709
checksum, 712-713
compared toTCP,45
connectionless, 709
connectionless
service,713
decapsulation, 713
DNS,812
encapsulation, 713
flowanderrorcontrol,713
forsimplecommunication,
715
ICMP,623
incoming queue,714
internalcontrol
mechanism, 715
management programs,
715
multicasting and
broadcasting, 715
operation, 713
outgoing queue,714
portcreation, 714
portunreachable, 714-715
ports,1065
process-to-process
protocol, 45
queueoverflow, 714
queuing, 714
real-time traffic,916
route-updating
protocols, 715
RTP,916
RTPport,919
SIP,920
sizerestriction, 713
SNMP,895
transport layerprotocol, 43
unreliable, 709
uses,715
vsSCTP,736
well-known port
number,709UDPport
RTCP,920
U-frame, 341,344
codes,344
connection, 345
function, 344
systemmanagement, 341
types,344
UHF,204
ultraviolet light,192
unguided media,192,203
UNI,526
VPIlength,527
unicastaddress,46,400,569
unicastrouting,682
shortestpathtree,682
unicastroutingtable
RPF,686
unicasting, 630,678
multiple, 680
routerinterface, 679
Unicode, 1029
plane,1030
unidirectional antenna, 206
uniformresource locator."
11986,"SeeURL
unipolar coding,106
NRZ,106
UNls,527
universal ADSL,254
unnumbered frame."
11987,"SeeU-frame
unreliable transport layer
service,708
unshielded twistedpair."
11988,"Seetwisted-pair
unspecified address,571
updating
distancevectorrouting,
662
pathvectorrouting,675
uplink,481
uploading
V90,250
URGbit,727
urgentbyte,726
URL
alias,853
anchor,857
components, 853
host,853
HTIP,853
locators, 853
pathname, 853
portnumber,853
protocol, 853
user,526INDEX 1133
useragent.SeeUA
USERcommand, 843
userdatagram, 710
checksum example, 712
checksum field,711
destination portnumber
field,711
format,710
lengthcalculation, 711
lengthfield,711
pseudoheader, 712
sourceportnumber
field,710
userdatagram protocol."
11989,"SeeUDP
usermobilelink(UML),484
usernetworkinterface."
11990,"SeeUNI
usersupportlayers,32
user-to-user ID,535
UTP,195."
11991,"Seealsotwisted-pair
DU,535
Um,534
V
v'32,249
QAM,249
v'32bis,249
V34bis,249
v'90,250
uploading, 250
v'92,251
VanAllenbelt,481
variablebitratetraffic,762
variable-length packet
leakybucket,779
VC,526
cellnetwork, 526
example, 527
VCI,222,527
length,527
VPCswitch,529
VCO,147
VCs,526
VDSL,255
verification tag,740
veryhighbitratedigital
subscriber line."
11992,"SeeVDSL
verylowfrequency."
11993,"SeeVLF
VHF,204
video,6,596,902
compression, 904
IPv6,567
videoconferencing, 912
violation, 1191134 INDEX
virtualcircuit
IntServ,781
virtualcircuitidentifier."
11994,"SeeVCI
virtualcircuitnetwork
datatransferphase,223
virtualcircuitswitching
cknow1edgment, 225
virtualcircuits.SeeVC
virtualconnection identifier
(VCI),536
virtuallink,671
virtuallocalareanetwork."
11995,"SeeVLAN
virtualpath.SeeVP
virtualpathidentifier
(VPI),536
virtualpathidentifier."
11996,"SeeVPI
virtualprivatenetwork."
11997,"SeeVPN
virtual-circuit
network, 214,221
addressing, 222
phases,223
visiblelight,192
VLAN
802.1Q,462
advantages, 463
automatic
configuration, 462
broadcast domain,460
communication between
switches, 462
concept,458
configuration, 461
frametagging,462
grouping byIP
address,461
grouping byMAC
address,461
grouping bymultiple
characteristics, 461
grouping byport
number,461logicalLAN,459
manualconfiguration, 461
membership
characteristics, 461
multicast IPaddress,461
semiautomatic
configuration, 462
tablemaintenance, 462
TDM,462
VLF,204
VOFR,522
PCM,522
voice
sampling rate,902
VOFR,522
VoiceOverFrameRelay."
11998,"SeeVOFR
voiceoverIP,912,920
voltage-controlled oscillator."
11999,"SeeVCO
volts,59
VP,526
example, 527
VPCswitch
cellrouting,529
example, 529
mechanism, 529
VPI,527
NNI,527
UNI,527
VPCswitch,529
VPls,527,529
VPN,1004,1007
method,1007
tunneling, 1007
V-series, 249
vulnerable time,367
CSMA,371
pureALOHA, 368
slottedALOHA, 369
W
Walshtable,389
WAN
size,14WATS,247
wave-division multiplexing."
12000,"SeeWDM
wavelength, 64
medium, 64
period,64
propagation speed,64
W-CDMA,478
WDM,162,167
concept, 167
dense,168
opticalfiber,168
SONET,168
weakcollision, 967
Web
functions, 853
Webpage,852
body,856
head,856
HTML,855
structure, 856
tag,856
Webportal,854
Website,851
weighted fair
queueing, 777
well-known port,705
list,715,1065
queue,714
well-known portnumbers
SCTP,736
wideareatelephone service."
12001,"SeeWATS
wide-band CDMA,478
wildcard filter
style,784
WILLcommand, 822
window
Selective Repeat
ARQ,334
windowsize,769
basisof,769
windowing policy,766wireless, 421
addressing mechanism, 428
controlframe,428
CSMA/CA, 423
CSMAlCD, 423
dataframe,428
framecontrolfield,426
frameformat,426
frametypes,427
MAClayerframe,426
MACsublayer, 423
management frame,427
NAV,425
wirelesscommunication, 203
wirelessEthernet, 421
wirelessLAN
stationtypes,422
wireless LAN
station,422
wirelessnetwork
CSMAlCA, 378
WorldWideWeb."
12002,"SeeWWW
WWW,851
concept, 851
document types,854
staticdocument, 855
x
Xray,192
X.25,517
X.509,989
xDSL,251
XOR,271,278,286
Hamming distance, 274
XORcipher,938-939
y
Yahoo,839
z
zone,802
zonefile,802"
1,"Computer Networking
A Top-Down Approach
Seventh Edition
James F."
2,"Kurose
University of Massachusetts, AmherstKeith W."
3,"RossNYU and NYU Shanghai
Boston  Columbus  Indianapolis  New York San Francisco  Hoboken Amsterdam  Cape
Town Dubai  London  Madrid Milan Munich Paris Montréal  Toronto Delhi  Mexico City São
Paulo Sydney Hong Kong Seoul  Singapore  Taipei Tokyo
Vice President, Editorial Director, ECS:  Marcia Horton
Acquisitions Editor:  Matt Goldstein
Editorial Assistant: Kristy Alaura
Vice President of Marketing: Christy LeskoDirector of Field Marketing:  Tim Galligan
Product Marketing Manager: Bram Van KempenField Marketing Manager: Demetrius HallMarketing Assistant: Jon BryantDirector of Product Management: Erin GreggTeam Lead, Program and Project Management: Scott DisannoProgram Manager: Joanne Manning and Carole SnyderProject Manager: Katrina Ostler, Ostler Editorial, Inc.Senior Specialist, Program Planning and Support:  Maura Zaldivar-GarciaCover Designer:  Joyce Wells
Manager, Rights and Permissions: Ben Ferrini
Project Manager, Rights and Permissions:  Jenny Hoffman, Aptara Corporation
Inventory Manager: Ann LamCover Image: Marc Gutierrez/Getty ImagesMedia Project Manager: Steve WrightComposition:  Cenveo Publishing Services
Printer/Binder: Edwards Brothers MalloyCover and Insert Printer: Phoenix Color/ HagerstownCredits and acknowledgments borrowed from other sources and reproduced, with ­permission, in this
textbook appear on appropriate page within text.Copyright © 2017, 2013, 2010 Pearson Education, Inc."
4, All rights reserved.
5,"Manufactured in the United States
of America."
6,"This publication is protected by Copyright, and permission should be obtained from the publisher
prior to any prohibited reproduction, storage in a retrieval system, or transmission in any form or by any
means, electronic, mechanical, photocopying, recording, or likewise."
7,"For information regarding permissions,
request forms and the appropriate contacts within the Pearson Education Global Rights & Permissions
Department, please visit www.pearsoned.com/ permissions/."
8,"Many of the designations by manufacturers
and seller to distinguish their products are claimed as trademarks."
9,"Where those designations appear in this
book, and the publisher was aware of a trademark claim, the designations have been printed in initial caps or
all caps.Library of Congress Cataloging-in-Publication DataNames: Kurose, James F."
10,"| Ross, Keith W., 1956-Title: Computer networking: a top-down approach / James F."
11,"Kurose, University of Massachusetts, Amherst,
Keith W."
12,"Ross, NYU and NYU Shanghai.Description: Seventh edition."
13,"| Hoboken, New Jersey: Pearson, [2017] | Includes bibliographical references
and index."
14,Identifiers: LCCN 2016004976 | ISBN 9780133594140 | ISBN 0133594149Subjects: LCSH: Internet.
15,"| Computer networks.Classification: LCC TK5105.875.I57 K88 2017 | DDC 004.6-dc23LC record available at http:/ /lccn.loc.gov/ 2016004976
ISBN-10:     0-13-359414-9
ISBN-13: 978-0-13-359414-0
About the Authors
Jim Kurose
Jim Kurose is a Distinguished University Professor of Computer Science at the University of Massachusetts,
Amherst."
16,"He is currently on leave from the University of Massachusetts, serving as an Assistant Director at the
US National Science Foundation, where he leads the Directorate of Computer and Information Science and
Engineering."
17,"Dr. Kurose has received a number of recognitions for his educational activities including Outstanding Teacher
Awards from the National Technological University (eight times), the University of Massachusetts, and the
Northeast Association of Graduate Schools."
18,"He received the IEEE Taylor Booth Education Medal and was
recognized for his leadership of Massachusetts’ Commonwealth Information Technology Initiative."
19,"He has won
several conference best paper awards and received the IEEE Infocom Achievement Award and the ACM
Sigcomm Test of Time Award."
20,"Dr. Kurose is a former Editor-in-Chief of IEEE Transactions on Communications  and of IEEE/ACM
Transactions on Networking ."
21,"He has served as Technical Program co-Chair for IEEE Infocom, ACM
SIGCOMM, ACM Internet Measurement Conference , and ACM SIGMETRICS."
22,"He is a Fellow of the IEEE and
the ACM."
23,"His research ­interests include network protocols and architecture, network measurement,
multimedia communication, and modeling and performance ­evaluation."
24,"He holds a PhD in Computer Science
from Columbia University."
25,Keith RossKeith Ross is the Dean of Engineering and Computer Science at NYU Shanghai and the Leonard J.
26,"Shustek
Chair Professor in the Computer Science and Engineering Department at NYU."
27,"Previously he was at
University of Pennsylvania (13 years), Eurecom Institute (5 years) and Polytechnic University (10 years)."
28,"He
received a B.S.E.E from Tufts University, a M.S.E.E. from Columbia University, and a Ph.D. in Computer and
Control Engineering from The University of Michigan."
29,"Keith Ross is also the co-founder and original CEO of
Wimba, which develops online multimedia applications for e-learning and was acquired by Blackboard in 2010."
30,"Professor Ross’s research interests are in privacy, social networks, peer-to-peer networking, Internet
measurement, content distribution networks, and stochastic modeling."
31,"He is an ACM Fellow, an IEEE Fellow,
recipient of the Infocom 2009 Best Paper Award, and recipient of 2011 and 2008 Best Paper Awards for
Multimedia Communications (awarded by IEEE Communications Society)."
32,"He has served on numerous journal
editorial boards and conference program committees, including IEEE/ACM Transactions on Networking, ACM
SIGCOMM, ACM CoNext, and ACM Internet Measurement Conference ."
33,"He also has served as an advisor to
the Federal Trade Commission on P2P file sharing."
34,"To Julie and our three precious ones—Chris, Charlie, and Nina
JFK
A big THANKS to my professors, colleagues, and students all over the world."
35,"KWR
Preface
Welcome to the seventh edition of Computer Networking: A Top-Down Approach."
36," Since the publication of the
first edition 16 years ago, our book has been adopted for use at many hundreds of colleges and universities,
translated into 14 languages, and used by over one hundred thousand students and practitioners worldwide."
37,We’ve heard from many of these readers and have been overwhelmed by the ­positive ­response.What’s New in the Seventh Edition?
38,"We think one important reason for this success has been that our book continues to offer a fresh and timely
approach to computer networking instruction."
39,"We’ve made changes in this seventh edition, but we’ve also kept
unchanged what we believe (and the instructors and students who have used our book have confirmed) to be
the most important aspects of this book: its top-down approach, its focus on the Internet and a modern
treatment of computer networking, its attention to both principles and practice, and its accessible style and
approach toward learning about computer networking."
40,"Nevertheless, the seventh edition has been revised and
updated substantially."
41,"Long-time readers of our book will notice that for the first time since this text was published, we’ve changed the
organization of the chapters themselves."
42,"The network layer, which had been previously covered in a single
chapter, is now covered in Chapter 4 (which focuses on the so-called “data plane” component of the network
layer) and Chapter 5 (which focuses on the network layer’s “control plane”)."
43,"This expanded coverage of the
network layer reflects the swift rise in importance of software-defined networking (SDN), arguably the most
important and exciting advance in networking in decades."
44,"Although a relatively recent innovation, SDN has
been rapidly adopted in practice—so much so that it’s already hard to imagine an introduction to modern
computer networking that doesn’t cover SDN."
45,"The topic of network management, previously covered in
Chapter 9, has now been folded into the new Chapter 5."
46,"As always, we’ve also updated many other sections
of the text to reflect recent changes in the dynamic field of networking since the sixth edition."
47,"As always,
material that has been retired from the printed text can always be found on this book’s Companion Website."
48,"The most important updates are the following:
Chapter 1 has been updated to reflect the ever-growing reach and use of the ­Internet."
49,"Chapter 2, which covers the application layer, has been significantly updated."
50,"We’ve removed the material
on the FTP protocol and distributed hash tables to make room for a new section on application-level video
streaming and ­content distribution networks, together with Netflix and YouTube case studies."
51,"The
socket programming sections have been updated from Python 2 to Python 3."
52,"Chapter 3, which covers the transport layer, has been modestly updated."
53,"The ­material on asynchronous
transport mode (ATM) networks has been replaced by more modern material on the Internet’s explicit
congestion notification (ECN), which teaches the same principles."
54,"Chapter 4 covers the “data plane” component of the network layer—the per-router  forwarding function that
determine how a packet arriving on one of a router’s input links is forwarded to one of that router’s output
links."
55,"We updated the material on traditional Internet forwarding found in all previous editions, and added
material on packet scheduling."
56,"We’ve also added a new section on generalized forwarding, as practiced in
SDN."
57,There are also numerous updates throughout the chapter.
58,"Material on multicast and broadcast
communication has been removed to make way for the new material."
59,"In Chapter 5, we cover the control plane functions of the network layer—the ­network-wide  logic that
controls how a datagram is routed along an end-to-end path of routers from the source host to the
destination host."
60,"As in previous ­editions, we cover routing algorithms, as well as routing protocols (with an
updated treatment of BGP) used in today’s Internet."
61,"We’ve added a significant new section on the SDN
control plane, where routing and other functions are implemented in so-called SDN controllers."
62,"Chapter 6, which now covers the link layer, has an updated treatment of Ethernet, and of data center
networking."
63,"Chapter 7, which covers wireless and mobile networking, contains updated ­material on 802.11 (so-called
“WiFi) networks and cellular networks, including 4G and LTE."
64,"Chapter 8, which covers network security and was extensively updated in the sixth edition, has onlymodest updates in this seventh edition."
65,"Chapter 9, on multimedia networking, is now slightly “thinner” than in the sixth edition, as material on video
streaming and content distribution networks has been moved to Chapter 2, and material on packet
scheduling has been incorporated into Chapter 4."
66,Significant new material involving end-of-chapter problems has been added.
67,"As with all previous editions,
homework problems have been revised, added, and removed."
68,"As always, our aim in creating this new edition of our book is to continue to provide a focused and modern
treatment of computer networking, emphasizing both principles and practice."
69,"Audience
This textbook is for a first course on computer networking."
70,"It can be used in both computer science and
electrical engineering departments."
71,"In terms of programming languages, the book assumes only that the
student has experience with C, C++, Java, or Python (and even then only in a few places)."
72,"Although this book
is more precise and analytical than many other introductory computer networking texts, it rarely uses any
mathematical concepts that are not taught in high school."
73,"We have made a deliberate effort to avoid using any
advanced calculus, probability, or stochastic process concepts (although we’ve included some homework
problems for students with this advanced background)."
74,"The book is therefore appropriate for undergraduate
courses and for first-year graduate courses."
75,"It should also be useful to practitioners in the telecommunications
industry."
76,What Is Unique About This Textbook?
77,"The subject of computer networking is enormously complex, involving many concepts, protocols, and
technologies that are woven together in an intricate manner."
78,"To cope with this scope and complexity, many
computer networking texts are often organized around the “layers” of a network architecture."
79,"With a layered
organization, students can see through the complexity of computer networking—they learn about the distinct
concepts and protocols in one part of the architecture while seeing the big picture of how all parts fit together."
80,"From a pedagogical perspective, our personal experience has been that such a layered approach indeed
works well."
81,"Nevertheless, we have found that the traditional approach of teaching—bottom up; that is, from the
physical layer towards the application layer—is not the best approach for a modern course on computer
networking."
82,"A Top-Down Approach
Our book broke new ground 16 years ago by treating networking in a top-down ­manner—that is, by
beginning at the application layer and working its way down toward the physical layer."
83,"The feedback we
received from teachers and students alike have confirmed that this top-down approach has many advantages
and does indeed work well pedagogically."
84,"First, it places emphasis on the application layer (a “high growth
area” in networking)."
85,"Indeed, many of the recent revolutions in ­computer networking—including the Web,
peer-to-peer file sharing, and media streaming—have taken place at the application layer."
86,"An early emphasis
on application-layer issues differs from the approaches taken in most other texts, which have only a small
amount of material on network applications, their requirements, application-layer paradigms (e.g., client-server
and peer-to-peer), and application programming ­interfaces."
87,"­Second, our experience as instructors (and that
of many instructors who have used this text) has been that teaching networking applications near the
beginning of the course is a powerful motivational tool."
88,"Students are thrilled to learn about how networkingapplications work—applications such as e-mail and the Web, which most students use on a daily basis."
89,"Once
a student understands the applications, the student can then understand the network services needed to
support these applications."
90,"The student can then, in turn, examine the various ways in which such services
might be provided and implemented in the lower layers."
91,"Covering applications early thus provides motivation
for the remainder of the text."
92,"Third, a top-down approach enables instructors to introduce network application development at an early
stage."
93,"Students not only see how popular applications and protocols work, but also learn how easy it is to
create their own network ­applications and application-level protocols."
94,"With the top-down approach, students
get early ­exposure to the notions of socket programming, service models, and ­protocols—important
concepts that resurface in all subsequent layers."
95,"By providing socket programming examples in Python, we
highlight the central ideas without confusing students with complex code."
96,"Undergraduates in electrical
engineering and computer science should not have difficulty following the Python code."
97,"An Internet Focus
Although we dropped the phrase “Featuring the Internet” from the title of this book with the fourth edition, this
doesn’t mean that we dropped our focus on the Internet."
98,"Indeed, nothing could be further from the case!
Instead, since the Internet has become so pervasive, we felt that any networking textbook must have a
significant focus on the Internet, and thus this phrase was somewhat unnecessary."
99,"We continue to use the
Internet’s architecture and protocols as primary vehicles for studying fundamental computer networking
concepts."
100,"Of course, we also include concepts and protocols from other network architectures."
101,"But the
spotlight is clearly on the Internet, a fact reflected in our organizing the book around the Internet’s five-layer
architecture: the application, transport, network, link, and physical layers."
102,"Another benefit of spotlighting the Internet is that most computer science and electrical engineering students
are eager to learn about the Internet and its protocols."
103,"They know that the Internet has been a revolutionary
and disruptive technology and can see that it is profoundly changing our world."
104,"Given the enormous relevance
of the Internet, students are naturally curious about what is “under the hood.” Thus, it is easy for an instructor
to get students excited about basic principles when using the Internet as the guiding focus."
105,"Teaching Networking Principles
Two of the unique features of the book—its top-down approach and its focus on the Internet—have appeared
in the titles of our book."
106,"If we could have squeezed a third phrase into the subtitle, it would have contained the
word principles."
107," The field of networking is now mature enough that a number of fundamentally important issues
can be identified."
108,"For example, in the transport layer, the fundamental issues include reliable communication
over an unreliable network layer, connection establishment/ teardown and handshaking, congestion and flow
control, and multiplexing."
109,"Three fundamentally important network-layer issues are determining “good” paths
between two routers, interconnecting a large number of heterogeneous networks, and managing the
complexity of a modern network."
110,"In the link layer, a fundamental problem is sharing a multiple access channel."
111,"In network security, techniques for providing confidentiality, authentication, and message integrity are all based
on cryptographic fundamentals."
112,"This text identifies fundamental networking issues and studies approaches
towards addressing these issues."
113,"The student learning these principles will gain knowledge with a long “shelf
life”—long after today’s network standards and protocols have become obsolete, the principles they embody
will remain important and relevant."
114,"We believe that the combination of using the Internet to get the student’s
foot in the door and then emphasizing fundamental issues and solution approaches will allow the student toquickly understand just about any networking technology."
115,"The Website
Each new copy of this textbook includes twelve months of access to a Companion ­Website for all book
readers at http:/ /www.pearsonhighered.com/ cs-resources/ , which includes:
Interactive learning material."
116,"The book’s Companion Website contains ­VideoNotes—video
presentations of important topics throughout the book done by the authors, as well as walkthroughs of
solutions to problems similar to those at the end of the chapter."
117,"We’ve seeded the Web site with
VideoNotes and ­online problems for Chapters 1 through 5 and will continue to actively add and update
this material over time."
118,"As in earlier editions, the Web site contains the interactive Java applets that
animate many key networking concepts."
119,"The site also has interactive quizzes that permit students to check
their basic understanding of the subject matter."
120,"Professors can integrate these interactive features into their
lectures or use them as mini labs."
121,Additional technical material.
122," As we have added new material in each edition of our book, we’ve had to
remove coverage of some existing topics to keep the book at manageable length."
123,"For example, to make
room for the new ­material in this ­edition, we’ve removed material on FTP, distributed hash tables, and
multicasting, Material that appeared in earlier editions of the text is still of ­interest, and thus can be found
on the book’s Web site."
124,Programming assignments.
125,"The Web site also provides a number of detailed programming assignments,
which include building a multithreaded Web ­server, building an e-mail client with a GUI interface,
programming the sender and ­receiver sides of a reliable data transport protocol, programming a
distributed routing algorithm, and more."
126,Wireshark labs.
127,"One’s understanding of network protocols can be greatly ­deepened by seeing them in
action."
128,"The Web site provides numerous Wireshark assignments that enable students to actually observe
the sequence of messages exchanged between two protocol entities."
129,"The Web site includes separate
Wireshark labs on HTTP, DNS, TCP, UDP, IP, ICMP, Ethernet, ARP, WiFi, SSL, and on tracing all
protocols involved in satisfying a request to fetch a Web page."
130,We’ll continue to add new labs over time.
131,"In addition to the Companion Website, the authors maintain a public Web site,http://gaia.cs.umass.edu/kurose_ross /interactive, containing interactive exercises that create (and present
solutions for) problems similar to selected end-of-chapter problems."
132,"Since students can generate (and view
solutions for) an unlimited number of similar problem instances, they can work until the material is truly
mastered."
133,"Pedagogical Features
We have each been teaching computer networking for more than 30 years."
134,"Together, we bring more than 60
years of teaching experience to this text, during which time we have taught many thousands of students."
135,"We
have also been active researchers in computer networking during this time."
136,"(In fact, Jim and Keith first met
each other as master’s students in a computer networking course taught by Mischa Schwartz in 1979 at
Columbia University.) We think all this gives us a good perspective on where networking has been and where
it is likely to go in the future."
137,"Nevertheless, we have resisted temptations to bias the material in this book
towards our own pet research projects."
138,"We figure you can visit our personal Web sites if you are interested in
our research."
139,"Thus, this book is about modern computer networking—it is about contemporary protocols and
technologies as well as the underlying principles behind these protocols and technologies."
140,We also believethat learning (and teaching!) about networking can be fun.
141,"A sense of humor, use of analogies, and real-world
examples in this book will hopefully make this material more fun."
142,"Supplements for Instructors
We provide a complete supplements package to aid instructors in teaching this course."
143,"This material can be
accessed from Pearson’s Instructor Resource Center ( http:/ /www.pearsonhighered.com/ irc)."
144,"Visit the
Instructor Resource Center for ­information about accessing these instructor’s supplements."
145,PowerPoint  slides.
146,We provide PowerPoint slides for all nine chapters.
147,"The slides have been completely
updated with this seventh edition."
148,The slides cover each chapter in detail.
149,"They use graphics and
animations (rather than relying only on monotonous text bullets) to make the slides interesting and visually
appealing."
150,"We provide the original PowerPoint slides so you can customize them to best suit your own
teaching needs."
151,"Some of these slides have been contributed by other instructors who have taught from our
book."
152,Homework solutions.
153," We provide a solutions manual for the homework problems in the text, programming
assignments, and Wireshark labs."
154,"As noted ­earlier, we’ve introduced many new homework problems in
the first six chapters of the book."
155,Chapter DependenciesThe first chapter of this text presents a self-contained overview of computer networking.
156,"Introducing many key
concepts and terminology, this chapter sets the stage for the rest of the book."
157,"All of the other chapters directly
depend on this first chapter."
158,"After completing Chapter 1, we recommend instructors cover Chapters 2 through
6 in sequence, following our top-down philosophy."
159,"Each of these five chapters leverages material from the
preceding chapters."
160,"After completing the first six chapters, the instructor has quite a bit of flexibility."
161,"There are
no interdependencies among the last three chapters, so they can be taught in any order."
162,"However, each of the
last three chapters depends on the material in the first six chapters."
163,"Many instructors first teach the first six
chapters and then teach one of the last three chapters for “dessert.”
One Final Note: We’d Love to Hear from YouWe encourage students and instructors to e-mail us with any comments they might have about our book."
164,"It’s
been wonderful for us to hear from so many instructors and students from around the world about our first five
editions."
165,We’ve incorporated many of these suggestions into later editions of the book.
166,"We also encourage
instructors to send us new homework problems (and solutions) that would complement the current homework
problems."
167,We’ll post these on the instructor-only portion of the Web site.
168,"We also encourage instructors and
students to create new Java applets that illustrate the concepts and protocols in this book."
169,"If you have an
applet that you think would be appropriate for this text, please submit it to us."
170,"If the applet (including notation
and terminology) is appropriate, we’ll be happy to include it on the text’s Web site, with an appropriate
reference to the applet’s authors."
171,"So, as the saying goes, “Keep those cards and letters coming!” Seriously, please do continue to send us
interesting URLs, point out typos, disagree with any of our claims, and tell us what works and what doesn’t
work."
172,Tell us what you think should or shouldn’t be included in the next edition.
173,"Send your e-mail to
kurose@cs.umass.edu  and keithwross@nyu.edu.®Acknowledgments
Since we began writing this book in 1996, many people have given us invaluable help and have been
influential in shaping our thoughts on how to best organize and teach a networking course."
174,"We want to say A
BIG THANKS to everyone who has helped us from the earliest first drafts of this book, up to this seventh
edition."
175,"We are also very thankful to the many hundreds of readers from around the world—students, faculty,
practitioners—who have sent us thoughts and comments on earlier editions of the book and suggestions for
future editions of the book."
176,"Special thanks go out to:
Al Aho (Columbia University)
Hisham Al-Mubaid (University of Houston-Clear Lake)Pratima Akkunoor (Arizona State University)Paul Amer (University of Delaware)Shamiul Azom (Arizona State University)Lichun Bao (University of California at Irvine)Paul Barford (University of Wisconsin)Bobby Bhattacharjee (University of Maryland)Steven Bellovin (Columbia University)Pravin Bhagwat (Wibhu)Supratik Bhattacharyya (previously at Sprint)Ernst Biersack (Eurécom Institute)Shahid Bokhari (University of Engineering & Technology, Lahore)Jean Bolot (Technicolor Research)Daniel Brushteyn (former University of Pennsylvania student)Ken Calvert (University of Kentucky)Evandro Cantu (Federal University of Santa Catarina)Jeff Case (SNMP Research International)Jeff Chaltas (Sprint)Vinton Cerf (Google)Byung Kyu Choi (Michigan Technological University)Bram Cohen (BitTorrent, Inc.)Constantine Coutras (Pace University)John Daigle (University of Mississippi)
Edmundo A."
177,"de Souza e Silva (Federal University of Rio de Janeiro)Philippe Decuetos (Eurécom Institute)
Christophe Diot (Technicolor Research)Prithula Dhunghel (Akamai)Deborah Estrin (University of California, Los Angeles)Michalis Faloutsos (University of California at Riverside)Wu-chi Feng (Oregon Graduate Institute)Sally Floyd (ICIR, University of California at Berkeley)Paul Francis (Max Planck Institute)David Fullager (Netflix)Lixin Gao (University of Massachusetts)JJ Garcia-Luna-Aceves (University of California at Santa Cruz)Mario Gerla (University of California at Los Angeles)David Goodman (NYU-Poly)Yang Guo (Alcatel/Lucent Bell Labs)Tim Griffin (Cambridge University)Max Hailperin (Gustavus Adolphus College)Bruce Harvey (Florida A&M University, Florida State University)Carl Hauser (Washington State University)Rachelle Heller (George Washington University)Phillipp Hoschka (INRIA/W3C)Wen Hsin (Park University)Albert Huang (former University of Pennsylvania student)Cheng Huang (Microsoft Research)Esther A."
178,"Hughes (Virginia Commonwealth University)Van Jacobson (Xerox PARC)Pinak Jain (former NYU-Poly student)Jobin James (University of California at Riverside)Sugih Jamin (University of Michigan)Shivkumar Kalyanaraman (IBM Research, India)Jussi Kangasharju (University of Helsinki)Sneha Kasera (University of Utah)Parviz Kermani (formerly of IBM Research)
Hyojin Kim (former University of Pennsylvania student)
Leonard Kleinrock (University of California at Los Angeles)David Kotz (Dartmouth College)Beshan Kulapala (Arizona State University)Rakesh Kumar (Bloomberg)Miguel A."
179,"Labrador (University of South Florida)Simon Lam (University of Texas)Steve Lai (Ohio State University)Tom LaPorta (Penn State University)Tim-Berners Lee (World Wide Web Consortium)Arnaud Legout (INRIA)Lee Leitner (Drexel University)Brian Levine (University of Massachusetts)Chunchun Li (former NYU-Poly student)Yong Liu (NYU-Poly)William Liang (former University of Pennsylvania student)Willis Marti (Texas A&M University)Nick McKeown (Stanford University)Josh McKinzie (Park University)Deep Medhi (University of Missouri, Kansas City)Bob Metcalfe (International Data Group)Sue Moon (KAIST)Jenni Moyer (Comcast)Erich Nahum (IBM Research)Christos Papadopoulos (Colorado Sate University)Craig Partridge (BBN Technologies)Radia Perlman (Intel)Jitendra Padhye (Microsoft Research)Vern Paxson (University of California at Berkeley)Kevin Phillips (Sprint)George Polyzos (Athens University of Economics and Business)
Sriram Rajagopalan (Arizona State University)
Ramachandran Ramjee (Microsoft Research)Ken Reek (Rochester Institute of Technology)Martin Reisslein (Arizona State University)Jennifer Rexford (Princeton University)Leon Reznik (Rochester Institute of Technology)Pablo Rodrigez (Telefonica)Sumit Roy (University of Washington)Dan Rubenstein (Columbia University)Avi Rubin (Johns Hopkins University)Douglas Salane (John Jay College)Despina Saparilla (Cisco Systems)John Schanz (Comcast)Henning Schulzrinne (Columbia University)Mischa Schwartz (Columbia University)Ardash Sethi (University of Delaware)Harish Sethu (Drexel University)K."
180,Sam Shanmugan (University of Kansas)Prashant Shenoy (University of Massachusetts)Clay Shields (Georgetown University)Subin Shrestra (University of Pennsylvania)Bojie Shu (former NYU-Poly student)Mihail L.
181,"Sichitiu (NC State University)Peter Steenkiste (Carnegie Mellon University)Tatsuya Suda (University of California at Irvine)Kin Sun Tam (State University of New York at Albany)Don Towsley (University of Massachusetts)David Turner (California State University, San Bernardino)Nitin Vaidya (University of Illinois)Michele Weigle (Clemson University)David Wetherall (University of Washington)
Ira Winston (University of Pennsylvania)Di Wu (Sun Yat-sen University)Shirley Wynn (NYU-Poly)Raj Yavatkar (Intel)Yechiam Yemini (Columbia University)Dian Yu (NYU Shanghai)Ming Yu (State University of New York at Binghamton)Ellen Zegura (Georgia Institute of Technology)Honggang Zhang (Suffolk University)Hui Zhang (Carnegie Mellon University)Lixia Zhang (University of California at Los Angeles)Meng Zhang (former NYU-Poly student)Shuchun Zhang (former University of Pennsylvania student)Xiaodong Zhang (Ohio State University)ZhiLi Zhang (University of Minnesota)Phil Zimmermann (independent consultant)Mike Zink (University of Massachusetts)Cliff C."
182,"Zou (University of Central Florida)
We
 also want to thank the entire Pearson team—in particular, Matt Goldstein and Joanne Manning—who have
done an absolutely outstanding job  on this seventh ­edition (and who have put up with two very finicky authors
who seem congenitally ­unable to meet deadlines!)."
183,"Thanks also to our artists, Janet Theurer and Patrice
Rossi Calkin, for their work on the beautiful figures in this and earlier editions of our book, and to Katie Ostler
and her team at Cenveo for their wonderful production work on this edition."
184,"Finally, a most special thanks go to
our previous two editors at ­Addison-Wesley—Michael Hirsch and Susan Hartman."
185,"This book would not be
what it is (and may well not have been at all) without  their graceful management, constant encouragement,
nearly infinite patience, good humor, and perseverance.Table of Contents
Chapter 1 Computer Networks and the Internet 1
1.1 What Is the Internet?"
186," 2
1.1.1 A Nuts-and-Bolts Description 2
1.1.2 A Services Description 51.1.3 What Is a Protocol?"
187," 7
1.2 The Network Edge  9
1.2.1 Access Networks  12
1.2.2 Physical Media 18
1.3 The Network Core 21
1.3.1 Packet Switching  23
1.3.2 Circuit Switching  27
1.3.3 A Network of Networks 31
1.4 Delay, Loss, and Throughput in Packet-Switched Networks  35
1.4.1 Overview of Delay in Packet-Switched Networks 351.4.2 Queuing Delay and Packet Loss  39
1.4.3 End-to-End Delay  41
1.4.4 Throughput in Computer Networks  43
1.5 Protocol Layers and Their Service Models  47
1.5.1 Layered Architecture  47
1.5.2 Encapsulation  53
1.6 Networks Under Attack  55
1.7 History of Computer Networking and the Internet  59
1.7.1 The Development of Packet Switching: 1961–1972 591.7.2 Proprietary Networks and Internetworking: 1972–1980  60
1.7.3 A Proliferation of Networks: 1980–1990  62
1.7.4 The Internet Explosion: The 1990s  63
1.7.5 The New Millennium  64
1.8 Summary 65Homework Problems and Questions  67
Wireshark Lab 77
Interview: Leonard Kleinrock 79
Chapter 2 Application Layer  83
2.1 Principles of Network Applications  84
2.1.1 Network Application Architectures 862.1.2 Processes Communicating 882.1.3 Transport Services Available to Applications  90
2.1.4 Transport Services Provided by the Internet  93
2.1.5 Application-Layer Protocols  96
2.1.6 Network Applications Covered in This Book  97
2.2 The Web and HTTP  98
2.2.1 Overview of HTTP  98
2.2.2 Non-Persistent and Persistent Connections 1002.2.3 HTTP Message Format 1032.2.4 User-Server Interaction: Cookies  108
2.2.5 Web Caching  110
2.3 Electronic Mail in the Internet  116
2.3.1 SMTP 1182.3.2 Comparison with HTTP  121
2.3.3 Mail Message Formats 1212.3.4 Mail Access Protocols 122
2.4 DNS—The Internet’s Directory Service  126
2.4.1 Services Provided by DNS 1272.4.2 Overview of How DNS Works 1292.4.3 DNS Records and Messages  135
2.5 Peer-to-Peer Applications 140
2.5.1 P2P File Distribution  140
2.6 Video Streaming and Content Distribution Networks  147
2.6.1 Internet Video  148
2.6.2 HTTP Streaming and DASH 1482.6.3 Content Distribution Networks  149
2.6.4 Case Studies: Netflix, YouTube, and Kankan  153
2.7 Socket Programming: Creating Network Applications  157
2.7.1 Socket Programming with UDP  159
2.7.2 Socket Programming with TCP  164
2.8 Summary 170
Homework Problems and Questions  171
Socket Programming Assignments 180
Wireshark Labs: HTTP, DNS 182Interview: Marc Andreessen  184
Chapter 3 Transport Layer 187
3.1 Introduction and Transport-Layer Services  188
3.1.1 Relationship Between Transport and Network Layers  188
3.1.2 Overview of the Transport Layer in the Internet  191
3.2 Multiplexing and Demultiplexing  193
3.3 Connectionless Transport: UDP 200
3.3.1 UDP Segment Structure 2043.3.2 UDP Checksum  204
3.4 Principles of Reliable Data Transfer 206
3.4.1 Building a Reliable Data Transfer Protocol  208
3.4.2 Pipelined Reliable Data Transfer Protocols  217
3.4.3 Go-Back-N (GBN) 2213.4.4 Selective Repeat (SR)  226
3.5 Connection-Oriented Transport: TCP  233
3.5.1 The TCP Connection  233
3.5.2 TCP Segment Structure 2363.5.3 Round-Trip Time Estimation and Timeout  241
3.5.4 Reliable Data Transfer 2443.5.5 Flow Control  252
3.5.6 TCP Connection Management  255
3.6 Principles of Congestion Control  2613.6.1 The Causes and the Costs of Congestion  261
3.6.2 Approaches to Congestion Control  268
3.7 TCP Congestion Control  269
3.7.1 Fairness 279
3.7.2 Explicit Congestion Notification (ECN): Network-assisted Congestion Control  282
3.8 Summary 284
Homework Problems and Questions  286
Programming Assignments 301
Wireshark Labs: Exploring TCP, UDP  302
Interview: Van Jacobson 303
Chapter 4 The Network Layer: Data Plane 305
4.1 Overview of Network Layer 306
4.1.1 Forwarding and Routing: The Network Data and Control Planes  306
4.1.2 Network Service Models 311
4.2 What’s Inside a Router?"
188," 313
4.2.1 Input Port Processing and Destination-Based Forwarding  316
4.2.2 Switching  319
4.2.3 Output Port Processing  321
4.2.4 Where Does Queuing Occur?"
189," 321
4.2.5 Packet Scheduling  325
4.3 The Internet Protocol (IP): IPv4, Addressing, IPv6, and More  329
4.3.1 IPv4 Datagram Format  330
4.3.2 IPv4 Datagram Fragmentation 3324.3.3 IPv4 Addressing 3344.3.4 Network Address Translation (NAT) 3454.3.5 IPv6 348
4.4 Generalized Forwarding and SDN  354
4.4.1 Match 3564.4.2 Action 3584.4.3 OpenFlow Examples of Match-plus-action in Action  358
4.5 Summary 361Homework Problems and Questions  361
Wireshark Lab 370
Interview: Vinton G."
190,"Cerf  371
Chapter 5 The Network Layer: Control Plane  373
5.1 Introduction  374
5.2 Routing Algorithms  376
5.2.1 The Link-State (LS) Routing Algorithm  379
5.2.2 The Distance-Vector (DV) Routing Algorithm  384
5.3 Intra-AS Routing in the Internet: OSPF  391
5.4 Routing Among the ISPs: BGP  395
5.4.1 The Role of BGP  395
5.4.2 Advertising BGP Route Information  396
5.4.3 Determining the Best Routes 3985.4.4 IP-Anycast 4025.4.5 Routing Policy  403
5.4.6 Putting the Pieces Together: Obtaining Internet Presence  406
5.5 The SDN Control Plane  407
5.5.1 The SDN Control Plane: SDN Controller and SDN Control Applications  410
5.5.2 OpenFlow Protocol  412
5.5.3 Data and Control Plane Interaction: An Example  414
5.5.4 SDN: Past and Future 415
5.6 ICMP: The Internet Control Message Protocol  419
5.7 Network Management and SNMP 421
5.7.1 The Network Management Framework 4225.7.2 The Simple Network Management Protocol (SNMP)  424
5.8 Summary 426
Homework Problems and Questions  427
Socket Programming Assignment 433
Programming Assignment 434Wireshark Lab 435
Interview: Jennifer Rexford 436Chapter 6 The Link Layer and LANs  439
6.1 Introduction to the Link Layer  440
6.1.1 The Services Provided by the Link Layer  442
6.1.2 Where Is the Link Layer Implemented?"
191," 443
6.2 Error-Detection and -Correction Techniques  444
6.2.1 Parity Checks  446
6.2.2 Checksumming Methods 448
6.2.3 Cyclic Redundancy Check (CRC)  449
6.3 Multiple Access Links and Protocols  451
6.3.1 Channel Partitioning Protocols  453
6.3.2 Random Access Protocols 4556.3.3 Taking-Turns Protocols  464
6.3.4 DOCSIS: The Link-Layer Protocol for Cable Internet Access  465
6.4 Switched Local Area Networks 467
6.4.1 Link-Layer Addressing and ARP 4686.4.2 Ethernet 4746.4.3 Link-Layer Switches 4816.4.4 Virtual Local Area Networks (VLANs) 487
6.5 Link Virtualization: A Network as a Link Layer  491
6.5.1 Multiprotocol Label Switching (MPLS)  492
6.6 Data Center Networking 4956.7 Retrospective: A Day in the Life of a Web Page Request  500
6.7.1 Getting Started: DHCP, UDP, IP, and Ethernet  500
6.7.2 Still Getting Started: DNS and ARP  502
6.7.3 Still Getting Started: Intra-Domain Routing to the DNS Server  503
6.7.4 Web Client-Server Interaction: TCP and HTTP  504
6.8 Summary 506
Homework Problems and Questions  507
Wireshark Lab 515
Interview: Simon S."
192,"Lam  516Chapter 7 Wireless and Mobile Networks  519
7.1 Introduction  520
7.2 Wireless Links and Network Characteristics 525
7.2.1 CDMA 528
7.3 WiFi: 802.11 Wireless LANs 532
7.3.1 The 802.11 Architecture  533
7.3.2 The 802.11 MAC Protocol 537
7.3.3 The IEEE 802.11 Frame 5427.3.4 Mobility in the Same IP Subnet  546
7.3.5 Advanced Features in 802.11 5477.3.6 Personal Area Networks: Bluetooth and Zigbee  548
7.4 Cellular Internet Access 551
7.4.1 An Overview of Cellular Network Architecture 5517.4.2 3G Cellular Data Networks: Extending the Internet to Cellular Subscribers  554
7.4.3 On to 4G: LTE  557
7.5 Mobility Management: Principles  560
7.5.1 Addressing 5627.5.2 Routing to a Mobile Node  564
7.6 Mobile IP  570
7.7 Managing Mobility in Cellular Networks  574
7.7.1 Routing Calls to a Mobile User  576
7.7.2 Handoffs in GSM  577
7.8 Wireless and Mobility: Impact on Higher-Layer Protocols  580
7.9 Summary 582
Homework Problems and Questions  583
Wireshark Lab 588
Interview: Deborah Estrin 589
Chapter 8 Security in Computer Networks 593
8.1 What Is Network Security?"
193,"5948.2 Principles of Cryptography  596
8.2.1 Symmetric Key Cryptography  598
8.2.2 Public Key Encryption  6048.3 Message Integrity and Digital Signatures  610
8.3.1 Cryptographic Hash Functions  611
8.3.2 Message Authentication Code 613
8.3.3 Digital Signatures  614
8.4 End-Point Authentication  621
8.4.1 Authentication Protocol ap1.0 622
8.4.2 Authentication Protocol ap2.0 622
8.4.3 Authentication Protocol ap3.0 623
8.4.4 Authentication Protocol ap3.1 623
8.4.5 Authentication Protocol ap4.0 624
8.5 Securing E-Mail  626
8.5.1 Secure E-Mail 6278.5.2 PGP 630
8.6 Securing TCP Connections: SSL  631
8.6.1 The Big Picture  632
8.6.2 A More Complete Picture 635
8.7 Network-Layer Security: IPsec and Virtual Private Networks  637
8.7.1 IPsec and Virtual Private Networks (VPNs) 6388.7.2 The AH and ESP Protocols  640
8.7.3 Security Associations 6408.7.4 The IPsec Datagram 6418.7.5 IKE: Key Management in IPsec 645
8.8 Securing Wireless LANs 646
8.8.1 Wired Equivalent Privacy (WEP)  646
8.8.2 IEEE 802.11i 648
8.9 Operational Security: Firewalls and Intrusion Detection Systems  651
8.9.1 Firewalls 6518.9.2 Intrusion Detection Systems 659
8.10 Summary 662
Homework Problems and Questions  664
Wireshark Lab 672IPsec Lab 672
Interview: Steven M."
194,"Bellovin  673
Chapter 9 Multimedia Networking  675
9.1 Multimedia Networking Applications  676
9.1.1 Properties of Video  676
9.1.2 Properties of Audio  677
9.1.3 Types of Multimedia Network Applications  679
9.2 Streaming Stored Video  681
9.2.1 UDP Streaming 6839.2.2 HTTP Streaming 684
9.3 Voice-over-IP 688
9.3.1 Limitations of the Best-Effort IP Service  688
9.3.2 Removing Jitter at the Receiver for Audio 6919.3.3 Recovering from Packet Loss 6949.3.4 Case Study: VoIP with Skype  697
9.4 Protocols for Real-Time Conversational Applications  700
9.4.1 RTP 7009.4.2 SIP 703
9.5 Network Support for Multimedia  709
9.5.1 Dimensioning Best-Effort Networks 7119.5.2 Providing Multiple Classes of Service  712
9.5.3 Diffserv 7199.5.4 Per-Connection Quality-of-Service (QoS) Guarantees: Resource Reservation and Call
Admission 723
9.6 Summary 726
Homework Problems and Questions  727
Programming Assignment 735
Interview: Henning Schulzrinne  736
References  741
Index 783Chapter 1 Computer Networks and the Internet
Today’s Internet is arguably the largest engineered system ever created by ­mankind, with hundreds of
millions of connected computers, communication links, and switches; with billions of users who connect
via laptops, tablets, and smartphones; and with an array of new Internet-connected “things” includinggame consoles, surveillance systems, watches, eye glasses, thermostats, body scales, and cars."
195,"Giventhat the Internet is so large and has so many diverse components and uses, is there any hope of
understanding how it works?"
196,"Are there guiding principles and structure that can provide a foundation for
understanding such an amazingly large and complex system?"
197,"And if so, is it possible that it actually
could be both interesting and fun to learn about computer networks?"
198,"Fortunately, the answer to all of
these questions is a resounding YES! Indeed, it’s our aim in this book to provide you with a modern
introduction to the dynamic field of computer networking, giving you the principles and practical insightsyou’ll need to understand not only today’s networks, but tomorrow’s as well."
199,This first chapter presents a broad overview of computer networking and the Internet.
200,"Our goal here is to
paint a broad picture and set the context for the rest of this book, to see the forest through the trees."
201,"We’ll cover a lot of ground in this introductory chapter and discuss a lot of the pieces of a computernetwork, without losing sight of the big picture."
202,We’ll structure our overview of computer networks in this chapter as follows.
203,"After introducing some
basic terminology and concepts, we’ll first examine the basic hardware and software components thatmake up a network."
204,We’ll begin at the network’s edge and look at the end systems and networkapplications running in the network.
205,"We’ll then explore the core of a computer network, examining thelinks and the switches that transport data, as well as the access networks and physical media that
connect end systems to the network core."
206,"We’ll learn that the Internet is a network of networks, and we’ll
learn how these networks connect with each other."
207,"After having completed this overview of the edge and core of a computer network, we’ll take the broader
and more abstract view in the second half of this chapter."
208,"We’ll examine delay, loss, and throughput ofdata in a computer network and provide simple quantitative models for end-to-end throughput and delay:models that take into account transmission, propagation, and queuing delays."
209,"We’ll then introduce someof the key architectural principles in computer networking, namely, protocol layering and service models."
210,We’ll also learn that computer networks are vulnerable to many different types of attacks; we’ll surveysome of these attacks and consider how computer networks can be made more secure.
211,"Finally, we’ll
close this chapter with a brief history of computer networking.1.1 What Is the Internet?"
212,"In this book, we’ll use the public Internet, a specific computer network, as our principal vehicle for
discussing computer networks and their protocols."
213,But what is the Internet?
214,"There are a couple of ways
to answer this question."
215,"First, we can describe the nuts and bolts of the Internet, that is, the basic
hardware and software components that make up the Internet."
216,"Second, we can describe the Internet interms of a networking infrastructure that provides services to distributed applications."
217,"Let’s begin with
the nuts-and-bolts description, using Figure 1.1 to illustrate our discussion."
218,"1.1.1 A Nuts-and-Bolts Description
The Internet is a computer network that interconnects billions of computing devices throughout the
world."
219,"Not too long ago, these computing devices were primarily traditional desktop PCs, Linuxworkstations, and so-called servers that store and transmit information such as Web pages and e-mailmessages."
220,"Increasingly, however, nontraditional Internet “things” such as laptops, smartphones, tablets,TVs, gaming consoles, thermostats, home security systems, home appliances, watches, eye glasses,
cars, traffic control systems and more are being connected to the Internet."
221,"Indeed, the term computer
network is beginning to sound a bit dated, given the many nontraditional devices that are being hooked
up to the Internet."
222,"In Internet jargon, all of these devices are called hosts or end systems ."
223,"By some
estimates, in 2015 there were about 5 billion devices connected to the Internet, and the number will
reach 25 billion by 2020 [Gartner 2014] ."
224,"It is estimated that in 2015 there were over 3.2 billion Internet
users worldwide, approximately 40% of the world population [ITU 2015].Figure 1.1 Some pieces of the Internet
End systems are connected together by a network of communication links  and packet switches."
225,"We’ll see in Section 1.2 that there are many types of communication links, which are made up ofdifferent types of physical media, including coaxial cable, copper wire, optical fiber, and radio spectrum."
226,"Different links can transmit data at different rates, with the transmission rate of a link measured in
bits/second."
227,"When one end system has data to send to another end system, the sending end systemsegments the data and adds header bytes to each segment."
228,"The resulting packages of information,known as packets  in the jargon of computer networks, are then sent through the network to the
destination end system, where they are reassembled into the original data."
229,"A packet switch takes a packet arriving on one of its incoming communication links and forwards that
packet on one of its outgoing communication links."
230,"Packet switches come in many shapes and flavors,but the two most prominent types in today’s Internet are routers and link-layer switches."
231,"Both types of
switches forward packets toward their ultimate destinations."
232,"Link-layer switches are typically used inaccess networks, while routers are typically used in the network core."
233,The sequence of communicationlinks and packet switches traversed by a packet from the sending end system to the receiving endsystem is known as a route or path through the network.
234,"Cisco predicts annual global IP traffic will pass
the zettabyte (10  bytes) threshold by the end of 2016, and will reach 2 zettabytes per year by 2019
[Cisco VNI 2015]."
235,"Packet-switched networks (which transport packets) are in many ways similar to transportation networks
of highways, roads, and intersections (which transport vehicles)."
236,"Consider, for example, a factory thatneeds to move a large amount of cargo to some destination warehouse located thousands of kilometers
away."
237,"At the factory, the cargo is segmented and loaded into a fleet of trucks."
238,"Each of the trucks then
independently travels through the network of highways, roads, and intersections to the destinationwarehouse."
239,"At the destination warehouse, the cargo is unloaded and grouped with the rest of the cargoarriving from the same shipment."
240,"Thus, in many ways, packets are analogous to trucks, communicationlinks are analogous to highways and roads, packet switches are analogous to intersections, and endsystems are analogous to buildings."
241,"Just as a truck takes a path through the transportation network, apacket takes a path through a computer network."
242,"End systems access the Internet through Internet Service Providers (ISPs), including residential ISPs
such as local cable or telephone companies; corporate ISPs; university ISPs; ISPs that provide WiFi
access in airports, hotels, coffee shops, and other public places; and cellular data ISPs, providingmobile access to our smartphones and other devices."
243,Each ISP is in itself a network of packet switchesand communication links.
244,"ISPs provide a variety of types of network access to the end systems,including residential broadband access such as cable modem or DSL, high-speed local area networkaccess, and mobile wireless access."
245,"ISPs also provide ­Internet access to content providers,
connecting Web sites and video servers directly to the Internet."
246,"The Internet is all about connecting endsystems to each other, so the ISPs that provide access to end systems must also be interconnected."
247,"These lower-tier ISPs are interconnected through national and international upper-tier ISPs such as
Level 3 Communications, AT&T, Sprint, and NTT."
248,An upper-tier ISP consists of high-speed routersinterconnected with high-speed fiber-optic links.
249,"Each ISP network, whether upper-tier or lower-tier, is21managed independently, runs the IP protocol (see below), and conforms to certain naming and address
conventions."
250,"We’ll examine ISPs and their interconnection more closely in Section 1.3.
End systems, packet switches, and other pieces of the Internet run protocols that control the sending
and receiving of information within the Internet."
251,"The Transmission Control Protocol (TCP)  and the
Internet Protocol (IP)  are two of the most important protocols in the Internet."
252,"The IP protocol specifies
the format of the packets that are sent and received among routers and end systems."
253,"The Internet’s
principal protocols are collectively known as TCP/IP."
254,"We’ll begin looking into protocols in this
introductory chapter."
255,"But that’s just a start—much of this book is concerned with computer networkprotocols!
Given the importance of protocols to the Internet, it’s important that everyone agree on what each and
every protocol does, so that people can create systems and products that interoperate."
256,This is wherestandards come into play.
257,"Internet ­standards are developed by the Internet Engineering Task Force
(IETF) [IETF 2016]."
258,The IETF standards documents are called requests for comments (RFCs) .
259,"RFCs
started out as general requests for comments (hence the name) to resolve network and protocol design
problems that faced the precursor to the Internet [Allman 2011]."
260,"RFCs tend to be quite technical and
detailed."
261,"They define protocols such as TCP, IP, HTTP (for the Web), and SMTP (for e-mail)."
262,"There are
currently more than 7,000 RFCs. Other bodies also specify standards for network components, most
notably for network links."
263,"The IEEE 802 LAN/MAN Standards Committee [IEEE 802 2016] , for example,
specifies the Ethernet and wireless WiFi standards."
264,"1.1.2 A Services Description
Our discussion above has identified many of the pieces that make up the Internet."
265,"But we can alsodescribe the Internet from an entirely different angle—namely, as an infrastructure that provides
services to applications ."
266,"In addition to traditional applications such as e-mail and Web surfing, Internet
applications include mobile smartphone and tablet applications, including Internet messaging, mapping
with real-time road-traffic information, music streaming from the cloud, movie and television streaming,
online social networks, video conferencing, multi-person games, and location-based recommendation
systems."
267,"The applications are said to be distributed applications , since they involve multiple end
systems that exchange data with each other."
268,"Importantly, Internet applications run on end systems—they do not run in the packet switches in the network core."
269,"Although packet switches facilitate theexchange of data among end systems, they are not concerned with the application that is the source orsink of data."
270,Let’s explore a little more what we mean by an infrastructure that provides ­services to applications.
271,"To
this end, suppose you have an exciting new idea for a distributed Internet application, one that may
greatly benefit humanity or one that may simply make you rich and famous."
272,How might you go abouttransforming this idea into an actual Internet application?
273,"Because applications run on end systems, you
are going to need to write programs that run on the end systems."
274,"You might, for example, write your
programs in Java, C, or Python."
275,"Now, because you are developing a distributed Internet application, theprograms running on the different end systems will need to send data to each other."
276,And here we get toa central issue—one that leads to the alternative way of describing the Internet as a platform forapplications.
277,"How does one program running on one end system instruct the Internet to deliver data to
another program running on another end system?"
278,"End systems attached to the Internet provide a socket interface  that specifies how a program running
on one end system asks the Internet infrastructure to deliver data to a specific destination program
running on another end system."
279,This Internet socket interface is a set of rules that the sending programmust follow so that the Internet can deliver the data to the destination program.
280,"We’ll discuss the
Internet socket interface in detail in Chapter 2."
281,"For now, let’s draw upon a simple analogy, one that we
will frequently use in this book."
282,Suppose Alice wants to send a letter to Bob using the postal service.
283,"Alice, of course, can’t just write the letter (the data) and drop the letter out her window."
284,"Instead, the
postal service requires that Alice put the letter in an envelope; write Bob’s full name, address, and zipcode in the center of the envelope; seal the envelope; put a stamp in the upper-right-hand corner of theenvelope; and finally, drop the envelope into an official postal service mailbox."
285,"Thus, the postal servicehas its own “postal service interface,” or set of rules, that Alice must follow to have the postal servicedeliver her letter to Bob."
286,"In a similar manner, the Internet has a socket interface that the programsending data must follow to have the Internet deliver the data to the program that will receive the data."
287,"The postal service, of course, provides more than one service to its customers."
288,"It provides express
delivery, reception confirmation, ordinary use, and many more services."
289,"In a similar manner, the Internet
provides multiple services to its applications."
290,"When you develop an Internet application, you too mustchoose one of the Internet’s services for your application."
291,"We’ll describe the Internet’s services in
Chapter 2."
292,"We have just given two descriptions of the Internet; one in terms of its hardware and software
components, the other in terms of an infrastructure for providing services to distributed applications."
293,Butperhaps you are still confused as to what the Internet is.
294,What are packet switching and TCP/IP?
295,"What
are routers?"
296,What kinds of communication links are present in the Internet?
297,"What is a distributed
application?"
298,How can a thermostat or body scale be attached to the Internet?
299,"If you feel a bitoverwhelmed by all of this now, don’t worry—the purpose of this book is to introduce you to both thenuts and bolts of the Internet and the principles that govern how and why it works."
300,We’ll explain theseimportant terms and questions in the following sections and chapters.
301,"1.1.3 What Is a Protocol?Now that we’ve got a bit of a feel for what the Internet is, let’s consider another important buzzword in
computer networking: protocol ."
302,What is a protocol?
303,What does a protocol do ?
304,"A Human Analogy
It is probably easiest to understand the notion of a computer network protocol by first considering some
human analogies, since we humans execute protocols all of the time."
305,"Consider what you do when you
want to ask someone for the time of day."
306,"A typical exchange is shown in Figure 1.2. Human protocol (or
good manners, at least) dictates that one first offer a greeting (the first “Hi” in Figure 1.2) to initiate
communication with someone else."
307,The typical response to a “Hi” is a returned “Hi” message.
308,"Implicitly,
one then takes a cordial “Hi” response as an indication that one can proceed and ask for the time of day.A different response to the initial “Hi” (such as “Don’t bother me!” or “I don’t speak English,” or someunprintable reply) might
Figure 1.2 A human protocol and a computer network protocol
indicate an unwillingness or inability to communicate."
309,"In this case, the human protocol would be not to
ask for the time of day."
310,"Sometimes one gets no response at all to a question, in which case one typically
gives up asking that person for the time."
311,"Note that in our human protocol, there are specific messageswe send, and specific actions we take in response to the received reply messages or other events  (such
as no reply within some given amount of time)."
312,"Clearly, transmitted and received messages, and actions
taken when these messages are sent or received or other events occur, play a central role in a humanprotocol."
313,"If people run different protocols (for example, if one person has manners but the other doesnot, or if one understands the concept of time and the other does not) the protocols do not interoperateand no useful work can be accomplished."
314,"The same is true in networking—it takes two (or more)
communicating entities running the same protocol in order to accomplish a task."
315,Let’s consider a second human analogy.
316,"Suppose you’re in a college class (a computer networking
class, for example!)."
317,The teacher is droning on about protocols and you’re confused.
318,"The teacher stopsto ask, “Are there any questions?” (a message that is transmitted to, and received by, all students whoare not sleeping)."
319,You raise your hand (transmitting an implicit message to the teacher).
320,"Your teacheracknowledges you with a smile, saying “Yes ."
321,.
322,".” (a transmitted message encouraging you to ask your
question—teachers love to be asked questions), and you then ask your question (that is, transmit your
message to your teacher)."
323,"Your teacher hears your question (receives your question message) and
answers (transmits a reply to you)."
324,"Once again, we see that the transmission and receipt of messages,and a set of conventional actions taken when these messages are sent and received, are at the heart ofthis question-and-answer protocol."
325,"Network Protocols
A network protocol is similar to a human protocol, except that the entities exchanging messages and
taking actions are hardware or software components of some device (for example, computer,
smartphone, tablet, router, or other network-capable device)."
326,"All activity in the Internet that involves two
or more communicating remote entities is governed by a protocol."
327,"For example, hardware-implementedprotocols in two physically connected computers control the flow of bits on the “wire” between the twonetwork interface cards; congestion-control protocols in end systems control the rate at which packetsare transmitted between sender and receiver; protocols in routers determine a packet’s path fromsource to destination."
328,"Protocols are running everywhere in the Internet, and consequently much of thisbook is about computer network protocols."
329,"As an example of a computer network protocol with which you are probably familiar, consider what
happens when you make a request to a Web server, that is, when you type the URL of a Web page into
your Web browser."
330,"The scenario is illustrated in the right half of Figure 1.2. First, your computer will
send a connection request message to the Web server and wait for a reply."
331,"The Web server will
eventually receive your connection request message and return a connection reply message."
332,"Knowing
that it is now OK to request the Web document, your computer then sends the name of the Web page itwants to fetch from that Web server in a GET message."
333,"Finally, the Web server returns the Web page(file) to your computer.Given the human and networking examples above, the exchange of messages and the actions taken
when these messages are sent and received are the key defining elements of a protocol:
A protocol  defines the format and the order of messages exchanged between two or more
communicating entities, as well as the actions taken on the transmission and/or receipt of a message
or other event."
334,"The Internet, and computer networks in general, make extensive use of protocols."
335,Different protocolsare used to accomplish different communication tasks.
336,"As you read through this book, you will learn thatsome protocols are simple and straightforward, while others are complex and intellectually deep.Mastering the field of computer networking is equivalent to understanding the what, why, and how ofnetworking protocols.1.2 The Network Edge
In the previous section we presented a high-level overview of the Internet and networking protocols."
337,"We
are now going to delve a bit more deeply into the components of a computer network (and the Internet,in particular)."
338,"We begin in this section at the edge of a network and look at the components with whichwe are most ­familiar—namely, the computers, smartphones and other devices that we use on a dailybasis."
339,"In the next section we’ll move from the network edge to the network core and examine switching
and routing in computer networks."
340,"Recall from the previous section that in computer networking jargon, the computers and other devices
connected to the Internet are often referred to as end systems."
341,"They are referred to as end systems
because they sit at the edge of the Internet, as shown in Figure 1.3. The Internet’s end systems include
desktop computers (e.g., desktop PCs, Macs, and Linux boxes), servers (e.g., Web and e-mail servers),
and mobile devices (e.g., laptops, smartphones, and tablets)."
342,"Furthermore, an increasing number ofnon-traditional “things” are being attached to the Internet as end ­systems (see the Case History
feature)."
343,"End systems are also referred to as hosts because they host (that is, run) application programs such as
a Web browser program, a Web server program, an e-mail client program, or an e-mail server program."
344,"Throughout this book we will use theFigure 1.3 End-system interaction
CASE HISTORY
THE INTERNET OF THINGS
Can you imagine a world in which just about everything is wirelessly connected to the Internet?"
345,"A world in which most people, cars, bicycles, eye glasses, watches, toys, hospital equipment,home sensors, classrooms, video surveillance systems, atmospheric sensors, store-shelfproducts, and pets are connected?"
346,"This world of the Internet of Things (IoT) may actually be just
around the corner."
347,"By some estimates, as of 2015 there are already 5 billion things connected to the Internet, and
the number could reach 25 billion by 2020 [Gartner 2014] ."
348,"These things include our
smartphones, which already follow us around in our homes, offices, and cars, reporting our geo-
locations and usage data to our ISPs and Internet applications."
349,"But in addition to our
smartphones, a wide-variety of non-traditional “things” are already available as products."
350,"Forexample, there are Internet-connected wearables, including watches (from Apple and manyothers) and eye glasses."
351,"Internet-connected glasses can, for example, upload everything we seeto the cloud, allowing us to share our visual experiences with people around the world in real-time."
352,"There are Internet-connected things already available for the smart home, includingInternet-connected thermostats that can be controlled remotely from our smartphones, andInternet-connected body scales, enabling us to graphically review the progress of our diets fromour smartphones."
353,"There are Internet-connected toys, including dolls that recognize and interpret
a child’s speech and respond appropriately."
354,The IoT offers potentially revolutionary benefits to users.
355,"But at the same time there are also
huge security and privacy risks."
356,"For example, attackers, via the Internet, might be able to hackinto IoT devices or into the servers collecting data from IoT devices."
357,"For example, an attackercould hijack an Internet-connected doll and talk directly with a child; or an attacker could hackinto a database that stores ­personal health and activity information collected from wearabledevices."
358,"These security and privacy concerns could undermine the consumer confidencenecessary for the ­technologies to meet their full potential and may result in less widespread
adoption [FTC 2015]."
359,"terms hosts and end systems interchangeably; that is, host = end system."
360,"Hosts are sometimes further
divided into two categories: clients and servers ."
361,"Informally, clients tend to be desktop and mobile PCs,
smartphones, and so on, whereas servers tend to be more powerful machines that store and distribute
Web pages, stream video, relay e-mail, and so on."
362,"Today, most of the servers from which we receivesearch results, e-mail, Web pages, and videos reside in large data centers ."
363,"For example, Google has
50-100 data centers, including about 15 large centers, each with more than 100,000 servers."
364,"1.2.1 Access Networks
Having considered the applications and end systems at the “edge of the network,” let’s next consider theaccess network—the network that physically connects an end system to the first router (also known as
the “edge router”) on a path from the end system to any other distant end system."
365,"Figure 1.4 shows
several types of accessFigure 1.4 Access networks
networks with thick, shaded lines and the settings (home, enterprise, and wide-area mobile wireless) in
which they are used."
366,"Home Access: DSL, Cable, FTTH, Dial-Up, and SatelliteIn developed countries as of 2014, more than 78 percent of the households have Internet access, with
Korea, Netherlands, Finland, and Sweden leading the way with more than 80 percent of households
having Internet access, almost all via a high-speed broadband connection [ITU 2015]."
367,"Given this
widespread use of home access networks let’s begin our overview of access networks by considering
how homes connect to the Internet."
368,"Today, the two most prevalent types of broadband residential access are digital subscriber line (DSL)
and cable."
369,"A residence typically obtains DSL Internet access from the same local telephone company
(telco) that provides its wired local phone access."
370,"Thus, when DSL is used, a customer’s telco is also its
ISP."
371,"As shown in Figure 1.5, each customer’s DSL modem uses the existing telephone line (twisted-
pair copper wire, which we’ll discuss in Section 1.2.2) to exchange data with a digital subscriber line
access multiplexer (DSLAM) located in the telco’s local central office (CO)."
372,"The home’s DSL modemtakes digital data and translates it to high- ­frequency tones for transmission over telephone wires to the
CO; the analog signals from many such houses are translated back into digital format at the DSLAM."
373,"The residential telephone line carries both data and traditional telephone signals simultaneously, which
are encoded at different frequencies:
A high-speed downstream channel, in the 50 kHz to 1 MHz band
A medium-speed upstream channel, in the 4 kHz to 50 kHz band
An ordinary two-way telephone channel, in the 0 to 4 kHz band
This approach makes the single DSL link appear as if there were three separate links, so that atelephone call and an Internet connection can share the DSL link at the same time."
374,"Figure 1.5 DSL Internet access
(We’ll describe this technique of frequency-division multiplexing in Section 1.3.1.) On the customer side,
a splitter separates the data and telephone signals arriving to the home and forwards the data signal tothe DSL modem."
375,"On the telco side, in the CO, the DSLAM separates the data and phone signals and
sends the data into the Internet."
376,"Hundreds or even thousands of households connect to a single DSLAM
[Dischinger 2007]."
377,"The DSL standards define multiple transmission rates, including 12 Mbps downstream and 1.8 Mbps
upstream [ITU 1999], and 55 Mbps downstream and 15 Mbps upstream [ITU 2006]."
378,"Because the
downstream and upstream rates are different, the access is said to be asymmetric."
379,"The actual
downstream and upstream transmission rates achieved may be less than the rates noted above, as theDSL provider may purposefully limit a residential rate when tiered service (different rates, available atdifferent prices) are offered."
380,"The maximum rate is also limited by the distance between the home andthe CO, the gauge of the twisted-pair line and the degree of electrical interference."
381,"Engineers haveexpressly designed DSL for short distances between the home and the CO; generally, if the residence isnot located within 5 to 10 miles of the CO, the residence must resort to an alternative form of Internetaccess."
382,"While DSL makes use of the telco’s existing local telephone infrastructure, cable Internet access
makes use of the cable television company’s existing cable television infrastructure."
383,"A residence obtains
cable Internet access from the same company that provides its cable television."
384,"As illustrated in Figure
1.6, fiber optics connect the cable head end to neighborhood-level junctions, from which traditional
coaxial cable is then used to reach individual houses and apartments."
385,"Each neighborhood junction
typically supports 500 to 5,000 homes."
386,"Because both fiber and coaxial cable are employed in thissystem, it is often referred to as hybrid fiber coax (HFC)."
387,"Figure 1.6 A hybrid fiber-coaxial access network
Cable internet access requires special modems, called cable modems."
388,"As with a DSL modem, the cablemodem is typically an external device and connects to the home PC through an Ethernet port."
389,"(We will
discuss Ethernet in great detail in Chapter 6.) At the cable head end, the cable modem termination
system (CMTS) serves a similar function as the DSL network’s DSLAM—turning the analog signal sent
from the cable modems in many downstream homes back into digital format."
390,"Cable modems divide theHFC network into two channels, a downstream and an upstream channel."
391,"As with DSL, access is
typically asymmetric, with the downstream channel typically allocated a higher transmission rate than
the upstream channel."
392,"The ­DOCSIS 2.0 standard defines downstream rates up to 42.8 Mbps and
upstream rates of up to 30.7 Mbps."
393,"As in the case of DSL networks, the maximum achievable rate maynot be realized due to lower contracted data rates or media impairments."
394,One important characteristic of cable Internet access is that it is a shared broadcast medium.
395,"In
particular, every packet sent by the head end travels downstream on every link to every home and everypacket sent by a home travels on the upstream channel to the head end."
396,"For this reason, if severalusers are simultaneously downloading a video file on the downstream channel, the actual rate at which
each user receives its video file will be significantly lower than the aggregate cable downstream rate."
397,"On
the other hand, if there are only a few active users and they are all Web surfing, then each of the usersmay actually receive Web pages at the full cable downstream rate, because the users will rarely requesta Web page at exactly the same time."
398,"Because the upstream channel is also shared, a distributedmultiple access protocol is needed to coordinate transmissions and avoid collisions."
399,"(We’ll discuss this
collision issue in some detail in Chapter 6.)
Although DSL and cable networks currently represent more than 85 percent of residential broadband
access in the United States, an up-and-coming technology that provides even higher speeds is fiber to
the home (FTTH)  [FTTH Council 2016] ."
400,"As the name suggests, the FTTH concept is simple—provide
an optical fiber path from the CO directly to the home."
401,"Many countries today—including the UAE, South
Korea, Hong Kong, Japan, Singapore, Taiwan, Lithuania, and Sweden—now have household
penetration rates exceeding 30% [FTTH Council 2016] ."
402,There are several competing technologies for optical distribution from the CO to the homes.
403,"The
simplest optical distribution network is called direct fiber, with one fiber leaving the CO for each home.More commonly, each fiber leaving the central office is actually shared by many homes; it is not until the
fiber gets relatively close to the homes that it is split into individual customer-specific fibers."
404,"There are
two competing optical-distribution network architectures that perform this splitting: active opticalnetworks (AONs) and passive optical networks (PONs)."
405,"AON is essentially switched Ethernet, which is
discussed in Chapter 6."
406,"Here, we briefly discuss PON, which is used in Verizon’s FIOS service."
407,"Fig­ure 1.7 shows FTTH using
the PON distribution architecture."
408,"Each home has an optical network terminator (ONT), which is
connected by dedicated optical fiber to a neighborhood splitter."
409,"The splitter combines a number of
homes (typically lessFigure 1.7 FTTH Internet access
than 100) onto a single, shared optical fiber, which connects to an optical line ­terminator (OLT) in the
telco’s CO."
410,"The OLT, providing conversion between optical and electrical signals, connects to the
Internet via a telco router."
411,"In the home, users connect a home router (typically a wireless router) to theONT and access the ­Internet via this home router."
412,"In the PON architecture, all packets sent from OLTto the splitter are replicated at the splitter (similar to a cable head end)."
413,FTTH can potentially provide Internet access rates in the gigabits per second range.
414,"However, most
FTTH ISPs provide different rate offerings, with the higher rates naturally costing more money."
415,Theaverage downstream speed of US FTTH customers was approximately 20 Mbps in 2011 (comparedwith 13 Mbps for cable access networks and less than 5 Mbps for DSL) [FTTH Council 2011b].
416,Two other access network technologies are also used to provide Internet access to the home.
417,"In
locations where DSL, cable, and FTTH are not available (e.g., in some rural settings), a satellite link canbe used to connect a residence to the Internet at speeds of more than 1 Mbps; StarBand andHughesNet are two such satellite access providers."
418,"Dial-up access over traditional phone lines is basedon the same model as DSL—a home modem connects over a phone line to a modem in the ISP.Compared with DSL and other broadband access networks, dial-up access is excruciatingly slow at 56kbps."
419,"Access in the Enterprise (and the Home): Ethernet and WiFi
On corporate and university campuses, and increasingly in home settings, a local area network (LAN) is
used to connect an end system to the edge router."
420,"Although there are many types of LAN technologies,Ethernet is by far the most prevalent access technology in corporate, university, and home networks."
421,"As
shown in Figure 1.8, Ethernet users use twisted-pair copper wire to connect to an Ethernet switch, a
technology discussed in detail in Chapter 6."
422,"The Ethernet switch, or a network of suchFigure 1.8 Ethernet Internet access
interconnected switches, is then in turn connected into the larger Internet."
423,"With Ethernet access, users
typically have 100 Mbps or 1 Gbps access to the Ethernet switch, whereas servers may have 1 Gbps or
even 10 Gbps access."
424,"Increasingly, however, people are accessing the Internet wirelessly from laptops, smartphones, tablets,
and other “things” (see earlier sidebar on “ Internet of Things ”)."
425,"In a wireless LAN setting, wireless
users transmit/receive packets to/from an access point that is connected into the enterprise’s network
(most likely using wired Ethernet), which in turn is connected to the wired Internet."
426,A wireless LAN usermust typically be within a few tens of meters of the access point.
427,"Wireless LAN access based on IEEE802.11 technology, more colloquially known as WiFi, is now just about everywhere—universities,
business offices, cafes, airports, homes, and even in airplanes."
428,"In many cities, one can stand on a street
corner and be within range of ten or twenty base stations (for a browseable global map of 802.11 basestations that have been discovered and logged on a Web site by people who take great enjoyment in
doing such things, see [wigle.net 2016])."
429,"As discussed in detail in Chapter 7, 802.11 today provides a
shared transmission rate of up to more than 100 Mbps."
430,"Even though Ethernet and WiFi access networks were initially deployed in enterprise (corporate,
university) settings, they have recently become relatively common components of home networks."
431,"Many
homes combine broadband residential access (that is, cable modems or DSL) with these inexpensive
wireless LAN technologies to create powerful home networks [Edwards 2011]."
432,"Figure 1.9 shows a
typical home network."
433,"This home network consists of a roaming laptop as well as a wired PC; a base
station (the wireless access point), which communicates with the wireless PC and other wirelessdevices in the home; a cable modem, providing broadband access to the Internet; and a router, whichinterconnects the base station and the stationary PC with the cable modem."
434,This network allowshousehold members to have broadband access to the Internet with one member roaming from thekitchen to the backyard to the bedrooms.
435,"Figure 1.9 A typical home network
Wide-Area Wireless Access: 3G and LTE
Increasingly, devices such as iPhones and Android devices are being used to message, share photos in
social networks, watch movies, and stream music while on the run."
436,These devices employ the samewireless infrastructure used for cellular telephony to send/receive packets through a base station that isoperated by the cellular network provider.
437,"Unlike WiFi, a user need only be within a few tens ofkilometers (as opposed to a few tens of meters) of the base station."
438,"Telecommunications companies have made enormous investments in so-called third-generation (3G)
wireless, which provides packet-switched wide-area wireless Internet access at speeds in excess of 1
Mbps."
439,"But even higher-speed wide-area access technologies—a fourth-generation (4G) of wide-area
wireless networks—are already being deployed."
440,"LTE (for “Long-Term Evolution”—a candidate for BadAcronym of the Year Award) has its roots in 3G technology, and can achieve rates in excess of 10Mbps."
441,"LTE downstream rates of many tens of Mbps have been reported in commercial deployments.We’ll cover the basic principles of wireless networks and mobility, as well as WiFi, 3G, and LTE
technologies (and more!) in Chapter 7."
442,"1.2.2 Physical Media
In the previous subsection, we gave an overview of some of the most important network access
technologies in the Internet."
443,"As we described these technologies, we also indicated the physical mediaused."
444,"For example, we said that HFC uses a combination of fiber cable and coaxial cable."
445,We said thatDSL and Ethernet use copper wire.
446,And we said that mobile access networks use the radio spectrum.
447,"Inthis subsection we provide a brief overview of these and other transmission media that are commonly
used in the Internet.In order to define what is meant by a physical medium, let us reflect on the brief life of a bit."
448,"Consider a
bit traveling from one end system, through a series of links and routers, to another end system."
449,"Thispoor bit gets kicked around and transmitted many, many times! The source end system first transmits
the bit, and shortly thereafter the first router in the series receives the bit; the first router then transmitsthe bit, and shortly thereafter the second router receives the bit; and so on."
450,"Thus our bit, when traveling
from source to destination, passes through a series of transmitter-receiver pairs."
451,"For each transmitter-
receiver pair, the bit is sent by propagating electromagnetic waves or optical pulses across a physical
medium."
452,The physical medium can take many shapes and forms and does not have to be of the sametype for each transmitter-receiver pair along the path.
453,"Examples of physical media include twisted-paircopper wire, coaxial cable, multimode fiber-optic cable, terrestrial radio spectrum, and satellite radiospectrum."
454,Physical media fall into two categories: guided media  and unguided media .
455,"With guided
media, the waves are guided along a solid medium, such as a fiber-optic cable, a twisted-pair copperwire, or a coaxial cable."
456,"With unguided media, the waves propagate in the atmosphere and in outer
space, such as in a wireless LAN or a digital satellite channel."
457,"But before we get into the characteristics of the various media types, let us say a few words about their
costs."
458,"The actual cost of the physical link (copper wire, fiber-optic cable, and so on) is often relativelyminor compared with other networking costs."
459,"In particular, the labor cost associated with the installationof the physical link can be orders of magnitude higher than the cost of the material."
460,"For this reason,many builders install twisted pair, optical fiber, and coaxial cable in every room in a building."
461,"Even if onlyone medium is initially used, there is a good chance that another medium could be used in the nearfuture, and so money is saved by not having to lay additional wires in the future."
462,"Twisted-Pair Copper Wire
The least expensive and most commonly used guided transmission medium is twisted-pair copper wire."
463,For over a hundred years it has been used by telephone networks.
464,"In fact, more than 99 percent of thewired connections from the telephone handset to the local telephone switch use twisted-pair copperwire."
465,Most of us have seen twisted pair in our homes (or those of our parents or grandparents!) andwork environments.
466,"Twisted pair consists of two insulated copper wires, each about 1 mm thick,arranged in a regular spiral pattern."
467,"The wires are twisted together to reduce the electrical interference
from similar pairs close by."
468,"Typically, a number of pairs are bundled together in a cable by wrapping the
pairs in a protective shield."
469,A wire pair constitutes a single communication link.
470,"Unshielded twisted
pair (UTP) is commonly used for computer networks within a building, that is, for LANs. Data rates forLANs using twisted pair today range from 10 Mbps to 10 Gbps."
471,The data rates that can be achieveddepend on the thickness of the wire and the distance between transmitter and receiver.
472,"When fiber-optic technology emerged in the 1980s, many people disparaged twisted pair because of its
relatively low bit rates."
473,"Some people even felt that fiber-optic technology would completely replace
twisted pair."
474,But twisted pair did not give up so easily.
475,"Modern twisted-pair technology, such as category6a cable, can achieve data rates of 10 Gbps for distances up to a hundred meters."
476,"In the end, twisted
pair has emerged as the dominant solution for high-speed LAN networking."
477,"As discussed earlier, twisted pair is also commonly used for residential Internet access."
478,"We saw that
dial-up modem technology enables access at rates of up to 56 kbps over twisted pair."
479,"We also saw that
DSL (digital subscriber line) technology has enabled residential users to access the Internet at tens of
Mbps over twisted pair (when users live close to the ISP’s central office)."
480,"Coaxial Cable
Like twisted pair, coaxial cable consists of two copper conductors, but the two conductors are concentric
rather than parallel."
481,"With this construction and special insulation and shielding, coaxial cable canachieve high data transmission rates."
482,Coaxial cable is quite common in cable television systems.
483,"As wesaw earlier, cable television systems have recently been coupled with cable modems to provide
residential users with Internet access at rates of tens of Mbps."
484,"In cable television and cable Internet
access, the transmitter shifts the digital signal to a specific frequency band, and the resulting analogsignal is sent from the transmitter to one or more receivers."
485,Coaxial cable can be used as a guidedshared medium.
486,"Specifically, a number of end systems can be connected directly to the cable, witheach of the end systems receiving whatever is sent by the other end systems."
487,"Fiber Optics
An optical fiber is a thin, flexible medium that conducts pulses of light, with each pulse representing a
bit."
488,"A single optical fiber can support tremendous bit rates, up to tens or even hundreds of gigabits per
second."
489,"They are immune to electromagnetic interference, have very low signal attenuation up to 100kilometers, and are very hard to tap."
490,"These characteristics have made fiber optics the preferred long-haul guided transmission media, particularly for overseas links."
491,Many of the long-distance telephonenetworks in the United States and elsewhere now use fiber optics exclusively.
492,Fiber optics is alsoprevalent in the backbone of the Internet.
493,"However, the high cost of optical devices—such astransmitters, receivers, and switches—has hindered their deployment for short-haul transport, such as ina LAN or into the home in a residential access network."
494,"The Optical Carrier (OC) standard link speeds
range from 51.8 Mbps to 39.8 Gbps; these specifications are often referred to as OC- n, where the link
speed equals n ∞ 51.8 Mbps."
495,"Standards in use today include OC-1, OC-3, OC-12, OC-24, OC-48, OC-
96, OC-192, OC-768."
496,"[Mukherjee 2006 , Ramaswami 2010]  provide coverage of various aspects of
optical networking."
497,"Terrestrial Radio Channels
Radio channels carry signals in the electromagnetic spectrum."
498,"They are an attractive medium because
they require no physical wire to be installed, can penetrate walls, provide connectivity to a mobile user,and can potentially carry a signal for long distances."
499,"The characteristics of a radio channel depend
significantly on the propagation environment and the distance over which a signal is to be carried."
500,"Environmental considerations determine path loss and shadow fading (which decrease the signalstrength as the signal travels over a distance and around/through obstructing objects), multipath fading(due to signal reflection off of interfering objects), and interference (due to other transmissions and
electromagnetic signals)."
501,"Terrestrial radio channels can be broadly classified into three groups: those that operate over very short
distance (e.g., with one or two meters); those that operate in local areas, typically spanning from ten to afew hundred meters; and those that operate in the wide area, spanning tens of kilometers."
502,"Personaldevices such as wireless headsets, keyboards, and medical devices operate over short distances; the
wireless LAN technologies described in Section 1.2.1 use local-area radio channels; the cellular access
technologies use wide-area radio channels."
503,We’ll discuss radio channels in detail in Chapter 7.
504,"Satellite Radio Channels
A communication satellite links two or more Earth-based microwave transmitter/ receivers, known as
ground stations."
505,"The satellite receives transmissions on one frequency band, regenerates the signalusing a repeater (discussed below), and transmits the signal on another frequency."
506,"Two types ofsatellites are used in communications: geostationary satellites and low-earth orbiting (LEO)
satellites  [Wiki Satellite 2016]."
507,Geostationary satellites permanently remain above the same spot on Earth.
508,"This stationary presence isachieved by placing the satellite in orbit at 36,000 kilometers above Earth’s surface."
509,This huge distancefrom ground station through satellite back to ground station introduces a substantial signal propagationdelay of 280 milliseconds.
510,"Nevertheless, satellite links, which can operate at speeds of hundreds ofMbps, are often used in areas without access to DSL or cable-based Internet access."
511,LEO satellites are placed much closer to Earth and do not remain permanently above one spot on Earth.
512,"They rotate around Earth (just as the Moon does) and may communicate with each other, as well aswith ground stations."
513,"To provide continuous coverage to an area, many satellites need to be placed in
orbit."
514,There are currently many low-altitude communication systems in development.
515,"LEO satellite
technology may be used for Internet access sometime in the future.1.3 The Network Core
Having examined the Internet’s edge, let us now delve more deeply inside the network core—the mesh
of packet switches and links that interconnects the Internet’s end systems."
516,"Figure 1.10 highlights the
network core with thick, shaded lines."
517,"Figure 1.10 The network core
1.3.1 Packet Switching
In a network application, end systems exchange messages  with each other."
518,"Messages can contain
anything the application designer wants."
519,"Messages may perform a control function (for example, the “Hi”
messages in our handshaking example in Figure 1.2) or can contain data, such as an e-mail message,
a JPEG image, or an MP3 audio file."
520,"To send a message from a source end system to a destination end
system, the source breaks long messages into smaller chunks of data known as packets ."
521,"Between
source and destination, each packet travels through communication links and packet switches (for
which there are two predominant types, routers and link-layer switches)."
522,"Packets are transmitted over
each communication link at a rate equal to the full transmission rate of the link."
523,"So, if a source end
system or a packet switch is sending a packet of L bits over a link with transmission rate R bits/sec, then
the time to transmit the packet is L / R seconds."
524,Store-and-Forward TransmissionMost packet switches use store-and-forward transmission at the inputs to the links.
525,"Store-and-forward
transmission means that the packet switch must receive the entire packet before it can begin to transmit
the first bit of the packet onto the outbound link."
526,"To explore store-and-forward transmission in moredetail, consider a simple network consisting of two end systems connected by a single router, as shown
in Figure 1.11."
527,"A router will typically have many incident links, since its job is to switch an incoming
packet onto an outgoing link; in this simple example, the router has the rather simple task of transferring
a packet from one (input) link to the only other attached link."
528,"In this example, the source has three
packets, each consisting of L bits, to send to the destination."
529,"At the snapshot of time shown in Figure
1.11, the source has transmitted some of packet 1, and the front of packet 1 has already arrived at the
router."
530,"Because the router employs store-and-forwarding, at this instant of time, the router cannot
transmit the bits it has received; instead it must first buffer (i.e., “store”) the packet’s bits."
531,"Only after the
router has received all of the packet’s bits can it begin to transmit (i.e., “forward”) the packet onto the
outbound link."
532,"To gain some insight into store-and-forward transmission, let’s now calculate the amount
of time that elapses from when the source begins to send the packet until the destination has receivedthe entire packet."
533,"(Here we will ignore propagation delay—the time it takes for the bits to travel across
the wire at near the speed of light—which will be discussed in Section 1.4.) The source begins to
transmit at time 0; at time L/R seconds, the source has transmitted the entire packet, and the entire
packet has been received and stored at the router (since there is no propagation delay)."
534,"At time L/R
seconds, since the router has just received the entire packet, it can begin to transmit the packet onto theoutbound link towards the destination; at time 2 L/R, the router has transmitted the entire packet, and theentire packet has been received by the destination."
535,"Thus, the total delay is 2 L/R."
536,"If the
Figure 1.11 Store-and-forward packet switching
switch instead forwarded bits as soon as they arrive (without first receiving the entire packet), then the
total delay would be L/R since bits are not held up at the router."
537,"But, as we will discuss in Section 1.4,
routers need to receive, store, and process the entire packet before forwarding."
538,Now let’s calculate the amount of time that elapses from when the source begins to send the first packetuntil the destination has received all three packets.
539,"As before, at time L/R, the router begins to forward
the first packet."
540,"But also at time L/R the source will begin to send the second packet, since it has just
finished sending the entire first packet."
541,"Thus, at time 2 L/R, the destination has received the first packet
and the router has received the second packet."
542,"Similarly, at time 3 L/R, the destination has received the
first two packets and the router has received the third packet."
543,"Finally, at time 4 L/R the destination has
received all three packets!
Let’s now consider the general case of sending one packet from source to destination over a path
consisting of N links each of rate R (thus, there are N-1 routers between source and destination)."
544,"Applying the same logic as above, we see that the end-to-end delay is:
You may now want to try to determine what the delay would be for P packets sent over a series of N
links."
545,"Queuing Delays and Packet Loss
Each packet switch has multiple links attached to it."
546,"For each attached link, the packet switch has an
output buffer  (also called an output queue ), which stores packets that the router is about to send into
that link."
547,The output buffers play a key role in packet switching.
548,"If an arriving packet needs to betransmitted onto a link but finds the link busy with the transmission of another packet, the arriving packet
must wait in the output buffer."
549,"Thus, in addition to the store-and-forward delays, packets suffer output
buffer queuing delays ."
550,"These delays are variable and depend on the level of congestion in the network.dend-to-end =NLR (1.1)Since the amount of buffer space is finite, an
Figure 1.12 Packet switching
arriving packet may find that the buffer is completely full with other packets waiting for transmission."
551,"In
this case, packet loss will occur—either the arriving packet or one of the already-queued packets will
be dropped."
552,Figure 1.12 illustrates a simple packet-switched network.
553,"As in Figure 1.11, packets are represented by
three-dimensional slabs."
554,The width of a slab represents the number of bits in the packet.
555,"In this figure,
all packets have the same width and hence the same length."
556,Suppose Hosts A and B are sendingpackets to Host E.
557,Hosts A and B first send their packets along 100 Mbps Ethernet links to the firstrouter.
558,The router then directs these packets to the 15 Mbps link.
559,"If, during a short interval of time, thearrival rate of packets to the router (when converted to bits per second) exceeds 15 Mbps, congestion
will occur at the router as packets queue in the link’s output buffer before being transmitted onto the link."
560,"For example, if Host A and B each send a burst of five packets back-to-back at the same time, thenmost of these packets will spend some time waiting in the queue."
561,"The situation is, in fact, entirelyanalogous to many common-day situations—for example, when we wait in line for a bank teller or wait in
front of a tollbooth."
562,"We’ll examine this queuing delay in more detail in Section 1.4.
Forwarding Tables and Routing Protocols
Earlier, we said that a router takes a packet arriving on one of its attached communication links and
forwards that packet onto another one of its attached communication links."
563,"But how does the router
determine which link it should forward the packet onto?"
564,Packet forwarding is actually done in differentways in different types of computer networks.
565,"Here, we briefly describe how it is done in the Internet.In the Internet, every end system has an address called an IP address."
566,"When a source end system
wants to send a packet to a destination end system, the source includes the destination’s IP address inthe packet’s header."
567,"As with postal addresses, this address has a hierarchical structure."
568,"When a packetarrives at a router in the network, the router examines a portion of the packet’s destination address andforwards the packet to an adjacent router."
569,"More specifically, each router has a forwarding table  that
maps destination addresses (or portions of the destination addresses) to that router’s outbound links.When a packet arrives at a router, the router examines the address and searches its forwarding table,using this destination address, to find the appropriate outbound link."
570,The router then directs the packetto this outbound link.
571,"The end-to-end routing process is analogous to a car driver who does not use maps but instead prefers
to ask for directions."
572,"For example, suppose Joe is driving from Philadelphia to 156 Lakeside Drive inOrlando, Florida."
573,"Joe first drives to his neighborhood gas station and asks how to get to 156 Lakeside
Drive in Orlando, Florida."
574,"The gas station attendant extracts the Florida portion of the address and tells
Joe that he needs to get onto the interstate highway I-95 South, which has an entrance just next to thegas station."
575,"He also tells Joe that once he enters Florida, he should ask someone else there."
576,"Joe thentakes I-95 South until he gets to Jacksonville, Florida, at which point he asks another gas stationattendant for directions."
577,The attendant extracts the Orlando portion of the address and tells Joe that heshould continue on I-95 to Daytona Beach and then ask someone else.
578,"In Daytona Beach, another gasstation attendant also extracts the Orlando portion of the address and tells Joe that he should take I-4directly to Orlando."
579,Joe takes I-4 and gets off at the Orlando exit.
580,"Joe goes to another gas stationattendant, and this time the attendant extracts the Lakeside Drive portion of the address and tells Joe
the road he must follow to get to Lakeside Drive."
581,"Once Joe reaches Lakeside Drive, he asks a kid on a
bicycle how to get to his destination."
582,The kid extracts the 156 portion of the address and points to thehouse.
583,Joe finally reaches his ultimate destination.
584,"In the above analogy, the gas station attendants andkids on bicycles are analogous to routers."
585,"We just learned that a router uses a packet’s destination address to index a forwarding table and
determine the appropriate outbound link."
586,But this statement begs yet another question: How doforwarding tables get set?
587,"Are they configured by hand in each and every router, or does the Internet
use a more automated procedure?"
588,This issue will be studied in depth in Chapter 5.
589,"But to whet your
appetite here, we’ll note now that the Internet has a number of special routing protocols  that are used
to automatically set the forwarding tables."
590,"A routing protocol may, for example, determine the shortest
path from each router to each destination and use the shortest path results to configure the forwardingtables in the routers."
591,How would you actually like to see the end-to-end route that packets take in the Internet?
592,"We now invite
you to get your hands dirty by interacting with the Trace-route program."
593,"Simply visit the site
www.traceroute.org, choose a source in a particular country, and trace the route from that source to
your computer."
594,"(For a discussion of Traceroute, see Section 1.4.)1.3.2 Circuit Switching
There are two fundamental approaches to moving data through a network of links and switches: circuit
switching  and packet switching."
595,"Having covered packet-switched networks in the previous
subsection, we now turn our attention to circuit-switched networks."
596,"In circuit-switched networks, the resources needed along a path (buffers, link transmission rate) to
provide for communication between the end systems are reserved  for the duration of the communication
session between the end systems."
597,"In packet-switched networks, these resources are not reserved; a
session’s messages use the resources on demand and, as a consequence, may have to wait (that is,
queue) for access to a communication link."
598,"As a simple analogy, consider two restaurants, one thatrequires reservations and another that neither requires reservations nor accepts them."
599,"For therestaurant that requires reservations, we have to go through the hassle of calling before we leave home.But when we arrive at the restaurant we can, in principle, immediately be seated and order our meal.For the restaurant that does not require reservations, we don’t need to bother to reserve a table."
600,"But
when we arrive at the restaurant, we may have to wait for a table before we can be seated."
601,Traditional telephone networks are examples of circuit-switched networks.
602,"­Consider what happens
when one person wants to send information (voice or facsimile) to another over a telephone network."
603,"Before the sender can send the information, the network must establish a connection between the
sender and the receiver."
604,"This is a bona fide  connection for which the switches on the path between the
sender and receiver maintain connection state for that connection."
605,"In the jargon of telephony, this
connection is called a circuit."
606,"When the network establishes the circuit, it also reserves a constant
transmission rate in the network’s links (representing a fraction of each link’s transmission capacity) for
the duration of the connection."
607,"Since a given transmission rate has been reserved for this sender-to-
receiver connection, the sender can transfer the data to the receiver at the guaranteed  constant rate."
608,Figure 1.13 illustrates a circuit-switched network.
609,"In this network, the four circuit switches are
interconnected by four links."
610,"Each of these links has four circuits, so that each link can support four
simultaneous connections."
611,"The hosts (for example, PCs and workstations) are each directly connectedto one of the switches."
612,"When two hosts want to communicate, the network establishes a dedicated end-
to-end connection  between the two hosts."
613,"Thus, in order for Host A to communicate with Host B, the
network must first reserve one circuit on each of two links."
614,"In this example, the dedicated end-to-endconnection uses the second circuit in the first link and the fourth circuit in the second link."
615,"Because eachlink has four circuits, for each link used by the end-to-end connection, the connection gets one fourth ofthe link’s total transmission capacity for the duration of the connection."
616,"Thus, for example, if each linkbetween adjacent switches has a transmission rate of 1 Mbps, then each end-to-end circuit-switchconnection gets 250 kbps of dedicated transmission rate.Figure 1.13 A simple circuit-switched network consisting of four switches and four links
In contrast, consider what happens when one host wants to send a packet to another host over a
packet-switched network, such as the Internet."
617,"As with circuit switching, the packet is transmitted over a
series of communication links."
618,"But different from circuit switching, the packet is sent into the networkwithout reserving any link resources whatsoever."
619,"If one of the links is congested because other packetsneed to be transmitted over the link at the same time, then the packet will have to wait in a buffer at thesending side of the transmission link and suffer a delay."
620,"The Internet makes its best effort to deliverpackets in a timely manner, but it does not make any guarantees."
621,"Multiplexing in Circuit-Switched Networks
A circuit in a link is implemented with either frequency-division multiplexing (FDM)  or time-division
multiplexing (TDM) ."
622,"With FDM, the frequency spectrum of a link is divided up among the connections
established across the link."
623,"Specifically, the link dedicates a frequency band to each connection for the
duration of the connection."
624,"In telephone networks, this frequency band typically has a width of 4 kHz(that is, 4,000 hertz or 4,000 cycles per second)."
625,"The width of the band is called, not surprisingly, the
bandwidth ."
626,"FM radio stations also use FDM to share the frequency spectrum between 88 MHz and 108
MHz, with each station being allocated a specific frequency band."
627,"For a TDM link, time is divided into frames of fixed duration, and each frame is divided into a fixed
number of time slots."
628,"When the network establishes a connection across a link, the network dedicates
one time slot in every frame to this connection."
629,"These slots are dedicated for the sole use of thatconnection, with one time slot available for use (in every frame) to transmit the connection’s data."
630,"
Figure 1.14
With FDM, each circuit continuously gets a fraction of the bandwidth."
631,"With TDM, each circuit gets all of
the bandwidth periodically during brief intervals of time (that is, during slots)
Figure 1.14 illustrates FDM and TDM for a specific network link supporting up to four circuits."
632,"For FDM,
the frequency domain is segmented into four bands, each of bandwidth 4 kHz. For TDM, the time
domain is segmented into frames, with four time slots in each frame; each circuit is assigned the samededicated slot in the revolving TDM frames."
633,"For TDM, the transmission rate of a circuit is equal to theframe rate multiplied by the number of bits in a slot."
634,"For example, if the link transmits 8,000 frames persecond and each slot consists of 8 bits, then the transmission rate of each circuit is 64 kbps."
635,"Proponents of packet switching have always argued that circuit switching is wasteful because the
dedicated circuits are idle during silent periods ."
636,"For example, when one person in a telephone call
stops talking, the idle network resources (frequency bands or time slots in the links along the
connection’s route) cannot be used by other ongoing connections."
637,"As another example of how theseresources can be underutilized, consider a radiologist who uses a circuit-switched network to remotelyaccess a series of x-rays."
638,"The radiologist sets up a connection, requests an image, contemplates theimage, and then requests a new image."
639,"Network resources are allocated to the connection but are notused (i.e., are wasted) during the radiologist’s contemplation periods."
640,"Proponents of packet switchingalso enjoy pointing out that establishing end-to-end circuits and reserving end-to-end transmission
capacity is complicated and requires complex signaling software to coordinate the operation of the
switches along the end-to-end path."
641,"Before we finish our discussion of circuit switching, let’s work through a numerical example that should
shed further insight on the topic."
642,"Let us consider how long it takes to send a file of 640,000 bits fromHost A to Host B over a circuit-switched network."
643,Suppose that all links in the network use TDM with 24slots and have a bit rate of 1.536 Mbps.
644,Also suppose that it takes 500 msec to establish an end-to-endcircuit before Host A can begin to transmit the file.
645,How long does it take to send the file?
646,"Each circuithas a transmission rate of  so it takes  seconds to
transmit the file."
647,"To this 10 seconds we add the circuit establishment time, giving 10.5 seconds to sendthe file."
648,Note that the transmission time is independent of the number of links: The transmission timewould be 10 seconds if the end-to-end circuit passed through one link or a hundred links.
649,"(The actual
(1.536 Mbps)/24=64 kbps, (640,000 bits)/(64 kbps)=10end-to-end delay also includes a propagation delay; see Section 1.4.)
Packet Switching Versus Circuit Switching
Having described circuit switching and packet switching, let us compare the two."
650,"Critics of packet
switching have often argued that packet switching is not suitable for real-time services (for example,
telephone calls and video conference calls) because of its variable and unpredictable end-to-end delays(due primarily to variable and unpredictable queuing delays)."
651,"Proponents of packet switching argue that(1) it offers better sharing of transmission capacity than circuit switching and (2) it is simpler, moreefficient, and less costly to implement than circuit switching."
652,"An interesting discussion of packet
switching versus circuit switching is [Molinero-Fernandez 2002]."
653,"Generally speaking, people who do
not like to hassle with ­restaurant reservations prefer packet switching to circuit switching."
654,Why is packet switching more efficient?
655,Let’s look at a simple example.
656,"Suppose users share a 1 Mbps
link."
657,"Also suppose that each user alternates between periods of activity, when a user generates data ata constant rate of 100 kbps, and periods of inactivity, when a user generates no data."
658,"Suppose furtherthat a user is active only 10 percent of the time (and is idly drinking coffee during the remaining 90
percent of the time)."
659,"With circuit switching, 100 kbps must be reserved  for each user at all times."
660,"For
example, with circuit-switched TDM, if a one-second frame is divided into 10 time slots of 100 ms each,
then each user would be allocated one time slot per frame."
661,"Thus, the circuit-switched link can support only  simultaneous users."
662,"With packet
switching, the probability that a specific user is active is 0.1 (that is, 10 percent)."
663,"If there are 35 users,
the probability that there are 11 or more simultaneously active users is approximately 0.0004."
664,"(Homework Problem P8 outlines how this probability is obtained.) When there are 10 or fewer
simultaneously active users (which happens with probability 0.9996), the aggregate arrival rate of data is
less than or equal to 1 Mbps, the output rate of the link."
665,"Thus, when there are 10 or fewer active users,users’ packets flow through the link essentially without delay, as is the case with circuit switching."
666,"When
there are more than 10 simultaneously active users, then the aggregate arrival rate of packets exceedsthe output capacity of the link, and the output queue will begin to grow."
667,"(It continues to grow until the
aggregate input rate falls back below 1 Mbps, at which point the queue will begin to diminish in length.)
Because the probability of having more than 10 simultaneously active users is minuscule in this
example, packet switching provides essentially the same performance as circuit switching, but does so
while allowing for more than three times the number of users."
668,Let’s now consider a second simple example.
669,"Suppose there are 10 users and that one user suddenly
generates one thousand 1,000-bit packets, while other users remain quiescent and do not generatepackets."
670,"Under TDM circuit switching with 10 slots per frame and each slot consisting of 1,000 bits, theactive user can only use its one time slot per frame to transmit data, while the remaining nine time slots
in each frame remain idle."
671,It will be 10 seconds before all of the active user’s one million bits of data has10(=1 Mbps/100 kbps)been transmitted.
672,"In the case of packet switching, the active user can continuously send its packets at
the full link rate of 1 Mbps, since there are no other users generating packets that need to be
multiplexed with the active user’s packets."
673,"In this case, all of the active user’s data will be transmittedwithin 1 second."
674,"The above examples illustrate two ways in which the performance of packet switching can be superior to
that of circuit switching."
675,"They also highlight the crucial difference between the two forms of sharing a
link’s transmission rate among multiple data streams."
676,"Circuit switching pre-allocates use of thetransmission link regardless of demand, with allocated but unneeded link time going unused."
677,"Packet
switching on the other hand allocates link use on demand."
678," Link transmission capacity will be shared on
a packet-by-packet basis only among those users who have packets that need to be transmitted over
the link."
679,"Although packet switching and circuit switching are both prevalent in today’s telecommunication
networks, the trend has certainly been in the direction of packet switching."
680,"Even many of today’s circuit-
switched telephone networks are slowly migrating toward packet switching."
681,"In particular, telephonenetworks often use packet switching for the expensive overseas portion of a telephone call."
682,"1.3.3 A Network of Networks
We saw earlier that end systems (PCs, smartphones, Web servers, mail servers, and so on) connectinto the Internet via an access ISP."
683,"The access ISP can provide either wired or wireless connectivity,using an array of access technologies including DSL, cable, FTTH, Wi-Fi, and cellular."
684,"Note that theaccess ISP does not have to be a telco or a cable company; instead it can be, for example, a university(providing Internet access to students, staff, and faculty), or a company (providing access for its
employees)."
685,"But connecting end users and content providers into an access ISP is only a small piece of
solving the puzzle of connecting the billions of end systems that make up the Internet."
686,"To complete this
puzzle, the access ISPs themselves must be interconnected."
687,"This is done by creating a network of
networks—understanding this phrase is the key to understanding the Internet."
688,"Over the years, the network of networks that forms the Internet has evolved into a very complex
structure."
689,"Much of this evolution is driven by economics and national policy, rather than by performanceconsiderations."
690,"In order to understand today’s Internet network structure, let’s incrementally build a
series of network structures, with each new structure being a better approximation of the complex
Internet that we have today."
691,Recall that the overarching goal is to interconnect the access ISPs so thatall end systems can send packets to each other.
692,"One naive approach would be to have each access
ISP directly connect with every other access ISP."
693,"Such a mesh design is, of course, much too costly for
the access ISPs, as it would require each access ISP to have a separate communication link to each of
the hundreds of thousands of other access ISPs all over the world.Our first network structure, Network Structure 1, interconnects all of the access ISPs with a single  global
transit ISP."
694,"Our (imaginary) global transit ISP is a network of routers and communication links that not
only spans the globe, but also has at least one router near each of the hundreds of thousands of access
ISPs. Of course, it would be very costly for the global ISP to build such an extensive network."
695,"To be
profitable, it would naturally charge each of the access ISPs for connectivity, with the pricing reflecting
(but not necessarily directly proportional to) the amount of traffic an access ISP exchanges with theglobal ISP."
696,"Since the access ISP pays the global transit ISP, the access ISP is said to be a customer
and the global transit ISP is said to be a provider."
697,"Now if some company builds and operates a global transit ISP that is profitable, then it is natural forother companies to build their own global transit ISPs and compete with the original global transit ISP."
698,"This leads to Network Structure 2, which consists of the hundreds of thousands of access ISPs and
multiple  global ­transit ISPs. The access ISPs certainly prefer Network Structure 2 over Network
Structure 1 since they can now choose among the competing global transit providers as a function oftheir pricing and services."
699,"Note, however, that the global transit ISPs themselves must interconnect:Otherwise access ISPs connected to one of the global transit providers would not be able tocommunicate with access ISPs connected to the other global transit providers."
700,"Network Structure 2, just described, is a two-tier hierarchy with global transit providers residing at the
top tier and access ISPs at the bottom tier."
701,"This assumes that global transit ISPs are not only capable ofgetting close to each and every access ISP, but also find it economically desirable to do so."
702,"In reality,
although some ISPs do have impressive global coverage and do directly connect with many access
ISPs, no ISP has presence in each and every city in the world."
703,"Instead, in any given region, there maybe a regional ISP  to which the access ISPs in the region connect."
704,"Each regional ISP then connects to
tier-1 ISPs. Tier-1 ISPs are similar to our (imaginary) global transit ISP; but tier-1 ISPs, which actuallydo exist, do not have a presence in every city in the world."
705,"There are approximately a dozen tier-1 ISPs,including Level 3 Communications, AT&T, Sprint, and NTT."
706,"Interestingly, no group officially sanctions
tier-1 status; as the saying goes—if you have to ask if you’re a member of a group, you’re probably not."
707,"Returning to this network of networks, not only are there multiple competing tier-1 ISPs, there may be
multiple competing regional ISPs in a region."
708,"In such a hierarchy, each access ISP pays the regional
ISP to which it connects, and each regional ISP pays the tier-1 ISP to which it connects."
709,"(An access ISPcan also connect directly to a tier-1 ISP, in which case it pays the tier-1 ISP)."
710,"Thus, there is customer-provider relationship at each level of the hierarchy."
711,Note that the tier-1 ISPs do not pay anyone as theyare at the top of the hierarchy.
712,"To further complicate matters, in some regions, there may be a largerregional ISP (possibly spanning an entire country) to which the smaller regional ISPs in that regionconnect; the larger regional ISP then connects to a tier-1 ISP."
713,"For example, in China, there are accessISPs in each city, which connect to provincial ISPs, which in turn connect to national ISPs, which finally
connect to tier-1 ISPs [Tian 2012]."
714,"We refer to this multi-tier hierarchy, which is still only a crudeapproximation of today’s Internet, as Network Structure 3."
715,"To build a network that more closely resembles today’s Internet, we must add points of presence
(PoPs), multi-homing, peering, and Internet exchange points (IXPs) to the hierarchical NetworkStructure 3."
716,"PoPs exist in all levels of the hierarchy, except for the bottom (access ISP) level."
717,"A PoP is
simply a group of one or more routers (at the same location) in the provider’s network where customerISPs can connect into the provider ISP."
718,"For a customer network to connect to a provider’s PoP, it can
lease a high-speed link from a third-party telecommunications provider to directly connect one of its
routers to a router at the PoP."
719,"Any ISP (except for tier-1 ISPs) may choose to multi-home, that is, to
connect to two or more provider ISPs. So, for example, an access ISP may multi-home with two regionalISPs, or it may multi-home with two regional ISPs and also with a tier-1 ISP."
720,"Similarly, a regional ISPmay multi-home with multiple tier-1 ISPs. When an ISP multi-homes, it can continue to send and receivepackets into the Internet even if one of its providers has a failure."
721,"As we just learned, customer ISPs pay their provider ISPs to obtain global Internet interconnectivity."
722,"The
amount that a customer ISP pays a provider ISP reflects the amount of traffic it exchanges with the
provider."
723,"To reduce these costs, a pair of nearby ISPs at the same level of the hierarchy can peer, that
is, they can directly connect their networks together so that all the traffic between them passes over thedirect connection rather than through upstream intermediaries."
724,"When two ISPs peer, it is typicallysettlement-free, that is, neither ISP pays the other."
725,"As noted earlier, tier-1 ISPs also peer with oneanother, settlement-free."
726,"For a readable discussion of peering and customer-provider relationships, see
[Van der Berg 2008] ."
727,"Along these same lines, a third-party company can create an Internet Exchange
Point (IXP) , which is a meeting point where multiple ISPs can peer together."
728,"An IXP is typically in a
stand-alone building with its own switches [Ager 2012] ."
729,"There are over 400 IXPs in the Internet today
[IXP List 2016]."
730,"We refer to this ecosystem—consisting of access ISPs, regional ISPs, tier-1 ISPs,
PoPs, multi-homing, peering, and IXPs—as Network Structure 4."
731,"We now finally arrive at Network Structure 5, which describes today’s Internet."
732,"Network Structure 5,
illustrated in Figure 1.15, builds on top of Network Structure 4 by adding content-provider networks ."
733,Google is currently one of the leading examples of such a content-provider network.
734,"As of this writing, itis estimated that Google has 50–100 data centers distributed across North America, Europe, Asia,South America, and Australia."
735,"Some of these data centers house over one hundred thousand servers,
while other data centers are smaller, housing only hundreds of servers."
736,"The Google data centers are all
interconnected via Google’s private TCP/IP network, which spans the entire globe but is neverthelessseparate from the public Internet."
737,"Importantly, the Google private network only carries traffic to/from
Google servers."
738,"As shown in Figure 1.15, the Google private network attempts to “bypass” the upper
tiers of the Internet by peering (settlement free) with lower-tier ISPs, either by directly connecting withthem or by connecting with them at IXPs [Labovitz 2010]."
739,"However, because many access ISPs can
still only be reached by transiting through tier-1 networks, the Google network also connects to tier-1
ISPs, and pays those ISPs for the traffic it exchanges with them."
740,"By creating its own network, a contentprovider not only reduces its payments to upper-tier ISPs, but also has greater control of how its
services are ultimately delivered to end users."
741,"Google’s network infrastructure is described in greater
detail in Section 2.6.
In summary, today’s Internet—a network of networks—is complex, consisting of a dozen or so tier-1
ISPs and hundreds of thousands of lower-tier ISPs. The ISPs are diverse in their coverage, with some
spanning multiple continents and oceans, and others limited to narrow geographic regions."
742,"The lower-
tier ISPs connect to the higher-tier ISPs, and the higher-tier ISPs interconnect with one another."
743,"Usersand content providers are customers of lower-tier ISPs, and lower-tier ISPs are customers of higher-tierISPs. In recent years, major content providers have also created their own networks and connectdirectly into lower-tier ISPs where possible."
744,"Figure 1.15 Interconnection of ISPs1.4 Delay, Loss, and Throughput in Packet-Switched Networks
Back in Section 1.1 we said that the Internet can be viewed as an infrastructure that provides services
to distributed applications running on end systems."
745,"Ideally, we would like Internet services to be able to
move as much data as we want between any two end systems, instantaneously, without any loss ofdata."
746,"Alas, this is a lofty goal, one that is unachievable in reality."
747,"Instead, computer networks necessarily
constrain throughput (the amount of data per second that can be transferred) between end systems,
introduce delays between end systems, and can actually lose packets."
748,"On one hand, it is unfortunatethat the physical laws of reality introduce delay and loss as well as constrain throughput."
749,"On the otherhand, because computer networks have these problems, there are many fascinating issues surroundinghow to deal with the problems—more than enough issues to fill a course on computer networking and tomotivate thousands of PhD theses! In this section, we’ll begin to examine and quantify delay, loss, andthroughput in computer networks."
750,"1.4.1 Overview of Delay in Packet-Switched Networks
Recall that a packet starts in a host (the source), passes through a series of routers, and ends itsjourney in another host (the destination)."
751,"As a packet travels from one node (host or router) to the
subsequent node (host or router) along this path, the packet suffers from several types of delays at each
node along the path."
752,"The most important of these delays are the nodal processing delay , queuing
delay, transmission delay, and propagation delay ; together, these delays accumulate to give a total
nodal delay ."
753,"The performance of many Internet applications—such as search, Web browsing, e-mail,
maps, instant messaging, and voice-over-IP—are greatly affected by network delays."
754,"In order to acquire
a deep understanding of packet switching and computer networks, we must understand the nature andimportance of these delays."
755,Types of DelayLet’s explore these delays in the context of Figure 1.16.
756,"As part of its end-to-end route between source
and destination, a packet is sent from the upstream node through router A to router B."
757,"Our goal is to
characterize the nodal delay at router A."
758,Note that router A has an outbound link leading to router B.
759,This link is preceded by a queue (also known as a buffer).
760,"When the packet arrives at router A from theupstream node, router A examines the packet’s header to determine the appropriate outbound link forthe packet and then directs the packet to this link."
761,"In this example, the outbound link for the packet is theone that leads to router B."
762,"A packet can be transmitted on a link only if there is no other packet currentlybeing transmitted on the link and if there are no other packets preceding it in the queue; if the link is
Figure 1.16 The nodal delay at router A
currently busy or if there are other packets already queued for the link, the newly arriving packet will
then join the queue."
763,"Processing Delay
The time required to examine the packet’s header and determine where to direct the packet is part of
the processing delay."
764,"The processing delay can also include other factors, such as the time needed tocheck for bit-level errors in the packet that occurred in transmitting the packet’s bits from the upstreamnode to router A."
765,"Processing delays in high-speed routers are typically on the order of microseconds or
less."
766,"After this nodal processing, the router directs the packet to the queue that precedes the link to
router B."
767,"(In Chapter 4 we’ll study the details of how a router operates.)
Queuing Delay
At the queue, the packet experiences a queuing delay  as it waits to be transmitted onto the link."
768,"The
length of the queuing delay of a specific packet will depend on the number of earlier-arriving packets
that are queued and waiting for transmission onto the link."
769,"If the queue is empty and no other packet is
currently being transmitted, then our packet’s queuing delay will be zero."
770,"On the other hand, if the trafficis heavy and many other packets are also waiting to be transmitted, the queuing delay will be long."
771,Wewill see shortly that the number of packets that an arriving packet might expect to find is a function of theintensity and nature of the traffic arriving at the queue.
772,"­Queuing delays can be on the order of
microseconds to milliseconds in practice."
773,"Transmission Delay
Assuming that packets are transmitted in a first-come-first-served manner, as is common in packet-
switched networks, our packet can be transmitted only after all the packets that have arrived before it
have been transmitted."
774,"Denote the length of the packet by L bits, and denote the transmission rate ofthe link from router A to router B by R bits/sec."
775,"For example, for a 10 Mbps Ethernet link, the rate is
 for a 100 Mbps Ethernet link, the rate is  The transmission delay  is L/R."
776,"This
is the amount of time required to push (that is, transmit) all of the packet’s bits into the link."
777,Transmission delays are typically on the order of microseconds to milliseconds in practice.
778,"Propagation Delay
Once a bit is pushed into the link, it needs to propagate to router B."
779,"The time required to propagate from
the beginning of the link to router B is the propagation delay ."
780,"The bit propagates at the propagation
speed of the link."
781,"The propagation speed depends on the physical medium of the link (that is, fiberoptics, twisted-pair copper wire, and so on) and is in the range of
which is equal to, or a little less than, the speed of light."
782,"The propagation delay is the distance between
two routers divided by the propagation speed."
783,"That is, the propagation delay is d/s, where d is the
distance between router A and router B and s is the propagation speed of the link."
784,"Once the last bit of
the packet propagates to node B, it and all the preceding bits of the packet are stored in router B."
785,"The
whole process then continues with router B now performing the forwarding."
786,"In wide-area networks,propagation delays are on the order of milliseconds."
787,"Comparing Transmission and Propagation Delay
Exploring propagation delay and transmission delay
Newcomers to the field of computer networking sometimes have difficulty understanding the difference
between transmission delay and propagation delay."
788,The difference is subtle but important.
789,"Thetransmission delay is the amount of time required for the router to push out the packet; it is a function ofthe packet’s length and the transmission rate of the link, but has nothing to do with the distance betweenthe two routers."
790,"The propagation delay, on the other hand, is the time it takes a bit to propagate fromone router to the next; it is a function of the distance between the two routers, but has nothing to do withthe packet’s length or the transmission rate of the link."
791,An analogy might clarify the notions of transmission and propagation delay.
792,"Consider a highway that has
a tollbooth every 100 kilometers, as shown in Figure 1.17."
793,You can think of the highway segmentsR=10 Mbps; R=100 Mbps.
794,2⋅108 meters/sec to 3⋅108 meters/secbetween tollbooths as links and the tollbooths as routers.
795,"Suppose that cars travel (that is, propagate)
on the highway at a rate of 100 km/hour (that is, when a car leaves a tollbooth, it instantaneouslyaccelerates to 100 km/hour and maintains that speed between tollbooths)."
796,"Suppose next that 10 cars,traveling together as a caravan, follow each other in a fixed order."
797,You can think of each car as a bit andthe caravan as a packet.
798,"Also suppose that each
Figure 1.17 Caravan analogy
tollbooth services (that is, transmits) a car at a rate of one car per 12 seconds, and that it is late at night
so that the caravan’s cars are the only cars on the highway."
799,"Finally, suppose that whenever the first car
of the caravan arrives at a tollbooth, it waits at the entrance until the other nine cars have arrived andlined up behind it."
800,"(Thus the entire caravan must be stored at the tollbooth before it can begin to beforwarded.) The time required for the tollbooth to push the entire caravan onto the highway is
."
801,This time is analogous to the transmission delay in a router.
802,"The
time required for a car to travel from the exit of one tollbooth to the next tollbooth is
."
803,This time is analogous to propagation delay.
804,"Therefore, the time from
when the caravan is stored in front of a tollbooth until the caravan is stored in front of the next tollboothis the sum of transmission delay and propagation delay—in this example, 62 minutes."
805,Let’s explore this analogy a bit more.
806,"What would happen if the tollbooth service time for a caravan were
greater than the time for a car to travel between tollbooths?"
807,"For example, suppose now that the carstravel at the rate of 1,000 km/hour and the tollbooth services cars at the rate of one car per minute."
808,Thenthe traveling delay between two tollbooths is 6 minutes and the time to serve a caravan is 10 minutes.
809,"Inthis case, the first few cars in the caravan will arrive at the second tollbooth before the last cars in thecaravan leave the first tollbooth."
810,"This situation also arises in packet-switched networks—the first bits in apacket can arrive at a router while many of the remaining bits in the packet are still waiting to be
transmitted by the preceding router."
811,"If a picture speaks a thousand words, then an animation must speak a million words."
812,"The Web site for
this textbook provides an interactive Java applet that nicely illustrates and contrasts transmission delay
and propagation delay."
813,The reader is highly encouraged to visit that applet.
814,"[Smith 2009] also provides
a very readable discussion of propagation, queueing, and transmission delays."
815,"If we let d , d , d , and d  denote the processing, queuing, transmission, and propagation(10 cars)/(5 cars/minute)=2 minutes
100 km/(100 km/hour)=1 hour
proc queue trans propdelays, then the total nodal delay is given by
The contribution of these delay components can vary significantly."
816,"For example, d can be negligible
(for example, a couple of microseconds) for a link connecting two routers on the same university
campus; however, d is hundreds of milliseconds for two routers interconnected by a geostationary
satellite link, and can be the dominant term in d."
817,"Similarly, d  can range from negligible to
significant."
818,"Its contribution is typically negligible for transmission rates of 10 Mbps and higher (for
example, for LANs); however, it can be hundreds of milliseconds for large Internet packets sent over
low-speed dial-up modem links."
819,"The processing delay, d, is often negligible; however, it strongly
influences a router’s maximum throughput, which is the maximum rate at which a router can forward
packets."
820,"1.4.2 Queuing Delay and Packet Loss
The most complicated and interesting component of nodal delay is the queuing delay, d ."
821,"In fact,
queuing delay is so important and interesting in computer networking that thousands of papers and
numerous books have been written about it [Bertsekas 1991 ; Daigle 1991; Kleinrock 1975 , Kleinrock
1976 ; Ross 1995]."
822,"We give only a high-level, intuitive discussion of queuing delay here; the more
curious reader may want to browse through some of the books (or even eventually write a PhD thesis on
the subject!)."
823,"Unlike the other three delays (namely, d, d , and d ), the queuing delay can vary
from packet to packet."
824,"For example, if 10 packets arrive at an empty queue at the same time, the first
packet transmitted will suffer no queuing delay, while the last packet transmitted will suffer a relatively
large queuing delay (while it waits for the other nine packets to be transmitted)."
825,"Therefore, when
characterizing queuing delay, one typically uses statistical measures, such as average queuing delay,variance of queuing delay, and the probability that the queuing delay exceeds some specified value."
826,When is the queuing delay large and when is it insignificant?
827,"The answer to this question depends on
the rate at which traffic arrives at the queue, the transmission rate of the link, and the nature of thearriving traffic, that is, whether the traffic arrives periodically or arrives in bursts."
828,"To gain some insight
here, let a denote the average rate at which packets arrive at the queue ( a is in units of packets/sec)."
829,"Recall that R is the transmission rate; that is, it is the rate (in bits/sec) at which bits are pushed out of the
queue."
830,"Also suppose, for simplicity, that all packets consist of L bits."
831,"Then the average rate at which bits
arrive at the queue is La bits/sec."
832,"Finally, assume that the queue is very big, so that it can hold
essentially an infinite number of bits."
833,"The ratio La/R, called the traffic intensity , often plays an
important role in estimating the extent of the queuing delay."
834,"If La/R > 1, then the average rate at which
bits arrive at the queue exceeds the rate at which the bits can be transmitted from the queue."
835,"In thisdnodal =dproc+dqueue +dtrans+dprop
prop
prop
nodal trans
proc
queue
proc trans propunfortunate situation, the queue will tend to increase without bound and the queuing delay will approach
infinity! Therefore, one of the golden rules in traffic engineering is: Design your system so that the traffic
intensity is no greater than 1."
836,Now consider the case La/R ≤ 1.
837,"Here, the nature of the arriving traffic impacts the queuing delay."
838,"For
example, if packets arrive periodically—that is, one packet arrives every L/R seconds—then every
packet will arrive at an empty queue and there will be no queuing delay."
839,"On the other hand, if packets
arrive in bursts but periodically, there can be a significant average queuing delay."
840,"For example, suppose
N packets arrive simultaneously every (L/R)N seconds."
841,"Then the first packet transmitted has no queuing
delay; the second packet transmitted has a queuing delay of L/R seconds; and more generally, the nth
packet transmitted has a queuing delay of L/R seconds."
842,"We leave it as an exercise for you to
calculate the average queuing delay in this example."
843,The two examples of periodic arrivals described above are a bit academic.
844,"­Typically, the arrival
process to a queue is random; that is, the arrivals do not follow any pattern and the packets are spaced
apart by random amounts of time."
845,"In this more realistic case, the quantity La/R is not usually sufficient to
fully characterize the queuing delay statistics."
846,"Nonetheless, it is useful in gaining an intuitive
understanding of the extent of the queuing delay."
847,"In particular, if the traffic intensity is close to zero, thenpacket arrivals are few and far between and it is unlikely that an arriving packet will find another packetin the queue."
848,"Hence, the average queuing delay will be close to zero."
849,"On the other hand, when thetraffic intensity is close to 1, there will be intervals of time when the arrival rate exceeds the transmissioncapacity (due to variations in packet arrival rate), and a queue will form during these periods of time;
when the arrival rate is less than the transmission capacity, the length of the queue will shrink."
850,"Nonetheless, as the traffic intensity approaches 1, the average queue length gets larger and larger."
851,"The
qualitative dependence of average queuing delay on the traffic intensity is shown in Figure 1.18."
852,"One important aspect of Figure 1.18 is the fact that as the traffic intensity approaches 1, the average
queuing delay increases rapidly."
853,"A small percentage increase in the intensity will result in a much larger
percentage-wise increase in delay."
854,Perhaps you have experienced this phenomenon on the highway.
855,"Ifyou regularly drive on a road that is typically congested, the fact that the road is typically(n−1)Figure 1.18 Dependence of average queuing delay on traffic intensity
congested means that its traffic intensity is close to 1."
856,"If some event causes an even slightly larger-than-
usual amount of traffic, the delays you experience can be huge."
857,"To really get a good feel for what queuing delays are about, you are encouraged once again to visit the
textbook Web site, which provides an interactive Java applet for a queue."
858,"If you set the packet arrivalrate high enough so that the traffic intensity exceeds 1, you will see the queue slowly build up over time."
859,"Packet Loss
In our discussions above, we have assumed that the queue is capable of holding an infinite number of
packets."
860,"In reality a queue preceding a link has finite capacity, although the queuing capacity greatly
depends on the router design and cost."
861,"Because the queue capacity is finite, packet delays do not reallyapproach infinity as the traffic intensity approaches 1."
862,"Instead, a packet can arrive to find a full queue.With no place to store such a packet, a router will drop that packet; that is, the packet will be lost."
863,"This
overflow at a queue can again be seen in the Java applet for a queue when the traffic intensity is greaterthan 1."
864,"From an end-system viewpoint, a packet loss will look like a packet having been transmitted into the
network core but never emerging from the network at the destination."
865,"The fraction of lost packets
increases as the traffic intensity increases."
866,"Therefore, performance at a node is often measured not only
in terms of delay, but also in terms of the probability of packet loss."
867,"As we’ll discuss in the subsequentchapters, a lost packet may be retransmitted on an end-to-end basis in order to ensure that all data areeventually transferred from source to destination."
868,"1.4.3 End-to-End DelayOur discussion up to this point has focused on the nodal delay, that is, the delay at a single router."
869,"Let’s
now consider the total delay from source to destination."
870,"To get a handle on this concept, suppose thereare  routers between the source host and the destination host."
871,"Let’s also suppose for the moment
that the network is uncongested (so that queuing delays are negligible), the processing delay at each
router and at the source host is d , the transmission rate out of each router and out of the source host
is R bits/sec, and the propagation on each link is d."
872,"The nodal delays accumulate and give an end-to-
end delay,
where, once again,  where L is the packet size."
873,"Note that Equation  1.2 is a generalization of
Equation  1.1, which did not take into account processing and propagation delays."
874,"We leave it to you to
generalize Equation  1.2 to the case of ­heterogeneous delays at the nodes and to the presence of an
average queuing delay at each node."
875,"Traceroute
Using Traceroute to discover network paths and measure network delay
To get a hands-on feel for end-to-end delay in a computer network, we can make use of the Traceroute
program."
876,Traceroute is a simple program that can run in any Internet host.
877,"When the user specifies adestination hostname, the program in the source host sends multiple, special packets toward thatdestination."
878,"As these packets work their way toward the destination, they pass through a series ofrouters."
879,"When a router receives one of these special packets, it sends back to the source a shortmessage that contains the name and address of the router."
880,"More specifically, suppose there are  routers between the source and the destination."
881,"Then the
source will send N special packets into the network, with each packet addressed to the ultimate
destination."
882,"These N special packets are marked 1 through N, with the first packet marked 1 and the last
packet marked N."
883,"When the nth router receives the nth packet marked n, the router does not forward
the packet toward its destination, but instead sends a message back to the source."
884,"When the
destination host receives the Nth packet, it too returns a message back to the source."
885,"The source
records the time that elapses between when it sends a packet and when it receives the correspondingN−1
proc
prop
dend−end=N(dproc+dtrans+dprop) (1.2)
dtrans=L/R,
N−1return message; it also records the name and address of the router (or the destination host) that returns
the message."
886,"In this manner, the source can reconstruct the route taken by packets flowing from source
to destination, and the source can determine the round-trip delays to all the intervening routers."
887,"Traceroute actually repeats the experiment just described three times, so the source actually sends 3 •
N packets to the destination."
888,RFC 1393 describes Traceroute in detail.
889,"Here is an example of the output of the Traceroute program, where the route was being traced from the
source host gaia.cs.umass.edu (at the University of ­Massachusetts) to the host cis.poly.edu  (at
Polytechnic University in Brooklyn)."
890,"The output has six columns: the first column is the n value
described above, that is, the number of the router along the route; the second column is the name of the
router; the third column is the address of the router (of the form xxx.xxx.xxx.xxx); the last three columnsare the round-trip delays for three experiments."
891,"If the source receives fewer than three messages fromany given router (due to packet loss in the network), Traceroute places an asterisk just after the routernumber and reports fewer than three round-trip times for that router."
892,"1  cs-gw (128.119.240.254) 1.009 ms 0.899 ms 0.993 ms2  128.119.3.154 (128.119.3.154) 0.931 ms 0.441 ms 0.651 ms3  -border4-rt-gi-1-3.gw.umass.edu (128.119.2.194) 1.032 ms 0.484 ms  
0.451 ms4  -acr1-ge-2-1-0.Boston.cw.net (208.172.51.129) 10.006 ms 8.150 ms 8.460  
ms
5  -agr4-loopback.NewYork.cw.net (206.24.194.104) 12.272 ms 14.344 ms  
13.267 ms
6  -acr2-loopback.NewYork.cw.net (206.24.194.62) 13.225 ms 12.292 ms  
12.148 ms7  -pos10-2.core2.NewYork1.Level3.net (209.244.160.133) 12.218 ms 11.823  
ms 11.793 ms8   -gige9-1-52.hsipaccess1.NewYork1.Level3.net (64.159.17.39) 13.081 ms  
11.556 ms 13.297 ms
9  -p0-0.polyu.bbnplanet.net (4.25.109.122) 12.716 ms 13.052 ms 12.786 ms
10 cis.poly.edu (128.238.32.126) 14.080 ms 13.035 ms 12.802 ms
In the trace above there are nine routers between the source and the destination."
893,"Most of these routers
have a name, and all of them have addresses."
894,"For example, the name of Router 3 is border4-rt-gi-
1-3.gw.umass.edu  and its address is 128.119.2.194 ."
895,"Looking at the data provided for this same
router, we see that in the first of the three trials the round-trip delay between the source and the router
was 1.03 msec."
896,The round-trip delays for the subsequent two trials were 0.48 and 0.45 msec.
897,"Theseround-trip delays include all of the delays just discussed, including transmission delays, propagation
delays, router processing delays, and queuing delays."
898,"Because the queuing delay is varying with time,
the round-trip delay of packet n sent to a router n can sometimes be longer than the round-trip delay of
packet n+1 sent to router n+1."
899,"Indeed, we observe this phenomenon in the above example: the delays
to Router 6 are larger than the delays to Router 7!
Want to try out Traceroute for yourself?"
900,"We highly  recommended that you visit http:/ /
www.traceroute.org, which provides a Web interface to an extensive list of sources for route tracing."
901,You choose a source and supply the hostname for any destination.
902,"The Traceroute program then does
all the work."
903,"There are a number of free software programs that provide a graphical interface to
Traceroute; one of our favorites is PingPlotter [PingPlotter 2016]."
904,"End System, Application, and Other Delays
In addition to processing, transmission, and propagation delays, there can be additional significant
delays in the end systems."
905,"For example, an end system wanting to transmit a packet into a shared
medium (e.g., as in a WiFi or cable modem scenario) may purposefully  delay its transmission as part of
its protocol for sharing the medium with other end systems; we’ll consider such protocols in detail inChapter 6."
906,"Another important delay is media packetization delay, which is present in Voice-over-IP
(VoIP) applications."
907,"In VoIP, the sending side must first fill a packet with encoded digitized speech
before passing the packet to the Internet."
908,This time to fill a packet—called the packetization delay—canbe significant and can impact the user-perceived quality of a VoIP call.
909,This issue will be furtherexplored in a homework problem at the end of this chapter.
910,"1.4.4 Throughput in Computer Networks
In addition to delay and packet loss, another critical performance measure in computer networks is end-to-end throughput."
911,"To define throughput, consider transferring a large file from Host A to Host B acrossa computer network."
912,"This transfer might be, for example, a large video clip from one peer to another in aP2P file sharing system."
913,"The instantaneous throughput  at any instant of time is the rate (in bits/sec) at
which Host B is receiving the file."
914,"(Many applications, including many P2P file sharing ­systems, display
the instantaneous throughput during downloads in the user interface—perhaps you have observed this
before!) If the file consists of F bits and the transfer takes T seconds for Host B to receive all F bits, then
the average throughput  of the file transfer is F/T  bits/sec."
915,"For some applications, such as Internet
telephony, it is desirable to have a low delay and an instantaneous throughput consistently above somethreshold (for example, over 24 kbps for some Internet telephony applications and over 256 kbps forsome real-time video applications)."
916,"For other applications, including those involving file transfers, delayis not critical, but it is desirable to have the highest possible throughput.To gain further insight into the important concept of throughput, let’s consider a few examples."
917,"Figure
1.19(a) shows two end systems, a server and a client, connected by two communication links and a
router."
918,Consider the throughput for a file transfer from the server to the client.
919,"Let R denote the rate of
the link between the server and the router; and R denote the rate of the link between the router and the
client."
920,"Suppose that the only bits being sent in the entire network are those from the server to the client.We now ask, in this ideal scenario, what is the server-to-client throughput?"
921,"To answer this question, we
may think of bits as fluid and communication links as pipes ."
922,"Clearly, the server cannot pump bits through
its link at a rate faster than R  bps; and the router cannot forward bits at a rate faster than R  bps."
923,"If
 then the bits pumped by the server will “flow” right through the router and arrive at the client at a
rate of R  bps, giving a throughput of R bps."
924,"If, on the other hand,  then the router will not be
able to forward bits as quickly as it receives them."
925,"In this case, bits will only leave the router at rate R,
giving an end-to-end throughput of R."
926,"(Note also that if bits continue to arrive at the router at rate R ,
and continue to leave the router at R, the backlog of bits at the router waiting
Figure 1.19 Throughput for a file transfer from server to client
for transmission to the client will grow and grow—a most undesirable situation!) Thus, for this simpletwo-link network, the throughput is min{ R, R}, that is, it is the transmission rate of the bottleneck link ."
927,"Having determined the throughput, we can now approximate the time it takes to transfer a large file of F
bits from server to client as F/min{R , R}."
928,"For a specific example, suppose you are downloading an MP3
file of  million bits, the server has a transmission rate of  Mbps, and you have an access link
of  Mbps."
929,The time needed to transfer the file is then 32 seconds.
930,"Of course, these expressions for
throughput and transfer time are only approximations, as they do not account for store-and-forward and
processing delays as well as protocol issues."
931,"Figure 1.19(b) now shows a network with N links between the server and the client, with the
transmission rates of the N links being  Applying the same analysis as for the two-link
network, we find that the throughput for a file transfer from server to client is min , whichs
c
s c
Rs<Rc,
s s Rc<Rs,
c
c s
c
c s
s c
F=32 Rs=2
Rc=1
R1,R2,…, RN."
932,"{R1,R2,…, RN}is once again the transmission rate of the bottleneck link along the path between server and client."
933,Now consider another example motivated by today’s Internet.
934,"Figure 1.20(a) shows two end systems, a
server and a client, connected to a computer network."
935,"Consider the throughput for a file transfer from
the server to the client."
936,"The server is connected to the network with an access link of rate R and the
client is connected to the network with an access link of rate R."
937,"Now suppose that all the links in the
core of the communication network have very high transmission rates, much higher than R and R ."
938,"Indeed, today, the core of the Internet is over-provisioned with high speed links that experience little
congestion."
939,Also suppose that the only bits being sent in the entire network are those from the server tothe client.
940,"Because the core of the computer network is like a wide pipe in this example, the rate at
which bits can flow from source to destination is again the minimum of R and R , that is, throughput 
min{R , R}."
941,"Therefore, the constraining factor for throughput in today’s Internet is typically the access
network."
942,"For a final example, consider Figure 1.20(b) in which there are 10 servers and 10 clients connected to
the core of the computer network."
943,"In this example, there are 10 simultaneous downloads taking place,
involving 10 client-server pairs."
944,Suppose that these 10 downloads are the only traffic in the network atthe current time.
945,"As shown in the figure, there is a link in the core that is traversed by all 10 downloads."
946,Denote R for the transmission rate of this link R.
947,"Let’s suppose that all server access links have the
same rate R , all client access links have the same rate R, and the transmission rates of all the links in
the core—except the one common link of rate R—are much larger than R, R, and R."
948,"Now we ask, what
are the throughputs of the downloads?"
949,"Clearly, if the rate of the common link, R, is large—say a
hundred times larger than both R and R —then the throughput for each download will once again be
min{R , R}."
950,But what if the rate of the common link is of the same order as R  and R ?
951,"What will the
throughput be in this case?"
952,Let’s take a look at a specific example.
953,"Suppose  Mbps,  Mbps,
 Mbps, and thes
c
s c
s c =
s c
s c
s c
s c
s c s c
Rs=2 Rc=1
R=5 
Figure 1.20 End-to-end throughput: (a) Client downloads a file from ­server; (b) 10 clients
downloading with 10 servers
common link divides its transmission rate equally among the 10 downloads."
954,"Then the bottleneck for
each download is no longer in the access network, but is now instead the shared link in the core, whichonly provides each download with 500 kbps of throughput."
955,Thus the end-to-end throughput for eachdownload is now reduced to 500 kbps.
956,"The examples in Figure 1.19 and Figure 1.20(a) show that throughput depends on the transmission
rates of the links over which the data flows."
957,"We saw that when there is no other intervening traffic, the
throughput can simply be approximated as the minimum transmission rate along the path between
source and destination."
958,"The example in Figure 1.20(b) shows that more generally the throughput
depends not only on the transmission rates of the links along the path, but also on the intervening traffic."
959,"In particular, a link with a high transmission rate may nonetheless be the bottleneck link for a file transferif many other data flows are also passing through that link."
960,"We will examine throughput in computernetworks more closely in the homework problems and in the subsequent chapters.1.5 Protocol Layers and Their Service Models
From our discussion thus far, it is apparent that the Internet is an extremely complicated system."
961,"We
have seen that there are many pieces to the Internet: numerous applications and protocols, various
types of end systems, packet switches, and various types of link-level media."
962,"Given this enormouscomplexity, is there any hope of organizing a network architecture, or at least our discussion of network
architecture?"
963,"Fortunately, the answer to both questions is yes."
964,"1.5.1 Layered Architecture
Before attempting to organize our thoughts on Internet architecture, let’s look for a human analogy."
965,"Actually, we deal with complex systems all the time in our everyday life."
966,"Imagine if someone asked youto describe, for example, the airline system."
967,"How would you find the structure to describe this complexsystem that has ticketing agents, baggage checkers, gate personnel, pilots, airplanes, air traffic control,and a worldwide system for routing airplanes?"
968,"One way to describe this system might be to describe the
series of actions you take (or others take for you) when you fly on an airline."
969,"You purchase your ticket,
check your bags, go to the gate, and eventually get loaded onto the plane."
970,The plane takes off and isrouted to its destination.
971,"After your plane lands, you deplane at the gate and claim your bags."
972,"If the tripwas bad, you complain about the flight to the ticket agent (getting nothing for your effort)."
973,"This scenario
is shown in Figure 1.21."
974,"Figure 1.21 Taking an airplane trip: actionsFigure 1.22 Horizontal layering of airline functionality
Already, we can see some analogies here with computer networking: You are being shipped from
source to destination by the airline; a packet is shipped from source host to destination host in the
Internet."
975,But this is not quite the analogy we are after.
976,We are looking for some structure in Figure 1.21.
977,"Looking at Figure 1.21, we note that there is a ticketing function at each end; there is also a baggage
function for already-ticketed passengers, and a gate function for already-ticketed and already-baggage-
checked passengers."
978,"For passengers who have made it through the gate (that is, passengers who arealready ticketed, baggage-checked, and through the gate), there is a takeoff and landing function, andwhile in flight, there is an airplane-routing function."
979,"This suggests that we can look at the functionality in
Figure 1.21 in a horizontal  manner, as shown in Figure 1.22."
980,"Figure 1.22 has divided the airline functionality into layers, providing a framework in which we can
discuss airline travel."
981,"Note that each layer, combined with the layers below it, implements some
functionality, some service."
982,"At the ticketing layer and below, airline-counter-to-airline-counter transfer of
a person is accomplished."
983,"At the baggage layer and below, baggage-check-to-baggage-claim transfer of
a person and bags is accomplished."
984,Note that the baggage layer provides this service only to analready-ticketed person.
985,"At the gate layer, departure-gate-to-arrival-gate transfer of a person and bagsis accomplished."
986,"At the takeoff/landing layer, runway-to-runway transfer of people and their bags isaccomplished."
987,"Each layer provides its service by (1) performing certain actions within that layer (for
example, at the gate layer, loading and unloading people from an airplane) and by (2) using the services
of the layer directly below it (for example, in the gate layer, using the runway-to-runway passengertransfer service of the takeoff/landing layer)."
988,"A layered architecture allows us to discuss a well-defined, specific part of a large and complex system."
989,"This simplification itself is of considerable value by providing modularity, making it much easier tochange the implementation of the service provided by the layer."
990,"As long as the layer provides the sameservice to the layer above it, and uses the same services from the layer below it, the remainder of the
system remains unchanged when a layer’s implementation is changed."
991,"(Note that changing theimplementation of a service is very different from changing the service itself!) For example, if the gate
functions were changed (for instance, to have people board and disembark by height), the remainder of
the airline system would remain unchanged since the gate layer still provides the same function (loadingand unloading people); it simply implements that function in a different manner after the change."
992,"Forlarge and complex systems that are constantly being updated, the ability to change the implementationof a service without affecting other components of the system is another important advantage of
layering."
993,"Protocol Layering
But enough about airlines."
994,Let’s now turn our attention to network protocols.
995,"To provide structure to the
design of network protocols, network designers organize protocols—and the network hardware andsoftware that implement the protocols—in layers ."
996,"Each protocol belongs to one of the layers, just as
each function in the airline architecture in Figure 1.22 belonged to a layer."
997,"We are again interested in
the services  that a layer offers to the layer above—the so-called service model of a layer."
998,"Just as in
the case of our airline example, each layer provides its service by (1) performing certain actions withinthat layer and by (2) using the services of the layer directly below it."
999,"For example, the services provided
by layer n may include reliable delivery of messages from one edge of the network to the other."
1000,"This
might be implemented by using an unreliable edge-to-edge message delivery service of layer , and
adding layer n functionality to detect and retransmit lost messages."
1001,"A protocol layer can be implemented in software, in hardware, or in a combination of the two."
1002,"Application-layer protocols—such as HTTP and SMTP—are almost always implemented in software in
the end systems; so are transport-layer protocols."
1003,"Because the physical layer and data link layers are
responsible for handling communication over a specific link, they are typically implemented in a networkinterface card (for example, Ethernet or WiFi interface cards) associated with a given link."
1004,The networklayer is often a mixed implementation of hardware and software.
1005,"Also note that just as the functions inthe layered airline architecture were distributed among the various airports and flight control centers that
make up the system, so too is a layer n protocol distributed  among the end systems, packet switches,
and other components that make up the network."
1006,"That is, there’s often a piece of a layer n protocol in
each of these network components."
1007,Protocol layering has conceptual and structural advantages [RFC 3439] .
1008,"As we have seen, layering
provides a structured way to discuss system components."
1009,"Modularity makes it easier to update system
components."
1010,"We mention, however, that some researchers and networking engineers are vehemently
opposed to layering [Wakeman 1992] ."
1011,"One potential drawback of layering is that one layer may
duplicate lower-layer functionality."
1012,"For example, many protocol stacks provide error recoveryn−1 
Figure 1.23 The Internet protocol stack (a) and OSI reference model (b)
on both a per-link basis and an end-to-end basis."
1013,"A second potential drawback is that functionality at
one layer may need information (for example, a timestamp value) that is present only in another layer;
this violates the goal of separation of layers."
1014,"When taken together, the protocols of the various layers are called the protocol stack."
1015,"The Internet
protocol stack consists of five layers: the physical, link, network, transport, and application layers, as
shown in Figure 1.23(a)."
1016,"If you examine the Table of Contents, you will see that we have roughly
organized this book using the layers of the Internet protocol stack."
1017,"We take a top-down approach , first
covering the application layer and then proceeding downward."
1018,"Application Layer
The application layer is where network applications and their application-layer protocols reside."
1019,"The
Internet’s application layer includes many protocols, such as the HTTP protocol (which provides for Webdocument request and transfer), SMTP (which provides for the transfer of e-mail messages), and FTP(which provides for the transfer of files between two end systems)."
1020,"We’ll see that certain network
functions, such as the translation of human-friendly names for Internet end systems like www.ietf.org  to
a 32-bit network address, are also done with the help of a specific application-layer protocol, namely, thedomain name system (DNS)."
1021,"We’ll see in Chapter 2 that it is very easy to create and deploy our own
new application-layer protocols."
1022,"An application-layer protocol is distributed over multiple end systems, with the application in one end
system using the protocol to exchange packets of information with the application in another endsystem."
1023,We’ll refer to this packet of information at the application layer as a message .
1024,Transport LayerThe Internet’s transport layer transports application-layer messages between application endpoints.
1025,"In
the Internet there are two transport protocols, TCP and UDP, either of which can transport application-layer messages."
1026,TCP provides a ­connection-oriented service to its applications.
1027,"This service includes
guaranteed delivery of application-layer messages to the destination and flow control (that is,sender/receiver speed matching)."
1028,"TCP also breaks long messages into shorter ­segments and provides
a congestion-control mechanism, so that a source throttles its transmission rate when the network iscongested."
1029,The UDP protocol provides a connectionless service to its applications.
1030,"This is a no-frillsservice that provides no reliability, no flow control, and no congestion control."
1031,"In this book, we’ll refer toa transport-layer packet as a segment."
1032,"Network Layer
The Internet’s network layer is responsible for moving network-layer packets known as datagrams  from
one host to another."
1033,"The Internet transport-layer protocol (TCP or UDP) in a source host passes a
transport-layer segment and a destination address to the network layer, just as you would give the
postal service a letter with a destination address."
1034,The network layer then provides the service ofdelivering the segment to the transport layer in the destination host.
1035,"The Internet’s network layer includes the celebrated IP protocol, which defines the fields in the datagram
as well as how the end systems and routers act on these fields."
1036,"There is only one IP protocol, and allInternet components that have a network layer must run the IP protocol."
1037,"The Internet’s network layeralso contains routing protocols that determine the routes that datagrams take between sources and
destinations."
1038,The Internet has many routing protocols.
1039,"As we saw in Section 1.3, the Internet is a
network of networks, and within a network, the network administrator can run any routing protocol
desired."
1040,"Although the network layer contains both the IP protocol and numerous routing protocols, it isoften simply referred to as the IP layer, reflecting the fact that IP is the glue that binds the Internettogether."
1041,"Link Layer
The Internet’s network layer routes a datagram through a series of routers between the source and
destination."
1042,"To move a packet from one node (host or router) to the next node in the route, the network
layer relies on the services of the link layer."
1043,"In particular, at each node, the network layer passes thedatagram down to the link layer, which delivers the datagram to the next node along the route."
1044,"At thisnext node, the link layer passes the datagram up to the network layer."
1045,"The services provided by the link layer depend on the specific link-layer protocol that is employed over
the link."
1046,"For example, some link-layer protocols provide reliable delivery, from transmitting node, over
one link, to receiving node."
1047,"Note that this reliable delivery service is different from the reliable deliveryservice of TCP, which provides reliable delivery from one end system to another."
1048,"Examples of link-layerprotocols include Ethernet, WiFi, and the cable access network’s DOCSIS protocol."
1049,"As datagrams
typically need to traverse several links to travel from source to destination, a datagram may be handled
by different link-layer protocols at different links along its route."
1050,"For example, a datagram may behandled by Ethernet on one link and by PPP on the next link."
1051,The network layer will receive a differentservice from each of the different link-layer protocols.
1052,"In this book, we’ll refer to the link-layer packets asframes ."
1053,"Physical Layer
While the job of the link layer is to move entire frames from one network element to an adjacent network
element, the job of the physical layer is to move the individual bits  within the frame from one node to the
next."
1054,"The protocols in this layer are again link dependent and further depend on the actual transmission
medium of the link (for example, twisted-pair copper wire, single-mode fiber optics)."
1055,"For example,Ethernet has many physical-layer protocols: one for twisted-pair copper wire, another for coaxial cable,another for fiber, and so on."
1056,"In each case, a bit is moved across the link in a different way."
1057,"The OSI Model
Having discussed the Internet protocol stack in detail, we should mention that it is not the only protocol
stack around."
1058,"In particular, back in the late 1970s, the International Organization for Standardization(ISO) proposed that computer networks be organized around seven layers, called the Open Systems
Interconnection (OSI) model [ISO 2016]."
1059,"The OSI model took shape when the protocols that were to
become the Internet protocols were in their infancy, and were but one of many different protocol suites
under development; in fact, the inventors of the original OSI model probably did not have the Internet in
mind when creating it."
1060,"Nevertheless, beginning in the late 1970s, many training and university courses
picked up on the ISO mandate and organized courses around the seven-layer model."
1061,"Because of itsearly impact on networking education, the seven-layer model continues to linger on in some networkingtextbooks and training courses."
1062,"The seven layers of the OSI reference model, shown in Figure 1.23(b), are: application layer,
presentation layer, session layer, transport layer, network layer, data link layer, and physical layer."
1063,"The
functionality of five of these layers is roughly the same as their similarly named Internet counterparts."
1064,"Thus, let’s consider the two additional layers present in the OSI reference model—the presentation layer
and the session layer."
1065,The role of the presentation layer is to provide services that allow communicatingapplications to interpret the meaning of data exchanged.
1066,"These services include data compression and
data encryption (which are self-explanatory) as well as data description (which frees the applicationsfrom having to worry about the internal format in which data are represented/stored—formats that maydiffer from one computer to another)."
1067,"The session layer provides for delimiting and synchronization ofdata exchange, including the means to build a checkpointing and recovery scheme.The fact that the Internet lacks two layers found in the OSI reference model poses a couple of
interesting questions: Are the services provided by these layers unimportant?"
1068,"What if an application
needs  one of these services?"
1069,"The Internet’s answer to both of these questions is the same—it’s up to
the application developer."
1070,"It’s up to the application developer to decide if a service is important, and ifthe service is important, it’s up to the application developer to build that functionality into the application."
1071,"1.5.2 Encapsulation
Figure 1.24 shows the physical path that data takes down a sending end system’s protocol stack, up
and down the protocol stacks of an intervening link-layer switch
Figure 1.24 Hosts, routers, and link-layer switches; each contains a ­different set of layers,
reflecting their differences in ­functionality
and router, and then up the protocol stack at the receiving end system."
1072,"As we discuss later in this book,
routers and link-layer switches are both packet switches."
1073,"Similar to end systems, routers and link-layerswitches organize their networking hardware and software into layers."
1074,"But routers and link-layer
switches do not implement all of the layers in the protocol stack; they typically implement only the
bottom layers."
1075,"As shown in Figure 1.24, link-layer switches implement layers 1 and 2; routers
implement layers 1 through 3."
1076,"This means, for example, that Internet routers are capable of
implementing the IP protocol (a layer 3 protocol), while link-layer switches are not."
1077,"We’ll see later thatwhile link-layer switches do not recognize IP addresses, they are capable of recognizing layer 2
addresses, such as Ethernet addresses."
1078,"Note that hosts implement all five layers; this is consistent with
the view that the Internet architecture puts much of its complexity at the edges of the network."
1079,Figure 1.24 also illustrates the important concept of encapsulation .
1080,"At the sending host, an
application-layer message  (M in Figure 1.24) is passed to the transport layer."
1081,"In the simplest case,
the transport layer takes the message and appends additional information (so-called transport-layer
header information, H  in Figure 1.24) that will be used by the receiver-side transport layer."
1082,"The
application-layer message and the transport-layer header information together constitute the transport-
layer segment ."
1083,The transport-layer segment thus encapsulates the application-layer message.
1084,"The
added information might include information allowing the receiver-side transport layer to deliver the
message up to the appropriate application, and error-detection bits that allow the receiver to determine
whether bits in the message have been changed in route."
1085,"The transport layer then passes the segment
to the network layer, which adds network-layer header information (H  in Figure 1.24) such as source
and destination end system addresses, creating a network-layer datagram ."
1086,"The datagram is then
passed to the link layer, which (of course!) will add its own link-layer header information and create a
link-layer frame ."
1087,"Thus, we see that at each layer, a packet has two types of fields: header fields and a
payload field ."
1088,The payload is typically a packet from the layer above.
1089,A useful analogy here is the sending of an interoffice memo from one corporate branch office to anothervia the public postal service.
1090,"Suppose Alice, who is in one branch office, wants to send a memo to Bob,
who is in another branch office."
1091,The memo is analogous to the application-layer message .
1092,"Alice puts the
memo in an interoffice envelope with Bob’s name and department written on the front of the envelope.The interoffice envelope  is analogous to a transport-layer segment —it contains header information
(Bob’s name and department number) and it encapsulates the application-layer message (the memo)."
1093,"When the sending branch-office mailroom receives the interoffice envelope, it puts the interoffice
envelope inside yet another envelope, which is suitable for sending through the public postal service."
1094,"The sending mailroom also writes the postal address of the sending and receiving branch offices on the
postal envelope."
1095,"Here, the postal envelope  is analogous to the datagram —it encapsulates the transport-
layer segment (the interoffice envelope), which encapsulates the original message (the memo)."
1096,"The
postal service delivers the postal envelope to the receiving branch-office mailroom."
1097,"There, the process
of de-encapsulation is begun."
1098,"The mailroom extracts the interoffice memo and forwards it to Bob.Finally, Bob opens the envelope and removes the memo."
1099,The process of encapsulation can be more complex than that described above.
1100,"For example, a large
message may be divided into multiple transport-layer segments (which might themselves each be
divided into multiple network-layer datagrams)."
1101,"At the receiving end, such a segment must then bereconstructed from its constituent datagrams.t
n1.6 Networks Under Attack
The Internet has become mission critical for many institutions today, including large and small
companies, universities, and government agencies."
1102,"Many individuals also rely on the Internet for manyof their professional, social, and personal activities."
1103,"Billions of “things,” including wearables and homedevices, are currently being connected to the Internet."
1104,"But behind all this utility and excitement, there isa dark side, a side where “bad guys” attempt to wreak havoc in our daily lives by damaging our Internet-
connected computers, violating our privacy, and rendering inoperable the Internet services on which we
depend."
1105,"The field of network security is about how the bad guys can attack computer networks and about how
we, soon-to-be experts in computer networking, can defend networks against those attacks, or betteryet, design new architectures that are immune to such attacks in the first place."
1106,"Given the frequency andvariety of existing attacks as well as the threat of new and more destructive future attacks, networksecurity has become a central topic in the field of computer networking."
1107,"One of the features of this
textbook is that it brings network security issues to the forefront."
1108,"Since we don’t yet have expertise in computer networking and Internet protocols, we’ll begin here by
surveying some of today’s more prevalent security-related problems."
1109,This will whet our appetite for moresubstantial discussions in the upcoming chapters.
1110,"So we begin here by simply asking, what can gowrong?"
1111,How are computer networks vulnerable?
1112,What are some of the more prevalent types of attackstoday?
1113,"The Bad Guys Can Put Malware into Your Host Via the Internet
We attach devices to the Internet because we want to receive/send data from/to the Internet."
1114,"This
includes all kinds of good stuff, including Instagram posts, Internet search results, streaming music,video conference calls, streaming movies, and so on."
1115,"But, unfortunately, along with all that good stuffcomes malicious stuff— ­collectively known as malware—that can also enter and infect our devices."
1116,"Once malware infects our device it can do all kinds of devious things, including deleting our files andinstalling spyware that collects our private information, such as social security numbers, passwords, and
keystrokes, and then sends this (over the Internet, of course!) back to the bad guys."
1117,"Our compromisedhost may also be enrolled in a network of thousands of similarly compromised devices, collectively
known as a botnet, which the bad guys control and leverage for spam e-mail distribution or distributed
denial-of-service attacks (soon to be discussed) against targeted hosts.Much of the malware out there today is self-replicating: once it infects one host, from that host it seeks
entry into other hosts over the Internet, and from ­the newly infected hosts, it seeks entry into yet more
hosts."
1118,"In this manner, self-­replicating malware can spread exponentially fast."
1119,Malware can spread inthe form of a virus or a worm.
1120,Viruses are malware that require some form of user interaction to infectthe user’s device.
1121,The classic example is an e-mail attachment containing malicious executable code.
1122,"Ifa user receives and opens such an attachment, the user inadvertently runs the malware on the device."
1123,"Typically, such e-mail viruses are self-replicating: once executed, the virus may send an identical
message with an identical malicious attachment to, for example, every recipient in the user’s addressbook."
1124,Worms are malware that can enter a device without any explicit user interaction.
1125,"For example, auser may be running a vulnerable network application to which an attacker can send malware."
1126,"In somecases, without any user intervention, the application may accept the malware from the Internet and runit, creating a worm."
1127,"The worm in the newly infected device then scans the Internet, searching for otherhosts running the same vulnerable network application."
1128,"When it finds other vulnerable hosts, it sends acopy of itself to those hosts."
1129,"Today, malware, is pervasive and costly to defend against."
1130,"As you work
through this textbook, we encourage you to think about the following question: What can computer
network designers do to defend Internet-attached devices from malware attacks?"
1131,"The Bad Guys Can Attack Servers and Network Infrastructure
Another broad class of security threats are known as denial-of-service (DoS) attacks ."
1132,"As the name
suggests, a DoS attack renders a network, host, or other piece of infrastructure unusable by legitimate
users."
1133,"Web servers, e-mail servers, DNS servers (discussed in Chapter 2), and institutional networks
can all be subject to DoS attacks."
1134,"Internet DoS attacks are extremely common, with thousands of DoSattacks occurring every year [Moore 2001]."
1135,"The site Digital Attack Map allows use to visualize the top
daily DoS attacks worldwide [DAM 2016] ."
1136,"Most Internet DoS attacks fall into one of three categories:
Vulnerability attack."
1137,"This involves sending a few well-crafted messages to a vulnerable application
or operating system running on a targeted host."
1138,"If the right sequence of packets is sent to a
vulnerable application or operating system, the service can stop or, worse, the host can crash."
1139,Bandwidth flooding.
1140," The attacker sends a deluge of packets to the targeted host—so many
packets that the target’s access link becomes clogged, preventing legitimate packets from reachingthe server."
1141,Connection flooding.
1142," The attacker establishes a large number of half-open or fully open TCP
connections (TCP connections are discussed in Chapter 3) at the target host."
1143,"The host can become
so bogged down with these bogus connections that it stops accepting legitimate connections."
1144,Let’s now explore the bandwidth-flooding attack in more detail.
1145,"Recalling our delay and loss analysis
discussion in Section 1.4.2, it’s evident that if the server has an access rate of R bps, then the attacker
will need to send traffic at a rate of approximately R bps to cause damage."
1146,"If R is very large, a single
attack source may not be able to generate enough traffic to harm the server."
1147,"Furthermore, if all thetraffic emanates from a single source, an upstream router may be able to detect the attack and block all
traffic from that source before the traffic gets near the server."
1148,"In a distributed DoS (DDoS)  attack,
illustrated in Figure 1.25, the attacker controls multiple sources and has each source blast traffic at the
target."
1149,"With this approach, the aggregate traffic rate across all the controlled sources needs to be
approximately R to cripple the ­service."
1150,"DDoS attacks leveraging botnets with thousands of comprised
hosts are a common occurrence today [DAM 2016] ."
1151,"DDos attacks are much harder to detect and
defend against than a DoS attack from a single host."
1152,"We encourage you to consider the following question as you work your way through this book: What can
computer network designers do to defend against DoS attacks?"
1153,We will see that different defenses areneeded for the three types of DoS attacks.
1154,"Figure 1.25 A distributed denial-of-service attack
The Bad Guys Can Sniff Packets
Many users today access the Internet via wireless devices, such as WiFi-connected laptops or handheld
devices with cellular Internet connections (covered in Chapter 7)."
1155,"While ubiquitous Internet access is
extremely convenient and enables marvelous new applications for mobile users, it also creates a major
security vulnerability—by placing a passive receiver in the vicinity of the wireless transmitter, thatreceiver can obtain a copy of every packet that is transmitted! These packets can contain all kinds ofsensitive information, including passwords, social security numbers, trade secrets, and private personalmessages."
1156,"A passive receiver that records a copy of every packet that flies by is called a packet
sniffer.Sniffers can be deployed in wired environments as well."
1157,"In wired broadcast environments, as in many
Ethernet LANs, a packet sniffer can obtain copies of broadcast packets sent over the LAN."
1158,"As described
in Section 1.2, cable access technologies also broadcast packets and are thus vulnerable to sniffing."
1159,"Furthermore, a bad guy who gains access to an institution’s access router or access link to the Internet
may be able to plant a sniffer that makes a copy of every packet going to/from the organization."
1160,Sniffedpackets can then be analyzed offline for sensitive information.
1161,Packet-sniffing software is freely available at various Web sites and as commercial products.
1162,"Professors
teaching a networking course have been known to assign lab exercises that involve writing a packet-
sniffing and application-layer data reconstruction program."
1163,"Indeed, the Wireshark [Wireshark 2016]
labs associated with this text (see the introductory Wireshark lab at the end of this chapter) use exactly
such a packet sniffer!
Because packet sniffers are passive—that is, they do not inject packets into the channel—they are
difficult to detect."
1164,"So, when we send packets into a wireless channel, we must accept the possibility that
some bad guy may be recording copies of our packets."
1165,"As you may have guessed, some of the bestdefenses against packet sniffing involve cryptography."
1166,"We will examine cryptography as it applies to
network security in Chapter 8."
1167,"The Bad Guys Can Masquerade as Someone You Trust
It is surprisingly easy ( you will have the knowledge to do so shortly as you proceed through this text!) to
create a packet with an arbitrary source address, packet content, and destination address and then
transmit this hand-crafted packet into the Internet, which will dutifully forward the packet to its
destination."
1168,"Imagine the unsuspecting receiver (say an Internet router) who receives such a packet,takes the (false) source address as being truthful, and then performs some command embedded in thepacket’s contents (say modifies its forwarding table)."
1169,"The ability to inject packets into the Internet with afalse source address is known as IP spoofing , and is but one of many ways in which one user can
masquerade as another user."
1170,"To solve this problem, we will need end-point authentication,  that is, a mechanism that will allow us to
determine with certainty if a message originates from where we think it does."
1171,"Once again, we encourage
you to think about how this can be done for network applications and protocols as you progress through
the chapters of this book."
1172,We will explore mechanisms for end-point authentication in Chapter 8.
1173,"In closing this section, it’s worth considering how the Internet got to be such an insecure place in the first
place."
1174,"The answer, in essence, is that the Internet was originally designed to be that way, based on the
model of “a group of mutually trusting users attached to a transparent network” [Blumenthal 2001]—a
model in which (by definition) there is no need for security."
1175,"Many aspects of the original Internet
architecture deeply reflect this notion of mutual trust."
1176,"For example, the ability for one user to send apacket to any other user is the default rather than a requested/granted capability, and user identity is
taken at declared face value, rather than being authenticated by default."
1177,"But today’s Internet certainly does not involve “mutually trusting users.” Nonetheless, today’s users still
need to communicate when they don’t necessarily trust each other, may wish to communicateanonymously, may communicate indirectly through third parties (e.g., Web caches, which we’ll study in
Chapter 2, or mobility-assisting agents, which we’ll study in Chapter 7), and may distrust the hardware,
software, and even the air through which they communicate."
1178,"We now have many security-related
challenges before us as we progress through this book: We should seek defenses against sniffing, end-point masquerading, man-in-the-middle attacks, DDoS attacks, malware, and more."
1179,We should keep inmind that communication among mutually trusted users is the exception rather than the rule.
1180,"Welcometo the world of modern computer networking!1.7 History of Computer Networking and the Internet
Sections 1.1 through 1.6 presented an overview of the technology of computer networking and the
Internet."
1181,"You should know enough now to impress your family and friends! However, if you really want to
be a big hit at the next cocktail party, you should sprinkle your discourse with tidbits about the
fascinating history of the Internet [Segaller 1998]."
1182,"1.7.1 The Development of Packet Switching: 1961–1972
The field of computer networking and today’s Internet trace their beginnings back to the early 1960s,when the telephone network was the world’s dominant communication network."
1183,"Recall from Section 1.3
that the telephone network uses circuit switching to transmit information from a sender to a receiver—an
appropriate choice given that voice is transmitted at a constant rate between sender and receiver."
1184,"Giventhe increasing importance of computers in the early 1960s and the advent of timeshared computers, it
was perhaps natural to consider how to hook computers together so that they could be shared among
geographically distributed users."
1185,"The traffic generated by such users was likely to be bursty—intervals
of activity, such as the sending of a command to a remote computer, followed by periods of inactivity
while waiting for a reply or while contemplating the received response."
1186,"Three research groups around the world, each unaware of the others’ work [Leiner 1998], began
inventing packet switching as an efficient and robust alternative to circuit switching."
1187,"The first published
work on packet-switching techniques was that of Leonard Kleinrock [Kleinrock 1961 ; Kleinrock 1964],
then a graduate student at MIT."
1188,"Using queuing theory, Kleinrock’s work elegantly demonstrated theeffectiveness of the packet-switching approach for bursty traffic sources."
1189,"In 1964, Paul Baran [Baran
1964]  at the Rand Institute had begun investigating the use of packet switching for secure voice over
military networks, and at the National Physical Laboratory in England, Donald Davies and Roger
Scantlebury were also developing their ideas on packet switching."
1190,"The work at MIT, Rand, and the NPL laid the foundations for today’s Internet."
1191,"But the Internet also has a
long history of a let’s-build-it-and-demonstrate-it attitude that also dates back to the 1960s."
1192,J.
1193,C.
1194,R.
1195,"Licklider [DEC 1990]  and Lawrence Roberts, both colleagues of Kleinrock’s at MIT, went on to lead the
computer science program at the Advanced Research Projects Agency (ARPA) in the United States.Roberts published an overall plan for the ARPAnet [Roberts 1967] , the first packet-switched computer
network and a direct ancestor of today’s public Internet."
1196,"On Labor Day in 1969, the first packet switch
was installed at UCLA under Kleinrock’s supervision, and three additional packet switches were installedshortly thereafter at the Stanford Research Institute (SRI), UC Santa Barbara, and the University of Utah
(Figure 1.26)."
1197,The fledgling precursor to the Internet was four nodes large by the end of 1969.
1198,"Kleinrock
recalls the very first use of the network to perform a remote login from UCLA to SRI, crashing the
system [Kleinrock 2004] ."
1199,"By 1972, ARPAnet had grown to approximately 15 nodes and was given its first public demonstration by
Robert Kahn."
1200,"The first host-to-host protocol between ARPAnet end systems, known as the network-
control protocol (NCP), was completed [RFC 001]."
1201,"With an end-to-end protocol available, applications
could now be written."
1202,Ray Tomlinson wrote the first e-mail program in 1972.
1203,"1.7.2 Proprietary Networks and Internetworking: 1972–1980
The initial ARPAnet was a single, closed network."
1204,"In order to communicate with an ARPAnet host, one
had to be actually attached to another ARPAnet IMP."
1205,"In the early to mid-1970s, additional stand-alonepacket-switching networks besides ARPAnet came into being: ALOHANet, a microwave network linking
universities on the Hawaiian islands [Abramson 1970] , as well as DARPA’s packet-satellite [RFC 829]Figure 1.26 An early packet switch
and packet-radio networks [Kahn 1978]; Telenet, a BBN commercial packet- ­switching network based
on ARPAnet technology; Cyclades, a French packet-switching network pioneered by Louis Pouzin
[Think 2012]; Time-sharing networks such as Tymnet and the GE Information Services network, among
others, in the late 1960s and early 1970s [Schwartz 1977] ; IBM’s SNA (1969–1974), which paralleled
the ARPAnet work [Schwartz 1977] .The number of networks was growing."
1206,"With perfect hindsight we can see that the time was ripe for
developing an encompassing architecture for connecting networks together."
1207,"Pioneering work on
interconnecting networks (under the sponsorship of the Defense Advanced Research Projects Agency
(DARPA)), in essence creating a network of networks, was done by Vinton Cerf and Robert Kahn [Cerf
1974] ; the term internetting  was coined to describe this work."
1208,These architectural principles were embodied in TCP.
1209,"The early versions of TCP, however, were quite
different from today’s TCP."
1210,The early versions of TCP combined a reliable in-sequence delivery of datavia end-system retransmission (still part of today’s TCP) with forwarding functions (which today areperformed by IP).
1211,"Early experimentation with TCP, combined with the recognition of the importance ofan unreliable, non-flow-controlled, end-to-end transport service for applications such as packetizedvoice, led to the separation of IP out of TCP and the development of the UDP protocol."
1212,"The three keyInternet protocols that we see today—TCP, UDP, and IP—were conceptually in place by the end of the1970s."
1213,"In addition to the DARPA Internet-related research, many other important networking activities were
underway."
1214,"In Hawaii, Norman Abramson was developing ALOHAnet, a packet-based radio network thatallowed multiple remote sites on the Hawaiian Islands to communicate with each other."
1215,"The ALOHA
protocol [Abramson 1970]  was the first multiple-access protocol, allowing geographically distributed
users to share a single broadcast communication medium (a radio ­frequency)."
1216,"Metcalfe and Boggs
built on Abramson’s multiple-access protocol work when they developed the Ethernet protocol [Metcalfe
1976]  for wire-based shared broadcast networks."
1217,"Interestingly, Metcalfe and Boggs’ Ethernet protocol
was motivated by the need to connect multiple PCs, printers, and shared disks [Perkins 1994] ."
1218,"Twenty-
five years ago, well before the PC revolution and the explosion of networks, Metcalfe and Boggs were
laying the foundation for today’s PC LANs.
1.7.3 A Proliferation of Networks: 1980–1990
By the end of the 1970s, approximately two hundred hosts were connected to the ARPAnet."
1219,"By the endof the 1980s the number of hosts connected to the public ­Internet, a confederation of networks looking
much like today’s Internet, would reach a hundred thousand."
1220,The 1980s would be a time of tremendousgrowth.
1221,"Much of that growth resulted from several distinct efforts to create computer networks linking universities
together."
1222,BITNET provided e-mail and file transfers among several universities in the Northeast.
1223,CSNET(computer science network) was formed to link university researchers who did not have access toARPAnet.
1224,"In 1986, NSFNET was created to provide access to NSF-sponsored supercomputing centers.Starting with an initial backbone speed of 56 kbps, NSFNET’s backbone would be running at 1.5 Mbpsby the end of the decade and would serve as a primary backbone linking regional networks.In the ARPAnet community, many of the final pieces of today’s Internet architecture were falling into
place."
1225,"January 1, 1983 saw the official deployment of TCP/IP as the new standard host protocol for
ARPAnet (replacing the NCP protocol)."
1226,"The transition [RFC 801] from NCP to TCP/IP was a flag day
event—all hosts were required to transfer over to TCP/IP as of that day."
1227,"In the late 1980s, importantextensions were made to TCP to implement host-based congestion control [Jacobson 1988]."
1228,"The DNS,
used to map between a human-readable Internet name (for example, gaia.cs.umass.edu) and its 32-bitIP address, was also developed [RFC 1034] ."
1229,"Paralleling this development of the ARPAnet (which was for the most part a US effort), in the early
1980s the French launched the Minitel project, an ambitious plan to bring data networking intoeveryone’s home."
1230,"Sponsored by the French government, the Minitel system consisted of a publicpacket-switched network (based on the X.25 protocol suite), Minitel servers, and inexpensive terminalswith built-in low-speed modems."
1231,"The Minitel became a huge success in 1984 when the French
government gave away a free Minitel terminal to each French household that wanted one."
1232,"Minitel sites
included free sites—such as a telephone directory site—as well as private sites, which collected ausage-based fee from each user."
1233,"At its peak in the mid 1990s, it offered more than 20,000 services,ranging from home banking to specialized research databases."
1234,The Minitel was in a large proportion ofFrench homes 10 years before most Americans had ever heard of the Internet.
1235,"1.7.4 The Internet Explosion: The 1990s
The 1990s were ushered in with a number of events that symbolized the continued evolution and thesoon-to-arrive commercialization of the Internet."
1236,"ARPAnet, the progenitor of the Internet, ceased toexist."
1237,"In 1991, NSFNET lifted its restrictions on the use of NSFNET for commercial purposes."
1238,"NSFNETitself would be decommissioned in 1995, with Internet backbone traffic being carried by commercialInternet Service Providers."
1239,"The main event of the 1990s was to be the emergence of the World Wide Web application, which
brought the Internet into the homes and businesses of millions of people worldwide."
1240,"The Web served asa platform for enabling and deploying hundreds of new applications that we take for granted today,including search (e.g., Google and Bing) Internet commerce (e.g., Amazon and eBay) and socialnetworks (e.g., Facebook)."
1241,"The Web was invented at CERN by Tim Berners-Lee between 1989 and 1991 [Berners-Lee 1989] ,
based on ideas originating in earlier work on hypertext from the 1940s by Vannevar Bush [Bush 1945]
and since the 1960s by Ted Nelson [Xanadu 2012]."
1242,"Berners-Lee and his associates developed initial
versions of HTML, HTTP, a Web server, and a browser—the four key components of the Web."
1243,"Around
the end of 1993 there were about two hundred Web servers in operation, this collection of servers beingjust a harbinger of what was about to come."
1244,"At about this time several researchers were developing
Web browsers with GUI interfaces, including Marc Andreessen, who along with Jim Clark, formed
Mosaic Communications, which later became Netscape Communications Corporation [Cusumano
1998 ; Quittner 1998]."
1245,"By 1995, university students were using Netscape browsers to surf the Web on a
daily basis."
1246,"At about this time companies—big and small—began to operate Web servers and transact
commerce over the Web."
1247,"In 1996, Microsoft started to make browsers, which started the browser war
between Netscape and Microsoft, which Microsoft won a few years later [Cusumano 1998]."
1248,"The second half of the 1990s was a period of tremendous growth and innovation for the Internet, with
major corporations and thousands of startups creating Internet products and services."
1249,"By the end of themillennium the Internet was supporting hundreds of popular applications, including four killerapplications:
E-mail, including attachments and Web-accessible e-mail
The Web, including Web browsing and Internet commerce
Instant messaging, with contact lists
Peer-to-peer file sharing of MP3s, pioneered by Napster
Interestingly, the first two killer applications came from the research community, whereas the last twowere created by a few young entrepreneurs."
1250,The period from 1995 to 2001 was a roller-coaster ride for the Internet in the financial markets.
1251,"Before
they were even profitable, hundreds of Internet startups made initial public offerings and started to betraded in a stock market."
1252,Many companies were valued in the billions of dollars without having anysignificant revenue streams.
1253,"The Internet stocks collapsed in 2000–2001, and many startups shut down.Nevertheless, a number of companies emerged as big winners in the Internet space, includingMicrosoft, Cisco, Yahoo, e-Bay, Google, and Amazon."
1254,"1.7.5 The New Millennium
Innovation in computer networking continues at a rapid pace."
1255,"Advances are being made on all fronts,including deployments of faster routers and higher transmission speeds in both access networks and innetwork backbones."
1256,"But the following developments merit special attention:
Since the beginning of the millennium, we have been seeing aggressive deployment of broadband
Internet access to homes—not only cable modems and DSL but also fiber to the home, as discussed
in Section 1.2. This high-speed Internet access has set the stage for a wealth of video applications,
including the distribution of user-generated video (for example, YouTube), on-demand streaming of
movies and television shows (e.g., Netflix), and multi-person video conference (e.g., Skype,Facetime, and Google Hangouts)."
1257,"The increasing ubiquity of high-speed (54 Mbps and higher) public WiFi networks and medium-
speed (tens of Mbps) Internet access via 4G cellular telephony networks is not only making it
possible to remain constantly connected while on the move, but also enabling new location-specificapplications such as Yelp, Tinder, Yik Yak, and Waz."
1258,"The number of wireless devices connecting to
the Internet surpassed the number of wired devices in 2011."
1259,"This high-speed wireless access has
set the stage for the rapid emergence of hand-held computers (iPhones, Androids, iPads, and so
on), which enjoy constant and untethered access to the Internet."
1260,"Online social networks—such as Facebook, Instagram, Twitter, and WeChat (hugely popular in
China)—have created massive people networks on top of the Internet."
1261,"Many of these social
networks are extensively used for messaging as well as photo sharing."
1262,Many Internet users today“live” primarily within one or more social networks.
1263,"Through their APIs, the online social networks
create platforms for new networked applications and distributed games."
1264,"As discussed in Section 1.3.3, online service providers, such as Google and Microsoft, have
deployed their own extensive private networks, which not only connect together their globally
distributed data centers, but are used to bypass the Internet as much as possible by peering directlywith lower-tier ISPs. As a result, Google provides search results and e-mail access almost
instantaneously, as if their data centers were running within one’s own computer."
1265,"Many Internet commerce companies are now running their applications in the “cloud”—such as in
Amazon’s EC2, in Google’s Application Engine, or in Microsoft’s Azure."
1266,"Many companies and
universities have also migrated their Internet applications (e.g., e-mail and Web hosting) to thecloud."
1267,"Cloud companies not only provide applications scalable computing and storage environments,
but also provide the applications implicit access to their high-performance private networks.1.8 Summary
In this chapter we’ve covered a tremendous amount of material! We’ve looked at the various pieces of
hardware and software that make up the Internet in particular and computer networks in general."
1268,"Westarted at the edge of the network, looking at end systems and applications, and at the transport serviceprovided to the applications running on the end systems."
1269,We also looked at the link-layer technologiesand physical media typically found in the access network.
1270,"We then dove deeper inside the network, into
the network core, identifying packet switching and circuit switching as the two basic approaches for
transporting data through a telecommunication network, and we examined the strengths andweaknesses of each approach."
1271,"We also examined the structure of the global Internet, learning that theInternet is a network of networks."
1272,"We saw that the Internet’s hierarchical structure, consisting of higher-and lower-tier ISPs, has allowed it to scale to include thousands of networks."
1273,"In the second part of this introductory chapter, we examined several topics central to the field of
computer networking."
1274,"We first examined the causes of delay, throughput and packet loss in a packet-
switched network."
1275,"We developed simple quantitative models for transmission, propagation, and queuing
delays as well as for throughput; we’ll make extensive use of these delay models in the homework
problems throughout this book."
1276,"Next we examined protocol layering and service models, keyarchitectural principles in networking that we will also refer back to throughout this book."
1277,We alsosurveyed some of the more prevalent security attacks in the Internet day.
1278,We finished our introduction tonetworking with a brief history of computer networking.
1279,The first chapter in itself constitutes a mini-course in computer networking.
1280,"So, we have indeed covered a tremendous amount of ground in this first chapter! If you’re a bit
overwhelmed, don’t worry."
1281,"In the following chapters we’ll revisit all of these ideas, covering them in
much more detail (that’s a promise, not a threat!)."
1282,"At this point, we hope you leave this chapter with astill-developing intuition for the pieces that make up a network, a still-developing command of thevocabulary of networking (don’t be shy about referring back to this chapter), and an ever-growing desireto learn more about networking."
1283,That’s the task ahead of us for the rest of this book.
1284,"Road-Mapping This Book
Before starting any trip, you should always glance at a road map in order to become familiar with themajor roads and junctures that lie ahead."
1285,"For the trip we are about to embark on, the ultimatedestination is a deep understanding of the how, what, and why of computer networks."
1286,"Our road map isthe sequence of chapters of this book:
1."
1287,"Computer Networks and the Internet
2."
1288,"Application Layer
3."
1289,"Transport Layer
4."
1290,"Network Layer: Data Plane
5."
1291,"Network Layer: Control Plane
6."
1292,"The Link Layer and LANs
7."
1293,"Wireless and Mobile Networks
8."
1294,"Security in Computer Networks
9."
1295,"Multimedia Networking
Chapters 2 through 6 are the five core chapters of this book."
1296,"You should notice that these chapters are
organized around the top four layers of the five-layer Internet protocol."
1297,"Further note that our journey will
begin at the top of the Internet protocol stack, namely, the application layer, and will work its way
downward."
1298,"The rationale behind this top-down journey is that once we understand the applications, wecan understand the network services needed to support these applications."
1299,"We can then, in turn,examine the various ways in which such services might be implemented by a network architecture.Covering applications early thus provides motivation for the remainder of the text."
1300,"The second half of the book— Chapters 7 through 9—zooms in on three enormously important (and
somewhat independent) topics in modern computer networking."
1301,"In Chapter 7, we examine wireless and
mobile networks, including wireless LANs (including WiFi and Bluetooth), Cellular telephony networks
(including GSM, 3G, and 4G), and mobility (in both IP and GSM networks)."
1302,"Chapter 8, which addresses
security in computer networks, first looks at the underpinnings of encryption and network security, and
then we examine how the basic theory is being applied in a broad range of Internet contexts."
1303,"The lastchapter, which addresses multimedia networking, examines audio and video applications such asInternet phone, video conferencing, and streaming of stored media."
1304,"We also look at how a packet-switched network can be designed to provide consistent quality of service to audio and videoapplications.Homework Problems and Questions
Chapter 1 Review Questions
SECTION 1.1
SECTION 1.2
SECTION 1.3R1."
1305,What is the difference between a host and an end system?
1306,"List several different types of end
systems."
1307,Is a Web server an end system?
1308,R2.
1309,The word protocol  is often used to describe diplomatic relations.
1310,"How does Wikipedia
describe diplomatic protocol?R3."
1311,Why are standards important for protocols?
1312,R4.
1313,List six access technologies.
1314,"Classify each one as home access, enterprise access, or wide-
area wireless access."
1315,R5.
1316,Is HFC transmission rate dedicated or shared among users?
1317,"Are collisions possible in a
downstream HFC channel?"
1318,Why or why not?
1319,R6.
1320,List the available residential access technologies in your city.
1321,"For each type of access,
provide the advertised downstream rate, upstream rate, and monthly price."
1322,R7.
1323,What is the transmission rate of Ethernet LANs?
1324,R8.
1325,What are some of the physical media that Ethernet can run over?R9.
1326,"Dial-up modems, HFC, DSL and FTTH are all used for residential access."
1327,"For each of these
access technologies, provide a range of ­transmission rates and comment on whether the
transmission rate is shared or dedicated."
1328,R10.
1329,Describe the most popular wireless Internet access technologies today.
1330,"­Compare and
contrast them."
1331,R11.
1332,Suppose there is exactly one packet switch between a sending host and a receiving host.
1333,"The transmission rates between the sending host and the switch and between the switch and the
receiving host are R and R , respectively."
1334,"Assuming that the switch uses store-and-forward
packet switching, what is the total end-to-end delay to send a packet of length L?"
1335,"(Ignore
queuing, propagation delay, and processing delay.) 1 2SECTION 1.4R12."
1336,What advantage does a circuit-switched network have over a packet-switched network?
1337,What advantages does TDM have over FDM in a circuit-switched network?
1338,R13.
1339,Suppose users share a 2 Mbps link.
1340,"Also suppose each user transmits continuously at 1
Mbps when transmitting, but each user transmits only 20 percent of the time."
1341,"(See the
discussion of statistical multiplexing in Section 1.3 .)
a."
1342,"When circuit switching is used, how many users can be supported?"
1343,b.
1344,"For the remainder of this problem, suppose packet switching is used."
1345,"Why will there be
essentially no queuing delay before the link if two or fewer users transmit at the same
time?"
1346,Why will there be a queuing delay if three users transmit at the same time?
1347,c.
1348,Find the probability that a given user is transmitting.
1349,d.
1350,Suppose now there are three users.
1351,"Find the probability that at any given time, all three
users are transmitting simultaneously."
1352,"Find the fraction of time during which the queue
grows."
1353,R14.
1354,Why will two ISPs at the same level of the hierarchy often peer with each other?
1355,"How does
an IXP earn money?"
1356,R15.
1357,Some content providers have created their own networks.
1358,Describe Google’s network.
1359,What motivates content providers to create these networks?
1360,R16.
1361,Consider sending a packet from a source host to a destination host over a fixed route.
1362,"List
the delay components in the end-to-end delay."
1363,"Which of these delays are constant and which
are variable?"
1364,R17.
1365,Visit the Transmission Versus Propagation Delay applet at the companion Web site.
1366,"Among the rates, propagation delay, and packet sizes available, find a combination for which the
sender finishes transmitting before the first bit of the packet reaches the receiver."
1367,Find anothercombination for which the first bit of the packet reaches the receiver before the sender finishestransmitting.
1368,R18.
1369,"How long does it take a packet of length 1,000 bytes to propagate over a link of distance
2,500 km, propagation speed  m/s, and transmission rate 2 Mbps?"
1370,"More generally, how
long does it take a packet of length L to propagate over a link of distance d, propagation speed
s, and transmission rate R bps?"
1371,Does this delay depend on packet length?
1372,"Does this delay
depend on transmission rate?"
1373,R19.
1374,Suppose Host A wants to send a large file to Host B.
1375,"The path from Host A to Host B has
three links, of rates 
a."
1376,"Assuming no other traffic in the network, what is the throughput for the file transfer?"
1377,b.
1378,Suppose the file is 4 million bytes.
1379,"Dividing the file size by the throughput, roughly howlong will it take to transfer the file to Host B?"
1380,c.
1381,"Repeat (a) and (b), but now with R reduced to 100 kbps.2.5⋅108
R1=500 kbps, R2=2 Mbps, and R3=1 Mbps."
1382,"2SECTION 1.5
SECTION 1.6
ProblemsR20."
1383,Suppose end system A wants to send a large file to end system B.
1384,"At a very high level,
describe how end system A creates packets from the file."
1385,"When one of these packets arrives to
a router, what information in the packet does the router use to determine the link onto which thepacket is forwarded?"
1386,"Why is packet switching in the Internet analogous to driving from one city
to another and asking directions along the way?"
1387,R21.
1388,Visit the Queuing and Loss applet at the companion Web site.
1389,"What is the maximum
emission rate and the minimum transmission rate?"
1390,"With those rates, what is the traffic intensity?"
1391,Run the applet with these rates and determine how long it takes for packet loss to occur.
1392,Thenrepeat the experiment a second time and determine again how long it takes for packet loss tooccur.
1393,Are the values different?
1394,Why or why not?
1395,R22.
1396,List five tasks that a layer can perform.
1397,"Is it possible that one (or more) of these tasks could
be performed by two (or more) layers?"
1398,R23.
1399,What are the five layers in the Internet protocol stack?
1400,"What are the principal
responsibilities of each of these layers?"
1401,R24.
1402,What is an application-layer message?
1403,A transport-layer segment?
1404,"A network-layer
datagram?"
1405,A link-layer frame?
1406,R25.
1407,Which layers in the Internet protocol stack does a router process?
1408,"Which layers does a
link-layer switch process?"
1409,Which layers does a host process?
1410,R26.
1411,What is the difference between a virus and a worm?
1412,R27.
1413,Describe how a botnet can be created and how it can be used for a DDoS attack.R28.
1414,Suppose Alice and Bob are sending packets to each other over a computer network.
1415,"Suppose Trudy positions herself in the network so that she can capture all the packets sent by
Alice and send whatever she wants to Bob; she can also capture all the packets sent by Bob andsend whatever she wants to Alice."
1416,List some of the malicious things Trudy can do from thisposition.
1417,P1.
1418,"Design and describe an application-level protocol to be used between an automatic teller
machine and a bank’s centralized computer."
1419,"Your protocol should allow a user’s card and
password to be verified, the account balance (which is maintained at the centralized computer)to be queried, and an account withdrawal to be made (that is, money disbursed to the user).Your protocol entities should be able to handle the all-too-common case in which there is not
enough money in the account to cover the withdrawal."
1420,"Specify your protocol by listing the
messages exchanged and the action taken by the automatic teller machine or the bank’scentralized computer on transmission and receipt of messages."
1421,"Sketch the operation of yourprotocol for the case of a simple withdrawal with no errors, using a diagram similar to that in
Figure 1.2 ."
1422,"Explicitly state the assumptions made by your protocol about the underlying end-to-
end transport service."
1423,P2.
1424,"Equation  1.1 gives a formula for the end-to-end delay of sending one packet of length L
over N links of transmission rate R."
1425,"Generalize this formula for sending P such packets back-to-
back over the N links."
1426,P3.
1427,"Consider an application that transmits data at a steady rate (for example, the sendergenerates an N-bit unit of data every k time units, where k is small and fixed)."
1428,"Also, when such
an application starts, it will continue running for a relatively long period of time."
1429,"Answer thefollowing questions, briefly justifying your answer:
a."
1430,"Would a packet-switched network or a circuit-switched network be more appropriate for
this application?"
1431,Why?
1432,b.
1433,Suppose that a packet-switched network is used and the only traffic in this networkcomes from such applications as described above.
1434,"Furthermore, assume that the sum of
the application data rates is less than the capacities of each and every link."
1435,Is some formof congestion control needed?
1436,Why?
1437,P4.
1438,Consider the circuit-switched network in Figure 1.13 .
1439,"Recall that there are 4 circuits on
each link."
1440,"Label the four switches A, B, C, and D, going in the clockwise direction."
1441,a.
1442,"What is the maximum number of simultaneous connections that can be in progress at
any one time in this network?"
1443,b.
1444,Suppose that all connections are between switches A and C.
1445,What is the maximumnumber of simultaneous connections that can be in progress?
1446,c.
1447,"Suppose we want to make four connections between switches A and C, and another fourconnections between switches B and D."
1448,"Can we route these calls through the four links
to accommodate all eight ­connections?"
1449,P5.
1450,Review the car-caravan analogy in Section 1.4 .
1451,"Assume a propagation speed of 100
km/hour."
1452,a.
1453,"Suppose the caravan travels 150 km, beginning in front of one tollbooth, passing through
a second tollbooth, and finishing just after a third tollbooth."
1454,What is the end-to-end delay?
1455,b.
1456,"Repeat (a), now assuming that there are eight cars in the caravan instead of ten."
1457,P6.
1458,"This elementary problem begins to explore propagation delay and transmission delay, twocentral concepts in data networking."
1459,"Consider two hosts, A and B, connected by a single link of
rate R bps."
1460,"Suppose that the two hosts are separated by m meters, and suppose thepropagation speed along the link is s meters/sec."
1461,"Host A is to send a packet of size L bits to
Host B."
1462,"Exploring propagation delay and transmission delay
a."
1463,"Express the propagation delay, d, in terms of m and s."
1464,b.
1465,"Determine the transmission time of the packet, d, in terms of L and R."
1466,c.
1467,"Ignoring processing and queuing delays, obtain an expression for the end-to-end delay."
1468,d.
1469,Suppose Host A begins to transmit the packet at time .
1470,"At time  d , where is the
last bit of the packet?"
1471,e.
1472,Suppose d is greater than d .
1473,"At time , where is the first bit of the packet?"
1474,f.
1475,Suppose d is less than d .
1476,"At time , where is the first bit of the packet?"
1477,g.
1478,"Suppose , , and  Find the distance m so that d  equals
d."
1479,P7.
1480,"In this problem, we consider sending real-time voice from Host A to Host B over a packet-
switched network (VoIP)."
1481,Host A converts analog voice to a digital 64 kbps bit stream on the fly.
1482,Host A then groups the bits into 56-byte packets.
1483,There is one link between Hosts A and B; itstransmission rate is 2 Mbps and its propagation delay is 10 msec.
1484,"As soon as Host A gathers apacket, it sends it to Host B."
1485,"As soon as Host B receives an entire packet, it converts the
packet’s bits to an analog signal."
1486,"How much time elapses from the time a bit is created (from the
original analog signal at Host A) until the bit is decoded (as part of the analog signal at Host B)?"
1487,P8.
1488,Suppose users share a 3 Mbps link.
1489,"Also suppose each user requires 150 kbps when
transmitting, but each user transmits only 10 percent of the time."
1490,"(See the discussion of packet
switching versus circuit switching in Section 1.3 .)
a."
1491,"When circuit switching is used, how many users can be supported?"
1492,b.
1493,"For the remainder of this problem, suppose packet switching is used."
1494,"Find the probability
that a given user is transmitting."
1495,c.
1496,Suppose there are 120 users.
1497,"Find the probability that at any given time, exactly n users
are transmitting simultaneously."
1498,"( Hint: Use the binomial distribution.)
d."
1499,Find the probability that there are 21 or more users transmitting ­simultaneously.
1500,P9.
1501,"Consider the discussion in Section 1.3 of packet switching versus circuit switching in which
an example is provided with a 1 Mbps link."
1502,"Users are generating data at a rate of 100 kbps when
busy, but are busy generating data only with probability ."
1503,"Suppose that the 1 Mbps link isprop
trans
t=0 t=trans
prop trans t=dtrans
prop trans t=dtrans
s=2.5⋅108 L=120 bits R=56 kbps."
1504,"prop
trans
p=0.1replaced by a 1 Gbps link."
1505,a.
1506,"What is N, the maximum number of users that can be supported simultaneously under
circuit switching?"
1507,b.
1508,Now consider packet switching and a user population of M users.
1509,"Give a formula (in
terms of p, M, N) for the probability that more than N users are sending data."
1510,P10.
1511,"Consider a packet of length L that begins at end system A and travels over three links to a
destination end system."
1512,These three links are connected by two packet switches.
1513,"Let d, s, and
R denote the length, propagation speed, and the transmission rate of link i, for ."
1514,"The
packet switch delays each packet by d."
1515,"Assuming no queuing delays, in terms of d, s, R,
, and L, what is the total end-to-end delay for the packet?"
1516,"Suppose now the packet is
1,500 bytes, the propagation speed on all three links is  the transmission rates of all
three links are 2 Mbps, the packet switch processing delay is 3 msec, the length of the first link is
5,000 km, the length of the second link is 4,000 km, and the length of the last link is 1,000 km.For these values, what is the end-to-end delay?"
1517,P11.
1518,"In the above problem, suppose  and ."
1519,"Further suppose the packet
switch does not store-and-forward packets but instead immediately transmits each bit it receives
before waiting for the entire packet to arrive."
1520,What is the end-to-end delay?
1521,P12.
1522,"A packet switch receives a packet and determines the outbound link to which the packet
should be forwarded."
1523,"When the packet arrives, one other packet is halfway done being
transmitted on this outbound link and four other packets are waiting to be transmitted."
1524,Packetsare transmitted in order of arrival.
1525,"Suppose all packets are 1,500 bytes and the link rate is 2Mbps."
1526,What is the queuing delay for the packet?
1527,"More generally, what is the queuing delay when
all packets have length L, the transmission rate is R, x bits of the currently-being-transmitted
packet have been transmitted, and n packets are already in the queue?"
1528,P13.
1529,a.
1530,"Suppose N packets arrive simultaneously to a link at which no packets are currently
being transmitted or queued."
1531,"Each packet is of length L and the link has transmission
rate R."
1532,What is the average queuing delay for the N packets?
1533,b.
1534,Now suppose that N such packets arrive to the link every LN/R seconds.
1535,"What is the
average queuing delay of a packet?"
1536,P14.
1537,Consider the queuing delay in a router buffer.
1538,"Let I denote traffic intensity; that is, ."
1539,Suppose that the queuing delay takes the form  for .
1540,a.
1541,"Provide a formula for the total delay, that is, the queuing delay plus the transmission
delay."
1542,b.
1543,Plot the total delay as a function of L /R.
1544,P15.
1545,"Let a denote the rate of packets arriving at a link in packets/sec, and let µ denote the link’s
transmission rate in packets/sec."
1546,"Based on the formula for the total delay (i.e., the queuing delayii
i i=1,2,3
proc ii i
(i=1,2,3)
2.5⋅108m/s,
R1=R2=R3=R dproc=0
I=La/R
IL/R(1−I) I<1plus the transmission delay) derived in the previous problem, derive a formula for the total delay
in terms of a and µ."
1547,P16.
1548,Consider a router buffer preceding an outbound link.
1549,"In this problem, you will use Little’sformula, a famous formula from queuing theory."
1550,"Let N denote the average number of packets in
the buffer plus the packet being transmitted."
1551,Let a denote the rate of packets arriving at the link.
1552,"Let d denote the average total delay (i.e., the queuing delay plus the transmission delay)
experienced by a packet."
1553,Little’s formula is .
1554,"Suppose that on average, the buffer contains
10 packets, and the average packet queuing delay is 10 msec."
1555,"The link’s transmission rate is
100 packets/sec."
1556,"Using Little’s formula, what is the average packet arrival rate, assuming thereis no packet loss?"
1557,P17.
1558,a.
1559,"Generalize Equation  1.2 in Section 1.4.3 for heterogeneous processing rates,
transmission rates, and propagation delays."
1560,b.
1561,"Repeat (a), but now also suppose that there is an average queuing delay of d  at each
node."
1562,P18.
1563,"Perform a Traceroute between source and destination on the same continent at three
different hours of the day."
1564,"Using Traceroute to discover network paths and measure network delay
a."
1565,Find the average and standard deviation of the round-trip delays at each of the threehours.
1566,b.
1567,Find the number of routers in the path at each of the three hours.
1568,Did the paths changeduring any of the hours?
1569,c.
1570,Try to identify the number of ISP networks that the Traceroute packets pass through fromsource to destination.
1571,"Routers with similar names and/or similar IP addresses should be
considered as part of the same ISP."
1572,"In your experiments, do the largest delays occur atthe peering interfaces between adjacent ISPs?"
1573,d.
1574,Repeat the above for a source and destination on different continents.
1575,"Compare the
intra-continent and inter-continent results."
1576,P19.
1577,a.
1578,Visit the site www.traceroute.org and perform traceroutes from two different cities inFrance to the same destination host in the United States.
1579,"How many links are the sameN=a⋅d
queuein the two traceroutes?"
1580,Is the transatlantic link the same?
1581,b.
1582,Repeat (a) but this time choose one city in France and another city in Germany.
1583,c.
1584,"Pick a city in the United States, and perform traceroutes to two hosts, each in a different
city in China."
1585,How many links are common in the two traceroutes?
1586,"Do the two
traceroutes diverge before reaching China?"
1587,P20.
1588,Consider the throughput example corresponding to Figure 1.20(b) .
1589,"Now suppose that
there are M client-server pairs rather than 10."
1590,"Denote R, R, and R for the rates of the server
links, client links, and network link."
1591,"Assume all other links have abundant capacity and that there
is no other traffic in the network besides the traffic generated by the M client-server pairs."
1592,"Derive
a general expression for throughput in terms of R, R, R, and M."
1593,P21.
1594,Consider Figure 1.19(b) .
1595,"Now suppose that there are M paths between the server and the
client."
1596,No two paths share any link.
1597,"Path  consists of N links with transmission rates
."
1598,"If the server can only use one path to send data to the client, what is the
maximum throughput that the server can achieve?"
1599,"If the server can use all M paths to send data,
what is the maximum throughput that the server can achieve?P22."
1600,Consider Figure 1.19(b) .
1601,"Suppose that each link between the server and the client has a
packet loss probability p, and the packet loss probabilities for these links are independent."
1602,"What
is the probability that a packet (sent by the server) is successfully received by the receiver?"
1603,"If a
packet is lost in the path from the server to the client, then the server will re-transmit the packet.On average, how many times will the server re-transmit the packet in order for the client tosuccessfully receive the packet?"
1604,P23.
1605,Consider Figure 1.19(a) .
1606,"Assume that we know the bottleneck link along the path from the
server to the client is the first link with rate R  bits/sec."
1607,"Suppose we send a pair of packets back
to back from the server to the client, and there is no other traffic on this path."
1608,"Assume eachpacket of size L bits, and both links have the same propagation delay d."
1609,a.
1610,What is the packet inter-arrival time at the destination?
1611,"That is, how much time elapses
from when the last bit of the first packet arrives until the last bit of the second packet
arrives?"
1612,b.
1613,"Now assume that the second link is the bottleneck link (i.e., )."
1614,"Is it possible that
the second packet queues at the input queue of the second link?"
1615,Explain.
1616,"Now suppose
that the server sends the second packet T seconds after sending the first packet."
1617,"How
large must T be to ensure no queuing before the second link?"
1618,Explain.
1619,P24.
1620,Suppose you would like to urgently deliver 40 terabytes data from Boston to Los Angeles.
1621,You have available a 100 Mbps dedicated link for data transfer.
1622,"Would you prefer to transmit the
data via this link or instead use FedEx over-night delivery?"
1623,Explain.
1624,P25.
1625,"Suppose two hosts, A and B, are separated by 20,000 kilometers and are connected by a
direct link of  Mbps."
1626,Suppose the propagation speed over the link is  meters/sec.
1627,a.
1628,"Calculate the bandwidth-delay product, .s c
s c
k(k=1,…,M)
R1k,R2k,…,RNk
s
prop
Rc<Rs
R=2 2.5⋅108
R⋅dpropb."
1629,"Consider sending a file of 800,000 bits from Host A to Host B."
1630,"Suppose the file is sent
continuously as one large message."
1631,"What is the maximum number of bits that will be in
the link at any given time?"
1632,c.
1633,Provide an interpretation of the bandwidth-delay product.
1634,d.
1635,What is the width (in meters) of a bit in the link?
1636,Is it longer than a ­football field?
1637,e.
1638,"Derive a general expression for the width of a bit in terms of the propagation speed s, the
transmission rate R, and the length of the link m."
1639,P26.
1640,"Referring to problem P25, suppose we can modify R."
1641,"For what value of R is the width of a
bit as long as the length of the link?"
1642,P27.
1643,Consider problem P25 but now with a link of  Gbps.
1644,a.
1645,"Calculate the bandwidth-delay product, ."
1646,b.
1647,"Consider sending a file of 800,000 bits from Host A to Host B."
1648,"Suppose the file is sent
continuously as one big message."
1649,"What is the maximum number of bits that will be in the
link at any given time?"
1650,c.
1651,What is the width (in meters) of a bit in the link?
1652,P28.
1653,Refer again to problem P25.
1654,a.
1655,"How long does it take to send the file, assuming it is sent continuously?"
1656,b.
1657,"Suppose now the file is broken up into 20 packets with each packet containing 40,000
bits."
1658,"Suppose that each packet is acknowledged by the receiver and the transmission
time of an acknowledgment packet is negligible."
1659,"Finally, assume that the sender cannotsend a packet until the preceding one is acknowledged."
1660,"How long does it take to send
the file?"
1661,c.
1662,Compare the results from (a) and (b).
1663,P29.
1664,"Suppose there is a 10 Mbps microwave link between a geostationary satellite and its base
station on Earth."
1665,Every minute the satellite takes a digital photo and sends it to the base station.
1666,Assume a propagation speed of  meters/sec.
1667,a.
1668,What is the propagation delay of the link?
1669,b.
1670,"What is the bandwidth-delay product, ?"
1671,c.
1672,Let x denote the size of the photo.
1673,"What is the minimum value of x for the microwave link
to be continuously transmitting?"
1674,P30.
1675,"Consider the airline travel analogy in our discussion of layering in Section 1.5 , and the
addition of headers to protocol data units as they flow down the protocol stack."
1676,"Is there an
equivalent notion of header information that is added to passengers and baggage as they movedown the airline protocol stack?"
1677,P31.
1678,"In modern packet-switched networks, including the Internet, the source host segments
long, application-layer messages (for example, an image or a music file) into smaller packetsR=1
R⋅dprop
2.4⋅108
R⋅dpropand sends the packets into the network."
1679,"The receiver then reassembles the packets back into
the original message."
1680,We refer to this process as message  segmentation .
1681,"Figure 1.27 illustrates
the end-to-end transport of a message with and without message segmentation."
1682,"Consider a
message that is  bits long that is to be sent from source to destination in Figure 1.27 ."
1683,Suppose each link in the figure is 2 Mbps.
1684,"Ignore propagation, queuing, and processing delays."
1685,a.
1686,"Consider sending the message from source to destination without message
segmentation."
1687,"How long does it take to move the message from the source host to the
first packet switch?"
1688,"Keeping in mind that each switch uses store-and-forward packetswitching, what is the total time to move the message from source host to destination
host?"
1689,b.
1690,"Now suppose that the message is segmented into 800 packets, with each packet being
10,000 bits long."
1691,"How long does it take to move the first packet from source host to the
first switch?"
1692,"When the first packet is being sent from the first switch to the second switch,the second packet is being sent from the source host to the first switch."
1693,"At what time will
the second packet be fully received at the first switch?"
1694,c.
1695,"How long does it take to move the file from source host to destination host when
message segmentation is used?"
1696,"Compare this result with your answer in part (a) and
comment."
1697," 
Figure 1.27 End-to-end message transport: (a) without message ­segmentation;
(b) with message segmentation
d."
1698,"In addition to reducing delay, what are reasons to use message ­segmentation?"
1699,e.
1700,Discuss the drawbacks of message segmentation.
1701,P32.
1702,Experiment with the Message Segmentation applet at the book’s Web site.
1703,"Do the delays in
the applet correspond to the delays in the previous problem?"
1704,"How do link propagation delays
affect the overall end-to-end delay for packet switching (with message segmentation) and for
message switching?"
1705,P33.
1706,Consider sending a large file of F bits from Host A to Host B.
1707,"There are three links (and two
switches) between A and B, and the links are uncongested (that is, no queuing delays)."
1708,"Host A8⋅106Wireshark Lab
“Tell me and I forget."
1709,Show me and I remember.
1710,"Involve me and I
understand.”
Chinese proverb
One’s understanding of network protocols can often be greatly deepened by seeing them
in action and by playing around with them—observing the sequence of messagesexchanged between two protocol entities, delving into the details of protocol operation,causing protocols to perform certain actions, and observing these actions and theirconsequences."
1711,"This can be done in simulated scenarios or in a real network
environment such as the Internet."
1712,"The Java applets at the textbook Web site take the
first approach."
1713,"In the Wireshark labs, we’ll take the latter approach."
1714,"You’ll run networkapplications in various scenarios using a computer on your desk, at home, or in a lab.You’ll observe the network protocols in your computer, interacting and exchangingmessages with protocol entities executing elsewhere in the Internet."
1715,"Thus, you and yourcomputer will be an integral part of these live labs."
1716,You’ll observe—and you’ll learn—bydoing.
1717,"The basic tool for observing the messages exchanged between executing protocol
entities is called a packet sniffer."
1718,"As the name suggests, a packet sniffer passively
copies (sniffs) messages being sent from and received by your computer; it also displaysthe contents of the various protocol fields of these captured messages."
1719,"A screenshot of
the Wireshark packet sniffer is shown in Figure 1.28."
1720,"Wireshark is a free packet sniffer
that runs on Windows, Linux/Unix, and Mac computers.segments the file into segments of S bits each and adds 80 bits of header to each segment,
forming packets of   S bits."
1721,Each link has a transmission rate of R bps.
1722,"Find the value of S
that minimizes the delay of moving the file from Host A to Host B."
1723,Disregard propagation delay.P34.
1724,"Skype offers a service that allows you to make a phone call from a PC to an ordinary
phone."
1725,"This means that the voice call must pass through both the Internet and through a
telephone network."
1726,"Discuss how this might be done.L=80 +Figure 1.28 A Wireshark screenshot (Wireshark screenshot reprinted by
permission of the Wireshark Foundation.)
Throughout the textbook, you will find Wireshark labs that allow you to explore a number
of the protocols studied in the chapter."
1727,"In this first Wireshark lab, you’ll obtain and installa copy of Wireshark, access a Web site, and capture and examine the protocolmessages being exchanged between your Web browser and the Web server."
1728,"You can find full details about this first Wireshark lab (including instructions about how to
obtain and install Wireshark) at the Web site http:/ /www.pearsonhighered.com/ cs-
resources/ ."
1729,"AN INTERVIEW WITH…
Leonard Kleinrock
Leonard Kleinrock is a professor of computer science at the University of California, Los
Angeles."
1730,"In 1969, his computer at UCLA became the first node of the Internet."
1731,His creation ofpacket-switching principles in 1961 became the technology behind the Internet.
1732,He received hisB.E.E. from the City College of New York (CCNY) and his masters and PhD in electricalengineering from MIT.What made you decide to specialize in networking/Internet technology?
1733,"As a PhD student at MIT in 1959, I looked around and found that most of my classmates were
doing research in the area of information theory and coding theory."
1734,"At MIT, there was the greatresearcher, Claude Shannon, who had launched these fields and had solved most of theimportant problems already."
1735,"The research problems that were left were hard and of lesser
consequence."
1736,So I decided to launch out in a new area that no one else had yet conceived of.
1737,"Remember that at MIT I was surrounded by lots of computers, and it was clear to me that soonthese machines would need to communicate with each other."
1738,"At the time, there was no effectiveway for them to do so, so I decided to develop the technology that would permit efficient andreliable data networks to be created."
1739,What was your first job in the computer industry?
1740,What did it entail?
1741,"I went to the evening session at CCNY from 1951 to 1957 for my bachelor’s degree in electrical
engineering."
1742,"During the day, I worked first as a technician and then as an engineer at a small,industrial electronics firm called Photobell."
1743,"While there, I introduced digital technology to theirproduct line."
1744,"Essentially, we were using photoelectric devices to detect the presence of certain
items (boxes, people, etc.) and the use of a circuit known then as a bistable  multivibrator  was
just the kind of technology we needed to bring digital processing into this field of detection."
1745,"These circuits happen to be the building blocks for computers, and have come to be known as
flip-flops  or switches in today’s vernacular."
1746,"What was going through your mind when you sent the first host-to-host message (from UCLA to
the Stanford Research Institute)?"
1747,"Frankly, we had no idea of the importance of that event."
1748,"We had not prepared a special
message of historic significance, as did so many inventors of the past (Samuel Morse with “Whathath God wrought.” or Alexander Graham Bell with “Watson, come here! I want you.” or NealAmstrong with “That’s one small step for a man, one giant leap for mankind.”) Those guys weresmart! They understood media and public relations."
1749,"All we wanted to do was to login to the SRI
computer."
1750,"So we typed the “L”, which was correctly received, we typed the “o” which was
received, and then we typed the “g” which caused the SRI host computer to crash! So, it turned
out that our message was the shortest and perhaps the most prophetic message ever, namely“Lo!” as in “Lo and behold!”
Earlier that year, I was quoted in a UCLA press release saying that once the network was up
and running, it would be possible to gain access to computer utilities from our homes and officesas easily as we gain access to electricity and telephone connectivity."
1751,"So my vision at that timewas that the Internet would be ubiquitous, always on, always available, anyone with any devicecould connect from any location, and it would be invisible."
1752,"However, I never anticipated that my99-year-old mother would use the Internet—and indeed she did!
What is your vision for the future of networking?"
1753,The easy part of the vision is to predict the infrastructure itself.
1754,"I anticipate that we see
considerable deployment of nomadic computing, mobile devices, and smart spaces."
1755,"Indeed, theavailability of lightweight, inexpensive, high-performance, portable computing, and
communication devices (plus the ubiquity of the Internet) has enabled us to become nomads."
1756,"Nomadic computing refers to the technology that enables end users who travel from place toplace to gain access to Internet services in a transparent fashion, no matter where they traveland no matter what device they carry or gain access to."
1757,"The harder part of the vision is to predictthe applications and services, which have consistently surprised us in dramatic ways (e-mail,search technologies, the World Wide Web, blogs, social networks, user generation, and sharingof music, photos, and videos, etc.)."
1758,We are on the verge of a new class of surprising andinnovative mobile applications delivered to our hand-held devices.
1759,"The next step will enable us to move out from the netherworld of cyberspace to the physical
world of smart spaces."
1760,"Our environments (desks, walls, vehicles, watches, belts, and so on) willcome alive with technology, through actuators, sensors, logic, processing, storage, cameras,microphones, speakers, displays, and communication."
1761,This embedded technology will allow ourenvironment to provide the IP services we want.
1762,"When I walk into a room, the room will know Ientered."
1763,"I will be able to communicate with my environment naturally, as in spoken English; myrequests will generate replies that present Web pages to me from wall displays, through myeyeglasses, as speech, holograms, and so forth."
1764,"Looking a bit further out, I see a networking future that includes the following additional key
components."
1765,"I see intelligent software agents deployed across the network whose function it isto mine data, act on that data, observe trends, and carry out tasks dynamically and adaptively."
1766,"Isee considerably more network traffic generated not so much by humans, but by theseembedded devices and these intelligent software agents."
1767,"I see large collections of self-organizing systems controlling this vast, fast network."
1768,"I see huge amounts of information flashingacross this network instantaneously with this information undergoing enormous processing and
filtering."
1769,The Internet will essentially be a pervasive global nervous system.
1770,"I see all these things
and more as we move headlong through the twenty-first century."
1771,What people have inspired you professionally?
1772,"By far, it was Claude Shannon from MIT, a brilliant researcher who had the ability to relate his
mathematical ideas to the physical world in highly intuitive ways."
1773,He was on my PhD thesiscommittee.
1774,Do you have any advice for students entering the networking/Internet field?
1775,"The Internet and all that it enables is a vast new frontier, full of amazing challenges."
1776,"There is
room for great innovation."
1777,Don’t be constrained by today’s technology.
1778,"Reach out and imagine
what could be and then make it happen.Chapter 2 Application Layer
Network applications are the raisons d’être  of a computer network—if we couldn’t conceive of any useful
applications, there wouldn’t be any need for networking infrastructure and protocols to support them."
1779,"Since the Internet’s inception, numerous useful and entertaining applications have indeed been created.These applications have been the driving force behind the Internet’s success, motivating people in
homes, schools, governments, and businesses to make the Internet an integral part of their daily
activities."
1780,"Internet applications include the classic text-based applications that became popular in the 1970s and
1980s: text e-mail, remote access to computers, file transfers, and newsgroups."
1781,"They include the killer
application of the mid-1990s, the World Wide Web, encompassing Web surfing, search, and electronic
commerce."
1782,"They include instant messaging and P2P file sharing, the two killer applications introducedat the end of the millennium."
1783,"In the new millennium, new and highly compelling applications continue toemerge, including voice over IP and video conferencing such as Skype, Facetime, and Google
Hangouts; user generated video such as YouTube and movies on demand such as Netflix; multiplayer
online games such as Second Life and World of Warcraft."
1784,"During this same period, we have seen theemergence of a new generation of social networking applications—such as Facebook, Instagram,Twitter, and WeChat—which have created engaging human networks on top of the Internet’s network orrouters and communication links."
1785,"And most recently, along with the arrival of the smartphone, there hasbeen a profusion of location based mobile apps, including popular check-in, dating, and road-trafficforecasting apps (such as Yelp, Tinder, Waz, and Yik Yak)."
1786,"Clearly, there has been no slowing down ofnew and exciting Internet applications."
1787,"Perhaps some of the readers of this text will create the next
generation of killer Internet applications!
In this chapter we study the conceptual and implementation aspects of network applications."
1788,"We begin
by defining key application-layer concepts, including network services required by applications, clientsand servers, processes, and transport-layer interfaces."
1789,"We examine several network applications indetail, including the Web, e-mail, DNS, peer-to-peer (P2P) file distribution, and video streaming."
1790,"(Chapter 9 will further examine multimedia applications, including streaming video and VoIP.) We then
cover network application development, over both TCP and UDP."
1791,"In particular, we study the socket
interface and walk through some simple client-server applications in Python."
1792,"We also provide several
fun and interesting socket programming assignments at the end of the chapter.The application layer is a particularly good place to start our study of protocols."
1793,It’s familiar ground.
1794,We’re acquainted with many of the applications that rely on the protocols we’ll study.
1795,"It will give us agood feel for what protocols are all about and will introduce us to many of the same issues that we’ll seeagain when we study transport, network, and link layer protocols.2.1 Principles of Network Applications
Suppose you have an idea for a new network application."
1796,"Perhaps this application will be a great service
to humanity, or will please your professor, or will bring you great wealth, or will simply be fun to develop.Whatever the motivation may be, let’s now examine how you transform the idea into a real-worldnetwork application."
1797,"At the core of network application development is writing programs that run on different end systems
and communicate with each other over the network."
1798,"For example, in the Web application there are twodistinct programs that communicate with each other: the browser program running in the user’s host(desktop, laptop, tablet, smartphone, and so on); and the Web server program running in the Webserver host."
1799,"As another example, in a P2P file-sharing system there is a program in each host thatparticipates in the file-sharing community."
1800,"In this case, the programs in the various hosts may be similaror identical."
1801,"Thus, when developing your new application, you need to write software that will run on multiple end
systems."
1802,"This software could be written, for example, in C, Java, or Python."
1803,"Importantly, you do notneed to write software that runs on network-core devices, such as routers or link-layer switches."
1804,"Even ifyou wanted to write application software for these network-core devices, you wouldn’t be able to do so."
1805,"As we learned in Chapter 1, and as shown earlier in Figure 1.24, network-core devices do not function
at the application layer but instead function at lower layers—specifically at the network layer and below.This basic design—namely, confining application software to the end systems—as shown in Figure 2.1,
has facilitated the rapid development and deployment of a vast array of network applications.Figure 2.1 Communication for a network application takes place between end systems at the
application layer
2.1.1 Network Application ArchitecturesBefore diving into software coding, you should have a broad architectural plan for your application."
1806,"Keep
in mind that an application’s architecture is distinctly different from the network architecture (e.g., the
five-layer Internet architecture discussed in Chapter 1)."
1807,"From the application developer’s perspective,
the network architecture is fixed and provides a specific set of services to applications."
1808,"The application
architecture , on the other hand, is designed by the application developer and dictates how the
application is structured over the various end systems."
1809,"In choosing the application architecture, an
application developer will likely draw on one of the two predominant architectural paradigms used in
modern network applications: the client-server architecture or the peer-to-peer (P2P) architecture."
1810,"In a client-server architecture , there is an always-on host, called the server, which services requests
from many other hosts, called clients."
1811,"A classic example is the Web application for which an always-on
Web server services requests from browsers running on client hosts."
1812,"When a Web server receives a
request for an object from a client host, it responds by sending the requested object to the client host.Note that with the client-server architecture, clients do not directly communicate with each other; for
example, in the Web application, two browsers do not directly communicate."
1813,"Another characteristic of
the client-server architecture is that the server has a fixed, well-known address, called an IP address(which we’ll discuss soon)."
1814,"Because the server has a fixed, well-known address, and because the serveris always on, a client can always contact the server by sending a packet to the server’s IP address.Some of the better-known applications with a client-server architecture include the Web, FTP, Telnet,
and e-mail."
1815,The client-server architecture is shown in Figure 2.2(a).
1816,"Often in a client-server application, a single-server host is incapable of keeping up with all the requests
from clients."
1817,"For example, a popular social-networking site can quickly become overwhelmed if it has
only one server handling all of its requests."
1818,"For this reason, a data center, housing a large number of
hosts, is often used to create a powerful virtual server."
1819,"The most popular Internet services—such as
search engines (e.g., Google, Bing, Baidu), Internet commerce (e.g., Amazon, eBay, Alibaba), Web-based e-mail (e.g., Gmail and Yahoo Mail), social networking (e.g., Facebook, Instagram, Twitter, and
WeChat)—employ one or more data centers."
1820,"As discussed in Section 1.3.3, Google has 30 to 50 data
centers distributed around the world, which collectively handle search, YouTube, Gmail, and other
services."
1821,"A data center can have hundreds of thousands of servers, which must be powered andmaintained."
1822,"Additionally, the service providers must pay recurring interconnection and bandwidth costs
for sending data from their data centers."
1823,"In a P2P architecture , there is minimal (or no) reliance on dedicated servers in data centers."
1824,"Instead
the application exploits direct communication between pairs of intermittently connected hosts, called
peers."
1825,"The peers are not owned by the service provider, but are instead desktops and laptops controlled
by users, with most of the 
Figure 2.2 (a) Client-server architecture; (b) P2P architecture
peers residing in homes, universities, and offices."
1826,"Because the peers communicate without passing
through a dedicated server, the architecture is called peer-to-peer."
1827,Many of today’s most popular andtraffic-intensive applications are based on P2P architectures.
1828,"These applications include file sharing(e.g., BitTorrent), peer-assisted download acceleration (e.g., Xunlei), and Internet telephony and video
conference (e.g., Skype)."
1829,The P2P architecture is illustrated in Figure 2.2(b).
1830,"We mention that some
applications have hybrid architectures, combining both client-server and P2P elements."
1831,"For example, for
many instant messaging applications, servers are used to track the IP addresses of users, but user-to-user messages are sent directly between user hosts (without passing through intermediate servers)."
1832,One of the most compelling features of P2P architectures is their self-scalability.
1833,"For example, in a
P2P file-sharing application, although each peer generates workload by requesting files, each peer also
adds service capacity to the system by distributing files to other peers."
1834,"P2P architectures are also costeffective, since they normally don’t require significant server infrastructure and server bandwidth (in
contrast with clients-server designs with datacenters)."
1835,"However, P2P applications face challenges ofsecurity, performance, and reliability due to their highly decentralized structure."
1836,"2.1.2 Processes Communicating
Before building your network application, you also need a basic understanding of how the programs,running in multiple end systems, communicate with each other."
1837,"In the jargon of operating systems, it isnot actually programs but processes  that communicate."
1838,"A process can be thought of as a program that
is running within an end system."
1839,"When processes are running on the same end system, they cancommunicate with each other with interprocess communication, using rules that are governed by the
end system’s operating system."
1840,"But in this book we are not particularly interested in how processes in
the same host communicate, but instead in how processes running on different hosts (with potentially
different operating systems) communicate."
1841,"Processes on two different end systems communicate with each other by exchanging messages  across
the computer network."
1842,"A sending process creates and sends messages into the network; a receiving
process receives these messages and possibly responds by sending messages back."
1843,"Figure 2.1
illustrates that processes communicating with each other reside in the application layer of the five-layer
protocol stack."
1844,"Client and Server Processes
A network application consists of pairs of processes that send messages to each other over a network."
1845,"For example, in the Web application a client browser process exchanges messages with a Web serverprocess."
1846,"In a P2P file-sharing system, a file is transferred from a process in one peer to a process in
another peer."
1847,"For each pair of communicating processes, we typically label one of the two processes as
the client and the other process as the server ."
1848,"With the Web, a browser is a client process and a Web
server is a server process."
1849,"With P2P file sharing, the peer that is downloading the file is labeled as theclient, and the peer that is uploading the file is labeled as the server."
1850,"You may have observed that in some applications, such as in P2P file sharing, a process can be both a
client and a server."
1851,"Indeed, a process in a P2P file-sharing system can both upload and download files.Nevertheless, in the context of any given communication session between a pair of processes, we canstill label one process as the client and the other process as the server."
1852,"We define the client and serverprocesses as follows:
In the context of a communication session between a pair of processes, the process that initiates thecommunication (that is, initially contacts the other process at the beginning of the session) is labeledas the client."
1853,The process that waits to be contacted to begin the session is the  server.
1854,"In the Web, a browser process initializes contact with a Web server process; hence the browser processis the client and the Web server process is the server."
1855,"In P2P file sharing, when Peer A asks Peer B tosend a specific file, Peer A is the client and Peer B is the server in the context of this specificcommunication session."
1856,"When there’s no confusion, we’ll sometimes also use the terminology “clientside and server side of an application.” At the end of this chapter, we’ll step through simple code for boththe client and server sides of network applications."
1857,"The Interface Between the Process and the Computer Network
As noted above, most applications consist of pairs of communicating processes, with the two processes
in each pair sending messages to each other."
1858,Any message sent from one process to another must gothrough the underlying network.
1859,"A process sends messages into, and receives messages from, thenetwork through a software interface called a socket."
1860,"Let’s consider an analogy to help us understand
processes and sockets."
1861,A process is analogous to a house and its socket is analogous to its door.
1862,"Whena process wants to send a message to another process on another host, it shoves the message out itsdoor (socket)."
1863,"This sending process assumes that there is a transportation infrastructure on the other
side of its door that will transport the message to the door of the destination process."
1864,"Once the message
arrives at the destination host, the message passes through the receiving process’s door (socket), andthe receiving process then acts on the message."
1865,Figure 2.3 illustrates socket communication between two processes that communicate over the Internet.
1866,"(Figure 2.3 assumes that the underlying transport protocol used by the processes is the Internet’s TCP
protocol.) As shown in this figure, a socket is the interface between the application layer and the
transport layer within a host."
1867,"It is also referred to as the Application Programming Interface (API)between the application and the network, since the socket is the programming interface with which
network applications are built."
1868,"The application developer has control of everything on the application-
layer side of the socket but has little control of the transport-layer side of the socket."
1869,"The only controlthat the application developer has on the transport-layer side is (1) the choice of transport protocol and(2) perhaps the ability to fix a few transport-layer parameters such as maximum buffer and maximum
segment sizes (to be covered in Chapter 3)."
1870,"Once the application developer chooses a transport
protocol (if a choice is available), the application is built using the transport-layer services provided bythat protocol."
1871,"We’ll explore sockets in some detail in Section 2.7.
Addressing Processes
In order to send postal mail to a particular destination, the destination needs to have an address."
1872,"Similarly, in order for a process running on one host to send packets to a process running on anotherhost, the receiving process needs to have an address."
1873,"Figure 2.3 Application processes, sockets, and underlying transport protocol
To identify the receiving process, two pieces of information need to be specified: (1) the address of the
host and (2) an identifier that specifies the receiving process in the destination host."
1874,"In the Internet, the host is identified by its IP address."
1875,"We’ll discuss IP addresses in great detail in
Chapter 4."
1876,"For now, all we need to know is that an IP address is a 32-bit quantity that we can think of as
uniquely identifying the host."
1877,"In addition to knowing the address of the host to which a message is
destined, the sending process must also identify the receiving process (more specifically, the receivingsocket) running in the host."
1878,This information is needed because in general a host could be running manynetwork applications.
1879,A destination port number serves this purpose.
1880,Popular applications have beenassigned specific port numbers.
1881,"For example, a Web server is identified by port number 80."
1882,"A mail
server process (using the SMTP protocol) is identified by port number 25."
1883,"A list of well-known port
numbers for all Internet standard protocols can be found at www.iana.org ."
1884,"We’ll examine port numbers
in detail in Chapter 3."
1885,"2.1.3 Transport Services Available to Applications
Recall that a socket is the interface between the application process and the transport-layer protocol."
1886,The application at the sending side pushes messages through the socket.
1887,"At the other side of thesocket, the transport-layer protocol has the responsibility of getting the messages to the socket of thereceiving process."
1888,"Many networks, including the Internet, provide more than one transport-layer protocol."
1889,"When you
develop an application, you must choose one of the available transport-layer protocols."
1890,"How do you
make this choice?"
1891,"Most likely, you would study the services provided by the available transport-layerprotocols, and then pick the protocol with the services that best match your application’s needs."
1892,Thesituation is similar to choosing either train or airplane transport for travel between two cities.
1893,"You have tochoose one or the other, and each transportation mode offers different services."
1894,"(For example, the trainoffers downtown pickup and drop-off, whereas the plane offers shorter travel time.)
What are the services that a transport-layer protocol can offer to applications invoking it?"
1895,"We can
broadly classify the possible services along four dimensions: reliable data transfer, throughput, timing,and security."
1896,"Reliable Data TransferAs discussed in Chapter 1, packets can get lost within a computer network."
1897,"For example, a packet can
overflow a buffer in a router, or can be discarded by a host or router after having some of its bits
corrupted."
1898,"For many applications—such as electronic mail, file transfer, remote host access, Web
document transfers, and financial applications—data loss can have devastating consequences (in the
latter case, for either the bank or the customer!)."
1899,"Thus, to support these applications, something has tobe done to guarantee that the data sent by one end of the application is delivered correctly andcompletely to the other end of the application."
1900,"If a protocol provides such a guaranteed data deliveryservice, it is said to provide reliable data transfer."
1901,"One important service that a transport-layer protocol
can potentially provide to an application is process-to-process reliable data transfer."
1902,"When a transportprotocol provides this service, the sending process can just pass its data into the socket and know withcomplete confidence that the data will arrive without errors at the receiving process."
1903,"When a transport-layer protocol doesn’t provide reliable data transfer, some of the data sent by thesending process may never arrive at the receiving process."
1904,"This may be acceptable for loss-tolerant
applications , most notably multimedia applications such as conversational audio/video that can tolerate
some amount of data loss."
1905,"In these multimedia applications, lost data might result in a small glitch in the
audio/video—not a crucial impairment."
1906,"Throughput
In Chapter 1 we introduced the concept of available throughput, which, in the context of a
communication session between two processes along a network path, is the rate at which the sending
process can deliver bits to the receiving process."
1907,"Because other sessions will be sharing the bandwidthalong the network path, and because these other sessions will be coming and going, the availablethroughput can fluctuate with time."
1908,"These observations lead to another natural service that a transport-layer protocol could provide, namely, guaranteed available throughput at some specified rate."
1909,"With such
a service, the application could request a guaranteed throughput of r bits/sec, and the transport protocol
would then ensure that the available throughput is always at least r bits/sec."
1910,"Such a guaranteed
throughput service would appeal to many applications."
1911,"For example, if an Internet telephony applicationencodes voice at 32 kbps, it needs to send data into the network and have data delivered to thereceiving application at this rate."
1912,"If the transport protocol cannot provide this throughput, the applicationwould need to encode at a lower rate (and receive enough throughput to sustain this lower coding rate)or may have to give up, since receiving, say, half of the needed throughput is of little or no use to thisInternet telephony application."
1913,Applications that have throughput requirements are said to bebandwidth-sensitive applications .
1914,"Many current multimedia applications are bandwidth sensitive,
although some multimedia applications may use adaptive coding techniques to encode digitized voice or
video at a rate that matches the currently available throughput."
1915,"While bandwidth-sensitive applications have specific throughput requirements, elastic applications can
make use of as much, or as little, throughput as happens to be available."
1916,"Electronic mail, file transfer,
and Web transfers are all elastic applications."
1917,"Of course, the more throughput, the better."
1918,"There’sanadage that says that one cannot be too rich, too thin, or have too much throughput!
Timing
A transport-layer protocol can also provide timing guarantees."
1919,"As with throughput guarantees, timing
guarantees can come in many shapes and forms."
1920,An example guarantee might be that every bit that thesender pumps into the socket arrives at the receiver’s socket no more than 100 msec later.
1921,"Such aservice would be appealing to interactive real-time applications, such as Internet telephony, virtualenvironments, teleconferencing, and multiplayer games, all of which require tight timing constraints on
data delivery in order to be effective."
1922,"(See Chapter 9, [Gauthier 1999; Ramjee 1994] .) Long delays in
Internet telephony, for example, tend to result in unnatural pauses in the conversation; in a multiplayer
game or virtual interactive environment, a long delay between taking an action and seeing the responsefrom the environment (for example, from another player at the end of an end-to-end connection) makes
the application feel less realistic."
1923,"For non-real-time applications, lower delay is always preferable to
higher delay, but no tight constraint is placed on the end-to-end delays."
1924,"Security
Finally, a transport protocol can provide an application with one or more security services."
1925,"For example,
in the sending host, a transport protocol can encrypt all data transmitted by the sending process, and inthe receiving host, the transport-layer protocol can decrypt the data before delivering the data to thereceiving process."
1926,"Such a service would provide confidentiality between the two processes, even if thedata is somehow observed between sending and receiving processes."
1927,"A transport protocol can alsoprovide other security services in addition to confidentiality, including data integrity and end-point
authentication, topics that we’ll cover in detail in Chapter 8."
1928,"2.1.4 Transport Services Provided by the Internet
Up until this point, we have been considering transport services that a computer network could  provide
in general."
1929,"Let’s now get more specific and examine the type of transport services provided by the
Internet."
1930,"The Internet (and, more generally, TCP/IP networks) makes two transport protocols available toapplications, UDP and TCP."
1931,"When you (as an application developer) create a new network application
for the Internet, one of the first decisions you have to make is whether to use UDP or TCP."
1932,"Each of
these protocols offers a different set of services to the invoking applications."
1933,"Figure 2.4 shows the
service requirements for some selected applications."
1934,"TCP Services
The TCP service model includes a connection-oriented service and a reliable data transfer service."
1935,"When an application invokes TCP as its transport protocol, the application receives both of theseservices from TCP."
1936,Connection-oriented service.
1937,TCP has the client and server exchange transport-layer controlinformation with each other before the application-level messages begin to flow.
1938,"This so-called
handshaking procedure alerts the client and server, allowing them to prepare for an onslaught ofpackets."
1939,"After the handshaking phase, a TCP connection  is said to exist between the socketsFigure 2.4 Requirements of selected network applications
of the two processes."
1940,"The connection is a full-duplex connection in that the two processes can send
messages to each other over the connection at the same time."
1941,"When the application finishes
sending messages, it must tear down the connection."
1942,"In Chapter 3 we’ll discuss connection-oriented
service in detail and examine how it is implemented."
1943,Reliable data transfer service.
1944," The communicating processes can rely on TCP to deliver all data
sent without error and in the proper order."
1945,"When one side of the application passes a stream of
bytes into a socket, it can count on TCP to deliver the same stream of bytes to the receiving socket,with no missing or duplicate bytes."
1946,"TCP also includes a congestion-control mechanism, a service for the general welfare of the Internetrather than for the direct benefit of the communicating processes."
1947,The TCP congestion-controlmechanism throttles a sending process (client or server) when the network is congested betweensender and receiver.
1948,"As we will see
FOCUS ON SECURITY
SECURING TCP
Neither TCP nor UDP provides any encryption—the data that the sending process passes into
its socket is the same data that travels over the network to the destination process."
1949,"So, for
example, if the sending process sends a password in cleartext (i.e., unencrypted) into its socket,the cleartext password will travel over all the links between sender and receiver, potentiallygetting sniffed and discovered at any of the intervening links."
1950,"Because privacy and other securityissues have become critical for many applications, the Internet community has developed anenhancement for TCP, called Secure Sockets Layer (SSL) ."
1951,"TCP-enhanced-with-SSL not onlydoes everything that traditional TCP does but also provides critical process-to-process security
services, including encryption, data integrity, and end-point authentication."
1952,"We emphasize that
SSL is not a third Internet transport protocol, on the same level as TCP and UDP, but instead isan enhancement of TCP, with the enhancements being implemented in the application layer."
1953,"Inparticular, if an application wants to use the services of SSL, it needs to include SSL code(existing, highly optimized libraries and classes) in both the client and server sides of the
application."
1954,SSL has its own socket API that is similar to the traditional TCP socket API.
1955,"When
an application uses SSL, the sending process passes cleartext data to the SSL socket; SSL inthe sending host then encrypts the data and passes the encrypted data to the TCP socket."
1956,Theencrypted data travels over the Internet to the TCP socket in the receiving process.
1957,"Thereceiving socket passes the encrypted data to SSL, which decrypts the data."
1958,"Finally, SSLpasses the cleartext data through its SSL socket to the receiving process."
1959,"We’ll cover SSL in
some detail in Chapter 8."
1960,"in Chapter 3, TCP congestion control also attempts to limit each TCP connection to its fair share of
network bandwidth."
1961,"UDP Services
UDP is a no-frills, lightweight transport protocol, providing minimal services."
1962,"UDP is connectionless, so
there is no handshaking before the two processes start to communicate."
1963,"UDP provides an unreliable
data transfer service—that is, when a process sends a message into a UDP socket, UDP provides no
guarantee that the message will ever reach the receiving process."
1964,"Furthermore, messages that do arrive
at the receiving process may arrive out of order."
1965,"UDP does not include a congestion-control mechanism, so the sending side of UDP can pump data into
the layer below (the network layer) at any rate it pleases."
1966,"(Note, however, that the actual end-to-endthroughput may be less than this rate due to the limited transmission capacity of intervening links or dueto congestion)."
1967,"Services Not Provided by Internet Transport Protocols
We have organized transport protocol services along four dimensions: reliable data transfer, throughput,
timing, and security."
1968,Which of these services are provided by TCP and UDP?
1969,We have already notedthat TCP provides reliable end-to-end data transfer.
1970,And we also know that TCP can be easily enhancedat the application layer with SSL to provide security services.
1971,"But in our brief description of TCP and
UDP, conspicuously missing was any mention of throughput or timing guarantees— services not
provided by today’s Internet transport protocols."
1972,"Does this mean that time-sensitive applications such as
Internet telephony cannot run in today’s Internet?"
1973,"The answer is clearly no—the Internet has been
hosting time-sensitive applications for many years."
1974,"These applications often work fairly well becausethey have been designed to cope, to the greatest extent possible, with this lack of guarantee."
1975,"We’ll
investigate several of these design tricks in Chapter 9."
1976,"Nevertheless, clever design has its limitations
when delay is excessive, or the end-to-end throughput is limited."
1977,"In summary, today’s Internet can often
provide satisfactory service to time-sensitive applications, but it cannot provide any timing or throughputguarantees."
1978,Figure 2.5 indicates the transport protocols used by some popular Internet applications.
1979,"We see that e-
mail, remote terminal access, the Web, and file transfer all use TCP."
1980,"These applications have chosen
TCP primarily because TCP provides reliable data transfer, guaranteeing that all data will eventually getto its destination."
1981,"Because Internet telephony applications (such as Skype) can often tolerate some lossbut require a minimal rate to be effective, developers of Internet telephony applications usually prefer torun their applications over UDP, thereby circumventing TCP’s congestion control mechanism and packetoverheads."
1982,"But because many firewalls are configured to block (most types of) UDP traffic, Internet
telephony applications often are designed to use TCP as a backup if UDP communication fails."
1983,"Figure 2.5 Popular Internet applications, their application-layer protocols, and their underlying
transport protocols
2.1.5 Application-Layer Protocols
We have just learned that network processes communicate with each other by sending messages into
sockets."
1984,But how are these messages structured?
1985,What are the meanings of the various fields in themessages?
1986,When do the processes send the messages?
1987,These questions bring us into the realm ofapplication-layer protocols.
1988,"An application-layer protocol  defines how an application’s processes,
running on different end systems, pass messages to each other."
1989,"In particular, an application-layer
protocol defines:The types of messages exchanged, for example, request messages and response messages
The syntax of the various message types, such as the fields in the message and how the fields are
delineated
The semantics of the fields, that is, the meaning of the information in the fields
Rules for determining when and how a process sends messages and responds to messages
Some application-layer protocols are specified in RFCs and are therefore in the public domain."
1990,"For
example, the Web’s application-layer protocol, HTTP (the HyperText Transfer Protocol [RFC 2616] ), is
available as an RFC."
1991,"If a browser developer follows the rules of the HTTP RFC, the browser will be able
to retrieve Web pages from any Web server that has also followed the rules of the HTTP RFC."
1992,Manyother application-layer protocols are proprietary and intentionally not available in the public domain.
1993,"Forexample, Skype uses proprietary application-layer protocols."
1994,It is important to distinguish between network applications and application-layer protocols.
1995,"An
application-layer protocol is only one piece of a network application (albeit, a very important piece of theapplication from our point of view!)."
1996,Let’s look at a couple of examples.
1997,The Web is a client-serverapplication that allows users to obtain documents from Web servers on demand.
1998,"The Web application
consists of many components, including a standard for document formats (that is, HTML), Web
browsers (for example, Firefox and Microsoft Internet Explorer), Web servers (for example, Apache andMicrosoft servers), and an application-layer protocol."
1999,"The Web’s application-layer protocol, HTTP,defines the format and sequence of messages exchanged between browser and Web server."
2000,"Thus,HTTP is only one piece (albeit, an important piece) of the Web application."
2001,"As another example, anInternet e-mail application also has many components, including mail servers that house usermailboxes; mail clients (such as Microsoft Outlook) that allow users to read and create messages; astandard for defining the structure of an e-mail message; and application-layer protocols that define how
messages are passed between servers, how messages are passed between servers and mail clients,
and how the contents of message headers are to be interpreted."
2002,"The principal application-layer protocol
for electronic mail is SMTP (Simple Mail Transfer Protocol) [RFC 5321] ."
2003,"Thus, e-mail’s principal
application-layer protocol, SMTP, is only one piece (albeit an important piece) of the e-mail application."
2004,"2.1.6 Network Applications Covered in This Book
New public domain and proprietary Internet applications are being developed every day."
2005,"Rather than
covering a large number of Internet applications in an encyclopedic manner, we have chosen to focuson a small number of applications that are both pervasive and important."
2006,"In this chapter we discuss fiveimportant applications: the Web, electronic mail, directory service video streaming, and P2Papplications."
2007,"We first discuss the Web, not only because it is an enormously popular application, but
also because its application-layer protocol, HTTP, is straightforward and easy to understand."
2008,"We then
discuss electronic mail, the Internet’s first killer application."
2009,E-mail is more complex than the Web in thesense that it makes use of not one but several application-layer protocols.
2010,"After e-mail, we cover DNS,
which provides a directory service for the Internet."
2011,"Most users do not interact with DNS directly; instead,
users invoke DNS indirectly through other applications (including the Web, file transfer, and electronicmail)."
2012,DNS illustrates nicely how a piece of core network functionality (network-name to network-address translation) can be implemented at the application layer in the Internet.
2013,"We then discuss P2Pfile sharing applications, and complete our application study by discussing video streaming on demand,
including distributing stored video over content distribution networks."
2014,"In Chapter 9, we’ll cover
multimedia applications in more depth, including voice over IP and video conferencing.2.2 The Web and HTTP
Until the early 1990s the Internet was used primarily by researchers, academics, and university students
to log in to remote hosts, to transfer files from local hosts to remote hosts and vice versa, to receive andsend news, and to receive and send electronic mail."
2015,"Although these applications were (and continue tobe) extremely useful, the Internet was essentially unknown outside of the academic and researchcommunities."
2016,"Then, in the early 1990s, a major new application arrived on the scene—the World Wide
Web [Berners-Lee 1994] ."
2017,"The Web was the first Internet application that caught the general public’s
eye."
2018,"It dramatically changed, and continues to change, how people interact inside and outside their work
environments."
2019,It elevated the Internet from just one of many data networks to essentially the one andonly data network.
2020,Perhaps what appeals the most to users is that the Web operates on demand .
2021,"Users receive what they
want, when they want it."
2022,"This is unlike traditional broadcast radio and television, which force users to
tune in when the content provider makes the content available."
2023,"In addition to being available on
demand, the Web has many other wonderful features that people love and cherish."
2024,"It is enormously
easy for any individual to make information available over the Web—everyone can become a publisherat extremely low cost."
2025,Hyperlinks and search engines help us navigate through an ocean of information.Photos and videos stimulate our senses.
2026,"Forms, JavaScript, Java applets, and many other devicesenable us to interact with pages and sites."
2027,"And the Web and its protocols serve as a platform forYouTube, Web-based e-mail (such as Gmail), and most mobile Internet applications, includingInstagram and Google Maps."
2028,"2.2.1 Overview of HTTP
The HyperText Transfer Protocol (HTTP), the Web’s application-layer protocol, is at the heart of the
Web."
2029,It is defined in [RFC 1945]  and [RFC 2616] .
2030,"HTTP is implemented in two programs: a client
program and a server program."
2031,"The client program and server program, executing on different end
systems, talk to each other by exchanging HTTP messages."
2032,HTTP defines the structure of thesemessages and how the client and server exchange the messages.
2033,"Before explaining HTTP in detail, we
should review some Web terminology."
2034,A Web page (also called a document) consists of objects.
2035,"An object is simply a file—such as an HTML
file, a JPEG image, a Java applet, or a video clip—that is addressable by a single URL."
2036,"Most Web
pages consist of a base HTML file and several referenced objects."
2037,"For example, if a Web pagecontains HTML text and five JPEG images, then the Web page has six objects: the base HTML file plus
the five images."
2038,"The base HTML file references the other objects in the page with the objects’ URLs.
Each URL has two components: the hostname of the server that houses the object and the object’s path
name."
2039,"For example, the URL
http://www.someSchool.edu/someDepartment/picture.gif
has www.someSchool.edu  for a hostname and /someDepartment/picture.gif  for a path
name."
2040,"Because Web browsers (such as Internet Explorer and Firefox) implement the client side of
HTTP, in the context of the Web, we will use the words browser  and client interchangeably."
2041,"Web
servers , which implement the server side of HTTP, house Web objects, each addressable by a URL."
2042,Popular Web servers include Apache and Microsoft Internet Information Server.
2043,"HTTP defines how Web clients request Web pages from Web servers and how servers transfer Web
pages to clients."
2044,"We discuss the interaction between client and server in detail later, but the general
idea is illustrated in Figure 2.6. When a user requests a Web page (for example, clicks on a hyperlink),
the browser sends HTTP request messages for the objects in the page to the server."
2045,"The server
receives the requests and responds with HTTP response messages that contain the objects."
2046,HTTP uses TCP as its underlying transport protocol (rather than running on top of UDP).
2047,"The HTTP
client first initiates a TCP connection with the server."
2048,"Once the connection is established, the browser
and the server processes access TCP through their socket interfaces."
2049,"As described in Section 2.1, on
the client side the socket interface is the door between the client process and the TCP connection; on
the server side it is the door between the server process and the TCP connection."
2050,The client sendsHTTP request messages into its socket interface and receives HTTP response messages from itssocket interface.
2051,"Similarly, the HTTP server receives request messages
Figure 2.6 HTTP request-response behavior
from its socket interface and sends response messages into its socket interface."
2052,"Once the client sends a
message into its socket interface, the message is out of the client’s hands and is “in the hands” of TCP."
2053,Recall from Section 2.1 that TCP provides a reliable data transfer service to HTTP.
2054,"This implies that
each HTTP request message sent by a client process eventually arrives intact at the server; similarly,
each HTTP response message sent by the server process eventually arrives intact at the client."
2055,Herewe see one of the great advantages of a layered architecture—HTTP need not worry about lost data orthe details of how TCP recovers from loss or reordering of data within the network.
2056,That is the job ofTCP and the protocols in the lower layers of the protocol stack.
2057,"It is important to note that the server sends requested files to clients without storing any state
information about the client."
2058,"If a particular client asks for the same object twice in a period of a few
seconds, the server does not respond by saying that it just served the object to the client; instead, theserver resends the object, as it has completely forgotten what it did earlier."
2059,"Because an HTTP servermaintains no information about the clients, HTTP is said to be a stateless protocol."
2060,"We also remark
that the Web uses the client-server application architecture, as described in Section 2.1. A Web server
is always on, with a fixed IP address, and it services requests from potentially millions of differentbrowsers."
2061,"2.2.2 Non-Persistent and Persistent Connections
In many Internet applications, the client and server communicate for an extended period of time, with theclient making a series of requests and the server responding to each of the requests."
2062,"Depending on theapplication and on how the application is being used, the series of requests may be made back-to-back,periodically at regular intervals, or intermittently."
2063,"When this client-server interaction is taking place overTCP, the application developer needs to make an important decision—should each request/response
pair be sent over a separate  TCP connection, or should all of the requests and their corresponding
responses be sent over the same TCP connection?"
2064,"In the former approach, the application is said to
use non-persistent connections ; and in the latter approach, persistent connections."
2065,"To gain a deep
understanding of this design issue, let’s examine the advantages and disadvantages of persistent
connections in the context of a specific application, namely, HTTP, which can use both non-persistentconnections and persistent connections."
2066,"Although HTTP uses persistent connections in its defaultmode, HTTP clients and servers can be configured to use non-persistent connections instead."
2067,"HTTP with Non-Persistent ConnectionsLet’s walk through the steps of transferring a Web page from server to client for the case of non-
persistent connections."
2068,"Let’s suppose the page consists of a base HTML file and 10 JPEG images, and
that all 11 of these objects reside on the same server."
2069,"Further suppose the URL for the base HTML file
is
http://www.someSchool.edu/someDepartment/home.index
Here is what happens:
1."
2070,"The HTTP client process initiates a TCP connection to the server www.someSchool.edu  on
port number 80, which is the default port number for HTTP."
2071,"Associated with the TCP connection,
there will be a socket at the client and a socket at the server."
2072,2.
2073,The HTTP client sends an HTTP request message to the server via its socket.
2074,"The request
message includes the path name /someDepartment/home .index ."
2075,"(We will discuss HTTP
messages in some detail below.)
3."
2076,"The HTTP server process receives the request message via its socket, retrieves the object
/someDepartment/home.index  from its storage (RAM or disk), encapsulates the object in
an HTTP response message, and sends the response message to the client via its socket."
2077,4.
2078,The HTTP server process tells TCP to close the TCP connection.
2079,"(But TCP doesn’t actually
terminate the connection until it knows for sure that the client has received the response
message intact.)
5."
2080,The HTTP client receives the response message.
2081,The TCP connection terminates.
2082,"The
message indicates that the encapsulated object is an HTML file."
2083,"The client extracts the file from
the response message, examines the HTML file, and finds references to the 10 JPEG objects."
2084,6.
2085,The first four steps are then repeated for each of the referenced JPEG objects.
2086,"As the browser receives the Web page, it displays the page to the user."
2087,"Two different browsers mayinterpret (that is, display to the user) a Web page in somewhat different ways."
2088,"HTTP has nothing to do
with how a Web page is interpreted by a client."
2089,"The HTTP specifications ( [RFC 1945]  and [RFC 2616] )
define only the communication protocol between the client HTTP program and the server HTTP
program."
2090,"The steps above illustrate the use of non-persistent connections, where each TCP connection is closed
after the server sends the object—the connection does not persist for other objects."
2091,Note that each TCPconnection transports exactly one request message and one response message.
2092,"Thus, in this example,when a user requests the Web page, 11 TCP connections are generated."
2093,"In the steps described above, we were intentionally vague about whether the client obtains the 10JPEGs over 10 serial TCP connections, or whether some of the JPEGs are obtained over parallel TCP
connections."
2094,"Indeed, users can configure modern browsers to control the degree of parallelism."
2095,"In their
default modes, most browsers open 5 to 10 parallel TCP connections, and each of these connectionshandles one request-response transaction."
2096,"If the user prefers, the maximum number of parallelconnections can be set to one, in which case the 10 connections are established serially."
2097,"As we’ll see in
the next chapter, the use of parallel connections shortens the response time."
2098,"Before continuing, let’s do a back-of-the-envelope calculation to estimate the amount of time that
elapses from when a client requests the base HTML file until the entire file is received by the client."
2099,"Tothis end, we define the round-trip time (RTT) , which is the time it takes for a small packet to travel from
client to server and then back to the client."
2100,"The RTT includes packet-propagation delays, packet-queuing delays in intermediate routers and switches, and packet-processing delays."
2101,"(These delays were
discussed in Section 1.4.) Now consider what happens when a user clicks on a hyperlink."
2102,"As shown in
Figure 2.7, this causes the browser to initiate a TCP connection between the browser and the Web
server; this involves a “three-way handshake”—the client sends a small TCP segment to the server, the
server acknowledges and responds with a small TCP segment, and, finally, the client acknowledgesback to the server."
2103,The first two parts of the three-way handshake take one RTT.
2104,"After completing thefirst two parts of the handshake, the client sends the HTTP request message combined with the thirdpart of the three-way handshake (the acknowledgment) into the TCP connection."
2105,"Once the requestmessage arrives at
Figure 2.7 Back-of-the-envelope calculation for the time needed to request and receive an HTML
file
the server, the server sends the HTML file into the TCP connection."
2106,"This HTTP request/response eats
up another RTT."
2107,"Thus, roughly, the total response time is two RTTs plus the transmission time at the
server of the HTML file."
2108,"HTTP with Persistent Connections
Non-persistent connections have some shortcomings."
2109,"First, a brand-new connection must be
established and maintained for each requested object ."
2110,"For each of these connections, TCP buffers must
be allocated and TCP variables must be kept in both the client and server."
2111,"This can place a significant
burden on the Web server, which may be serving requests from hundreds of different clientssimultaneously."
2112,"Second, as we just described, each object suffers a delivery delay of two RTTs—one
RTT to establish the TCP connection and one RTT to request and receive an object."
2113,"With HTTP 1.1 persistent connections, the server leaves the TCP connection open after sending a
response."
2114,Subsequent requests and responses between the same client and server can be sent overthe same connection.
2115,"In particular, an entire Web page (in the example above, the base HTML file andthe 10 images) can be sent over a single persistent TCP connection."
2116,"Moreover, multiple Web pagesresiding on the same server can be sent from the server to the same client over a single persistent TCPconnection."
2117,"These requests for objects can be made back-to-back, without waiting for replies to pending
requests (pipelining)."
2118,"Typically, the HTTP server closes a connection when it isn’t used for a certain time
(a configurable timeout interval)."
2119,"When the server receives the back-to-back requests, it sends theobjects back-to-back."
2120,The default mode of HTTP uses persistent connections with pipelining.
2121,"Most
recently, HTTP/2 [RFC 7540]  builds on HTTP 1.1 by allowing multiple requests and replies to be
interleaved in the same connection, and a mechanism for prioritizing HTTP message requests and
replies within this connection."
2122,We’ll quantitatively compare the performance of non-persistent andpersistent connections in the homework problems of Chapters 2 and 3.
2123,"You are also encouraged to see
[Heidemann 1997 ; Nielsen 1997; RFC 7540] ."
2124,"2.2.3 HTTP Message Format
The HTTP specifications [RFC 1945 ; RFC 2616 ; RFC 7540]  include the definitions of the HTTP
message formats."
2125,"There are two types of HTTP messages, request messages and response messages,
both of which are discussed below."
2126,"HTTP Request MessageBelow we provide a typical HTTP request message:
GET /somedir/page.html HTTP/1.1
Host: www.someschool.edu
Connection: close
User-agent: Mozilla/5.0Accept-language: fr
We can learn a lot by taking a close look at this simple request message."
2127,"First of all, we see that themessage is written in ordinary ASCII text, so that your ordinary computer-literate human being can readit."
2128,"Second, we see that the message consists of five lines, each followed by a carriage return and a linefeed."
2129,The last line is followed by an additional carriage return and line feed.
2130,"Although this particularrequest message has five lines, a request message can have many more lines or as few as one line.The first line of an HTTP request message is called the request line; the subsequent lines are called
the header lines."
2131,"The request line has three fields: the method field, the URL field, and the HTTP
version field."
2132,"The method field can take on several different values, including GET, POST, HEAD,
PUT,  and DELETE ."
2133,The great majority of HTTP request messages use the GET method.
2134,"The GET
method is used when the browser requests an object, with the requested object identified in the URLfield."
2135,"In this example, the browser is requesting the object /somedir/page.html ."
2136,"The version is self-
explanatory; in this example, the browser implements version HTTP/1.1.
Now let’s look at the header lines in the example."
2137,"The header line Host: www.someschool.edu
specifies the host on which the object resides."
2138,"You might think that this header line is unnecessary, as
there is already a TCP connection in place to the host."
2139,"But, as we’ll see in Section 2.2.5, the information
provided by the host header line is required by Web proxy caches."
2140,"By including the Connection:
close  header line, the browser is telling the server that it doesn’t want to bother with persistent
connections; it wants the server to close the connection after sending the requested object."
2141,"The User-
agent:  header line specifies the user agent, that is, the browser type that is making the request to the
server."
2142,"Here the user agent is Mozilla/5.0, a Firefox browser."
2143,"This header line is useful because the
server can actually send different versions of the same object to different types of user agents."
2144,"(Each of
the versions is addressed by the same URL.) Finally, the Accept-language:  header indicates that
the user prefers to receive a French version of the object, if such an object exists on the server;otherwise, the server should send its default version."
2145,"The Accept-language:  header is just one of
many content negotiation headers available in HTTP."
2146,"Having looked at an example, let’s now look at the general format of a request message, as shown in
Figure 2.8. We see that the general format closely follows our earlier example."
2147,"You may have noticed,however, that after the header lines (and the additional carriage return and line feed) there is an “entity
body.” The entity body is empty with the GET method, but is used with the POST  method."
2148,"An HTTP
client often uses the POST  method when the user fills out a form—for example, when a user provides
search words to a search engine."
2149,"With a POST  message, the user is still requesting a Web page from
the server, but the specific contents of the Web page
Figure 2.8 General format of an HTTP request message
depend on what the user entered into the form fields."
2150,"If the value of the method field is POST , then the
entity body contains what the user entered into the form fields."
2151,"We would be remiss if we didn’t mention that a request generated with a form does not necessarily use
the POST  method."
2152,"Instead, HTML forms often use the GET method and include the inputted data (in
the form fields) in the requested URL."
2153,"For example, if a form uses the GET method, has two fields, and
the inputs to the two fields are monkeys  and bananas , then the URL will have the structure
www.somesite.com/ animalsearch?monkeys&bananas ."
2154,"In your day-to-day Web surfing, you
have probably noticed extended URLs of this sort."
2155,The HEAD  method is similar to the GET method.
2156,"When a server receives a request with the HEAD
method, it responds with an HTTP message but it leaves out the requested object."
2157,"Application
developers often use the HEAD  method for debugging."
2158,"The PUT method is often used in conjunction
with Web publishing tools."
2159,"It allows a user to upload an object to a specific path (directory) on a specific
Web server."
2160,The PUT method is also used by applications that need to upload objects to Web servers.
2161,"The DELETE  method allows a user, or an application, to delete an object on a Web server."
2162,HTTP Response MessageBelow we provide a typical HTTP response message.
2163,"This response message could be the response to
the example request message just discussed."
2164,"HTTP/1.1 200 OK
Connection: closeDate: Tue, 18 Aug 2015 15:44:04 GMTServer: Apache/2.2.3 (CentOS)Last-Modified: Tue, 18 Aug 2015 15:11:03 GMTContent-Length: 6821Content-Type: text/html
(data data data data data ...)
Let’s take a careful look at this response message."
2165,"It has three sections: an initial status line, six
header lines, and then the entity body ."
2166,"The entity body is the meat of the message—it contains the
requested object itself (represented by data data data data data ..."
2167,).
2168,"The status line has
three fields: the protocol version field, a status code, and a corresponding status message."
2169,"In this
example, the status line indicates that the server is using HTTP/1.1 and that everything is OK (that is,the server has found, and is sending, the requested object)."
2170,Now let’s look at the header lines.
2171,"The server uses the Connection: close  header line to tell the
client that it is going to close the TCP connection after sending the message."
2172,"The Date:  header line
indicates the time and date when the HTTP response was created and sent by the server."
2173,"Note that this
is not the time when the object was created or last modified; it is the time when the server retrieves theobject from its file system, inserts the object into the response message, and sends the response
message."
2174,"The Server:  header line indicates that the message was generated by an Apache Web
server; it is analogous to the User-agent:  header line in the HTTP request message."
2175,"The Last-
Modified:  header line indicates the time and date when the object was created or last modified."
2176,"The
Last-Modified:  header, which we will soon cover in more detail, is critical for object caching, both in
the local client and in network cache servers (also known as proxy servers)."
2177,"The Content-Length:
header line indicates the number of bytes in the object being sent."
2178,"The Content-Type:  header line
indicates that the object in the entity body is HTML text."
2179,"(The object type is officially indicated by the
Content-Type:  header and not by the file extension.)
Having looked at an example, let’s now examine the general format of a response message, which is
shown in Figure 2.9. This general format of the response message matches the previous example of a
response message."
2180,Let’s say a few additional words about status codes and their phrases.
2181,The statuscode and associated phrase indicate the result of the request.
2182,"Some common status codes and
associated phrases include:
200 OK:  Request succeeded and the information is returned in the response."
2183,"301 Moved Permanently:  Requested object has been permanently moved; the new URL is
specified in Location : header of the response message."
2184,"The client software will automatically
retrieve the new URL."
2185,"400 Bad Request:  This is a generic error code indicating that the request could not be
understood by the server."
2186,"Figure 2.9 General format of an HTTP response message
404 Not Found:  The requested document does not exist on this server."
2187,"505 HTTP Version Not Supported:  The requested HTTP protocol version is not supported
by the server."
2188,How would you like to see a real HTTP response message?
2189,"This is highly recommended and very easy
to do! First Telnet into your favorite Web server."
2190,Then type in a one-line request message for someobject that is housed on the server.
2191,"For example, if you have access to a command prompt, type:
Using Wireshark to investigate the HTTP protocoltelnet gaia.cs.umass.edu 80
GET /kurose_ross/interactive/index.php HTTP/1.1
Host: gaia.cs.umass.edu
(Press the carriage return twice after typing the last line.) This opens a TCP connection to port 80 of the
host gaia.cs.umass.edu  and then sends the HTTP request message."
2192,"You should see a response
message that includes the base HTML file for the interactive homework problems for this textbook."
2193,"Ifyou’d rather just see the HTTP message lines and not receive the object itself, replace GET with HEAD ."
2194,"In this section we discussed a number of header lines that can be used within HTTP request and
response messages."
2195,"The HTTP specification defines many, many more header lines that can be
inserted by browsers, Web servers, and network cache servers."
2196,We have covered only a small numberof the totality of header lines.
2197,"We’ll cover a few more below and another small number when we discuss
network Web caching in Section 2.2.5. A highly readable and comprehensive discussion of the HTTP
protocol, including its headers and status codes, is given in [Krishnamurthy 2001] ."
2198,How does a browser decide which header lines to include in a request message?
2199,"How does a Web
server decide which header lines to include in a response message?"
2200,"A browser will generate headerlines as a function of the browser type and version (for example, an HTTP/1.0 browser will not generate
any 1.1 header lines), the user configuration of the browser (for example, preferred language), and
whether the browser currently has a cached, but possibly out-of-date, version of the object."
2201,"Web serversbehave similarly: There are different products, versions, and configurations, all of which influence whichheader lines are included in response messages."
2202,"2.2.4 User-Server Interaction: Cookies
We mentioned above that an HTTP server is stateless."
2203,This simplifies server design and has permittedengineers to develop high-performance Web servers that can handle thousands of simultaneous TCPconnections.
2204,"However, it is often desirable for a Web site to identify users, either because the serverwishes to restrict user access or because it wants to serve content as a function of the user identity."
2205,"For
these purposes, HTTP uses cookies."
2206,"Cookies, defined in [RFC 6265] , allow sites to keep track of users."
2207,Most major commercial Web sites use cookies today.
2208,"As shown in Figure 2.10, cookie technology has four components: (1) a cookie header line in the HTTP
response message; (2) a cookie header line in the HTTP request message; (3) a cookie file kept on theuser’s end system and managed by the user’s browser; and (4) a back-end database at the Web site."
2209,"Using Figure 2.10, let’s walk through an example of how cookies work."
2210,"Suppose Susan, who always
accesses the Web using Internet Explorer from her home PC, contacts Amazon.com for the first time."
2211,Let us suppose that in the past she has already visited the eBay site.
2212,"When the request comes into theAmazon Web server, the server creates a unique identification number and creates an entry in its back-
end database that is indexed by the identification number."
2213,"The Amazon Web server then responds to
Susan’s browser, including in the HTTP response a Set-cookie:  header, which contains the
identification number."
2214,"For example, the header line might be:
Set-cookie: 1678
When Susan’s browser receives the HTTP response message, it sees the Set-cookie:  header."
2215,"The
browser then appends a line to the special cookie file that it manages."
2216,This line includes the hostnameof the server and the identification number in the Set-cookie:  header.
2217,"Note that the cookie file
already has an entry for eBay, since Susan has visited that site in the past."
2218,"As Susan continues to
browse the Amazon site, each time she requests a Web page, her browser consults her cookie file,extracts her identification number for this site, and puts a cookie header line thatFigure 2.10 Keeping user state with cookies
includes the identification number in the HTTP request."
2219,"Specifically, each of her HTTP requests to the
Amazon server includes the header line:
Cookie: 1678
In this manner, the Amazon server is able to track Susan’s activity at the Amazon site."
2220,"Although the
Amazon Web site does not necessarily know Susan’s name, it knows exactly which pages user 1678visited, in which order, and at what times! Amazon uses cookies to provide its shopping cart service—
Amazon can maintain a list of all of Susan’s intended purchases, so that she can pay for themcollectively at the end of the session."
2221,"If Susan returns to Amazon’s site, say, one week later, her browser will continue to put the header line
Cookie: 1678  in the request messages."
2222,"Amazon also recommends products to Susan based on
Web pages she has visited at Amazon in the past."
2223,"If Susan also registers herself with Amazon—
providing full name, e-mail address, postal address, and credit card information—Amazon can theninclude this information in its database, thereby associating Susan’s name with her identification number(and all of the pages she has visited at the site in the past!)."
2224,"This is how Amazon and other e-commercesites provide “one-click shopping”—when Susan chooses to purchase an item during a subsequent visit,she doesn’t need to re-enter her name, credit card number, or address."
2225,From this discussion we see that cookies can be used to identify a user.
2226,"The first time a user visits a
site, the user can provide a user identification (possibly his or her name)."
2227,"During the subsequent
sessions, the browser passes a cookie header to the server, thereby identifying the user to the server."
2228,Cookies can thus be used to create a user session layer on top of stateless HTTP.
2229,"For example, when auser logs in to a Web-based e-mail application (such as Hotmail), the browser sends cookie informationto the server, permitting the server to identify the user throughout the user’s session with the application."
2230,"Although cookies often simplify the Internet shopping experience for the user, they are controversial
because they can also be considered as an invasion of privacy."
2231,"As we just saw, using a combination ofcookies and user-supplied account information, a Web site can learn a lot about a user and potentially
sell this information to a third party."
2232,"Cookie Central [Cookie Central 2016]  includes extensive
information on the cookie controversy."
2233,"2.2.5 Web Caching
A Web cache—also called a proxy server —is a network entity that satisfies HTTP requests on the
behalf of an origin Web server."
2234,The Web cache has its own disk storage and keeps copies of recentlyrequested objects in this storage.
2235,"As shown in Figure 2.11, a user’s browser can be configured so that
all of the user’s HTTP requests are first directed to the Web cache."
2236,"Once a browser is configured, each
browser request for an object is first directed to the Web cache."
2237,"As an example, suppose a browser is
requesting the object http://www.someschool.edu/campus.gif ."
2238,"Here is what happens:
1."
2239,"The browser establishes a TCP connection to the Web cache and sends an HTTP request for
the object to the Web cache."
2240,2.
2241,The Web cache checks to see if it has a copy of the object stored locally.
2242,"If it does, the Webcache returns the object within an HTTP response message to the client browser.Figure 2.11 Clients requesting objects through a Web cache
3."
2243,"If the Web cache does not have the object, the Web cache opens a TCP connection to the origin
server, that is, to www.someschool.edu ."
2244,"The Web cache then sends an HTTP request for the
object into the cache-to-server TCP connection."
2245,"After receiving this request, the origin serversends the object within an HTTP response to the Web cache."
2246,4.
2247,"When the Web cache receives the object, it stores a copy in its local storage and sends a copy,
within an HTTP response message, to the client browser (over the existing TCP connection
between the client browser and the Web cache)."
2248,Note that a cache is both a server and a client at the same time.
2249,"When it receives requests from andsends responses to a browser, it is a server."
2250,"When it sends requests to and receives responses from anorigin server, it is a client."
2251,Typically a Web cache is purchased and installed by an ISP.
2252,"For example, a university might install a
cache on its campus network and configure all of the campus browsers to point to the cache."
2253,Or a majorresidential ISP (such as Comcast) might install one or more caches in its network and preconfigure itsshipped browsers to point to the installed caches.
2254,Web caching has seen deployment in the Internet for two reasons.
2255,"First, a Web cache can substantially
reduce the response time for a client request, particularly if the bottleneck bandwidth between the clientand the origin server is much less than the bottleneck bandwidth between the client and the cache."
2256,"Ifthere is a high-speed connection between the client and the cache, as there often is, and if the cachehas the requested object, then the cache will be able to deliver the object rapidly to the client."
2257,"Second,as we will soon illustrate with an example, Web caches can substantially reduce traffic on an institution’saccess link to the Internet."
2258,"By reducing traffic, the institution (for example, a company or a university)does not have to upgrade bandwidth as quickly, thereby reducing costs."
2259,"Furthermore, Web caches cansubstantially reduce Web traffic in the Internet as a whole, thereby improving performance for all
applications."
2260,"To gain a deeper understanding of the benefits of caches, let’s consider an example in the context of
Figure 2.12."
2261,"This figure shows two networks—the institutional network and the rest of the public
Internet."
2262,The institutional network is a high-speed LAN.
2263,"A router in the institutional network and a router
in the Internet are connected by a 15 Mbps link."
2264,"The origin servers are attached to the Internet but are
located all over the globe."
2265,Suppose that the average object size is 1 Mbits and that the average requestrate from the institution’s browsers to the origin servers is 15 requests per second.
2266,Suppose that theHTTP request messages are negligibly small and thus create no traffic in the networks or in the accesslink (from institutional router to Internet router).
2267,"Also suppose that the amount of time it takes from when
the router on the Internet side of the access link in Figure 2.12 forwards an HTTP request (within an IP
datagram) until it receives the response (typically within many IP datagrams) is two seconds on
average."
2268,"Informally, we refer to this last delay as the “Internet delay.”
Figure 2.12 Bottleneck between an institutional network and the Internet
The total response time—that is, the time from the browser’s request of an object until its receipt of the
object—is the sum of the LAN delay, the access delay (that is, the delay between the two routers), andthe Internet delay."
2269,Let’s now do a very crude calculation to estimate this delay.
2270,"The traffic intensity on
the LAN (see Section 1.4.2) is
whereas the traffic intensity on the access link (from the Internet router to institution router) is
A traffic intensity of 0.15 on a LAN typically results in, at most, tens of milliseconds of delay; hence, we
can neglect the LAN delay."
2271,"However, as discussed in Section 1.4.2, as the traffic intensity approaches
1 (as is the case of the access link in Figure 2.12), the delay on a link becomes very large and grows
without bound."
2272,"Thus, the average response time to satisfy requests is going to be on the order of
minutes, if not more, which is unacceptable for the institution’s users."
2273,Clearly something must be done.
2274,"One possible solution is to increase the access rate from 15 Mbps to, say, 100 Mbps."
2275,"This will lower the
traffic intensity on the access link to 0.15, which translates to negligible delays between the two routers.In this case, the total response time will roughly be two seconds, that is, the Internet delay."
2276,"But thissolution also means that the institution must upgrade its access link from 15 Mbps to 100 Mbps, a costlyproposition."
2277,"Now consider the alternative solution of not upgrading the access link but instead installing a Web cache
in the institutional network."
2278,This solution is illustrated in Figure 2.13.
2279,"Hit rates—the fraction of requests
that are satisfied by a cache— typically range from 0.2 to 0.7 in practice."
2280,"For illustrative purposes, let’s
suppose that the cache provides a hit rate of 0.4 for this institution."
2281,"Because the clients and the cacheare connected to the same high-speed LAN, 40 percent of the requests will be satisfied almostimmediately, say, within 10 milliseconds, by the cache."
2282,"Nevertheless, the remaining 60 percent of therequests still need to be satisfied by the origin servers."
2283,"But with only 60 percent of the requested objectspassing through the access link, the traffic intensity on the access link is reduced from 1.0 to 0.6.Typically, a traffic intensity less than 0.8 corresponds to a small delay, say, tens of milliseconds, on a 15Mbps link."
2284,This delay is negligible compared with the two-second Internet delay.
2285,"Given these
considerations, average delay therefore is
which is just slightly greater than 1.2 seconds."
2286,"Thus, this second solution provides an even lower
response time than the first solution, and it doesn’t require the institution(15 requests/sec)⋅(1 Mbits/request)/(100 Mbps)=0.15
(15 requests/sec)⋅(1 Mbits/request)/(15 Mbps)=1
0.4⋅(0.01 seconds)+0.6⋅(2.01 seconds)Figure 2.13 Adding a cache to the institutional network
to upgrade its link to the Internet."
2287,"The institution does, of course, have to purchase and install a Web
cache."
2288,"But this cost is low—many caches use public-domain software that runs on inexpensive PCs.
Through the use of Content Distribution Networks (CDNs), Web caches are increasingly playing an
important role in the Internet."
2289,"A CDN company installs many geographically distributed cachesthroughout the Internet, thereby localizing much of the traffic."
2290,There are shared CDNs (such as Akamaiand Limelight) and dedicated CDNs (such as Google and Netflix).
2291,"We will discuss CDNs in more detail
in Section 2.6.
The Conditional GET
Although caching can reduce user-perceived response times, it introduces a new problem—the copy of
an object residing in the cache may be stale."
2292,"In other words, the object housed in the Web server mayhave been modified since the copy was cached at the client."
2293,"Fortunately, HTTP has a mechanism thatallows a cache to verify that its objects are up to date."
2294,"This mechanism is called the conditional GET .An HTTP request message is a so-called conditional GET message if (1) the request message uses the
GET method and (2) the request message includes an If-Modified-Since:  header line."
2295,"To illustrate how the conditional GET operates, let’s walk through an example."
2296,"First, on the behalf of a
requesting browser, a proxy cache sends a request message to a Web server:
GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com
Second, the Web server sends a response message with the requested object to the cache:
HTTP/1.1 200 OK
Date: Sat, 3 Oct 2015 15:39:29Server: Apache/1.3.0 (Unix)Last-Modified: Wed, 9 Sep 2015 09:23:24Content-Type: image/gif
(data data data data data ...)
The cache forwards the object to the requesting browser but also caches the object locally."
2297,"Importantly,
the cache also stores the last-modified date along with the object."
2298,"Third, one week later, anotherbrowser requests the same object via the cache, and the object is still in the cache."
2299,"Since this objectmay have been modified at the Web server in the past week, the cache performs an up-to-date check byissuing a conditional GET."
2300,"Specifically, the cache sends:
GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.comIf-modified-since: Wed, 9 Sep 2015 09:23:24
Note that the value of the If-modified-since:  header line is exactly equal to the value of the
Last-Modified:  header line that was sent by the server one week ago."
2301,"This conditional GET is
telling the server to send the object only if the object has been modified since the specified date.Suppose the object has not been modified since 9 Sep 2015 09:23:24."
2302,"Then, fourth, the Web serversends a response message to the cache:HTTP/1.1 304 Not Modified
Date: Sat, 10 Oct 2015 15:39:29
Server: Apache/1.3.0 (Unix)
(empty entity body)
We see that in response to the conditional GET, the Web server still sends a response message but
does not include the requested object in the response message."
2303,"Including the requested object would
only waste bandwidth and increase user-perceived response time, particularly if the object is large."
2304,"Note
that this last response message has 304 Not Modified  in the status line, which tells the cache that
it can go ahead and forward its (the proxy cache’s) cached copy of the object to the requesting browser."
2305,"This ends our discussion of HTTP, the first Internet protocol (an application-layer protocol) that we’ve
studied in detail."
2306,"We’ve seen the format of HTTP messages and the actions taken by the Web client and
server as these messages are sent and received."
2307,"We’ve also studied a bit of the Web’s application
infrastructure, including caches, cookies, and back-end databases, all of which are tied in some way tothe HTTP protocol.2.3 Electronic Mail in the Internet
Electronic mail has been around since the beginning of the Internet."
2308,"It was the most popular application
when the Internet was in its infancy [Segaller 1998] , and has become more elaborate and powerful over
the years."
2309,It remains one of the Internet’s most important and utilized applications.
2310,"As with ordinary postal mail, e-mail is an asynchronous communication medium—people send and read
messages when it is convenient for them, without having to coordinate with other people’s schedules."
2311,"In
contrast with postal mail, electronic mail is fast, easy to distribute, and inexpensive."
2312,"Modern e-mail hasmany powerful features, including messages with attachments, hyperlinks, HTML-formatted text, andembedded photos."
2313,"In this section, we examine the application-layer protocols that are at the heart of Internet e-mail."
2314,"But
before we jump into an in-depth discussion of these protocols, let’s take a high-level view of the Internetmail system and its key components."
2315,Figure 2.14 presents a high-level view of the Internet mail system.
2316,"We see from this diagram that it has
three major components: user agents, mail servers , and the Simple Mail Transfer Protocol (SMTP) ."
2317,"We now describe each of these components in the context of a sender, Alice, sending an e-mail
message to a recipient, Bob."
2318,"User agents allow users to read, reply to, forward, save, and composemessages."
2319,Microsoft Outlook and Apple Mail are examples of user agents for e-mail.
2320,"When Alice isfinished composing her message, her user agent sends the message to her mail server, where themessage is placed in the mail server’s outgoing message queue."
2321,"When Bob wants to read a message,his user agent retrieves the message from his mailbox in his mail server."
2322,Mail servers form the core of the e-mail infrastructure.
2323,"Each recipient, such as Bob, has a mailbox
located in one of the mail servers."
2324,"Bob’s mailbox manages andFigure 2.14 A high-level view of the Internet e-mail system
maintains the messages that have been sent to him."
2325,"A typical message starts its journey in the sender’s
user agent, travels to the sender’s mail server, and travels to the recipient’s mail server, where it is
deposited in the recipient’s mailbox."
2326,"When Bob wants to access the messages in his mailbox, the mailserver containing his mailbox authenticates Bob (with usernames and passwords)."
2327,Alice’s mail servermust also deal with failures in Bob’s mail server.
2328,"If Alice’s server cannot deliver mail to Bob’s server,Alice’s server holds the message in a message queue and attempts to transfer the message later."
2329,"Reattempts are often done every 30 minutes or so; if there is no success after several days, the serverremoves the message and notifies the sender (Alice) with an e-mail message."
2330,SMTP is the principal application-layer protocol for Internet electronic mail.
2331,"It uses the reliable data
transfer service of TCP to transfer mail from the sender’s mail server to the recipient’s mail server."
2332,"As
with most application-layer protocols, SMTP has two sides: a client side, which executes on the sender’s
mail server, and a server side, which executes on the recipient’s mail server."
2333,Both the client and serversides of SMTP run on every mail server.
2334,"When a mail server sends mail to other mail servers, it acts as
an SMTP client."
2335,"When a mail server receives mail from other mail servers, it acts as an SMTP server.2.3.1 SMTP
SMTP, defined in RFC 5321, is at the heart of Internet electronic mail."
2336,"As mentioned above, SMTP
transfers messages from senders’ mail servers to the recipients’ mail servers."
2337,SMTP is much older thanHTTP.
2338,"(The original SMTP RFC dates back to 1982, and SMTP was around long before that.) AlthoughSMTP has numerous wonderful qualities, as evidenced by its ubiquity in the Internet, it is nevertheless alegacy technology that possesses certain archaic characteristics."
2339,"For example, it restricts the body (not
just the headers) of all mail messages to simple 7-bit ASCII."
2340,"This restriction made sense in the early
1980s when transmission capacity was scarce and no one was e-mailing large attachments or largeimage, audio, or video files."
2341,"But today, in the multimedia era, the 7-bit ASCII restriction is a bit of a pain—it requires binary multimedia data to be encoded to ASCII before being sent over SMTP; and itrequires the corresponding ASCII message to be decoded back to binary after SMTP transport."
2342,"Recall
from Section 2.2 that HTTP does not require multimedia data to be ASCII encoded before transfer."
2343,"To illustrate the basic operation of SMTP, let’s walk through a common scenario."
2344,"Suppose Alice wants
to send Bob a simple ASCII message."
2345,1.
2346,"Alice invokes her user agent for e-mail, provides Bob’s e-mail address (for example,
bob@someschool.edu ), composes a message, and instructs the user agent to send the
message."
2347,2.
2348,"Alice’s user agent sends the message to her mail server, where it is placed in a message queue."
2349,3.
2350,"The client side of SMTP, running on Alice’s mail server, sees the message in the message
queue."
2351,"It opens a TCP connection to an SMTP server, running on Bob’s mail server."
2352,4.
2353,"After some initial SMTP handshaking, the SMTP client sends Alice’s message into the TCPconnection."
2354,5.
2355,"At Bob’s mail server, the server side of SMTP receives the message."
2356,Bob’s mail server thenplaces the message in Bob’s mailbox.
2357,6.
2358,Bob invokes his user agent to read the message at his convenience.
2359,The scenario is summarized in Figure 2.15.
2360,"It is important to observe that SMTP does not normally use intermediate mail servers for sending mail,
even when the two mail servers are located at opposite ends of the world."
2361,"If Alice’s server is in HongKong and Bob’s server is in St. Louis, the TCPFigure 2.15 Alice sends a message to Bob
connection is a direct connection between the Hong Kong and St. Louis servers."
2362,"In particular, if Bob’s
mail server is down, the message remains in Alice’s mail server and waits for a new attempt—the
message does not get placed in some intermediate mail server."
2363,"Let’s now take a closer look at how SMTP transfers a message from a sending mail server to a
receiving mail server."
2364,We will see that the SMTP protocol has many similarities with protocols that areused for face-to-face human interaction.
2365,"First, the client SMTP (running on the sending mail server host)has TCP establish a connection to port 25 at the server SMTP (running on the receiving mail serverhost)."
2366,"If the server is down, the client tries again later."
2367,"Once this connection is established, the serverand client perform some application-layer handshaking—just as humans often introduce themselves
before transferring information from one to another, SMTP clients and servers introduce themselves
before transferring information."
2368,"During this SMTP handshaking phase, the SMTP client indicates the e-mail address of the sender (the person who generated the message) and the e-mail address of therecipient."
2369,"Once the SMTP client and server have introduced themselves to each other, the client sendsthe message."
2370,SMTP can count on the reliable data transfer service of TCP to get the message to theserver without errors.
2371,"The client then repeats this process over the same TCP connection if it has othermessages to send to the server; otherwise, it instructs TCP to close the connection."
2372,"Let’s next take a look at an example transcript of messages exchanged between an SMTP client (C)
and an SMTP server (S)."
2373,"The hostname of the client is crepes.fr  and the hostname of the server is
hamburger.edu ."
2374,"The ASCII text lines prefaced with C: are exactly the lines the client sends into its
TCP socket, and the ASCII text lines prefaced with S: are exactly the lines the server sends into its
TCP socket."
2375,The following transcript begins as soon as the TCP connection is established.
2376,"S:  220 hamburger.edu
C:  HELO crepes.fr
S:  250 Hello crepes.fr, pleased to meet youC:  MAIL FROM: <alice@crepes.fr>
S:  250 alice@crepes.fr ..."
2377,Sender okC:  RCPT TO: <bob@hamburger.edu>S:  250 bob@hamburger.edu ...
2378,"Recipient okC:  DATA
S:  354 Enter mail, end with ”.” on a line by itself
C:  Do you like ketchup?C:  How about pickles?C:  .S:  250 Message accepted for deliveryC:  QUITS:  221 hamburger.edu closing connection
In the example above, the client sends a message (“ Do you like ketchup?"
2379,"How about
pickles?"
2380,”) from mail server crepes.fr  to mail server hamburger.edu .
2381,"As part of the dialogue,
the client issued five commands: HELO  (an abbreviation for HELLO), MAIL FROM , RCPT TO , DATA ,
and QUIT ."
2382,These commands are self-explanatory.
2383,"The client also sends a line consisting of a single
period, which indicates the end of the message to the server."
2384,"(In ASCII jargon, each message ends with
CRLF.CRLF , where CR and LF stand for carriage return and line feed, respectively.) The server
issues replies to each command, with each reply having a reply code and some (optional) English-language explanation."
2385,"We mention here that SMTP uses persistent connections: If the sending mail
server has several messages to send to the same receiving mail server, it can send all of the messages
over the same TCP connection."
2386,"For each message, the client begins the process with a new MAIL
FROM: crepes.fr , designates the end of message with an isolated period, and issues QUIT  only
after all messages have been sent."
2387,It is highly recommended that you use Telnet to carry out a direct dialogue with an SMTP server.
2388,"To do
this, issue
telnet serverName 25
where serverName  is the name of a local mail server."
2389,"When you do this, you are simply establishing a
TCP connection between your local host and the mail server."
2390,"After typing this line, you should
immediately receive the 220 reply from the server."
2391,"Then issue the SMTP commands HELO , MAIL
FROM , RCPT TO , DATA , CRLF.CRLF , and QUIT  at the appropriate times."
2392,"It is also highly
recommended that you do Programming Assignment 3 at the end of this chapter."
2393,"In that assignment,
you’ll build a simple user agent that implements the client side of SMTP."
2394,It will allow you to send an e-mail message to an arbitrary recipient via a local mail server.
2395,"2.3.2 Comparison with HTTP
Let’s now briefly compare SMTP with HTTP."
2396,"Both protocols are used to transfer files from one host to
another: HTTP transfers files (also called objects) from a Web server to a Web client (typically abrowser); SMTP transfers files (that is, e-mail messages) from one mail server to another mail server.When transferring the files, both persistent HTTP and SMTP use persistent connections."
2397,"Thus, the twoprotocols have common characteristics."
2398,"However, there are important differences."
2399,"First, HTTP is mainly
a pull protocol —someone loads information on a Web server and users use HTTP to pull the
information from the server at their convenience."
2400,"In particular, the TCP connection is initiated by the
machine that wants to receive the file."
2401,"On the other hand, SMTP is primarily a push protocol —the
sending mail server pushes the file to the receiving mail server."
2402,"In particular, the TCP connection isinitiated by the machine that wants to send the file."
2403,"A second difference, which we alluded to earlier, is that SMTP requires each message, including the
body of each message, to be in 7-bit ASCII format."
2404,"If the message contains characters that are not 7-bit
ASCII (for example, French characters with accents) or contains binary data (such as an image file),
then the message has to be encoded into 7-bit ASCII."
2405,HTTP data does not impose this restriction.
2406,"A third important difference concerns how a document consisting of text and images (along with possibly
other media types) is handled."
2407,"As we learned in Section 2.2, HTTP encapsulates each object in its own
HTTP response message."
2408,SMTP places all of the message’s objects into one message.
2409,"2.3.3 Mail Message Formats
When Alice writes an ordinary snail-mail letter to Bob, she may include all kinds of peripheral header
information at the top of the letter, such as Bob’s address, her own return address, and the date.Similarly, when an e-mail message is sent from one person to another, a header containing peripheralinformation precedes the body of the message itself."
2410,"This peripheral information is contained in a seriesof header lines, which are defined in RFC 5322."
2411,"The header lines and the body of the message are
separated by a blank line (that is, by CRLF )."
2412,"RFC 5322 specifies the exact format for mail header lines
as well as their semantic interpretations."
2413,"As with HTTP, each header line contains readable text,
consisting of a keyword followed by a colon followed by a value."
2414,"Some of the keywords are required and
others are optional."
2415,"Every header must have a From:  header line and a To: header line; a header
may include a Subject:  header line as well as other optional header lines."
2416,"It is important to note that
these header lines are different from the SMTP commands we studied in Section 2.4.1 (even thoughthey contain some common words such as “ from” and “to”)."
2417,"The commands in that section were part of
the SMTP handshaking protocol; the header lines examined in this section are part of the mail message
itself."
2418,"A typical message header looks like this:
From: alice@crepes.fr
To: bob@hamburger.edu
Subject: Searching for the meaning of life."
2419,"After the message header, a blank line follows; then the message body (in ASCII) follows."
2420,"You shoulduse Telnet to send a message to a mail server that contains some header lines, including the
Subject:  header line."
2421,"To do this, issue telnet serverName 25,  as discussed in Section 2.4.1.
2.3.4 Mail Access Protocols
Once SMTP delivers the message from Alice’s mail server to Bob’s mail server, the message is placedin Bob’s mailbox."
2422,Throughout this discussion we have tacitly assumed that Bob reads his mail bylogging onto the server host and then executing a mail reader that runs on that host.
2423,Up until the early1990s this was the standard way of doing things.
2424,"But today, mail access uses a client-serverarchitecture—the typical user reads e-mail with a client that executes on the user’s end system, for
example, on an office PC, a laptop, or a smartphone."
2425,"By executing a mail client on a local PC, users
enjoy a rich set of features, including the ability to view multimedia messages and attachments."
2426,"Given that Bob (the recipient) executes his user agent on his local PC, it is natural to consider placing a
mail server on his local PC as well."
2427,"With this approach, Alice’s mail server would dialogue directly withBob’s PC."
2428,"There is a problem with this approach, however."
2429,Recall that a mail server managesmailboxes and runs the client and server sides of SMTP.
2430,"If Bob’s mail server were to reside on his localPC, then Bob’s PC would have to remain always on, and connected to the Internet, in order to receive
new mail, which can arrive at any time."
2431,This is impractical for many Internet users.
2432,"Instead, a typical
user runs a user agent on the local PC but accesses its mailbox stored on an always-on shared mailserver."
2433,"This mail server is shared with other users and is typically maintained by the user’s ISP (forexample, university or company)."
2434,Now let’s consider the path an e-mail message takes when it is sent from Alice to Bob.
2435,"We just learned
that at some point along the path the e-mail message needs to be deposited in Bob’s mail server."
2436,Thiscould be done simply by having Alice’s user agent send the message directly to Bob’s mail server.
2437,"Andthis could be done with SMTP—indeed, SMTP has been designed for pushing e-mail from one host to
another."
2438,"However, typically the sender’s user agent does not dialogue directly with the recipient’s mail
server."
2439,"Instead, as shown in Figure 2.16, Alice’s user agent uses SMTP to push the e-mail message
into her mail server, then Alice’s mail server uses SMTP (as an SMTP client) to relay the e-mail
message to Bob’s mail server."
2440,Why the two-step procedure?
2441,"Primarily because without relaying throughAlice’s mail server, Alice’s user agent doesn’t have any recourse to an unreachable destination
Figure 2.16 E-mail protocols and their communicating entities
mail server."
2442,"By having Alice first deposit the e-mail in her own mail server, Alice’s mail server can
repeatedly try to send the message to Bob’s mail server, say every 30 minutes, until Bob’s mail server
becomes operational."
2443,"(And if Alice’s mail server is down, then she has the recourse of complaining toher system administrator!) The SMTP RFC defines how the SMTP commands can be used to relay amessage across multiple SMTP servers."
2444,"But there is still one missing piece to the puzzle! How does a recipient like Bob, running a user agent on
his local PC, obtain his messages, which are sitting in a mail server within Bob’s ISP?"
2445,"Note that Bob’suser agent can’t use SMTP to obtain the messages because obtaining the messages is a pull operation,whereas SMTP is a push protocol."
2446,"The puzzle is completed by introducing a special mail access
protocol that transfers messages from Bob’s mail server to his local PC."
2447,"There are currently a number of
popular mail access protocols, including Post Office Protocol—Version 3 (POP3) , Internet Mail
Access Protocol (IMAP), and HTTP."
2448,"Figure 2.16 provides a summary of the protocols that are used for Internet mail: SMTP is used to
transfer mail from the sender’s mail server to the recipient’s mail server; SMTP is also used to transfer
mail from the sender’s user agent to the sender’s mail server."
2449,"A mail access protocol, such as POP3, isused to transfer mail from the recipient’s mail server to the recipient’s user agent."
2450,"POP3
POP3 is an extremely simple mail access protocol."
2451,"It is defined in [RFC 1939] , which is short and quite
readable."
2452,"Because the protocol is so simple, its functionality is rather limited."
2453,"POP3 begins when the
user agent (the client) opens a TCP connection to the mail server (the server) on port 110."
2454,"With the TCPconnection established, POP3 progresses through three phases: authorization, transaction, and update."
2455,"During the first phase, authorization, the user agent sends a username and a password (in the clear) to
authenticate the user."
2456,"During the second phase, transaction, the user agent retrieves messages; alsoduring this phase, the user agent can mark messages for deletion, remove deletion marks, and obtain
mail statistics."
2457,"The third phase, update, occurs after the client has issued the quit  command, ending
the POP3 session; at this time, the mail server deletes the messages that were marked for deletion."
2458,"In a POP3 transaction, the user agent issues commands, and the server responds to each command
with a reply."
2459,"There are two possible responses: +OK (sometimes followed by server-to-client data),
used by the server to indicate that the previous command was fine; and -ERR , used by the server to
indicate that something was wrong with the previous command."
2460,The authorization phase has two principal commands: user  <username>  and pass  <password> .
2461,"To illustrate these two commands, we suggest that you Telnet directly into a POP3 server, using port
110, and issue these commands."
2462,Suppose that mailServer  is the name of your mail server.
2463,"You will
see something like:
telnet mailServer 110
+OK POP3 server ready
user bob+OKpass hungry+OK user successfully logged on
If you misspell a command, the POP3 server will reply with an -ERR  message."
2464,Now let’s take a look at the transaction phase.
2465,"A user agent using POP3 can often be configured (by the
user) to “download and delete” or to “download and keep.” The sequence of commands issued by a
POP3 user agent depends on which of these two modes the user agent is operating in."
2466,"In the download-
and-delete mode, the user agent will issue the list , retr , and dele  commands."
2467,"As an example,
suppose the user has two messages in his or her mailbox."
2468,"In the dialogue below, C: (standing for
client) is the user agent and S: (standing for server) is the mail server."
2469,"The transaction will look
something like:
C: list
S: 1 498
S: 2 912S: ."
2470,"C: retr 1
S: (blah blah ...S: .................S: ..........blah)S: ."
2471,"C: dele 1
C: retr 2S: (blah blah ...S: .................S: ..........blah)S: .C: dele 2C: quit
S: +OK POP3 server signing off
The user agent first asks the mail server to list the size of each of the stored messages."
2472,The user agentthen retrieves and deletes each message from the server.
2473,"Note that after the authorization phase, the
user agent employed only four commands: list , retr , dele , and quit ."
2474,"The syntax for these
commands is defined in RFC 1939."
2475,"After processing the quit  command, the POP3 server enters the
update phase and removes messages 1 and 2 from the mailbox."
2476,"A problem with this download-and-delete mode is that the recipient, Bob, may be nomadic and may
want to access his mail messages from multiple machines, for example, his office PC, his home PC, andhis portable computer."
2477,"The download-and-delete mode partitions Bob’s mail messages over these threemachines; in particular, if Bob first reads a message on his office PC, he will not be able to reread themessage from his portable at home later in the evening."
2478,"In the download-and-keep mode, the useragent leaves the messages on the mail server after downloading them."
2479,"In this case, Bob can rereadmessages from different machines; he can access a message from work and access it again later in the
week from home."
2480,"During a POP3 session between a user agent and the mail server, the POP3 server maintains some
state information; in particular, it keeps track of which user messages have been marked deleted.However, the POP3 server does not carry state information across POP3 sessions."
2481,This lack of stateinformation across sessions greatly simplifies the implementation of a POP3 server.
2482,"IMAP
With POP3 access, once Bob has downloaded his messages to the local machine, he can create mailfolders and move the downloaded messages into the folders."
2483,"Bob can then delete messages, move
messages across folders, and search for messages (by sender name or subject)."
2484,"But this paradigm—
namely, folders and messages in the local machine—poses a problem for the nomadic user, who wouldprefer to maintain a folder hierarchy on a remote server that can be accessed from any computer."
2485,Thisis not possible with POP3—the POP3 protocol does not provide any means for a user to create remotefolders and assign messages to folders.
2486,"To solve this and other problems, the IMAP protocol, defined in [RFC 3501] , was invented."
2487,"Like POP3,
IMAP is a mail access protocol."
2488,"It has many more features than POP3, but it is also significantly more
complex."
2489,"(And thus the client and server side implementations are significantly more complex.)
An IMAP server will associate each message with a folder; when a message first arrives at the server, it
is associated with the recipient’s INBOX folder."
2490,"The recipient can then move the message into a new,user-created folder, read the message, delete the message, and so on."
2491,"The IMAP protocol provides
commands to allow users to create folders and move messages from one folder to another."
2492,"IMAP also
provides commands that allow users to search remote folders for messages matching specific criteria."
2493,"Note that, unlike POP3, an IMAP server maintains user state information across IMAP sessions—forexample, the names of the folders and which messages are associated with which folders."
2494,"Another important feature of IMAP is that it has commands that permit a user agent to obtain
components of messages."
2495,"For example, a user agent can obtain just the message header of a messageor just one part of a multipart MIME message."
2496,"This feature is useful when there is a low-bandwidthconnection (for example, a slow-speed modem link) between the user agent and its mail server."
2497,"With a
low-bandwidth connection, the user may not want to download all of the messages in its mailbox,
particularly avoiding long messages that might contain, for example, an audio or video clip."
2498,"Web-Based E-Mail
More and more users today are sending and accessing their e-mail through their Web browsers."
2499,"Hotmail
introduced Web-based access in the mid 1990s."
2500,"Now Web-based e-mail is also provided by Google,Yahoo!, as well as just about every major university and corporation."
2501,"With this service, the user agent isan ordinary Web browser, and the user communicates with its remote mailbox via HTTP."
2502,"When a
recipient, such as Bob, wants to access a message in his mailbox, the e-mail message is sent from
Bob’s mail server to Bob’s browser using the HTTP protocol rather than the POP3 or IMAP protocol.When a sender, such as Alice, wants to send an e-mail message, the e-mail message is sent from herbrowser to her mail server over HTTP rather than over SMTP."
2503,"Alice’s mail server, however, still sendsmessages to, and receives messages from, other mail servers using SMTP.2.4 DNS—The Internet’s Directory Service
We human beings can be identified in many ways."
2504,"For example, we can be identified by the names that
appear on our birth certificates."
2505,We can be identified by our social security numbers.
2506,We can beidentified by our driver’s license numbers.
2507,"Although each of these identifiers can be used to identifypeople, within a given context one identifier may be more appropriate than another."
2508,"For example, thecomputers at the IRS (the infamous tax-collecting agency in the United States) prefer to use fixed-length
social security numbers rather than birth certificate names."
2509,"On the other hand, ordinary people prefer
the more mnemonic birth certificate names rather than social security numbers."
2510,"(Indeed, can youimagine saying, “Hi. My name is 132-67-9875."
2511,"Please meet my husband, 178-87-1146.”)
Just as humans can be identified in many ways, so too can Internet hosts."
2512,"One identifier for a host is its
hostname ."
2513,"Hostnames—such as www.facebook.com , www.google.com ,
gaia.cs.umass.edu —are mnemonic and are therefore appreciated by humans."
2514,"However,
hostnames provide little, if any, information about the location within the Internet of the host."
2515,"(A
hostname such as www.eurecom.fr , which ends with the country code .fr, tells us that the host is
probably in France, but doesn’t say much more.) Furthermore, because hostnames can consist of
variable-length alphanumeric characters, they would be difficult to process by routers."
2516,"For thesereasons, hosts are also identified by so-called IP addresses."
2517,"We discuss IP addresses in some detail in Chapter 4, but it is useful to say a few brief words about
them now."
2518,An IP address consists of four bytes and has a rigid hierarchical structure.
2519,"An IP address
looks like 121.7.106.83 , where each period separates one of the bytes expressed in decimal
notation from 0 to 255."
2520,"An IP address is hierarchical because as we scan the address from left to right,
we obtain more and more specific information about where the host is located in the Internet (that is,within which network, in the network of networks)."
2521,"Similarly, when we scan a postal address from bottomto top, we obtain more and more specific information about where the addressee is located."
2522,"2.4.1 Services Provided by DNS
We have just seen that there are two ways to identify a host—by a hostname and by an IP address.People prefer the more mnemonic hostname identifier, while routers prefer fixed-length, hierarchicallystructured IP addresses."
2523,"In order to reconcile these preferences, we need a directory service that
translates hostnames to IP addresses."
2524,"This is the main task of the Internet’s domain name system
(DNS)."
2525,"The DNS is (1) a distributed database implemented in a hierarchy of DNS servers , and (2) anapplication-layer protocol that allows hosts to query the distributed database."
2526,"The DNS servers are often
UNIX machines running the Berkeley Internet Name Domain (BIND) software [BIND 2016] ."
2527,"The DNS
protocol runs over UDP and uses port 53."
2528,"DNS is commonly employed by other application-layer protocols—including HTTP and SMTP to
translate user-supplied hostnames to IP addresses."
2529,"As an example, consider what happens when a
browser (that is, an HTTP client), running on some user’s host, requests the URL
www.someschool.edu/index.html ."
2530,"In order for the user’s host to be able to send an HTTP request
message to the Web server www.someschool.edu , the user’s host must first obtain the IP address of
www.someschool.edu ."
2531,This is done as follows.
2532,1.
2533,The same user machine runs the client side of the DNS application.
2534,2.
2535,"The browser extracts the hostname, www.someschool.edu , from the URL and passes the
hostname to the client side of the DNS application."
2536,3.
2537,The DNS client sends a query containing the hostname to a DNS server.
2538,4.
2539,"The DNS client eventually receives a reply, which includes the IP address for the hostname."
2540,5.
2541,"Once the browser receives the IP address from DNS, it can initiate a TCP connection to the
HTTP server process located at port 80 at that IP address."
2542,"We see from this example that DNS adds an additional delay—sometimes substantial—to the Internet
applications that use it."
2543,"Fortunately, as we discuss below, the desired IP address is often cached in a
“nearby” DNS server, which helps to reduce DNS network traffic as well as the average DNS delay."
2544,"DNS provides a few other important services in addition to translating hostnames to IP addresses:
Host aliasing."
2545, A host with a complicated hostname can have one or more alias names.
2546,"For
example, a hostname such as relay1.west-coast.enterprise.com  could have, say, two
aliases such as enterprise.com  and www.enterprise.com ."
2547,"In this case, the hostname
relay1.west-coast.enterprise.com  is said to be a canonical hostname ."
2548,"Alias hostnames,
when present, are typically more mnemonic than canonical hostnames."
2549,"DNS can be invoked by an
application to obtain the canonical hostname for a supplied alias hostname as well as the IP address
of the host."
2550,Mail server aliasing.
2551," For obvious reasons, it is highly desirable that e-mail addresses be mnemonic."
2552,"For example, if Bob has an account with Yahoo Mail, Bob’s e-mail address might be as simple as
bob@yahoo.mail ."
2553,"However, the hostname of the Yahoo mail server is more complicated and
much less mnemonic than simply yahoo.com  (for example, the canonical hostname might be
something like relay1.west-coast.yahoo.com )."
2554,"DNS can be invoked by a mail application to
obtain the canonical hostname for a supplied alias hostname as well as the IP address of the host.In fact, the MX record (see below) permits a company’s mail server and Web server to have identical
(aliased) hostnames; for example, a company’s Web server and mail server can both be calledenterprise.com ."
2555,Load distribution.
2556," DNS is also used to perform load distribution among replicated servers, such as
replicated Web servers."
2557,"Busy sites, such as cnn.com , are replicated over multiple servers, with
each server running on a different end system and each having a different IP address."
2558,"For replicated
Web servers, a set of IP addresses is thus associated with one canonical hostname."
2559,"The DNS
database contains this set of IP addresses."
2560,"When clients make a DNS query for a name mapped to
a set of addresses, the server responds with the entire set of IP addresses, but rotates the orderingof the addresses within each reply."
2561,"Because a client typically sends its HTTP request message tothe IP address that is listed first in the set, DNS rotation distributes the traffic among the replicatedservers."
2562,DNS rotation is also used for e-mail so that multiple mail servers can have the same aliasname.
2563,"Also, content distribution companies such as Akamai have used DNS in more sophisticated
ways [Dilley 2002] to provide Web content distribution (see Section 2.6.3)."
2564,"The DNS is specified in RFC 1034 and RFC 1035, and updated in several additional RFCs. It is a
complex system, and we only touch upon key aspects of its
PRINCIPLES IN PRACTICE
DNS: CRITICAL NETWORK FUNCTIONS VIA THE CLIENT-SERVER PARADIGM
Like HTTP, FTP, and SMTP, the DNS protocol is an application-layer protocol since it (1) runs
between communicating end systems using the client-server paradigm and (2) relies on anunderlying end-to-end transport protocol to transfer DNS messages between communicating
end systems."
2565,"In another sense, however, the role of the DNS is quite different from Web, file
transfer, and e-mail applications."
2566,"Unlike these applications, the DNS is not an application withwhich a user directly interacts."
2567,"Instead, the DNS provides a core Internet function—namely,translating hostnames to their underlying IP addresses, for user applications and other software
in the Internet."
2568,"We noted in Section 1.2 that much of the complexity in the Internet architecture
is located at the “edges” of the network."
2569,"The DNS, which implements the critical name-to-
address translation process using clients and servers located at the edge of the network, is yetanother example of that design philosophy."
2570,operation here.
2571,"The interested reader is referred to these RFCs and the book by Albitz and Liu [Albitz
1993] ; see also the retrospective paper [Mockapetris 1988] , which provides a nice description of the
what and why of DNS, and [Mockapetris 2005] ."
2572,"2.4.2 Overview of How DNS Works
We now present a high-level overview of how DNS works."
2573,Our discussion will focus on the hostname-to-IP-address translation service.
2574,"Suppose that some application (such as a Web browser or a mail reader) running in a user’s host needs
to translate a hostname to an IP address."
2575,"The application will invoke the client side of DNS, specifying
the hostname that needs to be translated."
2576,"(On many UNIX-based machines, gethostbyname()  is the
function call that an application calls in order to perform the translation.) DNS in the user’s host then
takes over, sending a query message into the network."
2577,All DNS query and reply messages are sentwithin UDP datagrams to port 53.
2578,"After a delay, ranging from milliseconds to seconds, DNS in the user’shost receives a DNS reply message that provides the desired mapping."
2579,This mapping is then passed tothe invoking application.
2580,"Thus, from the perspective of the invoking application in the user’s host, DNS isa black box providing a simple, straightforward translation service."
2581,"But in fact, the black box that
implements the service is complex, consisting of a large number of DNS servers distributed around the
globe, as well as an application-layer protocol that specifies how the DNS servers and querying hostscommunicate."
2582,A simple design for DNS would have one DNS server that contains all the mappings.
2583,"In this centralized
design, clients simply direct all queries to the single DNS server, and the DNS server responds directlyto the querying clients."
2584,"Although the simplicity of this design is attractive, it is inappropriate for today’s
Internet, with its vast (and growing) number of hosts."
2585,"The problems with a centralized design include:
A single point of failure ."
2586,"If the DNS server crashes, so does the entire Internet!
Traffic volume."
2587,"A single DNS server would have to handle all DNS queries (for all the HTTP
requests and e-mail messages generated from hundreds of millions of hosts)."
2588,Distant centralized database.
2589,A single DNS server cannot be “close to” all the querying clients.
2590,"Ifwe put the single DNS server in New York City, then all queries from Australia must travel to the
other side of the globe, perhaps over slow and congested links."
2591,This can lead to significant delays.
2592,Maintenance.
2593,The single DNS server would have to keep records for all Internet hosts.
2594,"Not only
would this centralized database be huge, but it would have to be updated frequently to account for
every new host."
2595,"In summary, a centralized database in a single DNS server simply doesn’t scale."
2596," Consequently, the
DNS is distributed by design."
2597,"In fact, the DNS is a wonderful example of how a distributed database canbe implemented in the Internet."
2598,"A Distributed, Hierarchical Database
In order to deal with the issue of scale, the DNS uses a large number of servers, organized in a
hierarchical fashion and distributed around the world."
2599,No single DNS server has all of the mappings forall of the hosts in the Internet.
2600,"Instead, the mappings are distributed across the DNS servers."
2601,"To a first
approximation, there are three classes of DNS servers—root DNS servers, top-level domain (TLD) DNSservers, and authoritative DNS servers—organized in a hierarchy as shown in Figure 2.17."
2602,"To
understand how these three classes of servers interact, suppose a DNS client wants to determine the IP
address for the hostname www.amazon.com ."
2603,"To a first
Figure 2.17 Portion of the hierarchy of DNS servers
approximation, the following events will take place."
2604,"The client first contacts one of the root servers,which returns IP addresses for TLD servers for the top-level domain com."
2605,"The client then contacts one
of these TLD servers, which returns the IP address of an authoritative server for amazon.com ."
2606,"Finally,
the client contacts one of the authoritative servers for amazon.com , which returns the IP address for
the hostname www.amazon.com ."
2607,We’ll soon examine this DNS lookup process in more detail.
2608,"But let’s
first take a closer look at these three classes of DNS servers:
Root DNS servers."
2609, There are over 400 root name servers scattered all over the world.
2610,"Figure 2.18
shows the countries that have root names servers, with countries having more than ten darkly
shaded."
2611,These root name servers are managed by 13 different organizations.
2612,"The full list of rootname servers, along with the organizations that manage them and their IP addresses can be found
at [Root Servers 2016] ."
2613,Root name servers provide the IP addresses of the TLD servers.
2614,Top-level domain (TLD) servers.
2615,"For each of the top-level domains — top-level domains such as
com, org, net, edu, and gov, and all of the country top-level domains such as uk, fr, ca, and jp —
there is TLD server (or server cluster)."
2616,"The company Verisign Global Registry Services maintains
the TLD servers for the com top-level domain, and the company Educause maintains the TLD
servers for the edu top-level domain."
2617,"The network infrastructure supporting a TLD can be large and
complex; see [Osterweil 2012] for a nice overview of the Verisign network."
2618,"See [TLD list 2016] for
a list of all top-level domains."
2619,"TLD servers provide the IP addresses for authoritative DNS servers.Figure 2.18 DNS root servers in 2016
Authoritative DNS servers ."
2620,"Every organization with publicly accessible hosts (such as Web servers
and mail servers) on the Internet must provide publicly accessible DNS records that map the names
of those hosts to IP addresses."
2621,An organization’s authoritative DNS server houses these DNSrecords.
2622,"An organization can choose to implement its own authoritative DNS server to hold these
records; alternatively, the organization can pay to have these records stored in an authoritative DNS
server of some service provider."
2623,Most universities and large companies implement and maintaintheir own primary and secondary (backup) authoritative DNS server.
2624,"The root, TLD, and authoritative DNS servers all belong to the hierarchy of DNS servers, as shown in
Figure 2.17."
2625,There is another important type of DNS server called the local DNS server .
2626,"A local DNS
server does not strictly belong to the hierarchy of servers but is nevertheless central to the DNS
architecture."
2627,Each ISP—such as a residential ISP or an institutional ISP—has a local DNS server (alsocalled a default name server).
2628,"When a host connects to an ISP, the ISP provides the host with the IP
addresses of one or more of its local DNS servers (typically through DHCP, which is discussed in
Chapter 4)."
2629,"You can easily determine the IP address of your local DNS server by accessing network
status windows in Windows or UNIX."
2630,A host’s local DNS server is typically “close to” the host.
2631,"For an
institutional ISP, the local DNS server may be on the same LAN as the host; for a residential ISP, it istypically separated from the host by no more than a few routers."
2632,"When a host makes a DNS query, thequery is sent to the local DNS server, which acts a proxy, forwarding the query into the DNS serverhierarchy, as we’ll discuss in more detail below."
2633,Let’s take a look at a simple example.
2634,"Suppose the host cse.nyu.edu  desires the IP address of
gaia.cs.umass.edu ."
2635,"Also suppose that NYU’s ocal DNS server for cse.nyu.edu  is calleddns.nyu.edu  and that an authoritative DNS server for gaia.cs.umass.edu  is called
dns.umass.edu ."
2636,"As shown in Figure 2.19, the host cse.nyu.edu  first sends a DNS query
message to its local DNS server, dns.nyu.edu ."
2637,"The query message contains the hostname to be
translated, namely, gaia.cs.umass.edu ."
2638,"The local DNS server forwards the query message to a
root DNS server."
2639,"The root DNS server takes note of the edu suffix and returns to the local DNS server a
list of IP addresses for TLD servers responsible for edu."
2640,"The local DNS server then resends the query
message to one of these TLD servers."
2641,"The TLD server takes note of the umass.edu  suffix and
responds with the IP address of the authoritative DNS server for the University of Massachusetts,namely, dns.umass.edu ."
2642,"Finally, the local DNS server resends the query message directly to
dns.umass.edu , which responds with the IP address of gaia.cs.umass.edu ."
2643,"Note that in this
example, in order to obtain the mapping for one hostname, eight DNS messages were sent: four query
messages and four reply messages! We’ll soon see how DNS caching reduces this query traffic."
2644,"Our previous example assumed that the TLD server knows the authoritative DNS server for the
hostname."
2645,In general this not always true.
2646,"Instead, the TLD server
Figure 2.19 Interaction of the various DNS serversmay know only of an intermediate DNS server, which in turn knows the authoritative DNS server for the
hostname."
2647,"For example, suppose again that the University of Massachusetts has a DNS server for the
university, called dns.umass.edu ."
2648,"Also suppose that each of the departments at the University of
Massachusetts has its own DNS server, and that each departmental DNS server is authoritative for allhosts in the department."
2649,"In this case, when the intermediate DNS server, dns.umass.edu , receives a
query for a host with a hostname ending with cs.umass.edu , it returns to dns.nyu.edu  the IP
address of dns.cs.umass.edu , which is authoritative for all hostnames ending with cs.umass.edu ."
2650,"The local DNS server dns.nyu.edu  then sends the query to the authoritative DNS server, which
returns the desired mapping to the local DNS server, which in turn returns the mapping to the requesting
host."
2651,"In this case, a total of 10 DNS messages are sent!
The example shown in Figure 2.19 makes use of both recursive queries  and iterative queries ."
2652,"The
query sent from cse.nyu.edu  to dns.nyu.edu  is a recursive query, since the query asks
dns.nyu.edu  to obtain the mapping on its behalf."
2653,"But the subsequent three queries are iterative since
all of the replies are directly returned to dns.nyu.edu ."
2654,"In theory, any DNS query can be iterative or
recursive."
2655,"For example, Figure 2.20 shows a DNS query chain for which all of the queries are recursive."
2656,"In practice, the queries typically follow the pattern in Figure 2.19: The query from the requesting host to
the local DNS server is recursive, and the remaining queries are iterative."
2657,"DNS Caching
Our discussion thus far has ignored DNS caching, a critically important feature of the DNS system."
2658,"In
truth, DNS extensively exploits DNS caching in order to improve the delay performance and to reduce
the number of DNS messagesFigure 2.20 Recursive queries in DNS
ricocheting around the Internet."
2659,The idea behind DNS caching is very simple.
2660,"In a query chain, when a
DNS server receives a DNS reply (containing, for example, a mapping from a hostname to an IP
address), it can cache the mapping in its local memory."
2661,"For example, in Figure 2.19, each time the local
DNS server dns.nyu.edu  receives a reply from some DNS server, it can cache any of the information
contained in the reply."
2662,"If a hostname/IP address pair is cached in a DNS server and another query
arrives to the DNS server for the same hostname, the DNS server can provide the desired IP address,even if it is not authoritative for the hostname."
2663,"Because hosts and mappings between hostnames and IP
addresses are by no means permanent, DNS servers discard cached information after a period of time
(often set to two days)."
2664,"As an example, suppose that a host apricot.nyu.edu  queries dns.nyu.edu  for the IP address for
the hostname cnn.com ."
2665,"Furthermore, ­suppose that a few hours later, another NYU host, say,
kiwi.nyu.edu , also queries dns.nyu.edu  with the same hostname."
2666,"Because of caching, the local
DNS server will be able to immediately return the IP address of cnn.com  to this second requestinghost without having to query any other DNS servers."
2667,"A local DNS server can also cache the IP
addresses of TLD servers, thereby allowing the local DNS server to bypass the root DNS servers in a
query chain."
2668,"In fact, because of caching, root servers are bypassed for all but a very small fraction ofDNS queries."
2669,"2.4.3 DNS Records and Messages
The DNS servers that together implement the DNS distributed database store resource records (RRs) ,
including RRs that provide hostname-to-IP address mappings."
2670,Each DNS reply message carries one ormore resource records.
2671,"In this and the following subsection, we provide a brief overview of DNS
resource records and messages; more details can be found in [Albitz 1993] or in the DNS RFCs [RFC
1034 ; RFC 1035] ."
2672,"A resource record is a four-tuple that contains the following fields:
(Name, Value, Type, TTL)
TTL is the time to live of the resource record; it determines when a resource should be removed from a
cache."
2673,"In the example records given below, we ignore the TTL field."
2674,"The meaning of Name  and Value
depend on Type :
If Type=A , then Name  is a hostname and Value  is the IP address for the hostname."
2675,"Thus, a Type
A record provides the standard hostname-to-IP address mapping."
2676,"As an example,
(relay1.bar.foo.com , 145.37.93.126, A)  is a Type A record."
2677,"If Type=NS , then Name  is a domain (such as foo.com ) and Value  is the hostname of an
authoritative DNS server that knows how to obtain the IP addresses for hosts in the domain."
2678,"This
record is used to route DNS queries further along in the query chain."
2679,"As an example, (foo.com,
dns.foo.com , NS)  is a Type NS record."
2680,"If Type=CNAME , then Value  is a canonical hostname for the alias hostname Name ."
2681,"This record
can provide querying hosts the canonical name for a hostname."
2682,"As an example, (foo.com,
relay1.bar.foo.com , CNAME)  is a CNAME record."
2683,"If Type=MX , then Value  is the canonical name of a mail server that has an alias hostname Name ."
2684,"As an example, (foo.com, mail.bar.foo.com , MX)  is an MX record."
2685,"MX records allow the
hostnames of mail servers to have simple aliases."
2686,"Note that by using the MX record, a company can
have the same aliased name for its mail server and for one of its other servers (such as its Webserver)."
2687,"To obtain the canonical name for the mail server, a DNS client would query for an MXrecord; to obtain the canonical name for the other server, the DNS client would query for the CNAME
record."
2688,"If a DNS server is authoritative for a particular hostname, then the DNS server will contain a Type A
record for the hostname."
2689,"(Even if the DNS server is not authoritative, it may contain a Type A record inits cache.) If a server is not authoritative for a hostname, then the server will contain a Type NS record
for the domain that includes the hostname; it will also contain a Type A record that provides the IP
address of the DNS server in the Value  field of the NS record."
2690,"As an example, suppose an edu TLD
server is not authoritative for the host gaia.cs.umass.edu ."
2691,"Then this server will contain a record for
a domain that includes the host gaia.cs.umass.edu , for example, (umass.edu ,
dns.umass.edu , NS) ."
2692,"The edu TLD server would also contain a Type A record, which maps the
DNS server dns.umass.edu  to an IP address, for example, (dns.umass.edu ,
128.119.40.111, A) ."
2693,"DNS Messages
Earlier in this section, we referred to DNS query and reply messages."
2694,"These are the only two kinds of
DNS messages."
2695,"Furthermore, both query and reply messages have the same format, as shown in
Figure 2.21.The semantics of the various fields in a DNS message are as follows:
The first 12 bytes is the header section , which has a number of fields."
2696,"The first field is a 16-bit
number that identifies the query."
2697,"This identifier is copied into the reply message to a query, allowing
the client to match received replies with sent queries."
2698,There are a number of flags in the flag field.
2699,A1-bit query/reply flag indicates whether the message is a query (0) or a reply (1).
2700,"A 1-bit authoritative
flag is
Figure 2.21 DNS message format
set in a reply message when a DNS server is an authoritative server for a queried name."
2701,"A 1-bit
recursion-desired flag is set when a client (host or DNS server) desires that the DNS server performrecursion when it doesn’t have the record."
2702,A 1-bit recursion-available field is set in a reply if the DNSserver supports recursion.
2703,"In the header, there are also four number-of fields."
2704,These fields indicatethe number of occurrences of the four types of data sections that follow the header.
2705,The question section  contains information about the query that is being made.
2706,"This section includes
(1) a name field that contains the name that is being queried, and (2) a type field that indicates thetype of question being asked about the name—for example, a host address associated with a name(Type A) or the mail server for a name (Type MX)."
2707,"In a reply from a DNS server, the answer section  contains the resource records for the name that
was originally queried."
2708,"Recall that in each resource record there is the Type  (for example, A, NS,
CNAME, and MX), the Value , and the TTL."
2709,"A reply can return multiple RRs in the answer, since a
hostname can have multiple IP addresses (for example, for replicated Web servers, as discussedearlier in this section)."
2710,The authority section  contains records of other authoritative servers.
2711,The additional section  contains other helpful records.
2712,"For example, the answer field in a reply to an
MX query contains a resource record providing the canonical hostname of a mail server."
2713,Theadditional section contains a Type A record providing the IP address for the canonical hostname ofthe mail server.
2714,How would you like to send a DNS query message directly from the host you’re working on to someDNS server?
2715,"This can easily be done with the nslookup program , which is available from most
Windows and UNIX platforms."
2716,"For example, from a Windows host, open the Command Prompt andinvoke the nslookup program by simply typing “nslookup.” After invoking nslookup, you can send a DNSquery to any DNS server (root, TLD, or authoritative)."
2717,"After receiving the reply message from the DNSserver, nslookup will display the records included in the reply (in a human-readable format)."
2718,"As analternative to running nslookup from your own host, you can visit one of many Web sites that allow youto remotely employ nslookup."
2719,"(Just type “nslookup” into a search engine and you’ll be brought to one of
these sites.) The DNS Wireshark lab at the end of this chapter will allow you to explore the DNS in much
more detail."
2720,"Inserting Records into the DNS Database
The discussion above focused on how records are retrieved from the DNS database."
2721,"You might be
wondering how records get into the database in the first place."
2722,Let’s look at how this is done in thecontext of a specific example.
2723,Suppose you have just created an exciting new startup company calledNetwork Utopia.
2724,The first thing you’ll surely want to do is register the domain namenetworkutopia.com  at a registrar.
2725,"A registrar  is a commercial entity that verifies the uniqueness of
the domain name, enters the domain name into the DNS database (as discussed below), and collects a
small fee from you for its services."
2726,"Prior to 1999, a single registrar, Network Solutions, had a monopoly
on domain name registration for com, net, and org domains."
2727,"But now there are many registrars
competing for customers, and the Internet Corporation for Assigned Names and Numbers (ICANN)accredits the various registrars."
2728,"A complete list of accredited registrars is available at http:/ /
www.internic.net ."
2729,"When you register the domain name networkutopia.com  with some registrar, you also need to
provide the registrar with the names and IP addresses of your primary and secondary authoritative DNSservers."
2730,"Suppose the names and IP addresses are dns1.networkutopia.com ,
dns2.networkutopia.com , 212.2.212.1,  and 212.212.212.2.  For each of these two
authoritative DNS servers, the registrar would then make sure that a Type NS and a Type A record are
entered into the TLD com servers."
2731,"Specifically, for the primary authoritative server for
networkutopia.com , the registrar would insert the following two resource records into the DNS
system:
(networkutopia.com, dns1.networkutopia.com, NS)
(dns1.networkutopia.com, 212.212.212.1, A)
You’ll also have to make sure that the Type A resource record for your Web server
www.networkutopia.com  and the Type MX resource record for your mail server
mail.networkutopia.com  are entered into your authoritative DNS
FOCUS ON SECURITY
DNS VULNERABILITIES
We have seen that DNS is a critical component of the Internet infrastructure, with many
important services—including the Web and e-mail—simply incapable of functioning without it."
2732,"We therefore naturally ask, how can DNS be attacked?"
2733,"Is DNS a sitting duck, waiting to be
knocked out of service, while taking most Internet applications down with it?"
2734,"The first type of attack that comes to mind is a DDoS bandwidth-flooding attack (see Section
1.6) against DNS servers."
2735,"For example, an attacker could attempt to send to each DNS root
server a deluge of packets, so many that the majority of legitimate DNS queries never get
answered."
2736,"Such a large-scale DDoS attack against DNS root servers actually took place onOctober 21, 2002."
2737,"In this attack, the attackers leveraged a botnet to send truck loads of ICMPping messages to each of the 13 DNS root IP addresses."
2738,"(ICMP messages are discussed inSection 5.6. For now, it suffices to know that ICMP packets are special types of IP datagrams.)
Fortunately, this large-scale attack caused minimal damage, having little or no impact on users’
Internet experience."
2739,The attackers did succeed at directing a deluge of packets at the rootservers.
2740,"But many of the DNS root servers were protected by packet filters, configured to alwaysblock all ICMP ping messages directed at the root servers."
2741,These protected servers were thusspared and functioned as normal.
2742,"Furthermore, most local DNS servers cache the IP addresses
of top-level-domain servers, allowing the query process to often bypass the DNS root servers."
2743,"A potentially more effective DDoS attack against DNS would be send a deluge of DNS queries
to top-level-domain servers, for example, to all the top-level-domain servers that handle the .comdomain."
2744,It would be harder to filter DNS queries directed to DNS servers; and top-level-domainservers are not as easily bypassed as are root servers.
2745,But the severity of such an attack wouldbe partially mitigated by caching in local DNS servers.
2746,DNS could potentially be attacked in other ways.
2747,"In a man-in-the-middle attack, the attacker
intercepts queries from hosts and returns bogus replies."
2748,"In the DNS poisoning attack, the
attacker sends bogus replies to a DNS server, tricking the server into accepting bogus recordsinto its cache."
2749,"Either of these attacks could be used, for example, to redirect an unsuspectingWeb user to the attacker’s Web site."
2750,"These attacks, however, are difficult to implement, as they
require intercepting packets or throttling servers [Skoudis 2006]."
2751,"In summary, DNS has demonstrated itself to be surprisingly robust against attacks."
2752,"To date,
there hasn’t been an attack that has successfully impeded the DNS service."
2753,servers.
2754,"(Until recently, the contents of each DNS server were configured statically, for example, from aconfiguration file created by a system manager."
2755,"More recently, an UPDATE option has been added tothe DNS protocol to allow data to be dynamically added or deleted from the database via DNS
messages."
2756,"[RFC 2136]  and [RFC 3007]  specify DNS dynamic updates.)
Once all of these steps are completed, people will be able to visit your Web site and send e-mail to the
employees at your company."
2757,Let’s conclude our discussion of DNS by verifying that this statement istrue.
2758,This verification also helps to solidify what we have learned about DNS.
2759,"Suppose Alice in Australia
wants to view the Web page www.networkutopia.com ."
2760,"As discussed earlier, her host will first send
a DNS query to her local DNS server."
2761,The local DNS server will then contact a TLD com server.
2762,"(The
local DNS server will also have to contact a root DNS server if the address of a TLD com server is not
cached.) This TLD server contains the Type NS and Type A resource records listed above, because the
registrar had these resource records inserted into all of the TLD com servers."
2763,"The TLD com serversends a reply to Alice’s local DNS server, with the reply containing the two resource records."
2764,"The local
DNS server then sends a DNS query to 212.212.212.1 , asking for the Type A record corresponding
to www.networkutopia.com ."
2765,"This record provides the IP address of the desired Web server, say,
212.212.71.4 , which the local DNS server passes back to Alice’s host."
2766,Alice’s browser can nowinitiate a TCP connection to the host 212.212.71.4  and send an HTTP request over the connection.
2767,"Whew! There’s a lot more going on than what meets the eye when one surfs the Web!2.5 Peer-to-Peer File Distribution
The applications described in this chapter thus far—including the Web, e-mail, and DNS—all employ
client-server architectures with significant reliance on always-on infrastructure servers."
2768,"Recall from
Section 2.1.1 that with a P2P architecture, there is minimal (or no) reliance on always-on infrastructure
servers."
2769,"Instead, pairs of intermittently connected hosts, called peers, communicate directly with each
other."
2770,"The peers are not owned by a service provider, but are instead desktops and laptops controlled
by users."
2771,"In this section we consider a very natural P2P application, namely, distributing a large file from a single
server to a large number of hosts (called peers)."
2772,"The file might be a new version of the Linux operatingsystem, a software patch for an existing operating system or application, an MP3 music file, or anMPEG video file."
2773,"In client-server file distribution, the server must send a copy of the file to each of thepeers—placing an enormous burden on the server and consuming a large amount of server bandwidth.In P2P file distribution, each peer can redistribute any portion of the file it has received to any other
peers, thereby assisting the server in the distribution process."
2774,"As of 2016, the most popular P2P filedistribution protocol is BitTorrent."
2775,"Originally developed by Bram Cohen, there are now many differentindependent BitTorrent clients conforming to the BitTorrent protocol, just as there are a number of Webbrowser clients that conform to the HTTP protocol."
2776,"In this subsection, we first examine the self-scalability of P2P architectures in the context of file distribution."
2777,"We then describe BitTorrent in somedetail, highlighting its most important characteristics and features."
2778,"Scalability of P2P Architectures
To compare client-server architectures with peer-to-peer architectures, and illustrate the inherent self-
scalability of P2P, we now consider a simple quantitative model for distributing a file to a fixed set of
peers for both architecture types."
2779,"As shown in Figure 2.22, the server and the peers are connected to
the Internet with access links."
2780,"Denote the upload rate of the server’s access link by u, the upload rate of
the ith peer’s access link by u, and the download rate of the ith peer’s access link by d."
2781,"Also denote the
size of the file to be distributed (in bits) by F and the number of peers that want to obtain a copy of the
file by N."
2782,"The distribution time  is the time it takes to get
s
i iFigure 2.22 An illustrative file distribution problem
a copy of the file to all N peers."
2783,"In our analysis of the distribution time below, for both client-server and
P2P architectures, we make the simplifying (and generally accurate [Akella 2003] ) assumption that the
Internet core has abundant bandwidth, implying that all of the bottlenecks are in access networks."
2784,"Wealso suppose that the server and clients are not participating in any other network applications, so thatall of their upload and download access bandwidth can be fully devoted to distributing this file."
2785,"Let’s first determine the distribution time for the client-server architecture, which we denote by D."
2786,"In the
client-server architecture, none of the peers aids in distributing the file."
2787,"We make the following
observations:
The server must transmit one copy of the file to each of the N peers."
2788,Thus the server must transmitNF bits.
2789,"Since the server’s upload rate is u, the time to distribute the file must be at least NF/u ."
2790,"Let d  denote the download rate of the peer with the lowest download rate, that is,
 The peer with the lowest download rate cannot obtain all F bits of the file in
less than F/d  seconds."
2791,Thus the minimum distribution time is at least F/d .
2792,"Putting these two observations together, we obtaincs
s s
min
dmin=min{d1,dp,."
2793,.
2794,".,dN}."
2795,"min min
Dcs≥max{NFus,Fdmin}.This provides a lower bound on the minimum distribution time for the client-server architecture."
2796,"In the
homework problems you will be asked to show that the server can schedule its transmissions so that thelower bound is actually achieved."
2797,"So let’s take this lower bound provided above as the actual distributiontime, that is,
We see from Equation  2.1 that for N large enough, the client-server distribution time is given by NF/u ."
2798,"Thus, the distribution time increases linearly with the number of peers N."
2799,"So, for example, if the number
of peers from one week to the next increases a thousand-fold from a thousand to a million, the time
required to distribute the file to all peers increases by 1,000."
2800,"Let’s now go through a similar analysis for the P2P architecture, where each peer can assist the server
in distributing the file."
2801,"In particular, when a peer receives some file data, it can use its own uploadcapacity to redistribute the data to other peers."
2802,"Calculating the distribution time for the P2P architectureis somewhat more complicated than for the client-server architecture, since the distribution timedepends on how each peer distributes portions of the file to the other peers."
2803,"Nevertheless, a simple
expression for the minimal distribution time can be obtained [Kumar 2006] ."
2804,"To this end, we first make
the following observations:
At the beginning of the distribution, only the server has the file."
2805,"To get this file into the community of
peers, the server must send each bit of the file at least once into its access link."
2806,"Thus, the minimum
distribution time is at least F/u."
2807,"(Unlike the client-server scheme, a bit sent once by the server may
not have to be sent by the server again, as the peers may redistribute the bit among themselves.)
As with the client-server architecture, the peer with the lowest download rate cannot obtain all F bits
of the file in less than F/d  seconds."
2808,Thus the minimum distribution time is at least F/d .
2809,"Finally, observe that the total upload capacity of the system as a whole is equal to the upload rate of
the server plus the upload rates of each of the individual peers, that is,  The
system must deliver (upload) F bits to each of the N peers, thus delivering a total of NF bits."
2810,"This
cannot be done at a rate faster than u."
2811,"Thus, the minimum distribution time is also at least
Putting these three observations together, we obtain the minimum distribution time for P2P, denoted by
D."
2812,Equation  2.2 provides a lower bound for the minimum distribution time for the P2P architecture.
2813,"It turns
out that if we imagine that each peer can redistribute a bit as soon as it receives the bit, then there is aDcs=max{NFus,Fdmin} (2.1)
s
s
min min
utotal=us+u1+⋯+uN."
2814,"total
NF/(us+u1+⋯+uN)."
2815,"P2P
DP2P≥max{Fus,Fdmin,NFus+∑i=1Nui} (2.2)redistribution scheme that actually achieves this lower bound [Kumar 2006] ."
2816,"(We will prove a special
case of this result in the homework.) In reality, where chunks of the file are redistributed rather than
individual bits, Equation  2.2 serves as a good approximation of the actual minimum distribution time."
2817,"Thus, let’s take the lower bound provided by Equation  2.2 as the actual minimum distribution time, that
is,
Figure 2.23 compares the minimum distribution time for the client-server and P2P architectures
assuming that all peers have the same upload rate u."
2818,"In Figure 2.23, we have set 
and  Thus, a peer can transmit the entire file in one hour, the server transmission rate is 10
times the peer upload rate,
Figure 2.23 Distribution time for P2P and client-server architectures
and (for simplicity) the peer download rates are set large enough so as not to have an effect."
2819,"We see
from Figure 2.23 that for the client-server architecture, the distribution time increases linearly and
without bound as the number of peers increases."
2820,"However, for the P2P architecture, the minimal
distribution time is not only always less than the distribution time of the client-server architecture; it is
also less than one hour for any number of peers N."
2821,"Thus, applications with the P2P architecture can be
self-scaling."
2822,"This scalability is a direct consequence of peers being redistributors as well as consumers
of bits."
2823,"BitTorrent
BitTorrent is a popular P2P protocol for file distribution [Chao 2011]."
2824,"In BitTorrent lingo, the collection ofDP2P=max{Fus,Fdmin,NFus+∑i=1Nui} (2.3)
F/u=1 hour, us=10u,
dmin≥us.all peers participating in the distribution of a particular file is called a torrent."
2825,"Peers in a torrent download
equal-size chunks of the file from one another, with a typical chunk size of 256 KBytes."
2826,"When a peer
first joins a torrent, it has no chunks."
2827,Over time it accumulates more and more chunks.
2828,"While it
downloads chunks it also uploads chunks to other peers."
2829,"Once a peer has acquired the entire file, it may
(selfishly) leave the torrent, or (altruistically) remain in the torrent and continue to upload chunks to other
peers."
2830,"Also, any peer may leave the torrent at any time with only a subset of chunks, and later rejoin thetorrent."
2831,Let’s now take a closer look at how BitTorrent operates.
2832,"Since BitTorrent is a rather complicated
protocol and system, we’ll only describe its most important mechanisms, sweeping some of the detailsunder the rug; this will allow us to see the forest through the trees."
2833,"Each torrent has an infrastructure
node called a tracker."
2834,"Figure 2.24 File distribution with BitTorrent
When a peer joins a torrent, it registers itself with the tracker and periodically informs the tracker that it is
still in the torrent."
2835,"In this manner, the tracker keeps track of the peers that are participating in the torrent."
2836,"A given torrent may have fewer than ten or more than a thousand peers participating at any instant oftime.As shown in Figure 2.24, when a new peer, Alice, joins the torrent, the tracker randomly selects a
subset of peers (for concreteness, say 50) from the set of participating peers, and sends the IP
addresses of these 50 peers to Alice."
2837,"Possessing this list of peers, Alice attempts to establishconcurrent TCP connections with all the peers on this list."
2838,"Let’s call all the peers with which Alice
succeeds in establishing a TCP connection “neighboring peers.” (In Figure 2.24, Alice is shown to have
only three neighboring peers."
2839,"Normally, she would have many more.) As time evolves, some of these
peers may leave and other peers (outside the initial 50) may attempt to establish TCP connections with
Alice."
2840,So a peer’s neighboring peers will fluctuate over time.
2841,"At any given time, each peer will have a subset of chunks from the file, with different peers having
different subsets."
2842,"Periodically, Alice will ask each of her neighboring peers (over the TCP connections)
for the list of the chunks they have."
2843,"If Alice has L different neighbors, she will obtain L lists of chunks."
2844,"With this knowledge, Alice will issue requests (again over the TCP connections) for chunks she currently
does not have."
2845,"So at any given instant of time, Alice will have a subset of chunks and will know which chunks her
neighbors have."
2846,"With this information, Alice will have two important decisions to make."
2847,"First, whichchunks should she request first from her neighbors?"
2848,"And second, to which of her neighbors should shesend requested chunks?"
2849,"In deciding which chunks to request, Alice uses a technique called rarest first ."
2850,"The idea is to determine, from among the chunks she does not have, the chunks that are the rarestamong her neighbors (that is, the chunks that have the fewest repeated copies among her neighbors)and then request those rarest chunks first."
2851,"In this manner, the rarest chunks get more quicklyredistributed, aiming to (roughly) equalize the numbers of copies of each chunk in the torrent."
2852,"To determine which requests she responds to, BitTorrent uses a clever trading algorithm."
2853,"The basic idea
is that Alice gives priority to the neighbors that are currently supplying her data at the highest rate."
2854,"Specifically, for each of her neighbors, Alice continually measures the rate at which she receives bits
and determines the four peers that are feeding her bits at the highest rate."
2855,She then reciprocates bysending chunks to these same four peers.
2856,"Every 10 seconds, she recalculates the rates and possiblymodifies the set of four peers."
2857,"In BitTorrent lingo, these four peers are said to be unchoked."
2858,"Importantly, every 30 seconds, she also picks one additional neighbor at random and sends it chunks."
2859,Let’s call the randomly chosen peer Bob.
2860,"In BitTorrent lingo, Bob is said to be optimistically unchoked ."
2861,"Because Alice is sending data to Bob, she may become one of Bob’s top four uploaders, in which case
Bob would start to send data to Alice."
2862,"If the rate at which Bob sends data to Alice is high enough, Bobcould then, in turn, become one of Alice’s top four uploaders."
2863,"In other words, every 30 seconds, Alicewill randomly choose a new trading partner and initiate trading with that partner."
2864,"If the two peers aresatisfied with the trading, they will put each other in their top four lists and continue trading with eachother until one of the peers finds a better partner."
2865,The effect is that peers capable of uploading atcompatible rates tend to find each other.
2866,"The random neighbor selection also allows new peers to getchunks, so that they can have something to trade."
2867,"All other neighboring peers besides these five peers(four “top” peers and one probing peer) are “choked,” that is, they do not receive any chunks from Alice."
2868,"BitTorrent has a number of interesting mechanisms that are not discussed here, including pieces (mini-
chunks), pipelining, random first selection, endgame mode, and anti-snubbing [Cohen 2003]."
2869,The incentive mechanism for trading just described is often referred to as tit-for-tat [Cohen 2003].
2870,"It has
been shown that this incentive scheme can be circumvented [Liogkas 2006; Locher 2006; Piatek
2007] ."
2871,"Nevertheless, the BitTorrent ecosystem is wildly successful, with millions of simultaneous peers
actively sharing files in hundreds of thousands of torrents."
2872,"If BitTorrent had been designed without tit-for-
tat (or a variant), but otherwise exactly the same, BitTorrent would likely not even exist now, as the
majority of the users would have been freeriders [Saroiu 2002]."
2873,"We close our discussion on P2P by briefly mentioning another application of P2P, namely, Distributed
Hast Table (DHT)."
2874,"A distributed hash table is a simple database, with the database records beingdistributed over the peers in a P2P system."
2875,"DHTs have been widely implemented (e.g., in BitTorrent)
and have been the subject of extensive research."
2876,"An overview is provided in a Video Note in the
companion website."
2877,"Walking though distributed hash tables2.6 Video Streaming and Content Distribution Networks
Streaming prerecorded video now accounts for the majority of the traffic in residential ISPs in North
America."
2878,"In particular, the Netflix and YouTube services alone consumed a whopping 37% and 16%,
respectively, of residential ISP traffic in 2015 [Sandvine 2015]."
2879,"In this section we will provide an
overview of how popular video streaming services are implemented in today’s Internet."
2880,"We will see they
are implemented using application-level protocols and servers that function in some ways like a cache."
2881,"In Chapter 9, devoted to multimedia networking, we will further examine Internet video as well as other
Internet multimedia services."
2882,"2.6.1 Internet Video
In streaming stored video applications, the underlying medium is prerecorded video, such as a movie, a
television show, a prerecorded sporting event, or a prerecorded user-generated video (such as thosecommonly seen on YouTube)."
2883,"These prerecorded videos are placed on servers, and users send
requests to the servers to view the videos on demand ."
2884,"Many Internet companies today provide
streaming video, including, Netflix, YouTube (Google), Amazon, and Youku."
2885,"But before launching into a discussion of video streaming, we should first get a quick feel for the video
medium itself."
2886,"A video is a sequence of images, typically being displayed at a constant rate, forexample, at 24 or 30 images per second."
2887,"An uncompressed, digitally encoded image consists of anarray of pixels, with each pixel encoded into a number of bits to represent luminance and color."
2888,"Animportant characteristic of video is that it can be compressed, thereby trading off video quality with bitrate."
2889,Today’s off-the-shelf compression algorithms can compress a video to essentially any bit ratedesired.
2890,"Of course, the higher the bit rate, the better the image quality and the better the overall user
viewing experience."
2891,"From a networking perspective, perhaps the most salient characteristic of video is its high bit rate."
2892,Compressed Internet video typically ranges from 100 kbps for low-quality video to over 3 Mbps forstreaming high-definition movies; 4K streaming envisions a bitrate of more than 10 Mbps.
2893,"This cantranslate to huge amount of traffic and storage, particularly for high-end video."
2894,"For example, a single 2Mbps video with a duration of 67 minutes will consume 1 gigabyte of storage and traffic."
2895,"By far, the mostimportant performance measure for streaming video is average end-to-end throughput."
2896,"In order toprovide continuous playout, the network must provide an average throughput to the streaming
application that is at least as large as the bit rate of the compressed video.We can also use compression to create multiple versions of the same video, each at a different quality
level."
2897,"For example, we can use compression to create, say, three versions of the same video, at rates of300 kbps, 1 Mbps, and 3 Mbps."
2898,Users can then decide which version they want to watch as a function oftheir current available bandwidth.
2899,Users with high-speed Internet connections might choose the 3 Mbpsversion; users watching the video over 3G with a smartphone might choose the 300 kbps version.
2900,"2.6.2 HTTP Streaming and DASH
In HTTP streaming, the video is simply stored at an HTTP server as an ordinary file with a specific URL.When a user wants to see the video, the client establishes a TCP connection with the server and issues
an HTTP GET request for that URL."
2901,"The server then sends the video file, within an HTTP response
message, as quickly as the underlying network protocols and traffic conditions will allow."
2902,"On the client
side, the bytes are collected in a client application buffer."
2903,"Once the number of bytes in this bufferexceeds a predetermined threshold, the client application begins playback—specifically, the streamingvideo application periodically grabs video frames from the client application buffer, decompresses theframes, and displays them on the user’s screen."
2904,"Thus, the video streaming application is displayingvideo as it is receiving and buffering frames corresponding to latter parts of the video."
2905,"Although HTTP streaming, as described in the previous paragraph, has been extensively deployed in
practice (for example, by YouTube since its inception), it has a major shortcoming: All clients receive the
same encoding of the video, despite the large variations in the amount of bandwidth available to a client,both across different clients and also over time for the same client."
2906,"This has led to the development of anew type of HTTP-based streaming, often referred to as Dynamic Adaptive Streaming over HTTP
(DASH)."
2907,"In DASH, the video is encoded into several different versions, with each version having adifferent bit rate and, correspondingly, a different quality level."
2908,The client dynamically requests chunks ofvideo segments of a few seconds in length.
2909,"When the amount of available bandwidth is high, the clientnaturally selects chunks from a high-rate version; and when the available bandwidth is low, it naturally
selects from a low-rate version."
2910,"The client selects different chunks one at a time with HTTP GET request
messages [Akhshabi 2011]."
2911,DASH allows clients with different Internet access rates to stream in video at different encoding rates.
2912,"Clients with low-speed 3G connections can receive a low bit-rate (and low-quality) version, and clientswith fiber connections can receive a high-quality version."
2913,DASH also allows a client to adapt to theavailable bandwidth if the available end-to-end bandwidth changes during the session.
2914,"This feature isparticularly important for mobile users, who typically see their bandwidth availability fluctuate as theymove with respect to the base stations."
2915,"With DASH, each video version is stored in the HTTP server, each with a different URL."
2916,"The HTTPserver also has a manifest file, which provides a URL for each version along with its bit rate."
2917,"The client
first requests the manifest file and learns about the various versions."
2918,"The client then selects one chunk
at a time by specifying a URL and a byte range in an HTTP GET request message for each chunk.While downloading chunks, the client also measures the received bandwidth and runs a ratedetermination algorithm to select the chunk to request next."
2919,"Naturally, if the client has a lot of videobuffered and if the measured receive bandwidth is high, it will choose a chunk from a high-bitrate
version."
2920,"And naturally if the client has little video buffered and the measured received bandwidth is low,
it will choose a chunk from a low-bitrate version."
2921,DASH therefore allows the client to freely switch amongdifferent quality levels.
2922,"2.6.3 Content Distribution Networks
Today, many Internet video companies are distributing on-demand multi-Mbps streams to millions ofusers on a daily basis."
2923,"YouTube, for example, with a library of hundreds of millions of videos, distributeshundreds of millions of video streams to users around the world every day."
2924,Streaming all this traffic tolocations all over the world while providing continuous playout and high interactivity is clearly achallenging task.
2925,"For an Internet video company, perhaps the most straightforward approach to providing streaming video
service is to build a single massive data center, store all of its videos in the data center, and stream thevideos directly from the data center to clients worldwide."
2926,But there are three major problems with thisapproach.
2927,"First, if the client is far from the data center, server-to-client packets will cross manycommunication links and likely pass through many ISPs, with some of the ISPs possibly located ondifferent continents."
2928,"If one of these links provides a throughput that is less than the video consumptionrate, the end-to-end throughput will also be below the consumption rate, resulting in annoying freezing
delays for the user."
2929,"(Recall from Chapter 1 that the end-to-end throughput of a stream is governed by
the throughput at the bottleneck link.) The likelihood of this happening increases as the number of links
in the end-to-end path increases."
2930,A second drawback is that a popular video will likely be sent manytimes over the same communication links.
2931,"Not only does this waste network bandwidth, but the Internet
video company itself will be paying its provider ISP (connected to the data center) for sending the same
bytes into the Internet over and over again."
2932,"A third problem with this solution is that a single data center
represents a single point of failure—if the data center or its links to the Internet goes down, it would not
be able to distribute any video streams."
2933,"In order to meet the challenge of distributing massive amounts of video data to users distributed around
the world, almost all major video-streaming companies make use of Content Distribution Networks
(CDNs) ."
2934,"A CDN manages servers in multiple geographically distributed locations, stores copies of the
videos (and other types of Web content, including documents, images, and audio) in its servers, andattempts to direct each user request to a CDN location that will provide the best user experience."
2935,"TheCDN may be a private CDN , that is, owned by the content provider itself; for example, Google’s CDN
distributes YouTube videos and other types of content."
2936,"The CDN may alternatively be a third-party
CDN that distributes content on behalf of multiple content providers; Akamai, Limelight and Level-3 all
operate third-party CDNs. A very readable overview of modern CDNs is [Leighton 2009; Nygren 2010] ."
2937,"CDNs typically adopt one of two different server placement philosophies [Huang 2008]:
Enter Deep."
2938,"One philosophy, pioneered by Akamai, is to enter deep  into the access networks of
Internet Service Providers, by deploying server clusters in access ISPs all over the world."
2939,"(Accessnetworks are described in Section 1.3.) Akamai takes this approach with clusters in approximately
1,700 locations."
2940,"The goal is to get close to end users, thereby improving user-perceived delay and
throughput by decreasing the number of links and routers between the end user and the CDN server
from which it receives content."
2941,"Because of this highly distributed design, the task of maintaining andmanaging the clusters becomes challenging."
2942,Bring Home.
2943,"A second design philosophy, taken by Limelight and many other CDN companies, is tobring the ISPs home by building large clusters at a smaller number (for example, tens) of sites."
2944,"Instead of getting inside the access ISPs, these CDNs typically place their clusters in Internet
Exchange Points (IXPs) (see Section 1.3)."
2945,"Compared with the enter-deep design philosophy, the
bring-home design typically results in lower maintenance and management overhead, possibly at the
expense of higher delay and lower throughput to end users."
2946,"Once its clusters are in place, the CDN replicates content across its clusters."
2947,"The CDN may not want toplace a copy of every video in each cluster, since some videos are rarely viewed or are only popular insome countries."
2948,"In fact, many CDNs do not push videos to their clusters but instead use a simple pullstrategy: If a client requests a video from a cluster that is not storing the video, then the cluster retrievesthe video (from a central repository or from another cluster) and stores a copy locally while streaming
the video to the client at the same time."
2949,"Similar Web caching (see Section 2.2.5), when a cluster’s
storage becomes full, it removes videos that are not frequently requested."
2950,"CDN Operation
Having identified the two major approaches toward deploying a CDN, let’s now dive down into the nuts
and bolts of how a CDN operates."
2951,"When a browser in a user’s
CASE STUDY
GOOGLE’S NETWORK INFRASTRUCTURE
To support its vast array of cloud services—including search, Gmail, calendar, YouTube video,
maps, documents, and social networks—Google has deployed an extensive private network andCDN infrastructure."
2952,"Google’s CDN infrastructure has three tiers of server clusters:Fourteen “mega data centers,” with eight in North America, four in Europe, and two in Asia
[Google Locations 2016] , with each data center having on the order of 100,000 servers."
2953,"These mega data centers are responsible for serving dynamic (and often personalized)content, including search results and Gmail messages."
2954,"An estimated 50 clusters in IXPs scattered throughout the world, with each cluster consistingon the order of 100–500 servers [Adhikari 2011a] ."
2955,"These clusters are responsible for
serving static content, including YouTube videos [Adhikari 2011a] ."
2956,Many hundreds of “enter-deep” clusters located within an access ISP.
2957,"Here a cluster
typically consists of tens of servers within a single rack."
2958,"These enter-deep ­servers perform
TCP splitting (see Section 3.7) and serve static content [Chen 2011], including the staticportions of Web pages that embody search results."
2959,"All of these data centers and cluster locations are networked together with Google’s own private
network."
2960,"When a user makes a search query, often the query is first sent over the local ISP to anearby enter-deep cache, from where the static content is retrieved; while providing the staticcontent to the client, the nearby cache also forwards the query over Google’s private network toone of the mega data centers, from where the personalized search results are retrieved."
2961,"For aYouTube video, the video itself may come from one of the bring-home caches, whereas portionsof the Web page surrounding the video may come from the nearby enter-deep cache, and theadvertisements surrounding the video come from the data centers."
2962,"In summary, except for the
local ISPs, the Google cloud services are largely provided by a network infrastructure that is
independent of the public Internet."
2963,"host is instructed to retrieve a specific video (identified by a URL), the CDN must intercept the requestso that it can (1) determine a suitable CDN server cluster for that client at that time, and (2) redirect theclient’s request to a server in that cluster."
2964,We’ll shortly discuss how a CDN can determine a suitablecluster.
2965,But first let’s examine the mechanics behind intercepting and redirecting a request.
2966,"Most CDNs take advantage of DNS to intercept and redirect requests; an interesting discussion of such
a use of the DNS is [Vixie 2009]."
2967,"Let’s consider a simple example to illustrate how the DNS is typically
involved."
2968,"Suppose a content provider, NetCinema, employs the third-party CDN company, KingCDN, to
distribute its videos to its customers."
2969,"On the NetCinema Web pages, each of its videos is assigned aURL that includes the string “video” and a unique identifier for the video itself; for example, Transformers
7 might be assigned http:/ /video.netcinema.com/6Y7B23V ."
2970,"Six steps then occur, as shown in Figure
2.25:
1."
2971,The user visits the Web page at NetCinema.
2972,2.
2973,"When the user clicks on the link http:/ /video.netcinema.com/6Y7B23V , the user’s host sends a
DNS query for video.netcinema.com.3. The user’s Local DNS Server (LDNS) relays the DNS query to an authoritative DNS server for
NetCinema, which observes the string “video” in the hostname video.netcinema.com."
2974,"To “hand
over” the DNS query to KingCDN, instead of returning an IP address, the NetCinema
authoritative DNS server returns to the LDNS a hostname in the KingCDN’s domain, for
example, a1105.kingcdn.com ."
2975,4.
2976,"From this point on, the DNS query enters into KingCDN’s private DNS infrastructure."
2977,"The user’s
LDNS then sends a second query, now for a1105.kingcdn.com , and KingCDN’s DNS system
eventually returns the IP addresses of a KingCDN content server to the LDNS."
2978,"It is thus here,within the KingCDN’s DNS system, that the CDN server from which the client will receive its
content is specified."
2979,"Figure 2.25 DNS redirects a user’s request to a CDN server
5."
2980,The LDNS forwards the IP address of the content-serving CDN node to the user’s host.
2981,6.
2982,"Once the client receives the IP address for a KingCDN content server, it establishes a direct
TCP connection with the server at that IP address and issues an HTTP GET request for the
video."
2983,"If DASH is used, the server will first send to the client a manifest file with a list of URLs,one for each version of the video, and the client will dynamically select chunks from the different
versions."
2984,"Cluster Selection Strategies
At the core of any CDN deployment is a cluster selection strategy, that is, a mechanism for
dynamically directing clients to a server cluster or a data center within the CDN."
2985,"As we just saw, theCDN learns the IP address of the client’s LDNS server via the client’s DNS lookup."
2986,"After learning this IP
address, the CDN needs to select an appropriate cluster based on this IP address."
2987,"CDNs generally
employ proprietary cluster selection strategies."
2988,"We now briefly survey a few approaches, each of whichhas its own advantages and disadvantages."
2989,One simple strategy is to assign the client to the cluster that is geographically closest.
2990,"Using
commercial geo-location databases (such as Quova [Quova 2016] and Max-Mind [MaxMind 2016]),
each LDNS IP address is mapped to a geographic location."
2991,"When a DNS request is received from a
particular LDNS, the CDN chooses the geographically closest cluster, that is, the cluster that is thefewest kilometers from the LDNS “as the bird flies.” Such a solution can work reasonably well for a large
fraction of the clients [Agarwal 2009] ."
2992,"However, for some clients, the solution may perform poorly, since
the geographically closest cluster may not be the closest cluster in terms of the length or number of
hops of the network path."
2993,"Furthermore, a problem inherent with all DNS-based approaches is that some
end-users are configured to use remotely located LDNSs [Shaikh 2001; Mao 2002], in which case the
LDNS location may be far from the client’s location."
2994,"Moreover, this simple strategy ignores the variation
in delay and available bandwidth over time of Internet paths, always assigning the same cluster to aparticular client."
2995,"In order to determine the best cluster for a client based on the current traffic conditions, CDNs can
instead perform periodic real-time measurements  of delay and loss performance between their
clusters and clients."
2996,"For instance, a CDN can have each of its clusters periodically send probes (for
example, ping messages or DNS queries) to all of the LDNSs around the world."
2997,One drawback of thisapproach is that many LDNSs are configured to not respond to such probes.
2998,"2.6.4 Case Studies: Netflix, YouTube, and Kankan
We conclude our discussion of streaming stored video by taking a look at three highly successful large-scale deployments: Netflix, YouTube, and Kankan."
2999,"We’ll see that each of these systems take a verydifferent approach, yet employ many of the underlying principles discussed in this section."
3000,"Netflix
Generating 37% of the downstream traffic in residential ISPs in North America in 2015, Netflix has
become the leading service provider for online movies and TV series in the United States [Sandvine
2015] ."
3001,"As we discuss below, Netflix video distribution has two major components: the Amazon cloud
and its own private CDN infrastructure."
3002,"Netflix has a Web site that handles numerous functions, including user registration and login, billing,
movie catalogue for browsing and searching, and a movie recommendation system."
3003,"As shown in 
Figure2.26, this Web site (and its associated backend databases) run entirely on Amazon servers in the
Amazon cloud."
3004,"Additionally, the Amazon cloud handles the following critical functions:
Content ingestion."
3005," Before Netflix can distribute a movie to its customers, it must first ingest and
process the movie."
3006,"Netflix receives studio master versions of movies and uploads them to hosts in
the Amazon cloud."
3007,Content processing.
3008," The machines in the Amazon cloud create many different formats for each
movie, suitable for a diverse array of client video players running on desktop computers,smartphones, and game consoles connected to televisions."
3009,"A different version is created for each ofthese formats and at multiple bit rates, allowing for adaptive streaming over HTTP using DASH."
3010,Uploading versions to its CDN.
3011," Once all of the versions of a movie have been created, the hosts in
the Amazon cloud upload the versions to its CDN."
3012,"Figure 2.26 Netflix video streaming platform
When Netflix first rolled out its video streaming service in 2007, it employed three third-party CDN
companies to distribute its video content."
3013,"Netflix has since created its own private CDN, from which it
now streams all of its videos."
3014,"(Netflix still uses Akamai to distribute its Web pages, however.) To createits own CDN, Netflix has installed server racks both in IXPs and within residential ISPs themselves."
3015,"Netflix currently has server racks in over 50 IXP locations; see [Netflix Open Connect 2016] for a
current list of IXPs housing Netflix racks."
3016,"There are also hundreds of ISP locations housing Netflix racks;also see [Netflix Open Connect 2016], where Netflix provides to potential ISP partners instructions
about installing a (free) Netflix rack for their networks."
3017,Each server in the rack has several 10 GbpsEthernet ports and over 100 terabytes of storage.
3018,"The number of servers in a rack varies: IXP
installations often have tens of servers and contain the entire Netflix streaming video library, including
multiple versions of the videos to support DASH; local IXPs may only have one server and contain only
the most popular videos."
3019,"Netflix does not use pull-caching ( Section 2.2.5) to populate its CDN servers
in the IXPs and ISPs. Instead, Netflix distributes by pushing the videos to its CDN servers during off-
peak hours."
3020,"For those locations that cannot hold the entire library, Netflix pushes only the most popular
videos, which are determined on a day-to-day basis."
3021,"The Netflix CDN design is described in some detail
in the YouTube videos [Netflix Video 1] and [Netflix Video 2]."
3022,"Having described the components of the Netflix architecture, let’s take a closer look at the interaction
between the client and the various servers that are involved in movie delivery."
3023,"As indicated earlier, theWeb pages for browsing the Netflix video library are served from servers in the Amazon cloud."
3024,"When auser selects a movie to play, the Netflix software, running in the Amazon cloud, first determines which ofits CDN servers have copies of the movie."
3025,"Among the servers that have the movie, the software then
determines the “best” server for that client request."
3026,"If the client is using a residential ISP that has a
Netflix CDN server rack installed in that ISP, and this rack has a copy of the requested movie, then aserver in this rack is typically selected."
3027,"If not, a server at a nearby IXP is typically selected."
3028,"Once Netflix determines the CDN server that is to deliver the content, it sends the client the IP address
of the specific server as well as a manifest file, which has the URLs for the different versions of therequested movie."
3029,"The client and that CDN server then directly interact using a proprietary version of
DASH."
3030,"Specifically, as described in Section 2.6.2, the client uses the byte-range header in HTTP GET
request messages, to request chunks from the different versions of the movie."
3031,"Netflix uses chunks that
are approximately four-seconds long [Adhikari 2012]."
3032,"While the chunks are being downloaded, the
client measures the received throughput and runs a rate-determination algorithm to determine the
quality of the next chunk to request."
3033,"Netflix embodies many of the key principles discussed earlier in this section, including adaptive
streaming and CDN distribution."
3034,"However, because Netflix uses its own private CDN, which distributesonly video (and not Web pages), Netflix has been able to simplify and tailor its CDN design."
3035,"In particular,
Netflix does not need to employ DNS redirect, as discussed in Section 2.6.3, to connect a particular
client to a CDN server; instead, the Netflix software (running in the Amazon cloud) directly tells the client
to use a particular CDN server."
3036,"Furthermore, the Netflix CDN uses push caching rather than pull
caching ( Section 2.2.5): content is pushed into the servers at scheduled times at off-peak hours, rather
than dynamically during cache misses."
3037,"YouTube
With 300 hours of video uploaded to YouTube every minute and several billion video views per day
[YouTube 2016], YouTube is indisputably the world’s largest video-sharing site."
3038,YouTube began itsservice in April 2005 and was acquired by Google in November 2006.
3039,"Although the Google/YouTube
design and protocols are proprietary, through several independent measurement efforts we can gain a
basic understanding about how YouTube operates [Zink 2009; Torres 2011 ; Adhikari 2011a]."
3040,"As with
Netflix, YouTube makes extensive use of CDN technology to distribute its videos [Torres 2011] ."
3041,"Similar
to Netflix, Google uses its own private CDN to distribute YouTube videos, and has installed server
clusters in many hundreds of different IXP and ISP locations."
3042,"From these locations and directly from its
huge data centers, Google distributes YouTube videos [Adhikari 2011a] ."
3043,"Unlike Netflix, however,
Google uses pull caching, as described in Section 2.2.5, and DNS redirect, as described in Section
2.6.3. Most of the time, Google’s cluster-selection strategy directs the client to the cluster for which the
RTT between client and cluster is the lowest; however, in order to balance the load across clusters,
sometimes the client is directed (via DNS) to a more distant cluster [Torres 2011] ."
3044,"YouTube employs HTTP streaming, often making a small number of different versions available for a
video, each with a different bit rate and corresponding quality level."
3045,"YouTube does not employ adaptive
streaming (such as DASH), but instead requires the user to manually select a version."
3046,"In order to save
bandwidth and server resources that would be wasted by repositioning or early termination, YouTubeuses the HTTP byte range request to limit the flow of transmitted data after a target amount of video isprefetched."
3047,Several million videos are uploaded to YouTube every day.
3048,"Not only are YouTube videos streamed from
server to client over HTTP, but YouTube uploaders also upload their videos from client to server overHTTP."
3049,"YouTube processes each video it receives, converting it to a YouTube video format and creatingmultiple versions at different bit rates."
3050,This processing takes place entirely within Google data centers.
3051,"(See the case study on Google’s network infrastructure in Section 2.6.3.)
Kankan
We just saw that dedicated servers, operated by private CDNs, stream Netflix and YouTube videos to
clients."
3052,"Netflix and YouTube have to pay not only for the server hardware but also for the bandwidth the
servers use to distribute the videos."
3053,"Given the scale of these services and the amount of bandwidth theyare consuming, such a CDN deployment can be costly."
3054,"We conclude this section by describing an entirely different approach for providing video on demand
over the Internet at a large scale—one that allows the service provider to significantly reduce itsinfrastructure and bandwidth costs."
3055,"As you might suspect, this approach uses P2P delivery instead of(or along with) client-server delivery."
3056,"Since 2011, Kankan (owned and operated by Xunlei) has been
deploying P2P video delivery with great success, with tens of millions of users every month [Zhang
2015] ."
3057,"At a high level, P2P video streaming is very similar to BitTorrent file downloading."
3058,"When a peer wants tosee a video, it contacts a tracker to discover other peers in the system that have a copy of that video."
3059,"This requesting peer then requests chunks of the video in parallel from the other peers that have the
video."
3060,"Different from downloading with BitTorrent, however, requests are preferentially made for chunks
that are to be played back in the near future in order to ensure continuous playback [Dhungel 2012]."
3061,"Recently, Kankan has migrated to a hybrid CDN-P2P streaming system [Zhang 2015]."
3062,"Specifically,
Kankan now deploys a few hundred servers within China and pushes video content to these servers."
3063,This Kankan CDN plays a major role in the start-up stage of video streaming.
3064,"In most cases, the clientrequests the beginning of the content from CDN servers, and in parallel requests content from peers.When the total P2P traffic is sufficient for video playback, the client will cease streaming from the CDNand only stream from peers."
3065,"But if the P2P streaming traffic becomes insufficient, the client will restartCDN connections and return to the mode of hybrid CDN-P2P streaming."
3066,"In this manner, Kankan canensure short initial start-up delays while minimally relying on costly infrastructure servers and bandwidth.2.7 Socket Programming: Creating Network Applications
Now that we’ve looked at a number of important network applications, let’s explore how network
application programs are actually created."
3067,"Recall from Section 2.1 that a typical network application
consists of a pair of programs—a client program and a server program—residing in two different end
systems."
3068,"When these two programs are executed, a client process and a server process are created,and these processes communicate with each other by reading from, and writing to, sockets."
3069,"When
creating a network application, the developer’s main task is therefore to write the code for both the client
and server programs."
3070,There are two types of network applications.
3071,"One type is an implementation whose operation is
specified in a protocol standard, such as an RFC or some other standards document; such anapplication is sometimes referred to as “open,” since the rules specifying its operation are known to all.For such an implementation, the client and server programs must conform to the rules dictated by theRFC."
3072,"For example, the client program could be an implementation of the client side of the HTTP
protocol, described in Section 2.2 and precisely defined in RFC 2616; similarly, the server program
could be an implementation of the HTTP server protocol, also precisely defined in RFC 2616."
3073,"If one
developer writes code for the client program and another developer writes code for the server program,and both developers carefully follow the rules of the RFC, then the two programs will be able tointeroperate."
3074,"Indeed, many of today’s network applications involve communication between client andserver programs that have been created by independent developers—for example, a Google Chromebrowser communicating with an Apache Web server, or a BitTorrent client communicating withBitTorrent tracker."
3075,The other type of network application is a proprietary network application.
3076,"In this case the client and
server programs employ an application-layer protocol that has not been openly published in an RFC or
elsewhere."
3077,"A single developer (or development team) creates both the client and server programs, and
the developer has complete control over what goes in the code."
3078,"But because the code does notimplement an open protocol, other independent developers will not be able to develop code thatinteroperates with the application."
3079,"In this section, we’ll examine the key issues in developing a client-server application, and we’ll “get our
hands dirty” by looking at code that implements a very simple client-server application."
3080,"During the
development phase, one of the first decisions the developer must make is whether the application is torun over TCP or over UDP."
3081,Recall that TCP is connection oriented and provides a reliable byte-streamchannel through which data flows between two end systems.
3082,"UDP is connectionless and sends
independent packets of data from one end system to the other, without any guarantees about delivery.Recall also that when a client or server program implements a protocol defined by an RFC, it should use
the well-known port number associated with the protocol; conversely, when developing a proprietaryapplication, the developer must be careful to avoid using such well-known port numbers."
3083,"(Port numbers
were briefly discussed in Section 2.1. They are covered in more detail in Chapter 3.)
We introduce UDP and TCP socket programming by way of a simple UDP application and a simple TCP
application."
3084,We present the simple UDP and TCP applications in Python 3.
3085,"We could have written thecode in Java, C, or C++, but we chose Python mostly because Python clearly exposes the key socketconcepts."
3086,"With Python there are fewer lines of code, and each line can be explained to the noviceprogrammer without difficulty."
3087,"But there’s no need to be frightened if you are not familiar with Python.You should be able to easily follow the code if you have experience programming in Java, C, or C++."
3088,"If you are interested in client-server programming with Java, you are encouraged to see the Companion
Website for this textbook; in fact, you can find there all the examples in this section (and associated
labs) in Java."
3089,"For readers who are interested in client-server programming in C, there are several good
references available [Donahoo 2001; Stevens 1997 ; Frost 1994; Kurose 1996]; our Python examples
below have a similar look and feel to C."
3090,"2.7.1 Socket Programming with UDP
In this subsection, we’ll write simple client-server programs that use UDP; in the following section, we’ll
write similar programs that use TCP."
3091,"Recall from Section 2.1 that processes running on different machines communicate with each other by
sending messages into sockets."
3092,"We said that each process is analogous to a house and the process’s
socket is analogous to a door."
3093,"The application resides on one side of the door in the house; the
transport-layer protocol resides on the other side of the door in the outside world."
3094,"The applicationdeveloper has control of everything on the application-layer side of the socket; however, it has littlecontrol of the transport-layer side."
3095,"Now let’s take a closer look at the interaction between two communicating processes that use UDP
sockets."
3096,"Before the sending process can push a packet of data out the socket door, when using UDP, itmust first attach a destination address to the packet."
3097,"After the packet passes through the sender’s
socket, the Internet will use this destination address to route the packet through the Internet to the
socket in the receiving process."
3098,"When the packet arrives at the receiving socket, the receiving processwill retrieve the packet through the socket, and then inspect the packet’s contents and take appropriateaction."
3099,"So you may be now wondering, what goes into the destination address that is attached to the packet?As you might expect, the destination host’s IP address is part of the destination address."
3100,"By including
the destination IP address in the packet, the routers in the Internet will be able to route the packetthrough the Internet to the destination host."
3101,"But because a host may be running many networkapplication processes, each with one or more sockets, it is also necessary to identify the particular
socket in the destination host."
3102,"When a socket is created, an identifier, called a port number, is assigned
to it."
3103,"So, as you might expect, the packet’s destination address also includes the socket’s port number."
3104,"In summary, the sending process attaches to the packet a destination address, which consists of thedestination host’s IP address and the destination socket’s port number."
3105,"Moreover, as we shall soon see,the sender’s source address—consisting of the IP address of the source host and the port number of thesource socket—are also attached to the packet."
3106,"However, attaching the source address to the packet is
typically not done by the UDP application code; instead it is automatically done by the underlying
operating system."
3107,"We’ll use the following simple client-server application to demonstrate socket programming for both
UDP and TCP:
1."
3108,The client reads a line of characters (data) from its keyboard and sends the data to the server.
3109,2.
3110,The server receives the data and converts the characters to uppercase.
3111,3.
3112,The server sends the modified data to the client.
3113,4.
3114,The client receives the modified data and displays the line on its screen.
3115,"Figure 2.27 highlights the main socket-related activity of the client and server that communicate over
the UDP transport service."
3116,"Now let’s get our hands dirty and take a look at the client-server program pair for a UDP implementation
of this simple application."
3117,"We also provide a detailed, line-by-line analysis after each program."
3118,"We’llbegin with the UDP client, which will send a simple application-level message to the server."
3119,"In order forFigure 2.27 The client-server application using UDP
the server to be able to receive and reply to the client’s message, it must be ready and running—that is,
it must be running as a process before the client sends its message."
3120,"The client program is called UDPClient.py, and the server program is called UDPServer.py."
3121,"In order to
emphasize the key issues, we intentionally provide code that is minimal."
3122,"“Good code” would certainlyhave a few more auxiliary lines, in particular for handling error cases."
3123,"For this application, we havearbitrarily chosen 12000 for the server port number."
3124,"UDPClient.py
Here is the code for the client side of the application:
from socket import *
serverName = ’hostname’
serverPort = 12000clientSocket = socket(AF_INET, SOCK_DGRAM)
message = raw_input(’Input lowercase sentence:’)
clientSocket.sendto(message.encode(),(serverName, serverPort))modifiedMessage, serverAddress = clientSocket.recvfrom(2048)print(modifiedMessage.decode())clientSocket.close()
Now let’s take a look at the various lines of code in UDPClient.py."
3125,"from socket import *
The socket  module forms the basis of all network communications in Python."
3126,"By including this line, we
will be able to create sockets within our program."
3127,"serverName = ’hostname’
serverPort = 12000
The first line sets the variable serverName  to the string ‘hostname’."
3128,"Here, we provide a string
containing either the IP address of the server (e.g., “128.138.32.126”) or the hostname of the server(e.g., “cis.poly.edu”)."
3129,"If we use the hostname, then a DNS lookup will automatically be performed to get
the IP address.) The second line sets the integer variable serverPort  to 12000."
3130,"clientSocket = socket(AF_INET, SOCK_DGRAM)
This line creates the client’s socket, called clientSocket ."
3131,"The first parameter indicates the address
family; in particular, AF_INET  indicates that the underlying network is using IPv4."
3132,"(Do not worry about
this now—we will discuss IPv4 in Chapter 4.) The second parameter indicates that the socket is of type
SOCK_DGRAM , which means it is a UDP socket (rather than a TCP socket)."
3133,"Note that we are not
specifying the port number of the client socket when we create it; we are instead letting the operating
system do this for us."
3134,"Now that the client process’s door has been created, we will want to create amessage to send through the door."
3135,message = raw_input( ’Input lowercase sentence: ’)raw_input()  is a built-in function in Python.
3136,"When this command is executed, the user at the client is
prompted with the words “Input lowercase sentence:” The user then uses her keyboard to input a line,
which is put into the variable message ."
3137,"Now that we have a socket and a message, we will want to
send the message through the socket to the destination host."
3138,"clientSocket.sendto(message.encode(),(serverName, serverPort))
In the above line, we first convert the message from string type to byte type, as we need to send bytes
into a socket; this is done with the encode()  method."
3139,"The method sendto()  attaches the destination
address (serverName, serverPort ) to the message and sends the resulting packet into the
process’s socket, clientSocket ."
3140,"(As mentioned earlier, the source address is also attached to the
packet, although this is done automatically rather than explicitly by the code.) Sending a client-to-server
message via a UDP socket is that simple! After sending the packet, the client waits to receive data fromthe server."
3141,"modifiedMessage, serverAddress = clientSocket.recvfrom(2048)
With the above line, when a packet arrives from the Internet at the client’s socket, the packet’s data is
put into the variable modifiedMessage  and the packet’s source address is put into the variable
serverAddress ."
3142,"The variable serverAddress  contains both the server’s IP address and the
server’s port number."
3143,"The program UDPClient doesn’t actually need this server address information,
since it already knows the server address from the outset; but this line of Python provides the server
address nevertheless."
3144,The method recvfrom  also takes the buffer size 2048 as input.
3145,"(This buffer size
works for most purposes.)
print(modifiedMessage.decode())
This line prints out modifiedMessage on the user’s display, after converting the message from bytes to
string."
3146,"It should be the original line that the user typed, but now capitalized."
3147,clientSocket.close()This line closes the socket.
3148,The process then terminates.
3149,"UDPServer.py
Let’s now take a look at the server side of the application:
from socket import *
serverPort = 12000
serverSocket = socket(AF_INET, SOCK_DGRAM)serverSocket.bind((’’, serverPort))print(”The server is ready to receive”)while True:    message, clientAddress = serverSocket.recvfrom(2048)    modifiedMessage = message.decode().upper()
    serverSocket.sendto(modifiedMessage.encode(), clientAddress)
Note that the beginning of UDPServer is similar to UDPClient."
3150,"It also imports the socket module, also
sets the integer variable serverPort  to 12000, and also creates a socket of type SOCK_DGRAM  (a
UDP socket)."
3151,"The first line of code that is significantly different from UDPClient is:
serverSocket.bind((’’, serverPort))
The above line binds (that is, assigns) the port number 12000 to the server’s socket."
3152,"Thus in
UDPServer, the code (written by the application developer) is explicitly assigning a port number to thesocket."
3153,"In this manner, when anyone sends a packet to port 12000 at the IP address of the server, that
packet will be directed to this socket."
3154,"UDPServer then enters a while loop; the while loop will allow
UDPServer to receive and process packets from clients indefinitely."
3155,"In the while loop, UDPServer waitsfor a packet to arrive."
3156,"message, clientAddress = serverSocket.recvfrom(2048)
This line of code is similar to what we saw in UDPClient."
3157,"When a packet arrives at the server’s socket,
the packet’s data is put into the variable message  and the packet’s source address is put into the
variable clientAddress ."
3158,"The variable ­clientAddress contains both the client’s IP address and the
client’s port number."
3159,"Here, UDPServer will make use of this address information, as it provides a returnaddress, similar to the return address with ordinary postal mail."
3160,"With this source address information,
the server now knows to where it should direct its reply."
3161,"modifiedMessage = message.decode().upper()
This line is the heart of our simple application."
3162,"It takes the line sent by the client and, after converting the
message to a string, uses the method upper()  to capitalize it."
3163,"serverSocket.sendto(modifiedMessage.encode(), clientAddress)
This last line attaches the client’s address (IP address and port number) to the capitalized message
(after converting the string to bytes), and sends the resulting packet into the server’s socket."
3164,"(Asmentioned earlier, the server address is also attached to the packet, although this is done automaticallyrather than explicitly by the code.) The Internet will then deliver the packet to this client address."
3165,"Afterthe server sends the packet, it remains in the while loop, waiting for another UDP packet to arrive (fromany client running on any host)."
3166,"To test the pair of programs, you run UDPClient.py on one host and UDPServer.py on another host."
3167,"Be
sure to include the proper hostname or IP address of the server in UDPClient.py."
3168,"Next, you executeUDPServer.py, the compiled server program, in the server host."
3169,This creates a process in the serverthat idles until it is contacted by some client.
3170,"Then you execute UDPClient.py, the compiled clientprogram, in the client."
3171,This creates a process in the client.
3172,"Finally, to use the application at the client,you type a sentence followed by a carriage return."
3173,"To develop your own UDP client-server application, you can begin by slightly modifying the client or
server programs."
3174,"For example, instead of converting all the letters to uppercase, the server could count
the number of times the letter s appears and return this number."
3175,"Or you can modify the client so that
after receiving a capitalized sentence, the user can continue to send more sentences to the server."
3176,"2.7.2 Socket Programming with TCP
Unlike UDP, TCP is a connection-oriented protocol."
3177,"This means that before the client and server can
start to send data to each other, they first need to handshake and establish a TCP connection."
3178,"One endof the TCP connection is attached to the client socket and the other end is attached to a server socket.When creating the TCP connection, we associate with it the client socket address (IP address and portnumber) and the server socket address (IP address and port number)."
3179,"With the TCP connection
established, when one side wants to send data to the other side, it just drops the data into the TCP
connection via its socket."
3180,"This is different from UDP, for which the server must attach a destination
address to the packet before dropping it into the socket."
3181,Now let’s take a closer look at the interaction of client and server programs in TCP.
3182,"The client has the
job of initiating contact with the server."
3183,"In order for the server to be able to react to the client’s initial
contact, the server has to be ready."
3184,This implies two things.
3185,"First, as in the case of UDP, the TCP servermust be running as a process before the client attempts to initiate contact."
3186,"Second, the server programmust have a special door—more precisely, a special socket—that welcomes some initial contact from aclient process running on an arbitrary host."
3187,"Using our house/door analogy for a process/socket, we willsometimes refer to the client’s initial contact as “knocking on the welcoming door.”
With the server process running, the client process can initiate a TCP connection to the server."
3188,"This is
done in the client program by creating a TCP socket."
3189,"When the client creates its TCP socket, it specifies
the address of the welcoming socket in the server, namely, the IP address of the server host and theport number of the socket."
3190,"After creating its socket, the client initiates a three-way handshake andestablishes a TCP connection with the server."
3191,"The three-way handshake, which takes place within thetransport layer, is completely invisible to the client and server programs."
3192,"During the three-way handshake, the client process knocks on the welcoming door of the server
process."
3193,"When the server “hears” the knocking, it creates a new door—more precisely, a new socket
that is dedicated to that particular ­client."
3194,"In our example below, the welcoming door is a TCP socket
object that we call ­serverSocket ; the newly created socket dedicated to the client making the
connection is called connectionSocket ."
3195,"Students who are encountering TCP sockets for the first
time sometimes confuse the welcoming socket (which is the initial point of contact for all clients wanting
to communicate with the server), and each newly created server-side connection socket that is
subsequently created for communicating with each client."
3196,"From the application’s perspective, the client’s socket and the server’s connection socket are directly
connected by a pipe."
3197,"As shown in Figure 2.28, the client process can send arbitrary bytes into its
socket, and TCP guarantees that the server process will receive (through the connection socket) each
byte in the order sent."
3198,"TCP thus provides a reliable service between the client and server processes.Furthermore, just as people can go in and out the same door, the client process not only sends bytesinto but also receives bytes from its socket; similarly, the server process not only receives bytes from but
also sends bytes into its connection socket."
3199,"We use the same simple client-server application to demonstrate socket programming with TCP: The
client sends one line of data to the server, the server capitalizes the line and sends it back to the client."
3200,Figure 2.29 highlights the main socket-related activity of the client and server that communicate overthe TCP transport service.
3201,"Figure 2.28 The TCPServer  process has two sockets
TCPClient.py
Here is the code for the client side of the application:
from socket import *
serverName = ’servername’
serverPort = 12000clientSocket = socket(AF_INET, SOCK_STREAM)clientSocket.connect((serverName, serverPort))
sentence = raw_input(’Input lowercase sentence:’)
clientSocket.send(sentence.encode())modifiedSentence = clientSocket.recv(1024)print(’From Server: ’, modifiedSentence.decode())clientSocket.close()
Let’s now take a look at the various lines in the code that differ significantly from the UDPimplementation."
3202,"The first such line is the creation of the client socket.clientSocket = socket(AF_INET, SOCK_STREAM)
This line creates the client’s socket, called clientSocket ."
3203,"The first parameter again indicates that the
underlying network is using IPv4."
3204,"The second parameter
Figure 2.29 The client-server application using TCP
indicates that the socket is of type SOCK_STREAM , which means it is a TCP socket (rather than a UDP
socket)."
3205,"Note that we are again not specifying the port number of the client socket when we create it; we
are instead letting the operating system do this for us."
3206,"Now the next line of code is very different fromwhat we saw in UDPClient:clientSocket.connect((serverName, serverPort))
Recall that before the client can send data to the server (or vice versa) using a TCP socket, a TCP
connection must first be established between the client and server."
3207,"The above line initiates the TCP
connection between the client and server."
3208,"The parameter of the connect()  method is the address of
the server side of the connection."
3209,"After this line of code is executed, the three-way handshake isperformed and a TCP connection is established between the client and server."
3210,"sentence = raw_input(’Input lowercase sentence:’)
As with UDPClient, the above obtains a sentence from the user."
3211,"The string sentence  continues to
gather characters until the user ends the line by typing a carriage return."
3212,"The next line of code is alsovery different from UDPClient:
clientSocket.send(sentence.encode())
The above line sends the sentence  through the client’s socket and into the TCP connection."
3213,"Note that
the program does not explicitly create a packet and attach the destination address to the packet, as was
the case with UDP sockets."
3214,"Instead the client program simply drops the bytes in the string sentence
into the TCP connection."
3215,The client then waits to receive bytes from the server.
3216,"modifiedSentence = clientSocket.recv(2048)
When characters arrive from the server, they get placed into the string modifiedSentence ."
3217,"Characters continue to accumulate in modifiedSentence  until the line ends with a carriage return
character."
3218,"After printing the capitalized sentence, we close the client’s socket:
clientSocket.close()
This last line closes the socket and, hence, closes the TCP connection between the client and the
server."
3219,"It causes TCP in the client to send a TCP message to TCP in the server (see Section 3.5).TCPServer.py
Now let’s take a look at the server program."
3220,"from socket import *
serverPort = 12000
serverSocket = socket(AF_INET, SOCK_STREAM)serverSocket.bind((’’, serverPort))serverSocket.listen(1)print(’The server is ready to receive’)while True:    connectionSocket, addr = serverSocket.accept()
    sentence = connectionSocket.recv(1024).decode()
    capitalizedSentence = sentence.upper()    connectionSocket.send(capitalizedSentence.encode())    connectionSocket.close()
Let’s now take a look at the lines that differ significantly from UDPServer and TCPClient."
3221,"As withTCPClient, the server creates a TCP socket with:
serverSocket=socket(AF_INET, SOCK_STREAM)
Similar to UDPServer, we associate the server port number, serverPort , with this socket:
serverSocket.bind((’’, serverPort))
But with TCP, serverSocket  will be our welcoming socket."
3222,"After establishing this welcoming door, we
will wait and listen for some client to knock on the door:
serverSocket.listen(1)
This line has the server listen for TCP connection requests from the client."
3223,"The parameter specifies themaximum number of queued connections (at least 1).connectionSocket, addr = serverSocket.accept()
When a client knocks on this door, the program invokes the accept()  method for serverSocket, which
creates a new socket in the server, called ­connectionSocket , dedicated to this particular client."
3224,"The client and server then complete the handshaking, creating a TCP connection between the client’s
clientSocket  and the server’s connectionSocket ."
3225,"With the TCP connection established, the
client and server can now send bytes to each other over the connection."
3226,"With TCP, all bytes sent from
one side not are not only guaranteed to arrive at the other side but also guaranteed arrive in order."
3227,"connectionSocket.close()
In this program, after sending the modified sentence to the client, we close the connection socket."
3228,"But
since serverSocket  remains open, another client can now knock on the door and send the server a
sentence to modify."
3229,This completes our discussion of socket programming in TCP.
3230,"You are encouraged to run the two
programs in two separate hosts, and also to modify them to achieve slightly different goals."
3231,"You should
compare the UDP program pair with the TCP program pair and see how they differ."
3232,"You should also do
many of the socket programming assignments described at the ends of Chapter 2, 4, and 9."
3233,"Finally, we
hope someday, after mastering these and more advanced socket programs, you will write your own
popular network application, become very rich and famous, and remember the authors of this textbook!2.8 Summary
In this chapter, we’ve studied the conceptual and the implementation aspects of network applications."
3234,"We’ve learned about the ubiquitous client-server architecture adopted by many Internet applications andseen its use in the HTTP, SMTP, POP3, and DNS protocols."
3235,"We’ve studied these important application-level protocols, and their corresponding associated applications (the Web, file transfer, e-mail, and DNS)in some detail."
3236,We’ve learned about the P2P architecture and how it is used in many applications.
3237,"We’ve also learned about streaming video, and how modern video distribution systems leverage CDNs.
We’ve examined how the socket API can be used to build network applications."
3238,We’ve walked throughthe use of sockets for connection-oriented (TCP) and connectionless (UDP) end-to-end transportservices.
3239,"The first step in our journey down the layered network architecture is now complete!
At the very beginning of this book, in Section 1.1, we gave a rather vague, bare-bones definition of a
protocol: “the format and the order of messages exchanged between two or more communicating
entities, as well as the actions taken on the transmission and/or receipt of a message or other event.”
The material in this chapter, and in particular our detailed study of the HTTP, SMTP, POP3, and DNS
protocols, has now added considerable substance to this definition."
3240,Protocols are a key concept innetworking; our study of application protocols has now given us the opportunity to develop a moreintuitive feel for what protocols are all about.
3241,"In Section 2.1, we described the service models that TCP and UDP offer to applications that invoke
them."
3242,"We took an even closer look at these service models when we developed simple applications that
run over TCP and UDP in Section 2.7. However, we have said little about how TCP and UDP provide
these service models."
3243,"For example, we know that TCP provides a reliable data service, but we haven’t
said yet how it does so."
3244,"In the next chapter we’ll take a careful look at not only the what, but also the
how and why of transport protocols."
3245,"Equipped with knowledge about Internet application structure and application-level protocols, we’re now
ready to head further down the protocol stack and examine the transport layer in Chapter 3.Homework Problems and Questions
Chapter 2 Review Questions
SECTION 2.1
SECTION 2.2–2.5R1."
3246,"List five nonproprietary Internet applications and the application-layer protocols that they
use."
3247,R2.
3248,What is the difference between network architecture and application architecture?
3249,R3.
3250,"For a communication session between a pair of processes, which process is the client and
which is the server?"
3251,R4.
3252,"For a P2P file-sharing application, do you agree with the statement, “There is no notion of
client and server sides of a communication session”?"
3253,Why or why not?
3254,R5.
3255,"What information is used by a process running on one host to identify a process running on
another host?"
3256,R6.
3257,Suppose you wanted to do a transaction from a remote client to a server as fast as possible.
3258,Would you use UDP or TCP?
3259,Why?
3260,R7.
3261,"Referring to Figure 2.4 , we see that none of the applications listed in Figure 2.4 requires
both no data loss and timing."
3262,"Can you conceive of an application that requires no data loss and
that is also highly time-sensitive?"
3263,R8.
3264,List the four broad classes of services that a transport protocol can provide.
3265,"For each of the
service classes, indicate if either UDP or TCP (or both) provides such a service."
3266,R9.
3267,"Recall that TCP can be enhanced with SSL to provide process-to-process security services,
including encryption."
3268,Does SSL operate at the transport layer or the application layer?
3269,"If the
application developer wants TCP to be enhanced with SSL, what does the developer have to
do?"
3270,R10.
3271,What is meant by a handshaking protocol?
3272,R11.
3273,"Why do HTTP, SMTP, and POP3 run on top of TCP rather than on UDP?R12."
3274,"Consider an e-commerce site that wants to keep a purchase record for each of its
customers."
3275,Describe how this can be done with cookies.
3276,R13.
3277,Describe how Web caching can reduce the delay in receiving a requested object.
3278,"Will Web
caching reduce the delay for all objects requested by a user or for only some of the objects?SECTION 2.5
SECTION 2.6Why?"
3279,R14.
3280,Telnet into a Web server and send a multiline request message.
3281,"Include in the request
message the If-modified-since:  header line to force a response message with the 304
Not Modified  status code."
3282,R15.
3283,List several popular messaging apps.
3284,Do they use the same protocols as SMS?R16.
3285,"Suppose Alice, with a Web-based e-mail account (such as Hotmail or Gmail), sends a
message to Bob, who accesses his mail from his mail server using POP3."
3286,"Discuss how the
message gets from Alice’s host to Bob’s host."
3287,Be sure to list the series of application-layerprotocols that are used to move the message between the two hosts.
3288,R17.
3289,Print out the header of an e-mail message you have recently received.
3290,"How many
Received:  header lines are there?"
3291,Analyze each of the header lines in the message.
3292,R18.
3293,"From a user’s perspective, what is the difference between the download-and-delete mode
and the download-and-keep mode in POP3?"
3294,R19.
3295,"Is it possible for an organization’s Web server and mail server to have exactly the same
alias for a hostname (for example, foo.com )?"
3296,"What would be the type for the RR that contains
the hostname of the mail server?"
3297,R20.
3298,"Look over your received e-mails, and examine the header of a message sent from a user
with a .edu e-mail address."
3299,"Is it possible to determine from the header the IP address of the host
from which the message was sent?"
3300,Do the same for a message sent from a Gmail account.
3301,R21.
3302,"In BitTorrent, suppose Alice provides chunks to Bob throughout a 30-second interval."
3303,"Will
Bob necessarily return the favor and provide chunks to Alice in this same interval?"
3304,"Why or why
not?"
3305,R22.
3306,Consider a new peer Alice that joins BitTorrent without possessing any chunks.
3307,"Without
any chunks, she cannot become a top-four uploader for any of the other peers, since she has
nothing to upload."
3308,How then will Alice get her first chunk?
3309,R23.
3310,What is an overlay network?
3311,Does it include routers?
3312,"What are the edges in the overlay
network?"
3313,R24.
3314,CDNs typically adopt one of two different server placement philosophies.
3315,"Name and briefly
describe them."
3316,R25.
3317,"Besides network-related considerations such as delay, loss, and bandwidth performance,
there are other important factors that go into designing a CDN server selection strategy."
3318,"What
are they?SECTION 2.7
ProblemsR26."
3319,"In Section 2.7, the UDP server described needed only one socket, whereas the TCP server
needed two sockets."
3320,Why?
3321,"If the TCP server were to support n simultaneous connections, each
from a different client host, how many sockets would the TCP server need?"
3322,R27.
3323,"For the client-server application over TCP described in Section 2.7 , why must the server
program be executed before the client program?"
3324,"For the client-server application over UDP, why
may the client program be executed before the server program?"
3325,P1.
3326,True or false?
3327,a.
3328,A user requests a Web page that consists of some text and three images.
3329,"For this page,
the client will send one request message and receive four response messages."
3330,b.
3331,"Two distinct Web pages (for example, www.mit.edu/ research.html  and
www.mit.edu/students.html ) can be sent over the same persistent connection."
3332,c.
3333,"With nonpersistent connections between browser and origin server, it is possible for asingle TCP segment to carry two distinct HTTP request messages."
3334,d.
3335,"The Date:  header in the HTTP response message indicates when the object in the
response was last modified."
3336,e.
3337,HTTP response messages never have an empty message body.
3338,P2.
3339,"SMS, iMessage, and WhatsApp are all smartphone real-time messaging systems."
3340,"Afterdoing some research on the Internet, for each of these systems write one paragraph about the
protocols they use."
3341,Then write a paragraph explaining how they differ.
3342,P3.
3343,Consider an HTTP client that wants to retrieve a Web document at a given URL.
3344,"The IP
address of the HTTP server is initially unknown."
3345,"What transport and application-layer protocols
besides HTTP are needed in this scenario?"
3346,P4.
3347,"Consider the following string of ASCII characters that were captured by Wireshark when the
browser sent an HTTP GET message (i.e., this is the actual content of an HTTP GET message)."
3348,"The characters <cr><lf> are carriage return and line-feed characters (that is, the italized
character string <cr> in the text below represents the single carriage-return character that was
contained at that point in the HTTP header)."
3349,"Answer the following questions, indicating where in
the HTTP GET message below you find the answer."
3350,"GET /cs453/index.html HTTP/1.1 <cr><lf> Host: gai
a.cs.umass.edu <cr><lf> User-Agent: Mozilla/5.0 (
Windows;U; Windows NT 5.1; en-US; rv:1.7.2) Gec
ko/20040804 Netscape/7.2 (ax) <cr><lf> Accept:ext/xml, application/xml, application/xhtml+xml, text
/html;q=0.9, text/plain;q=0.8, image/png,*/*;q=0.5
<cr><lf> Accept-Language: en-us, en;q=0.5 <cr><lf> Accept-
Encoding: zip, deflate <cr><lf> Accept-Charset: ISO
-8859-1, utf-8;q=0.7,*;q=0.7 <cr><lf> Keep-Alive: 300 <cr>
<lf>Connection:keep-alive <cr><lf><cr><lf>
a."
3351,What is the URL of the document requested by the browser?
3352,b.
3353,What version of HTTP is the browser running?
3354,c.
3355,Does the browser request a non-persistent or a persistent connection?
3356,d.
3357,What is the IP address of the host on which the browser is running?
3358,e.
3359,What type of browser initiates this message?
3360,"Why is the browser type needed in an
HTTP request message?"
3361,P5.
3362,"The text below shows the reply sent from the server in response to the HTTP GET message
in the question above."
3363,"Answer the following questions, indicating where in the message below
you find the answer."
3364,"HTTP/1.1 200 OK <cr><lf> Date: Tue, 07 Mar 2008
12:39:45GMT <cr><lf> Server: Apache/2.0.52 (Fedora)
<cr><lf>Last-Modified: Sat, 10 Dec2005 18:27:46GMT<cr><lf> ETag: ”526c3-f22-a88a4c80” <cr><lf> Accept-
Ranges: bytes <cr><lf> Content-Length: 3874 <cr><lf>
Keep-Alive: timeout=max=100 <cr><lf> Connection:
Keep-Alive <cr><lf> Content-Type: text/html; charset=
ISO-8859-1 <cr><lf><cr><lf> <!doctype html public ”-
//w3c//dtd html 4.0 transitional//en”> <lf><html> <lf>
<head><lf> <meta http-equiv=”Content-Type”
content=”text/html; charset=iso-8859-1”> <lf> <meta
name=”GENERATOR” content=”Mozilla/4.79 [en] (Windows NT5.0; U) Netscape]”> <lf> <title>CMPSCI 453 / 591 /
NTU-ST550ASpring 2005 homepage</title> <lf></head> <lf>
<much more document text following here (not shown) >
a."
3365,Was the server able to successfully find the document or not?
3366,"What time was the
document reply provided?"
3367,b.
3368,When was the document last modified?
3369,c.
3370,How many bytes are there in the document being returned?
3371,d.
3372,What are the first 5 bytes of the document being returned?
3373,Did the server agree to apersistent connection?
3374,P6.
3375,Obtain the HTTP/1.1 specification (RFC 2616).
3376,"Answer the following questions:
a."
3377,"Explain the mechanism used for signaling between the client and server to indicate that a
persistent connection is being closed."
3378,"Can the client, the server, or both signal the close
of a connection?"
3379,b.
3380,What encryption services are provided by HTTP?
3381,c.
3382,Can a client open three or more simultaneous connections with a given server?
3383,d.
3384,"Either a server or a client may close a transport connection between them if either one
detects the connection has been idle for some time."
3385,"Is it possible that one side starts
closing a connection while the other side is transmitting data via this connection?Explain."
3386,P7.
3387,Suppose within your Web browser you click on a link to obtain a Web page.
3388,"The IP address
for the associated URL is not cached in your local host, so a DNS lookup is necessary to obtain
the IP address."
3389,"Suppose that n DNS servers are visited before your host receives the IP address
from DNS; the successive visits incur an RTT of  Further suppose that the Web
page associated with the link contains exactly one object, consisting of a small amount of HTML
text."
3390,Let RTT  denote the RTT between the local host and the server containing the object.
3391,"Assuming zero transmission time of the object, how much time elapses from when the client
clicks on the link until the client receives the object?"
3392,P8.
3393,"Referring to Problem P7, suppose the HTML file references eight very small objects on the
same server."
3394,"Neglecting transmission times, how much time elapses with
a."
3395,Non-persistent HTTP with no parallel TCP connections?
3396,b.
3397,Non-persistent HTTP with the browser configured for 5 parallel connections?
3398,c.
3399,Persistent HTTP?
3400,P9.
3401,"Consider Figure 2.12 , for which there is an institutional network connected to the Internet."
3402,"Suppose that the average object size is 850,000 bits and that the average request rate from the
institution’s browsers to the origin servers is 16 requests per second."
3403,"Also suppose that the
amount of time it takes from when the router on the Internet side of the access link forwards an
HTTP request until it receives the response is three seconds on average (see Section 2.2.5)."
3404,"Model the total average response time as the sum of the average access delay (that is, the delay
from Internet router to institution router) and the average Internet delay."
3405,"For the average accessdelay, use  where Δ is the average time required to send an object over the access link
and b is the arrival rate of objects to the access link."
3406,a.
3407,Find the total average response time.
3408,b.
3409,Now suppose a cache is installed in the institutional LAN.
3410,"Suppose the miss rate is 0.4.
Find the total response time.RTT1,."
3411,.
3412,".,RTTn.
0
Δ/(1−Δβ),P10."
3413,"Consider a short, 10-meter link, over which a sender can transmit at a rate of 150 bits/sec
in both directions."
3414,"Suppose that packets containing data are 100,000 bits long, and packets
containing only control (e.g., ACK or handshaking) are 200 bits long."
3415,"Assume that N parallel
connections each get 1/ N of the link bandwidth."
3416,"Now consider the HTTP protocol, and suppose
that each downloaded object is 100 Kbits long, and that the initial downloaded object contains 10
referenced objects from the same sender."
3417,"Would parallel downloads via parallel instances of
non-persistent HTTP make sense in this case?"
3418,Now consider persistent HTTP.
3419,"Do you expect
significant gains over the non-persistent case?"
3420,Justify and explain your answer.
3421,P11.
3422,Consider the scenario introduced in the previous problem.
3423,"Now suppose that the link is
shared by Bob with four other users."
3424,"Bob uses parallel instances of non-persistent HTTP, and
the other four users use non-persistent HTTP without parallel downloads."
3425,a.
3426,Do Bob’s parallel connections help him get Web pages more quickly?
3427,Why or why not?
3428,b.
3429,"If all five users open five parallel instances of non-persistent HTTP, then would Bob’s
parallel connections still be beneficial?"
3430,Why or why not?
3431,P12.
3432,"Write a simple TCP program for a server that accepts lines of input from a client and prints
the lines onto the server’s standard output."
3433,"(You can do this by modifying the TCPServer.py
program in the text.) Compile and execute your program."
3434,"On any other machine that contains aWeb browser, set the proxy server in the browser to the host that is running your serverprogram; also configure the port number appropriately."
3435,"Your browser should now send its GETrequest messages to your server, and your server should display the messages on its standardoutput."
3436,Use this platform to determine whether your browser generates conditional GETmessages for objects that are locally cached.
3437,P13.
3438,"What is the difference between MAIL FROM : in SMTP and From : in the mail message
itself?P14."
3439,How does SMTP mark the end of a message body?
3440,How about HTTP?
3441,"Can HTTP use the
same method as SMTP to mark the end of a message body?"
3442,Explain.
3443,P15.
3444,Read RFC 5321 for SMTP.
3445,What does MTA stand for?
3446,"Consider the following received
spam e-mail (modified from a real spam e-mail)."
3447,"Assuming only the originator of this spam e-mail
is malicious and all other hosts are honest, identify the malacious host that has generated thisspam e-mail."
3448,"From - Fri Nov 07 13:41:30 2008Return-Path: <tennis5@pp33head.com>Received: from barmail.cs.umass.edu (barmail.cs.umass.edu[128.119.240.3]) by cs.umass.edu (8.13.1/8.12.6) for<hg@cs.umass.edu>; Fri, 7 Nov 2008 13:27:10 -0500Received: from asusus-4b96 (localhost [127.0.0.1]) by
barmail.cs.umass.edu (Spam Firewall) for <hg@cs.umass.edu>; Fri, 7Nov 2008 13:27:07 -0500 (EST)
Received: from asusus-4b96 ([58.88.21.177]) by barmail.cs.umass.edu
for <hg@cs.umass.edu>; Fri, 07 Nov 2008 13:27:07 -0500 (EST)Received: from [58.88.21.177] by inbnd55.exchangeddd.com; Sat, 8Nov 2008 01:27:07 +0700From: ”Jonny” <tennis5@pp33head.com>
To: <hg@cs.umass.edu>
Subject: How to secure your savings
P16."
3449,"Read the POP3 RFC, RFC 1939."
3450,What is the purpose of the UIDL POP3 command?
3451,P17.
3452,Consider accessing your e-mail with POP3.
3453,a.
3454,"Suppose you have configured your POP mail client to operate in the download-and-
delete mode."
3455,"Complete the following transaction:
C: list
S: 1 498
S: 2 912
S: ."
3456,"C: retr 1
S: blah blah ..."
3457,"S: ..........blah
S: ."
3458,?
3459,?
3460,b.
3461,"Suppose you have configured your POP mail client to operate in the download-and-keep
mode."
3462,"Complete the following transaction:
C: list
S: 1 498
S: 2 912
S: ."
3463,"C: retr 1
S: blah blah ..."
3464,"S: ..........blah
S: ."
3465,??
3466,c.
3467,"Suppose you have configured your POP mail client to operate in the download-and-keep
mode."
3468,"Using your transcript in part (b), suppose you retrieve messages 1 and 2, exit
POP, and then five minutes later you again access POP to retrieve new e-mail."
3469,Supposethat in the five-minute interval no new messages have been sent to you.
3470,"Provide a
transcript of this second POP session."
3471,P18.
3472,a.
3473,What is a whois  database?
3474,b.
3475,Use various whois databases on the Internet to obtain the names of two DNS servers.
3476,Indicate which whois databases you used.
3477,c.
3478,Use nslookup on your local host to send DNS queries to three DNS servers: your localDNS server and the two DNS servers you found in part (b).
3479,"Try querying for Type A, NS,
and MX reports."
3480,Summarize your findings.
3481,d.
3482,Use nslookup to find a Web server that has multiple IP addresses.
3483,"Does the Web server
of your institution (school or company) have multiple IP addresses?"
3484,e.
3485,Use the ARIN whois database to determine the IP address range used by youruniversity.
3486,f.
3487,Describe how an attacker can use whois databases and the nslookup tool to performreconnaissance on an institution before launching an attack.
3488,g.
3489,Discuss why whois databases should be publicly available.
3490,P19.
3491,"In this problem, we use the useful dig tool available on Unix and Linux hosts to explore the
hierarchy of DNS servers."
3492,"Recall that in Figure 2.19 , a DNS server in the DNS hierarchy
delegates a DNS query to a DNS server lower in the hierarchy, by sending back to the DNS
client the name of that lower-level DNS server."
3493,"First read the man page for dig, and then answer
the following questions."
3494,a.
3495,"Starting with a root DNS server (from one of the root servers [a-m].root-servers.net),
initiate a sequence of queries for the IP address for your department’s Web server by
using dig."
3496,"Show the list of the names of DNS servers in the delegation chain in
answering your query."
3497,b.
3498,"Repeat part (a) for several popular Web sites, such as google.com , yahoo.com, or
amazon.com."
3499,P20.
3500,Suppose you can access the caches in the local DNS servers of your department.
3501,"Can you
propose a way to roughly determine the Web servers (outside your department) that are most
popular among the users in your department?"
3502,Explain.
3503,P21.
3504,"Suppose that your department has a local DNS server for all computers in the department.You are an ordinary user (i.e., not a network/system administrator)."
3505,"Can you determine if an
external Web site was likely accessed from a computer in your department a couple of seconds
ago?"
3506,Explain.
3507,P22.
3508,Consider distributing a file of  Gbits to N peers.
3509,"The server has an upload rate of
 Mbps, and each peer has a download rate of  Mbps and an upload rate of u."
3510,"For
 100, and 1,000 and  700 Kbps, and 2 Mbps, prepare a chart giving the
minimum distribution time for each of the combinations of N and u for both client-server
distribution and P2P distribution.P23."
3511,Consider distributing a file of F bits to N peers using a client-server architecture.
3512,"Assume a
fluid model where the server can simultaneously transmit to multiple peers, transmitting to eachpeer at different rates, as long as the combined rate does not exceed u."
3513,a.
3514,"Suppose that  Specify a distribution scheme that has a distribution time of
NF/u ."
3515,b.
3516,"Suppose that  Specify a distribution scheme that has a distribution time of
F/d ."
3517,c.
3518,"Conclude that the minimum distribution time is in general given by 
P24."
3519,Consider distributing a file of F bits to N peers using a P2P architecture.
3520,"Assume a fluid
model."
3521,"For simplicity assume that dmin is very large, so that peer download bandwidth is never a
bottleneck."
3522,a.
3523,"Suppose that  Specify a distribution scheme that has a distribution
time of F/u ."
3524,b.
3525,"Suppose that  Specify a distribution scheme that has a distribution
time of 
c."
3526,"Conclude that the minimum distribution time is in general given by
P25."
3527,"Consider an overlay network with N active peers, with each pair of peers having an active
TCP connection."
3528,"Additionally, suppose that the TCP connections pass through a total of M
routers."
3529,How many nodes and edges are there in the corresponding overlay network?
3530,P26.
3531,"Suppose Bob joins a BitTorrent torrent, but he does not want to upload any data to any
other peers (so called free-riding)."
3532,a.
3533,Bob claims that he can receive a complete copy of the file that is shared by the swarm.
3534,IsBob’s claim possible?
3535,Why or why not?
3536,b.
3537,"Bob further claims that he can further make his “free-riding” more efficient by using acollection of multiple computers (with distinct IP addresses) in the computer lab in his
department."
3538,How can he do that?
3539,P27.
3540,"Consider a DASH system for which there are N video versions (at N different rates and
qualities) and N audio versions (at N different rates and qualities)."
3541,"Suppose we want to allow theF=15
us=30 di=2
N=10, u=300 Kbps,
s
us/N≤dmin."
3542,"s
us/N≥dmin."
3543,"min
max{NF/us, F/dmin}."
3544,us≤(us+u1+…+uN)/N.
3545,"s
us≥(us+u1+…+uN)/N."
3546,NF/(us+u1+…+uN).
3547,"max{F/us, NF/(us+u1+…+uN)}.Socket Programming Assignments
The Companion Website includes six socket programming assignments."
3548,"The first four assignments are
summarized below."
3549,"The fifth assignment makes use of the ICMP protocol and is summarized at the end
of Chapter 5."
3550,"The sixth assignment employs multimedia protocols and is summarized at the end of
Chapter 9."
3551,"It is highly recommended that students complete several, if not all, of these assignments."
3552,"Students can find full details of these assignments, as well as important snippets of the Python code, at
the Web site www.pearsonhighered.com/ cs-resources ."
3553,Assignment 1: Web Serverplayer to choose at any time any of the N video versions and any of the N audio versions.
3554,a.
3555,"If we create files so that the audio is mixed in with the video, so server sends only one
media stream at given time, how many files will the server need to store (each a different
URL)?"
3556,b.
3557,"If the server instead sends the audio and video streams separately and has the client
synchronize the streams, how many files will the server need to store?"
3558,P28.
3559,"Install and compile the Python programs TCPClient and UDPClient on one host and
TCPServer and UDPServer on another host."
3560,a.
3561,Suppose you run TCPClient before you run TCPServer.
3562,What happens?
3563,Why?
3564,b.
3565,Suppose you run UDPClient before you run UDPServer.
3566,What happens?
3567,Why?
3568,c.
3569,What happens if you use different port numbers for the client and server sides?
3570,P29.
3571,"Suppose that in UDPClient.py, after we create the socket, we add the line:
clientSocket.bind((’’, 5432))
Will it become necessary to change UDPServer.py?"
3572,"What are the port numbers for the sockets
in UDPClient and UDPServer?"
3573,What were they before making this change?
3574,P30.
3575,Can you configure your browser to open multiple simultaneous connections to a Web site?
3576,"What are the advantages and disadvantages of having a large number of simultaneous TCP
connections?"
3577,P31.
3578,"We have seen that Internet TCP sockets treat the data being sent as a byte stream but
UDP sockets recognize message boundaries."
3579,"What are one advantage and one disadvantage of
byte-oriented API versus having the API explicitly recognize and preserve application-definedmessage boundaries?"
3580,P32.
3581,What is the Apache Web server?
3582,How much does it cost?
3583,"What functionality does it
currently have?"
3584,"You may want to look at Wikipedia to answer this question.In this assignment, you will develop a simple Web server in Python that is capable of processing only
one request."
3585,"Specifically, your Web server will (i) create a connection socket when contacted by a client(browser); (ii) receive the HTTP request from this connection; (iii) parse the request to determine thespecific file being requested; (iv) get the requested file from the server’s file system; (v) create an HTTPresponse message consisting of the requested file preceded by header lines; and (vi) send the response
over the TCP connection to the requesting browser."
3586,"If a browser requests a file that is not present in
your server, your server should return a “404 Not Found” error message."
3587,"In the Companion Website, we provide the skeleton code for your server."
3588,"Your job is to complete the
code, run your server, and then test your server by sending requests from browsers running on differenthosts."
3589,"If you run your server on a host that already has a Web server running on it, then you should usea different port than port 80 for your Web server."
3590,"Assignment 2: UDP Pinger
In this programming assignment, you will write a client ping program in Python."
3591,"Your client will send a
simple ping message to a server, receive a corresponding pong message back from the server, anddetermine the delay between when the client sent the ping message and received the pong message.This delay is called the Round Trip Time (RTT)."
3592,"The functionality provided by the client and server issimilar to the functionality provided by standard ping program available in modern operating systems.However, standard ping programs use the Internet Control Message Protocol (ICMP) (which we will
study in Chapter 5)."
3593,Here we will create a nonstandard (but simple!) UDP-based ping program.
3594,Your ping program is to send 10 ping messages to the target server over UDP.
3595,"For each message, your
client is to determine and print the RTT when the corresponding pong message is returned."
3596,"BecauseUDP is an unreliable protocol, a packet sent by the client or server may be lost."
3597,"For this reason, theclient cannot wait indefinitely for a reply to a ping message."
3598,"You should have the client wait up to onesecond for a reply from the server; if no reply is received, the client should assume that the packet waslost and print a message accordingly."
3599,"In this assignment, you will be given the complete code for the server (available in the Companion
Website)."
3600,"Your job is to write the client code, which will be very similar to the server code."
3601,"It is
recommended that you first study carefully the server code."
3602,"You can then write your client code, liberally
cutting and pasting lines from the server code."
3603,"Assignment 3: Mail Client
The goal of this programming assignment is to create a simple mail client that sends e-mail to any
recipient."
3604,"Your client will need to establish a TCP connection with a mail server (e.g., a Google mailserver), dialogue with the mail server using the SMTP protocol, send an e-mail message to a recipient(e.g., your friend) via the mail server, and finally close the TCP connection with the mail server."
3605,"For this assignment, the Companion Website provides the skeleton code for your client."
3606,"Your job is to
complete the code and test your client by sending e-mail to different user accounts."
3607,"You may also trysending through different servers (for example, through a Google mail server and through youruniversity mail server)."
3608,"Assignment 4: Multi-Threaded Web Proxy
In this assignment, you will develop a Web proxy."
3609,"When your proxy receives an HTTP request for an
object from a browser, it generates a new HTTP request for the same object and sends it to the originserver."
3610,"When the proxy receives the corresponding HTTP response with the object from the originserver, it creates a new HTTP response, including the object, and sends it to the client."
3611,"This proxy willbe multi-threaded, so that it will be able to handle multiple requests at the same time."
3612,"For this assignment, the Companion Website provides the skeleton code for the proxy server."
3613,"Your job
is to complete the code, and then test it by having different browsers request Web objects via your
proxy."
3614,"Wireshark Lab: HTTP
Having gotten our feet wet with the Wireshark packet sniffer in Lab 1, we’re now ready to use Wireshark
to investigate protocols in operation."
3615,"In this lab, we’ll explore several aspects of the HTTP protocol: thebasic GET/reply interaction, HTTP message formats, retrieving large HTML files, retrieving HTML fileswith embedded URLs, persistent and non-persistent connections, and HTTP authentication and
security."
3616,"As is the case with all Wireshark labs, the full description of this lab is available at this book’s Web site,
www.pearsonhighered.com/ cs-resources ."
3617,"Wireshark Lab: DNS
In this lab, we take a closer look at the client side of the DNS, the protocol that translates Internet
hostnames to IP addresses."
3618,"Recall from Section 2.5 that the client’s role in the DNS is relatively simple
—a client sends a query to its local DNS server and receives a response back."
3619,"Much can go on under
the covers, invisible to the DNS clients, as the hierarchical DNS servers communicate with each other toeither recursively or iteratively resolve the client’s DNS query."
3620,"From the DNS client’s standpoint,however, the protocol is quite simple—a query is formulated to the local DNS server and a response isreceived from that server."
3621,"We observe DNS in action in this lab.As is the case with all Wireshark labs, the full description of this lab is available at this book’s Web site,
www.pearsonhighered.com/ cs-resources ."
3622,"An Interview With…
Marc Andreessen
Marc Andreessen is the co-creator of Mosaic, the Web browser that popularized the World Wide
Web in 1993."
3623,"Mosaic had a clean, easily understood interface and was the first browser todisplay images in-line with text."
3624,"In 1994, Marc Andreessen and Jim Clark founded Netscape,whose browser was by far the most popular browser through the mid-1990s."
3625,"Netscape alsodeveloped the Secure Sockets Layer (SSL) protocol and many Internet server products,including mail servers and SSL-based Web servers."
3626,"He is now a co-founder and general partnerof venture capital firm Andreessen Horowitz, overseeing portfolio development with holdings that
include Facebook, Foursquare, Groupon, Jawbone, Twitter, and Zynga."
3627,"He serves on numerous
boards, including Bump, eBay, Glam Media, Facebook, and Hewlett-Packard."
3628,He holds a BS inComputer Science from the University of Illinois at Urbana-Champaign.
3629,How did you become interested in computing?
3630,"Did you always know that you wanted to work in
information technology?"
3631,"The video game and personal computing revolutions hit right when I was growing up—personal
computing was the new technology frontier in the late 70’s and early 80’s."
3632,"And it wasn’t justApple and the IBM PC, but hundreds of new companies like Commodore and Atari as well."
3633,"Itaught myself to program out of a book called “Instant Freeze-Dried BASIC” at age 10, and gotmy first computer (a TRS-80 Color Computer—look it up!) at age 12."
3634,Please describe one or two of the most exciting projects you have worked on during your career.What were the biggest challenges?
3635,"Undoubtedly the most exciting project was the original Mosaic web browser in ’92–’93—and the
biggest challenge was getting anyone to take it seriously back then."
3636,"At the time, everyonethought the interactive future would be delivered as “interactive television” by huge companies,not as the Internet by startups."
3637,What excites you about the future of networking and the Internet?
3638,"What are your biggest
concerns?"
3639,"The most exciting thing is the huge unexplored frontier of applications and services that
programmers and entrepreneurs are able to explore—the Internet has unleashed creativity at a
level that I don’t think we’ve ever seen before."
3640,"My biggest concern is the principle of unintended
consequences—we don’t always know the implications of what we do, such as the Internetbeing used by governments to run a new level of surveillance on citizens."
3641,Is there anything in particular students should be aware of as Web technology advances?
3642,"The rate of change—the most important thing to learn is how to learn—how to flexibly adapt to
changes in the specific technologies, and how to keep an open mind on the new opportunitiesand possibilities as you move through your career."
3643,What people inspired you professionally?
3644,"Vannevar Bush, Ted Nelson, Doug Engelbart, Nolan Bushnell, Bill Hewlett and Dave Packard,
Ken Olsen, Steve Jobs, Steve Wozniak, Andy Grove, Grace Hopper, Hedy Lamarr, Alan Turing,Richard Stallman."
3645,"What are your recommendations for students who want to pursue careers in computing and
information technology?"
3646,"Go as deep as you possibly can on understanding how technology is created, and then
complement with learning how business works."
3647,Can technology solve the world’s problems?
3648,"No, but we advance the standard of living of people through economic growth, and most
economic growth throughout history has come from technology—so that’s as good as it gets.Chapter 3 Transport Layer
Residing between the application and network layers, the transport layer is a central piece of the layered
network architecture."
3649,It has the critical role of providing communication services directly to theapplication processes running on different hosts.
3650,"The pedagogic approach we take in this chapter is toalternate between discussions of transport-layer principles and discussions of how these principles areimplemented in existing protocols; as usual, particular emphasis will be given to Internet protocols, in
particular the TCP and UDP transport-layer protocols."
3651,We’ll begin by discussing the relationship between the transport and network layers.
3652,"This sets the stage
for examining the first critical function of the transport layer—extending the network layer’s deliveryservice between two end systems to a delivery service between two application-layer processes runningon the end systems."
3653,"We’ll illustrate this function in our coverage of the Internet’s connectionlesstransport protocol, UDP."
3654,"We’ll then return to principles and confront one of the most fundamental problems in computer
networking—how two entities can communicate reliably over a medium that may lose and corrupt data.Through a series of increasingly complicated (and realistic!) scenarios, we’ll build up an array oftechniques that transport protocols use to solve this problem."
3655,"We’ll then show how these principles areembodied in TCP, the Internet’s connection-oriented transport protocol."
3656,"We’ll next move on to a second fundamentally important problem in networking—controlling the
transmission rate of transport-layer entities in order to avoid, or recover from, congestion within thenetwork."
3657,"We’ll consider the causes and consequences of congestion, as well as commonly used
congestion-control techniques."
3658,"After obtaining a solid understanding of the issues behind congestion
control, we’ll study TCP’s approach to congestion control.3.1 Introduction and Transport-Layer Services
In the previous two chapters we touched on the role of the transport layer and the services that it
provides."
3659,Let’s quickly review what we have already learned about the transport layer.
3660,"A transport-layer protocol provides for logical communication  between application processes running
on different hosts."
3661,"By logical communication , we mean that from an application’s perspective, it is as if
the hosts running the processes were directly connected; in reality, the hosts may be on opposite sides
of the planet, connected via numerous routers and a wide range of link types."
3662,"Application processes usethe logical communication provided by the transport layer to send messages to each other, free from the
worry of the details of the physical infrastructure used to carry these messages."
3663,"Figure 3.1 illustrates
the notion of logical communication."
3664,"As shown in Figure 3.1, transport-layer protocols are implemented in the end systems but not in
network routers."
3665,"On the sending side, the transport layer converts the application-layer messages it
receives from a sending application process into transport-layer packets, known as transport-layer
segments in Internet terminology."
3666,This is done by (possibly) breaking the application messages intosmaller chunks and adding a transport-layer header to each chunk to create the transport-layersegment.
3667,"The transport layer then passes the segment to the network layer at the sending end system,where the segment is encapsulated within a network-layer packet (a datagram) and sent to thedestination."
3668,"It’s important to note that network routers act only on the network-layer fields of thedatagram; that is, they do not examine the fields of the transport-layer segment encapsulated with thedatagram."
3669,"On the receiving side, the network layer extracts the transport-layer segment from thedatagram and passes the segment up to the transport layer."
3670,"The transport layer then processes the
received segment, making the data in the segment available to the receiving application."
3671,More than one transport-layer protocol may be available to network applications.
3672,"For example, the
Internet has two protocols—TCP and UDP."
3673,Each of these protocols provides a different set of transport-layer services to the invoking application.
3674,"3.1.1 Relationship Between Transport and Network Layers
Recall that the transport layer lies just above the network layer in the protocol stack."
3675,"Whereas atransport-layer protocol provides logical communication betweenFigure 3.1 The transport layer provides logical rather than physical communication between
application processes
processes  running on different hosts, a network-layer protocol provides logical-communication between
hosts."
3676,This distinction is subtle but important.
3677,"Let’s examine this distinction with the aid of a household
analogy."
3678,"Consider two houses, one on the East Coast and the other on the West Coast, with each house being
home to a dozen kids."
3679,The kids in the East Coast household are cousins of the kids in the West Coasthousehold.
3680,"The kids in the two households love to write to each other—each kid writes each cousin
every week, with each letter delivered by the traditional postal service in a separate envelope."
3681,"Thus,
each household sends 144 letters to the other household every week."
3682,(These kids would save a lot ofmoney if they had e-mail!) In each of the households there is one kid—Ann in the West Coast houseand Bill in the East Coast house—responsible for mail collection and mail distribution.
3683,"Each week Annvisits all her brothers and sisters, collects the mail, and gives the mail to a postal-service mail carrier,
who makes daily visits to the house."
3684,"When letters arrive at the West Coast house, Ann also has the job
of distributing the mail to her brothers and sisters."
3685,Bill has a similar job on the East Coast.
3686,"In this example, the postal service provides logical communication between the two houses—the postal
service moves mail from house to house, not from person to person."
3687,"On the other hand, Ann and Billprovide logical communication among the cousins—Ann and Bill pick up mail from, and deliver mail to,
their brothers and sisters."
3688,"Note that from the cousins’ perspective, Ann and Bill are the mail service,
even though Ann and Bill are only a part (the end-system part) of the end-to-end delivery process."
3689,"This
household example serves as a nice analogy for explaining how the transport layer relates to the
network layer:
application messages  letters in envelopes
processes  cousins
hosts (also called end systems)  houses
transport-layer protocol  Ann and Bill
network-layer protocol  postal service (including mail carriers)
Continuing with this analogy, note that Ann and Bill do all their work within their respective homes; they
are not involved, for example, in sorting mail in any intermediate mail center or in moving mail from onemail center to another."
3690,"Similarly, transport-layer protocols live in the end systems."
3691,"Within an end system,a transport protocol moves messages from application processes to the network edge (that is, thenetwork layer) and vice versa, but it doesn’t have any say about how the messages are moved within
the network core."
3692,"In fact, as illustrated in Figure 3.1, intermediate routers neither act on, nor recognize,
any information that the transport layer may have added to the application messages."
3693,"Continuing with our family saga, suppose now that when Ann and Bill go on vacation, another cousin
pair—say, Susan and Harvey—substitute for them and provide the household-internal collection anddelivery of mail."
3694,"Unfortunately for the two families, Susan and Harvey do not do the collection anddelivery in exactly the same way as Ann and Bill."
3695,"Being younger kids, Susan and Harvey pick up and
drop off the mail less frequently and occasionally lose letters (which are sometimes chewed up by thefamily dog)."
3696,"Thus, the cousin-pair Susan and Harvey do not provide the same set of services (that is,the same service model) as Ann and Bill."
3697,"In an analogous manner, a computer network may make=
=
=
=
=available multiple transport protocols, with each protocol offering a different service model to
applications."
3698,"The possible services that Ann and Bill can provide are clearly constrained by the possible services that
the postal service provides."
3699,"For example, if the postal service doesn’t provide a maximum bound on howlong it can take to deliver mail between the two houses (for example, three days), then there is no way
that Ann and Bill can guarantee a maximum delay for mail delivery between any of the cousin pairs."
3700,"In a
similar manner, the services that a transport protocol can provide are often constrained by the servicemodel of the underlying network-layer protocol."
3701,"If the network-layer protocol cannot provide delay orbandwidth guarantees for transport-layer segments sent between hosts, then the transport-layerprotocol cannot provide delay or bandwidth guarantees for application messages sent betweenprocesses."
3702,"Nevertheless, certain services can be offered by a transport protocol even when the underlying network
protocol doesn’t offer the corresponding service at the network layer."
3703,"For example, as we’ll see in this
chapter, a transport protocol can offer reliable data transfer service to an application even when theunderlying network protocol is unreliable, that is, even when the network protocol loses, garbles, or
duplicates packets."
3704,"As another example (which we’ll explore in Chapter 8 when we discuss network
security), a transport protocol can use encryption to guarantee that application messages are not read
by intruders, even when the network layer cannot guarantee the confidentiality of transport-layersegments."
3705,"3.1.2 Overview of the Transport Layer in the Internet
Recall that the Internet makes two distinct transport-layer protocols available to the application layer.One of these protocols is UDP (User Datagram Protocol), which provides an unreliable, connectionlessservice to the invoking application."
3706,"The second of these protocols is TCP (Transmission Control
Protocol), which provides a reliable, connection-oriented service to the invoking application."
3707,"Whendesigning a network application, the application developer must specify one of these two transport
protocols."
3708,"As we saw in Section 2.7, the application developer selects between UDP and TCP when
creating sockets."
3709,"To simplify terminology, we refer to the transport-layer packet as a segment."
3710,"We mention, however, that
the Internet literature (for example, the RFCs) also refers to the transport-layer packet for TCP as a
segment but often refers to the packet for UDP as a datagram."
3711,"But this same Internet literature also
uses the term datagram  for the network-layer packet! For an introductory book on computer networking
such as this, we believe that it is less confusing to refer to both TCP and UDP packets as segments,and reserve the term datagram  for the network-layer packet.Before proceeding with our brief introduction of UDP and TCP, it will be useful to say a few words about
the Internet’s network layer."
3712,"(We’ll learn about the network layer in detail in Chapters 4 and 5.) The
Internet’s network-layer protocol has a name—IP, for Internet Protocol."
3713,"IP provides logical
communication between hosts."
3714,The IP service model is a best-effort delivery service .
3715,"This means that
IP makes its “best effort” to deliver segments between communicating hosts, but it makes no
guarantees."
3716," In particular, it does not guarantee segment delivery, it does not guarantee orderly delivery
of segments, and it does not guarantee the integrity of the data in the segments."
3717,"For these reasons, IPis said to be an unreliable service."
3718,"We also mention here that every host has at least one network-
layer address, a so-called IP address."
3719,"We’ll examine IP addressing in detail in Chapter 4; for this
chapter we need only keep in mind that each host has an IP address ."
3720,"Having taken a glimpse at the IP service model, let’s now summarize the service models provided by
UDP and TCP."
3721,The most fundamental responsibility of UDP and TCP is to extend IP’s delivery servicebetween two end systems to a delivery service between two processes running on the end systems.
3722,"Extending host-to-host delivery to process-to-process delivery is called transport-layer multiplexing
and demultiplexing ."
3723,We’ll discuss transport-layer multiplexing and demultiplexing in the next section.
3724,"UDP and TCP also provide integrity checking by including error-detection fields in their segments’
headers."
3725,"These two minimal transport-layer services—process-to-process data delivery and errorchecking—are the only two services that UDP provides! In particular, like IP, UDP is an unreliableservice—it does not guarantee that data sent by one process will arrive intact (or at all!) to the
destination process."
3726,"UDP is discussed in detail in Section 3.3.
TCP, on the other hand, offers several additional services to applications."
3727,"First and foremost, it provides
reliable data transfer."
3728,"Using flow control, sequence numbers, acknowledgments, and timers(techniques we’ll explore in detail in this chapter), TCP ensures that data is delivered from sendingprocess to receiving process, correctly and in order."
3729,TCP thus converts IP’s unreliable service betweenend systems into a reliable data transport service between processes.
3730,"TCP also provides congestion
control."
3731,"Congestion control is not so much a service provided to the invoking application as it is aservice for the Internet as a whole, a service for the general good."
3732,"Loosely speaking, TCP congestioncontrol prevents any one TCP connection from swamping the links and routers between communicatinghosts with an excessive amount of traffic."
3733,"TCP strives to give each connection traversing a congested
link an equal share of the link bandwidth."
3734,"This is done by regulating the rate at which the sending sides
of TCP connections can send traffic into the network."
3735,"UDP traffic, on the other hand, is unregulated."
3736,"Anapplication using UDP transport can send at any rate it pleases, for as long as it pleases."
3737,A protocol that provides reliable data transfer and congestion control is necessarily complex.
3738,"We’ll need
several sections to cover the principles of reliable data transfer and congestion control, and additional
sections to cover the TCP protocol itself."
3739,"These topics are investigated in Sections 3.4 through 3.8. The
approach taken in this chapter is to alternate between basic principles and the TCP protocol."
3740,"For
example, we’ll first discuss reliable data transfer in a general setting and then discuss how TCPspecifically provides reliable data transfer."
3741,"Similarly, we’ll first discuss congestion control in a general
setting and then discuss how TCP performs congestion control."
3742,"But before getting into all this good stuff,
let’s first look at transport-layer multiplexing and demultiplexing.3.2 Multiplexing and Demultiplexing
In this section, we discuss transport-layer multiplexing and demultiplexing, that is, extending the host-to-
host delivery service provided by the network layer to a process-to-process delivery service forapplications running on the hosts."
3743,"In order to keep the discussion concrete, we’ll discuss this basictransport-layer service in the context of the Internet."
3744,"We emphasize, however, that amultiplexing/demultiplexing service is needed for all computer networks."
3745,"At the destination host, the transport layer receives segments from the network layer just below."
3746,"The
transport layer has the responsibility of delivering the data in these segments to the appropriateapplication process running in the host."
3747,Let’s take a look at an example.
3748,"Suppose you are sitting in frontof your computer, and you are downloading Web pages while running one FTP session and two Telnetsessions."
3749,"You therefore have four network application processes running—two Telnet processes, oneFTP process, and one HTTP process."
3750,"When the transport layer in your computer receives data from thenetwork layer below, it needs to direct the received data to one of these four processes."
3751,"Let’s now
examine how this is done."
3752,"First recall from Section 2.7 that a process (as part of a network application) can have one or more
sockets , doors through which data passes from the network to the process and through which data
passes from the process to the network."
3753,"Thus, as shown in Figure 3.2, the transport layer in the
receiving host does not actually deliver data directly to a process, but instead to an intermediary socket."
3754,"Because at any given time there can be more than one socket in the receiving host, each socket has aunique identifier."
3755,"The format of the identifier depends on whether the socket is a UDP or a TCP socket,as we’ll discuss shortly."
3756,"Now let’s consider how a receiving host directs an incoming transport-layer segment to the appropriate
socket."
3757,Each transport-layer segment has a set of fields in the segment for this purpose.
3758,"At the receivingend, the transport layer examines these fields to identify the receiving socket and then directs thesegment to that socket."
3759,This job of delivering the data in a transport-layer segment to the correct socketis called demultiplexing .
3760,"The job of gathering data chunks at the source host from different sockets,
encapsulating each data chunk with header information (that will later be used in demultiplexing) tocreate segments, and passing the segments to the network layer is called multiplexing ."
3761,"Note that the
transport layer in the middle hostFigure 3.2 Transport-layer multiplexing and demultiplexing
in Figure 3.2 must demultiplex segments arriving from the network layer below to either process P  or P
above; this is done by directing the arriving segment’s data to the corresponding process’s socket."
3762,"The
transport layer in the middle host must also gather outgoing data from these sockets, form transport-layer segments, and pass these segments down to the network layer."
3763,"Although we have introducedmultiplexing and demultiplexing in the context of the Internet transport protocols, it’s important to realizethat they are concerns whenever a single protocol at one layer (at the transport layer or elsewhere) isused by multiple protocols at the next higher layer."
3764,"To illustrate the demultiplexing job, recall the household analogy in the previous section."
3765,"Each of the
kids is identified by his or her name."
3766,"When Bill receives a batch of mail from the mail carrier, heperforms a demultiplexing operation by observing to whom the letters are addressed and then handdelivering the mail to his brothers and sisters."
3767,Ann performs a multiplexing operation when she collectsletters from her brothers and sisters and gives the collected mail to the mail person.
3768,"Now that we understand the roles of transport-layer multiplexing and demultiplexing, let us examine how
it is actually done in a host."
3769,"From the discussion above, we know that transport-layer multiplexing
requires (1) that sockets have unique identifiers, and (2) that each segment have special fields that
indicate the socket to which the segment is to be delivered."
3770,"These special fields, illustrated in Figure
3.3, are the source port number field  and the destination port number field ."
3771,"(The UDP and TCP
segments have other fields as well, as discussed in the subsequent sections of this chapter.) Each port
number is a 16-bit number, ranging from 0 to 65535."
3772,"The port numbers ranging from 0 to 1023 arecalled well-known port numbers  and are restricted, which means that they are reserved for use by
well-known1 2Figure 3.3 Source and destination port-number fields in a transport-layer segment
application protocols such as HTTP (which uses port number 80) and FTP (which uses port number 21)."
3773,"The list of well-known port numbers is given in RFC 1700 and is updated at http:/ /www.iana.org  [RFC
3232] ."
3774,"When we develop a new application (such as the simple application developed in Section 2.7),
we must assign the application a port number."
3775,"It should now be clear how the transport layer could  implement the demultiplexing service: Each socket
in the host could be assigned a port number, and when a segment arrives at the host, the transport layer
examines the destination port number in the segment and directs the segment to the correspondingsocket."
3776,The segment’s data then passes through the socket into the attached process.
3777,"As we’ll see, thisis basically how UDP does it."
3778,"However, we’ll also see that multiplexing/demultiplexing in TCP is yet
more subtle."
3779,"Connectionless Multiplexing and DemultiplexingRecall from Section 2.7.1 that the Python program running in a host can create a UDP socket with the
line
clientSocket = socket(AF_INET, SOCK_DGRAM)
When a UDP socket is created in this manner, the transport layer automatically assigns a port number
to the socket."
3780,"In particular, the transport layer assigns a port number in the range 1024 to 65535 that is
currently not being used by any other UDP port in the host."
3781,"Alternatively, we can add a line into our
Python program after we create the socket to associate a specific port number (say, 19157) to this UDP
socket via the socket bind()  method:
clientSocket.bind((’’, 19157))If the application developer writing the code were implementing the server side of a “well-known
protocol,” then the developer would have to assign the corresponding well-known port number.Typically, the client side of the application lets the transport layer automatically (and transparently)assign the port number, whereas the server side of the application assigns a specific port number."
3782,"With port numbers assigned to UDP sockets, we can now precisely describe UDP
multiplexing/demultiplexing."
3783,"Suppose a process in Host A, with UDP port 19157, wants to send a chunkof application data to a process with UDP port 46428 in Host B."
3784,"The transport layer in Host A creates atransport-layer segment that includes the application data, the source port number (19157), thedestination port number (46428), and two other values (which will be discussed later, but areunimportant for the current discussion)."
3785,The transport layer then passes the resulting segment to thenetwork layer.
3786,The network layer encapsulates the segment in an IP datagram and makes a best-effortattempt to deliver the segment to the receiving host.
3787,"If the segment arrives at the receiving Host B, the
transport layer at the receiving host examines the destination port number in the segment (46428) and
delivers the segment to its socket identified by port 46428."
3788,"Note that Host B could be running multipleprocesses, each with its own UDP socket and associated port number."
3789,"As UDP segments arrive fromthe network, Host B directs (demultiplexes) each segment to the appropriate socket by examining thesegment’s destination port number."
3790,"It is important to note that a UDP socket is fully identified by a two-tuple consisting of a destination IP
address and a destination port number."
3791,"As a consequence, if two UDP segments have different source
IP addresses and/or source port numbers, but have the same destination  IP address and destination
port number, then the two segments will be directed to the same destination process via the same
destination socket."
3792,"You may be wondering now, what is the purpose of the source port number?"
3793,"As shown in Figure 3.4, in
the A-to-B segment the source port number serves as part of a “return address”—when B wants to send
a segment back to A, the destination port in the B-to-A segment will take its value from the source portvalue of the A-to-B segment."
3794,"(The complete return address is A’s IP address and the source port
number.) As an example, recall the UDP server program studied in Section 2.7. In UDPServer.py ,
the server uses the recvfrom()  method to extract the client-side (source) port number from the
segment it receives from the client; it then sends a new segment to the client, with the extracted source
port number serving as the destination port number in this new segment."
3795,"Connection-Oriented Multiplexing and Demultiplexing
In order to understand TCP demultiplexing, we have to take a close look at TCP sockets and TCP
connection establishment."
3796,"One subtle difference between a TCP socket and a UDP socket is that a TCPsocket is identified by a four-tuple: (source IP address, source port number, destination IP address,
destination port number)."
3797,"Thus, when a TCP segment arrives from the network to a host, the host uses
all four values to direct (demultiplex) the segment to the appropriate socket."
3798,"Figure 3.4 The inversion of source and destination port numbers
In particular, and in contrast with UDP, two arriving TCP segments with different source IP addresses or
source port numbers will (with the exception of a TCP segment carrying the original connection-
establishment request) be directed to two different sockets."
3799,"To gain further insight, let’s reconsider the
TCP client-server programming example in Section 2.7.2:
The TCP server application has a “welcoming socket,” that waits for connection-establishment
requests from TCP clients (see Figure 2.29) on port number 12000."
3800,"The TCP client creates a socket and sends a connection establishment request segment with the
lines:
clientSocket = socket(AF_INET, SOCK_STREAM)
               clientSocket.connect((serverName,12000))
A connection-establishment request is nothing more than a TCP segment with destination port
number 12000 and a special connection-establishment bit set in the TCP header (discussed in
Section 3.5)."
3801,The segment also includes a source port number that was chosen by the client.
3802,"When the host operating system of the computer running the server process receives the incomingconnection-request segment with destination port 12000, it locates the server process that is waiting
to accept a connection on port number 12000."
3803,"The server process then creates a new socket:
connectionSocket, addr = serverSocket.accept()
Also, the transport layer at the server notes the following four values in the connection-request
segment: (1) the source port number in the segment, (2) the IP address of the source host, (3) the
destination port number in the segment, and (4) its own IP address."
3804,"The newly created connectionsocket is identified by these four values; all subsequently arriving segments whose source port,
source IP address, destination port, and destination IP address match these four values will be
demultiplexed to this socket."
3805,"With the TCP connection now in place, the client and server can nowsend data to each other."
3806,"The server host may support many simultaneous TCP connection sockets, with each socket attached toa process, and with each socket identified by its own four-tuple."
3807,"When a TCP segment arrives at thehost, all four fields (source IP address, source port, destination IP address, destination port) are used todirect (demultiplex) the segment to the appropriate socket."
3808,"FOCUS ON SECURITY
Port Scanning
We’ve seen that a server process waits patiently on an open port for contact by a remote client."
3809,"Some ports are reserved for well-known applications (e.g., Web, FTP, DNS, and SMTP servers);other ports are used by convention by popular applications (e.g., the Microsoft 2000 SQL serverlistens for requests on UDP port 1434)."
3810,"Thus, if we determine that a port is open on a host, wemay be able to map that port to a specific application running on the host."
3811,"This is very useful forsystem administrators, who are often interested in knowing which network applications arerunning on the hosts in their networks."
3812,"But attackers, in order to “case the joint,” also want to
know which ports are open on target hosts."
3813,"If a host is found to be running an application with a
known security flaw (e.g., a SQL server listening on port 1434 was subject to a buffer overflow,allowing a remote user to execute arbitrary code on the vulnerable host, a flaw exploited by the
Slammer worm [CERT 2003–04] ), then that host is ripe for attack."
3814,Determining which applications are listening on which ports is a relatively easy task.
3815,"Indeed
there are a number of public domain programs, called port scanners, that do just that."
3816,"Perhaps
the most widely used of these is nmap, freely available at http:/ /nmap.org and included in most
Linux distributions."
3817,"For TCP, nmap sequentially scans ports, looking for ports that are accepting
TCP connections."
3818,"For UDP, nmap again sequentially scans ports, looking for UDP ports that
respond to transmitted UDP segments."
3819,"In both cases, nmap returns a list of open, closed, or
unreachable ports."
3820,A host running nmap can attempt to scan any target host anywhere  in theInternet.
3821,"We’ll revisit nmap in Section 3.5.6, when we discuss TCP connection management."
3822,"Figure 3.5 Two clients, using the same destination port number (80) to communicate with the
same Web server application
The situation is illustrated in Figure 3.5, in which Host C initiates two HTTP sessions to server B, and
Host A initiates one HTTP session to B."
3823,"Hosts A and C and server B each have their own unique IP
address—A, C, and B, respectively."
3824,Host C assigns two different source port numbers (26145 and 7532)to its two HTTP connections.
3825,"Because Host A is choosing source port numbers independently of C, itmight also assign a source port of 26145 to its HTTP connection."
3826,"But this is not a problem—server B willstill be able to correctly demultiplex the two connections having the same source port number, since thetwo connections have different source IP addresses."
3827,"Web Servers and TCP
Before closing this discussion, it’s instructive to say a few additional words about Web servers and how
they use port numbers."
3828,"Consider a host running a Web server, such as an Apache Web server, on port
80."
3829,"When clients (for example, browsers) send segments to the server, all segments will have
destination port 80."
3830,"In particular, both the initial connection-establishment segments and the segments
carrying HTTP request messages will have destination port 80."
3831,"As we have just described, the serverdistinguishes the segments from the different clients using source IP addresses and source portnumbers."
3832,Figure 3.5 shows a Web server that spawns a new process for each connection.
3833,"As shown in Figure
3.5, each of these processes has its own connection socket through which HTTP requests arrive and
HTTP responses are sent."
3834,"We mention, however, that there is not always a one-to-one correspondence
between connection sockets and processes."
3835,"In fact, today’s high-performing Web servers often use only
one process, and create a new thread with a new connection socket for each new client connection."
3836,"(A
thread can be viewed as a lightweight subprocess.) If you did the first programming assignment in
Chapter 2, you built a Web server that does just this."
3837,"For such a server, at any given time there may be
many connection sockets (with different identifiers) attached to the same process."
3838,"If the client and server are using persistent HTTP, then throughout the duration of the persistent
connection the client and server exchange HTTP messages via the same server socket."
3839,"However, if theclient and server use non-persistent HTTP, then a new TCP connection is created and closed for everyrequest/response, and hence a new socket is created and later closed for every request/response."
3840,"This
frequent creating and closing of sockets can severely impact the performance of a busy Web server
(although a number of operating system tricks can be used to mitigate the problem)."
3841,"Readers interestedin the operating system issues surrounding persistent and non-persistent HTTP are encouraged to see
[Nielsen 1997 ; Nahum 2002] ."
3842,"Now that we’ve discussed transport-layer multiplexing and demultiplexing, let’s move on and discuss
one of the Internet’s transport protocols, UDP."
3843,"In the next section we’ll see that UDP adds little more tothe network-layer protocol than a multiplexing/demultiplexing service.3.3 Connectionless Transport: UDP
In this section, we’ll take a close look at UDP, how it works, and what it does."
3844,"We encourage you to refer
back to Section 2.1, which includes an overview of the UDP service model, and to Section 2.7.1, which
discusses socket programming using UDP."
3845,"To motivate our discussion about UDP, suppose you were interested in designing a no-frills, bare-bones
transport protocol."
3846,How might you go about doing this?
3847,"You might first consider using a vacuous
transport protocol."
3848,"In particular, on the sending side, you might consider taking the messages from theapplication process and passing them directly to the network layer; and on the receiving side, you mightconsider taking the messages arriving from the network layer and passing them directly to theapplication process."
3849,"But as we learned in the previous section, we have to do a little more than nothing!
At the very least, the transport layer has to provide a multiplexing/demultiplexing service in order to passdata between the network layer and the correct application-level process."
3850,"UDP, defined in [RFC 768], does just about as little as a transport protocol can do."
3851,"Aside from the
multiplexing/demultiplexing function and some light error checking, it adds nothing to IP."
3852,"In fact, if the
application developer chooses UDP instead of TCP, then the application is almost directly talking withIP."
3853,"UDP takes messages from the application process, attaches source and destination port numberfields for the multiplexing/demultiplexing service, adds two other small fields, and passes the resultingsegment to the network layer."
3854,The network layer encapsulates the transport-layer segment into an IPdatagram and then makes a best-effort attempt to deliver the segment to the receiving host.
3855,"If thesegment arrives at the receiving host, UDP uses the destination port number to deliver the segment’sdata to the correct application process."
3856,"Note that with UDP there is no handshaking between sending
and receiving transport-layer entities before sending a segment."
3857,"For this reason, UDP is said to be
connectionless."
3858,DNS is an example of an application-layer protocol that typically uses UDP.
3859,"When the DNS application
in a host wants to make a query, it constructs a DNS query message and passes the message to UDP.Without performing any handshaking with the UDP entity running on the destination end system, thehost-side UDP adds header fields to the message and passes the resulting segment to the networklayer."
3860,"The network layer encapsulates the UDP segment into a datagram and sends the datagram to a
name server."
3861,The DNS application at the querying host then waits for a reply to its query.
3862,"If it doesn’t
receive a reply (possibly because the underlying network lost the query or the reply), it might tryresending the query, try sending the query to another name server, or inform the invoking applicationthat it can’t get a reply.Now you might be wondering why an application developer would ever choose to build an application
over UDP rather than over TCP."
3863,"Isn’t TCP always preferable, since TCP provides a reliable datatransfer service, while UDP does not?"
3864,"The answer is no, as some applications are better suited for UDPfor the following reasons:
Finer application-level control over what data is sent, and when."
3865," Under UDP, as soon as an
application process passes data to UDP, UDP will package the data inside a UDP segment andimmediately pass the segment to the network layer."
3866,"TCP, on the other hand, has a congestion-control mechanism that throttles the transport-layer TCP sender when one or more links between the
source and destination hosts become excessively congested."
3867,"TCP will also continue to resend a
segment until the receipt of the segment has been acknowledged by the destination, regardless ofhow long reliable delivery takes."
3868,"Since real-time applications often require a minimum sending rate,do not want to overly delay segment transmission, and can tolerate some data loss, TCP’s servicemodel is not particularly well matched to these applications’ needs."
3869,"As discussed below, theseapplications can use UDP and implement, as part of the application, any additional functionality thatis needed beyond UDP’s no-frills segment-delivery service."
3870,No connection establishment.
3871," As we’ll discuss later, TCP uses a three-way handshake before it
starts to transfer data."
3872,UDP just blasts away without any formal preliminaries.
3873,Thus UDP does notintroduce any delay to establish a connection.
3874,This is probably the principal reason why DNS runsover UDP rather than TCP—DNS would be much slower if it ran over TCP.
3875,"HTTP uses TCP rather
than UDP, since reliability is critical for Web pages with text."
3876,"But, as we briefly discussed in Section
2.2, the TCP connection-establishment delay in HTTP is an important contributor to the delays
associated with downloading Web documents."
3877,"Indeed, the QUIC protocol (Quick UDP Internet
Connection, [Iyengar 2015] ), used in Google’s Chrome browser, uses UDP as its underlying
transport protocol and implements reliability in an application-layer protocol on top of UDP."
3878,No connection state.
3879, TCP maintains connection state in the end systems.
3880,"This connection state
includes receive and send buffers, congestion-control parameters, and sequence andacknowledgment number parameters."
3881,"We will see in Section 3.5 that this state information is
needed to implement TCP’s reliable data transfer service and to provide congestion control."
3882,"UDP, on
the other hand, does not maintain connection state and does not track any of these parameters."
3883,"For
this reason, a server devoted to a particular application can typically support many more activeclients when the application runs over UDP rather than TCP."
3884,Small packet header overhead.
3885,"The TCP segment has 20 bytes of header overhead in every
segment, whereas UDP has only 8 bytes of overhead."
3886,Figure 3.6 lists popular Internet applications and the transport protocols that they use.
3887,"As we expect, e-
mail, remote terminal access, the Web, and file transfer run over TCP—all these applications need the
reliable data transfer service of TCP."
3888,"Nevertheless, many important applications run over UDP rather
than TCP."
3889,"For example, UDP is used to carry network management (SNMP; see Section 5.7) data."
3890,"UDP is preferred to TCP in this case, since network management applications must often run when thenetwork is in a stressed state—precisely when reliable, congestion-controlled data transfer is difficult to
achieve."
3891,"Also, as we mentioned earlier, DNS runs over UDP, thereby avoiding TCP’s connection-
establishment delays."
3892,"As shown in Figure 3.6, both UDP and TCP are somtimes used today with multimedia applications,
such as Internet phone, real-time video conferencing, and streaming of stored audio and video."
3893,"We’ll
take a close look at these applications in Chapter 9."
3894,"We just mention now that all of these applications
can tolerate a small amount of packet loss, so that reliable data transfer is not absolutely critical for the
application’s success."
3895,"Furthermore, real-time applications, like Internet phone and video conferencing,react very poorly to TCP’s congestion control."
3896,"For these reasons, developers of multimedia applicationsmay choose to run their applications over UDP instead of TCP."
3897,"When packet loss rates are low, and
with some organizations blocking UDP traffic for security reasons (see Chapter 8), TCP becomes an
increasingly attractive protocol for streaming media transport."
3898,"Figure 3.6 Popular Internet applications and their underlying transport protocols
Although commonly done today, running multimedia applications over UDP is controversial."
3899,"As we
mentioned above, UDP has no congestion control."
3900,"But congestion control is needed to prevent the
network from entering a congested state in which very little useful work is done."
3901,"If everyone were to startstreaming high-bit-rate video without using any congestion control, there would be so much packetoverflow at routers that very few UDP packets would successfully traverse the source-to-destinationpath."
3902,"Moreover, the high loss rates induced by the uncontrolled UDP senders would cause the TCP
senders (which, as we’ll see, do decrease their sending rates in the face of congestion) to dramatically
decrease their rates."
3903,"Thus, the lack of congestion control in UDP can result in high loss rates between aUDP sender and receiver, and the crowding out of TCP sessions—a potentially serious problem [Floyd1999] ."
3904,"Many researchers have proposed new mechanisms to force all sources, including UDP sources,
to perform adaptive congestion control [Mahdavi 1997; Floyd 2000; Kohler 2006: RFC 4340] ."
3905,"Before discussing the UDP segment structure, we mention that it is possible for an application to have
reliable data transfer when using UDP."
3906,"This can be done if reliability is built into the application itself (for
example, by adding acknowledgment and retransmission mechanisms, such as those we’ll study in the
next section)."
3907,"We mentioned earlier that the QUIC protocol [Iyengar 2015]  used in Google’s Chrome
browser implements reliability in an application-layer protocol on top of UDP."
3908,"But this is a nontrivial task
that would keep an application developer busy debugging for a long time."
3909,"Nevertheless, buildingreliability directly into the application allows the application to “have its cake and eat it too."
3910,"That is,
application processes can communicate reliably without being subjected to the transmission-rateconstraints imposed by TCP’s congestion-control mechanism."
3911,"3.3.1 UDP Segment Structure
The UDP segment structure, shown in Figure 3.7, is defined in RFC 768."
3912,"The application data occupies
the data field of the UDP segment."
3913,"For example, for DNS, the data field contains either a querymessage or a response message."
3914,"For a streaming audio application, audio samples fill the data field.The UDP header has only four fields, each consisting of two bytes."
3915,"As discussed in the previous section,
the port numbers allow the destination host to pass the application data to the correct process running
on the destination end system (that is, to perform the demultiplexing function)."
3916,The length field specifiesthe number of bytes in the UDP segment (header plus data).
3917,An explicit length value is needed since thesize of the data field may differ from one UDP segment to the next.
3918,The checksum is used by thereceiving host to check whether errors have been introduced into the segment.
3919,"In truth, the checksum isalso calculated over a few of the fields in the IP header in addition to the UDP segment."
3920,But we ignorethis detail in order to see the forest through the trees.
3921,We’ll discuss the checksum calculation below.
3922,"Basic principles of error detection are described in Section 6.2. The length field specifies the length of
the UDP segment, including the header, in bytes."
3923,"3.3.2 UDP Checksum
The UDP checksum provides for error detection."
3924,"That is, the checksum is used to determine whether
bits within the UDP segment have been altered (for example, by noise in the links or while stored in arouter) as it moved from source to destination.Figure 3.7 UDP segment structure
UDP at the sender side performs the 1s complement of the sum of all the 16-bit words in the segment,
with any overflow encountered during the sum being wrapped around."
3925,"This result is put in the checksum
field of the UDP segment."
3926,Here we give a simple example of the checksum calculation.
3927,"You can finddetails about efficient implementation of the calculation in RFC 1071 and performance over real data in
[Stone 1998; Stone 2000]."
3928,"As an example, suppose that we have the following three 16-bit words:
0110011001100000
01010101010101011000111100001100
The sum of first two of these 16-bit words is
0110011001100000
0101010101010101
1011101110110101
Adding the third word to the above sum gives1011101110110101
1000111100001100
0100101011000010
Note that this last addition had overflow, which was wrapped around."
3929,"The 1s complement is obtained by
converting all the 0s to 1s and converting all the 1s to 0s."
3930,"Thus the 1s complement of the sum0100101011000010 is 1011010100111101, which becomes the checksum."
3931,"At the receiver, all four 16-bit words are added, including the checksum."
3932,"If no errors are introduced into the packet, then clearly the
sum at the receiver will be 1111111111111111."
3933,"If one of the bits is a 0, then we know that errors have
been introduced into the packet."
3934,"You may wonder why UDP provides a checksum in the first place, as many link-layer protocols
(including the popular Ethernet protocol) also provide error checking."
3935,"The reason is that there is no
guarantee that all the links between source and destination provide error checking; that is, one of the
links may use a link-layer protocol that does not provide error checking."
3936,"Furthermore, even if segmentsare correctly transferred across a link, it’s possible that bit errors could be introduced when a segment isstored in a router’s memory."
3937,"Given that neither link-by-link reliability nor in-memory error detection is
guaranteed, UDP must provide error detection at the transport layer, on an end-end basis , if the end-
end data transfer service is to provide error detection."
3938,"This is an example of the celebrated end-end
principle  in system design [Saltzer 1984] , which states that since certain functionality (error detection,
in this case) must be implemented on an end-end basis: “functions placed at the lower levels may be
redundant or of little value when compared to the cost of providing them at the higher level.”
Because IP is supposed to run over just about any layer-2 protocol, it is useful for the transport layer to
provide error checking as a safety measure."
3939,"Although UDP provides error checking, it does not doanything to recover from an error."
3940,Some implementations of UDP simply discard the damaged segment;others pass the damaged segment to the application with a warning.
3941,That wraps up our discussion of UDP.
3942,"We will soon see that TCP offers reliable data transfer to its
applications as well as other services that UDP doesn’t offer."
3943,"Naturally, TCP is also more complex than
UDP."
3944,"Before discussing TCP, however, it will be useful to step back and first discuss the underlying
principles of reliable data transfer.3.4 Principles of Reliable Data Transfer
In this section, we consider the problem of reliable data transfer in a general context."
3945,"This is appropriate
since the problem of implementing reliable data transfer occurs not only at the transport layer, but alsoat the link layer and the application layer as well."
3946,The general problem is thus of central importance tonetworking.
3947,"Indeed, if one had to identify a “top-ten” list of fundamentally important problems in all ofnetworking, this would be a candidate to lead the list."
3948,"In the next section we’ll examine TCP and show,
in particular, that TCP exploits many of the principles that we are about to describe."
3949,Figure 3.8 illustrates the framework for our study of reliable data transfer.
3950,"The service abstraction
provided to the upper-layer entities is that of a reliable channel through which data can be transferred."
3951,"With a reliable channel, no transferred data bits are corrupted (flipped from 0 to 1, or vice versa) or lost,and all are delivered in the order in which they were sent."
3952,This is precisely the service model offered byTCP to the Internet applications that invoke it.
3953,It is the responsibility of a reliable data transfer protocol to implement this service abstraction.
3954,"This
task is made difficult by the fact that the layer below  the reliable data transfer protocol may be
unreliable."
3955,"For example, TCP is a reliable data transfer protocol that is implemented on top of an
unreliable (IP) end-to-end network layer."
3956,"More generally, the layer beneath the two reliablycommunicating end points might consist of a single physical link (as in the case of a link-level datatransfer protocol) or a global internetwork (as in the case of a transport-level protocol)."
3957,"For ourpurposes, however, we can view this lower layer simply as an unreliable point-to-point channel."
3958,"In this section, we will incrementally develop the sender and receiver sides of a reliable data transfer
protocol, considering increasingly complex models of the underlying channel."
3959,"For example, we’ll
consider what protocol mechanisms areFigure 3.8 Reliable data transfer: Service model and service implementation
needed when the underlying channel can corrupt bits or lose entire packets."
3960,"One assumption we’ll adopt
throughout our discussion here is that packets will be delivered in the order in which they were sent, with
some packets possibly being lost; that is, the underlying channel will not reorder packets."
3961,"Figure 3.8(b)
illustrates the interfaces for our data transfer protocol."
3962,The sending side of the data transfer protocol willbe invoked from above by a call to rdt_send() .
3963,"It will pass the data to be delivered to the upper layer
at the receiving side."
3964,"(Here rdt stands for reliable data transfer  protocol and _send  indicates that the
sending side of rdt is being called."
3965,"The first step in developing any protocol is to choose a good
name!) On the receiving side, rdt_rcv()  will be called when a packet arrives from the receiving side
of the channel."
3966,"When the rdt protocol wants to deliver data to the upper layer, it will do so by calling
deliver_data() ."
3967,"In the following we use the terminology “packet” rather than transport-layer
“segment.” Because the theory developed in this section applies to computer networks in general and
not just to the Internet transport layer, the generic term “packet” is perhaps more appropriate here."
3968,"In this section we consider only the case of unidirectional data transfer, that is, data transfer from the
sending to the receiving side."
3969,"The case of reliable bidirectional  (that is, full-duplex) data transfer  is
conceptually no more difficult but considerably more tedious to explain."
3970,"Although we consider only
unidirectional data transfer, it is important to note that the sending and receiving sides of our protocol
will nonetheless need to transmit packets in both directions, as indicated in Figure 3.8. We will see
shortly that, in addition to exchanging packets containing the data to be transferred, the sending andreceiving sides of rdt will also need to exchange control packets back and forth."
3971,"Both the send and
receive sides of rdt send packets to the other side by a call to udt_send()  (where udt stands for
unreliable data transfer )."
3972,"3.4.1 Building a Reliable Data Transfer Protocol
We now step through a series of protocols, each one becoming more complex, arriving at a flawless,
reliable data transfer protocol."
3973,"Reliable Data Transfer over a Perfectly Reliable Channel: rdt1.0
We first consider the simplest case, in which the underlying channel is completely reliable."
3974,"The protocol
itself, which we’ll call rdt1.0 , is trivial."
3975,"The finite-state machine (FSM)  definitions for the rdt1.0
sender and receiver are shown in Figure 3.9. The FSM in Figure 3.9(a) defines the operation of the
sender, while the FSM in Figure 3.9(b) defines the operation of the receiver."
3976,"It is important to note that
there are separate  FSMs for the sender and for the receiver."
3977,"The sender and receiver FSMs in Figure
3.9 each have just one state."
3978,"The arrows in the FSM description indicate the transition of the protocol
from one state to another."
3979,"(Since each FSM in Figure 3.9 has just one state, a transition is necessarily
from the one state back to itself; we’ll see more complicated state diagrams shortly.) The event causingthe transition is shown above the horizontal line labeling the transition, and the actions taken when the
event occurs are shown below the horizontal line."
3980,"When no action is taken on an event, or no event
occurs and an action is taken, we’ll use the symbol Λ below or above the horizontal, respectively, to
explicitly denote the lack of an action or event."
3981,"The initial state of the FSM is indicated by the dashed
arrow."
3982,"Although the FSMs in Figure 3.9 have but one state, the FSMs we will see shortly have multiple
states, so it will be important to identify the initial state of each FSM."
3983,"The sending side of rdt simply accepts data from the upper layer via the rdt_send(data)  event,
creates a packet containing the data (via the action make_pkt(data) ) and sends the packet into the
channel."
3984,"In practice, the rdt_send(data)  event would result from a procedure call (for example, to
rdt_send() ) by the upper-layer application."
3985,"Figure 3.9 rdt1.0  – A protocol for a completely reliable channel
On the receiving side, rdt receives a packet from the underlying channel via the rdt_rcv(packet)
event, removes the data from the packet (via the action extract (packet, data) ) and passes the
data up to the upper layer (via the action deliver_data(data) )."
3986,"In practice, the
rdt_rcv(packet)  event would result from a procedure call (for example, to rdt_rcv() ) from the
lower-layer protocol."
3987,"In this simple protocol, there is no difference between a unit of data and a packet."
3988,"Also, all packet flow is
from the sender to receiver; with a perfectly reliable channel there is no need for the receiver side to
provide any feedback to the sender since nothing can go wrong! Note that we have also assumed thatthe receiver is able to receive data as fast as the sender happens to send data."
3989,"Thus, there is no need
for the receiver to ask the sender to slow down!
Reliable Data Transfer over a Channel with Bit Errors: rdt2.0
A more realistic model of the underlying channel is one in which bits in a packet may be corrupted."
3990,"Such
bit errors typically occur in the physical components of a network as a packet is transmitted, propagates,
or is buffered."
3991,We’ll continue to assume for the moment that all transmitted packets are received(although their bits may be corrupted) in the order in which they were sent.
3992,"Before developing a protocol for reliably communicating over such a channel, first consider how people
might deal with such a situation."
3993,"Consider how you yourself might dictate a long message over the
phone."
3994,"In a typical scenario, the message taker might say “OK” after each sentence has been heard,understood, and recorded."
3995,"If the message taker hears a garbled sentence, you’re asked to repeat thegarbled sentence."
3996,"This message-dictation protocol uses both positive acknowledgments (“OK”) and
negative acknowledgments (“Please repeat that.”)."
3997,"These control messages allow the receiver to letthe sender know what has been received correctly, and what has been received in error and thusrequires repeating."
3998,"In a computer network setting, reliable data transfer protocols based on suchretransmission are known as ARQ (Automatic Repeat reQuest) protocols."
3999,"Fundamentally, three additional protocol capabilities are required in ARQ protocols to handle thepresence of bit errors:
Error detection."
4000,"First, a mechanism is needed to allow the receiver to detect when bit errors have
occurred."
4001,"Recall from the previous section that UDP uses the Internet checksum field for exactly this
purpose."
4002,"In Chapter 6 we’ll examine error-detection and -correction techniques in greater detail;
these techniques allow the receiver to detect and possibly correct packet bit errors."
4003,"For now, we
need only know that these techniques require that extra bits (beyond the bits of original data to be
transferred) be sent from the sender to the receiver; these bits will be gathered into the packet
checksum field of the rdt2.0  data packet."
4004,Receiver feedback.
4005," Since the sender and receiver are typically executing on different end systems,
possibly separated by thousands of miles, the only way for the sender to learn of the receiver’s view
of the world (in this case, whether or not a packet was received correctly) is for the receiver toprovide explicit feedback to the sender."
4006,"The positive (ACK) and negative (NAK) acknowledgment
replies in the message-dictation scenario are examples of such feedback."
4007,"Our rdt2.0  protocol will
similarly send ACK and NAK packets back from the receiver to the sender."
4008,"In principle, these
packets need only be one bit long; for example, a 0 value could indicate a NAK and a value of 1could indicate an ACK."
4009,Retransmission.
4010,"A packet that is received in error at the receiver will be retransmitted by the
sender.Figure 3.10 shows the FSM representation of rdt2.0 , a data transfer protocol employing error
detection, positive acknowledgments, and negative acknowledgments."
4011,The send side of rdt2.0  has two states.
4012,"In the leftmost state, the send-side protocol is waiting for data
to be passed down from the upper layer."
4013,"When the rdt_send(data)  event occurs, the sender will
create a packet ( sndpkt ) containing the data to be sent, along with a packet checksum (for example,
as discussed in Section 3.3.2 for the case of a UDP segment), and then send the packet via the
udt_send(sndpkt)  operation."
4014,"In the rightmost state, the sender protocol is waiting for an ACK or a
NAK packet from the receiver."
4015,"If an ACK packet is received
Figure 3.10 rdt2.0  – A protocol for a channel with bit errors
(the notation rdt_rcv(rcvpkt) && isACK (rcvpkt)  in Figure 3.10 corresponds to this event),
the sender knows that the most recently transmitted packet has been received correctly and thus the
protocol returns to the state of waiting for data from the upper layer."
4016,"If a NAK is received, the protocol
retransmits the last packet and waits for an ACK or NAK to be returned by the receiver in response tothe retransmitted data packet."
4017,"It is important to note that when the sender is in the wait-for-ACK-or-NAK
state, it cannot get more data from the upper layer; that is, the rdt_send()  event can not occur; that
will happen only after the sender receives an ACK and leaves this state."
4018,"Thus, the sender will not send
a new piece of data until it is sure that the receiver has correctly received the current packet."
4019,"Because of
this behavior, protocols such as rdt2.0  are known as stop-and-wait  protocols."
4020,The receiver-side FSM for rdt2.0  still has a single state.
4021,"On packet arrival, the receiver replies with
either an ACK or a NAK, depending on whether or not the received packet is corrupted."
4022,"In Figure 3.10,
the notation rdt_rcv(rcvpkt) && corrupt(rcvpkt)  corresponds to the event in which a packet
is received and is found to be in error."
4023,"Protocol rdt2.0  may look as if it works but, unfortunately, it has a fatal flaw."
4024,"In particular, we haven’t
accounted for the possibility that the ACK or NAK packet could be corrupted! (Before proceeding on,
you should think about how this problem may be fixed.) Unfortunately, our slight oversight is not asinnocuous as it may seem."
4025,"Minimally, we will need to add checksum bits to ACK/NAK packets in orderto detect such errors."
4026,The more difficult question is how the protocol should recover from errors in ACKor NAK packets.
4027,"The difficulty here is that if an ACK or NAK is corrupted, the sender has no way ofknowing whether or not the receiver has correctly received the last piece of transmitted data."
4028,"Consider three possibilities for handling corrupted ACKs or NAKs:
For the first possibility, consider what a human might do in the message-dictation scenario."
4029,"If the
speaker didn’t understand the “OK” or “Please repeat that” reply from the receiver, the speaker
would probably ask, “What did you say?” (thus introducing a new type of sender-to-receiver packetto our protocol)."
4030,The receiver would then repeat the reply.
4031,"But what if the speaker’s “What did you
say?” is corrupted?"
4032,"The receiver, having no idea whether the garbled sentence was part of the
dictation or a request to repeat the last reply, would probably then respond with “What did you say?”
And then, of course, that response might be garbled."
4033,"Clearly, we’re heading down a difficult path."
4034,"A second alternative is to add enough checksum bits to allow the sender not only to detect, but also
to recover from, bit errors."
4035,"This solves the immediate problem for a channel that can corrupt packets
but not lose them."
4036,"A third approach is for the sender simply to resend the current data packet when it receives a
garbled ACK or NAK packet."
4037,"This approach, however, introduces duplicate packets into the
sender-to-receiver channel."
4038,"The fundamental difficulty with duplicate packets is that the receiver
doesn’t know whether the ACK or NAK it last sent was received correctly at the sender."
4039,"Thus, it
cannot know a priori  whether an arriving packet contains new data or is a retransmission!
A simple solution to this new problem (and one adopted in almost all existing data transfer protocols,
including TCP) is to add a new field to the data packet and have the sender number its data packets byputting a sequence number into this field."
4040,The receiver then need only check this sequence number todetermine whether or not the received packet is a retransmission.
4041,"For this simple case of a stop-and-
wait protocol, a 1-bit sequence number will suffice, since it will allow the receiver to know whether the
sender is resending the previously transmitted packet (the sequence number of the received packet has
the same sequence number as the most recently received packet) or a new packet (the sequencenumber changes, moving “forward” in modulo-2 arithmetic)."
4042,"Since we are currently assuming a channelthat does not lose packets, ACK and NAK packets do not themselves need to indicate the sequence
number of the packet they are acknowledging."
4043,"The sender knows that a received ACK or NAK packet
(whether garbled or not) was generated in response to its most recently transmitted data packet."
4044,"Figures 3.11 and 3.12 show the FSM description for rdt2.1 , our fixed version of rdt2.0 ."
4045,"The
rdt2.1  sender and receiver FSMs each now have twice as many states as before."
4046,"This is because the
protocol state must now reflect whether the packet currently being sent (by the sender) or expected (at
the receiver) should have a sequence number of 0 or 1."
4047,Note that the actions in those states where a 0-numbered packet is being sent or expected are mirror images of those where a 1-numbered packet isbeing sent or expected; the only differences have to do with the handling of the sequence number.
4048,Protocol rdt2.1  uses both positive and negative acknowledgments from the receiver to the sender.
4049,"When an out-of-order packet is received, the receiver sends a positive acknowledgment for the packet it
has received."
4050,"When a corrupted packet
Figure 3.11 rdt2.1  senderFigure 3.12 rdt2.1  receiver
is received, the receiver sends a negative acknowledgment."
4051,"We can accomplish the same effect as a
NAK if, instead of sending a NAK, we send an ACK for the last correctly received packet."
4052,"A sender that
receives two ACKs for the same packet (that is, receives duplicate ACKs) knows that the receiver did
not correctly receive the packet following the packet that is being ACKed twice."
4053,"Our NAK-free reliable
data transfer protocol for a channel with bit errors is rdt2.2 , shown in Figures 3.13 and 3.14."
4054,"One
subtle change between rtdt2.1  and rdt2.2  is that the receiver must now include the sequence
number of the packet being acknowledged by an ACK message (this is done by including the ACK, 0
or ACK, 1 argument in make_pkt()  in the receiver FSM), and the sender must now check the
sequence number of the packet being acknowledged by a received ACK message (this is done byincluding the 0 or 1 argument in isACK()  in the sender FSM)."
4055,"Reliable Data Transfer over a Lossy Channel with Bit Errors: rdt3.0
Suppose now that in addition to corrupting bits, the underlying channel can lose packets as well, a not-
uncommon event in today’s computer networks (including the Internet)."
4056,"Two additional concerns must
now be addressed by the protocol: how to detect packet loss and what to do when packet loss occurs."
4057,"The use of checksumming, sequence numbers, ACK packets, and retransmissions—the techniquesFigure 3.13 rdt2.2  sender
already developed in rdt2.2 —will allow us to answer the latter concern."
4058,"Handling the first concern will
require adding a new protocol mechanism."
4059,"There are many possible approaches toward dealing with packet loss (several more of which are
explored in the exercises at the end of the chapter)."
4060,"Here, we’ll put the burden of detecting andrecovering from lost packets on the sender."
4061,"Suppose that the sender transmits a data packet and eitherthat packet, or the receiver’s ACK of that packet, gets lost."
4062,"In either case, no reply is forthcoming at the
sender from the receiver."
4063,"If the sender is willing to wait long enough so that it is certain that a packet has
been lost, it can simply retransmit the data packet."
4064,"You should convince yourself that this protocol does
indeed work."
4065,But how long must the sender wait to be certain that something has been lost?
4066,"The sender must clearly
wait at least as long as a round-trip delay between the sender and receiver (which may include bufferingat intermediate routers) plus whatever amount of time is needed to process a packet at the receiver."
4067,"Inmany networks, this worst-case maximum delay is very difficult even to estimate, much less know withcertainty."
4068,"Moreover, the protocol should ideally recover from packet loss as soon as possible; waiting for
a worst-case delay could mean a long wait until error recoveryFigure 3.14 rdt2.2  receiver
is initiated."
4069,"The approach thus adopted in practice is for the sender to judiciously choose a time value
such that packet loss is likely, although not guaranteed, to have happened."
4070,"If an ACK is not received
within this time, the packet is retransmitted."
4071,"Note that if a packet experiences a particularly large delay,the sender may retransmit the packet even though neither the data packet nor its ACK have been lost.This introduces the possibility of duplicate data packets in the sender-to-receiver channel."
4072,"Happily,
protocol rdt2.2  already has enough functionality (that is, sequence numbers) to handle the case of
duplicate packets."
4073,"From the sender’s viewpoint, retransmission is a panacea."
4074,"The sender does not know whether a data
packet was lost, an ACK was lost, or if the packet or ACK was simply overly delayed."
4075,"In all cases, theaction is the same: retransmit."
4076,Implementing a time-based retransmission mechanism requires acountdown timer  that can interrupt the sender after a given amount of time has expired.
4077,"The sender
will thus need to be able to (1) start the timer each time a packet (either a first-time packet or aretransmission) is sent, (2) respond to a timer interrupt (taking appropriate actions), and (3) stop thetimer."
4078,"Figure 3.15 shows the sender FSM for rdt3.0 , a protocol that reliably transfers data over a channel
that can corrupt or lose packets; in the homework problems, you’ll be asked to provide the receiver FSM
for rdt3.0 ."
4079,"Figure 3.16 shows how the protocol operates with no lost or delayed packets and how it
handles lost data packets."
4080,"In Figure 3.16, time moves forward from the top of the diagram toward the
bottom of theFigure 3.15 rdt3.0  sender
diagram; note that a receive time for a packet is necessarily later than the send time for a packet as a
result of transmission and propagation delays."
4081,"In Figures 3.16(b)–(d), the send-side brackets indicate
the times at which a timer is set and later times out."
4082,"Several of the more subtle aspects of this protocol
are explored in the exercises at the end of this chapter."
4083,"Because packet sequence numbers alternate
between 0 and 1, protocol rdt3.0  is sometimes known as the alternating-bit protocol ."
4084,We have now assembled the key elements of a data transfer protocol.
4085,"Checksums, sequence numbers,
timers, and positive and negative acknowledgment packets each play a crucial and necessary role in the
operation of the protocol."
4086,"We now have a working reliable data transfer protocol!
Developing a protocol and FSM representation for a simple application-layer protocol3.4.2 Pipelined Reliable Data Transfer Protocols
Protocol rdt3.0  is a functionally correct protocol, but it is unlikely that anyone would be happy with its
performance, particularly in today’s high-speed networks."
4087,"At the heart of rdt3.0 ’s performance
problem is the fact that it is a stop-and-wait protocol."
4088,"Figure 3.16 Operation of rdt3.0 , the alternating-bit protocol
Figure 3.17 Stop-and-wait versus pipelined protocol
To appreciate the performance impact of this stop-and-wait behavior, consider an idealized case of two
hosts, one located on the West Coast of the United States and the other located on the East Coast, as
shown in Figure 3.17."
4089,"The speed-of-light round-trip propagation delay between these two end systems,
RTT, is approximately 30 milliseconds."
4090,"Suppose that they are connected by a channel with atransmission rate, R, of 1 Gbps (10  bits per second)."
4091,"With a packet size, L, of 1,000 bytes (8,000 bits)
per packet, including both header fields and data, the time needed to actually transmit the packet into
the 1 Gbps link is
Figure 3.18(a) shows that with our stop-and-wait protocol, if the sender begins sending the packet at
 then at  microseconds, the last bit enters the channel at the sender side."
4092,"The packet then
makes its 15-msec cross-country journey, with the last bit of the packet emerging at the receiver at
 15.008 msec."
4093,"Assuming for simplicity that ACK packets are extremely small (so that we
can ignore their transmission time) and that the receiver can send an ACK as soon as the last bit of a
data packet is received, the ACK emerges back at the sender at  At this point,
the sender can now transmit the next message."
4094,"Thus, in 30.008 msec, the sender was sending for only0.008 msec."
4095,"If we define the utilization  of the sender (or the channel) as the fraction of time the sender
is actually busy sending bits into the channel, the analysis in Figure 3.18(a) shows that the stop-and-
wait protocol has a rather dismal sender utilization, U , of9
dtrans=LR=8000  bits/packet109 bits/sec=8 microseconds
t=0, t=L/R=8
t=RTT/2+L/R=
t=RTT+L/R=30.008  msec."
4096,"sender
Usender =L/RRTT+L/R =.00830.008 =0.00027Figure 3.18 Stop-and-wait and pipelined sending
That is, the sender was busy only 2.7 hundredths of one percent of the time! Viewed another way, the
sender was able to send only 1,000 bytes in 30.008 milliseconds, an effective throughput of only 267kbps—even though a 1 Gbps link was available! Imagine the unhappy network manager who just paid afortune for a gigabit capacity link but manages to get a throughput of only 267 kilobits per second! Thisis a graphic example of how network protocols can limit the capabilities provided by the underlying
network hardware."
4097,"Also, we have neglected lower-layer protocol-processing times at the sender and
receiver, as well as the processing and queuing delays that would occur at any intermediate routersbetween the sender and receiver."
4098,"Including these effects would serve only to further increase the delay
and further accentuate the poor performance."
4099,"The solution to this particular performance problem is simple: Rather than operate in a stop-and-wait
manner, the sender is allowed to send multiple packets without waiting for acknowledgments, as
illustrated in Figure 3.17(b)."
4100,"Figure 3.18(b) shows that if the sender is allowed to transmit three packets
before having to wait for acknowledgments, the utilization of the sender is essentially tripled."
4101,"Since the
many in-transit sender-to-receiver packets can be visualized as filling a pipeline, this technique is knownas pipelining ."
4102,"Pipelining has the following consequences for reliable data transfer protocols:
The range of sequence numbers must be increased, since each in-transit packet (not counting
retransmissions) must have a unique sequence number and there may be multiple, in-transit,
unacknowledged packets."
4103,The sender and receiver sides of the protocols may have to buffer more than one packet.
4104,"Minimally,
the sender will have to buffer packets that have been transmitted but not yet acknowledged."
4105,"Buffering of correctly received packets may also be needed at the receiver, as discussed below."
4106,"The range of sequence numbers needed and the buffering requirements will depend on the manner
in which a data transfer protocol responds to lost, corrupted, and overly delayed packets."
4107,"Two basic
approaches toward pipelined error recovery can be identified: Go-Back-N and selective repeat ."
4108,"3.4.3 Go-Back-N (GBN)
In a Go-Back-N (GBN) protocol, the sender is allowed to transmit multiple packets (when available)without waiting for an acknowledgment, but is constrained to have no more than some maximum
allowable number, N, of unacknowledged packets in the pipeline."
4109,"We describe the GBN protocol in
some detail in this section."
4110,"But before reading on, you are encouraged to play with the GBN applet (an
awesome applet!) at the companion Web site."
4111,Figure 3.19 shows the sender’s view of the range of sequence numbers in a GBN protocol.
4112,"If we define
base  to be the sequence number of the oldest unacknowledged
Figure 3.19 Sender’s view of sequence numbers in Go-Back-Npacket and nextseqnum  to be the smallest unused sequence number (that is, the sequence number of
the next packet to be sent), then four intervals in the range of sequence numbers can be identified."
4113,"Sequence numbers in the interval [ 0, base-1 ] correspond to packets that have already been
transmitted and acknowledged."
4114,"The interval [base, nextseqnum-1]  corresponds to packets that
have been sent but not yet acknowledged."
4115,"Sequence numbers in the interval [nextseqnum,
base+N-1]  can be used for packets that can be sent immediately, should data arrive from the upper
layer."
4116,"Finally, sequence numbers greater than or equal to base+N  cannot be used until an
unacknowledged packet currently in the pipeline (specifically, the packet with sequence number base )
has been acknowledged."
4117,"As suggested by Figure 3.19, the range of permissible sequence numbers for transmitted but not yet
acknowledged packets can be viewed as a window of size N over the range of sequence numbers."
4118,"As
the protocol operates, this window slides forward over the sequence number space."
4119,"For this reason, N
is often referred to as the window size  and the GBN protocol itself as a sliding-window protocol ."
4120,"You
might be wondering why we would even limit the number of outstanding, unacknowledged packets to a
value of N in the first place."
4121,Why not allow an unlimited number of such packets?
4122,"We’ll see in Section
3.5 that flow control is one reason to impose a limit on the sender."
4123,"We’ll examine another reason to do
so in Section 3.7, when we study TCP congestion control."
4124,"In practice, a packet’s sequence number is carried in a fixed-length field in the packet header."
4125,"If k is the
number of bits in the packet sequence number field, the range of sequence numbers is thus 
With a finite range of sequence numbers, all arithmetic involving sequence numbers must then be done
using modulo 2  arithmetic."
4126,"(That is, the sequence number space can be thought of as a ring of size 2 ,
where sequence number  is immediately followed by sequence number 0.) Recall that rdt3.0
had a 1-bit sequence number and a range of sequence numbers of [0,1]."
4127,"Several of the problems at the
end of this chapter explore the consequences of a finite range of sequence numbers."
4128,"We will see in
Section 3.5 that TCP has a 32-bit sequence number field, where TCP sequence numbers count bytes
in the byte stream rather than packets."
4129,"Figures 3.20 and 3.21 give an extended FSM description of the sender and receiver sides of an ACK-
based, NAK-free, GBN protocol."
4130,"We refer to this FSM[0,2k−1]."
4131,"k k
2k−1Figure 3.20 Extended FSM description of the GBN sender
Figure 3.21 Extended FSM description of the GBN receiver
description as an extended FSM because we have added variables (similar to programming-language
variables) for base  and nextseqnum , and added operations on these variables and conditional
actions involving these variables."
4132,"Note that the extended FSM specification is now beginning to look
somewhat like a programming-language specification."
4133,"[Bochman 1984]  provides an excellent survey ofadditional extensions to FSM techniques as well as other programming-language-based techniques for
specifying protocols."
4134,"The GBN sender must respond to three types of events:
Invocation from above."
4135," When rdt_send()  is called from above, the sender first checks to see if
the window is full, that is, whether there are N outstanding, unacknowledged packets."
4136,"If the window
is not full, a packet is created and sent, and variables are appropriately updated."
4137,"If the window is full,
the sender simply returns the data back to the upper layer, an implicit indication that the window isfull."
4138,The upper layer would presumably then have to try again later.
4139,"In a real implementation, thesender would more likely have either buffered (but not immediately sent) this data, or would have asynchronization mechanism (for example, a semaphore or a flag) that would allow the upper layer to
call rdt_send()  only when the window is not full."
4140,Receipt of an ACK.
4141,"In our GBN protocol, an acknowledgment for a packet with sequence number n
will be taken to be a cumulative acknowledgment, indicating that all packets with a sequence
number up to and including n have been correctly received at the receiver."
4142,"We’ll come back to this
issue shortly when we examine the receiver side of GBN."
4143,A timeout event.
4144,"The protocol’s name, “Go-Back-N,” is derived from the sender’s behavior in the
presence of lost or overly delayed packets."
4145,"As in the stop-and-wait protocol, a timer will again be
used to recover from lost data or acknowledgment packets."
4146,"If a timeout occurs, the sender resends
all packets that have been previously sent but that have not yet been acknowledged."
4147,"Our sender in
Figure 3.20 uses only a single timer, which can be thought of as a timer for the oldest transmitted
but not yet acknowledged packet."
4148,"If an ACK is received but there are still additional transmitted but
not yet acknowledged packets, the timer is restarted."
4149,"If there are no outstanding, unacknowledgedpackets, the timer is stopped."
4150,The receiver’s actions in GBN are also simple.
4151,"If a packet with sequence number n is received correctly
and is in order (that is, the data last delivered to the upper layer came from a packet with sequence
number ), the receiver sends an ACK for packet n and delivers the data portion of the packet to the
upper layer."
4152,"In all other cases, the receiver discards the packet and resends an ACK for the most
recently received in-order packet."
4153,"Note that since packets are delivered one at a time to the upper layer,
if packet k has been received and delivered, then all packets with a sequence number lower than k have
also been delivered."
4154,"Thus, the use of cumulative acknowledgments is a natural choice for GBN."
4155,"In our GBN protocol, the receiver discards out-of-order packets."
4156,"Although it may seem silly and wasteful
to discard a correctly received (but out-of-order) packet, there is some justification for doing so."
4157,"Recall
that the receiver must deliver data in order to the upper layer."
4158,"Suppose now that packet n is expected,
but packet  arrives."
4159,"Because data must be delivered in order, the receiver could  buffer (save) packet
 and then deliver this packet to the upper layer after it had later received and delivered packet n."
4160,"However, if packet n is lost, both it and packet  will eventually be retransmitted as a result of then−1
n+1
n+1
n+1GBN retransmission rule at the sender."
4161,"Thus, the receiver can simply discard packet ."
4162,"The
advantage of this approach is the simplicity of receiver buffering—the receiver need not buffer any out-
of-order packets."
4163,"Thus, while the sender must maintain the upper and lower bounds of its window and
the position of nextseqnum  within this window, the only piece of information the receiver need
maintain is the sequence number of the next in-order packet."
4164,"This value is held in the variable
expectedseqnum , shown in the receiver FSM in Figure 3.21."
4165,"Of course, the disadvantage of throwing
away a correctly received packet is that the subsequent retransmission of that packet might be lost or
garbled and thus even more retransmissions would be required."
4166,Figure 3.22 shows the operation of the GBN protocol for the case of a window size of four packets.
4167,"Because of this window size limitation, the sender sends packets 0 through 3 but then must wait for one
or more of these packets to be acknowledged before proceeding."
4168,"As each successive ACK (for
example, ACK0  and ACK1 ) is received, the window slides forward and the sender can transmit one
new packet (pkt4 and pkt5, respectively)."
4169,"On the receiver side, packet 2 is lost and thus packets 3, 4,
and 5 are found to be out of order and are discarded."
4170,"Before closing our discussion of GBN, it is worth noting that an implementation of this protocol in a
protocol stack would likely have a structure similar to that of the extended FSM in Figure 3.20."
4171,"The
implementation would also likely be in the form of various procedures that implement the actions to be
taken in response to the various events that can occur."
4172,"In such event-based programming, the various
procedures are called (invoked) either by other procedures in the protocol stack, or as the result of aninterrupt."
4173,"In the sender, these events would be (1) a call from the upper-layer entity to invoke
rdt_send() , (2) a timer interrupt, and (3) a call from the lower layer to invoke rdt_rcv()  when a
packet arrives."
4174,"The programming exercises at the end of this chapter will give you a chance to actuallyimplement these routines in a simulated, but realistic, network setting."
4175,"We note here that the GBN protocol incorporates almost all of the techniques that we will encounter
when we study the reliable data transfer components of TCP in Section 3.5. These techniques include
the use of sequence numbers, cumulative acknowledgments, checksums, and a timeout/retransmit
operation.n+1Figure 3.22 Go-Back-N in operation
3.4.4 Selective Repeat (SR)
The GBN protocol allows the sender to potentially “fill the pipeline” in Figure 3.17 with packets, thus
avoiding the channel utilization problems we noted with stop-and-wait protocols."
4176,"There are, however,
scenarios in which GBN itself suffers from performance problems."
4177,"In particular, when the window sizeand bandwidth-delay product are both large, many packets can be in the pipeline."
4178,"A single packet error
can thus cause GBN to retransmit a large number of packets, many unnecessarily."
4179,"As the probability of
channel errors increases, the pipeline can become filled with these unnecessary retransmissions.Imagine, in our message-dictation scenario, that if every time a word was garbled, the surrounding
1,000 words (for example, a window size of 1,000 words) had to be repeated."
4180,The dictation would beslowed by all of the reiterated words.
4181,"As the name suggests, selective-repeat protocols avoid unnecessary retransmissions by having the
sender retransmit only those packets that it suspects were received in error (that is, were lost orcorrupted) at the receiver."
4182,"This individual, as-needed, retransmission will require that the receiver
individually  acknowledge correctly received packets."
4183,"A window size of N will again be used to limit the
number of outstanding, unacknowledged packets in the pipeline."
4184,"However, unlike GBN, the sender will
have already received ACKs for some of the packets in the window."
4185,"Figure 3.23 shows the SR sender’s
view of the sequence number space."
4186,Figure 3.24 details the various actions taken by the SR sender.
4187,The SR receiver will acknowledge a correctly received packet whether or not it is in order.
4188,"Out-of-order
packets are buffered until any missing packets (that is, packets with lower sequence numbers) are
received, at which point a batch of packets can be delivered in order to the upper layer."
4189,"Figure 3.25
itemizes the various actions taken by the SR receiver."
4190,"Figure 3.26 shows an example of SR operation
in the presence of lost packets."
4191,"Note that in Figure 3.26, the receiver initially buffers packets 3, 4, and 5,
and delivers them together with packet 2 to the upper layer when packet 2 is finally received."
4192,"Figure 3.23 Selective-repeat (SR) sender and receiver views of sequence-number spaceFigure 3.24 SR sender events and actions
Figure 3.25 SR receiver events and actions
It is important to note that in Step 2 in Figure 3.25, the receiver reacknowledges (rather than ignores)
already received packets with certain sequence numbers below  the current window base."
4193,"You should
convince yourself that this reacknowledgment is indeed needed."
4194,"Given the sender and receiver
sequence number spaces in Figure 3.23, for example, if there is no ACK for packet send_base
propagating from theFigure 3.26 SR operation
receiver to the sender, the sender will eventually retransmit packet send_base , even though it is clear
(to us, not the sender!) that the receiver has already received that packet."
4195,"If the receiver were not to
acknowledge this packet, the sender’s window would never move forward! This example illustrates animportant aspect of SR protocols (and many other protocols as well)."
4196,The sender and receiver will notalways have an identical view of what has been received correctly and what has not.
4197,"For SR protocols,this means that the sender and receiver windows will not always coincide."
4198,"The lack of synchronization between sender and receiver windows has important consequences when
we are faced with the reality of a finite range of sequence numbers."
4199,"Consider what could happen, forexample, with a finite range of four packet sequence numbers, 0, 1, 2, 3, and a window size of three.Suppose packets 0 through 2 are transmitted and correctly received and acknowledged at the receiver."
4200,"At this point, the receiver’s window is over the fourth, fifth, and sixth packets, which have sequence
numbers 3, 0, and 1, respectively."
4201,Now consider two scenarios.
4202,"In the first scenario, shown in Figure
3.27(a), the ACKs for the first three packets are lost and the sender retransmits these packets."
4203,"The
receiver thus next receives a packet with sequence number 0—a copy of the first packet sent."
4204,"In the second scenario, shown in Figure 3.27(b), the ACKs for the first three packets are all delivered
correctly."
4205,"The sender thus moves its window forward and sends the fourth, fifth, and sixth packets, with
sequence numbers 3, 0, and 1, respectively."
4206,"The packet with sequence number 3 is lost, but the packet
with sequence number 0 arrives—a packet containing new data."
4207,"Now consider the receiver’s viewpoint in Figure 3.27, which has a figurative curtain between the sender
and the receiver, since the receiver cannot “see” the actions taken by the sender."
4208,"All the receiver
observes is the sequence of messages it receives from the channel and sends into the channel."
4209,"As far
as it is concerned, the two scenarios in Figure 3.27 are identical."
4210," There is no way of distinguishing the
retransmission of the first packet from an original transmission of the fifth packet."
4211,"Clearly, a window size
that is 1 less than the size of the sequence number space won’t work."
4212,But how small must the windowsize be?
4213,A problem at the end of the chapter asks you to show that the window size must be less thanor equal to half the size of the sequence number space for SR protocols.
4214,"At the companion Web site, you will find an applet that animates the operation of the SR protocol."
4215,"Try
performing the same experiments that you did with the GBN applet."
4216,Do the results agree with what youexpect?
4217,This completes our discussion of reliable data transfer protocols.
4218,"We’ve covered a lot of ground and
introduced numerous mechanisms that together provide for reliable data transfer."
4219,"Table 3.1 summarizes
these mechanisms."
4220,"Now that we have seen all of these mechanisms in operation and can see the “big
picture,” we encourage you to review this section again to see how these mechanisms wereincrementally added to cover increasingly complex (and realistic) models of the channel connecting thesender and receiver, or to improve the performance of the protocols."
4221,"Let’s conclude our discussion of reliable data transfer protocols by considering one remaining
assumption in our underlying channel model."
4222,Recall that we have assumed that packets cannot bereordered within the channel between the sender and receiver.
4223,This is generally a reasonableassumption when the sender and receiver are connected by a single physical wire.
4224,"However, when the“channel” connecting the two is a network, packet reordering can occur."
4225,One manifestation of packetreordering is that old copies of a packet with a sequence or acknowledgmentFigure 3.27 SR receiver dilemma with too-large windows: A new packet or a retransmission?
4226,"Table 3.1 Summary of reliable data transfer mechanisms and their use
Mechanism Use, Comments
Checksum Used to detect bit errors in a transmitted packet."
4227,"Timer Used to timeout/retransmit a packet, possibly because the packet (or its ACK)
was lost within the channel."
4228,"Because timeouts can occur when a packet isdelayed but not lost (premature timeout), or when a packet has been receivedby the receiver but the receiver-to-sender ACK has been lost, duplicate copiesof a packet may be received by a receiver."
4229,"Sequence
numberUsed for sequential numbering of packets of data flowing from sender toreceiver."
4230,Gaps in the sequence numbers of received packets allow the receiverto detect a lost packet.
4231,Packets with duplicate sequence numbers allow thereceiver to detect duplicate copies of a packet.
4232,Acknowledgment Used by the receiver to tell the sender that a packet or set of packets has beenreceived correctly.
4233,Acknowledgments will typically carry the sequence numberof the packet or packets being acknowledged.
4234,"Acknowledgments may beindividual or cumulative, depending on the protocol."
4235,NegativeacknowledgmentUsed by the receiver to tell the sender that a packet has not been receivedcorrectly.
4236,"Negative acknowledgments will typically carry the sequence number
of the packet that was not received correctly."
4237,"Window,
pipeliningThe sender may be restricted to sending only packets with sequence numbersthat fall within a given range."
4238,"By allowing multiple packets to be transmitted butnot yet acknowledged, sender utilization can be increased over a stop-and-waitmode of operation."
4239,"We’ll see shortly that the window size may be set on thebasis of the receiver’s ability to receive and buffer messages, or the level ofcongestion in the network, or both."
4240,"number of x can appear, even though neither the sender’s nor the receiver’s window contains x."
4241,"With
packet reordering, the channel can be thought of as essentially buffering packets and spontaneously
emitting these packets at any point in the future."
4242,"Because sequence numbers may be reused, some
care must be taken to guard against such duplicate packets."
4243,"The approach taken in practice is to ensure
that a sequence number is not reused until the sender is “sure” that any previously sent packets with
sequence number x are no longer in the network."
4244,"This is done by assuming that a packet cannot “live” in
the network for longer than some fixed maximum amount of time."
4245,A maximum packet lifetime ofapproximately three minutes is assumed in the TCP extensions for high-speed networks [RFC 1323] .
4246,"[Sunshine 1978] describes a method for using sequence numbers such that reordering problems can
be completely avoided.3.5 Connection-Oriented Transport: TCP
Now that we have covered the underlying principles of reliable data transfer, let’s turn to TCP—the
Internet’s transport-layer, connection-oriented, reliable transport protocol."
4247,"In this section, we’ll see that inorder to provide reliable data transfer, TCP relies on many of the underlying principles discussed in theprevious section, including error detection, retransmissions, cumulative acknowledgments, timers, andheader fields for sequence and acknowledgment numbers."
4248,"TCP is defined in RFC 793, RFC 1122, RFC
1323, RFC 2018, and RFC 2581."
4249,"3.5.1 The TCP Connection
TCP is said to be connection-oriented  because before one application process can begin to send data
to another, the two processes must first “handshake” with each other—that is, they must send some
preliminary segments to each other to establish the parameters of the ensuing data transfer."
4250,"As part ofTCP connection establishment, both sides of the connection will initialize many TCP state variables
(many of which will be discussed in this section and in Section 3.7) associated with the TCP
connection."
4251,The TCP “connection” is not an end-to-end TDM or FDM circuit as in a circuit-switched network.
4252,"Instead,
the “connection” is a logical one, with common state residing only in the TCPs in the two communicatingend systems."
4253,"Recall that because the TCP protocol runs only in the end systems and not in theintermediate network elements (routers and link-layer switches), the intermediate network elements donot maintain TCP connection state."
4254,"In fact, the intermediate routers are completely oblivious to TCPconnections; they see datagrams, not connections."
4255,"A TCP connection provides a full-duplex service: If there is a TCP connection between Process A on
one host and Process B on another host, then application-layer data can flow from Process A to
Process B at the same time as application-layer data flows from Process B to Process A."
4256,"A TCPconnection is also always point-to-point , that is, between a single sender and a single receiver."
4257,"So-
called “multicasting” (see the online supplementary materials for this text)—the transfer of data from onesender to many receivers in a single send operation—is not possible with TCP."
4258,"With TCP, two hosts arecompany and three are a crowd!
Let’s now take a look at how a TCP connection is established."
4259,"Suppose a process running in one host
wants to initiate a connection with another process in another host."
4260,"Recall that the process that isinitiating the connection is called the client process , while the other process is called the server process ."
4261,"The client application process first informs the client transport layer that it wants to establish a
connection
CASE HISTORY
Vinton Cerf, Robert Kahn, and TCP/IP
In the early 1970s, packet-switched networks began to proliferate, with the ARPAnet—the
precursor of the Internet—being just one of many networks."
4262,Each of these networks had its ownprotocol.
4263,"Two researchers, Vinton Cerf and Robert Kahn, recognized the importance ofinterconnecting these networks and invented a cross-network protocol called TCP/IP, whichstands for Transmission Control Protocol/Internet Protocol."
4264,"Although Cerf and Kahn began byseeing the protocol as a single entity, it was later split into its two parts, TCP and IP, which
operated separately."
4265,"Cerf and Kahn published a paper on TCP/IP in May 1974 in IEEE
Transactions on Communications Technology  [Cerf 1974] ."
4266,"The TCP/IP protocol, which is the bread and butter of today’s Internet, was devised before PCs,
workstations, smartphones, and tablets, before the proliferation of Ethernet, cable, and DSL,WiFi, and other access network technologies, and before the Web, social media, and streamingvideo."
4267,"Cerf and Kahn saw the need for a networking protocol that, on the one hand, providesbroad support for yet-to-be-defined applications and, on the other hand, allows arbitrary hostsand link-layer protocols to interoperate."
4268,"In 2004, Cerf and Kahn received the ACM’s Turing Award, considered the “Nobel Prize of
Computing” for “pioneering work on internetworking, including the design and implementation of
the Internet’s basic communications protocols, TCP/IP, and for inspired leadership in
networking.”
to a process in the server."
4269,"Recall from Section 2.7.2, a Python client program does this by issuing the
command
clientSocket.connect((serverName, serverPort))
where serverName  is the name of the server and serverPort  identifies the process on the server."
4270,TCP in the client then proceeds to establish a TCP connection with TCP in the server.
4271,At the end of thissection we discuss in some detail the connection-establishment procedure.
4272,For now it suffices to knowthat the client first sends a special TCP segment; the server responds with a second special TCPsegment; and finally the client responds again with a third special segment.
4273,"The first two segments carryno payload, that is, no application-layer data; the third of these segments may carry a payload."
4274,"Becausethree segments are sent between the two hosts, this connection-establishment procedure is often
referred to as a three-way handshake."
4275,"Once a TCP connection is established, the two application processes can send data to each other."
4276,"Let’s
consider the sending of data from the client process to the server process."
4277,"The client process passes a
stream of data through the socket (the door of the process), as described in Section 2.7. Once the data
passes through the door, the data is in the hands of TCP running in the client."
4278,"As shown in Figure 3.28,
TCP directs this data to the connection’s send buffer, which is one of the buffers that is set aside during
the initial three-way handshake."
4279,"From time to time, TCP will grab chunks of data from the send bufferand pass the data to the network layer."
4280,"Interestingly, the TCP specification [RFC 793] is very laid back
about specifying when TCP should actually send buffered data, stating that TCP should “send that data
in segments at its own convenience.” The maximum amount of data that can be grabbed and placed ina segment is limited by the maximum segment size (MSS)."
4281,"The MSS is typically set by first
determining the length of the largest link-layer frame that can be sent by the local sending host (the so-
called maximum transmission unit, MTU ), and then setting the MSS to ensure that a TCP segment
(when encapsulated in an IP datagram) plus the TCP/IP header length (typically 40 bytes) will fit into a
single link-layer frame."
4282,"Both Ethernet and PPP link-layer protocols have an MTU of 1,500 bytes."
4283,Thus atypical value of MSS is 1460 bytes.
4284,"Approaches have also been proposed for discovering the path MTU
—the largest link-layer frame that can be sent on all links from source to destination [RFC 1191] —and
setting the MSS based on the path MTU value."
4285,"Note that the MSS is the maximum amount of
application-layer data in the segment, not the maximum size of the TCP segment including headers.(This terminology is confusing, but we have to live with it, as it is well entrenched.)
TCP pairs each chunk of client data with a TCP header, thereby forming TCP segments."
4286,"The segments
are passed down to the network layer, where they are separately encapsulated within network-layer IP
datagrams."
4287,The IP datagrams are then sent into the network.
4288,"When TCP receives a segment at the
other end, the segment’s data is placed in the TCP connection’s receive buffer, as shown in Figure
3.28."
4289,The application reads the stream of data from this buffer.
4290,"Each side of the connection has
Figure 3.28 TCP send and receive buffersits own send buffer and its own receive buffer."
4291,"(You can see the online flow-control applet at
http://www.awl.com/kurose-ross , which provides an animation of the send and receive buffers.)
We see from this discussion that a TCP connection consists of buffers, variables, and a socket
connection to a process in one host, and another set of buffers, variables, and a socket connection to a
process in another host."
4292,"As mentioned earlier, no buffers or variables are allocated to the connection in
the network elements (routers, switches, and repeaters) between the hosts."
4293,"3.5.2 TCP Segment Structure
Having taken a brief look at the TCP connection, let’s examine the TCP segment structure."
4294,The TCPsegment consists of header fields and a data field.
4295,"The data field contains a chunk of application data.As mentioned above, the MSS limits the maximum size of a segment’s data field."
4296,"When TCP sends alarge file, such as an image as part of a Web page, it typically breaks the file into chunks of size MSS(except for the last chunk, which will often be less than the MSS)."
4297,"Interactive applications, however,
often transmit data chunks that are smaller than the MSS; for example, with remote login applications
like Telnet, the data field in the TCP segment is often only one byte."
4298,"Because the TCP header istypically 20 bytes (12 bytes more than the UDP header), segments sent by Telnet may be only 21 bytesin length."
4299,Figure 3.29 shows the structure of the TCP segment.
4300,"As with UDP, the header includes source and
destination port numbers , which are used for multiplexing/demultiplexing data from/to upper-layer
applications."
4301,"Also, as with UDP, the header includes a checksum field."
4302,"A TCP segment header also
contains the following fields:
The 32-bit sequence number field  and the 32-bit acknowledgment number field  are used by the
TCP sender and receiver in implementing a reliable data transfer service, as discussed below."
4303,The 16-bit receive window  field is used for flow control.
4304,"We will see shortly that it is used to indicate
the number of bytes that a receiver is willing to accept."
4305,The 4-bit header length field  specifies the length of the TCP header in 32-bit words.
4306,"The TCP
header can be of variable length due to the TCP options field."
4307,"(Typically, the options field is empty,
so that the length of the typical TCP header is 20 bytes.)
The optional and variable-length options field  is used when a sender and receiver negotiate the
maximum segment size (MSS) or as a window scaling factor for use in high-speed networks."
4308,A time-stamping option is also defined.
4309,See RFC 854 and RFC 1323 for additional details.
4310,The flag field  contains 6 bits.
4311,"The ACK bit  is used to indicate that the value carried in the
acknowledgment field is valid; that is, the segment contains an acknowledgment for a segment thathas been successfully received."
4312,"The RST,Figure 3.29 TCP segment structure
SYN, and FIN bits are used for connection setup and teardown, as we will discuss at the end of this
section."
4313,"The CWR and ECE bits are used in explicit congestion notification, as discussed in Section
3.7.2. Setting the PSH bit indicates that the receiver should pass the data to the upper layer
immediately."
4314,"Finally, the URG bit is used to indicate that there is data in this segment that the
sending-side upper-layer entity has marked as “urgent.” The location of the last byte of this urgent
data is indicated by the 16-bit urgent data pointer field ."
4315,"TCP must inform the receiving-side upper-
layer entity when urgent data exists and pass it a pointer to the end of the urgent data."
4316,"(In practice,the PSH, URG, and the urgent data pointer are not used."
4317,"However, we mention these fields forcompleteness.)
Our experience as teachers is that our students sometimes find discussion of packet formats rather dryand perhaps a bit boring."
4318,"For a fun and fanciful look at TCP header fields, particularly if you love
Legos™ as we do, see [Pomeranz 2010] ."
4319,"Sequence Numbers and Acknowledgment Numbers
Two of the most important fields in the TCP segment header are the sequence number field and the
acknowledgment number field."
4320,These fields are a critical part of TCP’s reliable data transfer service.
4321,"Butbefore discussing how these fields are used to provide reliable data transfer, let us first explain what
exactly TCP puts in these fields.Figure 3.30 Dividing file data into TCP segments
TCP views data as an unstructured, but ordered, stream of bytes."
4322,"TCP’s use of sequence numbers
reflects this view in that sequence numbers are over the stream of transmitted bytes and not over the
series of transmitted segments."
4323,"The sequence number for a segment is therefore the byte-stream
number of the first byte in the segment."
4324,Let’s look at an example.
4325,Suppose that a process in Host Awants to send a stream of data to a process in Host B over a TCP connection.
4326,The TCP in Host A willimplicitly number each byte in the data stream.
4327,"Suppose that the data stream consists of a file consistingof 500,000 bytes, that the MSS is 1,000 bytes, and that the first byte of the data stream is numbered 0."
4328,"As shown in Figure 3.30, TCP constructs 500 segments out of the data stream."
4329,"The first segment gets
assigned sequence number 0, the second segment gets assigned sequence number 1,000, the third
segment gets assigned sequence number 2,000, and so on."
4330,"Each sequence number is inserted in the
sequence number field in the header of the appropriate TCP segment."
4331,Now let’s consider acknowledgment numbers.
4332,These are a little trickier than sequence numbers.
4333,"Recall
that TCP is full-duplex, so that Host A may be receiving data from Host B while it sends data to Host B(as part of the same TCP connection)."
4334,"Each of the segments that arrive from Host B has a sequence
number for the data flowing from B to A."
4335,"The acknowledgment number that Host A puts in its segment is
the sequence number of the next byte Host A is expecting from Host B."
4336," It is good to look at a few
examples to understand what is going on here."
4337,"Suppose that Host A has received all bytes numbered 0
through 535 from B and suppose that it is about to send a segment to Host B."
4338,"Host A is waiting for byte
536 and all the subsequent bytes in Host B’s data stream."
4339,So Host A puts 536 in the acknowledgmentnumber field of the segment it sends to B.
4340,"As another example, suppose that Host A has received one segment from Host B containing bytes 0
through 535 and another segment containing bytes 900 through 1,000."
4341,For some reason Host A has notyet received bytes 536 through 899.
4342,"In this example, Host A is still waiting for byte 536 (and beyond) inorder to re-create B’s data stream."
4343,"Thus, A’s next segment to B will contain 536 in the acknowledgmentnumber field."
4344,"Because TCP only acknowledges bytes up to the first missing byte in the stream, TCP is
said to provide cumulative acknowledgments.This last example also brings up an important but subtle issue."
4345,"Host A received the third segment (bytes
900 through 1,000) before receiving the second segment (bytes 536 through 899)."
4346,"Thus, the third
segment arrived out of order."
4347,The subtle issue is: What does a host do when it receives out-of-ordersegments in a TCP connection?
4348,"Interestingly, the TCP RFCs do not impose any rules here and leavethe decision up to the programmers implementing a TCP implementation."
4349,"There are basically twochoices: either (1) the receiver immediately discards out-of-order segments (which, as we discussed
earlier, can simplify receiver design), or (2) the receiver keeps the out-of-order bytes and waits for the
missing bytes to fill in the gaps."
4350,"Clearly, the latter choice is more efficient in terms of network bandwidth,and is the approach taken in practice."
4351,"In Figure 3.30, we assumed that the initial sequence number was zero."
4352,"In truth, both sides of a TCP
connection randomly choose an initial sequence number."
4353,"This is done to minimize the possibility that a
segment that is still present in the network from an earlier, already-terminated connection between twohosts is mistaken for a valid segment in a later connection between these same two hosts (which also
happen to be using the same port numbers as the old connection) [Sunshine 1978]."
4354,"Telnet: A Case Study for Sequence and Acknowledgment Numbers
Telnet, defined in RFC 854, is a popular application-layer protocol used for remote login."
4355,"It runs over
TCP and is designed to work between any pair of hosts."
4356,"Unlike the bulk data transfer applications
discussed in Chapter 2, Telnet is an interactive application."
4357,"We discuss a Telnet example here, as it
nicely illustrates TCP sequence and acknowledgment numbers."
4358,"We note that many users now prefer to
use the SSH protocol rather than Telnet, since data sent in a Telnet connection (including passwords!)
are not encrypted, making Telnet vulnerable to eavesdropping attacks (as discussed in Section 8.7)."
4359,Suppose Host A initiates a Telnet session with Host B.
4360,"Because Host A initiates the session, it is labeled
the client, and Host B is labeled the server."
4361,"Each character typed by the user (at the client) will be sentto the remote host; the remote host will send back a copy of each character, which will be displayed onthe Telnet user’s screen."
4362,This “echo back” is used to ensure that characters seen by the Telnet userhave already been received and processed at the remote site.
4363,Each character thus traverses thenetwork twice between the time the user hits the key and the time the character is displayed on theuser’s monitor.
4364,"Now suppose the user types a single letter, ‘C,’ and then grabs a coffee."
4365,"Let’s examine the TCP
segments that are sent between the client and server."
4366,"As shown in Figure 3.31, we suppose the starting
sequence numbers are 42 and 79 for the client and server, respectively."
4367,"Recall that the sequence
number of a segment is the sequence number of the first byte in the data field."
4368,"Thus, the first segmentsent from the client will have sequence number 42; the first segment sent from the server will havesequence number 79."
4369,"Recall that the acknowledgment number is the sequenceFigure 3.31 Sequence and acknowledgment numbers for a simple Telnet application over TCP
number of the next byte of data that the host is waiting for."
4370,"After the TCP connection is established but
before any data is sent, the client is waiting for byte 79 and the server is waiting for byte 42."
4371,"As shown in Figure 3.31, three segments are sent."
4372,"The first segment is sent from the client to the
server, containing the 1-byte ASCII representation of the letter ‘C’ in its data field."
4373,"This first segment also
has 42 in its sequence number field, as we just described."
4374,"Also, because the client has not yet receivedany data from the server, this first segment will have 79 in its acknowledgment number field."
4375,The second segment is sent from the server to the client.
4376,It serves a dual purpose.
4377,"First it provides an
acknowledgment of the data the server has received."
4378,"By putting 43 in the acknowledgment field, the
server is telling the client that it has successfully received everything up through byte 42 and is now
waiting for bytes 43 onward."
4379,"The second purpose of this segment is to echo back the letter ‘C.’ Thus,the second segment has the ASCII representation of ‘C’ in its data field."
4380,"This second segment has thesequence number 79, the initial sequence number of the server-to-client data flow of this TCPconnection, as this is the very first byte of data that the server is sending."
4381,"Note that the acknowledgmentfor client-to-server data is carried in a segment carrying server-to-client data; this acknowledgment is
said to be piggybacked on the server-to-client data segment.The third segment is sent from the client to the server."
4382,"Its sole purpose is to acknowledge the data it has
received from the server."
4383,"(Recall that the second segment contained data—the letter ‘C’—from the
server to the client.) This segment has an empty data field (that is, the acknowledgment is not beingpiggybacked with any client-to-server data)."
4384,The segment has 80 in the acknowledgment number fieldbecause the client has received the stream of bytes up through byte sequence number 79 and it is nowwaiting for bytes 80 onward.
4385,"You might think it odd that this segment also has a sequence number since
the segment contains no data."
4386,"But because TCP has a sequence number field, the segment needs to
have some sequence number."
4387,"3.5.3 Round-Trip Time Estimation and Timeout
TCP, like our rdt protocol in Section 3.4, uses a timeout/retransmit mechanism to recover from lost
segments."
4388,"Although this is conceptually simple, many subtle issues arise when we implement a
timeout/retransmit mechanism in an actual protocol such as TCP."
4389,"Perhaps the most obvious question is
the length of the timeout intervals."
4390,"Clearly, the timeout should be larger than the connection’s round-triptime (RTT), that is, the time from when a segment is sent until it is acknowledged."
4391,"Otherwise,unnecessary retransmissions would be sent."
4392,But how much larger?
4393,How should the RTT be estimated inthe first place?
4394,Should a timer be associated with each and every unacknowledged segment?
4395,"So many
questions! Our discussion in this section is based on the TCP work in [Jacobson 1988] and the current
IETF recommendations for managing TCP timers [RFC 6298] ."
4396,"Estimating the Round-Trip Time
Let’s begin our study of TCP timer management by considering how TCP estimates the round-trip time
between sender and receiver."
4397,This is accomplished as follows.
4398,"The sample RTT, denoted SampleRTT ,
for a segment is the amount of time between when the segment is sent (that is, passed to IP) and whenan acknowledgment for the segment is received."
4399,"Instead of measuring a SampleRTT  for every
transmitted segment, most TCP implementations take only one SampleRTT  measurement at a time."
4400,"That is, at any point in time, the SampleRTT  is being estimated for only one of the transmitted but
currently unacknowledged segments, leading to a new value of SampleRTT  approximately once every
RTT."
4401,"Also, TCP never computes a SampleRTT  for a segment that has been retransmitted; it only
measures SampleRTT  for segments that have been transmitted once [Karn 1987] ."
4402,"(A problem at the
end of the chapter asks you to consider why.)
Obviously, the SampleRTT  values will fluctuate from segment to segment due to congestion in the
routers and to the varying load on the end systems."
4403,"Because of this fluctuation, any given SampleRTT
value may be atypical."
4404,"In order to estimate a typical RTT, it is therefore natural to take some sort of
average of the SampleRTT  values."
4405,"TCP maintains an average, called EstimatedRTT , of theSampleRTT  values."
4406,"Upon obtaining a new SampleRTT , TCP updates EstimatedRTT  according to
the following formula:
The formula above is written in the form of a programming-language statement—the new value of
EstimatedRTT is a weighted combination of the previous value of EstimatedRTT and the new value for
SampleRTT."
4407,"The recommended value of α is α = 0.125 (that is, 1/8) [RFC 6298] , in which case the
formula above becomes:
Note that EstimatedRTT is a weighted average of the SampleRTT values."
4408,"As discussed in a homework
problem at the end of this chapter, this weighted average puts more weight on recent samples than on
old samples."
4409,"This is natural, as the more recent samples better reflect the current congestion in thenetwork."
4410,"In statistics, such an average is called an exponential weighted moving average (EWMA) ."
4411,"The word “exponential” appears in EWMA because the weight of a given SampleRTT  decays
exponentially fast as the updates proceed."
4412,"In the homework problems you will be asked to derive the
exponential term in EstimatedRTT ."
4413,"Figure 3.32 shows the SampleRTT  values and EstimatedRTT  for a value of α = 1/8 for a TCP
connection between gaia.cs.umass.edu  (in Amherst, Massachusetts) to fantasia.eurecom.fr
(in the south of France)."
4414,"Clearly, the variations in the SampleRTT  are smoothed out in the computation
of the EstimatedRTT ."
4415,"In addition to having an estimate of the RTT, it is also valuable to have a measure of the variability of theRTT."
4416,"[RFC 6298]  defines the RTT variation, DevRTT , as an estimate of how much SampleRTT
typically deviates from EstimatedRTT :
Note that DevRTT  is an EWMA of the difference between SampleRTT  and EstimatedRTT ."
4417,"If the
SampleRTT  values have little fluctuation, then DevRTT  will be small; on the other hand, if there is a lot
of fluctuation, DevRTT  will be large."
4418,"The recommended value of β is 0.25.EstimatedRTT =(1−α)⋅EstimatedRTT +α⋅SampleRTT
EstimatedRTT =0.875⋅EstimatedRTT +0.125⋅SampleRTT
DevRTT=(1−β)⋅DevRTT+β⋅|SampleRTT −EstimatedRTT |Setting and Managing the Retransmission Timeout Interval
Given values of EstimatedRTT  and DevRTT , what value should be used for TCP’s timeout interval?"
4419,"Clearly, the interval should be greater than or equal to
PRINCIPLES IN PRACTICE
TCP provides reliable data transfer by using positive acknowledgments and timers in much the
same way that we studied in Section 3.4. TCP acknowledges data that has been received
correctly, and it then retransmits segments when segments or their corresponding
acknowledgments are thought to be lost or corrupted."
4420,"Certain versions of TCP also have an
implicit NAK mechanism—with TCP’s fast retransmit mechanism, the receipt of three duplicateACKs for a given segment serves as an implicit NAK for the following segment, triggeringretransmission of that segment before timeout."
4421,TCP uses sequences of numbers to allow thereceiver to identify lost or duplicate segments.
4422,"Just as in the case of our reliable data transfer
protocol, rdt3.0 , TCP cannot itself tell for certain if a segment, or its ACK, is lost, corrupted, or
overly delayed."
4423,"At the sender, TCP’s response will be the same: retransmit the segment in
question."
4424,"TCP also uses pipelining, allowing the sender to have multiple transmitted but yet-to-be-
acknowledged segments outstanding at any given time."
4425,We saw earlier that pipelining cangreatly improve a session’s throughput when the ratio of the segment size to round-trip delay issmall.
4426,"The specific number of outstanding, unacknowledged segments that a sender can have isdetermined by TCP’s flow-control and congestion-control mechanisms."
4427,"TCP flow control is
discussed at the end of this section; TCP congestion control is discussed in Section 3.7. For the
time being, we must simply be aware that the TCP sender uses pipelining."
4428,"EstimatedRTT , or unnecessary retransmissions would be sent."
4429,"But the timeout interval should not be
too much larger than EstimatedRTT ; otherwise, when a segment is lost, TCP would not quickly
retransmit the segment, leading to large data transfer delays."
4430,It is therefore desirable to set the timeoutequal to the EstimatedRTT  plus some margin.
4431,"The margin should be large when there is a lot of
fluctuation in the SampleRTT  values; it should be small when there is little fluctuation."
4432,"The value of
DevRTT  should thus come into play here."
4433,"All of these considerations are taken into account in TCP’s
method for determining the retransmission timeout interval:
An initial TimeoutInterval  value of 1 second is recommended [RFC 6298] ."
4434,"Also, when a timeout
occurs, the value of TimeoutInterval  is doubled to avoid a premature timeout occurring for aTimeoutInterval =EstimatedRTT +4⋅DevRTTsubsequent segment that will soon be acknowledged."
4435,"However, as soon as a segment is received and
EstimatedRTT  is updated, the TimeoutInterval  is again computed using the formula above."
4436,"Figure 3.32 RTT samples and RTT estimates
3.5.4 Reliable Data Transfer
Recall that the Internet’s network-layer service (IP service) is unreliable."
4437,"IP does not guarantee
datagram delivery, does not guarantee in-order delivery of datagrams, and does not guarantee theintegrity of the data in the datagrams."
4438,"With IP service, datagrams can overflow router buffers and neverreach their destination, datagrams can arrive out of order, and bits in the datagram can get corrupted(flipped from 0 to 1 and vice versa)."
4439,"Because transport-layer segments are carried across the network
by IP datagrams, transport-layer segments can suffer from these problems as well."
4440,TCP creates a reliable data transfer service  on top of IP’s unreliable best-effort service.
4441,"TCP’s reliable
data transfer service ensures that the data stream that a process reads out of its TCP receive buffer is
uncorrupted, without gaps, without duplication, and in sequence; that is, the byte stream is exactly thesame byte stream that was sent by the end system on the other side of the connection."
4442,"How TCP
provides a reliable data transfer involves many of the principles that we studied in Section 3.4.
In our earlier development of reliable data transfer techniques, it was conceptually easiest to assumethat an individual timer is associated with each transmitted but not yet acknowledged segment."
4443,"While
this is great in theory, timer management can require considerable overhead."
4444,"Thus, the recommended
TCP timer management procedures [RFC 6298]  use only a single  retransmission timer, even if there
are multiple transmitted but not yet acknowledged segments."
4445,"The TCP protocol described in this section
follows this single-timer recommendation."
4446,We will discuss how TCP provides reliable data transfer in two incremental steps.
4447,"We first present a
highly simplified description of a TCP sender that uses only timeouts to recover from lost segments; wethen present a more complete description that uses duplicate acknowledgments in addition to timeouts.In the ensuing discussion, we suppose that data is being sent in only one direction, from Host A to HostB, and that Host A is sending a large file."
4448,Figure 3.33 presents a highly simplified description of a TCP sender.
4449,"We see that there are three major
events related to data transmission and retransmission in the TCP sender: data received from
application above; timer timeout; and ACK
Figure 3.33 Simplified TCP senderreceipt."
4450,"Upon the occurrence of the first major event, TCP receives data from the application,
encapsulates the data in a segment, and passes the segment to IP."
4451,"Note that each segment includes asequence number that is the byte-stream number of the first data byte in the segment, as described in
Section 3.5.2. Also note that if the timer is already not running for some other segment, TCP starts the
timer when the segment is passed to IP."
4452,"(It is helpful to think of the timer as being associated with the
oldest unacknowledged segment.) The expiration interval for this timer is the TimeoutInterval ,
which is calculated from EstimatedRTT  and DevRTT , as described in Section 3.5.3.
The second major event is the timeout."
4453,"TCP responds to the timeout event by retransmitting the
segment that caused the timeout."
4454,TCP then restarts the timer.
4455,"The third major event that must be handled by the TCP sender is the arrival of an acknowledgment
segment (ACK) from the receiver (more specifically, a segment containing a valid ACK field value)."
4456,"On
the occurrence of this event, TCP compares the ACK value y with its variable SendBase ."
4457,"The TCP
state variable SendBase  is the sequence number of the oldest unacknowledged byte."
4458,"(Thus
SendBase–1  is the sequence number of the last byte that is known to have been received correctly
and in order at the receiver.) As indicated earlier, TCP uses cumulative acknowledgments, so that y
acknowledges the receipt of all bytes before byte number y."
4459,"If y > SendBase , then the ACK is
acknowledging one or more previously unacknowledged segments."
4460,"Thus the sender updates its
SendBase  variable; it also restarts the timer if there currently are any not-yet-acknowledged segments."
4461,"A Few Interesting Scenarios
We have just described a highly simplified version of how TCP provides reliable data transfer."
4462,"But even
this highly simplified version has many subtleties."
4463,"To get a good feeling for how this protocol works, let’s
now walk through a few simple scenarios."
4464,"Figure 3.34 depicts the first scenario, in which Host A sends
one segment to Host B."
4465,"Suppose that this segment has sequence number 92 and contains 8 bytes of
data."
4466,"After sending this segment, Host A waits for a segment from B with acknowledgment number 100."
4467,"Although the segment from A is received at B, the acknowledgment from B to A gets lost."
4468,"In this case,
the timeout event occurs, and Host A retransmits the same segment."
4469,"Of course, when Host B receivesthe retransmission, it observes from the sequence number that the segment contains data that hasalready been received."
4470,"Thus, TCP in Host B will discard the bytes in the retransmitted segment."
4471,"In a second scenario, shown in Figure 3.35, Host A sends two segments back to back."
4472,"The first
segment has sequence number 92 and 8 bytes of data, and the second segment has sequence number
100 and 20 bytes of data."
4473,"Suppose that both segments arrive intact at B, and B sends two separate
acknowledgments for each of these segments."
4474,"The first of these acknowledgments has
acknowledgment number 100; the second has acknowledgment number 120."
4475,"Suppose now that neither
of the acknowledgments arrives at Host A before the timeout."
4476,"When the timeout event occurs, HostFigure 3.34 Retransmission due to a lost acknowledgment
A resends the first segment with sequence number 92 and restarts the timer."
4477,"As long as the ACK for the
second segment arrives before the new timeout, the second segment will not be retransmitted."
4478,"In a third and final scenario, suppose Host A sends the two segments, exactly as in the second
example."
4479,"The acknowledgment of the first segment is lost in the network, but just before the timeoutevent, Host A receives an acknowledgment with acknowledgment number 120."
4480,"Host A therefore knows
that Host B has received everything  up through byte 119; so Host A does not resend either of the two
segments."
4481,This scenario is illustrated in Figure 3.36.
4482,"Doubling the Timeout Interval
We now discuss a few modifications that most TCP implementations employ."
4483,"The first concerns the
length of the timeout interval after a timer expiration."
4484,"In this modification, whenever the timeout eventoccurs, TCP retransmits the not-yet-acknowledged segment with the smallest sequence number, asdescribed above."
4485,"But each time TCP retransmits, it sets the next timeout interval to twice the previousvalue,Figure 3.35 Segment 100 not retransmitted
rather than deriving it from the last EstimatedRTT  and DevRTT  (as described in Section 3.5.3)."
4486,"For
example, suppose TimeoutInterval  associated with the oldest not yet acknowledged segment is
.75 sec when the timer first expires."
4487,"TCP will then retransmit this segment and set the new expiration
time to 1.5 sec."
4488,"If the timer expires again 1.5 sec later, TCP will again retransmit this segment, nowsetting the expiration time to 3.0 sec."
4489,Thus the intervals grow exponentially after each retransmission.
4490,"However, whenever the timer is started after either of the two other events (that is, data received from
application above, and ACK received), the TimeoutInterval  is derived from the most recent values
of EstimatedRTT  and DevRTT ."
4491,This modification provides a limited form of congestion control.
4492,"(More comprehensive forms of TCPcongestion control will be studied in Section 3.7.) The timer expiration is most likely caused by
congestion in the network, that is, too many packets arriving at one (or more) router queues in the path
between the source and destination, causing packets to be dropped and/or long queuing delays."
4493,"Intimes of congestion, if the sources continue to retransmit packets persistently, the congestionFigure 3.36 A cumulative acknowledgment avoids retransmission of the first segment
may get worse."
4494,"Instead, TCP acts more politely, with each sender retransmitting after longer and longer
intervals."
4495,We will see that a similar idea is used by Ethernet when we study CSMA/CD in Chapter 6.
4496,"Fast Retransmit
One of the problems with timeout-triggered retransmissions is that the timeout period can be relatively
long."
4497,"When a segment is lost, this long timeout period forces the sender to delay resending the lostpacket, thereby increasing the end-to-end delay."
4498,"Fortunately, the sender can often detect packet losswell before the timeout event occurs by noting so-called duplicate ACKs. A duplicate ACK is an ACK
that reacknowledges a segment for which the sender has already received an earlier acknowledgment."
4499,"To understand the sender’s response to a duplicate ACK, we must look at why the receiver sends a
duplicate ACK in the first place."
4500,"Table 3.2 summarizes the TCP receiver’s ACK generation policy [RFC
5681] ."
4501,"When a TCP receiver receives
Table 3.2 TCP ACK Generation Recommendation [RFC 5681]
Event TCP Receiver ActionArrival of in-order segment with expected
sequence number."
4502,All data up to expectedsequence number already acknowledged.Delayed ACK.
4503,Wait up to 500 msec for arrival ofanother in-order segment.
4504,"If next in-order segmentdoes not arrive in this interval, send an ACK."
4505,Arrival of in-order segment with expectedsequence number.
4506,"One other in-ordersegment waiting for ACK transmission.One Immediately send single cumulative ACK,ACKing both in-order segments."
4507,Arrival of out-of-order segment with higher-than-expected sequence number.
4508,"Gapdetected.Immediately send duplicate ACK, indicatingsequence number of next expected byte (which isthe lower end of the gap)."
4509,"Arrival of segment that partially or completelyfills in gap in received data.Immediately send ACK, provided that segmentstarts at the lower end of gap."
4510,"a segment with a sequence number that is larger than the next, expected, in-order sequence number, itdetects a gap in the data stream—that is, a missing segment."
4511,This gap could be the result of lost orreordered segments within the network.
4512,"Since TCP does not use negative acknowledgments, thereceiver cannot send an explicit negative acknowledgment back to the sender."
4513,"Instead, it simplyreacknowledges (that is, generates a duplicate ACK for) the last in-order byte of data it has received."
4514,"(Note that Table 3.2 allows for the case that the receiver does not discard out-of-order segments.)
Because a sender often sends a large number of segments back to back, if one segment is lost, there
will likely be many back-to-back duplicate ACKs. If the TCP sender receives three duplicate ACKs forthe same data, it takes this as an indication that the segment following the segment that has beenACKed three times has been lost."
4515,"(In the homework problems, we consider the question of why thesender waits for three duplicate ACKs, rather than just a single duplicate ACK.) In the case that three
duplicate ACKs are received, the TCP sender performs a fast retransmit  [RFC 5681] , retransmitting
the missing segment before that segment’s timer expires."
4516,"This is shown in Figure 3.37, where the
second segment is lost, then retransmitted before its timer expires."
4517,"For TCP with fast retransmit, the
following code snippet replaces the ACK received event in Figure 3.33:
event: ACK received, with ACK field value of y
            if (y > SendBase) {
            SendBase=y            if (there are currently any not yet                       acknowledged segments)
               start timer               }
Figure 3.37 Fast retransmit: retransmitting the missing segment before the segment’s timer
expires
            else {/* a duplicate ACK for already ACKed
                   segment */               increment number of duplicate ACKs                   received for y               if (number of duplicate ACKS received                   for y==3)                   /* TCP fast retransmit */
                   resend segment with sequence number y
               }           break;We noted earlier that many subtle issues arise when a timeout/retransmit mechanism is implemented in
an actual protocol such as TCP."
4518,"The procedures above, which have evolved as a result of more than 20years of experience with TCP timers, should convince you that this is indeed the case!
Go-Back-N or Selective Repeat?"
4519,"Let us close our study of TCP’s error-recovery mechanism by considering the following question: Is TCP
a GBN or an SR protocol?"
4520,"Recall that TCP acknowledgments are cumulative and correctly received but
out-of-order segments are not individually ACKed by the receiver."
4521,"Consequently, as shown in Figure
3.33 (see also Figure 3.19), the TCP sender need only maintain the smallest sequence number of a
transmitted but unacknowledged byte ( SendBase ) and the sequence number of the next byte to be
sent (NextSeqNum )."
4522,"In this sense, TCP looks a lot like a GBN-style protocol."
4523,"But there are some
striking differences between TCP and Go-Back-N."
4524,"Many TCP implementations will buffer correctly
received but out-of-order segments [Stevens 1994] ."
4525,"Consider also what happens when the sender
sends a sequence of segments 1, 2, ."
4526,.
4527,"., N, and all of the segments arrive in order without error at the
receiver."
4528,"Further suppose that the acknowledgment for packet  gets lost, but the remaining 
acknowledgments arrive at the sender before their respective timeouts."
4529,"In this example, GBN would
retransmit not only packet n, but also all of the subsequent packets  TCP, on the other
hand, would retransmit at most one segment, namely, segment n."
4530,"Moreover, TCP would not even
retransmit segment n if the acknowledgment for segment  arrived before the timeout for segment n."
4531,"A proposed modification to TCP, the so-called selective acknowledgment  [RFC 2018] , allows a TCP
receiver to acknowledge out-of-order segments selectively rather than just cumulatively acknowledging
the last correctly received, in-order segment."
4532,When combined with selective retransmission—skippingthe retransmission of segments that have already been selectively acknowledged by the receiver—TCPlooks a lot like our generic SR protocol.
4533,"Thus, TCP’s error-recovery mechanism is probably best
categorized as a hybrid of GBN and SR protocols."
4534,"3.5.5 Flow Control
Recall that the hosts on each side of a TCP connection set aside a receive buffer for the connection."
4535,"When the TCP connection receives bytes that are correct and in sequence, it places the data in thereceive buffer."
4536,"The associated application process will read data from this buffer, but not necessarily atthe instant the data arrives."
4537,"Indeed, the receiving application may be busy with some other task andmay not even attempt to read the data until long after it has arrived."
4538,"If the application is relatively slow at
reading the data, the sender can very easily overflow the connection’s receive buffer by sending too
much data too quickly.n<N N−1
n+1,n+2,…,N."
4539,"n+1TCP provides a flow-control service to its applications to eliminate the possibility of the sender
overflowing the receiver’s buffer."
4540,Flow control is thus a speed-matching service—matching the rate atwhich the sender is sending against the rate at which the receiving application is reading.
4541,"As notedearlier, a TCP sender can also be throttled due to congestion within the IP network; this form of sender
control is referred to as congestion control , a topic we will explore in detail in Sections 3.6 and 3.7.
Even though the actions taken by flow and congestion control are similar (the throttling of the sender),
they are obviously taken for very different reasons."
4542,"Unfortunately, many authors use the termsinterchangeably, and the savvy reader would be wise to distinguish between them."
4543,Let’s now discusshow TCP provides its flow-control service.
4544,"In order to see the forest for the trees, we supposethroughout this section that the TCP implementation is such that the TCP receiver discards out-of-ordersegments."
4545,TCP provides flow control by having the sender  maintain a variable called the receive window .
4546,"Informally, the receive window is used to give the sender an idea of how much free buffer space is
available at the receiver."
4547,"Because TCP is full-duplex, the sender at each side of the connectionmaintains a distinct receive window."
4548,Let’s investigate the receive window in the context of a file transfer.Suppose that Host A is sending a large file to Host B over a TCP connection.
4549,"Host B allocates a receive
buffer to this connection; denote its size by RcvBuffer ."
4550,"From time to time, the application process in
Host B reads from the buffer."
4551,"Define the following variables:
LastByteRead : the number of the last byte in the data stream read from the buffer by the
application process in B
LastByteRcvd : the number of the last byte in the data stream that has arrived from the network
and has been placed in the receive buffer at B
Because TCP is not permitted to overflow the allocated buffer, we must have
The receive window, denoted rwnd  is set to the amount of spare room in the buffer:
Because the spare room changes with time, rwnd  is dynamic."
4552,"The variable rwnd  is illustrated in
Figure 3.38.LastByteRcvd −LastByteRead ≤RcvBuffer
rwnd=RcvBuffer −[LastByteRcvd −LastByteRead ]How does the connection use the variable rwnd  to provide the flow-control service?"
4553,"Host B tells Host A
how much spare room it has in the connection buffer by placing its current value of rwnd  in the receive
window field of every segment it sends to A."
4554,"Initially, Host B sets rwnd = RcvBuffer ."
4555,"Note that to
pull this off, Host B must keep track of several connection-specific variables."
4556,"Host A in turn keeps track of two variables, LastByteSent  and LastByteAcked , which have
obvious meanings."
4557,"Note that the difference between these two variables, LastByteSent –
LastByteAcked , is the amount of unacknowledged data that A has sent into the connection."
4558,"By
keeping the amount of unacknowledged data less than the value of rwnd , Host A is assured that it is
not
Figure 3.38 The receive window (rwnd)  and the receive buffer (RcvBuffer)
overflowing the receive buffer at Host B."
4559,"Thus, Host A makes sure throughout the connection’s life that
There is one minor technical problem with this scheme."
4560,"To see this, suppose Host B’s receive buffer
becomes full so that rwnd  = 0."
4561,"After advertising rwnd  = 0 to Host A, also suppose that B has nothing
to send to A."
4562,Now consider what happens.
4563,"As the application process at B empties the buffer, TCP doesnot send new segments with new rwnd  values to Host A; indeed, TCP sends a segment to Host A only
if it has data to send or if it has an acknowledgment to send."
4564,"Therefore, Host A is never informed that
some space has opened up in Host B’s receive buffer—Host A is blocked and can transmit no moredata! To solve this problem, the TCP specification requires Host A to continue to send segments withone data byte when B’s receive window is zero."
4565,These segments will be acknowledged by the receiver.
4566,"Eventually the buffer will begin to empty and the acknowledgments will contain a nonzero rwnd  value.LastByteSent −LastByteAcked ≤rwndThe online site at http://www.awl.com/kurose-ross  for this book provides an interactive Java applet that
illustrates the operation of the TCP receive window."
4567,"Having described TCP’s flow-control service, we briefly mention here that UDP does not provide flow
control and consequently, segments may be lost at the receiver due to buffer overflow."
4568,"For example,consider sending a series of UDP segments from a process on Host A to a process on Host B."
4569,"For a
typical UDP implementation, UDP will append the segments in a finite-sized buffer that “precedes” the
corresponding socket (that is, the door to the process)."
4570,The process reads one entire segment at a timefrom the buffer.
4571,"If the process does not read the segments fast enough from the buffer, the buffer willoverflow and segments will get dropped."
4572,"3.5.6 TCP Connection Management
In this subsection we take a closer look at how a TCP connection is established and torn down.Although this topic may not seem particularly thrilling, it is important because TCP connectionestablishment can significantly add to perceived delays (for example, when surfing the Web).Furthermore, many of the most common network attacks—including the incredibly popular SYN floodattack—exploit vulnerabilities in TCP connection management."
4573,"Let’s first take a look at how a TCP
connection is established."
4574,"Suppose a process running in one host (client) wants to initiate a connection
with another process in another host (server)."
4575,The client application process first informs the client TCPthat it wants to establish a connection to a process in the server.
4576,"The TCP in the client then proceeds toestablish a TCP connection with the TCP in the server in the following manner:
Step 1."
4577,The client-side TCP first sends a special TCP segment to the server-side TCP.
4578,"This special
segment contains no application-layer data."
4579,"But one of the flag bits in the segment’s header (see
Figure 3.29), the SYN bit, is set to 1."
4580,"For this reason, this special segment is referred to as a SYN
segment."
4581,"In addition, the client randomly chooses an initial sequence number ( client_isn ) and
puts this number in the sequence number field of the initial TCP SYN segment."
4582,This segment isencapsulated within an IP datagram and sent to the server.
4583,"There has been considerable interest in
properly randomizing the choice of the client_isn  in order to avoid certain security attacks
[CERT 2001–09] ."
4584,Step 2.
4585,"Once the IP datagram containing the TCP SYN segment arrives at the server host
(assuming it does arrive!), the server extracts the TCP SYN segment from the datagram, allocates
the TCP buffers and variables to the connection, and sends a connection-granted segment to the
client TCP."
4586,"(We’ll see in Chapter 8 that the allocation of these buffers and variables before
completing the third step of the three-way handshake makes TCP vulnerable to a denial-of-service
attack known as SYN flooding.) This connection-granted segment also contains no application-layerdata."
4587,"However, it does contain three important pieces of information in the segment header."
4588,"First,the SYN bit is set to 1."
4589,"Second, the acknowledgment field of the TCP segment header is set toclient_isn+1 ."
4590,"Finally, the server chooses its own initial sequence number ( server_isn ) and
puts this value in the sequence number field of the TCP segment header."
4591,"This connection-granted
segment is saying, in effect, “I received your SYN packet to start a connection with your initial
sequence number, client_isn ."
4592,I agree to establish this connection.
4593,"My own initial sequence
number is server_isn .” The connection-granted segment is referred to as a SYNACK segment ."
4594,Step 3.
4595,"Upon receiving the SYNACK segment, the client also allocates buffers and variables to the
connection."
4596,"The client host then sends the server yet another segment; this last segment
acknowledges the server’s connection-granted segment (the client does so by putting the value
server_isn+1  in the acknowledgment field of the TCP segment header)."
4597,"The SYN bit is set to
zero, since the connection is established."
4598,This third stage of the three-way handshake may carryclient-to-server data in the segment payload.
4599,"Once these three steps have been completed, the client and server hosts can send segmentscontaining data to each other."
4600,"In each of these future segments, the SYN bit will be set to zero."
4601,"Notethat in order to establish the connection, three packets are sent between the two hosts, as illustrated in
Figure 3.39."
4602,"For this reason, this connection-establishment procedure is often referred to as a three-
way handshake."
4603,"Several aspects of the TCP three-way handshake are explored in the homework
problems (Why are initial sequence numbers needed?"
4604,"Why is a three-way handshake, as opposed to atwo-way handshake, needed?)."
4605,It’s interesting to note that a rock climber and a belayer (who isstationed below the rock climber and whose job it is to handle the climber’s safety rope) use a three-way-handshake communication protocol that is identical to TCP’s to ensure that both sides are readybefore the climber begins ascent.
4606,"All good things must come to an end, and the same is true with a TCP connection."
4607,"Either of the two
processes participating in a TCP connection can end the connection."
4608,"When a connection ends, the
“resources” (that is, the buffers and variables)Figure 3.39 TCP three-way handshake: segment exchange
Figure 3.40 Closing a TCP connection
in the hosts are deallocated."
4609,"As an example, suppose the client decides to close the connection, as
shown in Figure 3.40."
4610,The client application process issues a close command.
4611,"This causes the client
TCP to send a special TCP segment to the server process."
4612,"This special segment has a flag bit in thesegment’s header, the FIN bit (see Figure 3.29), set to 1."
4613,"When the server receives this segment, it
sends the client an acknowledgment segment in return."
4614,"The server then sends its own shutdown
segment, which has the FIN bit set to 1."
4615,"Finally, the client acknowledges the server’s shutdownsegment."
4616,"At this point, all the resources in the two hosts are now deallocated."
4617,"During the life of a TCP connection, the TCP protocol running in each host makes transitions through
various TCP states ."
4618,"Figure 3.41 illustrates a typical sequence of TCP states that are visited by the
client TCP."
4619,The client TCP begins in the CLOSED state.
4620,"The application on the client side initiates a
new TCP connection (by creating a Socket object in our Java examples as in the Python examples from
Chapter 2)."
4621,This causes TCP in the client to send a SYN segment to TCP in the server.
4622,"After having
sent the SYN segment, the client TCP enters the SYN_SENT state."
4623,"While in the SYN_SENT state, the
client TCP waits for a segment from the server TCP that includes an acknowledgment for the client’sprevious segment and
Figure 3.41 A typical sequence of TCP states visited by a client TCPhas the SYN bit set to 1."
4624,"Having received such a segment, the client TCP enters the ESTABLISHED
state."
4625,"While in the ESTABLISHED state, the TCP client can send and receive TCP segments containing
payload (that is, application-generated) data."
4626,Suppose that the client application decides it wants to close the connection.
4627,"(Note that the server could
also choose to close the connection.) This causes the client TCP to send a TCP segment with the FIN
bit set to 1 and to enter the FIN_WAIT_1 state."
4628,"While in the FIN_WAIT_1 state, the client TCP waits for
a TCP segment from the server with an acknowledgment."
4629,"When it receives this segment, the client TCPenters the FIN_WAIT_2 state."
4630,"While in the FIN_WAIT_2 state, the client waits for another segment fromthe server with the FIN bit set to 1; after receiving this segment, the client TCP acknowledges theserver’s segment and enters the TIME_WAIT state."
4631,The TIME_WAIT state lets the TCP client resendthe final acknowledgment in case the ACK is lost.
4632,"The time spent in the TIME_WAIT state isimplementation-dependent, but typical values are 30 seconds, 1 minute, and 2 minutes."
4633,"After the wait,the connection formally closes and all resources on the client side (including port numbers) are
released."
4634,"Figure 3.42 illustrates the series of states typically visited by the server-side TCP, assuming the client
begins connection teardown."
4635,The transitions are self-explanatory.
4636,"In these two state-transition diagrams,
we have only shown how a TCP connection is normally established and shut down."
4637,"We have notdescribed what happens in certain pathological scenarios, for example, when both sides of a connectionwant to initiate or shut down at the same time."
4638,"If you are interested in learning about
Figure 3.42 A typical sequence of TCP states visited by a server-side TCPthis and other advanced issues concerning TCP, you are encouraged to see Stevens’ comprehensive
book [Stevens 1994] ."
4639,"Our discussion above has assumed that both the client and server are prepared to communicate, i.e.,
that the server is listening on the port to which the client sends its SYN segment."
4640,"Let’s consider what
happens when a host receives a TCP segment whose port numbers or source IP address do not match
with any of the ongoing sockets in the host."
4641,"For example, suppose a host receives a TCP SYN packetwith destination port 80, but the host is not accepting connections on port 80 (that is, it is not running aWeb server on port 80)."
4642,Then the host will send a special reset segment to the source.
4643,"This TCP
segment has the RST flag bit (see Section 3.5.2) set to 1."
4644,"Thus, when a host sends a reset segment, it
is telling the source “I don’t have a socket for that segment."
4645,"Please do not resend the segment.” When a
host receives a UDP packet whose destination port number doesn’t match with an ongoing UDP socket,
the host sends a special ICMP datagram, as discussed in Chapter 5."
4646,"Now that we have a good understanding of TCP connection management, let’s revisit the nmap port-
scanning tool and examine more closely how it works."
4647,"To explore a specific TCP port, say port 6789, ona target host, nmap will send a TCP SYN segment with destination port 6789 to that host."
4648,"There arethree possible outcomes:
The source host receives a TCP SYNACK segment from the target host."
4649,"Since this means that
an application is running with TCP port 6789 on the target post, nmap returns “open.”
FOCUS ON SECURITY
The Syn Flood Attack
We’ve seen in our discussion of TCP’s three-way handshake that a server allocates and
initializes connection variables and buffers in response to a received SYN."
4650,"The server then
sends a SYNACK in response, and awaits an ACK segment from the client."
4651,"If the client doesnot send an ACK to complete the third step of this 3-way handshake, eventually (often aftera minute or more) the server will terminate the half-open connection and reclaim theallocated resources."
4652,"This TCP connection management protocol sets the stage for a classic Denial of Service
(DoS) attack known as the SYN flood attack."
4653,"In this attack, the attacker(s) send a largenumber of TCP SYN segments, without completing the third handshake step."
4654,"With this
deluge of SYN segments, the server’s connection resources become exhausted as they are
allocated (but never used!) for half-open connections; legitimate clients are then denied
service."
4655,"Such SYN flooding attacks were among the first documented DoS attacks [CERT
SYN 1996] ."
4656,"Fortunately, an effective defense known as SYN cookies  [RFC 4987]  are now
deployed in most major operating systems."
4657,"SYN cookies work as follows:
When the server receives a SYN segment, it does not know if the segment is comingfrom a legitimate user or is part of a SYN flood attack."
4658,"So, instead of creating a half-open
TCP connection for this SYN, the server creates an initial TCP sequence number that is
a complicated function (hash function) of source and destination IP addresses and portnumbers of the SYN segment, as well as a secret number only known to the server."
4659,"Thiscarefully crafted initial sequence number is the so-called “cookie.” The server then sends
the client a SYNACK packet with this special initial sequence number."
4660,"Importantly, the
server does not remember the cookie or any other state information corresponding to the
SYN."
4661,A legitimate client will return an ACK segment.
4662,"When the server receives this ACK, it
must verify that the ACK corresponds to some SYN sent earlier."
4663,"But how is this done if
the server maintains no memory about SYN segments?"
4664,"As you may have guessed, it isdone with the cookie."
4665,"Recall that for a legitimate ACK, the value in the acknowledgment
field is equal to the initial sequence number in the SYNACK (the cookie value in this
case) plus one (see Figure 3.39)."
4666,"The server can then run the same hash function using
the source and destination IP address and port numbers in the SYNACK (which are the
same as in the original SYN) and the secret number."
4667,"If the result of the function plus oneis the same as the acknowledgment (cookie) value in the client’s SYNACK, the serverconcludes that the ACK corresponds to an earlier SYN segment and is hence valid."
4668,Theserver then creates a fully open connection along with a socket.
4669,"On the other hand, if the client does not return an ACK segment, then the original SYN
has done no harm at the server, since the server hasn’t yet allocated any resources in
response to the original bogus SYN."
4670,The source host receives a TCP RST segment from the target host.
4671,"This means that the SYN
segment reached the target host, but the target host is not running an application with TCP port
6789."
4672,But the attacker at least knows that the segments destined to the host at port 6789 are notblocked by any firewall on the path between source and target hosts.
4673,"(Firewalls are discussed in
Chapter 8.)
The source receives nothing."
4674," This likely means that the SYN segment was blocked by an
intervening firewall and never reached the target host."
4675,"Nmap is a powerful tool that can “case the joint” not only for open TCP ports, but also for open UDP
ports, for firewalls and their configurations, and even for the versions of applications and operating
systems."
4676,Most of this is done by manipulating TCP connection-management segments [Skoudis 2006].
4677,You can download nmap from www.nmap.org .
4678,This completes our introduction to error control and flow control in TCP.
4679,"In Section 3.7 we’ll return to
TCP and look at TCP congestion control in some depth."
4680,"Before doing so, however, we first step back
and examine congestion-control issues in a broader context.3.6 Principles of Congestion Control
In the previous sections, we examined both the general principles and specific TCP mechanisms used
to provide for a reliable data transfer service in the face of packet loss."
4681,"We mentioned earlier that, inpractice, such loss typically results from the overflowing of router buffers as the network becomescongested."
4682,"Packet retransmission thus treats a symptom of network congestion (the loss of a specifictransport-layer segment) but does not treat the cause of network congestion—too many sources
attempting to send data at too high a rate."
4683,"To treat the cause of network congestion, mechanisms are
needed to throttle senders in the face of network congestion."
4684,"In this section, we consider the problem of congestion control in a general context, seeking to
understand why congestion is a bad thing, how network congestion is manifested in the performancereceived by upper-layer applications, and various approaches that can be taken to avoid, or react to,network congestion."
4685,"This more general study of congestion control is appropriate since, as with reliabledata transfer, it is high on our “top-ten” list of fundamentally important problems in networking."
4686,"The
following section contains a detailed study of TCP’s congestion-control algorithm."
4687,"3.6.1 The Causes and the Costs of Congestion
Let’s begin our general study of congestion control by examining three increasingly complex scenarios
in which congestion occurs."
4688,"In each case, we’ll look at why congestion occurs in the first place and at
the cost of congestion (in terms of resources not fully utilized and poor performance received by the endsystems)."
4689,"We’ll not (yet) focus on how to react to, or avoid, congestion but rather focus on the simplerissue of understanding what happens as hosts increase their transmission rate and the network
becomes congested."
4690,"Scenario 1: Two Senders, a Router with Infinite Buffers
We begin by considering perhaps the simplest congestion scenario possible: Two hosts (A and B) each
have a connection that shares a single hop between source and destination, as shown in Figure 3.43."
4691,"Let’s assume that the application in Host A is sending data into the connection (for example, passingdata to the transport-level protocol via a socket) at an average rate of λ bytes/sec."
4692,"These data are
original in the sense that each unit of data is sent into the socket only once."
4693,"The underlying transport-
level protocol is a simple one."
4694,"Data is encapsulated and sent; no error recovery (for example,
inretransmission), flow control, or congestion control is performed."
4695,"Ignoring the additional overhead due to
adding transport- and lower-layer header information, the rate at which Host A offers traffic to the router
in this first scenario is thus λ  bytes/sec."
4696,"Host B operates in a similar manner, and we assume for
simplicity that it too is sending at a rate of λ  bytes/sec."
4697,"Packets from Hosts A and B pass through a
router and over a shared outgoing link of capacity R."
4698,"The router has buffers that allow it to store
incoming packets when the packet-arrival rate exceeds the outgoing link’s capacity."
4699,"In this first scenario,
we assume that the router has an infinite amount of buffer space."
4700,Figure 3.44 plots the performance of Host A’s connection under this first scenario.
4701,"The left graph plots
the per-connection throughput  (number of bytes per
Figure 3.43 Congestion scenario 1: Two connections sharing a single hop with infinite buffers
Figure 3.44 Congestion scenario 1: Throughput and delay as a function of host sending ratein
insecond at the receiver) as a function of the connection-sending rate."
4702,"For a sending rate between 0 and
R/2, the throughput at the receiver equals the sender’s sending rate—everything sent by the sender is
received at the receiver with a finite delay."
4703,"When the sending rate is above R/2, however, the throughput
is only R/2."
4704,"This upper limit on throughput is a consequence of the sharing of link capacity between two
connections."
4705,"The link simply cannot deliver packets to a receiver at a steady-state rate that exceeds
R/2."
4706,"No matter how high Hosts A and B set their sending rates, they will each never see a throughput
higher than R/2."
4707,"Achieving a per-connection throughput of R/2 might actually appear to be a good thing, because the link
is fully utilized in delivering packets to their destinations."
4708,"The right-hand graph in Figure 3.44, however,
shows the consequence of operating near link capacity."
4709,"As the sending rate approaches R/2 (from the
left), the average delay becomes larger and larger."
4710,"When the sending rate exceeds R/2, the average
number of queued packets in the router is unbounded, and the average delay between source and
destination becomes infinite (assuming that the connections operate at these sending rates for an
infinite period of time and there is an infinite amount of buffering available)."
4711,"Thus, while operating at an
aggregate throughput of near R may be ideal from a throughput standpoint, it is far from ideal from a
delay standpoint."
4712,"Even in this (extremely) idealized scenario, we’ve already found one cost of a
congested network—large queuing delays are experienced as the packet-arrival rate nears the link
capacity."
4713,"Scenario 2: Two Senders and a Router with Finite Buffers
Let’s now slightly modify scenario 1 in the following two ways (see Figure 3.45)."
4714,"First, the amount of
router buffering is assumed to be finite."
4715,"A consequence of this real-world assumption is that packets will
be dropped when arriving to an already-full buffer."
4716,"Second, we assume that each connection is reliable.If a packet containingFigure 3.45 Scenario 2: Two hosts (with retransmissions) and a router with finite buffers
a transport-level segment is dropped at the router, the sender will eventually retransmit it."
4717,"Because
packets can be retransmitted, we must now be more careful with our use of the term sending rate ."
4718,"Specifically, let us again denote the rate at which the application sends original data into the socket byλ bytes/sec."
4719,"The rate at which the transport layer sends segments (containing original data and
retransmitted data) into the network will be denoted  bytes/sec."
4720," is sometimes referred to as the
offered load to the network."
4721,"The performance realized under scenario 2 will now depend strongly on how retransmission is
performed."
4722,"First, consider the unrealistic case that Host A is able to somehow (magically!) determinewhether or not a buffer is free in the router and thus sends a packet only when a buffer is free."
4723,"In this
case, no loss would occur, λ would be equal to , and the throughput of the connection would be
equal to λ ."
4724,This case is shown in Figure 3.46(a).
4725,"From a throughput standpoint, performance is ideal—
everything that is sent is received."
4726,"Note that the average host sending rate cannot exceed R/2 under
this scenario, since packet loss is assumed never to occur."
4727,"Consider next the slightly more realistic case that the sender retransmits only when a packet is known
for certain to be lost."
4728,"(Again, this assumption is a bit of a stretch."
4729,"However, it is possible that the sendinghost might set its timeout large enough to be virtually assured that a packet that has not beenacknowledged has been lost.) In this case, the performance might look something like that shown in
Figure 3.46(b)."
4730,"To appreciate what is happening here, consider the case that the offered load,  (the
rate of original data transmission plus retransmissions), equals R/2."
4731,"According to Figure 3.46(b), at this
value of the offered load, the rate at which datain
λ′in λ′in
in λ′in
in
λ′inFigure 3.46 Scenario 2 performance with finite buffers
are delivered to the receiver application is R/3."
4732,"Thus, out of the 0.5 R units of data transmitted, 0.333R
bytes/sec (on average) are original data and 0.166 R bytes/sec (on average) are retransmitted data."
4733,"We
see here another cost of a congested network—the sender must perform retransmissions in order to
compensate for dropped (lost) packets due to buffer overflow."
4734,"Finally, let us consider the case that the sender may time out prematurely and retransmit a packet that
has been delayed in the queue but not yet lost."
4735,"In this case, both the original data packet and theretransmission may reach the receiver."
4736,"Of course, the receiver needs but one copy of this packet andwill discard the retransmission."
4737,"In this case, the work done by the router in forwarding the retransmittedcopy of the original packet was wasted, as the receiver will have already received the original copy of
this packet."
4738,"The router would have better used the link transmission capacity to send a different packet
instead."
4739,"Here then is yet another cost of a congested network—unneeded retransmissions by the
sender in the face of large delays may cause a router to use its link bandwidth to forward unneededcopies of a packet."
4740,"Figure 3.46 (c) shows the throughput versus offered load when each packet is
assumed to be forwarded (on average) twice by the router."
4741,"Since each packet is forwarded twice, the
throughput will have an asymptotic value of R/4 as the offered load approaches R/2."
4742,"Scenario 3: Four Senders, Routers with Finite Buffers, and Multihop Paths
In our final congestion scenario, four hosts transmit packets, each over overlapping two-hop paths, as
shown in Figure 3.47."
4743,"We again assume that each host uses a timeout/retransmission mechanism to
implement a reliable data transfer service, that all hosts have the same value of λ, and that all router
links have capacity R bytes/sec."
4744,"inFigure 3.47 Four senders, routers with finite buffers, and multihop paths
Let’s consider the connection from Host A to Host C, passing through routers R1 and R2."
4745,"The A–C
connection shares router R1 with the D–B connection and shares router R2 with the B–D connection."
4746,"For extremely small values of λ, buffer overflows are rare (as in congestion scenarios 1 and 2), and the
throughput approximately equals the offered load."
4747,"For slightly larger values of λ, the corresponding
throughput is also larger, since more original data is being transmitted into the network and delivered to
the destination, and overflows are still rare."
4748,"Thus, for small values of λ, an increase in λ results in an
increase in λ."
4749,"Having considered the case of extremely low traffic, let’s next examine the case that λ (and hence )
is extremely large."
4750,Consider router R2.
4751,"The A–C traffic arriving to router R2 (which arrives at R2 after
being forwarded from R1) can have an arrival rate at R2 that is at most R, the capacity of the link from
R1 to R2, regardless of the value of λ."
4752,"If  is extremely large for all connections (including thein
in
in in
out
in λ′in
inλ′inFigure 3.48 Scenario 3 performance with finite buffers and multihop paths
B–D connection), then the arrival rate of B–D traffic at R2 can be much larger than that of the A–C
traffic."
4753,"Because the A–C and B–D traffic must compete at router R2 for the limited amount of buffer
space, the amount of A–C traffic that successfully gets through R2 (that is, is not lost due to bufferoverflow) becomes smaller and smaller as the offered load from B–D gets larger and larger."
4754,"In the limit,as the offered load approaches infinity, an empty buffer at R2 is immediately filled by a B–D packet, and
the throughput of the A–C connection at R2 goes to zero."
4755,"This, in turn, implies that the A–C end-to-end
throughput goes to zero  in the limit of heavy traffic."
4756,"These considerations give rise to the offered load
versus throughput tradeoff shown in Figure 3.48."
4757,"The reason for the eventual decrease in throughput with increasing offered load is evident when one
considers the amount of wasted work done by the network."
4758,"In the high-traffic scenario outlined above,
whenever a packet is dropped at a second-hop router, the work done by the first-hop router inforwarding a packet to the second-hop router ends up being “wasted.” The network would have beenequally well off (more accurately, equally bad off) if the first router had simply discarded that packet andremained idle."
4759,"More to the point, the transmission capacity used at the first router to forward the packetto the second router could have been much more profitably used to transmit a different packet."
4760,"(Forexample, when selecting a packet for transmission, it might be better for a router to give priority to
packets that have already traversed some number of upstream routers.) So here we see yet another
cost of dropping a packet due to congestion—when a packet is dropped along a path, the transmission
capacity that was used at each of the upstream links to forward that packet to the point at which it is
dropped ends up having been wasted."
4761,"3.6.2 Approaches to Congestion Control
In Section 3.7, we’ll examine TCP’s specific approach to congestion control in great detail."
4762,"Here, we
identify the two broad approaches to congestion control that are taken in practice and discuss specificnetwork architectures and congestion-control protocols embodying these approaches."
4763,"At the highest level, we can distinguish among congestion-control approaches by whether the network
layer provides explicit assistance to the transport layer for congestion-control purposes:
End-to-end congestion control."
4764," In an end-to-end approach to congestion control, the network
layer provides no explicit support to the transport layer for congestion-control purposes."
4765,"Even thepresence of network congestion must be inferred by the end systems based only on observed
network behavior (for example, packet loss and delay)."
4766,"We’ll see shortly in Section 3.7.1 that TCP
takes this end-to-end approach toward congestion control, since the IP layer is not required to
provide feedback to hosts regarding network congestion."
4767,"TCP segment loss (as indicated by atimeout or the receipt of three duplicate acknowledgments) is taken as an indication of networkcongestion, and TCP decreases its window size accordingly."
4768,"We’ll also see a more recent proposalfor TCP congestion control that uses increasing round-trip segment delay as an indicator ofincreased network congestion
Network-assisted congestion control."
4769," With network-assisted congestion control, routers provide
explicit feedback to the sender and/or receiver regarding the congestion state of the network."
4770,"Thisfeedback may be as simple as a single bit indicating congestion at a link – an approach taken in the
early IBM SNA [Schwartz 1982], DEC DECnet [Jain 1989; Ramakrishnan 1990]  architectures, and
ATM [Black 1995]  network architectures."
4771,More sophisticated feedback is also possible.
4772,"For
example, in ATM Available Bite Rate (ABR)  congestion control, a router informs the sender of the
maximum host sending rate it (the router) can support on an outgoing link."
4773,"As noted above, the
Internet-default versions of IP and TCP adopt an end-to-end approach towards congestion control."
4774,"We’ll see, however, in Section 3.7.2 that, more recently, IP and TCP may also optionally implement
network-assisted congestion control."
4775,"For network-assisted congestion control, congestion information is typically fed back from the network tothe sender in one of two ways, as shown in Figure 3.49."
4776,"Direct feedback may be sent from a network
router to the sender."
4777,"This form of notification typically takes the form of a choke packet (essentially
saying, “I’m congested!”)."
4778,The second and more common form of notification occurs when a routermarks/updates a field in a packet flowing from sender to receiver to indicate congestion.
4779,"Upon receipt ofa marked packet, the receiver then notifies the sender of the congestion indication."
4780,"This latter form ofnotification takes a full round-trip time.Figure 3.49 Two feedback pathways for network-indicated congestion information3.7 TCP Congestion Control
In this section we return to our study of TCP."
4781,"As we learned in Section 3.5, TCP provides a reliable
transport service between two processes running on different hosts."
4782,"Another key component of TCP is
its congestion-control mechanism."
4783,"As indicated in the previous section, TCP must use end-to-endcongestion control rather than network-assisted congestion control, since the IP layer provides no
explicit feedback to the end systems regarding network congestion."
4784,"The approach taken by TCP is to have each sender limit the rate at which it sends traffic into its
connection as a function of perceived network congestion."
4785,"If a TCP sender perceives that there is littlecongestion on the path between itself and the destination, then the TCP sender increases its send rate;if the sender perceives that there is congestion along the path, then the sender reduces its send rate.But this approach raises three questions."
4786,"First, how does a TCP sender limit the rate at which it sendstraffic into its connection?"
4787,"Second, how does a TCP sender perceive that there is congestion on thepath between itself and the destination?"
4788,"And third, what algorithm should the sender use to change its
send rate as a function of perceived end-to-end congestion?"
4789,Let’s first examine how a TCP sender limits the rate at which it sends traffic into its connection.
4790,"In
Section 3.5 we saw that each side of a TCP connection consists of a receive buffer, a send buffer, and
several variables ( LastByteRead , rwnd , and so on)."
4791,"The TCP congestion-control mechanism
operating at the sender keeps track of an additional variable, the congestion window ."
4792,"The congestion
window, denoted cwnd , imposes a constraint on the rate at which a TCP sender can send traffic into
the network."
4793,"Specifically, the amount of unacknowledged data at a sender may not exceed the minimum
of cwnd  and rwnd , that is:
In order to focus on congestion control (as opposed to flow control), let us henceforth assume that the
TCP receive buffer is so large that the receive-window constraint can be ignored; thus, the amount of
unacknowledged data at the sender is solely limited by cwnd ."
4794,"We will also assume that the sender
always has data to send, i.e., that all segments in the congestion window are sent."
4795,"The constraint above limits the amount of unacknowledged data at the sender and therefore indirectly
limits the sender’s send rate."
4796,"To see this, consider a connection for which loss and packet transmissiondelays are negligible."
4797,"Then, roughly, at the beginning of every RTT, the constraint permits the sender toLastByteSent −LastByteAcked ≤min{cwnd, rwnd}send cwnd  bytes of data into the connection; at the end of the RTT the sender receives
acknowledgments for the data."
4798,Thus the sender’s send rate is roughly cwnd/RTT bytes/sec.
4799,"By
adjusting the value of cwnd , the sender can therefore adjust the rate at which it sends data into its
connection."
4800,"Let’s next consider how a TCP sender perceives that there is congestion on the path between itself and
the destination."
4801,"Let us define a “loss event” at a TCP sender as the occurrence of either a timeout or the
receipt of three duplicate ACKs from the receiver."
4802,"(Recall our discussion in Section 3.5.4 of the timeout
event in Figure 3.33 and the subsequent modification to include fast retransmit on receipt of three
duplicate ACKs.) When there is excessive congestion, then one (or more) router buffers along the path
overflows, causing a datagram (containing a TCP segment) to be dropped."
4803,"The dropped datagram, inturn, results in a loss event at the sender—either a timeout or the receipt of three duplicate ACKs—which is taken by the sender to be an indication of congestion on the sender-to-receiver path."
4804,"Having considered how congestion is detected, let’s next consider the more optimistic case when the
network is congestion-free, that is, when a loss event doesn’t occur."
4805,"In this case, acknowledgments for
previously unacknowledged segments will be received at the TCP sender."
4806,"As we’ll see, TCP will take
the arrival of these acknowledgments as an indication that all is well—that segments being transmittedinto the network are being successfully delivered to the destination—and will use acknowledgments toincrease its congestion window size (and hence its transmission rate)."
4807,"Note that if acknowledgmentsarrive at a relatively slow rate (e.g., if the end-end path has high delay or contains a low-bandwidth link),then the congestion window will be increased at a relatively slow rate."
4808,"On the other hand, ifacknowledgments arrive at a high rate, then the congestion window will be increased more quickly.Because TCP uses acknowledgments to trigger (or clock) its increase in congestion window size, TCPis said to be self-clocking."
4809,"Given the mechanism  of adjusting the value of cwnd  to control the sending rate, the critical question
remains: How should a TCP sender determine the rate at which it should send?"
4810,"If TCP senders
collectively send too fast, they can congest the network, leading to the type of congestion collapse that
we saw in Figure 3.48."
4811,"Indeed, the version of TCP that we’ll study shortly was developed in response to
observed Internet congestion collapse [Jacobson 1988] under earlier versions of TCP."
4812,"However, if TCP
senders are too cautious and send too slowly, they could under utilize the bandwidth in the network; thatis, the TCP senders could send at a higher rate without congesting the network."
4813,How then do the TCPsenders determine their sending rates such that they don’t congest the network but at the same timemake use of all the available bandwidth?
4814,"Are TCP senders explicitly coordinated, or is there adistributed approach in which the TCP senders can set their sending rates based only on localinformation?"
4815,"TCP answers these questions using the following guiding principles:
A lost segment implies congestion, and hence, the TCP sender’s rate should be decreasedwhen a segment is lost."
4816," Recall from our discussion in Section 3.5.4, that a timeout event or thereceipt of four acknowledgments for a given segment (one original ACK and then three duplicate
ACKs) is interpreted as an implicit “loss event” indication of the segment following the quadruply
ACKed segment, triggering a retransmission of the lost segment."
4817,"From a congestion-controlstandpoint, the question is how the TCP sender should decrease its congestion window size, andhence its sending rate, in response to this inferred loss event."
4818,"An acknowledged segment indicates that the network is delivering the sender’s segments tothe receiver, and hence, the sender’s rate can be increased when an ACK arrives for apreviously unacknowledged segment."
4819," The arrival of acknowledgments is taken as an implicit
indication that all is well—segments are being successfully delivered from sender to receiver, and
the network is thus not congested."
4820,The congestion window size can thus be increased.
4821,Bandwidth probing.
4822," Given ACKs indicating a congestion-free source-to-destination path and loss
events indicating a congested path, TCP’s strategy for adjusting its transmission rate is to increase
its rate in response to arriving ACKs until a loss event occurs, at which point, the transmission rate isdecreased."
4823,"The TCP sender thus increases its transmission rate to probe for the rate that at which
congestion onset begins, backs off from that rate, and then to begins probing again to see if the
congestion onset rate has changed."
4824,"The TCP sender’s behavior is perhaps analogous to the childwho requests (and gets) more and more goodies until finally he/she is finally told “No!”, backs off abit, but then begins making requests again shortly afterwards."
4825,Note that there is no explicit signalingof congestion state by the network—ACKs and loss events serve as implicit signals—and that eachTCP sender acts on local information asynchronously from other TCP senders.
4826,"Given this overview of TCP congestion control, we’re now in a position to consider the details of the
celebrated TCP congestion-control algorithm , which was first described in [Jacobson 1988] and is
standardized in [RFC 5681] ."
4827,"The algorithm has three major components: (1) slow start, (2) congestion
avoidance, and (3) fast recovery."
4828,"Slow start and congestion avoidance are mandatory components ofTCP, differing in how they increase the size of cwnd  in response to received ACKs. We’ll see shortly
that slow start increases the size of cwnd  more rapidly (despite its name!) than congestion avoidance."
4829,"Fast recovery is recommended, but not required, for TCP senders."
4830,"Slow StartWhen a TCP connection begins, the value of cwnd  is typically initialized to a small value of 1 MSS
[RFC 3390] , resulting in an initial sending rate of roughly MSS/RTT."
4831,"For example, if MSS = 500 bytes
and RTT = 200 msec, the resulting initial sending rate is only about 20 kbps."
4832,"Since the available
bandwidth to the TCP sender may be much larger than MSS/RTT, the TCP sender would like to find the
amount of available bandwidth quickly."
4833,"Thus, in the slow-start  state, the value of cwnd  begins at 1
MSS and increases by 1 MSS every time a transmitted segment is first acknowledged."
4834,"In the example ofFigure 3.50, TCP sends the first segment into the networkFigure 3.50 TCP slow start
and waits for an acknowledgment."
4835,"When this acknowledgment arrives, the TCP sender increases the
congestion window by one MSS and sends out two maximum-sized segments."
4836,"These segments are
then acknowledged, with the sender increasing the congestion window by 1 MSS for each of theacknowledged segments, giving a congestion window of 4 MSS, and so on."
4837,This process results in adoubling of the sending rate every RTT.
4838,"Thus, the TCP send rate starts slow but grows exponentiallyduring the slow start phase."
4839,But when should this exponential growth end?
4840,Slow start provides several answers to this question.
4841,"First, if there is a loss event (i.e., congestion) indicated by a timeout, the TCP sender sets the value of
cwnd  to 1 and begins the slow start process anew."
4842,"It also sets the value of a second state variable,
ssthresh  (shorthand for “slow start threshold”) to cwnd/2 —half of the value of the congestion
window value when congestion was detected."
4843,"The second way in which slow start may end is directly
tied to the value of ssthresh ."
4844,"Since ssthresh  is half the value of cwnd  when congestion was last
detected, it might be a bit reckless to keep doubling cwnd  when it reaches or surpasses the value of
ssthresh ."
4845,"Thus, when the value of cwnd  equals ssthresh , slow start ends and TCP transitions
into congestion avoidance mode."
4846,"As we’ll see, TCP increases cwnd  more cautiously when in
congestion-avoidance mode."
4847,"The final way in which slow start can end is if three duplicate ACKs aredetected, in which case TCP performs a fast retransmit (see Section 3.5.4) and enters the fast recovery
state, as discussed below."
4848,"TCP’s behavior in slow start is summarized in the FSM description of TCP
congestion control in Figure 3.51."
4849,"The slow-start algorithm traces it roots to [Jacobson 1988]; an
approach similar to slow start was also proposed independently in [Jain 1986]."
4850,"Congestion Avoidance
On entry to the congestion-avoidance state, the value of cwnd  is approximately half its value when
congestion was last encountered—congestion could be just around the corner! Thus, rather than
doubling the value of cwnd  every RTT, TCP adopts a more conservative approach and increases the
value of cwnd  by just a single MSS every RTT [RFC 5681] ."
4851,This can be accomplished in several ways.
4852,"A common approach is for the TCP sender to increase cwnd  by MSS bytes (MSS/ cwnd ) whenever a
new acknowledgment arrives."
4853,"For example, if MSS is 1,460 bytes and cwnd  is 14,600 bytes, then 10
segments are being sent within an RTT."
4854,"Each arriving ACK (assuming one ACK per segment) increases
the congestion window size by 1/10 MSS, and thus, the value of the congestion window will haveincreased by one MSS after ACKs when all 10 segments have been received."
4855,But when should congestion avoidance’s linear increase (of 1 MSS per RTT) end?
4856,"TCP’s congestion-
avoidance algorithm behaves the same when a timeout occurs."
4857,"As in the case of slow start: The value
of cwnd  is set to 1 MSS, and the value of ssthresh  is updated to half the value of cwnd  when the
loss event occurred."
4858,"Recall, however, that a loss event also can be triggered by a triple duplicate ACK
event.Figure 3.51 FSM description of TCP congestion control
In this case, the network is continuing to deliver segments from sender to receiver (as indicated by the
receipt of duplicate ACKs)."
4859,"So TCP’s behavior to this type of loss event should be less drastic than with
a timeout-indicated loss: TCP halves the value of cwnd  (adding in 3 MSS for good measure to account
for the triple duplicate ACKs received) and records the value of ssthresh  to be half the value of cwnd
when the triple duplicate ACKs were received."
4860,The fast-recovery state is then entered.
4861,"Fast Recovery
In fast recovery, the value of cwnd  is increased by 1 MSS for every duplicate ACK received for the
missing segment that caused TCP to enter the fast-recovery state."
4862,"Eventually, when an ACK arrives for
the missing segment, TCP enters the
Examining the behavior of TCP
PRINCIPLES IN PRACTICE
TCP SPLITTING: OPTIMIZING THE PERFORMANCE OF CLOUD SERVICES
For cloud services such as search, e-mail, and social networks, it is desirable to provide a high-
level of responsiveness, ideally giving users the illusion that the services are running within theirown end systems (including their smartphones)."
4863,"This can be a major challenge, as users areoften located far away from the data centers responsible for serving the dynamic contentassociated with the cloud services."
4864,"Indeed, if the end system is far from a data center, then the
RTT will be large, potentially leading to poor response time performance due to TCP slow start."
4865,"As a case study, consider the delay in receiving a response for a search query."
4866,"Typically, the
server requires three TCP windows during slow start to deliver the response [Pathak 2010] ."
4867,"Thus the time from when an end system initiates a TCP connection until the time when it
receives the last packet of the response is roughly  (one RTT to set up the TCP
connection plus three RTTs for the three windows of data) plus the processing time in the datacenter."
4868,These RTT delays can lead to a noticeable delay in returning search results for asignificant fraction of queries.
4869,"Moreover, there can be significant packet loss in access networks,
leading to TCP retransmissions and even larger delays."
4870,"One way to mitigate this problem and improve user-perceived performance is to (1) deploy front-
end servers closer to the users, and (2) utilize TCP splitting  by breaking the TCP connection at
the front-end server."
4871,"With TCP splitting, the client establishes a TCP connection to the nearbyfront-end, and the front-end maintains a persistent TCP connection to the data center with a very
large TCP congestion window [Tariq 2008, Pathak 2010 , Chen 2011]."
4872,"With this approach, the
response time roughly becomes  processing time, where RTT  is the round-
trip time between client and front-end server, and RTT  is the round-trip time between the front-
end server and the data center (back-end server)."
4873,"If the front-end server is close to client, thenthis response time approximately becomes RTT plus processing time, since RTT  is negligibly
small and RTT  is approximately RTT."
4874,"In summary, TCP splitting can reduce the networking
delay roughly from  to RTT, significantly improving user-perceived performance,
particularly for users who are far from the nearest data center."
4875,"TCP splitting also helps reduce
TCP retransmission delays caused by losses in access networks."
4876,"Google and Akamai have
made extensive use of their CDN servers in access networks (recall our discussion in Section
2.6) to perform TCP splitting for the cloud services they support [Chen 2011].4⋅RTT
4⋅RTTFE+RTTBE+
FE
BE
FE
BE
4⋅RTTcongestion-avoidance state after deflating cwnd ."
4877,"If a timeout event occurs, fast recovery transitions to
the slow-start state after performing the same actions as in slow start and congestion avoidance: The
value of cwnd  is set to 1 MSS, and the value of ssthresh  is set to half the value of cwnd  when the
loss event occurred."
4878,"Fast recovery is a recommended, but not required, component of TCP [RFC 5681] ."
4879,"It is interesting that
an early version of TCP, known as TCP Tahoe, unconditionally cut its congestion window to 1 MSS and
entered the slow-start phase after either a timeout-indicated or triple-duplicate-ACK-indicated loss event."
4880,"The newer version of TCP, TCP Reno, incorporated fast recovery."
4881,Figure 3.52 illustrates the evolution of TCP’s congestion window for both Reno and Tahoe.
4882,"In this
figure, the threshold is initially equal to 8 MSS."
4883,"For the first eight transmission rounds, Tahoe and Reno
take identical actions."
4884,"The congestion window climbs exponentially fast during slow start and hits the
threshold at the fourth round of transmission."
4885,"The congestion window then climbs linearly until a tripleduplicate- ACK event occurs, just after transmission round 8."
4886,"Note that the congestion window is
 when this loss event occurs."
4887,"The value of ssthresh  is then set to  cwnd   Under
TCP Reno, the congestion window is set to cwnd    and then grows linearly."
4888,"Under TCP Tahoe,
the congestion window is set to 1 MSS and grows exponentially until it reaches the value of ssthresh ,
at which point it grows linearly."
4889,"Figure 3.51 presents the complete FSM description of TCP’s congestion-control algorithms—slow start,
congestion avoidance, and fast recovery."
4890,"The figure also indicates where transmission of new segments
or retransmitted segments can occur."
4891,"Although it is important to distinguish between TCP errorcontrol/retransmission and TCP congestion control, it’s also important to appreciate how these twoaspects of TCP are inextricably linked."
4892,"TCP Congestion Control: Retrospective
Having delved into the details of slow start, congestion avoidance, and fast recovery, it’s worthwhile to
now step back and view the forest from the trees."
4893,Ignoring the12⋅MSS 0.5⋅ =6⋅MSS.
4894,"=9⋅MSSFigure 3.52 Evolution of TCP’s congestion window (Tahoe and Reno)
Figure 3.53 Additive-increase, multiplicative-decrease congestion control
initial slow-start period when a connection begins and assuming that losses are indicated by triple
duplicate ACKs rather than timeouts, TCP’s congestion control consists of linear (additive) increase in
cwnd  of 1 MSS per RTT and then a halving (multiplicative decrease) of cwnd  on a triple duplicate-ACK
event."
4895,"For this reason, TCP congestion control is often referred to as an additive-increase,
multiplicative-decrease (AIMD)  form of congestion control."
4896,"AIMD congestion control gives rise to the
“saw tooth” behavior shown in Figure 3.53, which also nicely illustrates our earlier intuition of TCP
“probing” for bandwidth—TCP linearly increases its congestion window size (and hence its transmissionrate) until a triple duplicate-ACK event occurs."
4897,"It then decreases its congestion window size by a factor
of two but then again begins increasing it linearly, probing to see if there is additional availablebandwidth.As noted previously, many TCP implementations use the Reno algorithm [Padhye 2001] ."
4898,"Many
variations of the Reno algorithm have been proposed [RFC 3782 ; RFC 2018] ."
4899,"The TCP Vegas
algorithm [Brakmo 1995 ; Ahn 1995] attempts to avoid congestion while maintaining good throughput."
4900,"The basic idea of Vegas is to (1) detect congestion in the routers between source and destination before
packet loss occurs, and (2) lower the rate linearly when this imminent packet loss is detected."
4901,"Imminent
packet loss is predicted by observing the RTT."
4902,"The longer the RTT of the packets, the greater the
congestion in the routers."
4903,"As of late 2015, the Ubuntu Linux implementation of TCP provided slowstart,congestion avoidance, fast recovery, fast retransmit, and SACK, by default; alternative congestion
control algorithms, such as TCP Vegas and BIC [Xu 2004], are also provided."
4904,"For a survey of the many
flavors of TCP, see [Afanasyev 2010] ."
4905,"TCP’s AIMD algorithm was developed based on a tremendous amount of engineering insight and
experimentation with congestion control in operational networks."
4906,"Ten years after TCP’s development,
theoretical analyses showed that TCP’s congestion-control algorithm serves as a distributed
asynchronous-optimization algorithm that results in several important aspects of user and network
performance being simultaneously optimized [Kelly 1998] ."
4907,"A rich theory of congestion control has since
been developed [Srikant 2004] ."
4908,"Macroscopic Description of TCP Throughput
Given the saw-toothed behavior of TCP, it’s natural to consider what the average throughput (that is, the
average rate) of a long-lived TCP connection might be."
4909,In this analysis we’ll ignore the slow-start phasesthat occur after timeout events.
4910,"(These phases are typically very short, since the sender grows out of the
phase exponentially fast.) During a particular round-trip interval, the rate at which TCP sends data is a
function of the congestion window and the current RTT."
4911,"When the window size is w bytes and the
current round-trip time is RTT seconds, then TCP’s transmission rate is roughly w/RTT."
4912,"TCP then
probes for additional bandwidth by increasing w by 1 MSS each RTT until a loss event occurs."
4913,"Denote
by W the value of w when a loss event occurs."
4914,"Assuming that RTT and W are approximately constant
over the duration of the connection, the TCP transmission rate ranges from W/(2 · RTT) to W/RTT ."
4915,"These assumptions lead to a highly simplified macroscopic model for the steady-state behavior of TCP.The network drops a packet from the connection when the rate increases to W/RTT;  the rate is then cut
in half and then increases by MSS/ RTT every RTT until it again reaches W/RTT ."
4916,"This process repeats
itself over and over again."
4917,"Because TCP’s throughput (that is, rate) increases linearly between the two
extreme values, we have
Using this highly idealized model for the steady-state dynamics of TCP, we can also derive an
interesting expression that relates a connection’s loss rate to its available bandwidth [Mahdavi 1997]."
4918,average throughput of a connection =0.75⋅WRTTThis derivation is outlined in the homework problems.
4919,"A more sophisticated model that has been found
empirically to agree with measured data is [Padhye 2000] ."
4920,"TCP Over High-Bandwidth Paths
It is important to realize that TCP congestion control has evolved over the years and indeed continues to
evolve."
4921,"For a summary of current TCP variants and discussion of TCP evolution, see [Floyd 2001, RFC
5681 , Afanasyev 2010] ."
4922,"What was good for the Internet when the bulk of the TCP connections carried
SMTP, FTP, and Telnet traffic is not necessarily good for today’s HTTP-dominated Internet or for a
future Internet with services that are still undreamed of."
4923,"The need for continued evolution of TCP can be illustrated by considering the high-speed TCP
connections that are needed for grid- and cloud-computing applications."
4924,"For example, consider a TCP
connection with 1,500-byte segments and a 100 ms RTT, and suppose we want to send data through
this connection at 10 Gbps."
4925,"Following [RFC 3649] , we note that using the TCP throughput formula
above, in order to achieve a 10 Gbps throughput, the average congestion window size would need to be83,333 segments."
4926,"That’s a lot of segments, leading us to be rather concerned that one of these 83,333
in-flight segments might be lost."
4927,What would happen in the case of a loss?
4928,"Or, put another way, what
fraction of the transmitted segments could be lost that would allow the TCP congestion-control algorithm
specified in Figure 3.51 still to achieve the desired 10 Gbps rate?"
4929,"In the homework questions for this
chapter, you are led through the derivation of a formula relating the throughput of a TCP connection as afunction of the loss rate (L), the round-trip time (RTT), and the maximum segment size (MSS):
Using this formula, we can see that in order to achieve a throughput of 10 Gbps, today’s TCP
congestion-control algorithm can only tolerate a segment loss probability of 2 · 10  (or equivalently,
one loss event for every 5,000,000,000 segments)—a very low rate."
4930,"This observation has led a number
of researchers to investigate new versions of TCP that are specifically designed for such high-speed
environments; see [Jin 2004; Kelly 2003 ; Ha 2008 ; RFC 7323]  for discussions of these efforts."
4931,"3.7.1 Fairness
Consider K TCP connections, each with a different end-to-end path, but all passing through a bottleneck
link with transmission rate R bps."
4932,"(By bottleneck link , we mean that for each connection, all the other
links along the connection’s path are not congested and have abundant transmission capacity as
compared with the transmission capacity of the bottleneck link.) Suppose each connection is transferring
a large file and there is no UDP traffic passing through the bottleneck link."
4933,"A congestion-control
mechanism is said to be fair if the average transmission rate of each connection is approximately R/K;average throughput of a connection =1.22⋅MSSRTTL
–10that is, each connection gets an equal share of the link bandwidth."
4934,"Is TCP’s AIMD algorithm fair, particularly given that different TCP connections may start at different
times and thus may have different window sizes at a given point in time?"
4935,"[Chiu 1989] provides an
elegant and intuitive explanation of why TCP congestion control converges to provide an equal share of
a bottleneck link’s bandwidth among competing TCP connections."
4936,"Let’s consider the simple case of two TCP connections sharing a single link with transmission rate R, as
shown in Figure 3.54."
4937,"Assume that the two connections
Figure 3.54 Two TCP connections sharing a single bottleneck link
have the same MSS and RTT (so that if they have the same congestion window size, then they have the
same throughput), that they have a large amount of data to send, and that no other TCP connections or
UDP datagrams traverse this shared link."
4938,"Also, ignore the slow-start phase of TCP and assume the TCPconnections are operating in CA mode (AIMD) at all times."
4939,Figure 3.55 plots the throughput realized by the two TCP connections.
4940,"If TCP is to share the link
bandwidth equally between the two connections, then the realized throughput should fall along the 45-
degree arrow (equal bandwidth share) emanating from the origin."
4941,"Ideally, the sum of the two
throughputs should equal R."
4942,"(Certainly, each connection receiving an equal, but zero, share of the link
capacity is not a desirable situation!) So the goal should be to have the achieved throughputs fall
somewhere near the intersection of the equal bandwidth share line and the full bandwidth utilization line
in Figure 3.55."
4943,"Suppose that the TCP window sizes are such that at a given point in time, connections 1 and 2 realize
throughputs indicated by point A in Figure 3.55."
4944,"Because the amount of link bandwidth jointly consumed
by the two connections is less than R, no loss will occur, and both connections will increase their
window by 1 MSS per RTT as a result of TCP’s congestion-avoidance algorithm."
4945,"Thus, the joint
throughput of the two connections proceeds along a 45-degree line (equal increase for bothconnections) starting from point A."
4946,"Eventually, the link bandwidth jointly consumed by the two
connections will be greater than R, and eventually packet loss will occur."
4947,"Suppose that connections 1
and 2 experience packet loss when they realize throughputs indicated by point B."
4948,"Connections 1 and 2
then decrease their windows by a factor of two."
4949,"The resulting throughputs realized are thus at point C,
halfway along a vector starting at B and ending at the origin."
4950,"Because the joint bandwidth use is less
than R at point C, the two connections again increase their throughputs along a 45-degree line starting
from C."
4951,"Eventually, loss will again occur, for example, at point D, and the two connections again
decrease their window sizes by a factor of two, and so on."
4952,"You should convince yourself that the
bandwidth realized by the two connections eventually fluctuates along the equal bandwidth share line.You should also convince
Figure 3.55 Throughput realized by TCP connections 1 and 2
yourself that the two connections will converge to this behavior regardless of where they are in the two-
dimensional space! Although a number of idealized assumptions lie behind this scenario, it still provides
an intuitive feel for why TCP results in an equal sharing of bandwidth among connections."
4953,"In our idealized scenario, we assumed that only TCP connections traverse the bottleneck link, that the
connections have the same RTT value, and that only a single TCP connection is associated with a host-destination pair."
4954,"In practice, these conditions are typically not met, and client-server applications canthus obtain very unequal portions of link bandwidth."
4955,"In particular, it has been shown that when multipleconnections share a common bottleneck, those sessions with a smaller RTT are able to grab theavailable bandwidth at that link more quickly as it becomes free (that is, open their congestion windows
faster) and thus will enjoy higher throughput than those connections with larger RTTs 
[Lakshman1997] ."
4956,"Fairness and UDP
We have just seen how TCP congestion control regulates an application’s transmission rate via the
congestion window mechanism."
4957,"Many multimedia applications, such as Internet phone and video
conferencing, often do not run over TCP for this very reason—they do not want their transmission ratethrottled, even if the network is very congested."
4958,"Instead, these applications prefer to run over UDP,which does not have built-in congestion control."
4959,"When running over UDP, applications can pump their
audio and video into the network at a constant rate and occasionally lose packets, rather than reducetheir rates to “fair” levels at times of congestion and not lose any packets."
4960,"From the perspective of TCP,the multimedia applications running over UDP are not being fair—they do not cooperate with the otherconnections nor adjust their transmission rates appropriately."
4961,"Because TCP congestion control will
decrease its transmission rate in the face of increasing congestion (loss), while UDP sources need not,
it is possible for UDP sources to crowd out TCP traffic."
4962,"An area of research today is thus thedevelopment of congestion-control mechanisms for the Internet that prevent UDP traffic from bringing
the Internet’s throughput to a grinding halt [Floyd 1999; Floyd 2000; Kohler 2006; RFC 4340] ."
4963,"Fairness and Parallel TCP Connections
But even if we could force UDP traffic to behave fairly, the fairness problem would still not be completely
solved."
4964,"This is because there is nothing to stop a TCP-based application from using multiple parallel
connections."
4965,"For example, Web browsers often use multiple parallel TCP connections to transfer the
multiple objects within a Web page."
4966,"(The exact number of multiple connections is configurable in mostbrowsers.) When an application uses multiple parallel connections, it gets a larger fraction of the
bandwidth in a congested link."
4967,"As an example, consider a link of rate R supporting nine ongoing client-
server applications, with each of the applications using one TCP connection."
4968,"If a new application comes
along and also uses one TCP connection, then each application gets approximately the same
transmission rate of R/10."
4969,"But if this new application instead uses 11 parallel TCP connections, then the
new application gets an unfair allocation of more than R/2."
4970,"Because Web traffic is so pervasive in the
Internet, multiple parallel connections are not uncommon."
4971,"3.7.2 Explicit Congestion Notification (ECN): Network-assisted Congestion Control
Since the initial standardization of slow start and congestion avoidance in the late 1980’s [RFC 1122] ,
TCP has implemented the form of end-end congestion control that we studied in Section 3.7.1: a TCP
sender receives no explicit congestion indications from the network layer, and instead infers congestion
through observed packet loss."
4972,"More recently, extensions to both IP and TCP [RFC 3168]  have been
proposed, implemented, and deployed that allow the network to explicitly signal congestion to a TCPsender and receiver."
4973,"This form of network-assisted congestion control is known as Explicit Congestion
Notification ."
4974,"As shown in Figure 3.56, the TCP and IP protocols are involved."
4975,"At the network layer, two bits (with four possible values, overall) in the Type of Service field of the IP
datagram header (which we’ll discuss in Section 4.3) are used for ECN."
4976,"One setting of the ECN bits is
used by a router to indicate that it (the
Figure 3.56 Explicit Congestion Notification: network-assisted congestion control
router) is experiencing congestion."
4977,"This congestion indication is then carried in the marked IP datagramto the destination host, which then informs the sending host, as shown in Figure 3.56."
4978,"RFC 3168 does
not provide a definition of when a router is congested; that decision is a configuration choice made
possible by the router vendor, and decided by the network operator."
4979,"However, RFC 3168 doesrecommend that an ECN congestion indication be set only in the face of persistent congestion."
4980,"Asecond setting of the ECN bits is used by the sending host to inform routers that the sender and receiverare ECN-capable, and thus capable of taking action in response to ECN-indicated network congestion."
4981,"As shown in Figure 3.56, when the TCP in the receiving host receives an ECN congestion indication via
a received datagram, the TCP in the receiving host informs the TCP in the sending host of the
congestion indication by setting the ECE (Explicit Congestion Notification Echo) bit (see Figure 3.29) in
a receiver-to-sender TCP ACK segment."
4982,"The TCP sender, in turn, reacts to an ACK with an ECE
congestion indication by halving the congestion window, as it would react to a lost segment using fastretransmit, and sets the CWR (Congestion Window Reduced) bit in the header of the next transmittedTCP sender-to-receiver segment.Other transport-layer protocols besides TCP may also make use of network-layer-signaled ECN."
4983,"The
Datagram Congestion Control Protocol (DCCP) [RFC 4340]  provides a low-overhead, congestion-
controlled UDP-like unreliable service that utilizes ECN."
4984,"DCTCP (Data Center TCP) [Alizadeh 2010], a
version of TCP designed specifically for data center networks, also makes use of ECN.3.8 Summary
We began this chapter by studying the services that a transport-layer protocol can provide to network
applications."
4985,"At one extreme, the transport-layer protocol can be very simple and offer a no-frills serviceto applications, providing only a multiplexing/demultiplexing function for communicating processes."
4986,TheInternet’s UDP protocol is an example of such a no-frills transport-layer protocol.
4987,"At the other extreme, atransport-layer protocol can provide a variety of guarantees to applications, such as reliable delivery of
data, delay guarantees, and bandwidth guarantees."
4988,"Nevertheless, the services that a transport protocol
can provide are often constrained by the service model of the underlying network-layer protocol."
4989,"If thenetwork-layer protocol cannot provide delay or bandwidth guarantees to transport-layer segments, thenthe transport-layer protocol cannot provide delay or bandwidth guarantees for the messages sentbetween processes."
4990,"We learned in Section 3.4 that a transport-layer protocol can provide reliable data transfer even if the
underlying network layer is unreliable."
4991,"We saw that providing reliable data transfer has many subtle
points, but that the task can be accomplished by carefully combining acknowledgments, timers,
retransmissions, and sequence numbers."
4992,"Although we covered reliable data transfer in this chapter, we should keep in mind that reliable data
transfer can be provided by link-, network-, transport-, or application-layer protocols."
4993,"Any of the upperfour layers of the protocol stack can implement acknowledgments, timers, retransmissions, andsequence numbers and provide reliable data transfer to the layer above."
4994,"In fact, over the years,engineers and computer scientists have independently designed and implemented link-, network-,transport-, and application-layer protocols that provide reliable data transfer (although many of these
protocols have quietly disappeared)."
4995,"In Section 3.5, we took a close look at TCP, the Internet’s connection-oriented and reliable transport-
layer protocol."
4996,"We learned that TCP is complex, involving connection management, flow control, and
round-trip time estimation, as well as reliable data transfer."
4997,"In fact, TCP is actually more complex thanour description—we intentionally did not discuss a variety of TCP patches, fixes, and improvements thatare widely implemented in various versions of TCP."
4998,"All of this complexity, however, is hidden from thenetwork application."
4999,"If a client on one host wants to send data reliably to a server on another host, it
simply opens a TCP socket to the server and pumps data into that socket."
5000,"The client-server application
is blissfully unaware of TCP’s complexity."
5001,"In Section 3.6, we examined congestion control from a broad perspective, and in Section 3.7, we
showed how TCP implements congestion control."
5002,We learned that congestion control is imperative forthe well-being of the network.
5003,"Without congestion control, a network can easily become gridlocked, with
little or no data being transported end-to-end."
5004,"In Section 3.7 we learned that TCP implements an end-
to-end congestion-control mechanism that additively increases its transmission rate when the TCP
connection’s path is judged to be congestion-free, and multiplicatively decreases its transmission rate
when loss occurs."
5005,"This mechanism also strives to give each TCP connection passing through a
congested link an equal share of the link bandwidth."
5006,"We also examined in some depth the impact of
TCP connection establishment and slow start on latency."
5007,"We observed that in many importantscenarios, connection establishment and slow start significantly contribute to end-to-end delay."
5008,"Weemphasize once more that while TCP congestion control has evolved over the years, it remains an areaof intensive research and will likely continue to evolve in the upcoming years."
5009,"Our discussion of specific Internet transport protocols in this chapter has focused on UDP and TCP—the
two “work horses” of the Internet transport layer."
5010,"However, two decades of experience with these two
protocols has identified circumstances in which neither is ideally suited."
5011,"Researchers have thus been
busy developing additional transport-layer protocols, several of which are now IETF proposedstandards."
5012,"The Datagram Congestion Control Protocol (DCCP) [RFC 4340]  provides a low-overhead, message-
oriented, UDP-like unreliable service, but with an application-selected form of congestion control that is
compatible with TCP."
5013,"If reliable or semi-reliable data transfer is needed by an application, then thiswould be performed within the application itself, perhaps using the mechanisms we have studied in
Section 3.4. DCCP is envisioned for use in applications such as streaming media (see Chapter 9) that
can exploit the tradeoff between timeliness and reliability of data delivery, but that want to be responsive
to network congestion."
5014,"Google’s QUIC (Quick UDP Internet Connections) protocol [Iyengar 2016], implemented in Google’s
Chromium browser, provides reliability via retransmission as well as error correction, fast-connectionsetup, and a rate-based congestion control algorithm that aims to be TCP friendly—all implemented asan application-level protocol on top of UDP."
5015,"In early 2015, Google reported that roughly half of allrequests from Chrome to Google servers are served over QUIC."
5016,"DCTCP (Data Center TCP) [Alizadeh 2010] is a version of TCP designed specifically for data center
networks, and uses ECN to better support the mix of short- and long-lived flows that characterize data
center workloads."
5017,"The Stream Control Transmission Protocol (SCTP) [RFC 4960 , RFC 3286]  is a reliable, message-
oriented protocol that allows several different application-level “streams” to be multiplexed through a
single SCTP connection (an approach known as “multi-streaming”)."
5018,"From a reliability standpoint, thedifferent streams within the connection are handled separately, so that packet loss in one stream does
not affect the delivery of data in other streams."
5019,QUIC provides similar multi-stream semantics.
5020,"SCTPalso allows data to be transferred over two outgoing paths when a host is connected to two or more
networks, optional delivery of out-of-order data, and a number of other features."
5021,"SCTP’s flow- and
congestion-control algorithms are essentially the same as in TCP."
5022,"The TCP-Friendly Rate Control (TFRC) protocol [RFC 5348]  is a congestion-control protocol rather than
a full-fledged transport-layer protocol."
5023,"It specifies a congestion-control mechanism that could be used in
another transport protocol such as DCCP (indeed one of the two application-selectable protocols
available in DCCP is TFRC)."
5024,"The goal of TFRC is to smooth out the “saw tooth” behavior (see Fig­ure
3.53) in TCP congestion control, while maintaining a long-term sending rate that is “reasonably” close to
that of TCP."
5025,"With a smoother sending rate than TCP, TFRC is well-suited for multimedia applications
such as IP telephony or streaming media where such a smooth rate is important."
5026,"TFRC is an “equation-
based” protocol that uses the measured packet loss rate as input to an equation [Padhye 2000]  that
estimates what TCP’s throughput would be if a TCP session experiences that loss rate."
5027,"This rate is then
taken as TFRC’s target sending rate."
5028,"Only the future will tell whether DCCP, SCTP, QUIC, or TFRC will see widespread deployment."
5029,"While
these protocols clearly provide enhanced capabilities over TCP and UDP, TCP and UDP have proventhemselves “good enough” over the years."
5030,"Whether “better” wins out over “good enough” will depend ona complex mix of technical, social, and business considerations."
5031,"In Chapter 1, we said that a computer network can be partitioned into the “network edge” and the
“network core.” The network edge covers everything that happens in the end systems."
5032,"Having now
covered the application layer and the transport layer, our discussion of the network edge is complete."
5033,"It
is time to explore the network core! This journey begins in the next two chapters, where we’ll study the
network layer, and continues into Chapter 6, where we’ll study the link layer.Homework Problems and Questions
Chapter 3 Review Questions
SECTIONS 3.1–3.3
R1."
5034,Suppose the network layer provides the following service.
5035,"The network layer in the source
host accepts a segment of maximum size 1,200 bytes and a destination host address from the
transport layer."
5036,The network layer then guarantees to deliver the segment to the transport layerat the destination host.
5037,Suppose many network application processes can be running at thedestination host.
5038,a.
5039,"Design the simplest possible transport-layer protocol that will get application data to the
desired process at the destination host."
5040,"Assume the operating system in the destination
host has assigned a 4-byte port number to each running application process."
5041,b.
5042,Modify this protocol so that it provides a “return address” to the destination process.
5043,c.
5044,"In your protocols, does the transport layer “have to do anything” in the core of the
computer network?"
5045,R2.
5046,"Consider a planet where everyone belongs to a family of six, every family lives in its own
house, each house has a unique address, and each person in a given house has a unique
name."
5047,Suppose this planet has a mail service that delivers letters from source house todestination house.
5048,"The mail service requires that (1) the letter be in an envelope, and that (2) theaddress of the destination house (and nothing more) be clearly written on the envelope.Suppose each family has a delegate family member who collects and distributes letters for theother family members."
5049,The letters do not necessarily provide any indication of the recipients ofthe letters.
5050,a.
5051,"Using the solution to Problem R1 above as inspiration, describe a protocol that the
delegates can use to deliver letters from a sending family member to a receiving family
member."
5052,b.
5053,"In your protocol, does the mail service ever have to open the envelope and examine the
letter in order to provide its service?"
5054,R3.
5055,Consider a TCP connection between Host A and Host B.
5056,"Suppose that the TCP segments
traveling from Host A to Host B have source port number x and destination port number y."
5057,"What
are the source and destination port numbers for the segments traveling from Host B to Host A?SECTION 3.4
SECTION 3.5R4."
5058,"Describe why an application developer might choose to run an application over UDP rather
than TCP."
5059,R5.
5060,"Why is it that voice and video traffic is often sent over TCP rather than UDP in today’s
Internet?"
5061,"(Hint: The answer we are looking for has nothing to do with TCP’s congestion-control
mechanism.)
R6."
5062,"Is it possible for an application to enjoy reliable data transfer even when the application runs
over UDP?"
5063,"If so, how?"
5064,R7.
5065,Suppose a process in Host C has a UDP socket with port number 6789.
5066,"Suppose both Host
A and Host B each send a UDP segment to Host C with destination port number 6789."
5067,"Will both
of these segments be directed to the same socket at Host C?"
5068,"If so, how will the process at HostC know that these two segments originated from two different hosts?"
5069,R8.
5070,Suppose that a Web server runs in Host C on port 80.
5071,"Suppose this Web server uses
persistent connections, and is currently receiving requests from two different Hosts, A and B."
5072,"Are
all of the requests being sent through the same socket at Host C?"
5073,"If they are being passed
through different sockets, do both of the sockets have port 80?"
5074,Discuss and explain.
5075,R9.
5076,"In our rdt protocols, why did we need to introduce sequence numbers?"
5077,R10.
5078,"In our rdt protocols, why did we need to introduce timers?"
5079,R11.
5080,"Suppose that the roundtrip delay between sender and receiver is constant and known to
the sender."
5081,"Would a timer still be necessary in protocol rdt 3.0 , assuming that packets can
be lost?"
5082,Explain.
5083,R12.
5084,Visit the Go-Back-N Java applet at the companion Web site.
5085,a.
5086,"Have the source send five packets, and then pause the animation before any of the five
packets reach the destination."
5087,Then kill the first packet and resume the animation.
5088,Describe what happens.
5089,b.
5090,"Repeat the experiment, but now let the first packet reach the destination and kill the first
acknowledgment."
5091,Describe again what happens.
5092,c.
5093,"Finally, try sending six packets."
5094,What happens?
5095,R13.
5096,"Repeat R12, but now with the Selective Repeat Java applet."
5097,How are Selective Repeat andGo-Back-N different?
5098,R14.
5099,True or false?
5100,a.
5101,Host A is sending Host B a large file over a TCP connection.
5102,"Assume Host B has no data
to send Host A."
5103,"Host B will not send acknowledgments to Host A because Host B cannot
piggyback the acknowledgments on data.SECTION 3.7
Problemsb."
5104,The size of the TCP rwnd  never changes throughout the duration of the connection.
5105,c.
5106,Suppose Host A is sending Host B a large file over a TCP connection.
5107,"The number of
unacknowledged bytes that A sends cannot exceed the size of the receive buffer."
5108,d.
5109,Suppose Host A is sending a large file to Host B over a TCP connection.
5110,"If the sequence
number for a segment of this connection is m, then the sequence number for the
subsequent segment will necessarily be ."
5111,e.
5112,The TCP segment has a field in its header for rwnd .
5113,f.
5114,Suppose that the last SampleRTT  in a TCP connection is equal to 1 sec.
5115,"The current
value of TimeoutInterval  for the connection will necessarily be  sec."
5116,g.
5117,"Suppose Host A sends one segment with sequence number 38 and 4 bytes of data over
a TCP connection to Host B."
5118,"In this same segment the acknowledgment number is
necessarily 42."
5119,R15.
5120,Suppose Host A sends two TCP segments back to back to Host B over a TCP connection.
5121,The first segment has sequence number 90; the second has sequence number 110.
5122,a.
5123,How much data is in the first segment?
5124,b.
5125,Suppose that the first segment is lost but the second segment arrives at B.
5126,"In the
acknowledgment that Host B sends to Host A, what will be the acknowledgment number?"
5127,R16.
5128,Consider the Telnet example discussed in Section 3.5 .
5129,"A few seconds after the user types
the letter ‘C,’ the user types the letter ‘R.’ After typing the letter ‘R,’ how many segments are
sent, and what is put in the sequence number and acknowledgment fields of the segments?m+1
≥1
R17."
5130,Suppose two TCP connections are present over some bottleneck link of rate R bps.
5131,"Both
connections have a huge file to send (in the same direction over the bottleneck link)."
5132,Thetransmissions of the files start at the same time.
5133,What transmission rate would TCP like to giveto each of the connections?
5134,R18.
5135,True or false?
5136,Consider congestion control in TCP.
5137,"When the timer expires at the sender,
the value of ssthresh  is set to one half of its previous value."
5138,R19.
5139,"In the discussion of TCP splitting in the sidebar in Section 3.7 , it was claimed that the
response time with TCP splitting is approximately  Justify
this claim.4⋅RTTFE+RTTBE+processing time ."
5140,P1.
5141,Suppose Client A initiates a Telnet session with Server S.
5142,"At about the same time, Client Balso initiates a Telnet session with Server S."
5143,"Provide possible source and destination port
numbers for
a."
5144,The segments sent from A to S.
5145,b.
5146,The segments sent from B to S.
5147,c.
5148,The segments sent from S to A.
5149,d.
5150,The segments sent from S to B.
5151,e.
5152,"If A and B are different hosts, is it possible that the source port number in the segments
from A to S is the same as that from B to S?"
5153,f.
5154,How about if they are the same host?
5155,P2.
5156,Consider Figure 3.5 .
5157,"What are the source and destination port values in the segments
flowing from the server back to the clients’ processes?"
5158,"What are the IP addresses in the
network-layer datagrams carrying the transport-layer segments?"
5159,P3.
5160,UDP and TCP use 1s complement for their checksums.
5161,"Suppose you have the following
three 8-bit bytes: 01010011, 01100110, 01110100."
5162,"What is the 1s complement of the sum of
these 8-bit bytes?"
5163,"(Note that although UDP and TCP use 16-bit words in computing thechecksum, for this problem you are being asked to consider 8-bit sums.) Show all work."
5164,"Why is itthat UDP takes the 1s complement of the sum; that is, why not just use the sum?"
5165,"With the 1scomplement scheme, how does the receiver detect errors?"
5166,Is it possible that a 1-bit error will goundetected?
5167,How about a 2-bit error?
5168,P4.
5169,a.
5170,Suppose you have the following 2 bytes: 01011100 and 01100101.
5171,"What is the 1s
complement of the sum of these 2 bytes?"
5172,b.
5173,Suppose you have the following 2 bytes: 11011010 and 01100101.
5174,What is the 1scomplement of the sum of these 2 bytes?
5175,c.
5176,"For the bytes in part (a), give an example where one bit is flipped in each of the 2 bytesand yet the 1s complement doesn’t change."
5177,P5.
5178,"Suppose that the UDP receiver computes the Internet checksum for the received UDP
segment and finds that it matches the value carried in the checksum field."
5179,"Can the receiver be
absolutely certain that no bit errors have occurred?"
5180,Explain.
5181,P6.
5182,Consider our motivation for correcting protocol rdt2.1 .
5183,"Show that the receiver, shown in
Figure 3.57 , when operating with the sender shown in Figure 3.11 , can lead the sender and
receiver to enter into a deadlock state, where each is waiting for an event that will never occur.P7."
5184,"In protocol rdt3.0 , the ACK packets flowing from the receiver to the sender do not have
sequence numbers (although they do have an ACK field that contains the sequence number of
the packet they are acknowledging)."
5185,"Why is it that our ACK packets do not require sequencenumbers?Figure 3.57 An incorrect receiver for protocol rdt 2.1
P8."
5186,Draw the FSM for the receiver side of protocol rdt3.0 .
5187,P9.
5188,"Give a trace of the operation of protocol rdt3.0  when data packets and acknowledgment
packets are garbled."
5189,Your trace should be similar to that used in Figure 3.16 .
5190,P10.
5191,Consider a channel that can lose packets but has a maximum delay that is known.
5192,"Modify
protocol rdt2.1  to include sender timeout and retransmit."
5193,"Informally argue why your protocol
can communicate correctly over this channel."
5194,P11.
5195,"Consider the rdt2.2  receiver in Figure 3.14 , and the creation of a new packet in the
self-transition (i.e., the transition from the state back to itself) in the Wait-for-0-from-below andthe Wait-for-1-from-below states: sndpkt=make_pkt(ACK, 1, checksum)  and
sndpkt=make_pkt(ACK, 0, checksum) ."
5196,"Would the protocol work correctly if this action
were removed from the self-transition in the Wait-for-1-from-below state?"
5197,Justify your answer.What if this event were removed from the self-transition in the Wait-for-0-from-below state?
5198,"[ Hint:
In this latter case, consider what would happen if the first sender-to-receiver packet were
corrupted.]
P12."
5199,"The sender side of rdt3.0  simply ignores (that is, takes no action on) all received
packets that are either in error or have the wrong value in the acknum  field of an
acknowledgment packet."
5200,"Suppose that in such circumstances, rdt3.0  were simply to
retransmit the current data packet."
5201,Would the protocol still work?
5202,"( Hint: Consider what would
happen if there were only bit errors; there are no packet losses but premature timeouts canoccur."
5203,"Consider how many times the nth packet is sent, in the limit as n approaches infinity.)P13."
5204,Consider the rdt 3.0 protocol.
5205,"Draw a diagram showing that if the network connection
between the sender and receiver can reorder messages (that is, that two messages propagating
in the medium between the sender and receiver can be reordered), then the alternating-bitprotocol will not work correctly (make sure you clearly identify the sense in which it will not workcorrectly)."
5206,"Your diagram should have the sender on the left and the receiver on the right, with thetime axis running down the page, showing data (D) and acknowledgment (A) message
exchange."
5207,"Make sure you indicate the sequence number associated with any data or
acknowledgment segment."
5208,P14.
5209,Consider a reliable data transfer protocol that uses only negative acknowledgments.
5210,Suppose the sender sends data only infrequently.
5211,"Would a NAK-only protocol be preferable to a
protocol that uses ACKs?"
5212,Why?
5213,Now suppose the sender has a lot of data to send and the end-to-end connection experiences few losses.
5214,"In this second case, would a NAK-only protocol bepreferable to a protocol that uses ACKs?"
5215,Why?
5216,P15.
5217,Consider the cross-country example shown in Figure 3.17 .
5218,"How big would the window size
have to be for the channel utilization to be greater than 98 percent?"
5219,"Suppose that the size of a
packet is 1,500 bytes, including both header fields and data."
5220,P16.
5221,Suppose an application uses rdt 3.0  as its transport layer protocol.
5222,"As the stop-and-wait
protocol has very low channel utilization (shown in the cross-country example), the designers of
this application let the receiver keep sending back a number (more than two) of alternating ACK0 and ACK 1 even if the corresponding data have not arrived at the receiver."
5223,"Would this
application design increase the channel utilization?"
5224,Why?
5225,"Are there any potential problems with
this approach?"
5226,Explain.
5227,P17.
5228,"Consider two network entities, A and B, which are connected by a perfect bi-directional
channel (i.e., any message sent will be received correctly; the channel will not corrupt, lose, or
re-order packets)."
5229,"A and B are to deliver data messages to each other in an alternating manner:First, A must deliver a message to B, then B must deliver a message to A, then A must deliver amessage to B and so on."
5230,"If an entity is in a state where it should not attempt to deliver a
message to the other side, and there is an event like rdt_send(data)  call from above that
attempts to pass data down for transmission to the other side, this call from above can simply beignored with a call to rdt_unable_to_send(data) , which informs the higher layer that it is
currently not able to send data."
5231,"[Note: This simplifying assumption is made so you don’t have to
worry about buffering data.]
Draw a FSM specification for this protocol (one FSM for A, and one FSM for B!)."
5232,"Note that you
do not have to worry about a reliability mechanism here; the main point of this question is tocreate a FSM specification that reflects the synchronized behavior of the two entities."
5233,"You should
use the following events and actions that have the same meaning as protocol rdt1.0 in Figure
3.9 : rdt_send(data), packet = make_pkt(data) , udt_send(packet),
rdt_rcv(packet) , extract (packet, data), deliver_data(data) ."
5234,"Make sure your
protocol reflects the strict alternation of sending between A and B."
5235,"Also, make sure to indicate
the initial states for A and B in your FSM descriptions.P18."
5236,"In the generic SR protocol that we studied in Section 3.4.4 , the sender transmits a
message as soon as it is available (if it is in the window) without waiting for an acknowledgment."
5237,Suppose now that we want an SR protocol that sends messages two at a time.
5238,"That is, thesender will send a pair of messages and will send the next pair of messages only when it knowsthat both messages in the first pair have been received correctly.Suppose that the channel may lose messages but will not corrupt or reorder messages."
5239,"Design
an error-control protocol for the unidirectional reliable transfer of messages."
5240,"Give an FSM
description of the sender and receiver."
5241,"Describe the format of the packets sent between sender
and receiver, and vice versa."
5242,"If you use any procedure calls other than those in Section 3.4 (for
example, udt_send() , start_timer() , rdt_rcv() , and so on), clearly state their
actions."
5243,"Give an example (a timeline trace of sender and receiver) showing how your protocol
recovers from a lost packet."
5244,P19.
5245,"Consider a scenario in which Host A wants to simultaneously send packets to Hosts B and
C."
5246,"A is connected to B and C via a broadcast channel—a packet sent by A is carried by the
channel to both B and C."
5247,"Suppose that the broadcast channel connecting A, B, and C canindependently lose and corrupt packets (and so, for example, a packet sent from A might becorrectly received by B, but not by C)."
5248,"Design a stop-and-wait-like error-control protocol forreliably transferring packets from A to B and C, such that A will not get new data from the upperlayer until it knows that both B and C have correctly received the current packet."
5249,"Give FSM
descriptions of A and C."
5250,"(Hint: The FSM for B should be essentially the same as for C.) Also,
give a description of the packet format(s) used."
5251,P20.
5252,Consider a scenario in which Host A and Host B want to send messages to Host C.
5253,"Hosts
A and C are connected by a channel that can lose and corrupt (but not reorder) messages."
5254,Hosts B and C are connected by another channel (independent of the channel connecting A andC) with the same properties.
5255,"The transport layer at Host C should alternate in deliveringmessages from A and B to the layer above (that is, it should first deliver the data from a packetfrom A, then the data from a packet from B, and so on)."
5256,"Design a stop-and-wait-like error-controlprotocol for reliably transferring packets from A and B to C, with alternating delivery at C as
described above."
5257,Give FSM descriptions of A and C.
5258,"( Hint: The FSM for B should be essentially
the same as for A.) Also, give a description of the packet format(s) used.P21."
5259,"Suppose we have two network entities, A and B."
5260,"B has a supply of data messages that will
be sent to A according to the following conventions."
5261,"When A gets a request from the layer above
to get the next data (D) message from B, A must send a request (R) message to B on the A-to-Bchannel."
5262,Only when B receives an R message can it send a data (D) message back to A on theB-to-A channel.
5263,A should deliver exactly one copy of each D message to the layer above.
5264,"Rmessages can be lost (but not corrupted) in the A-to-B channel; D messages, once sent, arealways delivered correctly."
5265,The delay along both channels is unknown and variable.
5266,"Design (give an FSM description of) a protocol that incorporates the appropriate mechanisms to
compensate for the loss-prone A-to-B channel and implements message passing to the layerabove at entity A, as discussed above."
5267,Use only those mechanisms that are absolutelynecessary.
5268,P22.
5269,"Consider the GBN protocol with a sender window size of 4 and a sequence number range
of 1,024."
5270,"Suppose that at time t, the next in-order packet that the receiver is expecting has asequence number of k."
5271,Assume that the medium does not reorder messages.
5272,"Answer the
following questions:
a."
5273,What are the possible sets of sequence numbers inside the sender’s window at time t?
5274,Justify your answer.
5275,b.
5276,What are all possible values of the ACK field in all possible messages currentlypropagating back to the sender at time t?
5277,Justify your answer.
5278,P23.
5279,Consider the GBN and SR protocols.
5280,Suppose the sequence number space is of size k.
5281,"What is the largest allowable sender window that will avoid the occurrence of problems such as
that in Figure 3.27 for each of these protocols?"
5282,P24.
5283,"Answer true or false to the following questions and briefly justify your answer:
a."
5284,"With the SR protocol, it is possible for the sender to receive an ACK for a packet that falls
outside of its current window."
5285,b.
5286,"With GBN, it is possible for the sender to receive an ACK for a packet that falls outside ofits current window."
5287,c.
5288,The alternating-bit protocol is the same as the SR protocol with a sender and receiverwindow size of 1.
5289,d.
5290,The alternating-bit protocol is the same as the GBN protocol with a sender and receiverwindow size of 1.
5291,P25.
5292,"We have said that an application may choose UDP for a transport protocol because UDP
offers finer application control (than TCP) of what data is sent in a segment and when."
5293,a.
5294,Why does an application have more control of what data is sent in a segment?
5295,b.
5296,Why does an application have more control on when the segment is sent?
5297,P26.
5298,Consider transferring an enormous file of L bytes from Host A to Host B.
5299,"Assume an MSS
of 536 bytes."
5300,a.
5301,What is the maximum value of L such that TCP sequence numbers are not exhausted?
5302,Recall that the TCP sequence number field has 4 bytes.
5303,b.
5304,"For the L you obtain in (a), find how long it takes to transmit the file."
5305,"Assume that a totalof 66 bytes of transport, network, and data-link header are added to each segment
before the resulting packet is sent out over a 155 Mbps link."
5306,Ignore flow control andcongestion control so A can pump out the segments back to back and continuously.
5307,P27.
5308,"Host A and B are communicating over a TCP connection, and Host B has already received
from A all bytes up through byte 126."
5309,"Suppose Host A then sends two segments to Host B back-
to-back."
5310,"The first and second segments contain 80 and 40 bytes of data, respectively."
5311,"In the firstsegment, the sequence number is 127, the source port number is 302, and the destination port
number is 80."
5312,Host B sends an acknowledgment whenever it receives a segment from Host A.
5313,a.
5314,"In the second segment sent from Host A to B, what are the sequence number, source
port number, and destination port number?"
5315,b.
5316,"If the first segment arrives before the second segment, in the acknowledgment of the firstarriving segment, what is the acknowledgment number, the source port number, and the
destination port number?"
5317,c.
5318,"If the second segment arrives before the first segment, in the acknowledgment of the first
arriving segment, what is the acknowledgment number?"
5319,d.
5320,Suppose the two segments sent by A arrive in order at B.
5321,The first acknowledgment islost and the second acknowledgment arrives after the first timeout interval.
5322,"Draw a timing
diagram, showing these segments and all other segments and acknowledgments sent.(Assume there is no additional packet loss.) For each segment in your figure, provide the
sequence number and the number of bytes of data; for each acknowledgment that you
add, provide the acknowledgment number."
5323,P28.
5324,Host A and B are directly connected with a 100 Mbps link.
5325,"There is one TCP connection
between the two hosts, and Host A is sending to Host B an enormous file over this connection."
5326,Host A can send its application data into its TCP socket at a rate as high as 120 Mbps but HostB can read out of its TCP receive buffer at a maximum rate of 50 Mbps.
5327,Describe the effect ofTCP flow control.
5328,P29.
5329,SYN cookies were discussed in Section 3.5.6 .
5330,a.
5331,"Why is it necessary for the server to use a special initial sequence number in the
SYNACK?"
5332,b.
5333,Suppose an attacker knows that a target host uses SYN cookies.
5334,Can the attacker createhalf-open or fully open connections by simply sending an ACK packet to the target?
5335,"Why
or why not?"
5336,c.
5337,"Suppose an attacker collects a large amount of initial sequence numbers sent by the
server."
5338,"Can the attacker cause the server to create many fully open connections by
sending ACKs with those initial sequence numbers?"
5339,Why?
5340,P30.
5341,Consider the network shown in Scenario 2 in Section 3.6.1 .
5342,"Suppose both sending hosts
A and B have some fixed timeout values."
5343,a.
5344,Argue that increasing the size of the finite buffer of the router might possibly decreasethe throughput ( λ).
5345,b.
5346,"Now suppose both hosts dynamically adjust their timeout values (like what TCP does)
based on the buffering delay at the router."
5347,"Would increasing the buffer size help to
increase the throughput?"
5348,Why?
5349,P31.
5350,"Suppose that the five measured SampleRTT  values (see Section 3.5.3 ) are 106 ms, 120outms, 140 ms, 90 ms, and 115 ms."
5351,"Compute the EstimatedRTT  after each of these SampleRTT
values is obtained, using a value of  and assuming that the value of EstimatedRTT
was 100 ms just before the first of these five samples were obtained."
5352,"Compute also the DevRTT
after each sample is obtained, assuming a value of  and assuming the value of DevRTT
was 5 ms just before the first of these five samples was obtained."
5353,"Last, compute the TCP
TimeoutInterval  after each of these samples is obtained."
5354,P32.
5355,Consider the TCP procedure for estimating RTT.
5356,Suppose that .
5357,"Let SampleRTT  be
the most recent sample RTT, let SampleRTT  be the next most recent sample RTT, and so on."
5358,a.
5359,"For a given TCP connection, suppose four acknowledgments have been returned with
corresponding sample RTTs: SampleRTT , SampleRTT , SampleRTT , and
SampleRTT ."
5360,"Express EstimatedRTT  in terms of the four sample RTTs.
b."
5361,"Generalize your formula for n sample RTTs.
c."
5362,For the formula in part (b) let n approach infinity.
5363,"Comment on why this averaging
procedure is called an exponential moving average."
5364,P33.
5365,"In Section 3.5.3 , we discussed TCP’s estimation of RTT."
5366,"Why do you think TCP avoids
measuring the SampleRTT  for retransmitted segments?"
5367,P34.
5368,"What is the relationship between the variable SendBase  in Section 3.5.4 and the variable
LastByteRcvd  in Section 3.5.5 ?"
5369,P35.
5370,"What is the relationship between the variable LastByteRcvd  in Section 3.5.5 and the
variable y in Section 3.5.4?
P36."
5371,"In Section 3.5.4 , we saw that TCP waits until it has received three duplicate ACKs before
performing a fast retransmit."
5372,"Why do you think the TCP designers chose not to perform a fast
retransmit after the first duplicate ACK for a segment is received?"
5373,P37.
5374,"Compare GBN, SR, and TCP (no delayed ACK)."
5375,"Assume that the timeout values for all
three protocols are sufficiently long such that 5 consecutive data segments and their
corresponding ACKs can be received (if not lost in the channel) by the receiving host (Host B)and the sending host (Host A) respectively."
5376,"Suppose Host A sends 5 data segments to Host B,and the 2nd segment (sent from A) is lost."
5377,"In the end, all 5 data segments have been correctlyreceived by Host B."
5378,a.
5379,"How many segments has Host A sent in total and how many ACKs has Host B sent in
total?"
5380,What are their sequence numbers?
5381,Answer this question for all three protocols.
5382,b.
5383,"If the timeout values for all three protocol are much longer than 5 RTT, then whichprotocol successfully delivers all five data segments in shortest time interval?"
5384,P38.
5385,"In our description of TCP in Figure 3.53 , the value of the threshold, ssthresh , is set as
ssthresh=cwnd/2  in several places and ssthresh  value is referred to as being set to half
the window size when a loss event occurred."
5386,"Must the rate at which the sender is sending when
the loss event occurred be approximately equal to cwnd  segments per RTT?"
5387,"Explain yourα=0.125
β=0.25
α=0.1
1
2
4 3 2
1answer."
5388,"If your answer is no, can you suggest a different manner in which ssthresh  should be
set?"
5389,P39.
5390,Consider Figure 3.46(b) .
5391,"If  increases beyond R/2, can λ  increase beyond R/3?"
5392,Explain.
5393,Now consider Figure 3.46(c) .
5394,"If  increases beyond R/2, can λ  increase beyond
R/4 under the assumption that a packet will be forwarded twice on average from the router to the
receiver?"
5395,Explain.
5396,P40.
5397,Consider Figure 3.58 .
5398,"Assuming TCP Reno is the protocol experiencing the behavior
shown above, answer the following questions."
5399,"In all cases, you should provide a short
discussion justifying your answer."
5400,"Examining the behavior of TCP
a."
5401,Identify the intervals of time when TCP slow start is operating.
5402,b.
5403,Identify the intervals of time when TCP congestion avoidance is operating.
5404,c.
5405,"After the 16th transmission round, is segment loss detected by a triple duplicate ACK or
by a timeout?"
5406,d.
5407,"After the 22nd transmission round, is segment loss detected by a triple duplicate ACK orby a timeout?"
5408,"Figure 3.58 TCP window size as a function of timeλ′in out
λ′inoute."
5409,What is the initial value of ssthresh  at the first transmission round?
5410,f.
5411,What is the value of ssthresh  at the 18th transmission round?
5412,g.
5413,What is the value of ssthresh  at the 24th transmission round?
5414,h.
5415,During what transmission round is the 70th segment sent?
5416,i.
5417,"Assuming a packet loss is detected after the 26th round by the receipt of a triple
duplicate ACK, what will be the values of the congestion window size and of
ssthresh ?"
5418,j.
5419,"Suppose TCP Tahoe is used (instead of TCP Reno), and assume that triple duplicate
ACKs are received at the 16th round."
5420,"What are the ssthresh  and the congestion
window size at the 19th round?"
5421,k.
5422,"Again suppose TCP Tahoe is used, and there is a timeout event at 22nd round."
5423,"How
many packets have been sent out from 17th round till 22nd round, inclusive?"
5424,P41.
5425,"Refer to Figure 3.55 , which illustrates the convergence of TCP’s AIMD algorithm."
5426,"Suppose
that instead of a multiplicative decrease, TCP decreased the window size by a constant amount."
5427,Would the resulting AIAD algorithm converge to an equal share algorithm?
5428,"Justify your answer
using a diagram similar to Figure 3.55 ."
5429,P42.
5430,"In Section 3.5.4 , we discussed the doubling of the timeout interval after a timeout event."
5431,This mechanism is a form of congestion control.
5432,"Why does TCP need a window-based
congestion-control mechanism (as studied in Section 3.7 ) in addition to this doubling-timeout-
interval mechanism?P43."
5433,Host A is sending an enormous file to Host B over a TCP connection.
5434,"Over this connection
there is never any packet loss and the timers never expire."
5435,"Denote the transmission rate of the
link connecting Host A to the Internet by R bps."
5436,"Suppose that the process in Host A is capable of
sending data into its TCP socket at a rate S bps, where  Further suppose that the TCP
receive buffer is large enough to hold the entire file, and the send buffer can hold only one
percent of the file."
5437,"What would prevent the process in Host A from continuously passing data to
its TCP socket at rate S bps?"
5438,TCP flow control?
5439,TCP congestion control?
5440,Or something else?
5441,Elaborate.P44.
5442,"Consider sending a large file from a host to another over a TCP connection that has no
loss."
5443,a.
5444,Suppose TCP uses AIMD for its congestion control without slow start.
5445,"Assuming cwnd
increases by 1 MSS every time a batch of ACKs is received and assuming approximately
constant round-trip times, how long does it take for cwnd  increase from 6 MSS to 12
MSS (assuming no loss events)?"
5446,b.
5447,"What is the average throughout (in terms of MSS and RTT) for this connection up
through ?"
5448,P45.
5449,Recall the macroscopic description of TCP throughput.
5450,In the period of time from when theS=10⋅R.
5451,"time=6 RTTconnection’s rate varies from W/(2 · RTT) to W/RTT , only one packet is lost (at the very end of
the period)."
5452,a.
5453,"Show that the loss rate (fraction of packets lost) is equal to
b."
5454,"Use the result above to show that if a connection has loss rate L, then its average rate is
approximately given by
P46."
5455,"Consider that only a single TCP (Reno) connection uses one 10Mbps link which does not
buffer any data."
5456,"Suppose that this link is the only congested link between the sending and
receiving hosts."
5457,"Assume that the TCP sender has a huge file to send to the receiver, and thereceiver’s receive buffer is much larger than the congestion window."
5458,"We also make the followingassumptions: each TCP segment size is 1,500 bytes; the two-way propagation delay of thisconnection is 150 msec; and this TCP connection is always in congestion avoidance phase, thatis, ignore slow start."
5459,a.
5460,What is the maximum window size (in segments) that this TCP connection can achieve?
5461,b.
5462,"What is the average window size (in segments) and average throughput (in bps) of this
TCP connection?"
5463,c.
5464,How long would it take for this TCP connection to reach its maximum window again afterrecovering from a packet loss?
5465,P47.
5466,Consider the scenario described in the previous problem.
5467,"Suppose that the 10Mbps link
can buffer a finite number of segments."
5468,"Argue that in order for the link to always be busy sending
data, we would like to choose a buffer size that is at least the product of the link speed C and the
two-way propagation delay between the sender and the receiver.P48."
5469,"Repeat Problem 46, but replacing the 10 Mbps link with a 10 Gbps link."
5470,"Note that in your
answer to part c, you will realize that it takes a very long time for the congestion window size to
reach its maximum window size after recovering from a packet loss."
5471,Sketch a solution to solvethis problem.
5472,P49.
5473,"Let T (measured by RTT) denote the time interval that a TCP connection takes to increase
its congestion window size from W/2 to W, where W is the maximum congestion window size."
5474,Argue that T is a function of TCP’s average throughput.
5475,P50.
5476,"Consider a simplified TCP’s AIMD algorithm where the congestion window size is
measured in number of segments, not in bytes."
5477,"In additive increase, the congestion window size
increases by one segment in each RTT."
5478,"In multiplicative decrease, the congestion window sizedecreases by half (if the result is not an integer, round down to the nearest integer)."
5479,"Suppose
that two TCP connections, C  and C , share a single congested link of speed 30 segments per
second."
5480,Assume that both C  and C  are in the congestion avoidance phase.
5481,"Connection C ’s
RTT is 50 msec and connection C ’s RTT is 100 msec."
5482,"Assume that when the data rate in theL=loss rate=138W2+34W
≈1.22⋅MSSRTTL
1 2
1 2 1
2link exceeds the link’s speed, all TCP connections experience data segment loss."
5483,a.
5484,"If both C  and C  at time t  have a congestion window of 10 segments, what are their
congestion window sizes after 1000 msec?"
5485,b.
5486,"In the long run, will these two connections get the same share of the bandwidth of the
congested link?"
5487,Explain.
5488,P51.
5489,Consider the network described in the previous problem.
5490,"Now suppose that the two TCP
connections, C1 and C2, have the same RTT of 100 msec."
5491,"Suppose that at time t , C1’s
congestion window size is 15 segments but C2’s congestion window size is 10 segments."
5492,a.
5493,What are their congestion window sizes after 2200 msec?
5494,b.
5495,"In the long run, will these two connections get about the same share of the bandwidth of
the congested link?"
5496,c.
5497,"We say that two connections are synchronized, if both connections reach their maximumwindow sizes at the same time and reach their minimum window sizes at the same time."
5498,"In the long run, will these two connections get synchronized eventually?"
5499,"If so, what aretheir maximum window sizes?"
5500,d.
5501,Will this synchronization help to improve the utilization of the shared link?
5502,Why?
5503,"Sketch
some idea to break this synchronization."
5504,P52.
5505,Consider a modification to TCP’s congestion control algorithm.
5506,"Instead of additive increase,
we can use multiplicative increase."
5507,"A TCP sender increases its window size by a small positive
constant  whenever it receives a valid ACK."
5508,"Find the functional relationship between
loss rate L and maximum congestion window W."
5509,"Argue that for this modified TCP, regardless ofTCP’s average throughput, a TCP connection always spends the same amount of time to
increase its congestion window size from W/2 to W."
5510,P53.
5511,"In our discussion of TCP futures in Section 3.7 , we noted that to achieve a throughput of
10 Gbps, TCP could only tolerate a segment loss probability of  (or equivalently, one
loss event for every 5,000,000,000 segments)."
5512,"Show the derivation for the values of  (1
out of 5,000,000) for the RTT and MSS values given in Section 3.7 ."
5513,"If TCP needed to support a
100 Gbps connection, what would the tolerable loss be?"
5514,P54.
5515,"In our discussion of TCP congestion control in Section 3.7 , we implicitly assumed that the
TCP sender always had data to send."
5516,Consider now the case that the TCP sender sends a largeamount of data and then goes idle (since it has no more data to send) at t.
5517,"TCP remains idle for
a relatively long period of time and then wants to send more data at t."
5518,"What are the advantages
and disadvantages of having TCP use the cwnd  and ssthresh  values from t  when starting to
send data at t ?"
5519,What alternative would you recommend?
5520,Why?
5521,P55.
5522,"In this problem we investigate whether either UDP or TCP provides a degree of end-point
authentication."
5523,a.
5524,"Consider a server that receives a request within a UDP packet and responds to thatrequest within a UDP packet (for example, as done by a DNS server)."
5525,"If a client with IP1 2 0
0
a(0<a<1)
2⋅10−10
2⋅10−10
1
2
1
2Programming Assignments
Implementing a Reliable Transport Protocol
In this laboratory programming assignment, you will be writing the sending and receiving transport-level
code for implementing a simple reliable data transfer protocol."
5526,"There are two versions of this lab, thealternating-bit-protocol version and the GBN version."
5527,"This lab should be fun—your implementation will
differ very little from what would be required in a real-world situation."
5528,"Since you probably don’t have standalone machines (with an OS that you can modify), your code will
have to execute in a simulated hardware/software environment."
5529,"However, the programming interfaceprovided to your routines—the code that would call your entities from above and from below—is veryclose to what is done in an actual UNIX environment."
5530,"(Indeed, the software interfaces described in thisprogramming assignment are much more realistic than the infinite loop senders and receivers that manytexts describe.) Stopping and starting timers are also simulated, and timer interrupts will cause your
timer handling routine to be activated."
5531,"The full lab assignment, as well as code you will need to compile with your own code, are available at
this book’s Web site: www.pearsonhighered.com/ cs-resources ."
5532,"Wireshark Lab: Exploring TCPaddress X spoofs its address with address Y, where will the server send its response?"
5533,b.
5534,"Suppose a server receives a SYN with IP source address Y, and after responding with a
SYNACK, receives an ACK with IP source address Y with the correct acknowledgment
number."
5535,"Assuming the server chooses a random initial sequence number and there is no“man-in-the-middle,” can the server be certain that the client is indeed at Y (and not at
some other address X that is spoofing Y)?"
5536,P56.
5537,"In this problem, we consider the delay introduced by the TCP slow-start phase."
5538,"Consider a
client and a Web server directly connected by one link of rate R."
5539,"Suppose the client wants to
retrieve an object whose size is exactly equal to 15 S, where S is the maximum segment size
(MSS)."
5540,"Denote the round-trip time between client and server as RTT (assumed to be constant).Ignoring protocol headers, determine the time to retrieve the object (including TCP connectionestablishment) when
a."
5541,"
b."
5542,"
c."
5543,".4 S/R>S/R+RTT>2S/RS/R+RTT>4 S/RS/R>RTTIn this lab, you’ll use your Web browser to access a file from a Web server."
5544,"As in earlier Wireshark labs,
you’ll use Wireshark to capture the packets arriving at your computer."
5545,"Unlike earlier labs, you’ll also be
able to download a Wireshark-readable packet trace from the Web server from which you downloaded
the file."
5546,"In this server trace, you’ll find the packets that were generated by your own access of the Webserver."
5547,You’ll analyze the client- and server-side traces to explore aspects of TCP.
5548,"In particular, you’ll
evaluate the performance of the TCP connection between your computer and the Web server."
5549,"You’ll
trace TCP’s window behavior, and infer packet loss, retransmission, flow control and congestion controlbehavior, and estimated roundtrip time."
5550,"As is the case with all Wireshark labs, the full description of this lab is available at this book’s Web site,
www.pearsonhighered.com/ cs-resources ."
5551,"Wireshark Lab: Exploring UDP
In this short lab, you’ll do a packet capture and analysis of your favorite application that uses UDP (for
example, DNS or a multimedia application such as Skype)."
5552,"As we learned in Section 3.3, UDP is a
simple, no-frills transport protocol."
5553,"In this lab, you’ll investigate the header fields in the UDP segment as
well as the checksum calculation."
5554,"As is the case with all Wireshark labs, the full description of this lab is available at this book’s Web site,
www.pearsonhighered.com/ cs-resources ."
5555,AN INTERVIEW WITH...
5556,"Van Jacobson
Van Jacobson works at Google and was previously a Research Fellow at PARC."
5557,"Prior to that, hewas co-founder and Chief Scientist of Packet Design."
5558,"Before that, he was Chief Scientist atCisco."
5559,"Before joining Cisco, he was head of the Network Research Group at Lawrence BerkeleyNational Laboratory and taught at UC Berkeley and Stanford."
5560,"Van received the ACM SIGCOMMAward in 2001 for outstanding lifetime contribution to the field of communication networks and
the IEEE Kobayashi Award in 2002 for “contributing to the understanding of network congestion
and developing congestion control mechanisms that enabled the successful scaling of theInternet”."
5561,He was elected to the U.S. National Academy of Engineering in 2004.Please describe one or two of the most exciting projects you have worked on during your career.
5562,What were the biggest challenges?
5563,School teaches us lots of ways to find answers.
5564,"In every interesting problem I’ve worked on, the
challenge has been finding the right question."
5565,"When Mike Karels and I started looking at TCPcongestion, we spent months staring at protocol and packet traces asking “Why is it failing?”.One day in Mike’s office, one of us said “The reason I can’t figure out why it fails is because Idon’t understand how it ever worked to begin with.” That turned out to be the right question and
it forced us to figure out the “ack clocking” that makes TCP work."
5566,"After that, the rest was easy."
5567,"More generally, where do you see the future of networking and the Internet?"
5568,"For most people, the Web is the Internet."
5569,"Networking geeks smile politely since we know the
Web is an application running over the Internet but what if they’re right?"
5570,The Internet is aboutenabling conversations between pairs of hosts.
5571,The Web is about distributed informationproduction and consumption.
5572,“Information propagation” is a very general view of communicationof which “pairwise conversation” is a tiny subset.
5573,"We need to move into the larger tent.Networking today deals with broadcast media (radios, PONs, etc.) by pretending it’s a point-to-point wire."
5574,That’s massively inefficient.
5575,Terabits-per-second of data are being exchanged all overthe World via thumb drives or smart phones but we don’t know how to treat that as “networking”.
5576,ISPs are busily setting up caches and CDNs to scalably distribute video and audio.
5577,"Caching is a
necessary part of the solution but there’s no part of today’s networking—from Information,Queuing or Traffic Theory down to the Internet protocol specs—that tells us how to engineer and
deploy it."
5578,"I think and hope that over the next few years, networking will evolve to embrace themuch larger vision of communication that underlies the Web."
5579,"What people inspired you professionally?When I was in grad school, Richard Feynman visited and gave a colloquium."
5580,"He talked about a
piece of Quantum theory that I’d been struggling with all semester and his explanation was so
simple and lucid that what had been incomprehensible gibberish to me became obvious andinevitable."
5581,That ability to see and convey the simplicity that underlies our complex world seemsto me a rare and wonderful gift.
5582,"What are your recommendations for students who want careers in computer science and
networking?"
5583,"It’s a wonderful field—computers and networking have probably had more impact on society
than any invention since the book."
5584,"Networking is fundamentally about connecting stuff, and
studying it helps you make intellectual connections: Ant foraging & Bee dances demonstrate
protocol design better than RFCs, traffic jams or people leaving a packed stadium are theessence of congestion, and students finding flights back to school in a post-Thanksgivingblizzard are the core of dynamic routing."
5585,"If you’re interested in lots of stuff and want to have animpact, it’s hard to imagine a better field.Chapter 4 The Network Layer: Data Plane
We learned in the previous chapter that the transport layer provides various forms of process-to-process
communication by relying on the network layer’s host-to-host communication service."
5586,We also learnedthat the transport layer does so without any knowledge about how the network layer actually implementsthis service.
5587,"So perhaps you’re now wondering, what’s under the hood of the host-to-hostcommunication service, what makes it tick?"
5588,"In this chapter and the next, we’ll learn exactly how the network layer can provide its host-to-host
communication service."
5589,"We’ll see that unlike the transport and application layers, there is a piece of the
network layer in each and every host and router in the network."
5590," Because of this, network-layer protocols
are among the most challenging (and therefore among the most interesting!) in the protocol stack."
5591,"Since the network layer is arguably the most complex layer in the protocol stack, we’ll have a lot of
ground to cover here."
5592,"Indeed, there is so much to cover that we cover the network layer in two chapters."
5593,"We’ll see that the network layer can be decomposed into two interacting parts, the data plane and the
control plane ."
5594,"In Chapter 4, we’ll first cover the data plane functions of the network layer—the per-
router functions in the network layer that determine how a datagram (that is, a network-layer packet)
arriving on one of a router’s input links is forwarded to one of that router’s output links."
5595,"We’ll cover both
traditional IP forwarding (where forwarding is based on a datagram’s destination address) andgeneralized forwarding (where forwarding and other functions may be performed using values in severaldifferent fields in the datagram’s header)."
5596,"We’ll study the IPv4 and IPv6 protocols and addressing in
detail."
5597,"In Chapter 5, we’ll cover the control plane functions of the network layer—the network-wide  logic
that controls how a datagram is routed among routers along an end-to-end path from the source host to
the destination host."
5598,"We’ll cover routing algorithms, as well as routing protocols, such as OSPF and
BGP, that are in widespread use in today’s Internet."
5599,"Traditionally, these control-plane routing protocolsand data-plane forwarding functions have been implemented together, monolithically, within a router.Software-defined networking (SDN) explicitly separates the data plane and control plane byimplementing these control plane functions as a separate service, typically in a remote “controller.” We’ll
also cover SDN controllers in Chapter 5."
5600,"This distinction between data-plane and control-plane functions in the network layer is an important
concept to keep in mind as you learn about the network layer  —it will help structure your thinking aboutthe network layer and reflects a modern view of the network layer’s role in computer networking.4.1 Overview of Network Layer
Figure 4.1 shows a simple network with two hosts, H1 and H2, and several routers on the path between
H1 and H2."
5601,"Let’s suppose that H1 is sending information to H2, and consider the role of the network
layer in these hosts and in the intervening routers."
5602,"The network layer in H1 takes segments from thetransport layer in H1, encapsulates each segment into a datagram, and then sends the datagrams to its
nearby router, R1."
5603,"At the receiving host, H2, the network layer receives the datagrams from its nearby
router R2, extracts the transport-layer segments, and delivers the segments up to the transport layer atH2."
5604,"The primary data-plane role of each router is to forward datagrams from its input links to its outputlinks; the primary role of the network control plane is to coordinate these local, per-router forwardingactions so that datagrams are ultimately transferred end-to-end, along paths of routers between source
and destination hosts."
5605,"Note that the routers in Figure 4.1 are shown with a truncated protocol stack, that
is, with no upper layers above the network layer, because routers do not run application- and transport-layer protocols such as those we examined in Chapters 2 and 3."
5606,"4.1.1 Forwarding and Routing: The Data and Control Planes
The primary role of the network layer is deceptively simple—to move packets from a sending host to a
receiving host."
5607,"To do so, two important network-layer functions can be identified:
Forwarding."
5608," When a packet arrives at a router’s input link, the router must move the packet to the
appropriate output link."
5609,"For example, a packet arriving from Host H1 to Router R1 in Figure 4.1 must
be forwarded to the next router on a path to H2."
5610,"As we will see, forwarding is but one function (albeitthe mostFigure 4.1 The network layer
common and important one!) implemented in the data plane."
5611,"In the more general case, which we’ll
cover in Section 4.4, a packet might also be blocked from exiting a router (e.g., if the packet
originated at a known malicious sending host, or if the packet were destined to a forbidden
destination host), or might be duplicated and sent over multiple outgoing links."
5612,Routing.
5613," The network layer must determine the route or path taken by packets as they flow from a
sender to a receiver."
5614,"The algorithms that calculate these paths are referred to as routing
algorithms ."
5615,"A routing algorithm would determine, for example, the path along which packets flowfrom H1 to H2 in Figure 4.1. Routing is implemented in the control plane of the network layer."
5616,"The terms forwarding  and routing  are often used interchangeably by authors discussing the network
layer."
5617,We’ll use these terms much more precisely in this book.
5618,"Forwarding  refers to the router-local
action of transferring a packet from an input link interface to the appropriate output link interface."
5619,"Forwarding takes place at very short timescales (typically a few nanoseconds), and thus is typicallyimplemented in hardware."
5620,"Routing  refers to the network-wide process that determines the end-to-end
paths that packets take from source to destination."
5621,"Routing takes place on much longer timescales(typically seconds), and as we will see is often implemented in software."
5622,"Using our driving analogy,
consider the trip from Pennsylvania to Florida undertaken by our traveler back in Section 1.3.1. During
this trip, our driver passes through many interchanges en route to Florida."
5623,"We can think of forwarding as
the process of getting through a single interchange: A car enters the interchange from one road anddetermines which road it should take to leave the interchange."
5624,"We can think of routing as the process of
planning the trip from Pennsylvania to Florida: Before embarking on the trip, the driver has consulted a
map and chosen one of many paths possible, with each path consisting of a series of road segmentsconnected at interchanges."
5625,A key element in every network router is its forwarding table .
5626,"A router forwards a packet by examining
the value of one or more fields in the arriving packet’s header, and then using these header values to
index into its forwarding table."
5627,"The value stored in the forwarding table entry for those values indicates
the outgoing link interface at that router to which that packet is to be forwarded."
5628,"For example, in Figure
4.2, a packet with header field value of 0110  arrives to a router."
5629,"The router indexes into its forwarding
table and determines that the output link interface for this packet is interface 2."
5630,The router then internallyforwards the packet to interface 2.
5631,"In Section 4.2, we’ll look inside a router and examine the forwarding
function in much greater detail."
5632,"Forwarding is the key function performed by the data-plane functionality
of the network layer."
5633,"Control Plane: The Traditional Approach
But now you are undoubtedly wondering how a router’s forwarding tables are configured in the first
place."
5634,"This is a crucial issue, one that exposes the important interplay between forwarding (in dataplane) and routing (in control plane)."
5635,"As shownFigure 4.2 Routing algorithms determine values in forward tables
in Figure 4.2, the routing algorithm determines the contents of the routers’ forwarding tables."
5636,"In this
example, a routing algorithm runs in each and every router and both forwarding and routing functions
are contained within a router."
5637,"As we’ll see in Sections 5.3 and 5.4, the routing algorithm function in one
router communicates with the routing algorithm function in other routers to compute the values for its
forwarding table."
5638,How is this communication performed?
5639,"By exchanging routing messages containingrouting information according to a routing protocol! We’ll cover routing algorithms and protocols in
Sections 5.2 through 5.4.
The distinct and different purposes of the forwarding and routing functions can be further illustrated by
considering the hypothetical (and unrealistic, but technically feasible) case of a network in which all
forwarding tables are configured directly by human network operators physically present at the routers."
5640,"In this case, no routing protocols would be required! Of course, the human operators would need to
interact with each other to ensure that the forwarding tables were configured in such a way that packets
reached their intended destinations."
5641,It’s also likely that human configuration would be more error-proneand much slower to respond to changes in the network topology than a routing protocol.
5642,"We’re thus
fortunate that all networks have both a forwarding and a routing function!
Control Plane: The SDN Approach
The approach to implementing routing functionality shown in Figure 4.2—with each router having a
routing component that communicates with the routing component of other routers—has been thetraditional approach adopted by routing vendors in their products, at least until recently."
5643,"Our observation
that humans could manually configure forwarding tables does suggest, however, that there may be
other ways for control-plane functionality to determine the contents of the data-plane forwarding tables."
5644,"Figure 4.3 shows an alternate approach in which a physically separate (from the routers), remote
controller computes and distributes the forwarding tables to be used by each and every router."
5645,"Note that
the data plane components of Figures 4.2 and 4.3 are identical."
5646,"In Figure 4.3, however, control-plane
routing functionality is separated
Figure 4.3 A remote controller determines and distributes values in ­forwarding tables
from the physical router—the routing device performs forwarding only, while the remote controller
computes and distributes forwarding tables."
5647,"The remote controller might be implemented in a remote
data center with high reliability and redundancy, and might be managed by the ISP or some third party.How might the routers and the remote controller communicate?"
5648,"By exchanging messages containing
forwarding tables and other pieces of routing information."
5649,"The control-plane approach shown in Figure
4.3 is at the heart of software-defined networking (SDN) , where the network is “software-defined”
because the controller that computes forwarding tables and interacts with routers is implemented in
software."
5650,"Increasingly, these software implementations are also open, i.e., similar to Linux OS code, thecode is publically available, allowing ISPs (and networking researchers and students!) to innovate and
propose changes to the software that controls network-layer functionality."
5651,"We will cover the SDN control
plane in Section 5.5.
4.1.2 Network Service Model
Before delving into the network layer’s data plane, let’s wrap up our introduction by taking the broader
view and consider the different types of service that might be offered by the network layer."
5652,"When thetransport layer at a sending host transmits a packet into the network (that is, passes it down to thenetwork layer at the sending host), can the transport layer rely on the network layer to deliver the packetto the destination?"
5653,"When multiple packets are sent, will they be delivered to the transport layer in the
receiving host in the order in which they were sent?"
5654,"Will the amount of time between the sending of two
sequential packet transmissions be the same as the amount of time between their reception?"
5655,Will thenetwork provide any feedback about congestion in the network?
5656,The answers to these questions andothers are determined by the service model provided by the network layer.
5657,"The network service model
defines the characteristics of end-to-end delivery of packets between sending and receiving hosts."
5658,Let’s now consider some possible services that the network layer could provide.
5659,"These services could
include:
Guaranteed delivery."
5660,"This service guarantees that a packet sent by a source host will eventually
arrive at the destination host."
5661,Guaranteed delivery with bounded delay.
5662," This service not only guarantees delivery of the packet,
but delivery within a specified host-to-host delay bound (for example, within 100 msec)."
5663,In-order packet delivery.
5664,This service guarantees that packets arrive at the destination in the orderthat they were sent.
5665,Guaranteed minimal bandwidth.
5666," This network-layer service emulates the behavior of a
transmission link of a specified bit rate (for example, 1 Mbps) between sending and receiving hosts."
5667,"As long as the sending host transmits bits (as part of packets) at a rate below the specified bit rate,
then all packets are eventually delivered to the destination host."
5668,Security.
5669,"The network layer could encrypt all datagrams at the source and decrypt them at the
destination, thereby providing confidentiality to all transport-layer segments."
5670,"This is only a partial list of services that a network layer could provide—there are countless variations
possible."
5671,"The Internet’s network layer provides a single service, known as best-effort service ."
5672,"With best-effort
service, packets are neither guaranteed to be received in the order in which they were sent, nor is their
eventual delivery even guaranteed."
5673,There is no guarantee on the end-to-end delay nor is there aminimal bandwidth guarantee.
5674,"It might appear that best-effort service is a euphemism for no service at
all—a network that delivered no packets to the destination would satisfy the definition of best-effort
delivery service! Other network architectures have defined and implemented service models that go
beyond the Internet’s best-effort service."
5675,"For example, the ATM network architecture [MFA Forum
2016 , Black 1995]  provides for guaranteed in-order delay, bounded delay, and guaranteed minimal
bandwidth."
5676,"There have also been proposed service model extensions to the Internet architecture; forexample, the Intserv architecture [RFC 1633]  aims to provide end-end delay guarantees and
congestion-free communication."
5677,"Interestingly, in spite of these well-developed alternatives, the Internet’s
basic best-effort service model combined with adequate bandwidth provisioning have arguably proven tobe more than “good enough” to enable an amazing range of applications, including streaming videoservices such as Netflix and voice-and-video-over-IP, real-time conferencing applications such as Skypeand Facetime."
5678,"An Overview of Chapter 4
Having now provided an overview of the network layer, we’ll cover the data-plane component of the
network layer in the following sections in this chapter."
5679,"In Section 4.2, we’ll dive down into the internal
hardware operations of a router, including input and output packet processing, the router’s internalswitching mechanism, and packet queueing and scheduling."
5680,"In Section 4.3, we’ll take a look at
traditional IP forwarding, in which packets are forwarded to output ports based on their destination IPaddresses."
5681,"We’ll encounter IP addressing, the celebrated IPv4 and IPv6 protocols and more."
5682,"In Section
4.4, we’ll cover more generalized forwarding, where packets may be forwarded to output ports based on
a large number of header values (i.e., not only based on destination IP address)."
5683,"Packets may be
blocked or duplicated at the router, or may have certain header field values rewritten—all under softwarecontrol."
5684,"This more generalized form of packet forwarding is a key component of a modern network dataplane, including the data plane in software-defined networks (SDN)."
5685,"We mention here in passing that the terms forwarding  and switching  are often used interchangeably by
computer-networking researchers and practitioners; we’ll use both terms interchangeably in this
textbook as well."
5686,"While we’re on the topic of terminology, it’s also worth mentioning two other terms that
are often used interchangeably, but that we will use more carefully."
5687,"We’ll reserve the term packet switch
to mean a general packet-switching device that transfers a packet from input link interface to output link
interface, according to values in a packet’s header fields."
5688,"Some packet switches, called link-layer
switches  (examined in Chapter 6), base their forwarding decision on values in the fields of the link-
layer frame; switches are thus referred to as link-layer (layer 2) devices."
5689,"Other packet switches, calledrouters, base their forwarding decision on header field values in the network-layer datagram."
5690,Routersare thus network-layer (layer 3) devices.
5691,"(To fully appreciate this important distinction, you might want to
review Section 1.5.2, where we discuss network-layer datagrams and link-layer frames and their
relationship.) Since our focus in this chapter is on the network layer, we’ll mostly use the term router in
place of packet switch.4.2 What’s Inside a Router?"
5692,"Now that we’ve overviewed the data and control planes within the network layer, the important
distinction between forwarding and routing, and the services and functions of the network layer, let’s turnour attention to its forwarding function—the actual transfer of packets from a router’s incoming links tothe appropriate outgoing links at that router."
5693,"A high-level view of a generic router architecture is shown in Figure 4.4. Four router components can be
identified:
Figure 4.4 Router architecture
Input ports."
5694, An input port  performs several key functions.
5695,"It performs the physical layer function of
terminating an incoming physical link at a router; this is shown in the leftmost box of an input port
and the rightmost box of an output port in Figure 4.4. An input port also performs link-layer functions
needed to interoperate with the link layer at the other side of the incoming link; this is represented by
the middle boxes in the input and output ports."
5696,"Perhaps most crucially, a lookup function is also
performed at the input port; this will occur in the rightmost box of the input port."
5697,It is here that theforwarding table is consulted to determine the router output port to which an arriving packet will beforwarded via the switching fabric.
5698,"Control packets (for example, packets carrying routing protocolinformation) are forwarded from an input port to the routing processor."
5699,Note that the term “port” here—referring to the physical input and output router interfaces—is distinctly different from the softwareports associated with network applications and sockets discussed in Chapters 2 and 3.
5700,"In practice,
the number of ports supported by a router can range from a relatively small number in enterprise
routers, to hundreds of 10 Gbps ports in a router at an ISP’s edge, where the number of incominglines tends to be the greatest."
5701,"The Juniper MX2020, edge router, for example, supports up to 960 10
Gbps Ethernet ports, with an overall router system capacity of 80 Tbps [Juniper MX 2020 2016]."
5702,Switching fabric.
5703, The switching fabric connects the router’s input ports to its output ports.
5704,"This
switching fabric is completely contained within the router—a network inside of a network router!
Output ports."
5705," An output port  stores packets received from the switching fabric and transmits these
packets on the outgoing link by performing the necessary link-layer and physical-layer functions."
5706,"When a link is bidirectional (that is, carries traffic in both directions), an output port will typically bepaired with the input port for that link on the same line card."
5707,Routing processor.
5708, The routing processor performs control-plane functions.
5709,"In traditional routers, it
executes the routing protocols (which we’ll study in Sections 5.3 and 5.4), maintains routing tables
and attached link state information, and computes the forwarding table for the router."
5710,"In SDNrouters, the routing processor is responsible for communicating with the remote controller in order to
(among other activities) receive forwarding table entries computed by the remote controller, and
install these entries in the router’s input ports."
5711,"The routing processor also performs the network
management functions that we’ll study in Section 5.7.
A router’s input ports, output ports, and switching fabric are almost always implemented in hardware, asshown in Figure 4.4. To appreciate why a hardware implementation is needed, consider that with a 10
Gbps input link and a 64-byte IP datagram, the input port has only 51.2 ns to process the datagrambefore another datagram may arrive."
5712,"If N ports are combined on a line card (as is often done in
practice), the datagram-processing pipeline must operate N times faster—far too fast for software
implementation."
5713,"Forwarding hardware can be implemented either using a router vendor’s own hardware
designs, or constructed using purchased merchant-silicon chips (e.g., as sold by companies such asIntel and Broadcom)."
5714,"While the data plane operates at the nanosecond time scale, a router’s control functions—executing the
routing protocols, responding to attached links that go up or down, communicating with the remotecontroller (in the SDN case) and performing management functions—operate at the millisecond orsecond timescale."
5715,"These control plane  functions are thus usually implemented in software and execute
on the routing processor (typically a traditional CPU)."
5716,"Before delving into the details of router internals, let’s return to our analogy from the beginning of this
chapter, where packet forwarding was compared to cars entering and leaving an interchange."
5717,"Let’ssuppose that the interchange is a roundabout, and that as a car enters the roundabout, a bit ofprocessing is required."
5718,"Let’s consider what information is required for this processing:
Destination-based forwarding."
5719," Suppose the car stops at an entry station and indicates its finaldestination (not at the local roundabout, but the ultimate destination of its journey)."
5720,"An attendant at
the entry station looks up the final destination, determines the roundabout exit that leads to that final
destination, and tells the driver which roundabout exit to take."
5721,Generalized forwarding.
5722," The attendant could also determine the car’s exit ramp on the basis of
many other factors besides the destination."
5723,"For example, the selected exit ramp might depend onthe car’s origin, for example the state that issued the car’s license plate."
5724,"Cars from a certain set ofstates might be directed to use one exit ramp (that leads to the destination via a slow road), while
cars from other states might be directed to use a different exit ramp (that leads to the destination via
superhighway)."
5725,"The same decision might be made based on the model, make and year of the car.Or a car not deemed roadworthy might be blocked and not be allowed to pass through theroundabout."
5726,"In the case of generalized forwarding, any number of factors may contribute to theattendant’s choice of the exit ramp for a given car."
5727,"Once the car enters the roundabout (which may be filled with other cars entering from other input roadsand heading to other roundabout exits), it eventually leaves at the prescribed roundabout exit ramp,where it may encounter other cars leaving the roundabout at that exit."
5728,"We can easily recognize the principal router components in Figure 4.4 in this analogy—the entry road
and entry station correspond to the input port (with a lookup function to determine to local outgoing port);
the roundabout corresponds to the switch fabric; and the roundabout exit road corresponds to the outputport."
5729,"With this analogy, it’s instructive to consider where bottlenecks might occur."
5730,"What happens if carsarrive blazingly fast (for example, the roundabout is in Germany or Italy!) but the station attendant isslow?"
5731,How fast must the attendant work to ensure there’s no backup on an entry road?
5732,"Even with ablazingly fast attendant, what happens if cars traverse the roundabout slowly—can backups still occur?"
5733,And what happens if most of the cars entering at all of the roundabout’s entrance ramps all want toleave the roundabout at the same exit ramp—can backups occur at the exit ramp or elsewhere?
5734,"Howshould the roundabout operate if we want to assign priorities to different cars, or block certain cars fromentering the roundabout in the first place?"
5735,These are all analogous to critical questions faced by routerand switch designers.
5736,"In the following subsections, we’ll look at router functions in more detail."
5737,"[Iyer 2008 , Chao 2001;
Chuang 2005; Turner 1988; McKeown 1997a ; Partridge 1998; Sopranos 2011] provide a discussion
of specific router architectures."
5738,"For concreteness and simplicity, we’ll initially assume in this section that
forwarding decisions are based only on the packet’s destination address, rather than on a generalized
set of packet header fields."
5739,"We will cover the case of more generalized packet forwarding in Section
4.4.
4.2.1 Input Port Processing and Destination-Based ForwardingA more detailed view of input processing is shown in Figure 4.5. As just discussed, the input port’s line-
termination function and link-layer processing implement the physical and link layers for that individual
input link."
5740,The lookup performed in the input port is central to the router’s operation—it is here that therouter uses the forwarding table to look up the output port to which an arriving packet will be forwardedvia the switching fabric.
5741,"The forwarding table is either computed and updated by the routing processor(using a routing protocol to interact with the routing processors in other network routers) or is received
from a remote SDN controller."
5742,"The forwarding table is copied from the routing processor to the line
cards over a separate bus (e.g., a PCI bus) indicated by the dashed line from the routing processor to
the input line cards in Figure 4.4. With such a shadow copy at each line card, forwarding decisions can
be made locally, at each input port, without invoking the centralized routing processor on a per-packet
basis and thus avoiding a centralized processing bottleneck."
5743,"Let’s now consider the “simplest” case that the output port to which an incoming packet is to be switched
is based on the packet’s destination address."
5744,"In the case of 32-bit IP addresses, a brute-force
implementation of the forwarding table would have one entry for every possible destination address."
5745,"Since there are more than 4 billion possible addresses, this option is totally out of the question."
5746,"Figure 4.5 Input port processing
As an example of how this issue of scale can be handled, let’s suppose that our router has four links,
numbered 0 through 3, and that packets are to be forwarded to the link interfaces as follows:
Destination Address Range Link Interface
11001000 00010111 00010000 00000000
through
11001000 00010111 00010111 111111110
11001000 00010111 00011000 00000000 1through
11001000 00010111 00011000 11111111
11001000 00010111 00011001 00000000
through
11001000 00010111 00011111 111111112
Otherwise 3
Clearly, for this example, it is not necessary to have 4 billion entries in the router’s forwarding table."
5747,"We
could, for example, have the following forwarding table with just four entries:
Prefix Link Interface
11001000 00010111 00010 0
11001000 00010111 00011000 1
11001000 00010111 00011 2
Otherwise 3
With this style of forwarding table, the router matches a prefix of the packet’s destination address with
the entries in the table; if there’s a match, the router forwards the packet to a link associated with the
match."
5748,"For example, suppose the packet’s destination address is 11001000 00010111 00010110
10100001 ; because the 21-bit prefix of this address matches the first entry in the table, the router
forwards the packet to link interface 0."
5749,"If a prefix doesn’t match any of the first three entries, then the
router forwards the packet to the default interface 3."
5750,"Although this sounds simple enough, there’s a veryimportant subtlety here."
5751,"You may have noticed that it is possible for a destination address to match
more than one entry."
5752,"For example, the first 24 bits of the address 11001000 00010111 00011000
10101010  match the second entry in the table, and the first 21 bits of the address match the third entry
in the table."
5753,"When there are multiple matches, the router uses the longest prefix matching rule ; that
is, it finds the longest matching entry in the table and forwards the packet to the link interface associatedwith the longest prefix match."
5754,"We’ll see exactly why this longest prefix-matching rule is used when we
study Internet addressing in more detail in Section 4.3.Given the existence of a forwarding table, lookup is conceptually simple— ­hardware logic just searches
through the forwarding table looking for the longest prefix match."
5755,"But at Gigabit transmission rates, this
lookup must be performed in nanoseconds (recall our earlier example of a 10 Gbps link and a 64-byte IPdatagram)."
5756,"Thus, not only must lookup be performed in hardware, but techniques beyond a simple linear
search through a large table are needed; surveys of fast lookup algorithms can be found in [Gupta
2001 , Ruiz-Sanchez 2001]."
5757,"Special attention must also be paid to memory access times, resulting in
designs with embedded on-chip DRAM and faster SRAM (used as a DRAM cache) memories."
5758,"Inpractice, Ternary Content Addressable Memories (TCAMs) are also often used for lookup [Yu 2004]."
5759,"With a TCAM, a 32-bit IP address is presented to the memory, which returns the content of the
forwarding table entry for that address in essentially constant time."
5760,"The Cisco Catalyst 6500 and 7600
Series routers and switches can hold upwards of a million TCAM forwarding table entries [Cisco TCAM
2014] ."
5761,"Once a packet’s output port has been determined via the lookup, the packet can be sent into the
switching fabric."
5762,"In some designs, a packet may be temporarily blocked from entering the switchingfabric if packets from other input ports are currently using the fabric."
5763,A blocked packet will be queued atthe input port and then scheduled to cross the fabric at a later point in time.
5764,"We’ll take a closer look atthe blocking, queuing, and scheduling of packets (at both input ports and output ports) shortly."
5765,"Although“lookup” is arguably the most important action in input port processing, many other actions must betaken: (1) physical- and link-layer processing must occur, as discussed previously; (2) the packet’s
version number, checksum and time-to-live field—all of which we’ll study in Section 4.3—must be
checked and the latter two fields rewritten; and (3) counters used for network management (such as the
number of IP datagrams received) must be updated."
5766,"Let’s close our discussion of input port processing by noting that the input port steps of looking up a
destination IP address (“match”) and then sending the packet into the switching fabric to the specifiedoutput port (“action”) is a specific case of a more general “match plus action” abstraction that is
performed in many networked devices, not just routers."
5767,"In link-layer switches (covered in Chapter 6),
link-layer destination addresses are looked up and several actions may be taken in addition to sendingthe frame into the switching fabric towards the output port."
5768,"In firewalls (covered in Chapter 8)—devices
that filter out selected incoming packets—an incoming packet whose header matches a given criteria
(e.g., a combination of source/destination IP addresses and transport-layer port numbers) may be
dropped (action)."
5769,"In a network address translator (NAT, covered in Section 4.3), an incoming packet
whose transport-layer port number matches a given value will have its port number rewritten before
forwarding (action)."
5770,"Indeed, the “match plus action” abstraction is both powerful and prevalent in
network devices today, and is central to the notion of generalized forwarding that we’ll study in Section
4.4.4.2.2 Switching
The switching fabric is at the very heart of a router, as it is through this fabric that the packets are
actually switched (that is, forwarded) from an input port to an output port."
5771,"Switching can be
accomplished in a number of ways, as shown in Figure 4.6:
Switching via memory."
5772," The simplest, earliest routers were traditional computers, with switching
between input and output ports being done under direct control of the CPU (routing processor)."
5773,"Input
and output ports functioned as traditional I/O devices in a traditional operating system."
5774,An input portwith an arriving packet first signaled the routing processor via an interrupt.
5775,"The packet was then
copied from the input port into processor memory."
5776,"The routing processor then extracted the
destination address from the header, looked up the appropriate output port in the forwarding table,and copied the packet to the output port’s buffers."
5777,"In this scenario, if the memory bandwidth is such
that a maximum of B packets per second can be written into, or read from, memory, then the overall
forwarding throughput (the total rate at which packets are transferred from input ports to output
ports) must be less than B/2."
5778,"Note also that two packets cannot be forwarded
Figure 4.6 Three switching techniques
at the same time, even if they have different destination ports, since only one memory read/write can
be done at a time over the shared system bus."
5779,Some modern routers switch via memory.
5780,"A major difference from early routers, however, is that the
lookup of the destination address and the storing of the packet into the appropriate memory location
are performed by processing on the input line cards."
5781,"In some ways, routers that switch via memory
look very much like shared-memory multiprocessors, with the processing on a line card switching(writing) packets into the memory of the appropriate output port."
5782,"Cisco’s Catalyst 8500 series
switches [Cisco 8500 2016]  internally switches packets via a shared memory."
5783,Switching via a bus.
5784," In this approach, an input port transfers a packet directly to the output port
over a shared bus, without intervention by the routing processor."
5785,"This is typically done by having the
input port pre-pend a switch-internal label (header) to the packet indicating the local output port towhich this packet is being transferred and transmitting the packet onto the bus."
5786,"All output ports
receive the packet, but only the port that matches the label will keep the packet."
5787,"The label is then
removed at the output port, as this label is only used within the switch to cross the bus."
5788,"If multiplepackets arrive to the router at the same time, each at a different input port, all but one must waitsince only one packet can cross the bus at a time."
5789,"Because every packet must cross the single bus,the switching speed of the router is limited to the bus speed; in our roundabout analogy, this is as ifthe roundabout could only contain one car at a time."
5790,"Nonetheless, switching via a bus is oftensufficient for routers that operate in small local area and enterprise networks."
5791,"The Cisco 6500 router
[Cisco 6500 2016]  internally switches packets over a 32-Gbps-backplane bus."
5792,Switching via an interconnection network.
5793," One way to overcome the bandwidth limitation of a
single, shared bus is to use a more sophisticated interconnection network, such as those that have
been used in the past to interconnect processors in a multiprocessor computer architecture."
5794,"A
crossbar switch is an interconnection network consisting of 2 N buses that connect N input ports to N
output ports, as shown in Figure 4.6. Each vertical bus intersects each horizontal bus at a
crosspoint, which can be opened or closed at any time by the switch fabric controller (whose logic ispart of the switching fabric itself)."
5795,"When a packet arrives from port A and needs to be forwarded to
port Y, the switch controller closes the crosspoint at the intersection of busses A and Y, and port A
then sends the packet onto its bus, which is picked up (only) by bus Y."
5796,"Note that a packet from portB can be forwarded to port X at the same time, since the A-to-Y and B-to-X packets use differentinput and output busses."
5797,"Thus, unlike the previous two switching approaches, crossbar switches arecapable of forwarding multiple packets in parallel."
5798,"A crossbar switch is non-blocking —a packet
being forwarded to an output port will not be blocked from reaching that output port as long as noother packet is currently being forwarded to that output port."
5799,"However, if two packets from twodifferent input ports are destined to that same output port, then one will have to wait at the input,
since only one packet can be sent over any given bus at a time."
5800,"Cisco 12000 series switches [Cisco
12000 2016]  use a crossbar switching network; the Cisco 7600 series can be configured to use
either a bus or crossbar switch [Cisco 7600 2016] ."
5801,"More sophisticated interconnection networks use multiple stages of switching elements to allow
packets from different input ports to proceed towards the same output port at the same time through
the multi-stage switching fabric."
5802,See [Tobagi 1990] for a survey of switch architectures.
5803,"The Cisco
CRS employs a three-stage non-blocking switching strategy."
5804,"A router’s switching capacity can also
be scaled by running multiple switching fabrics in parallel."
5805,"In this approach, input ports and output
ports are connected to N switching fabrics that operate in parallel."
5806,"An input port breaks a packet into
K smaller chunks, and sends (“sprays”) the chunks through K of these N switching fabrics to the
selected output port, which reassembles the K chunks back into the original packet."
5807,"4.2.3 Output Port Processing
Output port processing, shown in Figure 4.7, takes packets that have been stored in the output port’s
memory and transmits them over the output link."
5808,"This includes selecting and de-queueing packets fortransmission, and performing the needed link-layer and physical-layer transmission functions."
5809,4.2.4 Where Does Queuing Occur?
5810,"If we consider input and output port functionality and the configurations shown in Figure 4.6, it’s clear
that packet queues may form at both the input ports and the output ports, just as we identified cases
where cars may wait at the inputs and outputs of the traffic intersection in our roundabout analogy."
5811,"The
location and extent of queueing (either at the input port queues or the output port queues) will depend
on the traffic load, the relative speed of the switching fabric, and the line speed."
5812,"Let’s now consider
these queues in a bit more detail, since as these queues grow large, the router’s memory can eventuallybe exhausted and packet loss will occur when no memory is available to store arriving packets."
5813,"Recall
that in our earlier ­discussions, we said that packets were “lost within the network” or “dropped at arouter.” It is here, at these queues within a router, where such packets are actually dropped and lost."
5814,"Figure 4.7 Output port processing
Suppose that the input and output line speeds (transmission rates) all have an identical transmission
rate of R  packets per second, and that there are N input ports and N output ports."
5815,"To further simplify
the discussion, let’s assume that all packets have the same fixed length, and that packets arrive to input
ports in a synchronous manner."
5816,"That is, the time to send a packet on any link is equal to the time toreceive a packet on any link, and during such an interval of time, either zero or one packets can arrive
on an input link."
5817,"Define the switching fabric transfer rate R  as the rate at which packets can be
moved from input port to output port."
5818,"If R  is N times faster than R , then only negligible queuing will
occur at the input ports."
5819,"This is because even in the worst case, where all N input lines are receiving
packets, and all packets are to be forwarded to the same output port, each batch of N packets (one
packet per input port) can be cleared through the switch fabric before the next batch arrives."
5820,"Input Queueing
But what happens if the switch fabric is not fast enough (relative to the input line speeds) to transfer all
arriving packets through the fabric without delay?"
5821,"In this case, packet queuing can also occur at the
input ports, as packets must join input port queues to wait their turn to be transferred through theswitching fabric to the output port."
5822,"To illustrate an important consequence of this queuing, consider acrossbar switching fabric and suppose that (1) all link speeds are identical, (2) that one packet can betransferred from any one input port to a given output port in the same amount of time it takes for apacket to be received on an input link, and (3) packets are moved from a given input queue to their
desired output queue in an FCFS manner."
5823,"Multiple packets can be transferred in parallel, as long as
their output ports are different."
5824,"However, if two packets at the front of two input queues are destined forthe same output queue, then one of the packets will be blocked and must wait at the input queue—theswitching fabric can transfer only one packet to a given output port at a time."
5825,"Figure 4.8 shows an example in which two packets (darkly shaded) at the front of their input queues are
destined for the same upper-right output port."
5826,"Suppose that the switch fabric chooses to transfer the
packet from the front of the upper-left queue."
5827,"In this case, the darkly shaded packet in the lower-left
queue must wait."
5828,"But not only must this darkly shaded packet wait, so too must the lightly shadedline
switch
switch linepacket that is queued behind that packet in the lower-left queue, even though there is no contention for
the middle-right output port (the destination for the lightly shaded packet)."
5829,"This phenomenon is known
as head-of-the-line  (HOL) blocking  in an input-queued switch—a queued packet in an input queue
must wait for transfer through the fabric (even though its output port is free) because it is blocked by
another packet at the head of the line."
5830,"[Karol 1987]  shows that due to HOL blocking, the input queue
will grow to unbounded length (informally, this is equivalent to saying that significant packet loss will
occur) under certain assumptions as soon as the packet arrival rate on the input links reaches only 58
percent of their capacity."
5831,A number of solutions to HOL blocking are discussed in [McKeown 1997].
5832,"Figure 4.8 HOL blocking at and input-queued switch
Output Queueing
Let’s next consider whether queueing can occur at a switch’s output ports."
5833,"Suppose that R  is again
N times faster than R  and that packets arriving at each of the N input ports are destined to the same
output port."
5834,"In this case, in the time it takes to send a single packet onto the outgoing link, N new
packets will arrive at this output port (one from each of the N input ports)."
5835,"Since the output port canswitch
linetransmit only a single packet in a unit of time (the packet transmission time), the N arriving packets will
have to queue (wait) for transmission over the outgoing link."
5836,"Then N more packets can possibly arrive in
the time it takes to transmit just one of the N packets that had just previously been queued."
5837,And so on.
5838,"Thus, packet queues can form at the output ports even when the switching fabric is N times faster than
the port line speeds."
5839,"Eventually, the number of queued packets can grow large enough to exhaust
available memory at the output port."
5840,"Figure 4.9 Output port queueing
When there is not enough memory to buffer an incoming packet, a decision must be made to either dropthe arriving packet (a policy known as drop-tail ) or remove one or more already-queued packets to
make room for the newly arrived packet."
5841,"In some cases, it may be advantageous to drop (or mark the
header of) a packet before the buffer is full in order to provide a congestion signal to the sender."
5842,"A
number of proactive packet-dropping and -marking policies (which collectively have become known as
active queue management (AQM)  algorithms) have been proposed and analyzed [Labrador 1999,
Hollot 2002]."
5843,"One of the most widely studied and implemented AQM algorithms is the Random Early
Detection (RED)  algorithm [Christiansen 2001; Floyd 2016]."
5844,"Output port queuing is illustrated in Figure 4.9. At time t, a packet has arrived at each of the incoming
input ports, each destined for the uppermost outgoing port."
5845,"Assuming identical line speeds and a switchoperating at three times the line speed, one time unit later (that is, in the time needed to receive or senda packet), all three original packets have been transferred to the outgoing port and are queued awaiting
transmission."
5846,"In the next time unit, one of these three packets will have been transmitted over the
outgoing link."
5847,"In our example, two new packets have arrived at the incoming side of the switch; one of
these packets is destined for this uppermost output port."
5848,"A consequence of such queuing is that a
packet scheduler at the output port must choose one packet, among those queued, for transmission—
a topic we’ll cover in the following section."
5849,"Given that router buffers are needed to absorb the fluctuations in traffic load, a natural question to ask is
how much buffering is required."
5850,"For many years, the rule of thumb [RFC 3439]  for buffer sizing was that
the amount of buffering (B) should be equal to an average round-trip time ( RTT, say 250 msec) times
the link capacity (C)."
5851,"This result is based on an analysis of the queueing dynamics of a relatively small
number of TCP flows [Villamizar 1994]."
5852,"Thus, a 10 Gbps link with an RTT of 250 msec would need an
amount of buffering equal to B 5 RTT · C 5 2.5 Gbits of buffers."
5853,"More recent theoretical and
experimental efforts [Appenzeller 2004], however, suggest that when there are a large number of TCP
flows (N) passing through a link, the amount of buffering needed is  With a large number of
flows typically passing through large backbone router links (see, e.g., [Fraleigh 2003]), the value of N
can be large, with the decrease in needed buffer size becoming quite significant."
5854,"[Appenzeller 2004;
Wischik 2005; Beheshti 2008]  provide very readable discussions of the buffer-sizing problem from a
theoretical, implementation, and operational standpoint."
5855,"4.2.5 Packet Scheduling
Let’s now return to the question of determining the order in which queued packets are transmitted overan outgoing link."
5856,"Since you yourself have undoubtedly had to wait in long lines on many occasions andobserved how waiting customers are served, you’re no doubt familiar with many of the queueingdisciplines commonly used in routers."
5857,"There is first-come-first-served (FCFS, also known as first-in-first-out, FIFO)."
5858,"The British are famous for patient and orderly FCFS queueing at bus stops and in the
marketplace (“Oh, are you queueing?”)."
5859,"Other countries operate on a priority basis, with one class of
waiting customers given priority service over other waiting customers."
5860,"There is also round-robinqueueing, where customers are again divided into classes (as in priority queueing) but each class ofcustomer is given service in turn."
5861,First-in-First-Out (FIFO)Figure 4.10 shows the queuing model abstraction for the FIFO link-scheduling discipline.
5862,"Packets
arriving at the link output queue wait for transmission if the link is currently busy transmitting another
packet."
5863,"If there is not sufficient buffering space to hold the arriving packet, the queue’s packet-
discarding policy then determines whether the packet will be dropped (lost) or whether other packets willbe removed from the queue to make space for the arriving packet, as discussed above."
5864,"In ourB=RTI⋅C/N.discussion below, we’ll ignore packet discard."
5865,"When a packet is completely transmitted over the
outgoing link (that is, receives service) it is removed from the queue."
5866,"The FIFO (also known as first-come-first-served, or FCFS) scheduling discipline selects packets for link
transmission in the same order in which they arrived at the output link queue."
5867,"We’re all familiar withFIFO queuing from service centers, where
Figure 4.10 FIFO queueing abstraction
arriving customers join the back of the single waiting line, remain in order, and are then served when
they reach the front of the line."
5868,Figure 4.11 shows the FIFO queue in operation.
5869,"Packet arrivals are
indicated by numbered arrows above the upper timeline, with the number indicating the order in which
the packet arrived."
5870,Individual packet departures are shown below the lower timeline.
5871,The time that apacket spends in service (being transmitted) is indicated by the shaded rectangle between the twotimelines.
5872,"In our examples here, let’s assume that each packet takes three units of time to betransmitted."
5873,"Under the FIFO discipline, packets leave in the same order in which they arrived."
5874,"Note thatafter the departure of packet 4, the link remains idle (since packets 1 through 4 have been transmittedand removed from the queue) until the arrival of packet 5."
5875,"Priority Queuing
Under priority queuing, packets arriving at the output link are classified into priority classes upon arrival
at the queue, as shown in Figure 4.12."
5876,"In practice, a network operator may configure a queue so that
packets carrying network management information (e.g., as indicated by the source or destination
TCP/UDP port number) receive priority over user traffic; additionally, real-time voice-over-IP packetsmight receive priority over non-real traffic such as SMTP or IMAP e-mail packets."
5877,"EachFigure 4.11 The FIFO queue in operation
Figure 4.12 The priority queueing model
priority class typically has its own queue."
5878,"When choosing a packet to transmit, the priority queuing
discipline will transmit a packet from the highest priority class that has a nonempty queue (that is, has
packets waiting for transmission)."
5879,The choice among packets in the same priority class is typically donein a FIFO manner.
5880,Figure 4.13 illustrates the operation of a priority queue with two priority classes.
5881,"Packets 1, 3, and 4
belong to the high-priority class, and packets 2 and 5 belong to the low-priority class."
5882,"Packet 1 arrives
and, finding the link idle, begins transmission."
5883,"During the transmission of packet 1, packets 2 and 3arrive and are queued in the low- and high-priority queues, respectively."
5884,"After the transmission of packet1, packet 3 (a high-priority packet) is selected for transmission over packet 2 (which, even though it
arrived earlier, is a low-priority packet)."
5885,"At the end of the transmission of packet 3, packet 2 then begins
transmission."
5886,Packet 4 (a high-priority packet) arrives during the transmission of packet 2 (a low-prioritypacket).
5887,"Under a non-preemptive priority queuing  discipline, the transmission of a packet is not
interrupted once it hasFigure 4.13 The priority queue in operation
Figure 4.14 The two-class robin queue in operation
begun."
5888,"In this case, packet 4 queues for transmission and begins being transmitted after the
transmission of packet 2 is completed."
5889,"Round Robin and Weighted Fair Queuing (WFQ)
Under the round robin queuing discipline, packets are sorted into classes as with priority queuing."
5890,"However, rather than there being a strict service priority among classes, a round robin scheduleralternates service among the classes."
5891,"In the simplest form of round robin scheduling, a class 1 packet istransmitted, followed by a class 2 packet, followed by a class 1 packet, followed by a class 2 packet,and so on."
5892,"A so-called work-conserving queuing  discipline will never allow the link to remain idle
whenever there are packets (of any class) queued for transmission."
5893,A work-conserving round robindiscipline that looks for a packet of a given class but finds none will immediately check the next class inthe round robin sequence.
5894,Figure 4.14 illustrates the operation of a two-class round robin queue.
5895,"In this example, packets 1, 2, and4 belong to class 1, and packets 3 and 5 belong to the second class."
5896,"Packet 1 begins transmission
immediately upon arrival at the output queue."
5897,"Packets 2 and 3 arrive during the transmission of packet 1
and thus queue for transmission."
5898,"After the transmission of packet 1, the link scheduler looks for a class2 packet and thus transmits packet 3."
5899,"After the transmission of packet 3, the scheduler looks for a class1 packet and thus transmits packet 2."
5900,"After the transmission of packet 2, packet 4 is the only queuedpacket; it is thus transmitted immediately after packet 2."
5901,"A generalized form of round robin queuing that has been widely implemented in routers is the so-called
weighted fair queuing (WFQ) discipline  [Demers 1990 ; Parekh 1993 ; Cisco QoS 2016]."
5902,"WFQ is
illustrated in Figure 4.15."
5903,"Here, arriving packets are classified and queued in the appropriate per-class
waiting area."
5904,"As in round robin scheduling, a WFQ scheduler will serve classes in a circular manner—first serving class 1, then serving class 2, then serving class 3, and then (assuming there are threeclasses) repeating the service pattern."
5905,"WFQ is also a work-conserving
Figure 4.15 Weighted fair queueing
queuing discipline and thus will immediately move on to the next class in the service sequence when it
finds an empty class queue."
5906,"WFQ differs from round robin in that each class may receive a differential amount of service in any
interval of time."
5907,"Specifically, each class, i, is assigned a weight, w."
5908,"Under WFQ, during any interval of
time during which there are class i packets to send, class i will then be guaranteed to receive a fraction
of service equal to  where the sum in the denominator is taken over all classes that also have
packets queued for transmission."
5909,"In the worst case, even if all classes have queued packets, class i will
still be guaranteed to receive a fraction  of the bandwidth, where in this worst case the sum in
the denominator is over all classes."
5910,"Thus, for a link with transmission rate R, class i will always achieve
a throughput of at least  Our description of WFQ has been idealized, as we have not
considered the fact that packets are discrete and a packet’s transmission will not be interrupted to begintransmission of another packet; [Demers 1990 ; Parekh 1993]  discuss this packetization issue.i
wi/(∑wj),
wi/(∑wj)
R⋅wi/(∑wj).4.3 The Internet Protocol (IP): IPv4, Addressing, IPv6, and More
Our study of the network layer thus far in Chapter 4—the notion of the data and control plane
component of the network layer, our distinction between forwarding and routing, the identification of
various network service models, and our look inside a router—have often been without reference to anyspecific computer network architecture or protocol."
5911,"In this section we’ll focus on key aspects of the
network layer on today’s Internet and the celebrated Internet Protocol (IP)."
5912,There are two versions of IP in use today.
5913,"We’ll first examine the widely deployed IP protocol version 4,
which is usually referred to simply as IPv4 [RFC 791]
Figure 4.16 IPv4 datagram format
in Section 4.3.1. We’ll examine IP version 6 [RFC 2460 ; RFC 4291] , which has been proposed to
replace IPv4, in Section 4.3.5. In between, we’ll primarily cover Internet addressing—a topic that might
seem rather dry and detail-oriented but we’ll see is crucial to understanding how the Internet’s network
layer works."
5914,"To master IP addressing is to master the Internet’s network layer itself!4.3.1 IPv4 Datagram Format
Recall that the Internet’s network-layer packet is referred to as a datagram ."
5915,"We begin our study of IP
with an overview of the syntax and semantics of the IPv4 datagram."
5916,"You might be thinking that nothing
could be drier than the syntax and semantics of a packet’s bits."
5917,"Nevertheless, the datagram plays acentral role in the Internet—every networking student and professional needs to see it, absorb it, and
master it."
5918,"(And just to see that protocol headers can indeed be fun to study, check out [Pomeranz
2010] )."
5919,The IPv4 datagram format is shown in Figure 4.16.
5920,"The key fields in the IPv4 datagram are the
following:
Version number."
5921,These 4 bits specify the IP protocol version of the datagram.
5922,"By looking at the
version number, the router can determine how to interpret the remainder of the IP datagram."
5923,Different versions of IP use different datagram formats.
5924,"The datagram format for IPv4 is shown in
Figure 4.16."
5925,"The datagram format for the new version of IP (IPv6) is discussed in Section 4.3.5.
Header length."
5926,"Because an IPv4 datagram can contain a variable number of options (which are
included in the IPv4 datagram header), these 4 bits are needed to determine where in the IP
datagram the payload (e.g., the transport-layer segment being encapsulated in this datagram)actually begins."
5927,"Most IP datagrams do not contain options, so the typical IP datagram has a 20-byte
header."
5928,Type of service.
5929,"The type of service (TOS) bits were included in the IPv4 header to allow different
types of IP datagrams to be distinguished from each other."
5930,"For example, it might be useful to
distinguish real-time datagrams (such as those used by an IP telephony application) from non-real-time traffic (for example, FTP)."
5931,"The specific level of service to be provided is a policy issue
determined and configured by the network administrator for that router."
5932,"We also learned in Section
3.7.2 that two of the TOS bits are used for Explicit Congestion ­Notification."
5933,Datagram length.
5934,"This is the total length of the IP datagram (header plus data), measured in bytes."
5935,"Since this field is 16 bits long, the theoretical maximum size of the IP datagram is 65,535 bytes."
5936,"However, datagrams are rarely larger than 1,500 bytes, which allows an IP datagram to fit in thepayload field of a maximally sized Ethernet frame."
5937,"Identifier, flags, fragmentation offset."
5938," These three fields have to do with so-called IP
fragmentation, a topic we will consider shortly."
5939,"Interestingly, the new version of IP, IPv6, does notallow for fragmentation."
5940,Time-to-live.
5941,"The time-to-live (TTL) field is included to ensure that datagrams do not circulate
forever (due to, for example, a long-lived routing loop) in the network."
5942,"This field is decremented by
one each time the datagram is processed by a router."
5943,"If the TTL field reaches 0, a router must dropthat datagram."
5944,Protocol.
5945, This field is typically used only when an IP datagram reaches its final destination.
5946,"The
value of this field indicates the specific transport-layer protocol to which the data portion of this IPdatagram should be passed."
5947,"For example, a value of 6 indicates that the data portion is passed toTCP, while a value of 17 indicates that the data is passed to UDP."
5948,"For a list of all possible values,see [IANA Protocol Numbers 2016] ."
5949,"Note that the protocol number in the IP datagram has a role
that is analogous to the role of the port number field in the transport-layer segment."
5950,"The protocol
number is the glue that binds the network and transport layers together, whereas the port number is
the glue that binds the transport and application layers together."
5951,"We’ll see in Chapter 6 that the link-
layer frame also has a special field that binds the link layer to the network layer."
5952,Header checksum.
5953," The header checksum aids a router in detecting bit errors in a received IP
datagram."
5954,The header checksum is computed by treating each 2 bytes in the header as a numberand summing these numbers using 1s complement arithmetic.
5955,"As discussed in Section 3.3, the 1s
complement of this sum, known as the Internet checksum, is stored in the checksum field."
5956,"A router
computes the header checksum for each received IP datagram and detects an error condition if the
checksum carried in the datagram header does not equal the computed checksum."
5957,"Routers typically
discard datagrams for which an error has been detected."
5958,"Note that the checksum must berecomputed and stored again at each router, since the TTL field, and possibly the options field aswell, will change."
5959,"An interesting discussion of fast algorithms for computing the Internet checksum is
[RFC 1071] ."
5960,"A question often asked at this point is, why does TCP/IP perform error checking at both
the transport and network layers?"
5961,There are several reasons for this repetition.
5962,"First, note that only
the IP header is checksummed at the IP layer, while the TCP/UDP checksum is computed over theentire TCP/UDP segment."
5963,"Second, TCP/UDP and IP do not necessarily both have to belong to the
same protocol stack."
5964,"TCP can, in principle, run over a different network-layer protocol (for example,
ATM) [Black 1995] ) and IP can carry data that will not be passed to TCP/UDP."
5965,Source and destination IP addresses.
5966," When a source creates a datagram, it inserts its IP address
into the source IP address field and inserts the address of the ultimate destination into the
destination IP address field."
5967,"Often the source host determines the destination address via a DNS
lookup, as discussed in Chapter 2."
5968,"We’ll discuss IP addressing in detail in Section 4.3.3.
Options."
5969, The options fields allow an IP header to be extended.
5970,"Header options were meant to be
used rarely—hence the decision to save overhead by not including the information in options fields
in every datagram header."
5971,"However, the mere existence of options does complicate matters—sincedatagram headers can be of variable length, one cannot determine a priori where the data field will
start."
5972,"Also, since some datagrams may require options processing and others may not, the amount
of time needed to process an IP datagram at a router can vary greatly."
5973,These considerationsbecome particularly important for IP processing in high-performance routers and hosts.
5974,"For these
reasons and others, IP options were not included in the IPv6 header, as discussed in Section 4.3.5.
Data (payload)."
5975,"Finally, we come to the last and most important field—the raison d’etre  for the
datagram in the first place! In most circumstances, the data field of the IP datagram contains the
transport-layer segment (TCP or UDP) to be delivered to the destination."
5976,"However, the data field can
carry other types of data, such as ICMP messages (discussed in Section 5.6)."
5977,Note that an IP datagram has a total of 20 bytes of header (assuming no options).
5978,"If the datagram
carries a TCP segment, then each (non-fragmented) datagram carries a total of 40 bytes of header (20bytes of IP header plus 20 bytes of TCP header) along with the application-layer message.4.3.2 IPv4 Datagram Fragmentation
We’ll see in Chapter 6 that not all link-layer protocols can carry network-layer packets of the same size."
5979,"Some protocols can carry big datagrams, whereas other protocols can carry only little datagrams."
5980,"For
example, Ethernet frames can carry up to 1,500 bytes of data, whereas frames for some wide-area links
can carry no more than 576 bytes."
5981,"The maximum amount of data that a link-layer frame can carry is
called the maximum transmission unit (MTU)."
5982,"Because each IP datagram is encapsulated within the
link-layer frame for transport from one router to the next router, the MTU of the link-layer protocol places
a hard limit on the length of an IP datagram."
5983,Having a hard limit on the size of an IP datagram is notmuch of a problem.
5984,"What is a problem is that each of the links along the route between sender anddestination can use different link-layer protocols, and each of these protocols can have different MTUs.
To understand the forwarding issue better, imagine that you are a router that interconnects several links,
each running different link-layer protocols with different MTUs. Suppose you receive an IP datagram
from one link."
5985,"You check your forwarding table to determine the outgoing link, and this outgoing link has
an MTU that is smaller than the length of the IP datagram."
5986,"Time to panic—how are you going to
squeeze this oversized IP datagram into the payload field of the link-layer frame?"
5987,"The solution is tofragment the payload in the IP datagram into two or more smaller IP datagrams, encapsulate each ofthese smaller IP datagrams in a separate link-layer frame; and send these frames over the outgoing link.Each of these smaller datagrams is referred to as a fragment."
5988,Fragments need to be reassembled before they reach the transport layer at the destination.
5989,"Indeed,both TCP and UDP are expecting to receive complete, unfragmented segments from the network layer."
5990,"The designers of IPv4 felt that reassembling datagrams in the routers would introduce significant
complication into the protocol and put a damper on router performance."
5991,"(If you were a router, would youwant to be reassembling fragments on top of everything else you had to do?) Sticking to the principle ofkeeping the network core simple, the designers of IPv4 decided to put the job of datagram reassemblyin the end systems rather than in network routers."
5992,"When a destination host receives a series of datagrams from the same source, it needs to determine
whether any of these datagrams are fragments of some original, larger datagram."
5993,"If some datagramsare fragments, it must further determine when it has received the last fragment and how the fragments it
has received should be pieced back together to form the original datagram."
5994,"To allow the destination host
to perform these reassembly tasks, the designers of IP (version 4) put identification, flag,  and
fragmentation offset fields in the IP datagram header."
5995,"When a datagram is created, the sending host
stamps the datagram with an identification number as well as source and destination addresses."
5996,"Typically, the sending host increments the identification number for each datagram it sends."
5997,"When arouter needs to fragment a datagram, each resulting datagram (that is, fragment) is stamped with thesource address, destination address, and identification number of the original datagram."
5998,"When the
destination receives a series of datagrams from the same sending host, it can examine the identification
numbers of the datagrams to determine which of the datagrams are actually fragments of the samelarger datagram."
5999,"Because IP is an unreliable service, one or more of the fragments may never arrive atthe destination."
6000,"For this reason, in order for the destination host to be absolutely sure it has received thelast fragment of
Figure 4.17 IP fragmentation and reassembly
the original datagram, the last fragment has a flag bit set to 0, whereas all the other fragments have this
flag bit set to 1."
6001,"Also, in order for the destination host to determine whether a fragment is missing (and
also to be able to reassemble the fragments in their proper order), the offset field is used to specifywhere the fragment fits within the original IP datagram."
6002,Figure 4.17 illustrates an example.
6003,"A datagram of 4,000 bytes (20 bytes of IP header plus 3,980 bytes
of IP payload) arrives at a router and must be forwarded to a link with an MTU of 1,500 bytes."
6004,"This
implies that the 3,980 data bytes in the original datagram must be allocated to three separate fragments(each of which is also an IP datagram)."
6005,"The online material for this book, and the problems at the end of this chapter will allow you to explore
fragmentation in more detail."
6006,"Also, on this book’s Web site, we provide a Java applet that generatesfragments."
6007,"You provide the incoming datagram size, the MTU, and the incoming datagram identification.The applet automatically generates the fragments for you."
6008,"See http:/ /www.pearsonhighered.com/ cs-
resources/ ."
6009,"4.3.3 IPv4 Addressing
We now turn our attention to IPv4 addressing."
6010,"Although you may be thinking that addressing must be a
straightforward topic, hopefully by the end of this section you’ll be convinced that Internet addressing is
not only a juicy, subtle, and interesting topic but also one that is of central importance to the Internet."
6011,"An
excellent treatment of IPv4 addressing can be found in the first chapter in [Stewart 1999] ."
6012,"Before discussing IP addressing, however, we’ll need to say a few words about how hosts and routers
are connected into the Internet."
6013,"A host typically has only a single link into the network; when IP in thehost wants to send a datagram, it does so over this link."
6014,The boundary between the host and thephysical link is called an interface.
6015,Now consider a router and its interfaces.
6016,"Because a router’s job is to
receive a datagram on one link and forward the datagram on some other link, a router necessarily hastwo or more links to which it is connected."
6017,The boundary between the router and any one of its links isalso called an interface.
6018,"A router thus has multiple interfaces, one for each of its links."
6019,"Because everyhost and router is capable of sending and receiving IP datagrams, IP requires each host and router
interface to have its own IP address."
6020,"Thus, an IP address is technically associated with an interface,
rather than with the host or router containing that interface."
6021,"Each IP address is 32 bits long (equivalently, 4 bytes), and there are thus a total of 2  (or approximately
4 billion) possible IP addresses."
6022,"These addresses are typically written in so-called dotted-decimal
notation , in which each byte of the address is written in its decimal form and is separated by a period
(dot) from other bytes in the address."
6023,"For example, consider the IP address 193.32.216.9. The 193 is
the decimal equivalent of the first 8 bits of the address; the 32 is the decimal equivalent of the second 8bits of the address, and so on."
6024,"Thus, the address 193.32.216.9 in binary notation is
11000001 00100000 11011000 00001001
Each interface on every host and router in the global Internet must have an IP address that is globally
unique (except for interfaces behind NATs, as discussed in Section 4.3.4)."
6025,"These addresses cannot be
chosen in a willy-nilly manner, however."
6026,"A portion of an interface’s IP address will be determined by the
subnet to which it is connected."
6027,Figure 4.18 provides an example of IP addressing and interfaces.
6028,"In this figure, one router (with three
interfaces) is used to interconnect seven hosts."
6029,"Take a close look at the IP addresses assigned to the
host and router interfaces, as there are several things to notice."
6030,"The three hosts in the upper-left portion
of Figure 4.18, and the router interface to which they are connected, all have an IP address of the form32223.1.1.xxx."
6031,"That is, they all have the same leftmost 24 bits in their IP address."
6032,"These four interfaces
are also interconnected to each other by a network that contains no routers ."
6033,"This network could be
interconnected by an Ethernet LAN, in which case the interfaces would be interconnected by an
Ethernet switch (as we’ll discuss in Chapter 6), or by a wireless access point (as we’ll discuss in
Chapter 7)."
6034,"We’ll represent this routerless network connecting these hosts as a cloud for now, and dive
into the internals of such networks in Chapters 6 and 7."
6035,"In IP terms, this network interconnecting three host interfaces and one router interface forms a subnet
[RFC 950]."
6036,"(A subnet is also called an IP network or simply
Figure 4.18 Interface addresses and subnets
a network in the Internet literature.) IP addressing assigns an address to this subnet: 223.1.1.0/24,
where the /24 (“slash-24”) notation, sometimes known as a subnet mask, indicates that the leftmost 24
bits of the 32-bit quantity define the subnet address."
6037,"The 223.1.1.0/24 subnet thus consists of the three
host interfaces (223.1.1.1, 223.1.1.2, and 223.1.1.3) and one router interface (223.1.1.4)."
6038,"Any additional
hosts attached to the 223.1.1.0/24 subnet would be required  to have an address of the form 223.1.1.xxx."
6039,"There are two additional subnets shown in Figure 4.18: the 223.1.2.0/24 network and the 223.1.3.0/24
subnet."
6040,Figure 4.19 illustrates the three IP subnets present in Figure 4.18.
6041,The IP definition of a subnet is not restricted to Ethernet segments that connect multiple hosts to arouter interface.
6042,"To get some insight here, consider Figure 4.20, which shows three routers that are
interconnected with each other by point-to-point links."
6043,"Each router has three interfaces, one for each
point-to-point link and one for the broadcast link that directly connects the router to a pair of hosts."
6044,Whatsubnets are present here?
6045,"Three subnets, 223.1.1.0/24, 223.1.2.0/24, and 223.1.3.0/24, are similar to
the subnets we encountered in Figure 4.18."
6046,"But note that there are three additional subnets in this
example as well: one subnet, 223.1.9.0/24, for the interfaces that connect routers R1 and R2; another
subnet, 223.1.8.0/24, for the interfaces that connect routers R2 and R3; and a third subnet,223.1.7.0/24, for the interfaces that connect routers R3 and R1."
6047,"For a general interconnected system of
routers and hosts, we can use the following recipe to define the subnets in the system:
Figure 4.19 Subnet addresses
To determine the subnets, detach each interface from its host or router, creating islands of isolated
networks, with interfaces terminating the end points of the isolated networks."
6048,Each of these isolatednetworks is called a subnet.
6049,"If we apply this procedure to the interconnected system in Figure 4.20, we get six islands or subnets."
6050,"From the discussion above, it’s clear that an organization (such as a company or academic institution)with multiple Ethernet segments and point-to-point links will have multiple subnets, with all of thedevices on a given subnet having the same subnet address."
6051,"In principle, the different subnets couldhave quite different subnet addresses."
6052,"In practice, however, their subnet addresses often have much in
common."
6053,"To understand why, let’s next turn our attention to how addressing is handled in the global
Internet."
6054,"The Internet’s address assignment strategy is known as Classless Interdomain Routing  (CIDR—
pronounced cider) [RFC 4632] ."
6055,CIDR generalizes the notion of subnet addressing.
6056,"As with subnetaddressing, the 32-bit IP address is divided into two parts and again has the dotted-decimal form
a.b.c.d/x, where x indicates the number of bits in the first part of the address."
6057,"The x most significant bits of an address of the form a.b.c.d/x constitute the network portion of the IP
address, and are often referred to as the prefix  (or network prefix ) of the address."
6058,"An organization is
typically assigned a block of contiguous addresses, that is, a range of addresses with a common prefix
(see the Principles in Practice feature)."
6059,"In this case, the IP addresses of devices within the
organization will share the common prefix."
6060,"When we cover the Internet’s BGP routing protocol in
Figure 4.20 Three routers interconnecting six subnets
Section 5.4, we’ll see that only these x leading prefix bits are considered by routers outside the
organization’s network."
6061,"That is, when a router outside the organization forwards a datagram whose
destination address is inside the organization, only the leading x bits of the address need be considered."
6062,"This considerably reduces the size of the forwarding table in these routers, since a single  entry of the
form a.b.c.d/x will be sufficient to forward packets to any destination within the organization."
6063,"The remaining 32- x bits of an address can be thought of as distinguishing among the devices within  the
organization, all of which have the same network prefix."
6064,These are the bits that will be considered whenforwarding packets at routers within  the organization.
6065,"These lower-order bits may (or may not) have anadditional subnetting structure, such as that discussed above."
6066,"For example, suppose the first 21 bits of
the CIDRized address a.b.c.d/21 specify the organization’s network prefix and are common to the IP
addresses of all devices in that organization."
6067,The remaining 11 bits then identify the specific hosts in theorganization.
6068,"The organization’s internal structure might be such that these 11 rightmost bits are usedfor subnetting within the organization, as discussed above."
6069,"For example, a.b.c.d/24 might refer to aspecific subnet within the organization."
6070,"Before CIDR was adopted, the network portions of an IP address were constrained to be 8, 16, or 24
bits in length, an addressing scheme known as classful addressing, since subnets with 8-, 16-, and
24-bit subnet addresses were known as class A, B, and C networks, respectively."
6071,"The requirement thatthe subnet portion of an IP address be exactly 1, 2, or 3 bytes long turned out to be problematic forsupporting the rapidly growing number of organizations with small and medium-sized subnets."
6072,"A class C
(/24) subnet could accommodate only up to 2  − 2 = 254 hosts (two of the 2  = 256 addresses are
reserved for special use)—too small for many organizations."
6073,"However, a class B (/16) subnet, which
supports up to 65,634 hosts, was too large."
6074,"Under classful addressing, an organization with, say, 2,000hosts was typically allocated a class B (/16) subnet address."
6075,This led to a rapid depletion of the class Baddress space and poor utilization of the assigned address space.
6076,"For example, the organization thatused a class B address for its 2,000 hosts was allocated enough of the address space for up to 65,534interfaces—leaving more than 63,000 addresses that could not be used by other organizations."
6077,"PRINCIPLES IN PRACTICE
This example of an ISP that connects eight organizations to the Internet nicely illustrates how
carefully allocated CIDRized addresses facilitate routing."
6078,"Suppose, as shown in Figure 4.21,
that the ISP (which we’ll call Fly-By-Night-ISP) advertises to the outside world that it should be
sent any datagrams whose first 20 address bits match 200.23.16.0/20."
6079,"The rest of the worldneed not know that within the address block 200.23.16.0/20 there are in fact eight otherorganizations, each with its own subnets."
6080,"This ability to use a single prefix to advertise multiple
networks is often referred to as address aggregation (also route aggregation  or route
summarization)."
6081,"Address aggregation works extremely well when addresses are allocated in blocks to ISPs and
then from ISPs to client organizations."
6082,But what happens when addresses are not allocated insuch a hierarchical manner?
6083,"What would happen, for example, if Fly-By-Night-ISP acquiresISPs-R-Us and then has Organization 1 connect to the Internet through its subsidiary ISPs-R-
Us?"
6084,"As shown in Figure 4.21, the subsidiary ISPs-R-Us owns the address block 199.31.0.0/16,
but Organization 1’s IP addresses are unfortunately outside of this address block."
6085,"What should
be done here?"
6086,"Certainly, Organization 1 could renumber all of its routers and hosts to have
addresses within the ISPs-R-Us address block."
6087,"But this is a costly solution, and Organization 1might well be reassigned to another subsidiary in the future."
6088,"The solution typically adopted is for
Organization 1 to keep its IP addresses in 200.23.18.0/23."
6089,"In this case, as shown in Figure 4.22,8 8Fly-By-Night-ISP continues to advertise the address block 200.23.16.0/20 and ISPs-R-Us
continues to advertise 199.31.0.0/16."
6090,"However, ISPs-R-Us now also advertises the block of
addresses for Organization 1, 200.23.18.0/23."
6091,"When other routers in the larger Internet see the
address blocks 200.23.16.0/20 (from Fly-By-Night-ISP) and 200.23.18.0/23 (from ISPs-R-Us)
and want to route to an address in the block 200.23.18.0/23, they will use longest prefix
matching  (see Section 4.2.1), and route toward ISPs-R-Us, as it advertises the longest (i.e.,
most-specific) address prefix that matches the destination address."
6092,"Figure 4.21 Hierarchical addressing and route aggregationFigure 4.22 ISPs-R-Us has a more specific route to Organization 1
We would be remiss if we did not mention yet another type of IP address, the IP broadcast address
255.255.255.255."
6093,"When a host sends a datagram with destination address 255.255.255.255, the
message is delivered to all hosts on the same subnet."
6094,Routers optionally forward the message intoneighboring subnets as well (although they usually don’t).
6095,"Having now studied IP addressing in detail, we need to know how hosts and subnets get their
addresses in the first place."
6096,"Let’s begin by looking at how an organization gets a block of addresses forits devices, and then look at how a device (such as a host) is assigned an address from within theorganization’s block of addresses."
6097,"Obtaining a Block of Addresses
In order to obtain a block of IP addresses for use within an organization’s subnet, a network
administrator might first contact its ISP, which would provide addresses from a larger block of addressesthat had already been allocated to the ISP."
6098,"For example, the ISP may itself have been allocated theaddress block 200.23.16.0/20."
6099,"The ISP, in turn, could divide its address block into eight equal-sizedcontiguous address blocks and give one of these address blocks out to each of up to eight organizationsthat are supported by this ISP, as shown below."
6100,"(We have underlined the subnet part of theseaddresses for your convenience.)
ISP’s block:     200.23.16.0/20      11001000 00010111 0001
0000 00000000Organization 0    200.23.16.0/23      11001000 00010111 0001000 0 00000000
Organization 1    200.23.18.0/23      11001000 00010111 0001001 0 00000000
Organization 2    200.23.20.0/23      11001000 00010111 0001010 0 00000000
    …   …                                    …
Organization 7    200.23.30.0/23      11001000 00010111 0001111 0 00000000
While obtaining a set of addresses from an ISP is one way to get a block of addresses, it is not the only
way."
6101,"Clearly, there must also be a way for the ISP itself to get a block of addresses."
6102,"Is there a global
authority that has ultimate responsibility for managing the IP address space and allocating address
blocks to ISPs and other organizations?"
6103,"Indeed there is! IP addresses are managed under the authority
of the Internet Corporation for Assigned Names and Numbers (ICANN) [ICANN 2016] , based on
guidelines set forth in [RFC 7020] ."
6104,"The role of the nonprofit ICANN organization [NTIA 1998] is not only
to allocate IP addresses, but also to manage the DNS root servers."
6105,"It also has the very contentious job
of assigning domain names and resolving domain name disputes."
6106,"The ICANN allocates addresses toregional Internet registries (for example, ARIN, RIPE, APNIC, and LACNIC, which together form the
Address Supporting Organization of ICANN [ASO-ICANN 2016] ), and handle the
allocation/management of addresses within their regions."
6107,"Obtaining a Host Address: The Dynamic Host Configuration Protocol
Once an organization has obtained a block of addresses, it can assign individual IP addresses to the
host and router interfaces in its organization."
6108,"A system administrator will typically manually configure theIP addresses into the router (often remotely, with a network management tool)."
6109,"Host addresses can alsobe configured manually, but typically this is done using the Dynamic Host Configuration Protocol
(DHCP)  [RFC 2131] ."
6110,DHCP allows a host to obtain (be allocated) an IP address automatically.
6111,"A
network administrator can configure DHCP so that a given host receives the same IP address each time
it connects to the network, or a host may be assigned a temporary IP address  that will be different
each time the host connects to the network."
6112,"In addition to host IP address assignment, DHCP also
allows a host to learn additional information, such as its subnet mask, the address of its first-hop router(often called the default gateway), and the address of its local DNS server."
6113,"Because of DHCP’s ability to automate the network-related aspects of connecting a host into a network,
it is often referred to as a plug-and-play  or zeroconf (zero-configuration) protocol."
6114,"This capability
makes it very attractive to the network administrator who would otherwise have to perform these tasks
manually! DHCP is also enjoying widespread use in residential Internet access networks, enterprisenetworks, and in wireless LANs, where hosts join and leave the network frequently."
6115,"Consider, for
example, the student who carries a laptop from a dormitory room to a library to a classroom."
6116,"It is likely
that in each location, the student will be connecting into a new subnet and hence will need a new IPaddress at each location."
6117,"DHCP is ideally suited to this situation, as there are many users coming andgoing, and addresses are needed for only a limited amount of time."
6118,"The value of DHCP’s plug-and-playcapability is clear, since it’s unimaginable that a system administrator would be able to reconfigure
laptops at each location, and few students (except those taking a computer networking class!) would
have the expertise to configure their laptops manually."
6119,DHCP is a client-server protocol.
6120,"A client is typically a newly arriving host wanting to obtain network
configuration information, including an IP address for itself."
6121,"In the simplest case, each subnet (in the
addressing sense of Figure 4.20) will have a DHCP server."
6122,"If no server is present on the subnet, a
DHCP relay agent (typically a router) that knows the address of a DHCP server for that network isneeded."
6123,"Figure 4.23 shows a DHCP server attached to subnet 223.1.2/24, with the router serving as
the relay agent for arriving clients attached to subnets 223.1.1/24 and 223.1.3/24."
6124,"In our discussion
below, we’ll assume that a DHCP server is available on the subnet."
6125,"For a newly arriving host, the DHCP protocol is a four-step process, as shown in Figure 4.24 for the
network setting shown in Figure 4.23."
6126,"In this figure, yiaddr  (as in “your Internet address”) indicates
the address being allocated to the newly arriving client."
6127,"The four steps are:
Figure 4.23 DHCP client and serverDHCP server discovery."
6128," The first task of a newly arriving host is to find a DHCP server with which
to interact."
6129,"This is done using a DHCP discover message , which a client sends within a UDP
packet to port 67."
6130,The UDP packet is encapsulated in an IP datagram.
6131,"But to whom should this
datagram be sent?"
6132,"The host doesn’t even know the IP address of the network to which it is
attaching, much less the address of a DHCP server for this network."
6133,"Given this, the DHCP client
creates an IP datagram containing its DHCP discover message along with the broadcast destinationIP address of 255.255.255.255 and a “this host” source IP address of 0.0.0.0. The DHCP clientpasses the IP datagram to the link layer, which then broadcasts this frame to all nodes attached to
the subnet (we will cover the details of link-layer broadcasting in Section 6.4)."
6134,DHCP server offer(s).
6135," A DHCP server receiving a DHCP discover message responds to the client
with a DHCP offer message  that is broadcast to all nodes on the subnet, again using the IP
broadcast address of 255.255.255.255."
6136,"(You might want to think about why this server reply must
also be broadcast)."
6137,"Since several DHCP servers can be present on the subnet, the client may find
itself in the enviable position of being able to choose from among several offers."
6138,"EachFigure 4.24 DHCP client-server interaction
server offer message contains the transaction ID of the received discover message, the proposed IP
address for the client, the network mask, and an IP address lease time —the amount of time for
which the IP address will be valid."
6139,"It is common for the server to set the lease time to several hours
or days [Droms 2002] ."
6140,DHCP request.
6141,"The newly arriving client will choose from among one or more server offers and
respond to its selected offer with a DHCP request message , echoing back the configuration
parameters."
6142,DHCP ACK.
6143," The server responds to the DHCP request message with a DHCP ACK message ,
confirming the requested parameters."
6144,"Once the client receives the DHCP ACK, the interaction is complete and the client can use the DHCP-
allocated IP address for the lease duration."
6145,"Since a client may want to use its address beyond thelease’s expiration, DHCP also provides a mechanism that allows a client to renew its lease on an IP
address."
6146,"From a mobility aspect, DHCP does have one very significant shortcoming."
6147,"Since a new IP address is
obtained from DHCP each time a node connects to a new subnet, a TCP connection to a remote
application cannot be maintained as a mobile node moves between subnets."
6148,"In Chapter 6, we will
examine mobile IP—an extension to the IP infrastructure that allows a mobile node to use a single
permanent address as it moves between subnets."
6149,"Additional details about DHCP can be found in
[Droms 2002]  and [dhc 2016]."
6150,"An open source reference implementation of DHCP is available from the
Internet Systems Consortium [ISC 2016]."
6151,"4.3.4 Network Address Translation (NAT)
Given our discussion about Internet addresses and the IPv4 datagram format, we’re now well aware that
every IP-capable device needs an IP address."
6152,"With the proliferation of small office, home office (SOHO)subnets, this would seem to imply that whenever a SOHO wants to install a LAN to connect multiplemachines, a range of addresses would need to be allocated by the ISP to cover all of the SOHO’s IPdevices (including phones, tablets, gaming devices, IP TVs, printers and more)."
6153,"If the subnet grew
bigger, a larger block of addresses would have to be allocated."
6154,"But what if the ISP had already allocated
the contiguous portions of the SOHO network’s current address range?"
6155,And what typical homeownerwants (or should need) to know how to manage IP addresses in the first place?
6156,"Fortunately, there is asimpler approach to address allocation that has found increasingly widespread use in such scenarios:network address translation (NAT)  [RFC 2663 ; RFC 3022 ; Huston 2004, Zhang 2007; Cisco NAT
2016] ."
6157,Figure 4.25 shows the operation of a NAT-enabled router.
6158,"The NAT-enabled router, residing in thehome, has an interface that is part of the home network on the right of Figure 4.25."
6159,"Addressing within
the home network is exactly as we have seen above—all four interfaces in the home network have thesame subnet address of 10.0.0/24."
6160,"The address space 10.0.0.0/8 is one of three portions of the IP
address space that is reserved in [RFC 1918]  for a private network  or a realm with private
addresses , such as the home network in Figure 4.25."
6161,"A realm with private addresses refers to a
network whose addresses only have meaning to devices within that network."
6162,"To see why this is
important, consider the fact that there are hundreds of thousands of home networks, many using thesame address space, 10.0.0.0/24."
6163,"Devices within a given home network can send packets to each other
using 10.0.0.0/24 addressing."
6164,"However, packets forwarded beyond  the home network into the larger
global Internet clearly cannot use these addresses (as either a source or a destination address)
because there are hundreds of thousands of networks using this block of addresses."
6165,"That is, the10.0.0.0/24 addresses can only have meaning within theFigure 4.25 Network address translation
given home network."
6166,"But if private addresses only have meaning within a given network, how is
addressing handled when packets are sent to or received from the global Internet, where addresses are
necessarily unique?"
6167,The answer lies in understanding NAT.
6168,The NAT-enabled router does not look like a router to the outside world.
6169,"Instead the NAT router
behaves to the outside world as a single  device with a single  IP address."
6170,"In Figure 4.25, all traffic
leaving the home router for the larger Internet has a source IP address of 138.76.29.7, and all traffic
entering the home router must have a destination address of 138.76.29.7. In essence, the NAT-enabledrouter is hiding the details of the home network from the outside world."
6171,"(As an aside, you might wonderwhere the home network computers get their addresses and where the router gets its single IP address."
6172,"Often, the answer is the same—DHCP! The router gets its address from the ISP’s DHCP server, and
the router runs a DHCP server to provide addresses to computers within the NAT-DHCP-router-controlled home network’s address space.)
If all datagrams arriving at the NAT router from the WAN have the same destination IP address
(specifically, that of the WAN-side interface of the NAT router), then how does the router know theinternal host to which it should forward a given datagram?"
6173,"The trick is to use a NAT translation table at
the NAT router, and to include port numbers as well as IP addresses in the table entries."
6174,Consider the example in Figure 4.25.
6175,"Suppose a user sitting in a home network behind host 10.0.0.1
requests a Web page on some Web server (port 80) with IP address 128.119.40.186."
6176,"The host 10.0.0.1
assigns the (arbitrary) source port number 3345 and sends the datagram into the LAN."
6177,"The NAT routerreceives the datagram, generates a new source port number 5001 for the datagram, replaces thesource IP address with its WAN-side IP address 138.76.29.7, and replaces the original source port
number 3345 with the new source port number 5001."
6178,"When generating a new source port number, the
NAT router can select any source port number that is not currently in the NAT translation table."
6179,"(Notethat because a port number field is 16 bits long, the NAT protocol can support over 60,000 simultaneousconnections with a single WAN-side IP address for the router!) NAT in the router also adds an entry toits NAT translation table."
6180,"The Web server, blissfully unaware that the arriving datagram containing the
HTTP request has been manipulated by the NAT router, responds with a datagram whose destination
address is the IP address of the NAT router, and whose destination port number is 5001."
6181,"When thisdatagram arrives at the NAT router, the router indexes the NAT translation table using the destination IPaddress and destination port number to obtain the appropriate IP address (10.0.0.1) and destination portnumber (3345) for the browser in the home network."
6182,"The router then rewrites the datagram’s destinationaddress and destination port number, and forwards the datagram into the home network."
6183,NAT has enjoyed widespread deployment in recent years.
6184,But NAT is not without detractors.
6185,"First, one
might argue that, port numbers are meant to be used for addressing processes, not for addressing
hosts."
6186,"This violation can indeed cause problems for servers running on the home network, since, as we
have seen in Chapter 2, server processes wait for incoming requests at well-known port numbers and
peers in a P2P protocol need to accept incoming connections when acting as servers."
6187,"Technicalsolutions to these problems include NAT traversal  tools [RFC 5389]  and Universal Plug and Play
(UPnP), a protocol that allows a host to discover and configure a nearby NAT [UPnP Forum 2016]."
6188,More “philosophical” arguments have also been raised against NAT by architectural purists.
6189,"Here, the
concern is that routers are meant to be layer 3 (i.e., network-layer) devices, and should process packets
only up to the network layer."
6190,"NAT violates this principle that hosts should be talking directly with each
other, without interfering nodes modifying IP addresses, much less port numbers."
6191,"But like it or not, NAT
has not become an important component of the Internet, as have other so-called middleboxes  [Sekar
2011]  that operate at the network layer but have functions that are quite different from routers."
6192,"Middleboxes do not perform traditional datagram forwarding, but instead perform functions such as
NAT, load balancing of traffic flows, traffic firewalling (see accompanying sidebar), and more."
6193,"The
generalized forwarding paradigm that we’ll study shortly in Section 4.4 allows a number of these
middlebox functions, as well as traditional router forwarding, to be accomplished in a common,
integrated manner."
6194,"FOCUS ON SECURITY
INSPECTING DATAGRAMS: FIREWALLS AND INTRUSION DETECTION SYSTEMS
Suppose you are assigned the task of administering a home, departmental, university, or
corporate network."
6195,"Attackers, knowing the IP address range of your network, can easily send IPdatagrams to addresses in your range."
6196,"These datagrams can do all kinds of devious things,including mapping your network with ping sweeps and port scans, crashing vulnerable hosts withmalformed packets, scanning for open TCP/UDP ports on servers in your network, and infecting
hosts by including malware in the packets."
6197,"As the network administrator, what are you going to
do about all those bad guys out there, each capable of sending malicious packets into yournetwork?"
6198,Two popular defense mechanisms to malicious packet attacks are firewalls andintrusion detection systems (IDSs).
6199,"As a network administrator, you may first try installing a firewall between your network and the
Internet."
6200,"(Most access routers today have firewall capability.) Firewalls inspect the datagram andsegment header fields, denying suspicious datagrams entry into the internal network."
6201,"For
example, a firewall may be configured to block all ICMP echo request packets (see Section 5.6),
thereby preventing an attacker from doing a traditional port scan across your IP address range."
6202,Firewalls can also block packets based on source and destination IP addresses and portnumbers.
6203,"Additionally, firewalls can be configured to track TCP connections, granting entry onlyto datagrams that belong to approved connections."
6204,Additional protection can be provided with an IDS.
6205,"An IDS, typically situated at the network
boundary, performs “deep packet inspection,” examining not only header fields but also thepayloads in the datagram (including application-layer data)."
6206,An IDS has a database of packetsignatures that are known to be part of attacks.
6207,This database is automatically updated as newattacks are discovered.
6208,"As packets pass through the IDS, the IDS attempts to match headerfields and payloads to the signatures in its signature database."
6209,"If such a match is found, an alertis created."
6210,"An intrusion prevention system (IPS) is similar to an IDS, except that it actually blocks
packets in addition to creating alerts."
6211,"In Chapter 8, we’ll explore firewalls and IDSs in more
detail."
6212,Can firewalls and IDSs fully shield your network from all attacks?
6213,"The answer is clearly no, as
attackers continually find new attacks for which signatures are not yet available."
6214,But firewallsand traditional signature-based IDSs are useful in protecting your network from known attacks.
6215,"4.3.5 IPv6
In the early 1990s, the Internet Engineering Task Force began an effort to develop a successor to theIPv4 protocol."
6216,"A prime motivation for this effort was the realization that the 32-bit IPv4 address spacewas beginning to be used up, with new subnets and IP nodes being attached to the Internet (and being
allocated unique IP addresses) at a breathtaking rate."
6217,"To respond to this need for a large IP addressspace, a new IP protocol, IPv6, was developed."
6218,"The designers of IPv6 also took this opportunity to
tweak and augment other aspects of IPv4, based on the accumulated operational experience with IPv4."
6219,The point in time when IPv4 addresses would be completely allocated (and hence no new networkscould attach to the Internet) was the subject of considerable debate.
6220,"The estimates of the two leaders of
the IETF’s Address Lifetime Expectations working group were that addresses would become exhausted
in 2008 and 2018, respectively [Solensky 1996] ."
6221,"In February 2011, IANA allocated out the last
remaining pool of unassigned IPv4 addresses to a regional registry."
6222,"While these registries still have
available IPv4 addresses within their pool, once these addresses are exhausted, there are no more
available address blocks that can be allocated from a central pool [Huston 2011a]."
6223,"A recent survey of
IPv4 address-space exhaustion, and the steps taken to prolong the life of the address space is [Richter
2015] ."
6224,"Although the mid-1990s estimates of IPv4 address depletion suggested that a considerable amount of
time might be left until the IPv4 address space was exhausted, it was realized that considerable timewould be needed to deploy a new technology on such an extensive scale, and so the process to
develop IP version 6 (IPv6) [RFC 2460]  was begun [RFC 1752] ."
6225,"(An often-asked question is what
happened to IPv5?"
6226,"It was initially envisioned that the ST-2 protocol would become IPv5, but ST-2 waslater dropped.) An excellent source of information about IPv6 is [Huitema 1998] ."
6227,"IPv6 Datagram Format
The format of the IPv6 datagram is shown in Figure 4.26."
6228,"The most important changes introduced in
IPv6 are evident in the datagram format:
Expanded addressing capabilities."
6229, IPv6 increases the size of the IP address from 32 to 128 bits.
6230,This ensures that the world won’t run out of IP addresses.
6231,"Now, every grain of sand on the planet
can be IP-addressable."
6232,"In addition to unicast and multicast addresses, IPv6 has introduced a newtype of address, called an anycast address , that allows a datagram to be delivered to any one of a
group of hosts."
6233,"(This feature could be used, for example, to send an HTTP GET to the nearest of anumber of mirror sites that contain a given document.)
A streamlined 40-byte header."
6234,"As discussed below, a number of IPv4 fields have been dropped or
made optional."
6235,"The resulting 40-byte fixed-length header allows for faster processing of the IP
datagram by a router."
6236,A new encoding of options allows for more flexible options processing.
6237,Flow labeling.
6238, IPv6 has an elusive definition of a flow.
6239,"RFC 2460  states that this allows “labeling of
packets belonging to particular flows for which the senderFigure 4.26 IPv6 datagram format
requests special handling, such as a non-default quality of service or real-time service.” For
example, audio and video transmission might likely be treated as a flow."
6240,"On the other hand, the
more traditional applications, such as file transfer and e-mail, might not be treated as flows."
6241,"It ispossible that the traffic carried by a high-priority user (for example, someone paying for betterservice for their traffic) might also be treated as a flow."
6242,"What is clear, however, is that the designersof IPv6 foresaw the eventual need to be able to differentiate among the flows, even if the exactmeaning of a flow had yet to be determined."
6243,"As noted above, a comparison of Figure 4.26 with Figure 4.16 reveals the simpler, more streamlined
structure of the IPv6 datagram."
6244,"The following fields are defined in IPv6:
Version."
6245,This 4-bit field identifies the IP version number.
6246,"Not surprisingly, IPv6 carries a value of 6 in
this field."
6247,Note that putting a 4 in this field does not create a valid IPv4 datagram.
6248,"(If it did, life would
be a lot simpler—see the discussion below regarding the transition from IPv4 to IPv6.)
Traffic class."
6249,"The 8-bit traffic class field, like the TOS field in IPv4, can be used to give priority to
certain datagrams within a flow, or it can be used to give priority to datagrams from certain
applications (for example, voice-over-IP) over datagrams from other applications (for example,SMTP e-mail)."
6250,Flow label.
6251," As discussed above, this 20-bit field is used to identify a flow of datagrams."
6252,Payload length.
6253," This 16-bit value is treated as an unsigned integer giving the number of bytes in the
IPv6 datagram following the fixed-length, 40-byte datagram header."
6254,Next header.
6255,"This field identifies the protocol to which the contents (data field) of this datagram will
be delivered (for example, to TCP or UDP)."
6256,"The field uses the same values as the protocol field in
the IPv4 header."
6257,Hop limit.
6258," The contents of this field are decremented by one by each router that forwards the
datagram."
6259,"If the hop limit count reaches zero, the datagram is ­discarded.Source and destination addresses."
6260," The various formats of the IPv6 128-bit address are described
in RFC 4291."
6261,Data.
6262,This is the payload portion of the IPv6 datagram.
6263,"When the datagram reaches its destination,
the payload will be removed from the IP datagram and passed on to the protocol specified in the
next header field."
6264,The discussion above identified the purpose of the fields that are included in the IPv6 datagram.
6265,"Comparing the IPv6 datagram format in Figure 4.26 with the IPv4 datagram format that we saw in
Figure 4.16, we notice that several fields appearing in the IPv4 datagram are no longer present in the
IPv6 datagram:
Fragmentation/reassembly."
6266,IPv6 does not allow for fragmentation and reassembly at intermediaterouters; these operations can be performed only by the source and destination.
6267,"If an IPv6 datagram
received by a router is too large to be forwarded over the outgoing link, the router simply drops the
datagram and sends a “Packet Too Big” ICMP error message (see Section 5.6) back to the sender."
6268,"The sender can then resend the data, using a smaller IP datagram size."
6269,"Fragmentation and
reassembly is a time-consuming operation; removing this functionality from the routers and placing itsquarely in the end systems considerably speeds up IP forwarding within the network."
6270,Header checksum.
6271," Because the transport-layer (for example, TCP and UDP) and link-layer (for
example, Ethernet) protocols in the Internet layers perform checksumming, the designers of IPprobably felt that this functionality was sufficiently redundant in the network layer that it could beremoved."
6272,"Once again, fast processing of IP packets was a central concern."
6273,"Recall from our
discussion of IPv4 in Section 4.3.1 that since the IPv4 header contains a TTL field (similar to the
hop limit field in IPv6), the IPv4 header checksum needed to be recomputed at every router."
6274,"As with
fragmentation and reassembly, this too was a costly operation in IPv4."
6275,Options.
6276, An options field is no longer a part of the standard IP header.
6277,"However, it has not gone
away."
6278,"Instead, the options field is one of the possible next headers pointed to from within the IPv6header."
6279,"That is, just as TCP or UDP protocol headers can be the next header within an IP packet, sotoo can an options field."
6280,"The removal of the options field results in a fixed-length, 40-byte IP header."
6281,"Transitioning from IPv4 to IPv6
Now that we have seen the technical details of IPv6, let us consider a very practical matter: How will the
public Internet, which is based on IPv4, be transitioned to IPv6?"
6282,"The problem is that while new IPv6-capable systems can be made backward-compatible, that is, can send, route, and receive IPv4datagrams, already deployed IPv4-capable systems are not capable of handling IPv6 datagrams."
6283,"Several options are possible [Huston 2011b, RFC 4213] ."
6284,"One option would be to declare a flag day—a given time and date when all Internet machines would be
turned off and upgraded from IPv4 to IPv6."
6285,The last major technology transition (from using NCP tousing TCP for reliable transport service) occurred almost 35 years ago.
6286,"Even back then [RFC 801],
when the Internet was tiny and still being administered by a small number of “wizards,” it was realized
that such a flag day was not possible."
6287,A flag day involving billions of devices is even more unthinkabletoday.
6288,"The approach to IPv4-to-IPv6 transition that has been most widely adopted in practice involves
tunneling  [RFC 4213] ."
6289,"The basic idea behind tunneling —a key concept with applications in many other
scenarios beyond IPv4-to-IPv6 transition, including wide use in the all-IP cellular networks that we’ll
cover in Chapter  7—is the following."
6290,"Suppose two IPv6 nodes (in this example, B and E in Figure 4.27)
want to interoperate using IPv6 datagrams but are connected to each other by intervening IPv4 routers."
6291,"We refer to the intervening set of IPv4 routers between two IPv6 routers as a tunnel , as illustrated in
Figure 4.27."
6292,"With tunneling, the IPv6 node on the sending side of the tunnel (in this example, B) takesthe entire IPv6 datagram and puts it in the data (payload) field of an IPv4 datagram."
6293,"This IPv4 datagram
is then addressed to the IPv6 node on the receiving side of the tunnel (in this example, E) and sent to
the first node in the tunnel (in this example, C)."
6294,"The intervening IPv4 routers in the tunnel route this IPv4
datagram among themselves, just as they would any other datagram, blissfully unaware that the IPv4datagram itself contains a complete IPv6 datagram."
6295,"The IPv6 node on the receiving side of the tunneleventually receives the IPv4 datagram (it is the destination of the IPv4 datagram!), determines that theIPv4 datagram contains an IPv6 datagram (by observing that the protocol number field in the IPv4
datagram is 41 [RFC 4213] , indicating that the IPv4 payload is a IPv6 datagram), extracts the IPv6
datagram, and then routes the IPv6 datagram exactly as it would if it had received the IPv6 datagram
from a directly connected IPv6 neighbor."
6296,"We end this section by noting that while the adoption of IPv6 was initially slow to take off [Lawton 2001;
Huston 2008b], momentum has been building."
6297,"NIST [NIST IPv6 2015] reports that more than a third of
US government second-level domains are IPv6-enabled."
6298,"On the client side, Google reports that only
about 8 percent of the clients accessing Google services do so via IPv6 [Google IPv6 2015]."
6299,"But other
recent measurements [Czyz 2014]  indicate that IPv6 adoption is accelerating."
6300,"The proliferation of
devices such as IP-enabled phones and other portable devicesFigure 4.27 Tunneling
provides an additional push for more widespread deployment of IPv6."
6301,"Europe’s Third Generation
Partnership Program [3GPP 2016] has specified IPv6 as the standard addressing scheme for mobile
multimedia."
6302,"One important lesson that we can learn from the IPv6 experience is that it is enormously difficult to
change network-layer protocols."
6303,"Since the early 1990s, numerous new network-layer protocols havebeen trumpeted as the next major revolution for the Internet, but most of these protocols have hadlimited penetration to date."
6304,"These protocols include IPv6, multicast protocols, and resource reservationprotocols; a discussion of these latter two protocols can be found in the online supplement to this text.Indeed, introducing new protocols into the network layer is like replacing the foundation of a house—it is
difficult to do without tearing the whole house down or at least temporarily relocating the house’s
residents."
6305,"On the other hand, the Internet has witnessed rapid deployment of new protocols at theapplication layer."
6306,"The classic examples, of course, are the Web, instant messaging, streaming media,distributed games, and various forms of social media."
6307,"Introducing new application-layer protocols is likeadding a new layer of paint to a house—it is relatively easy to do, and if you choose an attractive color,others in the neighborhood will copy you."
6308,"In summary, in the future we can certainly expect to see
changes in the Internet’s network layer, but these changes will likely occur on a time scale that is muchslower than the changes that will occur at the application layer.4.4 Generalized Forwarding and SDN
In Section 4.2.1, we noted that an Internet router’s forwarding decision has traditionally been based
solely on a packet’s destination address."
6309,"In the previous section, however, we’ve also seen that there
has been a proliferation of middleboxes that perform many layer-3 functions."
6310,"NAT boxes rewrite headerIP addresses and port numbers; firewalls block traffic based on header-field values or redirect packets
for additional processing, such as deep packet inspection (DPI)."
6311,"Load-balancers forward packets
requesting a given service (e.g., an HTTP request) to one of a set of a set of servers that provide that
service."
6312,[RFC 3234]  lists a number of common middlebox functions.
6313,"This proliferation of middleboxes, layer-2 switches, and layer-3 routers [Qazi 2013]—each with its own
specialized hardware, software and management interfaces—has undoubtedly resulted in costly
headaches for many network operators."
6314,"However, recent advances in software-defined networking havepromised, and are now delivering, a unified approach towards providing many of these network-layerfunctions, and certain link-layer functions as well, in a modern, elegant, and integrated manner."
6315,"Recall that Section 4.2.1 characterized destination-based forwarding as the two steps of looking up a
destination IP address (“match”), then sending the packet into the switching fabric to the specified output
port (“action”)."
6316,"Let’s now consider a significantly more general “match-plus-action” paradigm, where the“match” can be made over multiple header fields associated with different protocols at different layers inthe protocol stack."
6317,"The “action” can include forwarding the packet to one or more output ports (as indestination-based forwarding), load balancing packets across multiple outgoing interfaces that lead to aservice (as in load balancing), rewriting header values (as in NAT), purposefully blocking/dropping a
packet (as in a firewall), sending a packet to a special server for further processing and action (as in
DPI), and more."
6318,"In generalized forwarding, a match-plus-action table generalizes the notion of the destination-based
forwarding table that we encountered in Section 4.2.1. Because forwarding decisions may be made
using network-layer and/or link-layer source and destination addresses, the forwarding devices shown inFigure 4.28 are more accurately described as “packet switches” rather than layer 3 “routers” or layer 2
“switches.” Thus, in the remainder of this section, and in Section 5.5, we’ll referFigure 4.28 Generalized forwarding: Each packet switch contains a match-plus-action table that
is computed and distributed by a remote controller
to these devices as packet switches, adopting the terminology that is gaining widespread adoption in
SDN literature."
6319,"Figure 4.28 shows a match-plus-action table in each packet switch, with the table being computed,
installed, and updated by a remote controller."
6320,"We note that while it is possible for the control
components at the individual packet switch to interact with each other (e.g., in a manner similar to that in
Figure 4.2), in practice generalized match-plus-action capabilities are implemented via a remote
controller that computes, installs, and updates these tables."
6321,"You might take a minute to compare
Figures 4.2, 4.3 and 4.28—what similarities and differences do you notice between destination-based
forwarding shown in Figure 4.2 and 4.3, and generalized forwarding shown in Figure 4.28?"
6322,"Our following discussion of generalized forwarding will be based on OpenFlow [McKeown 2008,
OpenFlow 2009 , Casado 2014 , Tourrilhes 2014]—a highly visible and successful standard that has
pioneered the notion of the match-plus-action forwarding abstraction and controllers, as well as the SDN
revolution more generally [Feamster 2013] ."
6323,"We’ll primarily consider OpenFlow 1.0, which introduced
key SDN abstractions and functionality in a particularly clear and concise manner."
6324,"Later versions ofOpenFlow introduced additional capabilities as a result of experience gained through implementation
and use; current and earlier versions of the OpenFlow standard can be found at [ONF 2016]."
6325,"Each entry in the match-plus-action forwarding table, known as a flow table  in OpenFlow, includes:
A set of header field values  to which an incoming packet will be matched."
6326,"As in the case of
destination-based forwarding, hardware-based matching is most rapidly performed in TCAMmemory, with more than a million destination address entries being possible [Bosshart 2013] ."
6327,"A
packet that matches no flow table entry can be dropped or sent to the remote controller for more
processing."
6328,"In practice, a flow table may be implemented by multiple flow tables for performance or
cost reasons [Bosshart 2013] , but we’ll focus here on the abstraction of a single flow table."
6329,A set of counters that are updated as packets are matched to flow table entries.
6330,"These counters
might include the number of packets that have been matched by that table entry, and the time since
the table entry was last updated."
6331,A set of actions to be taken when a packet matches a flow table entry.
6332,"These actions might be to
forward the packet to a given output port, to drop the packet, makes copies of the packet and sent
them to multiple output ports, and/or to rewrite selected header fields."
6333,"We’ll explore matching and actions in more detail in Sections 4.4.1 and 4.4.2, respectively."
6334,"We’ll then
study how the network-wide collection of per-packet switch matching rules can be used to implement awide range of functions including routing, layer-2 switching, firewalling, load-balancing, virtual networks,
and more in Section 4.4.3. In closing, we note that the flow table is essentially an API, the abstraction
through which an individual packet switch’s behavior can be programmed; we’ll see in Section 4.4.3
that network-wide behaviors can similarly be programmed by appropriately programming/configuringthese tables in a collection of network packet switches [Casado 2014] ."
6335,"4.4.1 Match
Figure 4.29 shows the eleven packet-header fields and the incoming port ID that can be matched in an
OpenFlow 1.0 match-plus-action rule."
6336,"Recall from
Figure 4.29 Packet matching fields, OpenFlow 1.0 flow tableSection 1.5.2 that a link-layer (layer 2) frame arriving to a packet switch will contain a network-layer
(layer 3) datagram as its payload, which in turn will typically contain a transport-layer (layer 4) segment."
6337,"The first observation we make is that OpenFlow’s match abstraction allows for a match to be made on
selected fields from three layers of protocol headers (thus rather brazenly defying the layering principle
we studied in Section 1.5)."
6338,"Since we’ve not yet covered the link layer, suffice it to say that the source
and destination MAC addresses shown in Figure 4.29 are the link-layer addresses associated with the
frame’s sending and receiving interfaces; by forwarding on the basis of Ethernet addresses rather than
IP addresses, we can see that an OpenFlow-enabled device can equally perform as a router (layer-3device) forwarding datagrams as well as a switch (layer-2 device) forwarding frames."
6339,"The Ethernet typefield corresponds to the upper layer protocol (e.g., IP) to which the frame’s payload will be de-multiplexed, and the VLAN fields are concerned with so-called virtual local area networks that we’ll study
in Chapter 6."
6340,"The set of twelve values that can be matched in the OpenFlow 1.0 specification has
grown to 41 values in more recent OpenFlow specifications [Bosshart 2014] ."
6341,The ingress port refers to the input port at the packet switch on which a packet is received.
6342,"The packet’sIP source address, IP destination address, IP protocol field, and IP type of service fields were discussed
earlier in Section 4.3.1. The transport-layer source and destination port number fields can also be
matched."
6343,Flow table entries may also have wildcards.
6344,"For example, an IP address of 128.119.*.* in a flow table
will match the corresponding address field of any datagram that has 128.119 as the first 16 bits of its
address."
6345,Each flow table entry also has an associated priority.
6346,"If a packet matches multiple flow table
entries, the selected match and corresponding action will be that of the highest priority entry with whichthe packet matches."
6347,"Lastly, we observe that not all fields in an IP header can be matched."
6348,"For example OpenFlow does not
allow matching on the basis of TTL field or datagram length field."
6349,"Why are some fields allowed for
matching, while others are not?"
6350,"Undoubtedly, the answer has to do with the tradeoff betweenfunctionality and complexity."
6351,"The “art” in choosing an abstraction is to provide for enough functionality toaccomplish a task (in this case to implement, configure, and manage a wide range of network-layer
functions that had previously been implemented through an assortment of network-layer devices),
without over-burdening the abstraction with so much detail and generality that it becomes bloated and
unusable."
6352,"Butler Lampson has famously noted [Lampson 1983]:
Do one thing at a time, and do it well."
6353,"An interface should capture the minimum essentials of an
abstraction."
6354,Don’t generalize; generalizations are generally wrong.
6355,"Given OpenFlow’s success, one can surmise that its designers indeed chose their abstraction well."
6356,"Additional details of OpenFlow matching can be found in [OpenFlow 2009 , ONF 2016].4.4.2 Action
As shown in Figure 4.28, each flow table entry has a list of zero or more actions that determine the
processing that is to be applied to a packet that matches a flow table entry."
6357,"If there are multiple actions,
they are performed in the order specified in the list."
6358,"Among the most important possible actions are:
Forwarding."
6359," An incoming packet may be forwarded to a particular physical output port, broadcast
over all ports (except the port on which it arrived) or multicast over a selected set of ports."
6360,"The
packet may be encapsulated and sent to the remote controller for this device."
6361,"That controller thenmay (or may not) take some action on that packet, including installing new flow table entries, and
may return the packet to the device for forwarding under the updated set of flow table rules."
6362,Dropping.
6363, A flow table entry with no action indicates that a matched packet should be dropped.
6364,Modify-field.
6365," The values in ten packet header fields (all layer 2, 3, and 4 fields shown in Figure 4.29
except the IP Protocol field) may be re-written before the packet is forwarded to the chosen output
port."
6366,"4.4.3 OpenFlow Examples of Match-plus-action in Action
Having now considered both the match and action components of generalized forwarding, let’s put these
ideas together in the context of the sample network shown in Figure 4.30."
6367,"The network has 6 hosts (h1,
h2, h3, h4, h5 and h6) and three packet switches (s1, s2 and s3), each with four local interfaces
(numbered 1 through 4)."
6368,"We’ll consider a number of network-wide behaviors that we’d like to implement,and the flow table entries in s1, s2 and s3 needed to implement this behavior."
6369,"Figure 4.30 OpenFlow match-plus-action network with three packet switches, 6 hosts, and an
OpenFlow controller
A First Example: Simple Forwarding
As a very simple example, suppose that the desired forwarding behavior is that packets from h5 or h6
destined to h3 or h4 are to be forwarded from s3 to s1, and then from s1 to s2 (thus completely avoidingthe use of the link between s3 and s2)."
6370,"The flow table entry in s1 would be:
s1 Flow Table (Example 1)
Match Action
Ingress Port = 1 ; IP Src = 10.3.*.* ; IP Dst = 10.2.*.* Forward(4)
… …
Of course, we’ll also need a flow table entry in s3 so that datagrams sent from h5 or h6 are forwarded to
s1 over outgoing interface 3:
s3 Flow Table (Example 1)
Match Action
IP Src = 10.3.*.* ; IP Dst = 10.2.*.* Forward(3)
… …
Lastly, we’ll also need a flow table entry in s2 to complete this first example, so that datagrams arriving
from s1 are forwarded to their destination, either host h3 or h4:
s2 Flow Table (Example 1)
Match Action
Ingress port = 2 ; IP Dst = 10.2.0.3 Forward(3)
Ingress port = 2 ; IP Dst = 10.2.0.4 Forward(4)… …
A Second Example: Load Balancing
As a second example, let’s consider a load-balancing scenario, where datagrams from h3 destined to
10.1.*.* are to be forwarded over the direct link between s2 and s1, while datagrams from h4 destined to10.1.*.* are to be forwarded over the link between s2 and s3 (and then from s3 to s1)."
6371,"Note that this
behavior couldn’t be achieved with IP’s destination-based forwarding."
6372,"In this case, the flow table in s2
would be:
s2 Flow Table (Example 2)
Match Action
Ingress port = 3; IP Dst = 10.1.*.* Forward(2)
Ingress port = 4; IP Dst = 10.1.*.* Forward(1)
… …
Flow table entries are also needed at s1 to forward the datagrams received from s2 to either h1 or h2;
and flow table entries are needed at s3 to forward datagrams received on interface 4 from s2 over
interface 3 towards s1."
6373,See if you can figure out these flow table entries at s1 and s3.
6374,"A Third Example: Firewalling
As a third example, let’s consider a firewall scenario in which s2 wants only to receive (on any of its
interfaces) traffic sent from hosts attached to s3."
6375,"s2 Flow Table (Example 3)
Match Action
IP Src = 10.3.*.* IP Dst = 10.2.0.3 Forward(3)
IP Src = 10.3.*.* IP Dst = 10.2.0.4 Forward(4)
… …If there were no other entries in s2’s flow table, then only traffic from 10.3.*.* would be forwarded to the
hosts attached to s2."
6376,"Although we’ve only considered a few basic scenarios here, the versatility and advantages of
generalized forwarding are hopefully apparent."
6377,"In homework problems, we’ll explore how flow tables can
be used to create many different logical behaviors, including virtual networks—two or more logically
separate networks (each with their own independent and distinct forwarding behavior)—that use the
same physical set of packet switches and links."
6378,"In Section 5.5, we’ll return to flow tables when we study
the SDN controllers that compute and distribute the flow tables, and the protocol used for
communicating between a packet switch and its controller.4.5 Summary
In this chapter we’ve covered the data plane  functions of the network layer—the per-router  functions
that determine how packets arriving on one of a router’s input links are forwarded to one of that router’s
output links."
6379,"We began by taking a detailed look at the internal operations of a router, studying input andoutput port functionality and destination-based forwarding, a router’s internal switching mechanism,
packet queue management and more."
6380,"We covered both traditional IP forwarding (where forwarding is
based on a datagram’s destination address) and generalized forwarding (where forwarding and otherfunctions may be performed using values in several different fields in the datagram’s header) and seenthe versatility of the latter approach."
6381," We also studied the IPv4 and IPv6 protocols in detail, and Internetaddressing, which we found to be much deeper, subtler, and more interesting than we might haveexpected."
6382,"With our newfound understanding of the network-layer’s data plane, we’re now ready to dive into the
network layer’s control plane in Chapter 5!Homework Problems and Questions
Chapter 4 Review Questions
SECTION 4.1
SECTION 4.2R1."
6383,Let’s review some of the terminology used in this textbook.
6384,"Recall that the name of a
transport-layer packet is segment and that the name of a link-layer packet is frame."
6385,"What is the
name of a network-layer packet?"
6386,"Recall that both routers and link-layer switches are called
packet switches ."
6387,What is the fundamental difference between a router and link-layer switch?
6388,R2.
6389,"We noted that network layer functionality can be broadly divided into data plane functionality
and control plane functionality."
6390,What are the main functions of the data plane?
6391,"Of the control
plane?"
6392,R3.
6393,"We made a distinction between the forwarding function and the routing function performed in
the network layer."
6394,What are the key differences between routing and forwarding?
6395,R4.
6396,What is the role of the forwarding table within a router?
6397,R5.
6398,"We said that a network layer’s service model “defines the characteristics of end-to-end
transport of packets between sending and receiving hosts.” What is the service model of the
Internet’s network layer?"
6399,What guarantees are made by the Internet’s service model regardingthe host-to-host delivery of datagrams?
6400,R6.
6401,"In Section 4.2 , we saw that a router typically consists of input ports, output ports, a
switching fabric and a routing processor."
6402,"Which of these are implemented in hardware and which
are implemented in software?"
6403,Why?
6404,"Returning to the notion of the network layer’s data planeand control plane, which are implemented in hardware and which are implemented in software?Why?"
6405,R7.
6406,"Discuss why each input port in a high-speed router stores a shadow copy of the forwarding
table."
6407,R8.
6408,What is meant by destination-based forwarding?
6409,"How does this differ from generalized
forwarding (assuming you’ve read Section 4.4 , which of the two approaches are adopted by
Software-Defined Networking)?"
6410,R9.
6411,Suppose that an arriving packet matches two or more entries in a router’s forwarding table.
6412,"With traditional destination-based forwarding, what rule does a router apply to determine whichSECTION 4.3of these rules should be applied to determine the output port to which the arriving packet should
be switched?"
6413,R10.
6414,Three types of switching fabrics are discussed in Section 4.2 .
6415,"List and briefly describe
each type."
6416,"Which, if any, can send multiple packets across the fabric in parallel?R11."
6417,Describe how packet loss can occur at input ports.
6418,"Describe how packet loss at input ports
can be eliminated (without using infinite buffers)."
6419,R12.
6420,Describe how packet loss can occur at output ports.
6421,"Can this loss be prevented by
increasing the switch fabric speed?"
6422,R13.
6423,What is HOL blocking?
6424,Does it occur in input ports or output ports?
6425,R14.
6426,"In Section 4.2 , we studied FIFO, Priority, Round Robin (RR), and Weighted Fair Queueing
(WFQ) packet scheduling disciplines?"
6427,"Which of these queueing disciplines ensure that all
packets depart in the order in which they arrived?"
6428,R15.
6429,"Give an example showing why a network operator might want one class of packets to be
given priority over another class of packets."
6430,R16.
6431,What is an essential different between RR and WFQ packet scheduling?
6432,"Is there a case
(Hint: Consider the WFQ weights) where RR and WFQ will behave exactly the same?"
6433,R17.
6434,Suppose Host A sends Host B a TCP segment encapsulated in an IP datagram.
6435,"When
Host B receives the datagram, how does the network layer in Host B know it should pass the
segment (that is, the payload of the datagram) to TCP rather than to UDP or to some otherupper-layer protocol?"
6436,R18.
6437,"What field in the IP header can be used to ensure that a packet is forwarded through no
more than N routers?"
6438,R19.
6439,"Recall that we saw the Internet checksum being used in both transport-layer segment (inUDP and TCP headers, Figures 3.7 and 3.29 respectively) and in network-layer datagrams (IP
header, Figure 4.16 )."
6440,Now consider a transport layer segment encapsulated in an IP datagram.
6441,"Are the checksums in the segment header and datagram header computed over any common
bytes in the IP datagram?"
6442,Explain your answer.
6443,R20.
6444,"When a large datagram is fragmented into multiple smaller datagrams, where are these
smaller datagrams reassembled into a single larger datagram?"
6445,R21.
6446,Do routers have IP addresses?
6447,"If so, how many?"
6448,R22.
6449,What is the 32-bit binary equivalent of the IP address 223.1.3.27?R23.
6450,"Visit a host that uses DHCP to obtain its IP address, network mask, default router, and IP
address of its local DNS server."
6451,List these values.
6452,R24.
6453,Suppose there are three routers between a source host and a destination host.
6454,"Ignoring
fragmentation, an IP datagram sent from the source host to the destination host will travel over
how many interfaces?"
6455,"How many forwarding tables will be indexed to move the datagram fromthe source to the ­destination?SECTION 4.4
ProblemsR25."
6456,"Suppose an application generates chunks of 40 bytes of data every 20 msec, and each
chunk gets encapsulated in a TCP segment and then an IP datagram."
6457,"What percentage of each
datagram will be overhead, and what percentage will be application data?"
6458,R26.
6459,Suppose you purchase a wireless router and connect it to your cable modem.
6460,"Also
suppose that your ISP dynamically assigns your connected device (that is, your wireless router)
one IP address."
6461,"Also suppose that you have five PCs at home that use 802.11 to wirelessly
connect to your wireless router."
6462,How are IP addresses assigned to the five PCs?
6463,"Does the
wireless router use NAT?"
6464,Why or why not?
6465,R27.
6466,What is meant by the term “route aggregation”?
6467,"Why is it useful for a router to perform
route aggregation?"
6468,R28.
6469,What is meant by a “plug-and-play” or “zeroconf” protocol?
6470,R29.
6471,What is a private network address?
6472,"Should a datagram with a private network address ever
be present in the larger public Internet?"
6473,Explain.
6474,R30.
6475,Compare and contrast the IPv4 and the IPv6 header fields.
6476,"Do they have any fields in
common?"
6477,R31.
6478,"It has been said that when IPv6 tunnels through IPv4 routers, IPv6 treats the IPv4 tunnels
as link-layer protocols."
6479,Do you agree with this statement?
6480,Why or why not?
6481,R32.
6482,How does generalized forwarding differ from destination-based ­forwarding?
6483,R33.
6484,"What is the difference between a forwarding table that we encountered in destination-
based forwarding in Section 4.1 and OpenFlow’s flow table that we encountered in Section 4.4
?"
6485,R34.
6486,What is meant by the “match plus action” operation of a router or switch?
6487,"In the case of
destination-based forwarding packet switch, what is matched and what is the action taken?"
6488,"In
the case of an SDN, name three fields that can be matched, and three actions that can be taken."
6489,R35.
6490,"Name three header fields in an IP datagram that can be “matched” in OpenFlow 1.0
generalized forwarding."
6491,"What are three IP datagram header fields that cannot be “matched” in
OpenFlow?"
6492,P1.
6493,Consider the network below.
6494,a.
6495,"Show the forwarding table in router A, such that all traffic destined to host H3 is
forwarded through interface 3."
6496,b.
6497,"Can you write down a forwarding table in router A, such that all traffic from H1 destinedto host H3 is forwarded through interface 3, while all traffic from H2 destined to host H3 is
forwarded through interface 4?"
6498,(Hint: This is a trick question.)P2.
6499,Suppose two packets arrive to two different input ports of a router at exactly the same time.
6500,Also suppose there are no other packets anywhere in the router.
6501,a.
6502,Suppose the two packets are to be forwarded to two different output ports.
6503,"Is it possibleto forward the two packets through the switch fabric at the same time when the fabric
uses a shared bus?"
6504,b.
6505,Suppose the two packets are to be forwarded to two different output ports.
6506,"Is it possible
to forward the two packets through the switch fabric at the same time when the fabric
uses switching via memory?"
6507,c.
6508,Suppose the two packets are to be forwarded to the same output port.
6509,"Is it possible to
forward the two packets through the switch fabric at the same time when the fabric uses
a crossbar?"
6510,P3.
6511,"In Section 4.2 , we noted that the maximum queuing delay is (n–1)D  if the switching fabric is
n times faster than the input line rates."
6512,"Suppose that all packets are of the same length, n
packets arrive at the same time to the n input ports, and all n packets want to be forwarded to
different output ports."
6513,"What is the maximum delay for a packet for the (a) memory, (b) bus, and
(c) crossbar switching fabrics?"
6514,P4.
6515,Consider the switch shown below.
6516,"Suppose that all datagrams have the same fixed length,
that the switch operates in a slotted, synchronous manner, and that in one time slot a datagram
can be transferred from an input port to an output port."
6517,"The switch fabric is a crossbar so that atmost one datagram can be transferred to a given output port in a time slot, but different output
ports can receive datagrams from different input ports in a single time slot."
6518,"What is the minimal
number of time slots needed to transfer the packets shown from input ports to their output ports,assuming any input queue scheduling order you want (i.e., it need not have HOL blocking)?What is the largest number of slots needed, assuming the worst-case scheduling order you candevise, assuming that a non-empty input queue is never idle?P5."
6519,Consider a datagram network using 32-bit host addresses.
6520,"Suppose a router has four links,
numbered 0 through 3, and packets are to be forwarded to the link interfaces as follows:
Destination Address Range Link Interface
11100000 00000000 00000000 00000000
through11100000 00111111 11111111 111111110
11100000 01000000 00000000 00000000
through
11100000 01000000 11111111 111111111
11100000 01000001 00000000 00000000through11100001 01111111 11111111 111111112
otherwise 3
a."
6521,"Provide a forwarding table that has five entries, uses longest prefix matching, and
forwards packets to the correct link interfaces."
6522,b.
6523,"Describe how your forwarding table determines the appropriate link interface fordatagrams with destination addresses:
11001000 10010001 01010001 01010101
11100001 01000000 11000011 0011110011100001 10000000 00010001 01110111
P6."
6524,Consider a datagram network using 8-bit host addresses.
6525,"Suppose a router uses longest
prefix matching and has the following forwarding table:
Prefix Match Interface00 0
010 1
011 2
10 2
11 3
For each of the four interfaces, give the associated range of destination host addresses and the
number of addresses in the range."
6526,P7.
6527,Consider a datagram network using 8-bit host addresses.
6528,"Suppose a router uses longest
prefix matching and has the following forwarding table:
Prefix Match Interface
1 0
10 1
111 2
otherwise 3
For each of the four interfaces, give the associated range of destination host addresses and the
number of addresses in the range."
6529,P8.
6530,"Consider a router that interconnects three subnets: Subnet 1, Subnet 2, and Subnet 3."
6531,"Suppose all of the interfaces in each of these three subnets are required to have the prefix
223.1.17/24."
6532,"Also suppose that Subnet 1 is required to support at least 60 interfaces, Subnet 2 isto support at least 90 interfaces, and Subnet 3 is to support at least 12 interfaces."
6533,Provide threenetwork addresses (of the form a.b.c.d/x) that satisfy these constraints.
6534,P9.
6535,In Section 4.2.2 an example forwarding table (using longest prefix matching) is given.
6536,Rewrite this forwarding table using the a.b.c.d/x notation instead of the binary string notation.
6537,P10.
6538,In Problem P5 you are asked to provide a forwarding table (using longest prefix matching).
6539,Rewrite this forwarding table using the a.b.c.d/x notation instead of the binary string notation.
6540,P11.
6541,Consider a subnet with prefix 128.119.40.128/26.
6542,"Give an example of one IP address (of
form xxx.xxx.xxx.xxx) that can be assigned to this network."
6543,"Suppose an ISP owns the block of
addresses of the form 128.119.40.64/26."
6544,"Suppose it wants to create four subnets from thisblock, with each block having the same number of IP addresses."
6545,What are the prefixes (of forma.b.c.d/x) for the four subnets?
6546,P12.
6547,Consider the topology shown in Figure 4.20 .
6548,"Denote the three subnets with hosts (starting
clockwise at 12:00) as Networks A, B, and C."
6549,"Denote the subnets without hosts as Networks D,
E, and F."
6550,a.
6551,"Assign network addresses to each of these six subnets, with the following constraints: All
addresses must be allocated from 214.97.254/23; Subnet A should have enough
addresses to support 250 interfaces; Subnet B should have enough addresses tosupport 120 interfaces; and Subnet C should have enough addresses to support 120
interfaces."
6552,"Of course, subnets D, E and F should each be able to support two interfaces.For each subnet, the assignment should take the form a.b.c.d/x or a.b.c.d/x – e.f.g.h/y."
6553,b.
6554,"Using your answer to part (a), provide the forwarding tables (using longest prefix
matching) for each of the three routers."
6555,P13.
6556,"Use the whois service at the American Registry for Internet Numbers ( http:/ /www.arin.net/
whois ) to determine the IP address blocks for three universities."
6557,"Can the whois services be used
to determine with certainty the geographical location of a specific IP address?"
6558,"Use
www.maxmind.com  to determine the locations of the Web servers at each of these universities."
6559,P14.
6560,Consider sending a 2400-byte datagram into a link that has an MTU of 700 bytes.
6561,"Suppose
the original datagram is stamped with the identification number 422."
6562,"How many fragments are
generated?"
6563,What are the values in the various fields in the IP datagram(s) generated related tofragmentation?
6564,P15.
6565,"Suppose datagrams are limited to 1,500 bytes (including header) between source Host A
and destination Host B."
6566,"Assuming a 20-byte IP header, how many datagrams would be required
to send an MP3 consisting of 5 million bytes?"
6567,Explain how you computed your answer.
6568,P16.
6569,Consider the network setup in Figure 4.25 .
6570,"Suppose that the ISP instead assigns the
router the address 24.34.112.235 and that the network address of the home network is
192.168.1/24."
6571,a.
6572,Assign addresses to all interfaces in the home network.
6573,b.
6574,"Suppose each host has two ongoing TCP connections, all to port 80 at host
128.119.40.86."
6575,Provide the six corresponding entries in the NAT translation table.
6576,P17.
6577,Suppose you are interested in detecting the number of hosts behind a NAT.
6578,"You observe
that the IP layer stamps an identification number sequentially on each IP packet."
6579,"The
identification number of the first IP packet generated by a host is a random number, and theidentification numbers of the subsequent IP packets are sequentially assigned."
6580,Assume all IPpackets generated by hosts behind the NAT are sent to the outside world.
6581,a.
6582,"Based on this observation, and assuming you can sniff all packets sent by the NAT to the
outside, can you outline a simple technique that detects the number of unique hosts
behind a NAT?"
6583,Justify your answer.
6584,b.
6585,"If the identification numbers are not sequentially assigned but randomly assigned, wouldyour technique work?"
6586,Justify your answer.
6587,P18.
6588,In this problem we’ll explore the impact of NATs on P2P applications.
6589,"Suppose a peer with
username Arnold discovers through querying that a peer with username Bernard has a file it
wants to download."
6590,Also suppose that Bernard and Arnold are both behind a NAT.
6591,"Try to devise
a technique that will allow Arnold to establish a TCP connection with Bernard without application-
specific NAT configuration."
6592,"If you have difficulty devising such a technique, discuss why."
6593,P19.
6594,Consider the SDN OpenFlow network shown in Figure 4.30 .
6595,"Suppose that the desired
forwarding behavior for datagrams arriving at s2 is as follows:
any datagrams arriving on input port 1 from hosts h5 or h6 that are destined to hosts h1 or
h2 should be forwarded over output port 2;
any datagrams arriving on input port 2 from hosts h1 or h2 that are destined to hosts h5 orh6 should be forwarded over output port 1;
any arriving datagrams on input ports 1 or 2 and destined to hosts h3 or h4 should bedelivered to the host specified;
hosts h3 and h4 should be able to send datagrams to each other."
6596,Specify the flow table entries in s2 that implement this forwarding behavior.
6597,P20.
6598,Consider again the SDN OpenFlow network shown in Figure 4.30 .
6599,"Suppose that the
desired forwarding behavior for datagrams arriving from hosts h3 or h4 at s2 is as follows:
any datagrams arriving from host h3 and destined for h1, h2, h5 or h6 should be forwarded in
a clockwise direction in the network;
any datagrams arriving from host h4 and destined for h1, h2, h5 or h6 should be forwarded ina counter-clockwise direction in the network."
6600,Specify the flow table entries in s2 that implement this forwarding behavior.
6601,P21.
6602,Consider again the scenario from P19 above.
6603,"Give the flow tables entries at packet
switches s1 and s3, such that any arriving datagrams with a source address of h3 or h4 are
routed to the destination hosts specified in the destination address field in the IP datagram."
6604,"(Hint:Your forwarding table rules should include the cases that an arriving datagram is destined for adirectly attached host or should be forwarded to a neighboring router for eventual host deliverythere.)
P22."
6605,Consider again the SDN OpenFlow network shown in Figure 4.30 .
6606,"Suppose we want
switch s2 to function as a firewall."
6607,"Specify the flow table in s2 that implements the following
firewall behaviors (specify a different flow table for each of the four firewalling behaviors below)
for delivery of datagrams destined to h3 and h4."
6608,"You do not need to specify the forwarding
behavior in s2 that forwards traffic to other routers."
6609,"Only traffic arriving from hosts h1 and h6 should be delivered to hosts h3 or h4 (i.e., that
arriving traffic from hosts h2 and h5 is blocked)."
6610,"Only TCP traffic is allowed to be delivered to hosts h3 or h4 (i.e., that UDP traffic is blocked).Wireshark Lab
In the Web site for this textbook, www.pearsonhighered.com/ cs-resources , you’ll find a Wireshark lab
assignment that examines the operation of the IP protocol, and the IP datagram format in particular."
6611,"AN INTERVIEW WITH…
Vinton G."
6612,"Cerf
Vinton G."
6613,Cerf is Vice President and Chief Internet Evangelist for Google.
6614,"He served for over 16years at MCI in various positions, ending up his tenure there as Senior Vice President forTechnology Strategy."
6615,"He is widely known as the co-designer of the TCP/IP protocols and the
architecture of the Internet."
6616,"During his time from 1976 to 1982 at the US Department of Defense
Advanced Research Projects Agency (DARPA), he played a key role leading the development ofInternet and Internet-related data packet and security techniques."
6617,He received the USPresidential Medal of Freedom in 2005 and the US National Medal of Technology in 1997.
6618,Heholds a BS in Mathematics from Stanford University and an MS and PhD in computer sciencefrom UCLA.
6619,What brought you to specialize in networking?
6620,I was working as a programmer at UCLA in the late 1960s.
6621,"My job was supported by the US
Defense Advanced Research Projects Agency (called ARPA then, called DARPA now)."
6622,I wasworking in the laboratory of Professor Leonard Kleinrock on the Network Measurement Center ofthe newly created ARPAnet.
6623,"The first node of the ARPAnet was installed at UCLA on September
1, 1969."
6624,"I was responsible for programming a computer that was used to capture performance
information about the ARPAnet and to report this information back for comparison withmathematical models and predictions of the performance of the network."
6625,"Several of the other graduate students and I were made responsible for working on the so-calledOnly traffic destined to h3 is to be delivered (i.e., all traffic to h4 is blocked)."
6626,Only UDP traffic from h1 and destined to h3 is to be delivered.
6627,"All other traffic is blocked.host-level protocols of the ARPAnet—the procedures and formats that would allow many
different kinds of computers on the network to interact with each other."
6628,"It was a fascinating
exploration into a new world (for me) of distributed computing and communication."
6629,"Did you imagine that IP would become as pervasive as it is today when you first designed the
protocol?"
6630,"When Bob Kahn and I first worked on this in 1973, I think we were mostly very focused on the
central question: How can we make heterogeneous packet networks interoperate with oneanother, assuming we cannot actually change the networks themselves?"
6631,"We hoped that wecould find a way to permit an arbitrary collection of packet-switched networks to be
interconnected in a transparent fashion, so that host computers could communicate end-to-end
without having to do any translations in between."
6632,"I think we knew that we were dealing with
powerful and expandable technology, but I doubt we had a clear image of what the world wouldbe like with hundreds of millions of computers all interlinked on the Internet."
6633,What do you now envision for the future of networking and the Internet?
6634,"What major
challenges/obstacles do you think lie ahead in their development?"
6635,I believe the Internet itself and networks in general will continue to proliferate.
6636,"Already there is
convincing evidence that there will be billions of Internet-enabled devices on the Internet,including appliances like cell phones, refrigerators, personal digital assistants, home servers,televisions, as well as the usual array of laptops, servers, and so on."
6637,"Big challenges includesupport for mobility, battery life, capacity of the access links to the network, and ability to scalethe optical core of the network up in an unlimited fashion."
6638,"Designing an interplanetary extension
of the Internet is a project in which I am deeply engaged at the Jet Propulsion Laboratory."
6639,"We
will need to cut over from IPv4 [32-bit addresses] to IPv6 [128 bits]."
6640,"The list is long!
Who has inspired you professionally?"
6641,"My colleague Bob Kahn; my thesis advisor, Gerald Estrin; my best friend, Steve Crocker (we
met in high school and he introduced me to computers in 1960!); and the thousands ofengineers who continue to evolve the Internet today."
6642,Do you have any advice for students entering the networking/Internet field?
6643,"Think outside the limitations of existing systems—imagine what might be possible; but then do
the hard work of figuring out how to get there from the current state of affairs."
6644,Dare to dream: Ahalf dozen colleagues and I at the Jet Propulsion Laboratory have been working on the design ofan interplanetary extension of the terrestrial Internet.
6645,"It may take decades to implement this,mission by mission, but to paraphrase: “A man’s reach should exceed his grasp, or what are the
heavens for?”Chapter 5 The Network Layer: Control Plane
In this chapter, we’ll complete our journey through the network layer by covering the control-plane
component of the network layer—the network-wide  logic that controls not only how a datagram is
forwarded among routers along an end-to-end path from the source host to the destination host, but also
how network-layer components and services are configured and managed."
6646,"In Section 5.2, we’ll cover
traditional routing algorithms for computing least cost paths in a graph; these algorithms are the basis
for two widely deployed Internet routing protocols: OSPF and BGP, that we’ll cover in Sections 5.3 and
5.4, respectively."
6647,"As we’ll see, OSPF is a routing protocol that operates within a single ISP’s network."
6648,"BGP is a routing protocol that serves to interconnect all of the networks in the Internet; BGP is thus
often referred to as the “glue” that holds the Internet together."
6649,"Traditionally, control-plane routingprotocols have been implemented together with data-plane forwarding functions, monolithically, within a
router."
6650,"As we learned in the introduction to Chapter 4, software-defined networking (SDN) makes a
clear separation between the data and control planes, implementing control-plane functions in a
separate “controller” service that is distinct, and remote, from the forwarding components of the routers
it controls."
6651,"We’ll cover SDN controllers in Section 5.5.
In Sections 5.6 and 5.7 we’ll cover some of the nuts and bolts of managing an IP network: ICMP (the
Internet Control Message Protocol) and SNMP (the Simple Network Management Protocol).5.1 Introduction
Let’s quickly set the context for our study of the network control plane by recalling Figures 4.2 and 4.3.
There, we saw that the forwarding table (in the case of ­destination-based forwarding) and the flow
table (in the case of generalized forwarding) were the principal elements that linked the network layer’s
data and control planes."
6652,"We learned that these tables specify the local data-plane forwarding behavior
of a router."
6653,"We saw that in the case of generalized forwarding, the actions taken ( Section 4.4.2) could
include not only forwarding a packet to a router’s output port, but also dropping a packet, replicating a
packet, and/or rewriting layer 2, 3 or 4 packet-header fields."
6654,"In this chapter, we’ll study how those forwarding and flow tables are computed, maintained and
installed."
6655,"In our introduction to the network layer in Section 4.1, we learned that there are two possible
approaches for doing so."
6656,Per-router control.
6657,"Figure 5.1 illustrates the case where a routing algorithm runs in each and every
router; both a forwarding and a routing function are contained
Figure 5.1 Per-router control: Individual routing algorithm components interact in the control
planewithin each router."
6658,"Each router has a routing component that communicates with the routing
components in other routers to compute the values for its forwarding table."
6659,This per-router controlapproach has been used in the Internet for decades.
6660,"The OSPF and BGP protocols that we’ll study
in Sections 5.3 and 5.4 are based on this per-router approach to control."
6661,Logically centralized control.
6662," Figure 5.2 illustrates the case in which a logically centralized
controller computes and distributes the forwarding tables to be used by each and every router."
6663,"Aswe saw in Section 4.4, the generalized match-plus-action abstraction allows the router to perform
traditional IP forwarding as well as a rich set of other functions (load sharing, firewalling, and NAT)
that had been previously implemented in separate middleboxes."
6664,"Figure 5.2 Logically centralized control: A distinct, typically remote, controller interacts with
local control agents (CAs)
The controller interacts with a control agent (CA) in each of the routers via a well-defined protocol to
configure and manage that router’s flow table."
6665,"Typically, the CA has minimum functionality; its job is tocommunicate with the controller, and to do as the controller commands."
6666,"Unlike the routing algorithms in
Figure 5.1, the CAs do not directly interact with each other nor do they actively take part in computingthe forwarding table."
6667,This is a key distinction between per-router control and logically centralized control.
6668,"By “logically centralized” control [Levin 2012] we mean that the routing control service is accessed as if
it were a single central service point, even though the service is likely to be implemented via multiple
servers for fault-tolerance, and performance scalability reasons."
6669,"As we will see in Section 5.5, SDN
adopts this notion of a logically centralized controller—an approach that is finding increased use in
production deployments."
6670,"Google uses SDN to control the routers in its internal B4 global wide-area
network that interconnects its data centers [Jain 2013]."
6671,"SWAN [Hong 2013], from Microsoft Research,
uses a logically centralized controller to manage routing and forwarding between a wide area network
and a data center network."
6672,"China Telecom and China Unicom are using SDN both within data centers
and between data centers [Li 2015]."
6673,"AT&T has noted [AT&T 2013] that it “supports many SDN
capabilities and independently defined, proprietary mechanisms that fall under the SDN architectural
framework.”5.2 Routing Algorithms
In this section we’ll study routing algorithms , whose goal is to determine good paths (equivalently,
routes), from senders to receivers, through the network of routers."
6674,"Typically, a “good” path is one that has
the least cost."
6675,"We’ll see that in practice, however, real-world concerns such as policy issues (for example,
a rule such as “router x, belonging to organization Y, should not forward any packets originating from the
network owned by organization Z ”) also come into play."
6676,"We note that whether the network control plane
adopts a per-router control approach or a logically centralized approach, there must always be a well-
defined sequence of routers that a packet will cross in traveling from sending to receiving host."
6677,"Thus, therouting algorithms that compute these paths are of fundamental importance, and another candidate for ourtop-10 list of fundamentally important networking concepts."
6678,A graph is used to formulate routing problems.
6679,"Recall that a graph   is a set N of nodes and a
collection E of edges, where each edge is a pair of nodes from N."
6680,"In the context of network-layer routing,
the nodes in the graph represent
Figure 5.3 Abstract graph model of a computer network
routers—the points at which packet-forwarding decisions are made—and the edges connecting these
nodes represent the physical links between these routers."
6681,"Such a graph abstraction of a computer network
is shown in Figure 5.3. To view some graphs representing real network maps, see [Dodge 2016,
Cheswick 2000] ; for a discussion of how well different graph-based models model the Internet, see
[Zegura 1997, Faloutsos 1999, Li 2004]."
6682,"As shown in Figure 5.3, an edge also has a value representing its cost."
6683,"Typically, an edge’s cost may
reflect the physical length of the corresponding link (for example, a transoceanic link might have a higherG=(N, E)cost than a short-haul terrestrial link), the link speed, or the monetary cost associated with a link."
6684,"For our
purposes, we’ll simply take the edge costs as a given and won’t worry about how they are determined."
6685,"For
any edge ( x, y) in E, we denote c(x, y) as the cost of the edge between nodes x and y."
6686,"If the pair (x, y)
does not belong to E, we set  Also, we’ll only consider undirected graphs (i.e., graphs whose
edges do not have a direction) in our discussion here, so that edge ( x, y) is the same as edge (y, x) and
that  however, the algorithms we’ll study can be easily extended to the case of directed links
with a different cost in each direction."
6687,"Also, a node y is said to be a neighbor  of node x if (x, y) belongs to
E."
6688,"Given that costs are assigned to the various edges in the graph abstraction, a natural goal of a routing
algorithm is to identify the least costly paths between sources and destinations."
6689,"To make this problemmore precise, recall that a path in a graph  is a sequence of nodes  such that each
of the pairs  are edges in E."
6690,"The cost of a path  is simply the sum
of all the edge costs along the path, that is,  Given any two nodes x and
y, there are typically many paths between the two nodes, with each path having a cost."
6691,"One or more of
these paths is a least-cost path."
6692,"The least-cost problem is therefore clear: Find a path between the
source and destination that has least cost."
6693,"In Figure 5.3, for example, the least-cost path between source
node u and destination node w is (u, x, y, w) with a path cost of 3."
6694,"Note that if all edges in the graph have
the same cost, the least-cost path is also the shortest path (that is, the path with the smallest number of
links between the source and the destination)."
6695,"As a simple exercise, try finding the least-cost path from node u to z in Figure 5.3 and reflect for a
moment on how you calculated that path."
6696,"If you are like most people, you found the path from u to z by
examining Figure 5.3, tracing a few routes from u to z, and somehow convincing yourself that the path you
had chosen had the least cost among all possible paths."
6697,"(Did you check all of the 17 possible paths
between u and z?"
6698,"Probably not!) Such a calculation is an example of a centralized routing algorithm—the
routing algorithm was run in one location, your brain, with complete information about the network."
6699,"Broadly, one way in which we can classify routing algorithms is according to whether they are centralizedor decentralized."
6700,"A centralized routing algorithm  computes the least-cost path between a source and destination
using complete, global knowledge about the network."
6701,"That is, the algorithm takes the connectivitybetween all nodes and all link costs as inputs."
6702,This then requires that the algorithm somehow obtainthis information before actually performing the calculation.
6703,"The calculation itself can be run at one site
(e.g., a logically centralized controller as in Figure 5.2) or could be replicated in the routing component
of each and every router (e.g., as in Figure 5.1)."
6704,"The key distinguishing feature here, however, is that
the algorithm has complete information about connectivity and link costs."
6705,"Algorithms with global state
information are often referred to as link-state (LS) algorithms, since the algorithm must be aware of
the cost of each link in the network."
6706,"We’ll study LS algorithms in Section 5.2.1.
In a decentralized routing algorithm , the calculation of the least-cost path is carried out in anc(x, y)=∞."
6707,"c(x, y)=c(y, x);
G=(N, E) (x1,x2,⋯,xp)
(x1,x2),(x2,x3),⋯,(xp−1,xp) (x1,x2,⋯, xp)
c(x1,x2)+c(x2,x3)+⋯+c(xp−1,xp).iterative, distributed manner by the routers."
6708,"No node has complete information about the costs of all
network links."
6709,"Instead, each node begins with only the knowledge of the costs of its own directly
attached links."
6710,"Then, through an iterative process of calculation and exchange of information with itsneighboring nodes, a node gradually calculates the least-cost path to a destination or set of
destinations."
6711,"The decentralized routing algorithm we’ll study below in Section 5.2.2 is called a
distance-vector (DV) algorithm, because each node maintains a vector of estimates of the costs
(distances) to all other nodes in the network."
6712,"Such decentralized algorithms, with interactive message
exchange between neighboring routers is perhaps more naturally suited to control planes where the
routers interact directly with each other, as in Figure 5.1.
A second broad way to classify routing algorithms is according to whether they are static or dynamic."
6713,"Instatic routing algorithms , routes change very slowly over time, often as a result of human intervention
(for example, a human manually editing a link costs)."
6714,"Dynamic routing algorithms  change the routing
paths as the network traffic loads or topology change."
6715,"A dynamic algorithm can be run either periodically
or in direct response to topology or link cost changes."
6716,"While dynamic algorithms are more responsive to
network changes, they are also more susceptible to problems such as routing loops and route oscillation."
6717,"A third way to classify routing algorithms is according to whether they are load-sensitive or load-
insensitive."
6718,"In a load-sensitive algorithm , link costs vary dynamically to reflect the current level of
congestion in the underlying link."
6719,"If a high cost is associated with a link that is currently congested, arouting algorithm will tend to choose routes around such a congested link."
6720,"While early ARPAnet routing
algorithms were load-sensitive [McQuillan 1980], a number of difficulties were encountered [Huitema
1998] ."
6721,"Today’s Internet routing algorithms (such as RIP, OSPF, and BGP) are load-insensitive , as a
link’s cost does not explicitly reflect its current (or recent past) level of congestion."
6722,"5.2.1 The Link-State (LS) Routing Algorithm
Recall that in a link-state algorithm, the network topology and all link costs are known, that is, available as
input to the LS algorithm."
6723,"In practice this is accomplished by having each node broadcast link-state
packets to all other nodes in the network, with each link-state packet containing the identities and costs of
its attached links."
6724,"In practice (for example, with the Internet’s OSPF routing protocol, discussed in Section
5.3) this is often accomplished by a link-state broadcast  algorithm ­[Perlman 1999] ."
6725,"The result of the
nodes’ broadcast is that all nodes have an identical and complete view of the network."
6726,Each node canthen run the LS algorithm and compute the same set of least-cost paths as every other node.
6727,"The link-state routing algorithm we present below is known as Dijkstra’s algorithm , named after its
inventor."
6728,"A closely related algorithm is Prim’s algorithm; see [Cormen 2001]  for a general discussion of
graph algorithms."
6729,"Dijkstra’s algorithm computes the least-cost path from one node (the source, which we
will refer to as u) to all other nodes in the network."
6730,"Dijkstra’s algorithm is iterative and has the property thatafter the kth iteration of the algorithm, the least-cost paths are known to k destination nodes, and among
the least-cost paths to all destination nodes, these k paths will have the k smallest costs."
6731,"Let us define the
following notation:
D(v): cost of the least-cost path from the source node to destination v as of this iteration of the
algorithm."
6732,p(v): previous node (neighbor of v) along the current least-cost path from the source to v.
6733,N′: subset of nodes; v is in N′  if the least-cost path from the source to v is definitively known.
6734,The centralized routing algorithm consists of an initialization step followed by a loop.
6735,"The number of times
the loop is executed is equal to the number of nodes in the network."
6736,"Upon termination, the algorithm will
have calculated the shortest paths from the source node u to every other node in the network."
6737,"Link-State (LS) Algorithm for Source Node u
1  Initialization:  
2   N’ = {u}
3   for all nodes v4     if v is a neighbor of u5       then D(v) = c(u, v)6     else D(v) = ∞
7
8  Loop
9   find w not in N’ such that D(w) is a minimum
10  add w to N’
11  update D(v) for each neighbor v of w and not in N’:12        D(v) = min(D(v), D(w)+ c(w, v) )13   /* new cost to v is either old cost to v or known14    least path cost to w plus cost from w to v */
15 until N’= N
As an example, let’s consider the network in Figure 5.3 and compute the least-cost paths from u to all
possible destinations."
6738,"A tabular summary of the algorithm’s computation is shown in Table 5.1, where
each line in the table gives the values of the algorithm’s variables at the end of the iteration."
6739,"Let’s consider
the few first steps in detail."
6740,"In the initialization step, the currently known least-cost paths from u to its directly attached neighbors,v, x, and w, are initialized to 2, 1, and 5, respectively."
6741,"Note in
Table 5.1 Running the link-state algorithm on the network in Figure 5.3
step N’ D (v), p (v) D (w), p (w) D (x), p (x) D (y), p (y) D (z), p (z)
0 u 2, u 5, u 1,u ∞ ∞
1 ux 2, u 4, x 2, x ∞
2 uxy 2, u 3, y 4, y
3 uxyv 3, y 4, y
4 uxyvw 4, y
5 uxyvwz
particular that the cost to w is set to 5 (even though we will soon see that a lesser-cost path does
indeed exist) since this is the cost of the direct (one hop) link from u to w."
6742,"The costs to y and z are set
to infinity because they are not directly connected to u."
6743,"In the first iteration, we look among those nodes not yet added to the set N′ and find that node with the
least cost as of the end of the previous iteration."
6744,"That node is x, with a cost of 1, and thus x is added to
the set N′."
6745,"Line 12 of the LS algorithm is then performed to update D(v) for all nodes v, yielding the
results shown in the second line (Step 1) in Table 5.1. The cost of the path to v is unchanged."
6746,"The cost
of the path to w (which was 5 at the end of the initialization) through node x is found to have a cost of
4."
6747,"Hence this lower-cost path is selected and w’s predecessor along the shortest path from u is set to
x."
6748,"Similarly, the cost to y (through x) is computed to be 2, and the table is updated accordingly."
6749,"In the second iteration, nodes v and y are found to have the least-cost paths (2), and we break the tie
arbitrarily and add y to the set N′ so that N′  now contains u, x, and y."
6750,"The cost to the remaining nodes
not yet in N′ , that is, nodes v, w, and z, are updated via line 12 of the LS algorithm, yielding the results
shown in the third row in Table 5.1.
And so on ."
6751,.
6752,.
6753,"When the LS algorithm terminates, we have, for each node, its predecessor along the least-cost path from
the source node."
6754,"For each predecessor, we also have its predecessor, and so in this manner we can
construct the entire path from the source to all destinations."
6755,"The forwarding table in a node, say node u,
can then be constructed from this information by storing, for each destination, the next-hop node on theleast-cost path from u to the destination."
6756,"Figure 5.4 shows the resulting least-cost paths and forwarding
table in u for the network in Figure 5.3.Figure 5.4 Least cost path and forwarding table for node u
What is the computational complexity of this algorithm?"
6757,"That is, given n nodes (not counting the source),
how much computation must be done in the worst case to find the least-cost paths from the source to all
destinations?"
6758,"In the first iteration, we need to search through all n nodes to determine the node, w, not in
N′ that has the minimum cost."
6759,"In the second iteration, we need to check  nodes to determine the
minimum cost; in the third iteration  nodes, and so on."
6760,"Overall, the total number of nodes we need to
search through over all the iterations is  and thus we say that the preceding implementation of the
LS algorithm has worst-case complexity of order n squared: O(n )."
6761,"(A more sophisticated implementation
of this algorithm, using a data structure known as a heap, can find the minimum in line 9 in logarithmic
rather than linear time, thus reducing the complexity.)
Before completing our discussion of the LS algorithm, let us consider a pathology that can arise."
6762,"Figure
5.5 shows a simple network topology where link costs are equal to the load carried on the link, for
example, reflecting the delay that would be experienced."
6763,"In this example, link costs are not symmetric; that
is, c(u, v) equals c(v, u) only if the load carried on both directions on the link ( u, v) is the same."
6764,"In this
example, node z originates a unit of traffic destined for w, node x also originates a unit of traffic destined
for w, and node y injects an amount of traffic equal to e, also destined for w."
6765,"The initial routing is shown in
Figure 5.5(a) with the link costs corresponding to the amount of traffic carried."
6766,"When the LS algorithm is next run, node y determines (based on the link costs shown in Figure 5.5(a))
that the clockwise path to w has a cost of 1, while the counterclockwise path to w (which it had been using)
has a cost of  Hence y’s least-cost path to w is now clockwise."
6767,"Similarly, x determines that its new
least-cost path to w is also clockwise, resulting in costs shown in Figure 5.5(b)."
6768,"When the LS algorithm is
run next, nodes x, y, and z all detect a zero-cost path to w in the counterclockwise direction, and all route
their traffic to the counterclockwise routes."
6769,"The next time the LS algorithm is run, x, y, and z all then route
their traffic to the clockwise routes."
6770,"What can be done to prevent such oscillations (which can occur in any algorithm, not just an LS algorithm,
that uses a congestion or delay-based link metric)?"
6771,"One solution would be to mandate that link costs notdepend on the amount of trafficn−1
n−2
n(n+1)/2,
2
1+e.Figure 5.5 Oscillations with congestion-sensitive routing
carried—an unacceptable solution since one goal of routing is to avoid highly congested (for example,
high-delay) links."
6772,"Another solution is to ensure that not all routers run the LS algorithm at the same time.This seems a more reasonable solution, since we would hope that even if routers ran the LS algorithmwith the same periodicity, the execution instance of the algorithm would not be the same at each node.Interestingly, researchers have found that routers in the Internet can self-synchronize among themselves
[Floyd Synchronization 1994] ."
6773,"That is, even though they initially execute the algorithm with the same
period but at different instants of time, the algorithm execution instance can eventually become, and
remain, synchronized at the routers."
6774,One way to avoid such self-synchronization is for each router torandomize the time it sends out a link advertisement.
6775,"Having studied the LS algorithm, let’s consider the other major routing algorithm that is used in practice
today—the distance-vector routing algorithm."
6776,"5.2.2 The Distance-Vector (DV) Routing Algorithm
Whereas the LS algorithm is an algorithm using global information, the distance-vector  (DV) algorithm is
iterative, asynchronous, and distributed."
6777,"It is distributed  in that each node receives some information from
one or more of its directly attached  neighbors, performs a calculation, and then distributes the results of its
calculation back to its neighbors."
6778,"It is iterative in that this process continues on until no more information is
exchanged between neighbors."
6779,"(Interestingly, the algorithm is also self-terminating—there is no signal that
the computation should stop; it just stops.) The algorithm is asynchronous  in that it does not require all of
the nodes to operate in lockstep with each other."
6780,"We’ll see that an asynchronous, iterative, self-
terminating, distributed algorithm is much more interesting and fun than a centralized algorithm!
Before we present the DV algorithm, it will prove beneficial to discuss an important relationship that exists
among the costs of the least-cost paths."
6781,Let d (y) be the cost of the least-cost path from node x to node y.
6782,"Then the least costs are related by the celebrated Bellman-Ford equation, namely,xwhere the min  in the equation is taken over all of x’s neighbors."
6783,"The Bellman-Ford equation is rather
intuitive."
6784,"Indeed, after traveling from x to v, if we then take the least-cost path from v to y, the path cost will
be  Since we must begin by traveling to some neighbor v, the least cost from x to y is the
minimum of  taken over all neighbors v."
6785,"But for those who might be skeptical about the validity of the equation, let’s check it for source node u and
destination node z in Figure 5.3. The source node u has three neighbors: nodes v, x, and w."
6786,"By walking
along various paths in the graph, it is easy to see that  and  Plugging these
values into Equation  5.1, along with the costs  and  gives
 which is obviously true and which is exactly what the Dijskstra algorithm gave
us for the same network."
6787,This quick verification should help relieve any skepticism you may have.
6788,The Bellman-Ford equation is not just an intellectual curiosity.
6789,"It actually has significant practical
importance: the solution to the Bellman-Ford equation provides the entries in node x’s forwarding table."
6790,"To
see this, let v* be any neighboring node that achieves the minimum in Equation  5.1. Then, if node x wants
to send a packet to node y along a least-cost path, it should first forward the packet to node v*."
6791,"Thus, node
x’s forwarding table would specify node v* as the next-hop router for the ultimate destination y."
6792,"Another
important practical contribution of the Bellman-Ford equation is that it suggests the form of the neighbor-
to-neighbor communication that will take place in the DV algorithm."
6793,The basic idea is as follows.
6794,"Each node x begins with D(y), an estimate of the cost of the least-cost path
from itself to node y, for all nodes, y, in N."
6795,"Let  be node x’s distance vector, which is the
vector of cost estimates from x to all other nodes, y, in N."
6796,"With the DV algorithm, each node x maintains
the following routing information:
For each neighbor v, the cost c(x, v) from x to directly attached neighbor, v
Node x’s distance vector, that is, , containing x’s estimate of its cost to all
destinations, y, in N
The distance vectors of each of its neighbors, that is,  for each neighbor v of x
In the distributed, asynchronous algorithm, from time to time, each node sends a copy of its distance
vector to each of its neighbors."
6797,"When a node x receives a new distance vector from any of its neighbors w,
it saves w’s distance vector, and then uses the Bellman-Ford equation to update its own distance vector
as follows:
If node x’s distance vector has changed as a result of this update step, node x will then send its updateddx(y)=minv{c(x,v)+dv(y)}, (5.1)
v
c(x,v)+dv(y)."
6798,"c(x,v)+dv(y)
dv(z)=5, dx(z)=3, dw(z)=3."
6799,"c(u,v)=2, c(u,x)=1, c(u,w)=5,
du(z)=min{2+5,5+3,1+3}=4,
x
Dx=[Dx(y): y in N]
Dx=[Dx(y): y in N]
Dv=[Dv(y): y in N]
Dx(y)=minv{c(x,v)+Dv(y)}      for each node y in Ndistance vector to each of its neighbors, which can in turn update their own distance vectors."
6800,"Miraculously
enough, as long as all the nodes continue to exchange their distance vectors in an asynchronous fashion,
each cost estimate D (y) converges to d (y), the actual cost of the least-cost path from node x to node y
[Bertsekas 1991] !
Distance-Vector (DV) Algorithm
At each node, x:
1  Initialization:
2    for all destinations y in N:
3       D (y)= c(x, y)/* if y is not a neighbor then c(x, y)= ∞ */
4    for each neighbor w
5       D (y) = ?"
6801,"for all destinations y in N
6    for each neighbor w
7       send distance vector  D = [D(y): y in N] to w
8
9  loop 
10    wait  (until I see a link cost change to some neighbor w or
11            until I receive a distance vector from some neighbor w)
12
13    for each y in N:
14        D (y) = min {c(x, v) + D (y)}
15
16 if Dx(y) changed for any destination y
17       send distance vector D  = [D(y): y in N] to all neighbors
1819 forever 
In the DV algorithm, a node x updates its distance-vector estimate when it either sees a cost change in
one of its directly attached links or receives a distance-vector update from some neighbor."
6802,"But to update
its own forwarding table for a given destination y, what node x really needs to know is not the shortest-path
distance to y but instead the neighboring node v*(y) that is the next-hop router along the shortest path to y."
6803,"As you might expect, the next-hop router v*(y) is the neighbor v that achieves the minimum in Line 14 of
the DV algorithm."
6804,"(If there are multiple neighbors v that achieve the minimum, then v*(y) can be any of the
minimizing neighbors.) Thus, in Lines 13–14, for each destination y, node x also determines v*(y) and
updates its forwarding table for destination y.x x
x
w
x x
x v v
x xRecall that the LS algorithm is a centralized algorithm in the sense that it requires each node to first obtain
a complete map of the network before running the Dijkstra algorithm."
6805,"The DV algorithm is decentralized
and does not use such global information."
6806,"Indeed, the only information a node will have is the costs of the
links to its directly attached neighbors and information it receives from these neighbors."
6807,"Each node waitsfor an update from any neighbor (Lines 10–11), calculates its new distance vector when receiving an
update (Line 14), and distributes its new distance vector to its neighbors (Lines 16–17)."
6808,"DV-like algorithms
are used in many routing protocols in practice, including the Internet’s RIP and BGP, ISO IDRP, NovellIPX, and the original ARPAnet."
6809,"Figure 5.6 illustrates the operation of the DV algorithm for the simple three-node network shown at the top
of the figure."
6810,"The operation of the algorithm is illustrated in a synchronous manner, where all nodes
simultaneously receive distance vectors from their neighbors, compute their new distance vectors, andinform their neighbors if their distance vectors have changed."
6811,"After studying this example, you shouldconvince yourself that the algorithm operates correctly in an asynchronous manner as well, with node
computations and update generation/reception occurring at any time."
6812,The leftmost column of the figure displays three initial routing tables  for each of the three nodes.
6813,"For
example, the table in the upper-left corner is node x’s initial routing table."
6814,"Within a specific routing table,
each row is a distance vector— specifically, each node’s routing table includes its own distance vector and
that of each of its neighbors."
6815,"Thus, the first row in node x’s initial routing table is
 The second and third rows in this table are the most recently received
distance vectors from nodes y and z, respectively."
6816,"Because at initialization node x has not received
anything from node y or z, the entries in the second and third rows are initialized to infinity."
6817,"After initialization, each node sends its distance vector to each of its two neighbors."
6818,This is illustrated inFigure 5.6 by the arrows from the first column of tables to the second column of tables.
6819,"For example, node
x sends its distance vector D   [0, 2, 7] to both nodes y and z."
6820,"After receiving the updates, each node
recomputes its own distance vector."
6821,"For example, node x computes
The second column therefore displays, for each node, the node’s new distance vector along with distancevectors just received from its neighbors."
6822,"Note, for example, thatDx=[Dx(x),Dx(y),Dx(z)]=[0,2,7]."
6823,"x=
Dx(x)=0Dx(y)=min{c(x,y)+Dy(y),c(x,z)+Dz(y)}=min{2+0, 7+1}=2Dx(z)=min{c(x,y)+Dy(z),c(x,z)+Dz(z)}=min{2+1,7+0}= 3Figure 5.6 Distance-vector (DV) algorithm in operation
node x’s estimate for the least cost to node z, D (z), has changed from 7 to 3."
6824,"Also note that for node x,
neighboring node y achieves the minimum in line 14 of the DV algorithm; thus at this stage of the
algorithm, we have at node x that  and 
After the nodes recompute their distance vectors, they again send their updated distance vectors to their
neighbors (if there has been a change)."
6825,"This is illustrated in Figure 5.6 by the arrows from the second
column of tables to the third column of tables."
6826,"Note that only nodes x and z send updates: node y’s
distance vector didn’t change so node y doesn’t send an update."
6827,"After receiving the updates, the nodes
then recompute their distance vectors and update their routing tables, which are shown in the third
column.x
v*(y)=y v*(z)=y.The process of receiving updated distance vectors from neighbors, recomputing routing table entries, and
informing neighbors of changed costs of the least-cost path to a destination continues until no updatemessages are sent."
6828,"At this point, since no update messages are sent, no further routing table calculationswill occur and the algorithm will enter a quiescent state; that is, all nodes will be performing the wait inLines 10–11 of the DV algorithm."
6829,"The algorithm remains in the quiescent state until a link cost changes, as
discussed next."
6830,"Distance-Vector Algorithm: Link-Cost Changes and Link Failure
When a node running the DV algorithm detects a change in the link cost from itself to a neighbor (Lines
10–11), it updates its distance vector (Lines 13–14) and, if there’s a change in the cost of the least-cost
path, informs its neighbors (Lines 16–17) of its new distance vector."
6831,"Figure 5.7(a) illustrates a scenario
where the link cost from y to x changes from 4 to 1."
6832,"We focus here only on y’ and z’s distance table entries
to destination x."
6833,"The DV algorithm causes the following sequence of events to occur:
At time t , y detects the link-cost change (the cost has changed from 4 to 1), updates its distance
vector, and informs its neighbors of this change since its distance vector has changed."
6834,"At time t , z receives the update from y and updates its table."
6835,"It computes a new least cost to x (it has
decreased from a cost of 5 to a cost of 2) and sends its new distance vector to its neighbors."
6836,"At time t , y receives z’s update and updates its distance table."
6837,"y’s least costs do not change and
hence y does not send any message to z."
6838,The algorithm comes to a quiescent state.
6839,"Thus, only two iterations are required for the DV algorithm to reach a quiescent state."
6840,"The good news
about the decreased cost between x and y has propagated quickly through the network."
6841,"Figure 5.7 Changes in link cost
Let’s now consider what can happen when a link cost increases."
6842," Suppose that the link cost between x and
y increases from 4 to 60, as shown in Figure 5.7(b)."
6843,1.
6844,"Before the link cost changes,  and  At time t, y detects the link-0
12
Dy(x)=4, Dy(z)=1, Dz(y)=1, Dz(x)=5.0cost change (the cost has changed from 4 to 60)."
6845,"y computes its new minimum-cost path to x to
have a cost of
Of course, with our global view of the network, we can see that this new cost via z is wrong."
6846,"But
the only information node y has is that its direct cost to x is 60 and that z has last told y that z could
get to x with a cost of 5."
6847,"So in order to get to x, y would now route through z, fully expecting that z
will be able to get to x with a cost of 5."
6848,"As of t we have a routing loop —in order to get to x, y
routes through z, and z routes through y."
6849,"A routing loop is like a black hole—a packet destined for
x arriving at y or z as of t  will bounce back and forth between these two nodes forever (or until the
forwarding tables are changed)."
6850,2.
6851,"Since node y has computed a new minimum cost to x, it informs z of its new distance vector at time
t."
6852,3.
6853,"Sometime after t , z receives y’s new distance vector, which indicates that y’s minimum cost to x is
6."
6854,"z knows it can get to y with a cost of 1 and hence computes a new least cost to x of
 Since z’s least cost to x has increased, it then informs y of its new
distance vector at t ."
6855,4.
6856,"In a similar manner, after receiving z’s new distance vector, y determines  and sends z its
distance vector."
6857,"z then determines  and sends y its distance vector, and so on."
6858,How long will the process continue?
6859,"You should convince yourself that the loop will persist for 44 iterations
(message exchanges between y and z)—until z eventually computes the cost of its path via y to be greater
than 50."
6860,"At this point, z will (finally!) determine that its least-cost path to x is via its direct connection to x."
6861,"y
will then route to x via z."
6862,"The result of the bad news about the increase in link cost has indeed traveled
slowly! What would have happened if the link cost c(y, x) had changed from 4 to 10,000 and the cost c(z,
x) had been 9,999?"
6863,"Because of such scenarios, the problem we have seen is sometimes referred to as the
count-to-infinity ­problem."
6864,"Distance-Vector Algorithm: Adding Poisoned Reverse
The specific looping scenario just described can be avoided using a technique known as poisoned
reverse."
6865,"The idea is simple—if z routes through y to get to destination x, then z will advertise to y that its
distance to x is infinity, that is, z will advertise to y that  (even though z knows  in truth)."
6866,"z
will continue telling this little white lie to y as long as it routes to x via y."
6867,"Since y believes that z has no path
to x, y will never attempt to route to x via z, as long as z continues to route to x via y (and lies about doing
so)."
6868,"Let’s now see how poisoned reverse solves the particular looping problem we encountered before in
Figure 5.5(b)."
6869,"As a result of the poisoned reverse, y’s distance table indicates  When the cost of
the (x, y) link changes from 4 to 60 at time t , y updates its table and continues to route directly to x, albeitDy(x)=min{c(y,x)+Dx(x), c(y,z)+Dz(x)}=min{60+0,1+5}=6
1
1
1
1
Dz(x)=min{50+0,1+6}=7."
6870,"2
Dy(x)=8
Dz(x)=9
Dz(x)=∞ Dz(x)=5
Dz(x)=∞."
6871,"0at a higher cost of 60, and informs z of its new cost to x, that is,  After receiving the update at t ,
z immediately shifts its route to x to be via the direct (z, x) link at a cost of 50."
6872,"Since this is a new least-cost
path to x, and since the path no longer passes through y, z now informs y that  at t."
6873,"After
receiving the update from z, y updates its distance table with  Also, since z is now on y’s least-
cost path to x, y poisons the reverse path from z to x by informing z at time t  that  (even though y
knows that  in truth)."
6874,Does poisoned reverse solve the general count-to-infinity problem?
6875,It does not.
6876,"You should convinceyourself that loops involving three or more nodes (rather than simply two immediately neighboring nodes)
will not be detected by the poisoned reverse technique."
6877,"A Comparison of LS and DV Routing Algorithms
The DV and LS algorithms take complementary approaches toward computing routing."
6878,"In the DV
algorithm, each node talks to only its directly connected neighbors, but it provides its neighbors with least-
cost estimates from itself to all the nodes (that it knows about) in the network."
6879,"The LS algorithm requires
global information."
6880,"Consequently, when implemented in each and every router, e.g., as in Figure 4.2 and
5.1, each node would need to communicate with all other nodes (via broadcast), but it tells them only the
costs of its directly connected links."
6881,"Let’s conclude our study of LS and DV algorithms with a quick
comparison of some of their attributes."
6882,"Recall that N is the set of nodes (routers) and E is the set of edges
(links)."
6883,Message complexity.
6884,"We have seen that LS requires each node to know the cost of each link in the
network."
6885,This requires O(|N| |E|) messages to be sent.
6886,"Also, whenever a link cost changes, the new
link cost must be sent to all nodes."
6887,The DV algorithm requires message exchanges between directlyconnected neighbors at each iteration.
6888,"We have seen that the time needed for the algorithm to
converge can depend on many factors."
6889,"When link costs change, the DV algorithm will propagate the
results of the changed link cost only if the new link cost results in a changed least-cost path for one ofthe nodes attached to that link."
6890,Speed of convergence.
6891,"We have seen that our implementation of LS is an O(|N| ) algorithm requiring
O(|N| |E|)) messages."
6892,"The DV algorithm can converge slowly and can have routing loops while the
algorithm is converging."
6893,DV also suffers from the count-to-infinity problem.
6894,Robustness.
6895,"What can happen if a router fails, misbehaves, or is sabotaged?"
6896,"Under LS, a router
could broadcast an incorrect cost for one of its attached links (but no others)."
6897,"A node could also corrupt
or drop any packets it received as part of an LS broadcast."
6898,But an LS node is computing only its ownforwarding tables; other nodes are performing similar calculations for themselves.
6899,"This means route
calculations are somewhat separated under LS, providing a degree of robustness."
6900,"Under DV, a node
can advertise incorrect least-cost paths to any or all destinations."
6901,"(Indeed, in 1997, a malfunctioningrouter in a small ISP provided national backbone routers with erroneous routing information."
6902,"Thiscaused other routers to flood the malfunctioning router with traffic and caused large portions of theDy(x)=60.1
Dz(x)=502
Dy(x)=51."
6903,"3 Dy(x)=∞
Dy(x)=51
2Internet to become disconnected for up to several hours [Neumann 1997] .) More generally, we note
that, at each iteration, a node’s calculation in DV is passed on to its neighbor and then indirectly to its
neighbor’s neighbor on the next iteration."
6904,"In this sense, an incorrect node calculation can be diffusedthrough the entire network under DV."
6905,"In the end, neither algorithm is an obvious winner over the other; indeed, both algorithms are used in the
Internet.5.3 Intra-AS Routing in the Internet: OSPF
In our study of routing algorithms so far, we’ve viewed the network simply as a collection of
interconnected routers."
6906,One router was indistinguishable from another in the sense that all routersexecuted the same routing algorithm to compute routing paths through the entire network.
6907,"In practice,this model and its view of a homogenous set of routers all executing the same routing algorithm issimplistic for two important reasons:
Scale."
6908,"As the number of routers becomes large, the overhead involved in communicating,
computing, and storing routing information becomes prohibitive."
6909,"Today’s Internet consists of
hundreds of millions of routers."
6910,"Storing routing information for possible destinations at each of these
routers would clearly require enormous amounts of memory."
6911,"The overhead required to broadcast
connectivity and link cost updates among all of the routers would be huge! A distance-vector
algorithm that iterated among such a large number of routers would surely never converge."
6912,"Clearly,something must be done to reduce the complexity of route computation in a network as large as theInternet."
6913,Administrative autonomy.
6914,"As described in Section 1.3, the Internet is a network of ISPs, with each
ISP consisting of its own network of routers."
6915,"An ISP generally desires to operate its network as itpleases (for example, to run whatever routing algorithm it chooses within its network) or to hideaspects of its network’s internal organization from the outside."
6916,"Ideally, an organization should be
able to operate and administer its network as it wishes, while still being able to connect its network to
other outside networks."
6917,"Both of these problems can be solved by organizing routers into autonomous ­systems (ASs) , with
each AS consisting of a group of routers that are under the same administrative control."
6918,"Often therouters in an ISP, and the links that interconnect them, constitute a single AS."
6919,"Some ISPs, however,partition their network into multiple ASs. In particular, some tier-1 ISPs use one gigantic AS for theirentire network, whereas others break up their ISP into tens of interconnected ASs. An autonomous
system is identified by its globally unique autonomous system number (ASN) [RFC 1930] ."
6920,"AS numbers,
like IP addresses, are assigned by ICANN regional registries [ICANN 2016] ."
6921,Routers within the same AS all run the same routing algorithm and have information about each other.
6922,"The routing algorithm ­running within an autonomous system is called an intra-autonomous system
routing ­protocol ."
6923,"Open Shortest Path First (OSPF)OSPF routing and its closely related cousin, IS-IS, are widely used for intra-AS routing in the Internet."
6924,"The Open in OSPF indicates that the routing protocol specification is publicly available (for example, as
opposed to Cisco’s EIGRP protocol, which was only recently became open [Savage 2015] , after roughly
20 years as a Cisco-proprietary protocol)."
6925,"The most recent version of OSPF, version 2, is defined in[RFC 2328] , a public document."
6926,"OSPF is a link-state protocol that uses flooding of link-state information and a Dijkstra’s least-cost path
algorithm."
6927,"With OSPF, each router constructs a complete topological map (that is, a graph) of the entireautonomous system."
6928,"Each router then locally runs Dijkstra’s shortest-path algorithm to determine a
shortest-path tree to all subnets, with itself as the root node."
6929,"Individual link costs are configured by the
network administrator (see sidebar, Principles and Practice: Setting OSPF Weights )."
6930,"The
administrator might choose to set all link costs to 1,
PRINCIPLES IN PRACTICE
SETTING OSPF LINK WEIGHTS
Our discussion of link-state routing has implicitly assumed that link weights are set, a routing
algorithm such as OSPF is run, and traffic flows according to the routing tables computed by theLS algorithm."
6931,"In terms of cause and effect, the link weights are given (i.e., they come first) andresult (via Dijkstra’s algorithm) in routing paths that minimize overall cost."
6932,"In this viewpoint, linkweights reflect the cost of using a link (e.g., if link weights are inversely proportional to capacity,then the use of high-capacity links would have smaller weight and thus be more attractive from arouting standpoint) and Dijsktra’s algorithm serves to minimize overall cost."
6933,"In practice, the cause and effect relationship between link weights and routing paths may be
reversed, with network operators configuring link weights in order to obtain routing paths that
achieve certain traffic engineering goals [Fortz 2000, Fortz 2002]."
6934,"For example, suppose a
network operator has an estimate of traffic flow entering the network at each ingress point and
destined for each egress point."
6935,"The operator may then want to put in place a specific routing ofingress-to-egress flows that minimizes the maximum utilization over all of the network’s links.But with a routing algorithm such as OSPF, the operator’s main “knobs” for tuning the routing offlows through the network are the link weights."
6936,"Thus, in order to achieve the goal of minimizing
the maximum link utilization, the operator must find the set of link weights that achieves this
goal."
6937,"This is a reversal of the cause and effect relationship—the desired routing of flows isknown, and the OSPF link weights must be found such that the OSPF routing algorithm resultsin this desired routing of flows."
6938,"thus achieving minimum-hop routing, or might choose to set the link weights to be inversely proportionalto link capacity in order to discourage traffic from using low-bandwidth links."
6939,"OSPF does not mandate a
policy for how link weights are set (that is the job of the ­network administrator), but instead providesthe mechanisms (protocol) for determining least-cost path routing for the given set of link weights."
6940,"With OSPF, a router broadcasts routing information to all other routers in the autonomous system, not
just to its neighboring routers."
6941,"A router broadcasts link-state information whenever there is a change in a
link’s state (for example, a change in cost or a change in up/down status)."
6942,"It also broadcasts a link’s
state periodically (at least once every 30 minutes), even if the link’s state has not changed."
6943,"RFC 2328
notes that “this periodic updating of link state advertisements adds robustness to the link statealgorithm.” OSPF advertisements are contained in OSPF messages that are carried directly by IP, with
an upper-layer protocol of 89 for OSPF."
6944,"Thus, the OSPF protocol must itself implement functionalitysuch as reliable message transfer and link-state broadcast."
6945,The OSPF protocol also checks that linksare operational (via a HELLO message that is sent to an attached neighbor) and allows an OSPF routerto obtain a neighboring router’s database of network-wide link state.
6946,"Some of the advances embodied in OSPF include the following:
Security."
6947,"Exchanges between OSPF routers (for example, link-state updates) can be authenticated."
6948,"With authentication, only trusted routers can participate in the OSPF protocol within an AS, thus
preventing malicious intruders (or networking students taking their newfound knowledge out for ajoyride) from injecting incorrect information into router tables."
6949,"By default, OSPF packets between
routers are not authenticated and could be forged."
6950,"Two types of authentication can be configured—
simple and MD5 (see Chapter 8 for a discussion on MD5 and authentication in general)."
6951,"With simple
authentication, the same password is configured on each router."
6952,"When a router sends an OSPF
packet, it includes the password in plaintext."
6953,"Clearly, simple authentication is not very secure."
6954,MD5authentication is based on shared secret keys that are configured in all the routers.
6955,"For each OSPFpacket that it sends, the router computes the MD5 hash of the content of the OSPF packet
appended with the secret key."
6956,"(See the discussion of message authentication codes in Chapter 8.)
Then the router includes the resulting hash value in the OSPF packet."
6957,"The receiving router, using
the preconfigured secret key, will compute an MD5 hash of the packet and compare it with the hash
value that the packet carries, thus verifying the packet’s authenticity."
6958,"Sequence numbers are also
used with MD5 authentication to protect against replay attacks."
6959,Multiple same-cost paths.
6960,"When multiple paths to a destination have the same cost, OSPF allows
multiple paths to be used (that is, a single path need not be chosen for carrying all traffic when
multiple equal-cost paths exist)."
6961,Integrated support for unicast and multicast routing.
6962," Multicast OSPF (MOSPF) [RFC 1584]
provides simple extensions to OSPF to provide for multicast routing."
6963,MOSPF uses the existingOSPF link database and adds a new type of link-state advertisement to the existing OSPF link-statebroadcast mechanism.
6964,Support for hierarchy within a single AS.
6965," An OSPF autonomous system can be configured
hierarchically into areas."
6966,"Each area runs its own OSPF link-state routing algorithm, with each routerin an area broadcasting its link state to all other routers in that area."
6967,"Within each area, one or morearea border routers are responsible for routing packets outside the area."
6968,"Lastly, exactly one OSPF
area in the AS is configured to be the backbone area."
6969,"The primary role of the backbone area is to
route traffic between the other areas in the AS."
6970,The backbone always contains all area borderrouters in the AS and may contain non-border routers as well.
6971,"Inter-area routing within the ASrequires that the packet be first routed to an area border router (intra-area routing), then routedthrough the backbone to the area border router that is in the destination area, and then routed to the
final destination."
6972,"OSPF is a relatively complex protocol, and our coverage here has been necessarily brief; [Huitema
1998 ; Moy 1998; RFC 2328]  provide additional details.5.4 Routing Among the ISPs: BGP
We just learned that OSPF is an example of an intra-AS routing protocol."
6973,"When routing a packet
between a source and destination within the same AS, the route the packet follows is entirelydetermined by the intra-AS routing protocol."
6974,"However, to route a packet across multiple ASs, say from asmartphone in Timbuktu to a server in a datacenter in Silicon Valley, we need an inter-autonomous
system routing protocol ."
6975,"Since an inter-AS routing protocol involves coordination among multiple ASs,
communicating ASs must run the same inter-AS routing protocol."
6976,"In fact, in the Internet, all ASs run thesame inter-AS routing protocol, called the Border Gateway Protocol, more commonly known as BGP
[RFC 4271 ; Stewart 1999] ."
6977,"BGP is arguably the most important of all the Internet protocols (the only other contender would be the
IP protocol that we studied in Section 4.3), as it is the protocol that glues the thousands of ISPs in the
Internet together."
6978,"As we will soon see, BGP is a decentralized and asynchronous protocol in the vein ofdistance-vector routing described in Section 5.2.2. Although BGP is a complex and challenging
protocol, to understand the Internet on a deep level, we need to become familiar with its underpinnings
and operation."
6979,The time we devote to learning BGP will be well worth the effort.
6980,"5.4.1 The Role of BGP
To understand the responsibilities of BGP, consider an AS and an arbitrary router in that AS."
6981,"Recall thatevery router has a forwarding table, which plays the central role in the process of forwarding arrivingpackets to outbound router links."
6982,"As we have learned, for destinations that are within the same AS, theentries in the router’s forwarding table are determined by the AS’s intra-AS routing protocol."
6983,But whatabout destinations that are outside of the AS?
6984,This is precisely where BGP comes to the rescue.
6985,"In BGP, packets are not routed to a specific destination address, but instead to CIDRized prefixes, with
each prefix representing a subnet or a collection of subnets."
6986,"In the world of BGP, a destination may takethe form 138.16.68/22, which for this example includes 1,024 IP addresses."
6987,"Thus, a router’s forwarding
table will have entries of the form ( x, I), where x is a prefix (such as 138.16.68/22) and I is an interface
number for one of the router’s interfaces."
6988,"As an inter-AS routing protocol, BGP provides each router a means to:
1."
6989,"Obtain prefix reachability information from neighboring ASs.  In particular, BGP allows eachsubnet to advertise its existence to the rest of the Internet."
6990,"A subnet screams, “I exist and I am
here,” and BGP makes sure that all the routers in the Internet know about this subnet."
6991,"If it
weren’t for BGP, each subnet would be an isolated island—alone, unknown and unreachable bythe rest of the Internet."
6992,2.
6993,Determine the “best” routes to the prefixes.
6994,"A router may learn about two or more different
routes to a specific prefix."
6995,"To determine the best route, the router will locally run a BGP route-
selection procedure (using the prefix reachability information it obtained via neighboring routers).The best route will be determined based on policy as well as the reachability information."
6996,Let us now delve into how BGP carries out these two tasks.
6997,"++++++++++++++++++++++++++++++++++++++++++++++++++++++++
5.4.2 Advertising BGP Route Information
Consider the network shown in Figure 5.8. As we can see, this simple network has three autonomous
systems: AS1, AS2, and AS3."
6998,"As shown, AS3 includes a subnet with prefix x."
6999,"For each AS, each router
is either a gateway router or an internal router."
7000,"A gateway router is a router on the edge of an AS thatdirectly connects to one or more routers in other ASs. An internal router connects only to hosts and
routers within its own AS."
7001,"In AS1, for example, router 1c is a gateway router; routers 1a, 1b, and 1d areinternal routers."
7002,"Let’s consider the task of advertising reachability information for prefix x to all of the routers shown in
Figure 5.8. At a high level, this is straightforward."
7003,"First, AS3 sends a BGP message to AS2, saying that
x exists and is in AS3; let’s denote this message as “AS3 x”."
7004,"Then AS2 sends a BGP message to AS1,
saying that x exists and that you can get to x by first passing through AS2 and then going to AS3; let’sdenote that message as “AS2 AS3 x”."
7005,"In this manner, each of the autonomous systems will not onlylearn about the existence of x, but also learn about a path of autonomous systems that leads to x."
7006,"Although the discussion in the above paragraph about advertising BGP reachability information should
get the general idea across, it is not precise in the sense that autonomous systems do not actually sendmessages to each other, but instead routers do."
7007,"To understand this, let’s now re-examine the example
in Figure 5.8. In BGP,Figure 5.8 Network with three autonomous systems."
7008,"AS3 includes a subnet with prefix x
pairs of routers exchange routing information over semi-permanent TCP connections using port 179."
7009,"Each such TCP connection, along with all the BGP messages sent over the connection, is called a BGP
connection ."
7010,"Furthermore, a BGP connection that spans two ASs is called an external BGP (eBGP)
connection, and a BGP session between routers in the same AS is called an internal BGP (iBGP)
connection."
7011,"Examples of BGP connections for the network in Figure 5.8 are shown in Figure 5.9. There
is typically one eBGP connection for each link that directly connects gateway routers in different ASs;
thus, in Figure 5.9, there is an eBGP connection between gateway routers 1c and 2a and an eBGP
connection between gateway routers 2c and 3a."
7012,"There are also iBGP connections between routers within each of the ASs. In particular, Figure 5.9
displays a common configuration of one BGP connection for each pair of routers internal to an AS,
creating a mesh of TCP connections within each AS."
7013,"In Figure 5.9, the eBGP connections are shown
with the long dashes; the iBGP connections are shown with the short dashes."
7014,"Note that iBGP
connections do not always correspond to physical links."
7015,"In order to propagate the reachability information, both iBGP and eBGP sessions are used."
7016,"Consider
again advertising the reachability information for prefix x to all routers in AS1 and AS2."
7017,"In this process,gateway router 3a first sends an eBGP message “AS3 x” to gateway router 2c."
7018,"Gateway router 2c then
sends the iBGP message “AS3 x” to all of the other routers in AS2, including to gateway router 2a."
7019,"Gateway router 2a then sends the eBGP message “AS2 AS3 x” to gateway router 1c.Figure 5.9 eBGP and iBGP connections
Finally, gateway router 1c uses iBGP to send the message “AS2 AS3 x” to all the routers in AS1."
7020,"After
this process is complete, each router in AS1 and AS2 is aware of the existence of x and is also aware of
an AS path that leads to x."
7021,"Of course, in a real network, from a given router there may be many different paths to a given
destination, each through a different sequence of ASs. For example, consider the network in Figure
5.10, which is the original network in Figure 5.8, with an additional physical link from router 1d to router
3d."
7022,"In this case, there are two paths from AS1 to x: the path “AS2 AS3 x” via router 1c; and the new path
“AS3 x” via the router 1d."
7023,"5.4.3 Determining the Best Routes
As we have just learned, there may be many paths from a given router to a destination subnet."
7024,"In fact, inthe Internet, routers often receive reachability information about dozens of different possible paths."
7025,Howdoes a router choose among these paths (and then configure its forwarding table accordingly)?
7026,"Before addressing this critical question, we need to introduce a little more BGP terminology."
7027,"When a
router advertises a prefix across a BGP connection, it includes with the prefix several BGP attributes."
7028,"In BGP jargon, a prefix along with its attributes is called a route."
7029,"Two of the more important attributes
are AS-PATH and NEXT-HOP."
7030,"The AS-PATH attribute contains the list of ASs through which theFigure 5.10 Network augmented with peering link between AS1 and AS3
advertisement has passed, as we’ve seen in our examples above."
7031,"To generate the AS-PATH value,
when a prefix is passed to an AS, the AS adds its ASN to the existing list in the AS-PATH."
7032,"For example,
in Figure 5.10, there are two routes from AS1 to subnet x: one which uses the AS-PATH “AS2 AS3”;
and another that uses the AS-PATH “A3”."
7033,"BGP routers also use the AS-PATH attribute to detect and
prevent looping advertisements; specifically, if a router sees that its own AS is contained in the path list,it will reject the advertisement."
7034,"Providing the critical link between the inter-AS and intra-AS routing protocols, the NEXT-HOP attribute
has a subtle but important use."
7035,"The NEXT-HOP is the IP address of the router interface that begins the
AS-PATH."
7036,"To gain insight into this attribute, let’s again refer to Figure 5.10."
7037,"As indicated in Figure 5.10,
the NEXT-HOP attribute for the route “AS2 AS3 x” from AS1 to x that passes through AS2 is the IPaddress of the left interface on router 2a."
7038,The NEXT-HOP attribute for the route “AS3 x” from AS1 to xthat bypasses AS2 is the IP address of the leftmost interface of router 3d.
7039,"In summary, in this toyexample, each router in AS1 becomes aware of two BGP routes to prefix x:
IP address of leftmost interface for router 2a; AS2 AS3; x
IP address of leftmost interface of router 3d; AS3; x
Here, each BGP route is written as a list with three components: NEXT-HOP; AS-PATH; destination
prefix."
7040,"In practice, a BGP route includes additional attributes, which we will ignore for the time being."
7041,"Note that the NEXT-HOP attribute is an IP address of a router that does not belong to AS1; however,
the subnet that contains this IP address directly attaches to AS1."
7042,Hot Potato RoutingWe are now finally  in position to talk about BGP routing algorithms in a precise manner.
7043,"We will begin
with one of the simplest routing algorithms, namely, hot potato routing ."
7044,Consider router 1b in the network in Figure 5.10.
7045,"As just described, this router will learn about two
possible BGP routes to prefix x."
7046,"In hot potato routing, the route chosen (from among all possible routes)
is that route with the least cost to the NEXT-HOP router beginning that route."
7047,"In this example, router 1b
will consult its intra-AS routing information to find the least-cost intra-AS path to NEXT-HOP router 2a
and the least-cost intra-AS path to NEXT-HOP router 3d, and then select the route with the smallest ofthese least-cost paths."
7048,"For example, suppose that cost is defined as the number of links traversed."
7049,"Thenthe least cost from router 1b to router 2a is 2, the least cost from router 1b to router 2d is 3, and router2a would therefore be selected."
7050,"Router 1b would then consult its forwarding table (configured by its
intra-AS algorithm) and find the interface I that is on the least-cost path to router 2a."
7051,"It then adds (x, I) to
its forwarding table."
7052,"The steps for adding an outside-AS prefix in a router’s forwarding table for hot potato routing are
summarized in Figure 5.11."
7053,"It is important to note that when adding an outside-AS prefix into a
forwarding table, both the inter-AS routing protocol (BGP) and the intra-AS routing protocol (e.g., OSPF)
are used."
7054,"The idea behind hot-potato routing is for router 1b to get packets out of its AS as quickly as possible
(more specifically, with the least cost possible) without worrying about the cost of the remaining portionsof the path outside of its AS to the destination."
7055,"In the name “hot potato routing,” a packet is analogous toa hot potato that is burning in your hands."
7056,"Because it is burning hot, you want to pass it off to another
person (another AS) as quickly as possible."
7057,"Hot potato routing is thus
Figure 5.11 Steps in adding outside-AS destination in a router’s ­forwarding table
a selfish ­algorithm—it tries to reduce the cost in its own AS while ignoring the other components of theend-to-end costs outside its AS."
7058,"Note that with hot potato routing, two routers in the same AS may
choose two different AS paths to the same prefix."
7059,"For example, we just saw that router 1b would sendpackets through AS2 to reach x."
7060,"However, router 1d would bypass AS2 and send packets directly toAS3 to reach x."
7061,"Route-Selection AlgorithmIn practice, BGP uses an algorithm that is more complicated than hot potato routing, but nevertheless
incorporates hot potato routing."
7062,"For any given destination prefix, the input into BGP’s route-selectionalgorithm is the set of all routes to that prefix that have been learned and accepted by the router."
7063,"If thereis only one such route, then BGP obviously selects that route."
7064,"If there are two or more routes to thesame prefix, then BGP sequentially invokes the following elimination rules until one route remains:
1."
7065,"A route is assigned a local preference  value as one of its attributes (in addition to the AS-PATH
and NEXT-HOP attributes)."
7066,The local preference of a route could have been set by the router orcould have been learned from another router in the same AS.
7067,The value of the local preferenceattribute is a policy decision that is left entirely up to the AS’s network administrator.
7068,"(We will
shortly discuss BGP policy issues in some detail.) The routes with the highest local preference
values are selected."
7069,2.
7070,"From the remaining routes (all with the same highest local preference value), the route with the
shortest AS-PATH is selected."
7071,"If this rule were the only rule for route selection, then BGP would
be using a DV algorithm for path determination, where the distance metric uses the number ofAS hops rather than the number of router hops."
7072,3.
7073,"From the remaining routes (all with the same highest local preference value and the same AS-
PATH length), hot potato routing is used, that is, the route with the closest NEXT-HOP router is
selected."
7074,4.
7075,"If more than one route still remains, the router uses BGP identifiers to select the route; see[Stewart 1999] ."
7076,"As an example, let’s again consider router 1b in Figure 5.10."
7077,"Recall that there are exactly two BGP
routes to prefix x, one that passes through AS2 and one that bypasses AS2."
7078,"Also recall that if hot potatorouting on its own were used, then BGP would route packets through AS2 to prefix x."
7079,"But in the aboveroute-selection algorithm, rule 2 is applied before rule 3, causing BGP to select the route that bypassesAS2, since that route has a shorter AS PATH."
7080,"So we see that with the above route-selection algorithm,BGP is no longer a selfish algorithm—it first looks for routes with short AS paths (thereby likely reducingend-to-end delay)."
7081,"As noted above, BGP is the de facto standard for inter-AS routing for the Internet."
7082,"To see the contents
of various BGP routing tables (large!) extracted from routers in tier-1 ISPs, see http:/ /
www.routeviews.org ."
7083,"BGP routing tables often contain over half a million routes (that is, prefixes and
corresponding attributes)."
7084,"Statistics about the size and characteristics of BGP routing tables are
presented in [Potaroo 2016]."
7085,"5.4.4 IP-AnycastIn addition to being the Internet’s inter-AS routing protocol, BGP is often used to implement the IP-
anycast service [RFC 1546 , RFC 7094] , which is commonly used in DNS."
7086,"To motivate IP-anycast,
consider that in many applications, we are interested in (1) replicating the same content on different
servers in many different dispersed geographical locations, and (2) having each user access the contentfrom the server that is closest."
7087,"For example, a CDN may replicate videos and other objects on servers in
different countries."
7088,"Similarly, the DNS system can replicate DNS records on DNS servers throughout the
world."
7089,"When a user wants to access this replicated content, it is desirable to point the user to the“nearest” server with the replicated content."
7090,BGP’s route-selection algorithm provides an easy andnatural mechanism for doing so.
7091,"To make our discussion concrete, let’s describe how a CDN might use IP- ­anycast."
7092,"As shown in Figure
5.12, during the IP-anycast configuration stage, the CDN company assigns the same IP address to each
of its servers, and uses standard BGP to advertise this IP address from each of the servers."
7093,"When a
BGP router receives multiple route advertisements for this IP address, it treats these advertisements as
providing different paths to the same physical location (when, in fact, the advertisements are for different
paths to different physical locations)."
7094,"When configuring its routing table, each router will locally use theBGP route-selection algorithm to pick the “best” (for example, closest, as determined by AS-hop counts)route to that IP address."
7095,"For example, if one BGP route (corresponding to one location) is only one AShop away from the router, and all other BGP routes (corresponding to other locations) are two or moreAS hops away, then the BGP router would choose to route packets to the location that is one hop away.After this initial BGP address-advertisement phase, the CDN can do its main job of distributing content.When a client requests the video, the CDN returns to the client the common IP address used by the
geographically dispersed servers, no matter where the client is located."
7096,"When the client sends a request
to that IP address, Internet routers then forward the request packet to the “closest” server, as defined bythe BGP route-selection algorithm."
7097,"Although the above CDN example nicely illustrates how IP-anycast can be used, in practice CDNs
generally choose not to use IP-anycast because BGP routing changes can result in different packets ofthe same TCP connection arriving at different instances of the Web server."
7098,"But IP-anycast is extensively
used by the DNS system to direct DNS queries to the closest root DNS server."
7099,"Recall from Section 2.4,
there are currently 13 IP addresses for root DNS servers."
7100,"But correspondingFigure 5.12 Using IP-anycast to bring users to the closest CDN server
to each of these addresses, there are multiple DNS root servers, with some of these addresses having
over 100 DNS root servers scattered over all corners of the world."
7101,"When a DNS query is sent to one of
these 13 IP addresses, IP anycast is used to route the query to the nearest of the DNS root servers thatis responsible for that address."
7102,"5.4.5 Routing Policy
When a router selects a route to a destination, the AS routing policy can trump all other considerations,such as shortest AS path or hot potato routing."
7103,"Indeed, in the route-selection algorithm, routes are firstselected according to the local-preference attribute, whose value is fixed by the policy of the local AS."
7104,Let’s illustrate some of the basic concepts of BGP routing policy with a simple example.
7105,"Figure 5.13
shows six interconnected autonomous systems: A, B, C, W, X, and Y."
7106,"It is important to note that A, B, C,
W, X, and Y are ASs, not routers."
7107,"Let’sFigure 5.13 A simple BGP policy scenario
assume that autonomous systems W, X, and Y are access ISPs and that A, B, and C are backbone
provider networks."
7108,"We’ll also assume that A, B, and C, directly send traffic to each other, and provide
full BGP information to their customer networks."
7109,"All traffic entering an ISP access network must bedestined for that network, and all traffic leaving an ISP access network must have originated in thatnetwork."
7110,"W and Y are clearly access ISPs. X is a multi-homed access ISP, since it is connected to therest of the network via two different providers (a scenario that is becoming increasingly common inpractice)."
7111,"However, like W and Y, X itself must be the source/destination of all traffic leaving/entering X.But how will this stub network behavior be implemented and enforced?"
7112,How will X be prevented fromforwarding traffic between B and C?
7113,This can easily be accomplished by controlling the manner in whichBGP routes are advertised.
7114,"In particular X will function as an access ISP network if it advertises (to its
neighbors B and C) that it has no paths to any other destinations except itself."
7115,"That is, even though X
may know of a path, say XCY, that reaches network Y, it will not advertise this path to B."
7116,"Since B isunaware that X has a path to Y, B would never forward traffic destined to Y (or C) via X."
7117,This simpleexample illustrates how a selective route advertisement policy can be used to implementcustomer/provider routing relationships.
7118,"Let’s next focus on a provider network, say AS B."
7119,"Suppose that B has learned (from A) that A has a path
AW to W."
7120,B can thus install the route AW into its routing information base.
7121,"Clearly, B also wants to
advertise the path BAW to its customer, X, so that X knows that it can route to W via B."
7122,"But should B
advertise the path BAW to C?"
7123,"If it does so, then C could route traffic to W via BAW."
7124,"If A, B, and C are allbackbone providers, than B might rightly feel that it should not have to shoulder the burden (and cost!)of carrying transit traffic between A and C."
7125,B might rightly feel that it is A’s and C’s job (and cost!) tomake sure that C can route to/from A’s customers via a direct connection between A and C.
7126,There arecurrently no official standards that govern how backbone ISPs route among themselves.
7127,"However, arule of thumb followed by commercial ISPs is that any traffic flowing across an ISP’s backbone networkmust have either a source or a destination (or both) in a network that is a customer of that ISP;otherwise the traffic would be getting a free ride on the ISP’s network."
7128,"Individual peering agreements
(that would govern questions such as
PRINCIPLES IN PRACTICEWHY ARE THERE DIFFERENT INTER-AS AND INTRA-AS ROUTING PROTOCOLS?"
7129,"Having now studied the details of specific inter-AS and intra-AS routing protocols deployed in
today’s Internet, let’s conclude by considering perhaps the most fundamental question we couldask about these protocols in the first place (hopefully, you have been wondering this all along,and have not lost the forest for the trees!): Why are different inter-AS and intra-AS routingprotocols used?"
7130,"The answer to this question gets at the heart of the differences between the goals of routing
within an AS and among ASs:
Policy."
7131,"Among ASs, policy issues dominate."
7132,"It may well be important that traffic originating
in a given AS not be able to pass through another specific AS."
7133,"Similarly, a given AS may well
want to control what transit traffic it carries between other ASs. We have seen that BGPcarries path attributes and provides for controlled distribution of routing information so that
such policy-based routing decisions can be made."
7134,"Within an AS, everything is nominally
under the same administrative control, and thus policy issues play a much less importantrole in choosing routes within the AS."
7135,Scale.
7136,"The ability of a routing algorithm and its data structures to scale to handle routing
to/among large numbers of networks is a critical issue in inter-AS routing."
7137,"Within an AS,
scalability is less of a concern."
7138,"For one thing, if a single ISP becomes too large, it is alwayspossible to divide it into two ASs and perform inter-AS routing between the two new ASs.
(Recall that OSPF allows such a hierarchy to be built by splitting an AS into areas.)
Performance."
7139," Because inter-AS routing is so policy oriented, the quality (for example,
performance) of the routes used is often of secondary concern (that is, a longer or more
costly route that satisfies certain policy criteria may well be taken over a route that is shorterbut does not meet that criteria)."
7140,"Indeed, we saw that among ASs, there is not even the notion
of cost (other than AS hop count) associated with routes."
7141,"Within a single AS, however, such
policy concerns are of less importance, allowing routing to focus more on the level ofperformance realized on a route."
7142,"those raised above) are typically negotiated between pairs of ISPs and are often confidential; [Huston
1999a]  provides an interesting discussion of peering agreements."
7143,"For a detailed description of how
routing policy reflects commercial relationships among ISPs, see [Gao 2001; Dmitiropoulos 2007]."
7144,"For
a discussion of BGP routing polices from an ISP standpoint, see [Caesar 2005b] ."
7145,This completes our brief introduction to BGP.
7146,"Understanding BGP is important because it plays a central
role in the Internet."
7147,"We encourage you to see the references [Griffin 2012; Stewart 1999 ; Labovitz
1997 ; Halabi 2000; Huitema 1998 ; Gao 2001; Feamster 2004 ; Caesar 2005b ; Li 2007] to learn more
about BGP.5.4.6 Putting the Pieces Together: Obtaining Internet Presence
Although this subsection is not about BGP per se, it brings together many of the protocols and concepts
we’ve seen thus far, including IP addressing, DNS, and BGP."
7148,"Suppose you have just created a small company that has a number of servers, including a public Web
server that describes your company’s products and services, a mail server from which your employees
obtain their e-mail messages, and a DNS server."
7149,"Naturally, you would like the entire world to be able tovisit your Web site in order to learn about your exciting products and services."
7150,"Moreover, you would likeyour employees to be able to send and receive e-mail to potential customers throughout the world."
7151,"To meet these goals, you first need to obtain Internet connectivity, which is done by contracting with,
and connecting to, a local ISP."
7152,"Your company will have a gateway router, which will be connected to arouter in your local ISP."
7153,"This connection might be a DSL connection through the existing telephoneinfrastructure, a leased line to the ISP’s router, or one of the many other access solutions described in
Chapter 1."
7154,"Your local ISP will also provide you with an IP address range, e.g., a /24 address range
consisting of 256 addresses."
7155,"Once you have your physical connectivity and your IP address range, you
will assign one of the IP addresses (in your address range) to your Web server, one to your mail server,one to your DNS server, one to your gateway router, and other IP addresses to other servers andnetworking devices in your company’s network."
7156,"In addition to contracting with an ISP, you will also need to contract with an Internet registrar to obtain a
domain name for your company, as described in Chapter 2."
7157,"For example, if your company’s name is,
say, Xanadu Inc., you will naturally try to obtain the domain name xanadu.com."
7158,"Your company must
also obtain presence in the DNS system."
7159,"Specifically, because outsiders will want to contact your DNS
server to obtain the IP addresses of your servers, you will also need to provide your registrar with the IPaddress of your DNS server."
7160,"Your registrar will then put an entry for your DNS server (domain name and
corresponding IP address) in the .com top-level-domain servers, as described in Chapter 2."
7161,"After this
step is completed, any user who knows your domain name (e.g., xanadu.com) will be able to obtain the
IP address of your DNS server via the DNS system."
7162,"So that people can discover the IP addresses of your Web server, in your DNS server you will need to
include entries that map the host name of your Web server (e.g., www.xanadu.com ) to its IP address."
7163,"You will want to have similar entries for other publicly available servers in your company, including your
mail server."
7164,"In this manner, if Alice wants to browse your Web server, the DNS system will contact your
DNS server, find the IP address of your Web server, and give it to Alice."
7165,Alice can then establish a TCPconnection directly with your Web server.
7166,"However, there still remains one other necessary and crucial step to allow outsiders from around theworld to access your Web server."
7167,"Consider what happens when Alice, who knows the IP address of
your Web server, sends an IP datagram (e.g., a TCP SYN segment) to that IP address."
7168,"This datagramwill be routed through the Internet, visiting a series of routers in many different ASs, and eventuallyreach your Web server."
7169,"When any one of the routers receives the datagram, it is going to look for anentry in its forwarding table to determine on which outgoing port it should forward the datagram."
7170,"Therefore, each of the routers needs to know about the existence of your company’s /24 prefix (or some
aggregate entry)."
7171,How does a router become aware of your company’s prefix?
7172,"As we have just seen, itbecomes aware of it from BGP! Specifically, when your company contracts with a local ISP and getsassigned a prefix (i.e., an address range), your local ISP will use BGP to advertise your prefix to theISPs to which it connects."
7173,"Those ISPs will then, in turn, use BGP to propagate the advertisement.Eventually, all Internet routers will know about your prefix (or about some aggregate that includes yourprefix) and thus be able to appropriately forward datagrams destined to your Web and mail servers.5.5 The SDN Control Plane
In this section, we’ll dive into the SDN control plane—the network-wide logic that controls packet
forwarding among a network’s SDN-enabled devices, as well as the configuration and management ofthese devices and their services."
7174,"Our study here builds on our earlier discussion of generalized SDN
forwarding in Section 4.4, so you might want to first review that section, as well as Section 5.1 of this
chapter, before continuing on."
7175,"As in Section 4.4, we’ll again adopt the terminology used in the SDN
literature and refer to the network’s forwarding devices as “packet switches” (or just switches, with
“packet” being understood), since forwarding decisions can be made on the basis of network-layersource/destination addresses, link-layer source/destination addresses, as well as many other values intransport-, network-, and link-layer packet-header fields."
7176,"Four key characteristics of an SDN architecture can be identified [Kreutz 2015] :
Flow-based forwarding."
7177," Packet forwarding by SDN-controlled switches can be based on any
number of header field values in the transport-layer, network-layer, or link-layer header."
7178,"We saw in
Section 4.4 that the OpenFlow1.0 abstraction allows forwarding based on eleven different header
field values."
7179,"This contrasts sharply with the traditional approach to router-based forwarding that we
studied in Sections 5.2–5.4, where forwarding of IP datagrams was based solely on a datagram’s
destination IP address."
7180,"Recall from Figure 5.2 that packet forwarding rules are specified in a
switch’s flow table; it is the job of the SDN control plane to compute, manage and install flow table
entries in all of the network’s switches."
7181,Separation of data plane and control plane.
7182," This separation is shown clearly in Figures 5.2 and
5.14."
7183,"The data plane consists of the network’s switches— relatively simple (but fast) devices that
execute the “match plus action” rules in their flow tables."
7184,"The control plane consists of servers and
software that determine and manage the switches’ flow tables."
7185,Network control functions: external to data-plane switches.
7186," Given that the “S” in SDN is for
“software,” it’s perhaps not surprising that the SDN control plane is implemented in software."
7187,"Unliketraditional routers, however, this software executes on servers that are both distinct and remote from
the network’s switches."
7188,"As shown in Figure 5.14, the control plane itself consists of two components
—an SDN controller (or network operating system [Gude 2008]) and a set of network-control
applications."
7189,"The controller maintains accurate network state information (e.g., the state of remote
links, switches, and hosts); provides this information to the network-control applications running inthe control plane; and provides the means through which these applications can monitor, program,
and control the underlying network devices."
7190,"Although the controller in Figure 5.14 is shown as a
single central server, in practice the controller is only logically centralized; it is typically implemented
on several servers that provide coordinated, scalable performance and high availability.A programmable network."
7191,"The network is programmable through the network-control applications
running in the control plane."
7192,"These applications represent the “brains” of the SDN control plane,
using the APIs provided by the SDN controller to specify and control the data plane in the networkdevices."
7193,"For example, a routing network-control application might determine the end-end paths
between sources and destinations (e.g., by executing Dijkstra’s algorithm using the node-state and
link-state information maintained by the SDN controller)."
7194,"Another network application might performaccess control, i.e., determine which packets are to be blocked at a switch, as in our third example in
Section 4.4.3. Yet another application might forward packets in a manner that performs server load
balancing (the second example we considered in Section 4.4.3)."
7195,"From this discussion, we can see that SDN represents a significant “unbundling” of network functionality—data plane switches, SDN controllers, and network-control applications are separate entities that mayeach be provided by different vendors and organizations."
7196,"This contrasts with the pre-SDN model in
which a switch/router (together with its embedded control plane software and protocol implementations)
was monolithic, vertically integrated, and sold by a single vendor."
7197,"This unbundling of network
functionality in SDN has been likened to the earlier evolution from mainframe computers (wherehardware, system software, and applications were provided by a single vendor) to personal computers(with their separate hardware, operating systems, and applications)."
7198,"The unbundling of computinghardware, system software, and applications has arguably led to a rich, open ecosystem driven byinnovation in all three of these areas; one hope for SDN is that it too will lead to a such rich innovation."
7199,"Given our understanding of the SDN architecture of Figure 5.14, many questions naturally arise."
7200,"How
and where are the flow tables actually computed?"
7201,"How are these tables updated in response to events
at SDN-controlled devices (e.g., an attached link going up/down)?"
7202,"And how are the flow table entries atmultiple switches coordinated in such a way as to result in orchestrated and consistent network-widefunctionality (e.g., end-to-end paths for forwarding packets from sources to destinations, or coordinateddistributed firewalls)?"
7203,"It is the role of the SDN control plane to provide these, and many other,capabilities.Figure 5.14 Components of the SDN architecture: SDN-controlled switches, the SDN controller,
network-control applications
5.5.2 The SDN Control Plane: SDN Controller and SDN Network-control Applications
Let’s begin our discussion of the SDN control plane in the abstract, by considering the generic
capabilities that the control plane must provide."
7204,"As we’ll see, this abstract, “first principles” approach willlead us to an overall architecture that reflects how SDN control planes have been implemented inpractice."
7205,"As noted above, the SDN control plane divides broadly into two components—the SDN controller and
the SDN network-control applications."
7206,Let’s explore the controller first.
7207,"Many SDN controllers have been
developed since the earliest SDN controller [Gude 2008]; see [Kreutz 2015]  for an extremely thorough
and up-to-date survey."
7208,Figure 5.15 provides a more detailed view of a generic SDN controller.
7209,"A
controller’s functionality can be broadly organized into three layers."
7210,"Let’s consider these layers in an
uncharacteristically bottom-up fashion:
A communication layer: communicating between the SDN controller and controlled network
devices."
7211,"Clearly, if an SDN controller is going to control the operation of a remote SDN-enabledswitch, host, or other device, a protocol is needed to transfer information between the controller and
that device."
7212,"In addition, a device must be able to communicate locally-observed events to thecontroller (e.g., a message indicating that an attached link has gone up or down, that a device hasjust joined the network, or a heartbeat indicating that a device is up and operational)."
7213,These eventsprovide the SDN controller with an up-to-date view of the network’s state.
7214,"This protocol constitutes
the lowest layer of the controller architecture, as shown in Figure 5.15."
7215,"The communication between
the controller and the controlled devices cross what has come to be known as the controller’s
“southbound” interface."
7216,"In Section 5.5.2, we’ll study OpenFlow—a specific protocol that provides
this communication functionality."
7217,"OpenFlow is implemented in most, if not all, SDN controllers."
7218,A network-wide state-management layer.
7219,"The ultimate control decisions made by the SDN control
plane—e.g., configuring flow tables in all switches to achieve the desired end-end forwarding, to
implement load balancing, or to implement a particular firewalling capability—will require that thecontroller have up-to-date information about state of the networks’ hosts, links, switches, and other
SDN-controlled devices."
7220,"A switch’s flow table contains counters whose values might also be
profitably used by network-control applications; these values should thus be available to theapplications."
7221,"Since the ultimate aim of the control plane is to determine flow tables for the variouscontrolled devices, a controller might also maintain a copy of these tables."
7222,These pieces ofinformation all constitute examples of the network-wide “state” maintained by the SDN controller.
7223,The interface to the network-control application layer.
7224," The controller interacts with network-
control applications through its “northbound” interface."
7225,"This APIFigure 5.15 Components of an SDN controller
allows network-control applications to read/write network state and flow tables within the state-
management layer."
7226,"Applications can register to be notified when state-change events occur, so that
they can take actions in response to network event notifications sent from SDN-controlled devices.Different types of APIs may be provided; we’ll see that two popular SDN controllers communicate
with their applications using a REST [Fielding 2000]  request-response interface."
7227,"We have noted several times that an SDN controller can be considered to be ­“logically centralized,”
i.e., that the controller may be viewed externally (e.g., from the point of view of SDN-controlled devices
and external network-control applications) as a single, monolithic service."
7228,"However, these services and
the databases used to hold state information are implemented in practice by a distributed  set of servers
for fault tolerance, high availability, or for performance reasons."
7229,"With controller functions being
implemented by a set of servers, the semantics of the controller’s internal operations (e.g., maintaining
logical time ordering of events, consistency, consensus, and more) must be considered [Panda 2013].Such concerns are common across many different distributed systems; see [Lamport 1989, Lampson
1996]  for elegant solutions to these challenges."
7230,"Modern controllers such as OpenDaylight
[OpenDaylight Lithium 2016]  and ONOS [ONOS 2016] (see sidebar) have placed considerable
emphasis on architecting a logically centralized but physically distributed controller platform that
provides scalable services and high availability to the controlled devices and network-control
applications alike."
7231,"The architecture depicted in Figure 5.15 closely resembles the architecture of the originally proposed
NOX controller in 2008 [Gude 2008], as well as that of today’s OpenDaylight [OpenDaylight Lithium
2016]  and ONOS [ONOS 2016] SDN controllers (see sidebar)."
7232,"We’ll cover an example of controller
operation in Section 5.5.3. First, however, let’s examine the OpenFlow protocol, which lies in the
controller’s communication layer."
7233,"5.5.2 OpenFlow Protocol
The OpenFlow protocol [OpenFlow 2009 , ONF 2016] operates between an SDN controller and an
SDN-controlled switch or other device implementing the OpenFlow API that we studied earlier in
Section 4.4. The OpenFlow protocol operates over TCP, with a default port number of 6653."
7234,"Among the important messages flowing from the controller to the controlled switch are the following:
Configuration."
7235," This message allows the controller to query and set a switch’s configuration
parameters."
7236,Modify-State.
7237,"This message is used by a controller to add/delete or modify entries in the switch’s
flow table, and to set switch port properties."
7238,Read-State.
7239,This message is used by a controller to collect statistics and counter values from theswitch’s flow table and ports.
7240,Send-Packet.
7241,This message is used by the controller to send a specific packet out of a specifiedport at the controlled switch.
7242,The message itself contains the packet to be sent in its payload.
7243,"Among the messages flowing from the SDN-controlled switch to the controller are the following:
Flow-Removed."
7244,"This message informs the controller that a flow table entry has been removed, for
example by a timeout or as the result of a received modify-state message."
7245,Port-status.
7246,This message is used by a switch to inform the controller of a change in port status.
7247,Packet-in.
7248,"Recall from Section 4.4 that a packet arriving at a switch port and not matching any flow
table entry is sent to the controller for additional processing."
7249,"Matched packets may also be sent to
the controller, as an action to be taken on a match."
7250,"The packet-in  message is used to send such
packets to the controller.Additional OpenFlow messages are defined in [OpenFlow 2009 , ONF 2016]."
7251,"Principles in Practice
Google’s Software-Defined Global Network
Recall from the case study in Section 2.6 that Google deploys a dedicated wide-area network
(WAN) that interconnects its data centers and server clusters (in IXPs and ISPs)."
7252,"This network,
called B4, has a Google-designed SDN control plane built on OpenFlow."
7253,"Google’s network isable to drive WAN links at near 70% utilization over the long run (a two to three fold increaseover typical link utilizations) and split application flows among multiple paths based on
application priority and existing flow demands [Jain 2013]."
7254,"The Google B4 network is particularly it well-suited for SDN: (i) Google controls all devices from
the edge servers in IXPs and ISPs to routers in their network core; (ii) the most bandwidth-
intensive applications are large-scale data copies between sites that can defer to higher-priority
interactive applications during times of resource congestion; (iii) with only a few dozen data
centers being connected, centralized control is feasible."
7255,"Google’s B4 network uses custom-built switches, each implementing a slightly extended version
of OpenFlow, with a local Open Flow Agent (OFA) that is similar in spirit to the control agent we
encountered in Figure 5.2. Each OFA in turn connects to an Open Flow Controller (OFC) in the
network control server (NCS), using a separate “out of band” network, distinct from the network
that carries data-center traffic between data centers."
7256,"The OFC thus provides the services usedby the NCS to communicate with its controlled switches, similar in spirit to the lowest layer in the
SDN architecture shown in Figure 5.15."
7257,"In B4, the OFC also performs state management
functions, keeping node and link status in a Network Information Base (NIB)."
7258,"Google’s
implementation of the OFC is based on the ONIX SDN controller [Koponen 2010]."
7259,"Two routing
protocols, BGP (for routing between the data centers) and IS-IS (a close relative of OSPF, forrouting within a data center), are implemented."
7260,"Paxos [Chandra 2007]  is used to execute hot
replicas of NCS components to protect against failure."
7261,"A traffic engineering network-control application, sitting logically above the set of network control
servers, interacts with these servers to provide global, network-wide bandwidth provisioning for
groups of application flows."
7262,"With B4, SDN made an important leap forward into the operational
networks of a global network provider."
7263,See [Jain 2013] for a detailed description of B4.
7264,"5.5.3 Data and Control Plane Interaction: An ExampleIn order to solidify our understanding of the interaction between SDN-controlled switches and the SDN
controller, let’s consider the example shown in Figure 5.16, in which Dijkstra’s algorithm (which we
studied in Section 5.2) is used to determine shortest path routes."
7265,"The SDN scenario in Figure 5.16 has
two important differences from the earlier per-router-control scenario of Sections 5.2.1 and 5.3, where
Dijkstra’s algorithm was implemented in each and every router and link-state updates were flooded
among all network routers:
Dijkstra’s algorithm is executed as a separate application, outside of the packet switches."
7266,Packet switches send link updates to the SDN controller and not to each other.
7267,"In this example, let’s assume that the link between switch s1 and s2 goes down; that shortest path
routing is implemented, and consequently and that incoming and outgoing flow forwarding rules at s1,
s3, and s4 are affected, but that s2’s
Figure 5.16 SDN controller scenario: Link-state change
operation is unchanged."
7268,"Let’s also assume that OpenFlow is used as the communication layer protocol,and that the control plane performs no other function other than link-state routing.1. Switch s1, experiencing a link failure between itself and s2, notifies the SDN controller of the
link-state change using the OpenFlow port-status message."
7269,2.
7270,"The SDN controller receives the OpenFlow message indicating the link-state change, and
notifies the link-state manager, which updates a link-state ­database."
7271,3.
7272,The network-control application that implements Dijkstra’s link-state routing has previouslyregistered to be notified when link state changes.
7273,"That application receives the notification of the
link-state change."
7274,4.
7275,"The link-state routing application interacts with the link-state manager to get updated link state; it
might also consult other components in the state- ­management layer."
7276,"It then computes the new
least-cost paths."
7277,5.
7278,"The link-state routing application then interacts with the flow table manager, which determinesthe flow tables to be updated."
7279,6.
7280,"The flow table manager then uses the OpenFlow protocol to update flow table entries at affectedswitches—s1 (which will now route packets destined to s2 via s4), s2 (which will now begin
receiving packets from s1 via intermediate switch s4), and s4 (which must now forward packetsfrom s1 destined to s2)."
7281,This example is simple but illustrates how the SDN control plane provides control-plane services (in thiscase network-layer routing) that had been previously implemented with per-router control exercised ineach and every network router.
7282,One can now easily appreciate how an SDN-enabled ISP could easilyswitch from least-cost path routing to a more hand-tailored approach to routing.
7283,"Indeed, since the
controller can tailor the flow tables as it pleases, it can implement any form of forwarding that it pleases
—simply by changing its application-control software."
7284,"This ease of change should be contrasted to the
case of a traditional per-router control plane, where software in all routers (which might be provided tothe ISP by multiple independent vendors) must be changed."
7285,"5.5.4 SDN: Past and Future
Although the intense interest in SDN is a relatively recent phenomenon, the technical roots of SDN, andthe separation of the data and control planes in particular, go back considerably further."
7286,"In 2004,
[Feamster 2004 , Lakshman 2004 , RFC 3746]  all argued for the separation of the network’s data and
control planes."
7287,"[van der Merwe 1998]  describes a control framework for ATM networks [Black 1995]
with multiple controllers, each controlling a number of ATM switches."
7288,"The Ethane project [Casado 2007]
pioneered the notion of a network of simple flow-based Ethernet switches with match-plus-action flow
tables, a centralized controller that managed flow admission and routing, and the forwarding of
unmatched packets from the switch to the controller."
7289,A network of more than 300 Ethane switches wasoperational in 2007.
7290,"Ethane quickly evolved into the OpenFlow project, and the rest (as the saying goes)is history!Numerous research efforts are aimed at developing future SDN architectures and capabilities."
7291,"As we
have seen, the SDN revolution is leading to the disruptive replacement of dedicated monolithic switchesand routers (with both data and control planes) by simple commodity switching hardware and asophisticated software control plane."
7292,"A generalization of SDN known as network functions virtualization(NFV) similarly aims at disruptive replacement of sophisticated middleboxes (such as middleboxes with
dedicated hardware and proprietary software for media caching/service) with simple commodity servers,
switching, and storage [Gember-Jacobson 2014] ."
7293,"A second area of important research seeks to
extend SDN concepts from the intra-AS setting to the inter-AS setting [Gupta 2014]."
7294,"PRINCIPLES IN PRACTICE
SDN Controller Case Studies: The OpenDaylight and ONOS Controllers
In the earliest days of SDN, there was a single SDN protocol (OpenFlow [McKeown 2008;
OpenFlow 2009] ) and a single SDN controller (NOX [Gude 2008])."
7295,"Since then, the number of
SDN controllers in particular has grown significantly [Kreutz 2015] ."
7296,"Some SDN controllers are
company-specific and proprietary, e.g., ONIX [Koponen 2010], Juniper Networks Contrail
[Juniper Contrail 2016], and Google’s controller [Jain 2013] for its B4 wide-area network."
7297,"But
many more controllers are open-source and implemented in a variety of programming languages
[Erickson 2013] ."
7298,"Most recently, the OpenDaylight controller [OpenDaylight Lithium 2016]  and
the ONOS controller [ONOS 2016] have found considerable industry support."
7299,"They are both
open-source and are being developed in partnership with the Linux Foundation."
7300,"The OpenDaylight Controller
Figure 5.17 presents a simplified view of the OpenDaylight Lithium SDN controller platform
[OpenDaylight Lithium 2016] ."
7301,"ODL’s main set of controller components correspond closely to
those we developed in Figure 5.15."
7302,"Network-Service Applications  are the applications that determine how data-plane forwarding and
other services, such as firewalling and load balancing, are accomplished in the controlled
switches."
7303,"Unlike the canonical controller in Figure 5.15, the ODL controller has two interfaces
through which applications may communicate with native controller services and each other:
external applications communicate with controller modules using a REST request-response APIrunning over HTTP."
7304,Internal applications communicate with each other via the ServiceAbstraction Layer (SAL).
7305,"The choice as to whether a controller application is implementedexternally or internally is up to the application designer;Figure 5.17 The OpenDaylight controller
the particular configuration of applications shown in Figure 5.17 is only meant as an ­example."
7306,"ODL’s Basic Network-Service Functions  are at the heart of the controller, and they correspond
closely to the network-wide state management capabilities that we encountered in Figure 5.15."
7307,"The SAL is the controller’s nerve center, allowing controller ­components and applications to
invoke each other’s services and to subscribe to events they generate."
7308,"It also provides a uniform
abstract interface to the specific underlying communications protocols  in the communication
layer, including OpenFlow and SNMP (the Simple Network Management Protocol—a networkmanagement protocol that we will cover in Section 5.7)."
7309,"OVSDB is a protocol used to manage
data center switching, an important application area for SDN technology."
7310,"We’ll introduce datacenter networking in Chapter 6.Figure 5.18 ONOS controller architecture
The ONOS Controller
Figure 5.18 presents a simplified view of the ONOS controller ONOS 2016]."
7311,"Similar to the
canonical controller in Figure 5.15, three layers can be identified in the ONOS ­controller:
Northbound abstractions and protocols."
7312," A unique feature of ONOS is its intent
framework, which allows an application to request a high-level service (e.g., to setup a
connection between host A and Host B, or conversely to not allow Host A and host B tocommunicate) without having to know the details of how this service is performed."
7313,"State
information is provided to network-control applications across the northbound API either
synchronously (via query) or asynchronously (via listener callbacks, e.g., when network statechanges)."
7314,Distributed core.
7315,"The state of the network’s links, hosts, and devices is maintained in
ONOS’s distributed core."
7316,"ONOS is deployed as a service on a set of interconnected servers,
with each server running an identical copy of the ONOS software; an increased number ofservers offers an increased service capacity."
7317,"The ONOS core provides the mechanisms for
service replication and coordination among instances, providing the applications above andthe network devices below with the abstraction of logically centralized core services.Southbound abstractions and protocols."
7318," The southbound abstractions mask the
heterogeneity of the underlying hosts, links, switches, and protocols, allowing the distributed
core to be both device and protocol agnostic."
7319,"Because of this abstraction, the southboundinterface below the distributed core is logically higher than in our canonical controller in
Figure 5.14 or the ODL controller in Figure 5.17.5.6 ICMP: The Internet Control Message Protocol
The Internet Control Message Protocol (ICMP), specified in [RFC 792], is used by hosts and routers to
communicate network-layer information to each other."
7320,"The most typical use of ICMP is for error
reporting."
7321,"For example, when running an HTTP session, you may have encountered an error messagesuch as “Destination network unreachable.” This message had its origins in ICMP."
7322,"At some point, an IP
router was unable to find a path to the host specified in your HTTP request."
7323,"That router created and sent
an ICMP message to your host indicating the error."
7324,"ICMP is often considered part of IP, but architecturally it lies just above IP, as ICMP messages are
carried inside IP datagrams."
7325,"That is, ICMP messages are carried as IP payload, just as TCP or UDPsegments are carried as IP payload."
7326,"Similarly, when a host receives an IP datagram with ICMPspecified as the upper-layer protocol (an upper-layer protocol number of 1), it demultiplexes thedatagram’s contents to ICMP, just as it would demultiplex a datagram’s content to TCP or UDP."
7327,"ICMP messages have a type and a code field, and contain the header and the first 8 bytes of the IP
datagram that caused the ICMP message to be generated in the first place (so that the sender can
determine the datagram that caused the error)."
7328,"Selected ICMP message types are shown in Figure
5.19."
7329,Note that ICMP messages are used not only for signaling error conditions.
7330,The well-known ping program sends an ICMP type 8 code 0 message to the specified host.
7331,"The
destination host, seeing the echo request, sends back a type 0 code 0 ICMP echo reply."
7332,"Most TCP/IPimplementations support the ping server directly in the operating system; that is, the server is not a
process."
7333,Chapter  11 of [Stevens 1990]  provides the source code for the ping client program.
7334,"Note that
the client program needs to be able to instruct the operating system to generate an ICMP message of
type 8 code 0."
7335,Another interesting ICMP message is the source quench message.
7336,"This message is seldom used in
practice."
7337,"Its original purpose was to perform congestion control—to allow a congested router to send anICMP source quench message to a host to forceFigure 5.19 ICMP message types
that host to reduce its transmission rate."
7338,"We have seen in Chapter 3 that TCP has its own congestion-
control mechanism that operates at the transport layer, without the use of network-layer feedback such
as the ICMP source quench message."
7339,"In Chapter 1 we introduced the Traceroute program, which allows us to trace a route from a host to any
other host in the world."
7340,"Interestingly, Traceroute is implemented with ICMP messages."
7341,"To determine the
names and addresses of the routers between source and destination, Traceroute in the source sends aseries of ordinary IP datagrams to the destination."
7342,Each of these datagrams carries a UDP segment withan unlikely UDP port number.
7343,"The first of these datagrams has a TTL of 1, the second of 2, the third of
3, and so on."
7344,The source also starts timers for each of the datagrams.
7345,"When the nth datagram arrives at
the nth router, the nth router observes that the TTL of the datagram has just expired."
7346,"According to the
rules of the IP protocol, the router discards the datagram and sends an ICMP warning message to the
source (type 11 code 0)."
7347,"This warning message includes the name of the router and its IP address.When this ICMP message arrives back at the source, the source obtains the round-trip time from the
timer and the name and IP address of the nth router from the ICMP message."
7348,How does a Traceroute source know when to stop sending UDP segments?
7349,"Recall that the source
increments the TTL field for each datagram it sends."
7350,"Thus, one of the datagrams will eventually make it
all the way to the destination host."
7351,"Because this datagram contains a UDP segment with an unlikely portnumber, the destination host sends a port unreachable ICMP message (type 3 code 3) back to the
source."
7352,"When the source host receives this particular ICMP message, it knows it does not need to send
additional probe packets."
7353,"(The standard Traceroute program actually sends sets of three packets withthe same TTL; thus the Traceroute output provides three results for each TTL.)
In this manner, the source host learns the number and the identities of routers that lie between it and the
destination host and the round-trip time between the two hosts."
7354,"Note that the Traceroute client program
must be able to instruct the operating system to generate UDP datagrams with specific TTL values andmust also be able to be notified by its operating system when ICMP messages arrive."
7355,"Now that youunderstand how Traceroute works, you may want to go back and play with it some more."
7356,A new version of ICMP has been defined for IPv6 in RFC 4443.
7357,"In addition to reorganizing the existing
ICMP type and code definitions, ICMPv6 also added new types and codes required by the new IPv6functionality."
7358,"These include the “Packet Too Big” type and an “unrecognized IPv6 options” error code.5.7 Network Management and SNMP
Having now made our way to the end of our study of the network layer, with only the link-layer before us,
we’re well aware that a network consists of many complex, interacting pieces of hardware and software—from the links, switches, routers, hosts, and other devices that comprise the physical components ofthe network to the many protocols that control and coordinate these devices."
7359,"When hundreds orthousands of such components are brought together by an organization to form a network, the job of the
network administrator to keep the network “up and running” is surely a challenge."
7360,"We saw in Section
5.5 that the logically centralized controller can help with this process in an SDN context."
7361,"But the
challenge of network management has been around long before SDN, with a rich set of network
management tools and approaches that help the network administrator monitor, manage, and controlthe network."
7362,We’ll study these tools and techniques in this section.
7363,"An often-asked question is “What is network management?” A well-conceived, single-sentence (albeit a
rather long run-on sentence) definition of network management from [Saydam 1996]  is:
Network management includes the deployment, integration, and coordination of the hardware,
software, and human elements to monitor, test, poll, configure, analyze, evaluate, and control thenetwork and element resources to meet the real-time, operational performance, and Quality ofService requirements at a reasonable cost."
7364,"Given this broad definition, we’ll cover only the rudiments of network management in this section—thearchitecture, protocols, and information base used by a network administrator in performing their task."
7365,"We’ll not cover the administrator’s decision-making processes, where topics such as fault identification
[Labovitz 1997; Steinder 2002; Feamster 2005 ; Wu 2005; Teixeira 2006] , anomaly detection
[Lakhina 2005; Barford 2009] , network design/engineering to meet contracted Service Level
Agreements (SLA’s) [Huston 1999a], and more come into consideration."
7366,"Our focus is thus purposefully
narrow; the interested reader should consult these references, the excellent network-management text
by Subramanian [Subramanian 2000], and the more detailed treatment of network management
available on the Web site for this text."
7367,"5.7.1 The Network Management Framework
Figure 5.20 shows the key components of network management:The managing server  is an application, typically with a human in the loop, running in a centralized
network management station in the network operations center (NOC)."
7368,"The managing server is the
locus of activity for network management; it controls the collection, processing, analysis, and/ordisplay of network management information."
7369,It is here that actions are initiated to control networkbehavior and here that the human network administrator interacts with the network’s devices.
7370,"A managed device  is a piece of network equipment (including its software) that resides on a
managed network."
7371,"A managed device might be a host, router, switch, middlebox, modem,thermometer, or other network-connected device."
7372,"There may be several so-called managed objects
within a managed device."
7373,"These managed objects are the actual pieces of hardware within the
managed device (for example, a network interface card is but one component of a host or router),
and configuration parameters for these hardware and software components (for example, an intra-AS routing protocol such as OSPF)."
7374,"Each managed object within a managed device associated information that is collected into a
Management Information Base (MIB); we’ll see that the values of these pieces of information are
available to (and in many cases able to be set by) the managing server."
7375,"A MIB object might be acounter, such as the number of IP datagrams discarded at a router due to errors in an IP datagram
header, or the number of UDP segments received at a host; descriptive information such as the
version of the software running on a DNS server; status information such as whether a particulardevice is functioning correctly; or protocol-specific information such as a routing path to adestination."
7376,"MIB objects are specified in a data description language known as SMI (Structure of
Management Information) [RFC 2578 ; RFC 2579 ; RFC 2580] ."
7377,"A formal definition language is used
to ensure that the syntax and semantics of the network management data are well defined and
unambiguous."
7378,Related MIB objects are gathered into MIB modules.
7379,"As of mid-2015, there werenearly 400 MIB modules defined by RFCs, and a much larger number of vendor-specific (private)MIB modules."
7380,"Also resident in each managed device is a network management agent , a process running in the
managed device that communicates with the managing server,Figure 5.20 Elements of network management: Managing server, ­managed devices, MIB
data, remote agents, SNMP
taking local actions at the managed device under the command and control of the managing server."
7381,"The network management agent is similar to the routing agent that we saw in Figure 5.2.
The final component of a network management framework is the network ­management protocol ."
7382,"The protocol runs between the managing server and the managed devices, allowing the managing
server to query the status of managed devices and indirectly take actions at these devices via itsagents."
7383,"Agents can use the network management protocol to inform the managing server of
exceptional events (for example, component failures or violation of performance thresholds)."
7384,"It’s
important to note that the network management protocol does not itself manage the network.Instead, it provides capabilities that a network administrator can use to manage (“monitor, test, poll,configure, analyze, evaluate, and control”) the network."
7385,"This is a subtle, but important, distinction."
7386,"Inthe following section, we’ll cover the Internet’s SNMP (Simple Network Management Protocol)protocol."
7387,"5.7.2 The Simple Network Management Protocol (SNMP)The Simple Network Management Protocol  version 2 (SNMPv2) [RFC 3416]  is an application-layer
protocol used to convey network-management control and information messages between a managing
server and an agent executing on behalf of that managing server."
7388,"The most common usage of SNMP isin a request-response mode in which an SNMP managing server sends a request to an SNMP agent,who receives the request, performs some action, and sends a reply to the request."
7389,"Typically, a requestwill be used to query (retrieve) or modify (set) MIB object values associated with a managed device."
7390,"A
second common usage of SNMP is for an agent to send an unsolicited message, known as a trap
message, to a managing server."
7391,"Trap messages are used to notify a managing server of an exceptionalsituation (e.g., a link interface going up or down) that has resulted in changes to MIB object values."
7392,"SNMPv2 defines seven types of messages, known generically as protocol data units—PDUs—as shown
in Table 5.2 and described below."
7393,The format of the PDU is shown in Figure 5.21.
7394,"The GetRequest , GetNextRequest,  and GetBulkRequest  PDUs are all sent from a
managing server to an agent to request the value of one or more MIB objects at the agent’s
managed device."
7395,"The MIB objects whose values are being
Table 5.2 SNMPv2 PDU types
SNMPv2 PDU
TypeSender-receiver Description
GetRequest manager-to-agentget value of one or more MIB object instances
GetNextRequest manager-to-agentget value of next MIB object instance in list or table
GetBulkRequest manager-to-
agentget values in large block of data, for example, valuesin a large table
InformRequest manager-to-
managerinform remote managing entity of MIB values remoteto its access
SetRequest manager-to-agentset value of one or more MIB object instances
Response agent-to-manager orgenerated in response to
manager-to-manager GetRequest, GetNextRequest,
 GetBulkRequest,
 SetRequest PDU,  or
 InformRequest
SNMPv2-Trap agent-to-
managerinform manager of an exceptional event #
Figure 5.21 SNMP PDU format
requested are specified in the variable binding portion of the PDU."
7396,"­GetRequest ,
GetNextRequest , and GetBulkRequest differ in the granularity of their data requests."
7397,"GetRequest  can request an arbitrary set of MIB values; multiple GetNextRequest s can be used
to sequence through a list or table of MIB objects; GetBulkRequest  allows a large block of data to
be returned, avoiding the overhead incurred if multiple GetRequest  or ­GetNextRequest
messages were to be sent."
7398,"In all three cases, the agent responds with a Response PDU  containing
the object identifiers and their associated values."
7399,"The SetRequest  PDU is used by a managing server to set the value of one or more MIB objects in
a managed device."
7400,"An agent replies with a Response  PDU with the “noError” error status to
confirm that the value has indeed been set."
7401,The InformRequest  PDU is used by a managing server to notify another managing server of MIBinformation that is remote to the receiving server.
7402,"The Response PDU  is typically sent from a managed device to the managing server in response to
a request message from that server, returning the requested information."
7403,The final type of SNMPv2 PDU is the trap message.
7404,"Trap messages are generated asynchronously;
that is, they are not generated in response to a received request but rather in response to an event
for which the managing server requires notification."
7405,"RFC 3418 defines well-known trap types thatinclude a cold or warm start by a device, a link going up or down, the loss of a neighbor, or an
authentication failure event."
7406,"A received trap request has no required response from a managing
server."
7407,"Given the request-response nature of SNMP, it is worth noting here that although SNMP PDUs can becarried via many different transport protocols, the SNMP PDU is typically carried in the payload of aUDP datagram."
7408,"Indeed, RFC 3417 states that UDP is “the ­preferred transport mapping.” However,
since UDP is an unreliable transport protocol, there is no guarantee that a request, or its response, will
be received at the intended destination."
7409,"The request ID field of the PDU (see Figure 5.21) is used by
the managing server to number its requests to an agent; the agent’s response takes its request ID from
that of the received request."
7410,"Thus, the request ID field can be used by the managing server to detect
lost requests or replies."
7411,It is up to the managing server to decide whether to retransmit a request if nocorresponding response is received after a given amount of time.
7412,"In particular, the SNMP standard doesnot mandate any particular procedure for retransmission, or even if retransmission is to be done in thefirst place."
7413,"It only requires that the managing server “needs to act responsibly in respect to thefrequency and duration of retransmissions.” This, of course, leads one to wonder how a “responsible”protocol should act!
SNMP has evolved through three versions."
7414,"The designers of SNMPv3 have said that “SNMPv3 can be
thought of as SNMPv2 with additional security and administration capabilities” [RFC 3410] ."
7415,"Certainly,
there are changes in SNMPv3 over SNMPv2, but nowhere are those changes more evident than in the
area of administration and security."
7416,"The central role of security in SNMPv3 was particularly important,since the lack of adequate security resulted in SNMP being used primarily for monitoring rather than
control (for example, SetRequest  is rarely used in SNMPv1)."
7417,"Once again, we see that ­security—a
topic we’ll cover in detail in Chapter 8 — is of critical concern, but once again a concern whose
importance had been realized perhaps a bit late and only then “added on.”5.7 Summary
We have now completed our two-chapter journey into the network core—a journey that began with our
study of the network layer’s data plane in Chapter 4 and finished here with our study of the network
layer’s control plane."
7418,"We learned that the control plane is the network-wide logic that controls not only
how a datagram is forwarded among routers along an end-to-end path from the source host to thedestination host, but also how network-layer components and services are configured and managed."
7419,"We learned that there are two broad approaches towards building a control plane: traditional per-router
control (where a routing algorithm runs in each and every router and the routing component in the router
communicates with the routing components in other routers) and software-defined networking  (SDN)
control (where a logically centralized controller computes and distributes the forwarding tables to beused by each and every router)."
7420,"We studied two fundamental routing algorithms for computing least cost
paths in a graph—link-state routing and distance-vector routing—in Section 5.2; these algorithms find
application in both per-router control and in SDN control."
7421,"These algorithms are the basis for two widely-deployed Internet routing protocols, OSPF and BGP, that we covered in Sections 5.3 and 5.4. We
covered the SDN approach to the network-layer control plane in Section 5.5, investigating SDN
network-control applications, the SDN controller, and the OpenFlow protocol for communicatingbetween the controller and SDN-controlled devices."
7422,"In Sections 5.6 and 5.7, we covered some of the
nuts and bolts of managing an IP network: ICMP (the Internet Control Message Protocol) and SNMP
(the Simple Network Management Protocol)."
7423,"Having completed our study of the network layer, our journey now takes us one step further down the
protocol stack, namely, to the link layer."
7424,"Like the network layer, the link layer is part of each and every
network-connected device."
7425,"But we will see in the next chapter that the link layer has the much more
localized task of moving packets between nodes on the same link or LAN."
7426,"Although this task mayappear on the surface to be rather simple compared with that of the network layer’s tasks, we will seethat the link layer involves a number of important and fascinating issues that can keep us busy for a longtime.Homework Problems and Questions
Chapter 5 Review Questions
SECTION 5.1
SECTION 5.2
SECTIONS 5.3–5.4R1."
7427,What is meant by a control plane that is based on per-router control?
7428,"In such cases, when
we say the network control and data planes are implemented “monolithically,” what do we
mean?"
7429,R2.
7430,What is meant by a control plane that is based on logically centralized control?
7431,"In such
cases, are the data plane and the control plane implemented within the same device or in
separate devices?"
7432,Explain.
7433,R3.
7434,Compare and contrast the properties of a centralized and a distributed routing algorithm.
7435,Give an example of a routing protocol that takes a centralized and a decentralized approach.
7436,R4.
7437,Compare and contrast link-state and distance-vector routing algorithms.
7438,R5.
7439,What is the “count to infinity” problem in distance vector routing?R6.
7440,Is it necessary that every autonomous system use the same intra-AS routing algorithm?
7441,Why or why not?
7442,R7.
7443,Why are different inter-AS and intra-AS protocols used in the Internet?
7444,R8.
7445,"True or false: When an OSPF route sends its link state information, it is sent only to those
nodes directly attached neighbors."
7446,Explain.
7447,R9.
7448,What is meant by an area in an OSPF autonomous system?
7449,"Why was the concept of an
area introduced?"
7450,R10.
7451,"Define and contrast the following terms: subnet, prefix, and BGP route."
7452,R11.
7453,How does BGP use the NEXT-HOP attribute?
7454,How does it use the AS-PATH attribute?
7455,R12.
7456,"Describe how a network administrator of an upper-tier ISP can implement policy when
configuring BGP."
7457,R13.
7458,"True or false: When a BGP router receives an advertised path from its neighbor, it must
add its own identity to the received path and then send that new path on to all of its neighbors.SECTION 5.5
SECTIONS 5.6–5.7
ProblemsExplain."
7459,R14.
7460,"Describe the main role of the communication layer, the network-wide state- ­management
layer, and the network-control application layer in an SDN controller."
7461,R15.
7462,Suppose you wanted to implement a new routing protocol in the SDN control plane.
7463,"At
which layer would you implement that protocol?"
7464,Explain.
7465,R16.
7466,"What types of messages flow across an SDN controller’s northbound and southbound
APIs?"
7467,"Who is the recipient of these messages sent from the controller across the southbound
interface, and who sends messages to the controller across the northbound interface?"
7468,R17.
7469,"Describe the purpose of two types of OpenFlow messages (of your choosing) that are sent
from a controlled device to the controller."
7470,"Describe the purpose of two types of Openflow
messages (of your choosing) that are send from the controller to a controlled device."
7471,R18.
7472,What is the purpose of the service abstraction layer in the OpenDaylight SDN controller?
7473,R19.
7474,"Names four different types of ICMP messages
R20."
7475,What two types of ICMP messages are received at the sending host executing theTraceroute program?R21.
7476,"Define the following terms in the context of SNMP: managing server, ­managed device,
network management agent and MIB."
7477,R22.
7478,What are the purposes of the SNMP GetRequest and SetRequest  messages?
7479,R23.
7480,What is the purpose of the SNMP trap message?
7481,P1.
7482,"Looking at Figure 5.3 , enumerate the paths from y to u that do not contain any loops."
7483,P2.
7484,"Repeat Problem P1 for paths from x to z, z to u, and z to w.P3."
7485,Consider the following network.
7486,"With the indicated link costs, use Dijkstra’s shortest-pathalgorithm to compute the shortest path from x to all network nodes."
7487,"Show how the algorithm
works by computing a table similar to Table 5.1 ."
7488,Dijkstra’s algorithm: discussion and exampleP4.
7489,Consider the network shown in Problem P3.
7490,"Using Dijkstra’s algorithm, and showing your
work using a table similar to Table 5.1 , do the following:
a."
7491,Compute the shortest path from t to all network nodes.
7492,b.
7493,Compute the shortest path from u to all network nodes.
7494,c.
7495,Compute the shortest path from v to all network nodes.
7496,d.
7497,Compute the shortest path from w to all network nodes.
7498,e.
7499,Compute the shortest path from y to all network nodes.
7500,f.
7501,Compute the shortest path from z to all network nodes.
7502,P5.
7503,"Consider the network shown below, and assume that each node initially knows the costs to
each of its neighbors."
7504,"Consider the distance-vector algorithm and show the distance table
entries at node z."
7505,P6.
7506,"Consider a general topology (that is, not the specific network shown above) and asynchronous version of the distance-vector algorithm."
7507,"Suppose that at each iteration, a node
exchanges its distance vectors with its neighbors and receives their distance vectors."
7508,"Assuming
that the algorithm begins with each node knowing only the costs to its immediate neighbors,what is the maximum number of iterations required before the distributed algorithm converges?Justify your answer."
7509,P7.
7510,Consider the network fragment shown below.
7511,"x has only two attached neighbors, w and y."
7512,"w
has a minimum-cost path to destination u (not shown) of 5, and y has a minimum-cost path to u
of 6."
7513,The complete paths from w and y to u (and between w and y) are not shown.
7514,"All link costs
in the network have strictly positive integer values."
7515,a.
7516,"Give x’s distance vector for destinations w, y, and u."
7517,b.
7518,"Give a link-cost change for either c(x, w) or c(x, y) such that x will inform its neighbors of
a new minimum-cost path to u as a result of executing the distance-vector algorithm."
7519,c.
7520,"Give a link-cost change for either c(x, w) or c(x, y) such that x will not inform its neighbors
of a new minimum-cost path to u as a result of executing the distance-vector algorithm."
7521,P8.
7522,Consider the three-node topology shown in Figure 5.6 .
7523,"Rather than having the link costs
shown in Figure 5.6 , the link costs are   Compute the distance tables
after the initialization step and after each iteration of a synchronous version of the distance-vector algorithm (as we did in our earlier discussion of Figure 5.6 )."
7524,P9.
7525,Consider the count-to-infinity problem in the distance vector routing.
7526,"Will the count-to-infinity
problem occur if we decrease the cost of a link?"
7527,Why?
7528,"How about if we connect two nodes which
do not have a link?"
7529,P10.
7530,"Argue that for the distance-vector algorithm in Figure 5.6 , each value in the distance
vector D(x) is non-increasing and will eventually stabilize in a finite number of steps."
7531,P11.
7532,"Consider Figure 5.7. Suppose there is another router w, connected to router y and z."
7533,"The
costs of all links are given as follows:   Suppose
that poisoned reverse is used in the distance-vector routing algorithm."
7534,a.
7535,"When the distance vector routing is stabilized, router w, y, and z inform their distances to
x to each other."
7536,What distance values do they tell each other?
7537,b.
7538,Now suppose that the link cost between x and y increases to 60.
7539,Will there be a count-to-infinity problem even if poisoned reverse is used?
7540,Why or why not?
7541,"If there is a count-to-
infinity problem, then how many iterations are needed for the distance-vector routing toc(x,y)=3, c(y,z)=6, c(z,x)=4."
7542,"c(x,y)=4, c(x,z)=50, c(y,w)=1, c(z,w)=1, c(y,z)=3.reach a stable state again?"
7543,Justify your answer.
7544,c.
7545,"How do you modify c(y, z) such that there is no count-to-infinity problem at all if c(y,x)
changes from 4 to 60?"
7546,P12.
7547,Describe how loops in paths can be detected in BGP.
7548,P13.
7549,Will a BGP router always choose the loop-free route with the shortest ASpath length?
7550,Justify your answer.
7551,P14.
7552,Consider the network shown below.
7553,"Suppose AS3 and AS2 are running OSPF for their
intra-AS routing protocol."
7554,"Suppose AS1 and AS4 are running RIP for their intra-AS routing
protocol."
7555,Suppose eBGP and iBGP are used for the inter-AS routing protocol.
7556,"Initially suppose
there is no physical link between AS2 and AS4."
7557,a.
7558,"Router 3c learns about prefix x from which routing protocol: OSPF, RIP, eBGP, or iBGP?"
7559,b.
7560,Router 3a learns about x from which routing protocol?
7561,c.
7562,Router 1c learns about x from which routing protocol?
7563,d.
7564,Router 1d learns about x from which routing protocol?
7565,P15.
7566,"Referring to the previous problem, once router 1d learns about x it will put an entry (x, I) in
its forwarding table."
7567,a.
7568,Will I be equal to I  or I for this entry?
7569,Explain why in one sentence.
7570,b.
7571,"Now suppose that there is a physical link between AS2 and AS4, shown by the dotted
line."
7572,Suppose router 1d learns that x is accessible via AS2 as well as via AS3.
7573,"Will I be
set to I  or I?"
7574,Explain why in one sentence.
7575,c.
7576,"Now suppose there is another AS, called AS5, which lies on the path between AS2 andAS4 (not shown in diagram)."
7577,"Suppose router 1d learns that x is accessible via AS2 AS5
AS4 as well as via AS3 AS4."
7578,Will I be set to I  or I?
7579,"Explain why in one sentence.1 2
1 2
1 2P16."
7580,Consider the following network.
7581,"ISP B provides national backbone service to regional ISP
A."
7582,ISP C provides national backbone service to regional ISP D.
7583,Each ISP consists of one AS.
7584,"B
and C peer with each other in two places using BGP."
7585,Consider traffic going from A to D.
7586,"B wouldprefer to hand that traffic over to C on the West Coast (so that C would have to absorb the cost
of carrying the traffic cross-country), while C would prefer to get the traffic via its East Coast
peering point with B (so that B would have carried the traffic across the country)."
7587,"What BGPmechanism might C use, so that B would hand over A-to-D traffic at its East Coast peeringpoint?"
7588,"To answer this question, you will need to dig into the BGP ­specification."
7589,P17.
7590,"In Figure 5.13 , consider the path information that reaches stub networks W, X, and Y."
7591,"Based on the information available at W and X, what are their respective views of the network
topology?"
7592,Justify your answer.
7593,The topology view at Y is shown below.
7594,P18.
7595,Consider Figure 5.13 .
7596,"B would never forward traffic destined to Y via X based on BGP
routing."
7597,But there are some very popular applications for which data packets go to X first andthen flow to Y.
7598,"Identify one such application, and describe how data packets follow a path notgiven by BGP routing.Socket Programming Assignment
At the end of Chapter 2, there are four socket programming assignments."
7599,"Below, you will find a fifth
assignment which employs ICMP, a protocol discussed in this chapter."
7600,"Assignment 5: ICMP Ping
Ping is a popular networking application used to test from a remote location whether a particular host is
up and reachable."
7601,It is also often used to measure latency between the client host and the target host.
7602,"Itworks by sending ICMP “echo request” packets (i.e., ping packets) to the target host and listening forICMP “echo response” replies (i.e., pong packets)."
7603,"Ping measures the RRT, records packet loss, andcalculates a statistical summary of multiple ping-pong exchanges (the minimum, mean, max, and
standard deviation of the round-trip times)."
7604,"In this lab, you will write your own Ping application in Python."
7605,Your application will use ICMP.
7606,"But in
order to keep your program simple, you will not exactly follow the official specification in RFC 1739."
7607,"Notethat you will only need to write the client side of the program, as the functionality needed on the serverside is built into almost all operating systems."
7608,"You can find full details of this assignment, as well as
important snippets of the Python code, at the Web site http:/ /www.pearsonhighered.com/ cs-
resources ."
7609,Programming AssignmentP19.
7610,"In Figure 5.13 , suppose that there is another stub network V that is a customer of ISP A."
7611,"Suppose that B and C have a peering relationship, and A is a customer of both B and C."
7612,"Suppose that A would like to have the traffic destined to W to come from B only, and the trafficdestined to V from either B or C."
7613,How should A advertise its routes to B and C?
7614,What AS routesdoes C receive?
7615,P20.
7616,Suppose ASs X and Z are not directly connected but instead are connected by AS Y.
7617,"Further suppose that X has a peering agreement with Y, and that Y has a peering agreement
with Z."
7618,"Finally, suppose that Z wants to transit all of Y’s traffic but does not want to transit X’straffic."
7619,Does BGP allow Z to ­implement this policy?
7620,P21.
7621,"Consider the two ways in which communication occurs between a managing entity and a
managed device: request-response mode and trapping."
7622,"What are the pros and cons of these two
approaches, in terms of (1) overhead, (2) notification time when exceptional events occur, and(3) robustness with respect to lost messages between the managing entity and the device?"
7623,P22.
7624,"In Section 5.7 we saw that it was preferable to transport SNMP messages in unreliable
UDP datagrams."
7625,"Why do you think the designers of SNMP chose UDP rather than TCP as the
transport protocol of choice for SNMP?In this programming assignment, you will be writing a “distributed” set of procedures that implements a
distributed asynchronous distance-vector routing for the network shown below."
7626,"You are to write the following routines that will “execute” asynchronously within the emulated
environment provided for this assignment."
7627,"For node 0, you will write the routines:
rtinit0()."
7628,This routine will be called once at the beginning of the emulation.
7629,rtinit0() has no arguments.
7630,"It should initialize your distance table in node 0 to reflect the direct costs of 1, 3, and 7 to nodes 1, 2,and 3, respectively."
7631,"In the figure above, all links are bidirectional and the costs in both directions areidentical."
7632,"After initializing the distance table and any other data structures needed by your node 0
routines, it should then send its directly connected neighbors (in this case, 1, 2, and 3) the cost of its
minimum-cost paths to all other network nodes."
7633,"This minimum-cost information is sent to
neighboring nodes in a routing update packet by calling the routine tolayer2(), as described in the full
assignment."
7634,The format of the routing update packet is also described in the full assignment.
7635,rtupdate0(struct rtpkt *rcvdpkt).
7636,This routine will be called when node 0 receives a routing packet thatwas sent to it by one of its directly connected neighbors.
7637,"The parameter *rcvdpkt is a pointer to the
packet that was received."
7638,rtupdate0()  is the “heart” of the distance-vector algorithm.
7639,"The values it
receives in a routing update packet from some other node i contain i’s current shortest-path costs to
all other network nodes."
7640,"rtupdate0()  uses these received values to update its own distance table (as
specified by the distance-vector algorithm)."
7641,"If its own minimum cost to another node changes as aresult of the update, node 0 informs its directly connected neighbors of this change in minimum costby sending them a routing packet."
7642,"Recall that in the distance-vector algorithm, only directlyconnected nodes will exchange routing packets."
7643,"Thus, nodes 1 and 2 will communicate with eachother, but nodes 1 and 3 will not communicate with each other."
7644,"Similar routines are defined for nodes 1, 2, and 3."
7645,"Thus, you will write eight procedures in all: rtinit0(),
rtinit1(), rtinit2(), rtinit3(), rtupdate0(), rtupdate1(), rtupdate2(),  and rtupdate3()."
7646,"These routines will
together implement a distributed, asynchronous computation of the distance tables for the topology andcosts shown in the figure on the preceding page."
7647,"You can find the full details of the programming assignment, as well as C code that you will need to
create the simulated hardware/software environment, at http://www.pearsonhighered.com/cs-resource ."
7648,"A Java version of the assignment is also available.Wireshark Lab
In the Web site for this textbook, www.pearsonhighered.com/ cs-resources , you’ll find a Wireshark lab
assignment that examines the use of the ICMP protocol in the ping and traceroute commands."
7649,"An Interview With…
Jennifer Rexford
Jennifer Rexford is a Professor in the Computer Science department at Princeton University."
7650,"Herresearch has the broad goal of making computer networks easier to design and manage, withparticular emphasis on routing protocols."
7651,"From 1996–2004, she was a member of the Network
Management and Performance department at AT&T Labs–Research."
7652,"While at AT&T, she
designed techniques and tools for network measurement, traffic engineering, and routerconfiguration that were deployed in AT&T’s backbone network."
7653,"Jennifer is co-author of the book“Web Protocols and Practice: Networking Protocols, Caching, and Traffic Measurement,”published by Addison-Wesley in May 2001."
7654,She served as the chair of ACM SIGCOMM from2003 to 2007.
7655,"She received her BSE degree in electrical engineering from Princeton Universityin 1991, and her PhD degree in electrical engineering and computer science from the Universityof Michigan in 1996."
7656,"In 2004, Jennifer was the winner of ACM’s Grace Murray Hopper Award for
outstanding young computer professional and appeared on the MIT TR-100 list of top innovators
under the age of 35."
7657,Please describe one or two of the most exciting projects you have worked on during your career.
7658,What were the biggest challenges?
7659,"When I was a researcher at AT&T, a group of us designed a new way to manage routing in
Internet Service Provider backbone networks."
7660,"Traditionally, network operators configure eachrouter individually, and these routers run distributed protocols to compute paths through thenetwork."
7661,"We believed that network management would be simpler and more flexible if networkoperators could exercise direct control over how routers forward traffic based on a network-wide
view of the topology and traffic."
7662,"The Routing Control Platform (RCP) we designed and built could
compute the routes for all of AT&T’s backbone on a single commodity computer, and couldcontrol legacy routers without modification."
7663,"To me, this project was exciting because we had aprovocative idea, a working system, and ultimately a real deployment in an operational network.Fast forward a few years, and software-defined networking (SDN) has become a mainstream
technology, and standard protocols (like OpenFlow) have made it much easier to tell the
underlying switches what to do."
7664,How do you think software-defined networking should evolve in the future?
7665,"In a major break from the past, control-plane software can be created by many different
programmers, not just at companies selling network equipment."
7666,"Yet, unlike the applications
running on a server or a smart phone, controller apps must work together to handle the same
traffic."
7667,"Network operators do not want to perform load balancing on some traffic and routing on
other traffic; instead, they want to perform load balancing and routing, together, on the sametraffic."
7668,"Future SDN controller platforms should offer good programming abstractions for
composing  independently written multiple controller applications together."
7669,"More broadly, good
programming abstractions can make it easier to create controller applications, without having to
worry about low-level details like flow table entries, traffic counters, bit patterns in packetheaders, and so on."
7670,"Also, while an SDN controller is logically centralized, the network stillconsists of a distributed collection of devices."
7671,"Future controllers should offer good abstractionsfor updating the flow tables across the network, so apps can reason about what happens topackets in flight while the devices are updated."
7672,"Programming abstractions for control-planesoftware is an exciting area for interdisciplinary research between computer networking,distributed systems, and programming languages, with a real chance for practical impact in the
years ahead."
7673,Where do you see the future of networking and the Internet?
7674,"Networking is an exciting field because the applications and the underlying technologies change
all the time."
7675,"We are always reinventing ourselves! Who would have predicted even ten yearsago the dominance of smart phones, allowing mobile users to access existing applications aswell as new location-based services?"
7676,"The emergence of cloud computing is fundamentallychanging the relationship between users and the applications they run, and networked sensorsand actuators (the “Internet of Things”) are enabling a wealth of new applications (and securityvulnerabilities!)."
7677,The pace of innovation is truly inspiring.
7678,The underlying network is a crucial component in all of these innovations.
7679,"Yet, the network is
notoriously “in the way”—limiting performance, compromising reliability, constraining
applications, and complicating the deployment and management of services."
7680,"We should strive tomake the network of the future as invisible as the air we breathe, so it never stands in the way ofnew ideas and valuable services."
7681,"To do this, we need to raise the level of abstraction above
individual network devices and protocols (and their attendant acronyms!), so we can reason
about the network and the user’s high-level goals as a whole."
7682,What people inspired you professionally?
7683,I’ve long been inspired by Sally Floyd at the International Computer Science Institute.
7684,"Her
research is always purposeful, focusing on the important challenges facing the Internet."
7685,"She digsdeeply into hard questions until she understands the problem and the space of solutions
completely, and she devotes serious energy into “making things happen,” such as pushing her
ideas into protocol standards and network equipment."
7686,"Also, she gives back to the community,through professional service in numerous standards and research organizations and by creatingtools (such as the widely used ns-2 and ns-3 simulators) that enable other researchers tosucceed."
7687,She retired in 2009 but her influence on the field will be felt for years to come.
7688,"What are your recommendations for students who want careers in computer science and
networking?"
7689,Networking is an inherently interdisciplinary field.
7690,"Applying techniques from other disciplines
breakthroughs in networking come from such diverse areas as queuing theory, game theory,control theory, distributed systems, network optimization, programming languages, machinelearning, algorithms, data structures, and so on."
7691,"I think that becoming conversant in a relatedfield, or collaborating closely with experts in those fields, is a wonderful way to put networking on
a stronger foundation, so we can learn how to build networks that are worthy of society’s trust."
7692,"Beyond the theoretical disciplines, networking is exciting because we create real artifacts thatreal people use."
7693,"Mastering how to design and build systems—by gaining experience in operatingsystems, computer architecture, and so on—is another fantastic way to amplify your knowledgeof networking to help make the world a better place.Chapter 6 The Link Layer and LANs
In the previous two chapters we learned that the network layer provides a communication service
between any two network hosts."
7694,"Between the two hosts, datagrams travel over a series of
communication links, some wired and some wireless, starting at the source host, passing through a
series of packet switches (switches and routers) and ending at the destination host."
7695,"As we continuedown the protocol stack, from the network layer to the link layer, we naturally wonder how packets are
sent across the individual links  that make up the end-to-end communication path."
7696,"How are the network-
layer datagrams encapsulated in the link-layer frames for transmission over a single link?"
7697,"Are different
link-layer protocols used in the different links along the communication path?"
7698,How are transmissionconflicts in broadcast links resolved?
7699,"Is there addressing at the link layer and, if so, how does the link-
layer addressing operate with the network-layer addressing we learned about in Chapter 4?"
7700,"And what
exactly is the difference between a switch and a router?"
7701,"We’ll answer these and other important
questions in this chapter."
7702,"In discussing the link layer, we’ll see that there are two fundamentally ­different types of link-layer
channels."
7703,"The first type are broadcast channels, which connect multiple hosts in wireless LANs, satellite
networks, and hybrid fiber-coaxial cable (HFC) access networks."
7704,"Since many hosts are connected to thesame broadcast communication channel, a so-called medium access protocol is needed to coordinateframe transmission."
7705,"In some cases, a central controller may be used to coordinate transmissions; in
other cases, the hosts themselves coordinate transmissions."
7706,"The second type of link-layer channel isthe point-to-point communication link, such as that often found between two routers connected by along-distance link, or between a user’s office computer and the nearby Ethernet switch to which it isconnected."
7707,"Coordinating access to a point-to-point link is simpler; the reference material on this book’s
Web site has a detailed discussion of the Point-to-Point Protocol (PPP), which is used in settings
ranging from dial-up service over a telephone line to high-speed point-to-point frame transport overfiber-optic links."
7708,We’ll explore several important link-layer concepts and technologies in this ­chapter.
7709,"We’ll dive deeper
into error detection and correction, a topic we touched on briefly in Chapter 3."
7710,"We’ll consider multiple
access networks and switched LANs, including Ethernet—by far the most prevalent wired LAN
technology."
7711,"We’ll also look at virtual LANs, and data center networks."
7712,"Although WiFi, and more
generally wireless LANs, are link-layer topics, we’ll postpone our study of these important topics untilChapter 7.6.1 Introduction to the Link Layer
Let’s begin with some important terminology."
7713,"We’ll find it convenient in this chapter to refer to any device
that runs a link-layer (i.e., layer 2) protocol as a node."
7714,"Nodes include hosts, routers, switches, and WiFi
access points (discussed in Chapter 7)."
7715,"We will also refer to the communication channels that connect
adjacent nodes along the communication path as links."
7716,"In order for a datagram to be transferred from
source host to destination host, it must be moved over each of the individual links  in the end-to-end
path."
7717,"As an example, in the company network shown at the bottom of Figure 6.1, consider sending a
datagram from one of the wireless hosts to one of the servers."
7718,"This datagram will actually pass throughsix links: a WiFi link between sending host and WiFi access point, an Ethernet link between the accesspoint and a link-layer switch; a link between the link-layer switch and the router, a link between the tworouters; an Ethernet link between the router and a link-layer switch; and finally an Ethernet link betweenthe switch and the server."
7719,"Over a given link, a transmitting node encapsulates the datagram in a link-
layer frame  and transmits the frame into the link."
7720,"In order to gain further insight into the link layer and how it relates to the ­network layer, let’s consider a
transportation analogy."
7721,"Consider a travel agent who is planning a trip for a tourist traveling fromPrinceton, New Jersey, to Lausanne, Switzerland."
7722,"The travel agent decides that it is most convenient forthe tourist to take a limousine from Princeton to JFK airport, then a plane from JFK airport to Geneva’sairport, and finally a train from Geneva’s airport to Lausanne’s train station."
7723,"Once the travel agent makesthe three reservations, it is the responsibility of the Princeton limousine company to get the tourist fromPrinceton to JFK; it is the responsibility of the airline company to get the tourist from JFK to Geneva; andit is the responsibilityFigure 6.1 Six link-layer hops between wireless host and server
of the Swiss train service to get the tourist from Geneva to Lausanne."
7724,"Each of the three segments of the
trip is “direct” between two “adjacent” locations."
7725,"Note that the three transportation segments are
managed by different companies and use entirely different transportation modes (limousine, plane, andtrain)."
7726,"Although the transportation modes are different, they each provide the basic service of movingpassengers from one location to an adjacent location."
7727,"In this transportation analogy, the tourist is adatagram, each transportation segment is a link, the transportation mode is a link-layer protocol, and thetravel agent is a routing protocol."
7728,"6.1.1 The Services Provided by the Link Layer
Although the basic service of any link layer is to move a datagram from one node to an adjacent node
over a single communication link, the details of the provided service can vary from one link-layerprotocol to the next."
7729,"Possible services that can be offered by a link-layer protocol include:
Framing."
7730,"Almost all link-layer protocols encapsulate each network-layer datagram within a link-layer
frame before transmission over the link."
7731,"A frame consists of a data field, in which the network-layer
datagram is inserted, and a number of header fields."
7732,The structure of the frame is specified by thelink-layer protocol.
7733,"We’ll see several different frame formats when we examine specific link-layer
protocols in the second half of this chapter."
7734,Link access.
7735,"A medium access control (MAC) protocol specifies the rules by which a frame is
transmitted onto the link."
7736,"For point-to-point links that have a single sender at one end of the link and
a single receiver at the other end of the link, the MAC protocol is simple (or nonexistent)—the sendercan send a frame whenever the link is idle."
7737,"The more interesting case is when multiple nodes share
a single broadcast link—the so-called multiple access problem."
7738,"Here, the MAC protocol serves to
coordinate the frame transmissions of the many nodes."
7739,Reliable delivery.
7740,"When a link-layer protocol provides reliable delivery service, it guarantees to
move each network-layer datagram across the link without error."
7741,"Recall that certain transport-layer
protocols (such as TCP) also provide a reliable delivery service."
7742,"Similar to a transport-layer reliabledelivery service, a link-layer reliable delivery service can be achieved with acknowledgments and
retransmissions (see Section 3.4)."
7743,"A link-layer reliable delivery service is often used for links that
are prone to high error rates, such as a wireless link, with the goal of correcting an error locally—on
the link where the error occurs—rather than forcing an end-to-end retransmission of the data by atransport- or application-layer protocol."
7744,"However, link-layer reliable delivery can be considered anunnecessary overhead for low bit-error links, including fiber, coax, and many twisted-pair copperlinks."
7745,"For this reason, many wired link-layer protocols do not provide a reliable delivery service."
7746,Error detection and correction.
7747," The link-layer hardware in a receiving node can incorrectly decide
that a bit in a frame is zero when it was transmitted as a one, and vice versa."
7748,Such bit errors areintroduced by signal attenuation and electromagnetic noise.
7749,"Because there is no need to forward adatagram that has an error, many link-layer protocols provide a mechanism to detect such bit errors."
7750,"This is done by having the transmitting node include error-detection bits in the frame, and having the
receiving node perform an error check."
7751,"Recall from Chapters 3 and 4 that the Internet’s transport
layer and network layer also provide a limited form of error detection—the Internet checksum."
7752,"Error
detection in the link layer is usually more sophisticated and is implemented in hardware."
7753,"Errorcorrection is similar to error detection, except that a receiver not only detects when bit errors haveoccurred in the frame but also determines exactly where in the frame the errors have occurred (andthen corrects these errors)."
7754,6.1.2 Where Is the Link Layer Implemented?
7755,"Before diving into our detailed study of the link layer, let’s conclude this introduction by considering the
question of where the link layer is implemented."
7756,"We’ll focus here on an end system, since we learned in
Chapter 4 that the link layer is implemented in a router’s line card."
7757,"Is a host’s link layer implemented in
hardware or software?"
7758,"Is it implemented on a separate card or chip, and how does it interface with the
rest of a host’s hardware and operating system components?"
7759,Figure 6.2 shows a typical host architecture.
7760,"For the most part, the link layer is implemented in a
network adapter, also sometimes known as a network interface card (NIC)."
7761,"At the heart of the
network adapter is the link-layer controller, usually a single, special-purpose chip that implements many
of the link-layer services (framing, link access, error detection, and so on)."
7762,"Thus, much of a link-layer
controller’s functionality is implemented in hardware."
7763,"For example, Intel’s 710 adapter [Intel 2016]
implements the Ethernet protocols we’ll study in Section 6.5; the Atheros AR5006 [Atheros 2016]
controller implements the 802.11 WiFi protocols we’ll study in Chapter 7."
7764,"Until the late 1990s, most
network adapters were physically separate cards (such as a PCMCIA card or a plug-in card fitting into a
PC’s PCI card slot) but increasingly, network adapters are being integrated onto the host’s motherboard—a so-called LAN-on-motherboard configuration."
7765,"On the sending side, the controller takes a datagram that has been created and stored in host memory
by the higher layers of the protocol stack, encapsulates the datagram in a link-layer frame (filling in theframe’s various fields), and then transmits the frame into the communication link, following the link-access protocol."
7766,"On the receiving side, a controller receives the entire frame, and extracts the network-layer datagram."
7767,"If the link layer performs error detection, then it is the sending controller that sets the
error-detection bits in the frame header and it is the receiving controller that performs error detection."
7768,"Figure 6.2 shows a network adapter attaching to a host’s bus (e.g., a PCI or PCI-X bus), where it looks
much like any other I/O device to the other hostFigure 6.2 Network adapter: Its relationship to other host components and to protocol stack
functionality
components."
7769,"Figure 6.2 also shows that while most of the link layer is implemented in hardware, part of
the link layer is implemented in software that runs on the host’s CPU."
7770,"The software components of the
link layer implement higher-level link-layer functionality such as assembling link-layer addressinginformation and activating the controller hardware."
7771,"On the receiving side, link-layer software responds tocontroller interrupts (e.g., due to the receipt of one or more frames), handling error conditions andpassing a datagram up to the network layer."
7772,"Thus, the link layer is a combination of hardware and
software—the place in the protocol stack where software meets hardware."
7773,"[Intel 2016] provides a
readable overview (as well as a detailed description) of the XL710 controller from a software-
programming point of view.6.2 Error-Detection and -Correction Techniques
In the previous section, we noted that bit-level error detection and correction —detecting and
correcting the corruption of bits in a link-layer frame sent from one node to another physically connected
neighboring node—are two services often ­provided by the link layer."
7774,"We saw in Chapter 3 that error-
detection and -correction services are also often offered at the transport layer as well."
7775,"In this section,
we’ll examine a few of the simplest techniques that can be used to detect and, in some cases, correct
such bit errors."
7776,"A full treatment of the theory and implementation of this topic is itself the topic of many
textbooks (for example, [Schwartz 1980]  or [Bertsekas 1991] ), and our treatment here is necessarily
brief."
7777,"Our goal here is to develop an intuitive feel for the capabilities that error-detection and -correction
techniques provide and to see how a few simple techniques work and are used in practice in the linklayer."
7778,Figure 6.3 illustrates the setting for our study.
7779,"At the sending node, data, D, to be protected against bit
errors is augmented with error-detection and -correction bits ( EDC)."
7780,"Typically, the data to be protected
includes not only the datagram passed down from the network layer for transmission across the link, but
also link-level addressing information, sequence numbers, and other fields in the link frame header."
7781,Both D and EDC are sent to the receiving node in a link-level frame.
7782,"At the receiving node, a sequence
of bits, D′  and EDC′  is received."
7783,"Note that D′  and EDC′  may differ from the original D and EDC as a
result of in-transit bit flips."
7784,"The receiver’s challenge is to determine whether or not D′ is the same as the original D, given that it has
only received D′ and EDC′ ."
7785,"The exact wording of the receiver’s decision in Figure 6.3 (we ask whether
an error is detected, not whether an error has occurred!) is important."
7786,"Error-detection and -correction
techniques allow the receiver to sometimes, but not always , detect that bit errors have occurred."
7787,"Even
with the use of error-detection bits there still may be undetected bit errors; that is, the receiver may be
unaware that the received information contains bit errors."
7788,"As aFigure 6.3 Error-detection and -correction scenario
consequence, the receiver might deliver a corrupted datagram to the network layer, or be unaware that
the contents of a field in the frame’s header has been corrupted."
7789,"We thus want to choose an error-
detection scheme that keeps the probability of such occurrences small."
7790,"Generally, more sophisticatederror-detection and-correction techniques (that is, those that have a smaller probability of allowingundetected bit errors) incur a larger overhead—more computation is needed to compute and transmit alarger number of error-detection and -correction bits."
7791,"Let’s now examine three techniques for detecting errors in the transmitted data—parity checks (to
illustrate the basic ideas behind error detection and correction), checksumming methods (which aremore typically used in the transport layer), and cyclic redundancy checks (which are more typically used
in the link layer in an adapter)."
7792,"6.2.1 Parity Checks
Perhaps the simplest form of error detection is the use of a single parity bit."
7793,"Suppose that the
information to be sent, D in Figure 6.4, has d bits."
7794,"In an even parity scheme, the sender simply includes
one additional bit and chooses its value such that the total number of 1s in the  bits (the original
information plus a parity bit) is even."
7795,"For odd parity schemes, the parity bit value is chosen such that
there is an odd number of 1s."
7796,"Figure 6.4 illustrates an even parity scheme, with the single parity bit
being stored in a separate field.d+1Receiver operation is also simple with a single parity bit."
7797,"The receiver need only count the number of 1s
in the received  bits."
7798,"If an odd number of 1-valued bits are found with an even parity scheme, the
receiver knows that at least one bit error has occurred."
7799,"More precisely, it knows that some odd number
of bit errors have occurred."
7800,But what happens if an even number of bit errors occur?
7801,"You should convince yourself that this would
result in an undetected error."
7802,"If the probability of bit errors is small and errors can be assumed to occurindependently from one bit to the next, the probability of multiple bit errors in a packet would beextremely small."
7803,"In this case, a single parity bit might suffice."
7804,"However, measurements have shown that,rather than occurring independently, errors are often clustered together in “bursts.” Under burst errorconditions, the probability of undetected errors in a frame protected by single-bit parity can approach 50
percent [Spragins 1991]."
7805,"Clearly, a more robust error-detection scheme is needed (and, fortunately, is
used in practice!)."
7806,"But before examining error-detection schemes that are used in practice, let’s consider
a simple
Figure 6.4 One-bit even parity
generalization of one-bit parity that will provide us with insight into error-correction techniques."
7807,Figure 6.5 shows a two-dimensional generalization of the single-bit parity scheme.
7808,"Here, the d bits in D
are divided into i rows and j columns."
7809,A parity value is computed for each row and for each column.
7810,"The
resulting  parity bits comprise the link-layer frame’s error-detection bits."
7811,Suppose now that a single bit error occurs in the original d bits of information.
7812,"With this two-
dimensional parity  scheme, the parity of both the column and the row containing the flipped bit will be
in error."
7813,"The receiver can thus not only detect the fact that a single bit error has occurred, but can use
the column and row indices of the column and row with parity errors to actually identify the bit that was
corrupted and correct that error! Figure 6.5 shows an example in which the 1-valued bit in position (2,2)
is corrupted and switched to a 0—an error that is both detectable and correctable at the receiver."
7814,"Although our discussion has focused on the original d bits of information, a single error in the parity bits
themselves is also detectable and correctable."
7815,"Two-dimensional parity can also detect (but not correct!)
any combination of two errors in a packet."
7816,"Other properties of the two-dimensional parity scheme areexplored in the problems at the end of the chapter.d+1
i+j+1Figure 6.5 Two-dimensional even parity
The ability of the receiver to both detect and correct errors is known as forward error correction (FEC)."
7817,"These techniques are commonly used in audio storage and playback devices such as audio CDs. In a
network setting, FEC techniques can be used by themselves, or in conjunction with link-layer ARQ
techniques similar to those we examined in Chapter 3."
7818,"FEC techniques are valuable because they can
decrease the number of sender retransmissions required."
7819,"Perhaps more important, they allow for
immediate correction of errors at the receiver."
7820,"This avoids having to wait for the round-trip propagationdelay needed for the sender to receive a NAK packet and for the retransmitted packet to propagate back
to the receiver—a potentially important advantage for real-time network applications [Rubenstein 1998]
or links (such as deep-space links) with long propagation delays."
7821,Research examining the use of FEC inerror-control protocols includes [Biersack 1992 ; Nonnenmacher 1998 ; Byers 1998 ; Shacham 1990] .
7822,"6.2.2 Checksumming Methods
In checksumming techniques, the d bits of data in Figure 6.4 are treated as a sequence of k-bit
integers."
7823,"One simple checksumming method is to simply sum these k-bit integers and use the resulting
sum as the error-detection bits."
7824,The Internet checksum is based on this approach—bytes of data aretreated as 16-bit integers and summed.
7825,"The 1s complement of this sum then forms the Internet
checksum that is carried in the segment header."
7826,"As discussed in Section 3.3, the receiver checks the
checksum by taking the 1s complement of the sum of the received data (including the checksum) and
checking whether the result is all 1 bits."
7827,"If any of the bits are 0, an error is indicated."
7828,RFC 1071discusses the Internet checksum algorithm and its implementation in detail.
7829,"In the TCP and UDP
protocols, the Internet checksum is computed over all fields (header and data fields included)."
7830,"In IP the
checksum is computed over the IP header (since the UDP or TCP segment has its own checksum)."
7831,"In
other protocols, for example, XTP [Strayer 1992] , one checksum is computed over the header and
another checksum is computed over the entire packet."
7832,Checksumming methods require relatively little packet overhead.
7833,"For example, the checksums in TCP
and UDP use only 16 bits."
7834,"However, they provide relatively weak protection against errors as comparedwith cyclic redundancy check, which is discussed below and which is often used in the link layer."
7835,"Anatural question at this point is, Why is checksumming used at the transport layer and cyclic redundancy
check used at the link layer?"
7836,"Recall that the transport layer is typically implemented in software in a host
as part of the host’s operating system."
7837,"Because transport-layer error detection is implemented insoftware, it is important to have a simple and fast error-detection scheme such as checksumming."
7838,"Onthe other hand, error detection at the link layer is implemented in dedicated hardware in adapters, which
can rapidly perform the more complex CRC operations."
7839,"Feldmeier [Feldmeier 1995]  presents fast
software implementation techniques for not only weighted checksum codes, but CRC (see below) and
other codes as well."
7840,"6.2.3 Cyclic Redundancy Check (CRC)
An error-detection technique used widely in today’s computer networks is based on cyclic redundancy
check (CRC) codes ."
7841,"CRC codes are also known as polynomial codes , since it is possible to view the
bit string to be sent as a polynomial whose coefficients are the 0 and 1 values in the bit string, withoperations on the bit string interpreted as polynomial arithmetic."
7842,CRC codes operate as follows.
7843,"Consider the d-bit piece of data, D, that the sending node wants to send
to the receiving node."
7844,"The sender and receiver must first agree on an  bit pattern, known as a
generator , which we will denote as G."
7845,We will require that the most significant (leftmost) bit of G be a 1.
7846,"The key idea behind CRC codes is shown in Figure 6.6. For a given piece of data, D, the sender will
choose r additional bits, R, and append them to D such that the resulting  bit pattern (interpreted as a
binary number) is exactly divisible by G (i.e., has no remainder) using modulo-2 arithmetic."
7847,"The process
of error checking with CRCs is thus simple: The receiver divides the  received bits by G."
7848,"If the
remainder is nonzero, the receiver knows that an error has occurred; otherwise the data is accepted as
being correct.r+1
d+r
d+rAll CRC calculations are done in modulo-2 arithmetic without carries in addition or borrows in
subtraction."
7849,"This means that addition and subtraction are identical, and both are equivalent to the
bitwise exclusive-or (XOR) of the operands."
7850,"Thus, for example,
1011 XOR 0101 = 11101001 XOR 1101 = 0100
Also, we similarly have
1011 - 0101 = 11101001 - 1101 = 0100
Multiplication and division are the same as in base-2 arithmetic, except that any required addition orsubtraction is done without carries or borrows."
7851,"As in regular
Figure 6.6 CRC
binary arithmetic, multiplication by 2  left shifts a bit pattern by k places."
7852,"Thus, given D and R, the
quantity  yields the  bit pattern shown in Figure 6.6. We’ll use this algebraic
characterization of the  bit pattern from Figure 6.6 in our discussion below."
7853,Let us now turn to the crucial question of how the sender computes R.
7854,"Recall that we want to find R
such that there is an n such that
That is, we want to choose R such that G divides into  without remainder."
7855,"If we XOR (that is,
add modulo-2, without carry) R to both sides of the above equation, we getk
D⋅2rXOR R d+r
d+r
D⋅2rXOR R=nG
D⋅2rXOR RThis equation tells us that if we divide  by G, the value of the remainder is precisely R."
7856,"In other
words, we can calculate R as
Figure 6.7 illustrates this calculation for the case of   and ."
7857,"The 9 bits
transmitted in this case are 101  110  011."
7858,"You should check these calculations for yourself and also
check that indeed ."
7859,"Figure 6.7 A sample CRC calculation
International standards have been defined for 8-, 12-, 16-, and 32-bit generators, G."
7860,"The CRC-32 32-bit
standard, which has been adopted in a number of link-level IEEE protocols, uses a generator of
Each of the CRC standards can detect burst errors of fewer than  bits."
7861,"(This means that all
consecutive bit errors of r bits or fewer will be detected.) Furthermore, under appropriate assumptions, a
burst of length greater than  bits is detected with probability ."
7862,"Also, each of the CRC standards
can detect any odd number of bit errors."
7863,"See [Williams 1993] for a discussion of implementing CRC
checks."
7864,The theory behind CRC codes and even more powerful codes is beyond the scope of this text.
7865,"The text [Schwartz 1980]  provides an excellent introduction to this topic.D⋅2r=nG XOR R
D⋅2r
R=remainder D⋅2rG
D=101110 , d=6, G=1001 , r=3
D⋅2r=101011 ⋅G XOR R
GCRC-32=100000100110000010001110110110111
r+1
r+1 1−0.5r6.3 Multiple Access Links and Protocols
In the introduction to this chapter, we noted that there are two types of network links: point-to-point links
and broadcast links."
7866,"A point-to-point link  consists of a single sender at one end of the link and a single
receiver at the other end of the link."
7867,"Many link-layer protocols have been designed for point-to-pointlinks; the point-to-point protocol (PPP) and high-level data link control (HDLC) are two such protocols.The second type of link, a broadcast link, can have multiple sending and receiving nodes all connected
to the same, single, shared broadcast channel."
7868,"The term broadcast  is used here because when any one
node transmits a frame, the channel broadcasts the frame and each of the other nodes receives a copy."
7869,Ethernet and wireless LANs are examples of broadcast link-layer technologies.
7870,In this section we’ll takea step back from specific link-layer protocols and first examine a problem of central importance to thelink layer: how to coordinate the access of multiple sending and receiving nodes to a shared broadcastchannel—the multiple access problem.
7871,"Broadcast channels are often used in LANs, networks that are
geographically concentrated in a single building (or on a corporate or university campus)."
7872,"Thus, we’lllook at how multiple access channels are used in LANs at the end of this section."
7873,We are all familiar with the notion of broadcasting—television has been using it since its invention.
7874,"But
traditional television is a one-way broadcast (that is, one fixed node transmitting to many receivingnodes), while nodes on a computer network broadcast channel can both send and receive."
7875,"Perhaps amore apt human analogy for a broadcast channel is a cocktail party, where many people gather in alarge room (the air providing the broadcast medium) to talk and listen."
7876,"A second good analogy issomething many readers will be familiar with—a classroom—where teacher(s) and student(s) similarlyshare the same, single, broadcast medium."
7877,"A central problem in both scenarios is that of determining
who gets to talk (that is, transmit into the channel) and when."
7878,"As humans, we’ve evolved an elaborate
set of protocols for sharing the broadcast channel:
“Give everyone a chance to speak.”
“Don’t speak until you are spoken to.”“Don’t monopolize the conversation.”“Raise your hand if you have a question.”
“Don’t interrupt when someone is speaking.”
“Don’t fall asleep when someone is talking.”
Computer networks similarly have protocols—so-called multiple access ­protocols—by which nodesregulate their transmission into the shared broadcast channel."
7879,"As shown in Figure 6.8, multiple access
protocols are needed in a wide variety of network settings, including both wired and wireless access
networks, and satellite networks."
7880,"Although technically each node accesses the broadcast channel
through its adapter, in this section we will refer to the node  as the sending and
Figure 6.8 Various multiple access channels
receiving device."
7881,"In practice, hundreds or even thousands of nodes can directly communicate over a
broadcast channel."
7882,"Because all nodes are capable of transmitting frames, more than two nodes can transmit frames at the
same time."
7883,"When this happens, all of the nodes receive multiple frames at the same time; that is, thetransmitted frames collide  at all of the receivers."
7884,"Typically, when there is a collision, none of the
receiving nodes can make any sense of any of the frames that were transmitted; in a sense, the signalsof the colliding frames become inextricably tangled together."
7885,"Thus, all the frames involved in thecollision are lost, and the broadcast channel is wasted during the collision interval."
7886,"Clearly, if manynodes want to transmit frames frequently, many transmissions will result in collisions, and much of the
bandwidth of the broadcast channel will be wasted."
7887,"In order to ensure that the broadcast channel performs useful work when multiple nodes are active, it isnecessary to somehow coordinate the transmissions of the active nodes."
7888,"This coordination job is the
responsibility of the multiple access protocol."
7889,"Over the past 40 years, thousands of papers and
hundreds of PhD dissertations have been written on multiple access protocols; a comprehensive survey
of the first 20 years of this body of work is [Rom 1990] ."
7890,"Furthermore, active research in multiple access
protocols continues due to the continued emergence of new types of links, particularly new wireless
links."
7891,"Over the years, dozens of multiple access protocols have been implemented in a variety of link-layer
technologies."
7892,"Nevertheless, we can classify just about any multiple access protocol as belonging to oneof three categories: channel partitioning protocols , random access protocols, and taking-turns
protocols."
7893,We’ll cover these categories of multiple access protocols in the following three subsections.
7894,"Let’s conclude this overview by noting that, ideally, a multiple access protocol for a broadcast channel of
rate R bits per second should have the following desirable characteristics:
1."
7895,"When only one node has data to send, that node has a throughput of R bps."
7896,2.
7897,"When M nodes have data to send, each of these nodes has a throughput of R/M bps."
7898,"This need
not necessarily imply that each of the M nodes always has an instantaneous rate of R/M, but
rather that each node should have an average transmission rate of R/M over some suitably
defined interval of time."
7899,3.
7900,"The protocol is decentralized; that is, there is no master node that represents a single point of
failure for the network."
7901,4.
7902,"The protocol is simple, so that it is inexpensive to implement."
7903,"6.3.1 Channel Partitioning Protocols
Recall from our early discussion back in Section 1.3 that time-division ­multiplexing (TDM) and
frequency-division multiplexing (FDM) are two techniques that canFigure 6.9 A four-node TDM and FDM example
be used to partition a broadcast channel’s bandwidth among all nodes sharing that channel."
7904,"As an
example, suppose the channel supports N nodes and that the transmission rate of the channel is R bps."
7905,TDM divides time into time frames  and further divides each time frame into N time slots .
7906,"(The TDM
time frame should not be confused with the link-layer unit of data exchanged between sending and
receiving adapters, which is also called a frame."
7907,"In order to reduce confusion, in this subsection we’llrefer to the link-layer unit of data exchanged as a packet.) Each time slot is then assigned to one of the
N nodes."
7908,"Whenever a node has a packet to send, it transmits the packet’s bits during its assigned time
slot in the revolving TDM frame."
7909,"Typically, slot sizes are chosen so that a single packet can be
transmitted during a slot time."
7910,Figure 6.9 shows a simple four-node TDM example.
7911,"Returning to our
cocktail party analogy, a TDM-regulated cocktail party would allow one partygoer to speak for a fixed
period of time, then allow another partygoer to speak for the same amount of time, and so on."
7912,"Once
everyone had had a chance to talk, the ­pattern would repeat."
7913,"TDM is appealing because it eliminates collisions and is perfectly fair: Each node gets a dedicated
transmission rate of R/N bps during each frame time."
7914,"However, it has two major drawbacks."
7915,"First, a
node is limited to an average rate of R/N bps even when it is the only node with packets to send."
7916,"A
second drawback is that a node must always wait for its turn in the transmission sequence—again, evenwhen it is the only node with a frame to send."
7917,"Imagine the partygoer who is the only one with anything to
say (and imagine that this is the even rarer circumstance where everyone wants to hear what that one
person has to say)."
7918,"Clearly, TDM would be a poor choice for a multiple access protocol for this particular
party.While TDM shares the broadcast channel in time, FDM divides the R bps channel into different
frequencies (each with a bandwidth of R/N) and assigns each frequency to one of the N nodes."
7919,"FDM
thus creates N smaller channels of R/N bps out of the single, larger R bps channel."
7920,"FDM shares both
the advantages and drawbacks of TDM."
7921,"It avoids collisions and divides the bandwidth fairly among the
N nodes."
7922,"However, FDM also shares a principal disadvantage with TDM—a node is limited to a
bandwidth of R/N, even when it is the only node with packets to send."
7923,A third channel partitioning protocol is code division multiple access (CDMA).
7924,"While TDM and FDM
assign time slots and frequencies, respectively, to the nodes, CDMA assigns a different code to each
node."
7925,Each node then uses its unique code to encode the data bits it sends.
7926,"If the codes are chosen
carefully, CDMA networks have the wonderful property that different nodes can transmit simultaneously
and yet have their respective receivers correctly receive a sender’s encoded data bits (assuming the
receiver knows the sender’s code) in spite of interfering transmissions by other nodes."
7927,"CDMA has beenused in military systems for some time (due to its anti-jamming properties) and now has widespread
civilian use, particularly in cellular telephony."
7928,"Because CDMA’s use is so tightly tied to wireless
channels, we’ll save our discussion of the technical details of CDMA until Chapter 7."
7929,"For now, it will
suffice to know that CDMA codes, like time slots in TDM and frequencies in FDM, can be allocated to
the multiple access channel users."
7930,"6.3.2 Random Access Protocols
The second broad class of multiple access protocols are random access protocols."
7931,"In a random access
protocol, a transmitting node always transmits at the full rate of the channel, namely, R bps."
7932,"When there
is a collision, each node involved in the collision repeatedly retransmits its frame (that is, packet) until its
frame gets through without a collision."
7933,"But when a node experiences a collision, it doesn’t necessarily
retransmit the frame right away."
7934,Instead it waits a random delay before retransmitting the frame .
7935,"Each
node involved in a collision chooses independent random delays."
7936,"Because the random delays are
independently chosen, it is possible that one of the nodes will pick a delay that is sufficiently less thanthe delays of the other colliding nodes and will therefore be able to sneak its frame into the channelwithout a collision."
7937,"There are dozens if not hundreds of random access protocols described in the literature [Rom 1990 ;
Bertsekas 1991] ."
7938,"In this section we’ll describe a few of the most commonly used random access
protocols—the ALOHA protocols [Abramson 1970 ; Abramson 1985 ; Abramson 2009]  and the carrier
sense multiple access (CSMA) protocols [Kleinrock 1975b]."
7939,"Ethernet [Metcalfe 1976]  is a popular and
widely deployed CSMA protocol.Slotted ALOHALet’s begin our study of random access protocols with one of the simplest random access protocols, the
slotted ALOHA protocol."
7940,"In our description of slotted ALOHA, we assume the following:
All frames consist of exactly L bits."
7941,"Time is divided into slots of size L/R seconds (that is, a slot equals the time to transmit one frame)."
7942,Nodes start to transmit frames only at the beginnings of slots.
7943,The nodes are synchronized so that each node knows when the slots begin.
7944,"If two or more frames collide in a slot, then all the nodes detect the collision event before the slot
ends."
7945,"Let p be a probability, that is, a number between 0 and 1."
7946,"The operation of slotted ALOHA in each node
is simple:
When the node has a fresh frame to send, it waits until the beginning of the next slot and transmits
the entire frame in the slot."
7947,"If there isn’t a collision, the node has successfully transmitted its frame and thus need not considerretransmitting the frame."
7948,"(The node can prepare a new frame for transmission, if it has one.)
If there is a collision, the node detects the collision before the end of the slot."
7949,"The node retransmits
its frame in each subsequent slot with probability p until the frame is transmitted without a collision."
7950,"By retransmitting with probability p, we mean that the node effectively tosses a biased coin; the event
heads corresponds to “retransmit,” which occurs with probability p."
7951,"The event tails corresponds to “skip
the slot and toss the coin again in the next slot”; this occurs with probability ."
7952,"All nodes involved in
the collision toss their coins independently."
7953,Slotted ALOHA would appear to have many advantages.
7954,"Unlike channel partitioning, slotted ALOHA
allows a node to transmit continuously at the full rate, R, when that node is the only active node."
7955,"(A node
is said to be active if it has frames to send.) Slotted ALOHA is also highly decentralized, because each
node detects collisions and independently decides when to retransmit."
7956,"(Slotted ALOHA does, however,require the slots to be synchronized in the nodes; shortly we’ll discuss an unslotted version of the
ALOHA protocol, as well as CSMA protocols, none of which require such synchronization.) Slotted
ALOHA is also an extremely simple protocol."
7957,"Slotted ALOHA works well when there is only one active node, but how ­efficient is it when there are
multiple active nodes?"
7958,"There are two possible efficiency(1−p)Figure 6.10 Nodes 1, 2, and 3 collide in the first slot."
7959,"Node 2 finally succeeds in the fourth slot,
node 1 in the eighth slot, and node 3 in the ninth slot
concerns here."
7960,"First, as shown in Figure 6.10, when there are multiple active nodes, a certain fraction of
the slots will have collisions and will therefore be “wasted.” The second concern is that another fraction
of the slots will be empty because all active nodes refrain from transmitting as a result of the
probabilistic transmission policy."
7961,"The only “unwasted” slots will be those in which exactly one node
transmits."
7962,A slot in which exactly one node transmits is said to be a successful slot.
7963,"The efficiency of
a slotted multiple access protocol is defined to be the long-run fraction of successful slots in the casewhen there are a large number of active nodes, each always having a large number of frames to send.Note that if no form of access control were used, and each node were to immediately retransmit aftereach collision, the efficiency would be zero."
7964,"Slotted ALOHA clearly increases the efficiency beyond zero,
but by how much?"
7965,We now proceed to outline the derivation of the maximum efficiency of slotted ALOHA.
7966,"To keep this
derivation simple, let’s modify the protocol a little and assume that each node attempts to transmit a
frame in each slot with probability p."
7967,"(That is, we assume that each node always has a frame to send
and that the node transmits with probability p for a fresh frame as well as for a frame that has already
suffered a collision.) Suppose there are N nodes."
7968,"Then the probability that a given slot is a successful
slot is the probability that one of the nodes transmits and that the remaining  nodes do not transmit."
7969,"The probability that a given node transmits is p; the probability that the remaining nodes do not transmit
is ."
7970,Therefore the probability a given node has a success is .
7971,"Because there are N
nodes, the probability that any one of the N nodes has a success is ."
7972,"Thus, when there are N active nodes, the efficiency of slotted ALOHA is ."
7973,"To obtain the
maximum efficiency for N active nodes, we have to find the p* that maximizes this expression."
7974,"(See theN−1
(1−p)N−1 p(1−p)N−1
Np(1−p)N−1
Np(1−p)N−1homework problems for a general outline of this derivation.) And to obtain the maximum efficiency for a
large number of active nodes, we take the limit of  as N approaches infinity."
7975,"(Again, see
the homework problems.) After performing these calculations, we’ll find that the maximum efficiency of
the protocol is given by ."
7976,"That is, when a large number of nodes have many frames to transmit,
then (at best) only 37 percent of the slots do useful work."
7977,"Thus the effective transmission rate of the
channel is not R bps but only 0.37 R bps! A similar analysis also shows that 37 percent of the slots go
empty and 26 percent of slots have collisions."
7978,"Imagine the poor network administrator who has
purchased a 100-Mbps slotted ALOHA system, expecting to be able to use the network to transmit dataamong a large number of users at an aggregate rate of, say, 80 Mbps! Although the channel is capableof transmitting a given frame at the full channel rate of 100 Mbps, in the long run, the successfulthroughput of this channel will be less than 37 Mbps."
7979,"ALOHA
The slotted ALOHA protocol required that all nodes synchronize their transmissions to start at the
beginning of a slot."
7980,"The first ALOHA protocol [Abramson 1970]  was actually an unslotted, fully
decentralized protocol."
7981,"In pure ALOHA, when a frame first arrives (that is, a network-layer datagram is
passed down from the network layer at the sending node), the node immediately transmits the frame inits entirety into the broadcast channel."
7982,"If a transmitted frame experiences a collision with one or moreother transmissions, the node will then immediately (after completely transmitting its collided frame)
retransmit the frame with probability p."
7983,"Otherwise, the node waits for a frame transmission time."
7984,"After
this wait, it then transmits the frame with probability p, or waits (remaining idle) for another frame time
with probability 1 – p."
7985,"To determine the maximum efficiency of pure ALOHA, we focus on an individual node."
7986,"We’ll make the
same assumptions as in our slotted ALOHA analysis and take the frame transmission time to be the unit
of time."
7987,"At any given time, the probability that a node is transmitting a frame is p."
7988,"Suppose this frame
begins transmission at time t."
7989,"As shown in Figure 6.11, in order for this frame to be successfully
transmitted, no other nodes can begin their transmission in the interval of time ."
7990,"Such a
transmission would overlap with the beginning of the transmission of node i’s frame."
7991,"The probability that
all other nodes do not begin a transmission in this interval is ."
7992,"Similarly, no other node can
begin a transmission while node i is transmitting, as such a transmission would overlap with the latter
part of node i’s transmission."
7993,"The probability that all other nodes do not begin a transmission in this
interval is also ."
7994,"Thus, the probability that a given node has a successful transmission is
."
7995,"By taking limits as in the slotted ALOHA case, we find that the maximum efficiency of the
pure ALOHA protocol is only 1/(2 e)—exactly half that of slotted ALOHA."
7996,"This then is the price to be paid
for a fully decentralized ALOHA protocol.Np*(1−p*)N−1
1/e=0.37
0
[ t0−1,t0]
(1−p)N−1
(1−p)N−1
p(1−p)2(N−1)Figure 6.11 Interfering transmissions in pure ALOHA
Carrier Sense Multiple Access (CSMA)
In both slotted and pure ALOHA, a node’s decision to transmit is made independently of the activity of
the other nodes attached to the broadcast channel."
7997,"In particular, a node neither pays attention towhether another node happens to be transmitting when it begins to transmit, nor stops transmitting ifanother node begins to interfere with its transmission."
7998,"In our cocktail party analogy, ALOHA protocolsare quite like a boorish partygoer who continues to chatter away regardless of whether other people aretalking."
7999,"As humans, we have human protocols that allow us not only to behave with more civility, butalso to decrease the amount of time spent “colliding” with each other in conversation and, consequently,to increase the amount of data we exchange in our conversations."
8000,"Specifically, there are two important
rules for polite human conversation:
Listen before speaking."
8001," If someone else is speaking, wait until they are finished."
8002,"In the networking
world, this is called carrier sensing—a node listens to the channel before transmitting."
8003,"If a frame
from another node is currently being transmitted into the channel, a node then waits until it detects
no transmissions for a short amount of time and then begins transmission."
8004,"If someone else begins talking at the same time, stop talking."
8005," In the networking world, this is
called collision detection —a transmitting node listens to the channel while it is transmitting."
8006,"If it
detects that another node is transmitting an interfering frame, it stops transmitting and waits arandom amount of time before repeating the sense-and-transmit-when-idle cycle."
8007,"These two rules are embodied in the family of carrier sense multiple access (CSMA)  and CSMA with
collision detection (CSMA/CD)  protocols [Kleinrock 1975b; Metcalfe 1976 ; Lam 1980 ; Rom 1990] ."
8008,"Many variations on CSMA and
CASE HISTORYNORM ABRAMSON AND ALOHANET
Norm Abramson, a PhD engineer, had a passion for surfing and an interest in packet switching."
8009,This combination of interests brought him to the University of Hawaii in 1969.
8010,"Hawaii consists ofmany mountainous islands, making it difficult to install and operate land-based networks."
8011,"Whennot surfing, Abramson thought about how to design a network that does packet switching overradio."
8012,"The network he designed had one central host and several secondary nodes scattered
over the Hawaiian Islands."
8013,"The network had two channels, each using a different frequency
band."
8014,The downlink channel broadcasted packets from the central host to the secondary hosts;and the upstream channel sent packets from the secondary hosts to the central host.
8015,"In additionto sending informational packets, the central host also sent on the downstream channel anacknowledgment for each packet successfully received from the secondary hosts."
8016,"Because the secondary hosts transmitted packets in a decentralized fashion, collisions on the
upstream channel inevitably occurred."
8017,"This observation led Abramson to devise the pureALOHA protocol, as described in this chapter."
8018,"In 1970, with continued funding from ARPA,
Abramson connected his ALOHAnet to the ARPAnet."
8019,"Abramson’s work is important not only
because it was the first example of a radio packet network, but also because it inspired BobMetcalfe."
8020,"A few years later, Metcalfe modified the ALOHA protocol to create the CSMA/CDprotocol and the Ethernet LAN."
8021,CSMA/CD have been proposed.
8022,"Here, we’ll consider a few of the most important, and fundamental,characteristics of CSMA and CSMA/CD."
8023,"The first question that you might ask about CSMA is why, if all nodes perform carrier sensing, do
collisions occur in the first place?"
8024,"After all, a node will refrain from transmitting whenever it senses thatanother node is transmitting."
8025,"The answer to the question can best be illustrated using space-time
diagrams [Molle 1987]."
8026,"­Figure 6.12 shows a space-time diagram of four nodes (A, B, C, D) attached
to a linear broadcast bus."
8027,"The horizontal axis shows the position of each node in space; the vertical axis
represents time."
8028,"At time t , node B senses the channel is idle, as no other nodes are currently transmitting."
8029,"Node B thus
begins transmitting, with its bits propagating in both directions along the broadcast medium."
8030,"The
downward propagation of B’s bits in Figure 6.12 with increasing time indicates that a nonzero amount of
time is needed for B’s bits actually to propagate (albeit at near the speed of light) along the broadcast
medium."
8031,"At time , node D has a frame to send."
8032,"Although node B is currently transmitting at time
t, the bits being transmitted by B have yet to reach D, and thus D senses
0
t1(t1>t0)
1Figure 6.12 Space-time diagram of two CSMA nodes with colliding transmissions
the channel idle at t."
8033,"In accordance with the CSMA protocol, D thus begins transmitting its frame."
8034,"A
short time later, B’s transmission begins to interfere with D’s transmission at D."
8035,"From Figure 6.12, it is
evident that the end-to-end channel propagation delay  of a broadcast channel—the time it takes for a
signal to propagate from one of the nodes to another—will play a crucial role in determining its
performance."
8036,"The longer this propagation delay, the larger the chance that a carrier-sensing node is notyet able to sense a transmission that has already begun at another node in the network."
8037,"Carrier Sense Multiple Access with Collision Dection (CSMA/CD)
In Figure 6.12, nodes do not perform collision detection; both B and D continue to transmit their frames
in their entirety even though a collision has occurred."
8038,"When a node performs collision detection, it
ceases transmission as soon as it detects a collision."
8039,"Figure 6.13 shows the same scenario as in
Figure 6.12, except that the two1Figure 6.13 CSMA with collision detection
nodes each abort their transmission a short time after detecting a collision."
8040,"Clearly, adding collision
detection to a multiple access protocol will help protocol performance by not transmitting a useless,
damaged (by interference with a frame from another node) frame in its entirety."
8041,"Before analyzing the CSMA/CD protocol, let us now summarize its operation from the perspective of an
adapter (in a node) attached to a broadcast channel:
1."
8042,"The adapter obtains a datagram from the network layer, prepares a link-layer frame, and puts
the frame adapter buffer."
8043,2.
8044,"If the adapter senses that the channel is idle (that is, there is no signal energy entering theadapter from the channel), it starts to transmit the frame."
8045,"If, on the other hand, the adapter
senses that the channel is busy, it waits until it senses no signal energy and then starts totransmit the frame."
8046,3.
8047,"While transmitting, the adapter monitors for the presence of signal energy coming from other
adapters using the broadcast channel."
8048,4.
8049,"If the adapter transmits the entire frame without detecting signal energy from other adapters, theadapter is finished with the frame."
8050,"If, on the other hand, the adapter detects signal energy from
other adapters while transmitting, it aborts the transmission (that is, it stops transmitting its
frame)."
8051,5.
8052,"After aborting, the adapter waits a random amount of time and then returns to step 2."
8053,"The need to wait a random (rather than fixed) amount of time is hopefully clear—if two nodestransmitted frames at the same time and then both waited the same fixed amount of time, they’d
continue colliding forever."
8054,"But what is a good interval of time from which to choose the random backoff
time?"
8055,"If the interval is large and the number of colliding nodes is small, nodes are likely to wait a largeamount of time (with the channel remaining idle) before repeating the sense-and-transmit-when-idlestep."
8056,"On the other hand, if the interval is small and the number of colliding nodes is large, it’s likely thatthe chosen random values will be nearly the same, and transmitting nodes will again collide."
8057,"What we’dlike is an interval that is short when the number of colliding nodes is small, and long when the number ofcolliding nodes is large."
8058,"The binary exponential backoff  algorithm, used in Ethernet as well as in DOCSIS cable network
multiple access protocols [DOCSIS 2011], elegantly solves this problem."
8059,"Specifically, when transmitting
a frame that has already experienced n collisions, a node chooses the value of K at random from 
."
8060,"Thus, the more collisions experienced by a frame, the larger the interval from which K is
chosen."
8061,"For Ethernet, the actual amount of time a node waits is  bit times (i.e., K times the amount
of time needed to send 512 bits into the Ethernet) and the maximum value that n can take is capped at
10.Let’s look at an example."
8062,"Suppose that a node attempts to transmit a frame for the first time and while
transmitting it detects a collision."
8063,"The node then chooses  with probability 0.5 or chooses  with
probability 0.5. If the node chooses , then it immediately begins sensing the channel."
8064,"If the node
chooses , it waits 512 bit times (e.g., 5.12 microseconds for a 100 Mbps Ethernet) before beginning
the sense-and-transmit-when-idle cycle."
8065,"After a second collision, K is chosen with equal probability from
{0,1,2,3}."
8066,"After three collisions, K is chosen with equal probability from {0,1,2,3,4,5,6,7}."
8067,"After 10 or more
collisions, K is chosen with equal probability from {0,1,2,…, 1023}."
8068,"Thus, the size of the sets from which
K is chosen grows exponentially with the number of collisions; for this reason this algorithm is referred to
as binary exponential backoff."
8069,"We also note here that each time a node prepares a new frame for transmission, it runs the CSMA/CD
algorithm, not taking into account any collisions that may have occurred in the recent past."
8070,So it ispossible that a node with a new frame will immediately be able to sneak in a successful transmissionwhile several other nodes are in the exponential backoff state.
8071,"CSMA/CD Efficiency{
0,1,2,…2n−1}
K⋅512
K=0 K=1
K=0
K=1When only one node has a frame to send, the node can transmit at the full channel rate (e.g., for
Ethernet typical rates are 10 Mbps, 100 Mbps, or 1 Gbps)."
8072,"However, if many nodes have frames to
transmit, the effective transmission rate of the channel can be much less."
8073,"We define the efficiency of
CSMA/CD to be the long-run fraction of time during which frames are being transmitted on the channelwithout collisions when there is a large number of active nodes, with each node having a large number
of frames to send."
8074,"In order to present a closed-form approximation of the efficiency of Ethernet, let d
denote the maximum time it takes signal energy to propagate between any two adapters."
8075,"Let d be the
time to transmit a maximum-size frame (approximately 1.2 msecs for a 10 Mbps Ethernet)."
8076,A derivationof the efficiency of CSMA/CD is beyond the scope of this book (see [Lam 1980]  and [Bertsekas 1991] ).
8077,"Here we simply state the following approximation:
We see from this formula that as d  approaches 0, the efficiency approaches 1."
8078,"This matches our
intuition that if the propagation delay is zero, colliding nodes will abort immediately without wasting the
channel."
8079,"Also, as d becomes very large, efficiency approaches 1."
8080,"This is also intuitive because when
a frame grabs the channel, it will hold on to the channel for a very long time; thus, the channel will be
doing productive work most of the time."
8081,"6.3.3 Taking-Turns Protocols
Recall that two desirable properties of a multiple access protocol are (1) when only one node is active,
the active node has a throughput of R bps, and (2) when M nodes are active, then each active node has
a throughput of nearly R/M bps."
8082,"The ALOHA and CSMA protocols have this first property but not the
second."
8083,"This has motivated researchers to create another class of protocols—the taking-turns
protocols."
8084,"As with random access protocols, there are dozens of taking-turns protocols, and each one
of these protocols has many variations."
8085,We’ll discuss two of the more important protocols here.
8086,"The first
one is the polling protocol ."
8087,"The polling protocol requires one of the nodes to be designated as a
master node."
8088,The master node polls  each of the nodes in a round-robin fashion.
8089,"In particular, the
master node first sends a message to node 1, saying that it (node 1) can transmit up to some maximumnumber of frames."
8090,"After node 1 transmits some frames, the master node tells node 2 it (node 2) cantransmit up to the maximum number of frames."
8091,"(The master node can determine when a node hasfinished sending its frames by observing the lack of a signal on the channel.) The procedure continuesin this manner, with the master node polling each of the nodes in a cyclic manner."
8092,The polling protocol eliminates the collisions and empty slots that plague random access protocols.
8093,"This
allows polling to achieve a much higher efficiency."
8094,But it also has a few drawbacks.
8095,"The first drawback is
that the protocol introduces a polling delay—the amount of time required to notify a node that it canprop
trans
Efficiency=11+5dprop/dtrans
prop
transtransmit."
8096,"If, for example, only one node is active, then the node will transmit at a rate less than R bps, as
the master node must poll each of the inactive nodes in turn each time the active node has sent its
maximum number of frames."
8097,"The second drawback, which is potentially more serious, is that if themaster node fails, the entire channel becomes inoperative."
8098,"The 802.15 protocol and the Bluetooth
protocol we will study in Section 6.3 are examples of polling protocols."
8099,The second taking-turns protocol is the token-passing protocol .
8100,"In this protocol there is no master
node."
8101,"A small, special-purpose frame known as a token is exchanged among the nodes in some fixed
order."
8102,"For example, node 1 might always send the token to node 2, node 2 might always send the tokento node 3, and node N might always send the token to node 1."
8103,"When a node receives a token, it holds
onto the token only if it has some frames to transmit; otherwise, it immediately forwards the token to the
next node."
8104,"If a node does have frames to transmit when it receives the token, it sends up to a maximumnumber of frames and then forwards the token to the next node."
8105,Token passing is decentralized andhighly efficient.
8106,But it has its problems as well.
8107,"For example, the failure of one node can crash the entire
channel."
8108,"Or if a node accidentally neglects to release the token, then some recovery procedure must be
invoked to get the token back in circulation."
8109,"Over the years many token-passing protocols have been
developed, including the fiber distributed data interface (FDDI) protocol [Jain 1994] and the IEEE 802.5
token ring protocol [IEEE 802.5 2012], and each one had to address these as well as other sticky
issues."
8110,"6.3.4 DOCSIS: The Link-Layer Protocol for Cable Internet Access
In the previous three subsections, we’ve learned about three broad classes of multiple access protocols:
channel partitioning protocols, random access protocols, and taking turns protocols."
8111,"A cable access
network will make for an excellent case study here, as we’ll find aspects of each of these three classes
of multiple access protocols with the cable access network!
Recall from Section 1.2.1 that a cable access network typically connects several thousand residential
cable modems to a cable modem termination system (CMTS) at the cable network headend."
8112,"The Data-
Over-Cable Service Interface Specifications (DOCSIS) [DOCSIS 2011] specifies the cable data network
architecture and its protocols."
8113,"DOCSIS uses FDM to divide the downstream (CMTS to modem) and
upstream (modem to CMTS) network segments into multiple frequency channels."
8114,"Each downstreamchannel is 6 MHz wide, with a maximum throughput of approximately 40 Mbps per channel (althoughthis data rate is seldom seen at a cable modem in practice); each upstream channel has a maximumchannel width of 6.4 MHz, and a maximum upstream throughput of approximately 30 Mbps."
8115,"Each
upstream andFigure 6.14 Upstream and downstream channels between CMTS and cable modems
downstream channel is a broadcast channel."
8116,"Frames transmitted on the downstream channel by the
CMTS are received by all cable modems receiving that channel; since there is just a single CMTS
transmitting into the downstream channel, however, there is no multiple access problem."
8117,"The upstreamdirection, however, is more interesting and technically challenging, since multiple cable modems sharethe same upstream channel (frequency) to the CMTS, and thus collisions can potentially occur."
8118,"As illustrated in Figure 6.14, each upstream channel is divided into intervals of time (TDM-like), each
containing a sequence of mini-slots during which cable modems can transmit to the CMTS."
8119,"The CMTS
explicitly grants permission to individual cable modems to transmit during specific mini-slots."
8120,"The CMTSaccomplishes this by sending a control message known as a MAP message on a downstream channel
to specify which cable modem (with data to send) can transmit during which mini-slot for the interval of
time specified in the control message."
8121,"Since mini-slots are explicitly allocated to cable modems, theCMTS can ensure there are no colliding transmissions during a mini-slot."
8122,But how does the CMTS know which cable modems have data to send in the first place?
8123,"This is
accomplished by having cable modems send mini-slot-request frames to the CMTS during a special set
of interval mini-slots that are dedicated for this purpose, as shown in Figure 6.14."
8124,"These mini-slot-
request frames are transmitted in a random access manner and so may collide with each other."
8125,"A cable
modem can neither sense whether the upstream channel is busy nor detect collisions."
8126,"Instead, the cable
modem infers that its mini-slot-request frame experienced a collision if it does not receive a response tothe requested allocation in the next downstream control message."
8127,"When a collision is inferred, a cablemodem uses binary exponential backoff to defer the retransmission of its mini-slot-request frame to a
future time slot."
8128,"When there is little traffic on the upstream channel, a cable modem may actuallytransmit data frames during slots nominally assigned for mini-slot-request frames (and thus avoid havingto wait for a mini-slot assignment)."
8129,"A cable access network thus serves as a terrific example of multiple access protocols in action—FDM,
TDM, random access, and centrally allocated time slots all within one network!6.4 Switched Local Area Networks
Having covered broadcast networks and multiple access protocols in the previous section, let’s turn our
attention next to switched local networks."
8130,"Figure 6.15 shows a switched local network connecting three
departments, two servers and a router with four switches."
8131,"Because these switches operate at the link
layer, they switch link-layer frames (rather than network-layer datagrams), don’t recognize network-layeraddresses, and don’t use routing algorithms like RIP or OSPF to determine
Figure 6.15 An institutional network connected together by four switches
paths through the network of layer-2 switches."
8132,"Instead of using IP addresses, we will soon see that they
use link-layer addresses to forward link-layer frames through the network of switches."
8133,"We’ll begin our
study of switched LANs by first covering link-layer addressing ( Section 6.4.1)."
8134,"We then examine the
celebrated Ethernet protocol ( Section 6.5.2)."
8135,"After examining link-layer addressing and Ethernet, we’ll
look at how link-layer switches operate ( Section 6.4.3), and then see (Section 6.4.4) how these
switches are often used to build large-scale LANs.6.4.1 Link-Layer Addressing and ARP
Hosts and routers have link-layer addresses."
8136,"Now you might find this surprising, recalling from Chapter
4 that hosts and routers have network-layer addresses as well."
8137,"You might be asking, why in the world
do we need to have addresses at both the network and link layers?"
8138,"In addition to describing the syntax
and function of the link-layer addresses, in this section we hope to shed some light on why the two
layers of addresses are useful and, in fact, indispensable."
8139,"We’ll also cover the Address Resolution
Protocol (ARP), which provides a mechanism to translate IP addresses to link-layer addresses."
8140,"MAC Addresses
In truth, it is not hosts and routers that have link-layer addresses but rather their adapters (that is,
network interfaces) that have link-layer addresses."
8141,"A host or router with multiple network interfaces willthus have multiple link-layer addresses associated with it, just as it would also have multiple IPaddresses associated with it."
8142,"It's important to note, however, that link-layer switches do not have link-
layer addresses associated with their interfaces that connect to hosts and routers."
8143,"This is because the
job of the link-layer switch is to carry datagrams between hosts and routers; a switch does this jobtransparently, that is, without the host or router having to explicitly address the frame to the intervening
switch."
8144,This is illustrated in Figure 6.16.
8145,"A link-layer address is variously called a LAN address , a
physical address, or a MAC address ."
8146,"Because MAC address seems to be the most popular term, we’ll
henceforth refer to link-layer addresses as MAC addresses."
8147,"For most LANs (including Ethernet and802.11 wireless LANs), the MAC address is 6 bytes long, giving 2  possible MAC addresses."
8148,"As shown
in Figure 6.16, these 6-byte addresses are typically expressed in hexadecimal notation, with each byte
of the address expressed as a pair of hexadecimal numbers."
8149,"Although MAC addresses were designed
to be permanent, it is now possible to change an adapter’s MAC address via software."
8150,"For the rest ofthis section, however, we’ll assume that an adapter’s MAC address is fixed."
8151,One interesting property of MAC addresses is that no two adapters have the same address.
8152,"This might
seem surprising given that adapters are manufactured in many countries by many companies."
8153,"Howdoes a company manufacturing adapters in Taiwan make sure that it is using different addresses from a
company manufacturing48Figure 6.16 Each interface connected to a LAN has a unique MAC address
adapters in Belgium?"
8154,The answer is that the IEEE manages the MAC address space.
8155,"In particular, when
a company wants to manufacture adapters, it purchases a chunk of the address space consisting of 2
addresses for a nominal fee."
8156,"IEEE allocates the chunk of 2  addresses by fixing the first 24 bits of a
MAC address and letting the company create unique combinations of the last 24 bits for each adapter."
8157,"An adapter’s MAC address has a flat structure (as opposed to a hierarchical structure) and doesn’t
change no matter where the adapter goes."
8158,"A laptop with an Ethernet interface always has the sameMAC address, no matter where the computer goes."
8159,"A smartphone with an 802.11 interface always hasthe same MAC address, no matter where the smartphone goes."
8160,"Recall that, in contrast, IP addresseshave a hierarchical structure (that is, a network part and a host part), and a host’s IP addresses needsto be changed when the host moves, i.e., changes the network to which it is attached."
8161,"An adapter’sMAC address is analogous to a person’s social security number, which also has a flat addressingstructure and which doesn’t change no matter where the person goes."
8162,"An IP address is analogous to a
person’s postal address, which is hierarchical and which must be changed whenever a person moves."
8163,"Just as a person may find it useful to have both a postal address and a social security number, it isuseful for a host and router interfaces to have both a network-layer address and a MAC address."
8164,"When an adapter wants to send a frame to some destination adapter, the sending adapter inserts the
destination adapter’s MAC address into the frame and then sends the frame into the LAN."
8165,"As we willsoon see, a switch occasionally broadcasts an incoming frame onto all of its interfaces."
8166,"We’ll see in
Chapter 7 that 802.11 also broadcasts frames."
8167,"Thus, an adapter may receive a frame that isn’t
addressed to it."
8168,"Thus, when an adapter receives a frame, it will check to see whether the destination
MAC address in the frame matches its own MAC address."
8169,"If there is a match, the adapter extracts the
enclosed datagram and passes the datagram up the protocol stack."
8170,"If there isn’t a match, the adapterdiscards the frame, without passing the network-layer datagram up."
8171,"Thus, the destination only will be24
24interrupted when the frame is received."
8172,"However, sometimes a sending adapter does want all the other adapters on the LAN to receive and
process the frame it is about to send."
8173,"In this case, the sending adapter inserts a special MAC broadcast
address into the destination address field of the frame."
8174,"For LANs that use 6-byte addresses (such as
Ethernet and 802.11), the broadcast address is a string of 48 consecutive 1s (that is, FF-FF-FF-FF-FF-
FF in hexadecimal notation)."
8175,"Address Resolution Protocol (ARP)
Because there are both network-layer addresses (for example, Internet IP addresses) and link-layer
addresses (that is, MAC addresses), there is a need to translate between them."
8176,"For the Internet, this is
the job of the Address Resolution Protocol (ARP)  [RFC 826]."
8177,"To understand the need for a protocol such as ARP, consider the network shown in Figure 6.17."
8178,"In this
simple example, each host and router has a single IP address and single MAC address."
8179,"As usual, IP
addresses are shown in dotted-decimal
PRINCIPLES IN PRACTICE
KEEPING THE LAYERS INDEPENDENT
There are several reasons why hosts and router interfaces have MAC addresses in ­addition to
network-layer addresses."
8180,"First, LANs are designed for arbitrary network-layer protocols, not just
for IP and the Internet."
8181,"If adapters were assigned IP addresses rather than “neutral” MAC
addresses, then adapters would not easily be able to support other network-layer protocols (for
example, IPX or DECnet)."
8182,"Second, if adapters were to use network-layer addresses instead ofMAC addresses, the network-layer address would have to be stored in the adapter RAM andreconfigured every time the adapter was moved (or powered up)."
8183,"Another option is to not useany addresses in the adapters and have each adapter pass the data (typically, an IP datagram)of each frame it receives up the protocol stack."
8184,The network layer could then check for amatching network-layer address.
8185,"One problem with this option is that the host would beinterrupted by every frame sent on the LAN, including by frames that were destined for other
hosts on the same broadcast LAN."
8186,"In summary, in order for the layers to be largely independent
building blocks in a network architecture, different layers need to have their own addressingscheme."
8187,"We have now seen three types of addresses: host names for the application layer, IPaddresses for the network layer, and MAC addresses for the link layer.Figure 6.17 Each interface on a LAN has an IP address and a MAC address
notation and MAC addresses are shown in hexadecimal notation."
8188,"For the purposes of this discussion,
we will assume in this section that the switch broadcasts all frames; that is, whenever a switch receives
a frame on one interface, it forwards the frame on all of its other interfaces."
8189,"In the next section, we willprovide a more accurate explanation of how switches operate."
8190,"Now suppose that the host with IP address 222.222.222.220 wants to send an IP datagram to host
222.222.222.222."
8191,"In this example, both the source and destination are in the same subnet, in the
addressing sense of Section 4.3.3. To send a datagram, the source must give its adapter not only the
IP datagram but also the MAC address for destination 222.222.222.222."
8192,"The sending adapter will then
construct a link-layer frame containing the destination’s MAC address and send the frame into the LAN."
8193,"The important question addressed in this section is, How does the sending host determine the MAC
address for the destination host with IP address 222.222.222.222?"
8194,"As you might have guessed, it usesARP."
8195,"An ARP module in the sending host takes any IP address on the same LAN as input, and returnsthe corresponding MAC address."
8196,"In the example at hand, sending host 222.222.222.220 provides itsARP module the IP address 222.222.222.222, and the ARP module returns the corresponding MACaddress 49-BD-D2-C7-56-2A."
8197,So we see that ARP resolves an IP address to a MAC address.
8198,"In many ways it is analogous to DNS
(studied in Section 2.5), which resolves host names to IP addresses."
8199,"However, one important difference
between the two resolvers is that DNS resolves host names for hosts anywhere in the Internet, whereas
ARP resolves IP addresses only for hosts and router interfaces on the same subnet."
8200,"If a node inCalifornia were to try to use ARP to resolve the IP address for a node in Mississippi, ARP would returnwith an error.Figure 6.18 A possible ARP table in 222.222.222.220
Now that we have explained what ARP does, let’s look at how it works."
8201,"Each host and router has an
ARP table  in its memory, which contains mappings of IP addresses to MAC addresses."
8202,"Figure 6.18
shows what an ARP table in host 222.222.222.220 might look like."
8203,"The ARP table also contains a time-
to-live (TTL) value, which indicates when each mapping will be deleted from the table."
8204,"Note that a tabledoes not necessarily contain an entry for every host and router on the subnet; some may have neverbeen entered into the table, and others may have expired."
8205,A typical expiration time for an entry is 20minutes from when an entry is placed in an ARP table.
8206,"Now suppose that host 222.222.222.220 wants to send a datagram that is IP-addressed to another host
or router on that subnet."
8207,"The sending host needs to obtain the MAC address of the destination given the
IP address."
8208,This task is easy if the sender’s ARP table has an entry for the destination node.
8209,"But what if
the ARP table doesn’t currently have an entry for the destination?"
8210,"In particular, suppose222.222.222.220 wants to send a datagram to 222.222.222.222."
8211,"In this case, the sender uses the ARPprotocol to resolve the address."
8212,"First, the sender constructs a special packet called an ARP packet ."
8213,"An
ARP packet has several fields, including the sending and receiving IP and MAC addresses."
8214,Both ARPquery and response packets have the same format.
8215,The purpose of the ARP query packet is to query allthe other hosts and routers on the subnet to determine the MAC address corresponding to the IPaddress that is being resolved.
8216,"Returning to our example, 222.222.222.220 passes an ARP query packet to the adapter along with an
indication that the adapter should send the packet to the MAC broadcast address, namely, FF-FF-FF-FF-FF-FF."
8217,"The adapter encapsulates the ARP packet in a link-layer frame, uses the broadcast addressfor the frame’s destination address, and transmits the frame into the subnet."
8218,"Recalling our socialsecurity ­number/postal address analogy, an ARP query is equivalent to a person shouting out in acrowded room of cubicles in some company (say, AnyCorp): “What is the social security number of theperson whose postal address is Cubicle 13, Room 112, AnyCorp, Palo Alto, California?” The framecontaining the ARP query is received by all the other adapters on the subnet, and (because of the
broadcast address) each adapter passes the ARP packet within the frame up to its ARP module."
8219,"Each
of these ARP modules checks to see if its IP address matches the destination IP address in the ARPpacket."
8220,The one with a match sends back to the querying host a response ARP packet with the desiredmapping.
8221,"The querying host 222.222.222.220 can then update its ARP table and send its IP datagram,encapsulated in a link-layer frame whose destination MAC is that of the host or router responding to the
earlier ARP query.There are a couple of interesting things to note about the ARP protocol."
8222,"First, the query ARP message
is sent within a broadcast frame, whereas the response ARP message is sent within a standard frame.Before reading on you should think about why this is so."
8223,"Second, ARP is plug-and-play; that is, an ARPtable gets built ­automatically—it doesn’t have to be configured by a system administrator."
8224,"And if a host
becomes disconnected from the subnet, its entry is eventually deleted from the other ARP tables in the
subnet."
8225,Students often wonder if ARP is a link-layer protocol or a network-layer protocol.
8226,"As we’ve seen, an
ARP packet is encapsulated within a link-layer frame and thus lies architecturally above the link layer.However, an ARP packet has fields containing link-layer addresses and thus is arguably a link-layerprotocol, but it also contains network-layer addresses and thus is also arguably a network-layer protocol.In the end, ARP is probably best considered a protocol that straddles the boundary between the link and
network layers—not fitting neatly into the simple layered protocol stack we studied in Chapter 1."
8227,"Such
are the complexities of real-world protocols!
Sending a Datagram off the SubnetIt should now be clear how ARP operates when a host wants to send a datagram to another host on the
same subnet."
8228,"But now let’s look at the more complicated situation when a host on a subnet wants to
send a network-layer datagram to a host off the subnet (that is, across a router onto another subnet)."
8229,"Let’s discuss this issue in the context of Figure 6.19, which shows a simple network consisting of two
subnets interconnected by a router."
8230,There are several interesting things to note about Figure 6.19.
8231,"Each host has exactly one IP address
and one adapter."
8232,"But, as discussed in Chapter 4, a router has an IP address for each of its interfaces."
8233,For each router interface there is also an ARP module (in the router) and an adapter.
8234,"Because the
router in Figure 6.19 has two interfaces, it has two IP addresses, two ARP modules, and two adapters."
8235,"Of course, each adapter in the network has its own MAC address."
8236,"Figure 6.19 Two subnets interconnected by a routerAlso note that Subnet 1 has the network address 111.111.111/24 and that Subnet 2 has the network
address 222.222.222/24."
8237,Thus all of the interfaces connected to Subnet 1 have addresses of the form111.111.111.xxx and all of the interfaces connected to Subnet 2 have addresses of the form222.222.222.xxx.
8238,Now let’s examine how a host on Subnet 1 would send a datagram to a host on Subnet 2.
8239,"Specifically,
suppose that host 111.111.111.111 wants to send an IP datagram to a host 222.222.222.222."
8240,"Thesending host passes the datagram to its adapter, as usual."
8241,But the sending host must also indicate to itsadapter an appropriate destination MAC address.
8242,What MAC address should the adapter use?
8243,"Onemight be tempted to guess that the appropriate MAC address is that of the adapter for host222.222.222.222, namely, 49-BD-D2-C7-56-2A."
8244,"This guess, however, would be wrong! If the sendingadapter were to use that MAC address, then none of the ­adapters on Subnet 1 would bother to pass
the IP datagram up to its network layer, since the frame’s destination address would not match the MAC
address of any adapter on Subnet 1."
8245,The datagram would just die and go to datagram heaven.
8246,"If we look carefully at Figure 6.19, we see that in order for a datagram to go from 111.111.111.111 to a
host on Subnet 2, the datagram must first be sent to the router interface 111.111.111.110, which is the
IP address of the first-hop router on the path to the final destination."
8247,"Thus, the appropriate MAC addressfor the frame is the address of the adapter for router interface 111.111.111.110, namely, E6-E9-00-17-BB-4B."
8248,How does the sending host acquire the MAC address for 111.111.111.110?
8249,"By using ARP, ofcourse! Once the sending adapter has this MAC address, it creates a frame (containing the datagramaddressed to 222.222.222.222) and sends the frame into Subnet 1."
8250,"The router adapter on Subnet 1
sees that the link-layer frame is addressed to it, and therefore passes the frame to the network layer of
the router."
8251,Hooray—the IP datagram has successfully been moved from source host to the router! Butwe are not finished.
8252,We still have to move the datagram from the router to the destination.
8253,The routernow has to determine the correct interface on which the datagram is to be forwarded.
8254,"As discussed in
Chapter 4, this is done by consulting a forwarding table in the router."
8255,"The forwarding table tells the
router that the datagram is to be forwarded via router interface 222.222.222.220."
8256,"This interface then
passes the datagram to its adapter, which encapsulates the datagram in a new frame and sends theframe into Subnet 2."
8257,"This time, the destination MAC address of the frame is indeed the MAC address of
the ultimate destination."
8258,And how does the router obtain this destination MAC address?
8259,"From ARP, of
course!
ARP for Ethernet is defined in RFC 826."
8260,"A nice introduction to ARP is given in the TCP/IP tutorial, RFC
1180."
8261,We’ll explore ARP in more detail in the homework problems.
8262,6.4.2 EthernetEthernet has pretty much taken over the wired LAN market.
8263,"In the 1980s and the early 1990s, Ethernet
faced many challenges from other LAN technologies, ­including token ring, FDDI, and ATM."
8264,"Some of
these other technologies succeeded in capturing a part of the LAN market for a few years."
8265,"But since its
invention in the mid-1970s, Ethernet has continued to evolve and grow and has held on to its dominantposition."
8266,"Today, Ethernet is by far the most prevalent wired LAN technology, and it is likely to remain sofor the foreseeable future."
8267,"One might say that Ethernet has been to local area networking what the
Internet has been to global networking."
8268,There are many reasons for Ethernet’s success.
8269,"First, Ethernet was the first widely deployed high-speed
LAN."
8270,"Because it was deployed early, network administrators became intimately familiar with Ethernet—its wonders and its quirks—and were reluctant to switch over to other LAN technologies when theycame on the scene."
8271,"Second, token ring, FDDI, and ATM were more complex and expensive thanEthernet, which further discouraged network administrators from switching over."
8272,"Third, the mostcompelling reason to switch to another LAN technology (such as FDDI or ATM) was usually the higher
data rate of the new technology; however, Ethernet always fought back, producing versions that
operated at equal data rates or higher."
8273,"Switched Ethernet was also introduced in the early 1990s, whichfurther increased its effective data rates."
8274,"Finally, because Ethernet has been so popular, Ethernethardware (in particular, adapters and switches) has become a commodity and is remarkably cheap."
8275,The original Ethernet LAN was invented in the mid-1970s by Bob Metcalfe and David Boggs.
8276,"The
original Ethernet LAN used a coaxial bus to interconnect the nodes."
8277,Bus topologies for Ethernet actuallypersisted throughout the 1980s and into the mid-1990s.
8278,"Ethernet with a bus topology is a broadcast LAN
—all transmitted frames travel to and are processed by all adapters connected to the bus."
8279,"Recall that we
covered Ethernet’s CSMA/CD multiple access protocol with binary exponential backoff in Section 6.3.2.
By the late 1990s, most companies and universities had replaced their LANs with Ethernet installations
using a hub-based star topology."
8280,In such an installation the hosts (and routers) are directly connected toa hub with twisted-pair copper wire.
8281,"A hub is a physical-layer device that acts on individual bits rather
than frames."
8282,"When a bit, representing a zero or a one, arrives from one interface, the hub simply re-creates the bit, boosts its energy strength, and transmits the bit onto all the other interfaces."
8283,"Thus,Ethernet with a hub-based star topology is also a broadcast LAN—whenever a hub receives a bit from
one of its interfaces, it sends a copy out on all of its other interfaces."
8284,"In particular, if a hub receives
frames from two different interfaces at the same time, a collision occurs and the nodes that created theframes must retransmit."
8285,In the early 2000s Ethernet experienced yet another major evolutionary change.
8286,"Ethernet installations
continued to use a star topology, but the hub at the center was replaced with a switch."
8287,"We’ll be
examining switched Ethernet in depth later in this chapter."
8288,"For now, we only mention that a switch is notonly “collision-less” but is also a bona-fide store-and-forward packet switch; but unlike routers, whichoperate up through layer 3, a switch operates only up through layer 2.Figure 6.20 Ethernet frame structure
Ethernet Frame Structure
We can learn a lot about Ethernet by examining the Ethernet frame, which is shown in Figure 6.20."
8289,"To
give this discussion about Ethernet frames a tangible context, let’s consider sending an IP datagram
from one host to another host, with both hosts on the same Ethernet LAN (for example, the Ethernet
LAN in Figure 6.17.) (Although the payload of our Ethernet frame is an IP datagram, we note that an
Ethernet frame can carry other network-layer packets as well.) Let the sending adapter, adapter A, have
the MAC address AA-AA-AA-AA-AA-AA and the receiving adapter, adapter B, have the MAC addressBB-BB-BB-BB-BB-BB."
8290,The sending adapter encapsulates the IP datagram within an Ethernet frame andpasses the frame to the physical layer.
8291,"The receiving adapter receives the frame from the physical layer,
extracts the IP datagram, and passes the IP datagram to the network layer."
8292,"In this context, let’s now
examine the six fields of the Ethernet frame, as shown in Figure 6.20."
8293,"Data field (46 to 1,500 bytes)."
8294,This field carries the IP datagram.
8295,"The maximum transmission unit
(MTU) of Ethernet is 1,500 bytes."
8296,"This means that if the IP datagram exceeds 1,500 bytes, then the
host has to fragment the datagram, as discussed in Section 4.3.2. The minimum size of the data
field is 46 bytes."
8297,"This means that if the IP datagram is less than 46 bytes, the data field has to be
“stuffed” to fill it out to 46 bytes."
8298,"When stuffing is used, the data passed to the network layer contains
the stuffing as well as an IP datagram."
8299,The network layer uses the length field in the IP datagramheader to remove the stuffing.
8300,Destination address (6 bytes).
8301,"This field contains the MAC address of the destination adapter, BB-
BB-BB-BB-BB-BB."
8302,"When adapter B receives an Ethernet frame whose destination address is either
BB-BB-BB-BB-BB-BB or the MAC broadcast address, it passes the contents of the frame’s data fieldto the network layer; if it receives a frame with any other MAC address, it discards the frame."
8303,Source address (6 bytes).
8304,"This field contains the MAC address of the adapter that transmits the
frame onto the LAN, in this example, AA-AA-AA-AA-AA-AA."
8305,Type field (2 bytes).
8306, The type field permits Ethernet to multiplex network-layer protocols.
8307,"To
understand this, we need to keep in mind that hosts can use other network-layer protocols besides
IP."
8308,"In fact, a given host may support multiple network-layer protocols using different protocols fordifferent applications."
8309,"For this reason, when the Ethernet frame arrives at adapter B, adapter B
needs to know to which network-layer protocol it should pass (that is, demultiplex) the contents ofthe data field."
8310,"IP and other network-layer protocols (for example, Novell IPX or AppleTalk) each havetheir own, standardized type number."
8311,"Furthermore, the ARP protocol (discussed in the previoussection) has its own type number, and if the arriving frame contains an ARP packet (i.e., has a type
field of 0806 hexadecimal), the ARP packet will be demultiplexed up to the ARP protocol."
8312,"Note that
the type field is analogous to the protocol field in the network-layer datagram and the port-numberfields in the transport-layer segment; all of these fields serve to glue a protocol at one layer to aprotocol at the layer above."
8313,Cyclic redundancy check (CRC) (4 bytes).
8314," As discussed in Section 6.2.3, the purpose of the CRC
field is to allow the receiving adapter, adapter B, to detect bit errors in the frame."
8315,Preamble (8 bytes).
8316,The Ethernet frame begins with an 8-byte preamble field.
8317,"Each of the first 7
bytes of the preamble has a value of 10101010; the last byte is 10101011."
8318,"The first 7 bytes of the
preamble serve to “wake up” the receiving adapters and to synchronize their clocks to that of thesender’s clock."
8319,Why should the clocks be out of synchronization?
8320,"Keep in mind that adapter A aims
to transmit the frame at 10 Mbps, 100 Mbps, or 1 Gbps, depending on the type of Ethernet LAN."
8321,"However, because nothing is absolutely perfect, adapter A will not transmit the frame at exactly the
target rate; there will always be some drift from the target rate, a drift which is not known a priori  by
the other adapters on the LAN."
8322,"A receiving adapter can lock onto adapter A’s clock simply by locking
onto the bits in the first 7 bytes of the preamble."
8323,The last 2 bits of the eighth byte of the preamble(the first two consecutive 1s) alert adapter B that the “important stuff” is about to come.
8324,All of the Ethernet technologies provide connectionless service to the network layer.
8325,"That is, whenadapter A wants to send a datagram to adapter B, adapter A encapsulates the datagram in an Ethernet
frame and sends the frame into the LAN, without first handshaking with adapter B."
8326,"This layer-2
connectionless service is analogous to IP’s layer-3 datagram service and UDP’s layer-4 connectionlessservice."
8327,Ethernet technologies provide an unreliable service to the network layer.
8328,"Specifically, when adapter B
receives a frame from adapter A, it runs the frame through a CRC check, but neither sends anacknowledgment when a frame passes the CRC check nor sends a negative acknowledgment when aframe fails the CRC check."
8329,"When a frame fails the CRC check, adapter B simply discards the frame."
8330,"Thus, adapter A has no idea whether its transmitted frame reached adapter B and passed the CRC
check."
8331,This lack of reliable transport (at the link layer) helps to make Ethernet simple and cheap.
8332,But italso means that the stream of datagrams passed to the network layer can have gaps.
8333,"CASE HISTORY
BOB METCALFE AND ETHERNET
As a PhD student at Harvard University in the early 1970s, Bob Metcalfe worked on the
ARPAnet at MIT."
8334,"During his studies, he also became exposed to Abramson’s work on ALOHAand random access protocols."
8335,"After completing his PhD and just before beginning a job at Xerox
Palo Alto Research Center (Xerox PARC), he visited Abramson and his University of Hawaii
colleagues for three months, getting a firsthand look at ALOHAnet."
8336,"At Xerox PARC, Metcalfebecame exposed to Alto computers, which in many ways were the forerunners of the personal
computers of the 1980s."
8337,"Metcalfe saw the need to network these computers in an inexpensive
manner."
8338,"So armed with his knowledge about ARPAnet, ALOHAnet, and random accessprotocols, Metcalfe—along with colleague David Boggs—invented Ethernet."
8339,"Metcalfe and Boggs’s original Ethernet ran at 2.94 Mbps and linked up to 256 hosts separated
by up to one mile."
8340,"Metcalfe and Boggs succeeded at getting most of the researchers at Xerox
PARC to communicate through their Alto computers."
8341,"Metcalfe then forged an alliance betweenXerox, Digital, and Intel to establish Ethernet as a 10 Mbps Ethernet standard, ratified by theIEEE."
8342,Xerox did not show much interest in commercializing Ethernet.
8343,"In 1979, Metcalfe formedhis own company, 3Com, which developed and commercialized networking technology,including Ethernet technology."
8344,"In particular, 3Com developed and marketed Ethernet cards inthe early 1980s for the immensely popular IBM PCs.
If there are gaps due to discarded Ethernet frames, does the application at Host B see gaps as well?"
8345,"As
we learned in Chapter 3, this depends on whether the application is using UDP or TCP."
8346,"If the
application is using UDP, then the application in Host B will indeed see gaps in the data."
8347,"On the other
hand, if the application is using TCP, then TCP in Host B will not acknowledge the data contained indiscarded frames, causing TCP in Host A to retransmit."
8348,"Note that when TCP retransmits data, the datawill eventually return to the Ethernet adapter at which it was discarded."
8349,"Thus, in this sense, Ethernetdoes retransmit data, although Ethernet is unaware of whether it is transmitting a brand-new datagramwith brand-new data, or a datagram that contains data that has already been transmitted at least once."
8350,"Ethernet Technologies
In our discussion above, we’ve referred to Ethernet as if it were a single protocol standard."
8351,"But in fact,
Ethernet comes in many different flavors, with somewhat bewildering acronyms such as 10BASE-T,
10BASE-2, 100BASE-T, 1000BASE-LX, 10GBASE-T and 40GBASE-T."
8352,"These and many other Ethernet
technologies have been standardized over the years by the IEEE 802.3 CSMA/CD (Ethernet) working
group [IEEE 802.3 2012] ."
8353,"While these acronyms may appear bewildering, there is actually considerable
order here."
8354,"The first part of the acronym refers to the speed of the standard: 10, 100, 1000, or 10G, for
10 Megabit (per second), 100 Megabit, Gigabit, 10 Gigabit and 40 Gigibit Ethernet, respectively."
8355,"“BASE”
refers to baseband Ethernet, meaning that the physical media only carries Ethernet traffic; almost all of
the 802.3 standards are for baseband Ethernet."
8356,"The final part of the acronym refers to the physical
media itself; Ethernet is both a link-layer and a physical-layer specification and is carried over a variety
of physical media including coaxial cable, copper wire, and fiber."
8357,"Generally, a “T” refers to twisted-pair
copper wires."
8358,"Historically, an Ethernet was initially conceived of as a segment of coaxial cable."
8359,"The early 10BASE-2
and 10BASE-5 standards specify 10 Mbps Ethernet over two types of coaxial cable, each limited inlength to 500 meters."
8360,"Longer runs could be obtained by using a repeater —a physical-layer device that
receives a signal on the input side, and regenerates the signal on the output side."
8361,"A coaxial cable
corresponds nicely to our view of Ethernet as a broadcast medium—all frames transmitted by oneinterface are received at other interfaces, and Ethernet’s CDMA/CD protocol nicely solves the multiple
access problem."
8362,"Nodes simply attach to the cable, and voila, we have a local area network!
Ethernet has passed through a series of evolutionary steps over the years, and today’s Ethernet is very
different from the original bus-topology designs using coaxial cable."
8363,"In most installations today, nodesare connected to a switch via point-to-point segments made of twisted-pair copper wires or fiber-optic
cables, as shown in Figures 6.15–6.17."
8364,"In the mid-1990s, Ethernet was standardized at 100 Mbps, 10 times faster than 10 Mbps Ethernet."
8365,"The
original Ethernet MAC protocol and frame format were preserved, but higher-speed physical layers were
defined for copper wire (100BASE-T) and fiber (100BASE-FX, 100BASE-SX, 100BASE-BX)."
8366,"Figure
6.21 shows these different standards and the common Ethernet MAC protocol and frame format."
8367,"100
Mbps Ethernet is limited to a 100-meter distance over twisted pair, and to
Figure 6.21 100 Mbps Ethernet standards: A common link layer, ­different physical layers
several kilometers over fiber, allowing Ethernet switches in different buildings to be connected."
8368,Gigabit Ethernet is an extension to the highly successful 10 Mbps and 100 Mbps Ethernet standards.
8369,"Offering a raw data rate of 40,000 Mbps, 40 Gigabit Ethernet maintains full compatibility with the hugeinstalled base of Ethernet equipment."
8370,"The standard for Gigabit Ethernet, referred to as IEEE 802.3z,does the following:
Uses the standard Ethernet frame format (Figure 6.20) and is backward compatible with 10BASE-T
and 100BASE-T technologies."
8371,"This allows for easy integration of Gigabit Ethernet with the existing
installed base of Ethernet equipment."
8372,Allows for point-to-point links as well as shared broadcast channels.
8373,"Point-to-point links use switches
while broadcast channels use hubs, as described earlier."
8374,"In Gigabit Ethernet jargon, hubs are called
buffered distributors ."
8375,Uses CSMA/CD for shared broadcast channels.
8376,"In order to have acceptable efficiency, themaximum distance between nodes must be severely restricted."
8377,Allows for full-duplex operation at 40 Gbps in both directions for point-to-point channels.
8378,"Initially operating over optical fiber, Gigabit Ethernet is now able to run over category 5 UTP cabling."
8379,"Let’s conclude our discussion of Ethernet technology by posing a question that may have begun
troubling you."
8380,"In the days of bus topologies and hub-based star topologies, Ethernet was clearly a
broadcast link (as defined in Section 6.3) in which frame collisions occurred when nodes transmitted at
the same time."
8381,"To deal with these collisions, the Ethernet standard included the CSMA/CD protocol,
which is particularly effective for a wired broadcast LAN spanning a small geographical region."
8382,"But if theprevalent use of Ethernet today is a switch-based star topology, using store-and-forward packetswitching, is there really a need anymore for an Ethernet MAC protocol?"
8383,"As we’ll see shortly, a switchcoordinates its transmissions and never forwards more than one frame onto the same interface at anytime."
8384,"Furthermore, modern switches are full-duplex, so that a switch and a node can each send frames
to each other at the same time without interference."
8385,"In other words, in a switch-based Ethernet LAN
there are no collisions and, therefore, there is no need for a MAC protocol!
As we’ve seen, today’s Ethernets are very different from the original Ethernet conceived by Metcalfe and
Boggs more than 30 years ago—speeds have increased by three orders of magnitude, Ethernet frames
are carried over a variety of media, switched-Ethernets have become dominant, and now even the MAC
protocol is often unnecessary! Is all of this really  still Ethernet?"
8386,"The answer, of course, is “yes, by
definition.” It is interesting to note, however, that through all of these changes, there has indeed been
one enduring constant that has remained unchanged over 30 years—Ethernet’s frame format."
8387,"Perhaps
this then is the one true and timeless centerpiece of the Ethernet standard."
8388,"6.4.3 Link-Layer Switches
Up until this point, we have been purposefully vague about what a switch actually does and how itworks."
8389,The role of the switch is to receive incoming link-layer frames and forward them onto outgoinglinks; we’ll study this forwarding function in detail in this subsection.
8390,"We’ll see that the switch itself istransparent to the hosts and routers in the subnet; that is, a host/router addresses a frame to anotherhost/router (rather than addressing the frame to the switch) and happily sends the frame into the LAN,
unaware that a switch will be receiving the frame and forwarding it."
8391,"The rate at which frames arrive to
any one of the switch’s output interfaces may temporarily exceed the link capacity of that interface."
8392,"Toaccommodate this problem, switch output interfaces have buffers, in much the same way that routeroutput interfaces have buffers for datagrams."
8393,Let’s now take a closer look at how switches operate.
8394,"Forwarding and FilteringFiltering  is the switch function that determines whether a frame should be forwarded to some interface
or should just be dropped."
8395,"Forwarding  is the switch function that determines the interfaces to which a
frame should be directed, and then moves the frame to those interfaces."
8396,"Switch filtering and forwarding
are done with a switch table."
8397,"The switch table contains entries for some, but not necessarily all, of the
hosts and routers on a LAN."
8398,"An entry in the switch table contains (1) a MAC address, (2) the switchinterface that leads toward that MAC address, and (3) the time at which the entry was placed in the
table."
8399,An example switch table for the uppermost switch in Figure 6.15 is shown in Figure 6.22.
8400,"This
description of frame forwarding may sound similar to our discussion of datagram forwarding
Figure 6.22 Portion of a switch table for the uppermost switch in Figure 6.15
in Chapter 4."
8401,"Indeed, in our discussion of generalized forwarding in Section 4.4, we learned that many
modern packet switches can be configured to forward on the basis of layer-2 destination MAC
addresses (i.e., function as a layer-2 switch) or layer-3 IP destination addresses (i.e., function as alayer-3 router)."
8402,"Nonetheless, we’ll make the important distinction that switches forward packets basedon MAC addresses rather than on IP addresses."
8403,"We will also see that a traditional (i.e., in a non-SDNcontext) switch table is constructed in a very different manner from a router’s forwarding table."
8404,"To understand how switch filtering and forwarding work, suppose a frame with destination address DD-
DD-DD-DD-DD-DD arrives at the switch on interface x."
8405,"The switch indexes its table with the MAC
address DD-DD-DD-DD-DD-DD."
8406,"There are three possible cases:
There is no entry in the table for DD-DD-DD-DD-DD-DD."
8407,"In this case, the switch forwards copies of
the frame to the output buffers preceding all interfaces except for interface x."
8408,"In other words, if there
is no entry for the destination address, the switch broadcasts the frame."
8409,"There is an entry in the table, associating DD-DD-DD-DD-DD-DD with interface x."
8410,"In this case, the
frame is coming from a LAN segment that contains adapter DD-DD-DD-DD-DD-DD."
8411,"There being noneed to forward the frame to any of the other interfaces, the switch performs the filtering function bydiscarding the frame."
8412,"There is an entry in the table, associating DD-DD-DD-DD-DD-DD with interface  In this case, the
frame needs to be forwarded to the LAN segment attached to interface y."
8413,"The switch performs its
forwarding function by putting the frame in an output buffer that precedes interface y.y≠x.Let’s walk through these rules for the uppermost switch in Figure 6.15 and its switch table in Figure
6.22."
8414,"Suppose that a frame with destination address 62-FE-F7-11-89-A3 arrives at the switch from
interface 1."
8415,"The switch examines its table and sees that the destination is on the LAN segment
connected to interface 1 (that is, Electrical Engineering)."
8416,This means that the frame has already beenbroadcast on the LAN segment that contains the destination.
8417,"The switch therefore filters (that is,
discards) the frame."
8418,Now suppose a frame with the same destination address arrives from interface 2.
8419,The switch again examines its table and sees that the destination is in the direction of interface 1; ittherefore forwards the frame to the output buffer preceding interface 1.
8420,"It should be clear from thisexample that as long as the switch table is complete and accurate, the switch forwards frames towarddestinations without any broadcasting."
8421,"In this sense, a switch is “smarter” than a hub."
8422,"But how does this switch table get configured in the first
place?"
8423,Are there link-layer equivalents to network-layer routing protocols?
8424,Or must an overworkedmanager manually configure the switch table?
8425,"Self-Learning
A switch has the wonderful property (particularly for the already-overworked network administrator) that
its table is built automatically, dynamically, and autonomously—without any intervention from a networkadministrator or from a configuration protocol."
8426,"In other words, switches are self-learning."
8427,"This capability
is accomplished as follows:
1."
8428,The switch table is initially empty.
8429,2.
8430,"For each incoming frame received on an interface, the switch stores in its table (1) the MACaddress in the frame’s source address field , (2) the interface from which the frame arrived, and
(3) the current time."
8431,In this manner the switch records in its table the LAN segment on which thesender resides.
8432,"If every host in the LAN eventually sends a frame, then every host will eventually
get recorded in the table."
8433,3.
8434,"The switch deletes an address in the table if no frames are received with that address as the
source address after some period of time (the aging time )."
8435,"In this manner, if a PC is replaced by
another PC (with a different adapter), the MAC address of the original PC will eventually be
purged from the switch table."
8436,"Let’s walk through the self-learning property for the uppermost switch in Figure 6.15 and its
corresponding switch table in Figure 6.22."
8437,"Suppose at time 9:39 a frame with source address 01-12-23-
34-45-56 arrives from interface 2."
8438,Suppose that this address is not in the switch table.
8439,"Then the switch
adds a new entry to the table, as shown in Figure 6.23."
8440,"Continuing with this same example, suppose that the aging time for this switch is 60 minutes, and no
frames with source address 62-FE-F7-11-89-A3 arrive to the switch between 9:32 and 10:32."
8441,"Then attime 10:32, the switch removes this address from its table."
8442,"Figure 6.23 Switch learns about the location of an adapter with address 01-12-23-34-45-56
Switches are plug-and-play devices  because they require no intervention from a network administrator
or user."
8443,"A network administrator wanting to install a switch need do nothing more than connect the LAN
segments to the switch interfaces."
8444,The administrator need not configure the switch tables at the time ofinstallation or when a host is removed from one of the LAN segments.
8445,"Switches are also full-duplex,meaning any switch interface can send and receive at the same time."
8446,"Properties of Link-Layer Switching
Having described the basic operation of a link-layer switch, let’s now consider their features and
properties."
8447,"We can identify several advantages of using switches, rather than broadcast links such as
buses or hub-based star topologies:
Elimination of collisions."
8448," In a LAN built from switches (and without hubs), there is no wasted
bandwidth due to collisions! The switches buffer frames and never transmit more than one frame on
a segment at any one time."
8449,"As with a router, the maximum aggregate throughput of a switch is thesum of all the switch interface rates."
8450,"Thus, switches provide a significant performance improvement
over LANs with broadcast links."
8451,Heterogeneous links.
8452,"Because a switch isolates one link from another, the different links in the
LAN can operate at different speeds and can run over different media."
8453,"For example, the uppermost
switch in Figure 6.15 might have three1 Gbps 1000BASE-T copper links, two 100 Mbps 100BASE-
FX fiber links, and one 100BASE-T copper link."
8454,"Thus, a switch is ideal for mixing legacy equipment
with new equipment."
8455,Management.
8456,"In addition to providing enhanced security (see sidebar on Focus on Security), a
switch also eases network management."
8457,"For example, if an adapter malfunctions and continually
sends Ethernet frames (called a jabbering adapter), a switch can detect the problem and internallydisconnect the malfunctioning adapter."
8458,"With this feature, the network administrator need not get out
of bed and drive back to work in order to correct the problem."
8459,"Similarly, a cable cut disconnects only
that host that was using the cut cable to connect to the switch."
8460,"In the days of coaxial cable, many anetwork manager spent hours “walking the line” (or more accurately, “crawling the floor”) to find the
cable break that brought down the entire network."
8461,"Switches also gather statistics on bandwidth
usage, collision rates, and traffic types, and make this information available to the network manager.This information can be used to debug and correct problems, and to plan how the LAN shouldevolve in the future."
8462,"Researchers are exploring adding yet more management functionality into
Ethernet LANs in prototype deployments [Casado 2007 ; Koponen 2011]."
8463,"FOCUS ON SECURITY
SNIFFING A SWITCHED LAN: SWITCH POISONING
When a host is connected to a switch, it typically only receives frames that are intended for it."
8464,"For example, consider a switched LAN in Figure 6.17."
8465,"When host A sends a frame to host B,
and there is an entry for host B in the switch table, then the switch will forward the frame only to
host B."
8466,"If host C happens to be running a sniffer, host C will not be able to sniff this A-to-B
frame."
8467,"Thus, in a switched-LAN environment (in contrast to a broadcast link environment suchas 802.11 LANs or hub–based Ethernet LANs), it is more difficult for an attacker to sniff frames."
8468,"However , because the switch broadcasts frames that have destination addresses that are not in
the switch table, the sniffer at C can still sniff some frames that are not intended for C."
8469,"Furthermore, a sniffer will be able sniff all Ethernet broadcast frames with broadcast destinationaddress FF–FF–FF–FF–FF–FF."
8470,"A well-known attack against a switch, called switch poisoning ,
is to send tons of packets to the switch with many different bogus source MAC addresses,thereby filling the switch table with bogus entries and leaving no room for the MAC addresses ofthe legitimate hosts."
8471,"This causes the switch to broadcast most frames, which can then be picked
up by the sniffer [Skoudis 2006]."
8472,"As this attack is rather involved even for a sophisticated
attacker, switches are significantly less vulnerable to sniffing than are hubs and wireless LANs.
Switches Versus Routers
As we learned in Chapter 4, routers are store-and-forward packet switches that forward packets using
network-layer addresses."
8473,"Although a switch is also a store-and-forward packet switch, it is
fundamentally different from a router in that it forwards packets using MAC addresses."
8474,"Whereas a routeris a layer-3 packet switch, a switch is a layer-2 packet switch."
8475,"Recall, however, that we learned in
Section 4.4 that modern switches using the “match plus action” operation can be used to forward a
layer-2 frame based on the frame's destination MAC address, as well as a layer-3 datagram using the
datagram's destination IP address."
8476,"Indeed, we saw that switches using the OpenFlow standard canperform generalized packet forwarding based on any of eleven different frame, datagram, and transport-layer header fields.Even though switches and routers are fundamentally different, network administrators must often
choose between them when installing an interconnection device."
8477,"For example, for the network in Figure
6.15, the network administrator could just as easily have used a router instead of a switch to connect the
department LANs, servers, and internet gateway router."
8478,"Indeed, a router would permit interdepartmental
communication without creating collisions."
8479,"Given that both switches and routers are candidates for
interconnection devices, what are the pros and cons of the two approaches?"
8480,"Figure 6.24 Packet processing in switches, routers, and hosts
First consider the pros and cons of switches."
8481,"As mentioned above, switches are plug-and-play, aproperty that is cherished by all the overworked network administrators of the world."
8482,"Switches can also
have relatively high filtering and forwarding rates—as shown in Figure 6.24, switches have to process
frames only up through layer 2, whereas routers have to process datagrams up through layer 3."
8483,"On the
other hand, to prevent the cycling of broadcast frames, the active topology of a switched network isrestricted to a spanning tree."
8484,"Also, a large switched network would require large ARP tables in the hostsand routers and would generate substantial ARP traffic and processing."
8485,"Furthermore, switches aresusceptible to broadcast storms—if one host goes haywire and transmits an endless stream of Ethernetbroadcast frames, the switches will forward all of these frames, causing the entire network to collapse."
8486,Now consider the pros and cons of routers.
8487,"Because network addressing is often hierarchical (and not
flat, as is MAC addressing), packets do not normally cycle through routers even when the network hasredundant paths."
8488,"(However, packets can cycle when router tables are misconfigured; but as we learned
in Chapter 4, IP uses a special datagram header field to limit the cycling.) Thus, packets are not
restricted to a spanning tree and can use the best path between source and destination."
8489,"Because
routers do not have the spanning tree restriction, they have allowed the Internet to be built with a richtopology that includes, for example, multiple active links between Europe and North America."
8490,Anotherfeature of routers is that they provide firewall protection against layer-2 broadcast storms.
8491,"Perhaps the
most significant drawback of routers, though, is that they are not plug-and-play—they and the hosts that
connect to them need their IP addresses to be configured."
8492,"Also, routers often have a larger per-packetprocessing time than switches, because they have to process up through the layer-3 fields."
8493,"Finally, thereare two different ways to pronounce the word router, either as “rootor” or as “rowter,” and people waste
a lot of time arguing over the proper pronunciation [Perlman 1999] ."
8494,"Given that both switches and routers have their pros and cons (as summarized in Table 6.1), when
should an institutional network (for example, a university campus
Table 6.1 Comparison of the typical features of popular interconnection devices
Hubs Routers Switches
Traffic isolation No Yes Yes
Plug and play Yes No Yes
Optimal routing No Yes No
network or a corporate campus network) use switches, and when should it use routers?"
8495,"Typically, small
networks consisting of a few hundred hosts have a few LAN segments."
8496,"Switches suffice for these smallnetworks, as they localize traffic and increase aggregate throughput without requiring any configuration
of IP addresses."
8497,"But larger networks consisting of thousands of hosts typically include routers within the
network (in addition to switches)."
8498,"The routers provide a more robust isolation of traffic, control broadcaststorms, and use more “intelligent” routes among the hosts in the network."
8499,"For more discussion of the pros and cons of switched versus routed networks, as well as a discussion of
how switched LAN technology can be extended to accommodate two orders of magnitude more hosts
than today’s Ethernets, see [Meyers 2004 ; Kim 2008] ."
8500,"6.4.4 Virtual Local Area Networks (VLANs)
In our earlier discussion of Figure 6.15, we noted that modern institutional LANs are often configured
hierarchically, with each workgroup (department) having its own switched LAN connected to the
switched LANs of other groups via a switch hierarchy."
8501,"While such a configuration works well in an idealworld, the real world is often far from ideal."
8502,"Three drawbacks can be identified in the configuration in
Figure 6.15:
Lack of traffic isolation."
8503," Although the hierarchy localizes group traffic to within a single switch,
broadcast traffic (e.g., frames carrying ARP and DHCP messages or frames whose destination has
not yet been learned by a self-learning switch) must still traverse the entire institutional network.Limiting the scope of such broadcast traffic would improve LAN performance."
8504,"Perhaps more
importantly, it also may be desirable to limit LAN broadcast traffic for security/privacy reasons."
8505,"For
example, if one group contains the company’s executive management team and another groupcontains disgruntled employees running Wireshark packet sniffers, the network manager may wellprefer that the executives’ traffic never even reaches employee hosts."
8506,"This type of isolation could be
provided by replacing the center switch in Figure 6.15 with a router."
8507,"We’ll see shortly that this
isolation also can be achieved via a switched (layer 2) solution."
8508,Inefficient use of switches.
8509," If instead of three groups, the institution had 10 groups, then 10 first-
level switches would be required."
8510,"If each group were small, say less than 10 people, then a single
96-port switch would likely be large enough to accommodate everyone, but this single switch wouldnot provide traffic isolation."
8511,Managing users.
8512,"If an employee moves between groups, the physical cabling must be changed toconnect the employee to a different switch in Figure 6.15."
8513,"Employees belonging to two groups make
the problem even harder."
8514,"Fortunately, each of these difficulties can be handled by a switch that supports virtual local area
networks (VLANs) ."
8515,"As the name suggests, a switch that supports VLANs allows multiple virtual local
area networks to be defined over a single physical  local area network infrastructure."
8516,"Hosts within a
VLAN communicate with each other as if they (and no other hosts) were connected to the switch."
8517,"In aport-based VLAN, the switch’s ports (interfaces) are divided into groups by the network manager."
8518,"Eachgroup constitutes a VLAN, with the ports in each VLAN forming a broadcast domain (i.e., broadcast
traffic from one port can only reach other ports in the group)."
8519,"Figure 6.25 shows a single switch with 16
ports."
8520,"Ports 2 to 8 belong to the EE VLAN, while ports 9 to 15 belong to the CS VLAN (ports 1 and 16
are unassigned)."
8521,"This VLAN solves all of the difficulties noted above—EE and CS VLAN frames are
isolated from each other, the two switches in Figure 6.15 have been replaced by a single switch, and if
the user at switch port 8 joins the CS Department, the network operator simply reconfigures the VLAN
software so that port 8 is now associated with the CS VLAN."
8522,"One can easily imagine how the VLANswitch is configured and operates—the network manager declares a port to belong
Figure 6.25 A single switch with two configured VLANsto a given VLAN (with undeclared ports belonging to a default VLAN) using switch management
software, a table of port-to-VLAN mappings is maintained within the switch; and switch hardware onlydelivers frames between ports belonging to the same VLAN."
8523,"But by completely isolating the two VLANs, we have introduced a new difficulty! How can traffic from the
EE Department be sent to the CS Department?"
8524,"One way to handle this would be to connect a VLAN
switch port (e.g., port 1 in Figure 6.25) to an external router and configure that port to belong both the
EE and CS VLANs. In this case, even though the EE and CS departments share the same physical
switch, the logical configuration would look as if the EE and CS departments had separate switchesconnected via a router."
8525,An IP datagram going from the EE to the CS department would first cross theEE VLAN to reach the router and then be forwarded by the router back over the CS VLAN to the CShost.
8526,"Fortunately, switch vendors make such configurations easy for the network manager by building a
single device that contains both a VLAN switch and a router, so a separate external router is not
needed."
8527,A homework problem at the end of the chapter explores this scenario in more detail.
8528,"Returning again to Figure 6.15, let’s now suppose that rather than having a separate Computer
Engineering department, some EE and CS faculty are housed in a separate building, where (of course!)
they need network access, and (of course!) they’d like to be part of their department’s VLAN."
8529,"Figure
6.26 shows a second 8-port switch, where the switch ports have been defined as belonging to the EE or
the CS VLAN, as needed."
8530,But how should these two switches be interconnected?
8531,"One easy solution
would be to define a port belonging to the CS VLAN on each switch (similarly for the EE VLAN) and to
connect these ports to each other, as shown in Figure 6.26(a)."
8532,"This solution doesn’t scale, however,
since N VLANS would require N ports on each switch simply to interconnect the two switches."
8533,A more scalable approach to interconnecting VLAN switches is known as VLAN trunking .
8534,"In the VLAN
trunking approach shown in Figure 6.26(b), a special port on each switch (port 16 on the left switch and
port 1 on the right switch) is configured as a trunk port to interconnect the two VLAN switches."
8535,"The trunk
port belongs to all VLANs, and frames sent to any VLAN are forwarded over the trunk link to the otherswitch."
8536,But this raises yet another question: How does a switch know that a frame arriving on a trunkport belongs to a particular VLAN?
8537,"The IEEE has defined an extended Ethernet frame format, 802.1Q,
for frames crossing a VLAN trunk."
8538,"As shown in Figure 6.27, the 802.1Q frame consists of the standard
Ethernet frame with a four-byte VLAN tag added into the header that carries the identity of the VLAN to
which the frame belongs."
8539,"The VLAN tag is added into a frame by the switch at the sending side of aVLAN trunk, parsed, and removed by the switch at the receiving side of the trunk."
8540,"The VLAN tag itselfconsists of a 2-byte Tag Protocol Identifier (TPID) field (with a fixed hexadecimal value of 81-00), a 2-byte Tag Control Information field that contains a 12-bit VLAN identifier field, and a 3-bit priority field thatis similar in intent to the IP datagram TOS field.Figure 6.26 Connecting two VLAN switches with two VLANs: (a) two cables (b) trunked
Figure 6.27 Original Ethernet frame (top), 802.1Q-tagged Ethernet VLAN frame (below)
In this discussion, we’ve only briefly touched on VLANs and have focused on port-based VLANs. We
should also mention that VLANs can be defined in several other ways."
8541,"In MAC-based VLANs, the
network manager specifies the set of MAC addresses that belong to each VLAN; whenever a deviceattaches to a port, the port is connected into the appropriate VLAN based on the MAC address of thedevice."
8542,"VLANs can also be defined based on network-layer protocols (e.g., IPv4, IPv6, or Appletalk) andother criteria."
8543,"It is also possible for VLANs to be extended across IP routers, allowing islands of LANs to
be connected together to form a single VLAN that could span the globe [Yu 2011]."
8544,"See the 802.1Q
standard [IEEE 802.1q 2005] for more details.6.5 Link Virtualization: A Network as a Link Layer
Because this chapter concerns link-layer protocols, and given that we’re now nearing the chapter’s end,
let’s reflect on how our understanding of the term link has evolved."
8545,"We began this chapter by viewing
the link as a physical wire connecting two communicating hosts."
8546,"In studying multiple access protocols,
we saw that multiple hosts could be connected by a shared wire and that the “wire” connecting the hostscould be radio spectra or other media."
8547,"This led us to consider the link a bit more abstractly as a channel,
rather than as a wire."
8548,"In our study of Ethernet LANs (Figure 6.15) we saw that the interconnecting
media could actually be a rather complex switched infrastructure."
8549,"Throughout this evolution, however,
the hosts themselves maintained the view that the interconnecting medium was simply a link-layerchannel connecting two or more hosts."
8550,"We saw, for example, that an Ethernet host can be blissfully
unaware of whether it is connected to other LAN hosts by a single short LAN segment ( Figure 6.17) or
by a geographically dispersed switched LAN ( Figure 6.15) or by a VLAN (Figure 6.26)."
8551,"In the case of a dialup modem connection between two hosts, the link connecting the two hosts is
actually the telephone network—a logically separate, global telecommunications network with its own
switches, links, and protocol stacks for data transfer and signaling."
8552,"From the Internet link-layer point ofview, however, the dial-up connection through the telephone network is viewed as a simple “wire.” Inthis sense, the Internet virtualizes the telephone network, viewing the telephone network as a link-layertechnology providing link-layer connectivity between two Internet hosts."
8553,"You may recall from our
discussion of overlay networks in Chapter 2 that an overlay network similarly views the Internet as a
means for providing connectivity between overlay nodes, seeking to overlay the Internet in the same
way that the Internet overlays the telephone network."
8554,"In this section, we’ll consider Multiprotocol Label Switching (MPLS) networks."
8555,"Unlike the circuit-switched
telephone network, MPLS is a packet-switched, virtual-circuit network in its own right."
8556,"It has its own
packet formats and forwarding behaviors."
8557,"Thus, from a pedagogical viewpoint, a discussion of MPLS fitswell into a study of either the network layer or the link layer."
8558,"From an Internet viewpoint, however, wecan consider MPLS, like the telephone network and switched- ­Ethernets, as a link-layer technology that
serves to interconnect IP devices."
8559,"Thus, we’ll consider MPLS in our discussion of the link layer."
8560,"Frame-relay and ATM networks can also be used to interconnect IP devices, though they represent a slightly
older (but still deployed) technology and will not be covered here; see the very readable book [Goralski
1999]  for details."
8561,"Our treatment of MPLS will be necessarily brief, as entire books could be (and have
been) written on these networks."
8562,We recommend [Davie 2000]  for details on MPLS.
8563,"We’ll focus here
primarily on how MPLS ­servers interconnect to IP devices, although we’ll dive a bit deeper into the
underlying technologies as well.6.5.1 Multiprotocol Label Switching (MPLS)
Multiprotocol Label Switching (MPLS) evolved from a number of industry efforts in the mid-to-late 1990s
to improve the forwarding speed of IP routers by adopting a key concept from the world of virtual-circuitnetworks: a fixed-length label."
8564,"The goal was not to abandon the destination-based IP datagram-forwarding infrastructure for one based on fixed-length labels and virtual circuits, but to augment it byselectively labeling datagrams and allowing routers to forward datagrams based on fixed-length labels
(rather than destination IP addresses) when possible."
8565,"Importantly, these techniques work hand-in-hand
with IP, using IP addressing and routing."
8566,"The IETF unified these efforts in the MPLS protocol [RFC
3031 , RFC 3032] , effectively blending VC techniques into a routed datagram network."
8567,Let’s begin our study of MPLS by considering the format of a link-layer frame that is handled by anMPLS-capable router.
8568,"Figure 6.28 shows that a link-layer frame transmitted between MPLS-capable
devices has a small MPLS header added between the layer-2 (e.g., Ethernet) header and layer-3 (i.e.,
IP) header."
8569,"RFC 3032 defines the format of the MPLS header for such links; headers are defined for
ATM and frame-relayed networks as well in other RFCs. Among the fields in the MPLS
Figure 6.28 MPLS header: Located between link- and network-layer headers
header are the label, 3 bits reserved for experimental use, a single S bit, which is used to indicate theend of a series of “stacked” MPLS headers (an advanced topic that we’ll not cover here), and a time-to-
live field."
8570,"It’s immediately evident from Figure 6.28 that an MPLS-enhanced frame can only be sent between
routers that are both MPLS capable (since a non-MPLS-capable router would be quite confused when it
found an MPLS header where it had expected to find the IP header!)."
8571,"An MPLS-capable router is often
referred to as a label-switched router, since it forwards an MPLS frame by looking up the MPLS label
in its forwarding table and then immediately passing the datagram to the appropriate output interface."
8572,"Thus, the MPLS-capable router need not extract the destination IP address and perform a lookup of the
longest prefix match in the forwarding table."
8573,"But how does a router know if its neighbor is indeed MPLS
capable, and how does a router know what label to associate with the given IP destination?"
8574,"To answerthese questions, we’ll need to take a look at the interaction among a group of MPLS-capable routers.In the example in Figure 6.29, routers R1 through R4 are MPLS capable."
8575,"R5 and R6 are standard IP
routers."
8576,"R1 has advertised to R2 and R3 that it (R1) can route to destination A, and that a received
frame with MPLS label 6 will be forwarded to destination A."
8577,"Router R3 has advertised to router R4 that itcan route to destinations A and D, and that incoming frames with MPLS labels 10 and 12, respectively,
will be switched toward those destinations."
8578,"Router R2 has also advertised to router R4 that it (R2) can
reach destination A, and that a received frame with MPLS label 8 will be switched toward A."
8579,"Note thatrouter R4 is now in the interesting position of having
Figure 6.29 MPLS-enhanced forwarding
two MPLS paths to reach A: via interface 0 with outbound MPLS label 10, and via interface 1 with an
MPLS label of 8."
8580,"The broad picture painted in Figure 6.29 is that IP devices R5, R6, A, and D are
connected together via an MPLS infrastructure (MPLS-capable routers R1, R2, R3, and R4) in much the
same way that a switched LAN or an ATM network can connect together IP devices."
8581,"And like a switched
LAN or ATM network, the MPLS-capable routers R1 through R4 do so without ever touching the IP
header of a packet ."
8582,"In our discussion above, we’ve not specified the specific protocol used to distribute labels among the
MPLS-capable routers, as the details of this signaling are well beyond the scope of this book."
8583,"We note,
however, that the IETF working group on MPLS has specified in [RFC 3468]  that an extension of the
RSVP protocol, known as RSVP-TE [RFC 3209] , will be the focus of its efforts for MPLS signaling."
8584,"We’ve also not discussed how MPLS actually computes the paths for packets among MPLS capable
routers, nor how it gathers link-state information (e.g., amount of link bandwidth unreserved by MPLS) touse in these path computations."
8585,"Existing link-state routing algorithms (e.g., OSPF) have been extended
to flood this information to MPLS-capable routers."
8586,"Interestingly, the actual path computation algorithms
are not standardized, and are currently vendor-specific."
8587,"Thus far, the emphasis of our discussion of MPLS has been on the fact that MPLS performs switching
based on labels, without needing to consider the IP address of a packet."
8588,"The true advantages of MPLS
and the reason for current interest in MPLS, however, lie not in the potential increases in switching
speeds, but rather in the new traffic management capabilities that MPLS enables."
8589,"As noted above, R4
has two MPLS paths to A."
8590,"If forwarding were performed up at the IP layer on the basis of IP address,
the IP routing protocols we studied in Chapter 5 would specify only a single, least-cost path to A."
8591,"Thus,
MPLS provides the ability to forward packets along routes that would not be possible using standard IP
routing protocols."
8592,"This is one simple form of traffic engineering  using MPLS [RFC 3346 ; RFC 3272 ;
RFC 2702 ; Xiao 2000], in which a network operator can override normal IP routing and force some of
the traffic headed toward a given destination along one path, and other traffic destined toward the same
destination along another path (whether for policy, performance, or some other reason)."
8593,It is also possible to use MPLS for many other purposes as well.
8594,"It can be used to perform fast
restoration of MPLS forwarding paths, e.g., to reroute traffic over a precomputed failover path in
response to link failure [Kar 2000 ; Huang 2002; RFC 3469] ."
8595,"Finally, we note that MPLS can, and has,
been used to implement so-called ­virtual private networks (VPNs)."
8596,"In implementing a VPN for a
customer, an ISP uses its MPLS-enabled network to connect together the customer’s various networks."
8597,"MPLS can be used to isolate both the resources and addressing used by the customer’s VPN from that
of other users crossing the ISP’s network; see [DeClercq 2002]  for details."
8598,"Our discussion of MPLS has been brief, and we encourage you to consult the references we’ve
mentioned."
8599,"We note that with so many possible uses for MPLS, it appears that it is rapidly becoming theSwiss Army knife of Internet traffic engineering!6.6 Data Center Networking
In recent years, Internet companies such as Google, Microsoft, Facebook, and ­Amazon (as well as
their counterparts in Asia and Europe) have built massive data centers, each housing tens to hundreds
of thousands of hosts, and concurrently supporting many distinct cloud applications (e.g., search, e-mail,social networking, and e-commerce)."
8600,"Each data center has its own data center network that
interconnects its hosts with each other and interconnects the data center with the Internet."
8601,"In this
section, we provide a brief introduction to data center networking for cloud applications."
8602,"The cost of a large data center is huge, exceeding $12 million per month for a 100,000 host data center
[Greenberg 2009a] ."
8603,"Of these costs, about 45 percent can be attributed to the hosts themselves (which
need to be replaced every 3–4 years); 25 percent to infrastructure, including transformers,
uninterruptable power supplies (UPS) systems, generators for long-term outages, and cooling systems;15 percent for electric utility costs for the power draw; and 15 percent for networking, including networkgear (switches, routers and load balancers), external links, and transit traffic costs."
8604,"(In these
percentages, costs for equipment are amortized so that a common cost metric is applied for one-time
purchases and ongoing expenses such as power.) While networking is not the largest cost, networking
innovation is the key to reducing overall cost and maximizing performance [Greenberg 2009a] ."
8605,"The worker bees in a data center are the hosts: They serve content (e.g., Web pages and videos), store
e-mails and documents, and collectively perform massively distributed computations (e.g., distributedindex computations for search engines)."
8606,"The hosts in data centers, called blades and resembling pizza
boxes, are generally commodity hosts that include CPU, memory, and disk storage."
8607,"The hosts arestacked in racks, with each rack typically having 20 to 40 blades."
8608,"At the top of each rack there is a
switch, aptly named the Top of Rack (TOR) switch , that interconnects the hosts in the rack with each
other and with other switches in the data center."
8609,"Specifically, each host in the rack has a network
interface card that connects to its TOR switch, and each TOR switch has additional ports that can beconnected to other switches."
8610,"Today hosts typically have 40 Gbps Ethernet connections to their TOR
switches [Greenberg 2015] ."
8611,Each host is also assigned its own data-center-internal IP address.
8612,"The data center network supports two types of traffic: traffic flowing between external clients and internal
hosts and traffic flowing between internal hosts."
8613,"To handle flows between external clients and internal
hosts, the data center network includes one or more border routers, connecting the data center
network to the public Internet."
8614,"The data center network therefore interconnects the racks with each other
and connects the racks to the border routers."
8615,Figure 6.30 shows an example of a data center network.
8616,"Data center network design, the art of designing the interconnection network and protocols that
connect the racks with each other and with the border routers, has become an important branch ofcomputer networking research in recent years [Al-Fares 2008 ; Greenberg 2009a ; Greenberg 2009b;
Mysore 2009 ; Guo 2009; Wang 2010]."
8617,"Figure 6.30 A data center network with a hierarchical topology
Load Balancing
A cloud data center, such as a Google or Microsoft data center, provides many applications
concurrently, such as search, e-mail, and video applications."
8618,"To support requests from external clients,each application is associated with a publicly visible IP address to which clients send their requests andfrom which they receive responses."
8619,"Inside the data center, the external requests are first directed to aload balancer whose job it is to distribute requests to the hosts, balancing the load across the hosts asa function of their current load."
8620,"A large data center will often have several load balancers, each onedevoted to a set of specific cloud applications."
8621,"Such a load balancer is sometimes referred to as a“layer-4 switch” since it makes decisions based on the destination port number (layer 4) as well as
destination IP address in the packet."
8622,"Upon receiving a request for a particular application, the load
balancer forwards it to one of the hosts that handles the application."
8623,"(A host may then invoke theservices of other hosts to help process the request.) When the host finishes processing the request, itsends its response back to the load balancer, which in turn relays the response back to the externalclient."
8624,"The load balancer not only balances the work load across hosts, but also provides a NAT-like
function, translating the public external IP address to the internal IP address of the appropriate host, andthen translating back for packets traveling in the reverse direction back to the clients."
8625,"This prevents
clients from contacting hosts directly, which has the security benefit of hiding the internal network
structure and preventing clients from directly interacting with the hosts."
8626,"Hierarchical Architecture
For a small data center housing only a few thousand hosts, a simple network consisting of a border
router, a load balancer, and a few tens of racks all interconnected by a single Ethernet switch couldpossibly suffice."
8627,"But to scale to tens to hundreds of thousands of hosts, a data center often employs ahierarchy of routers and switches , such as the topology shown in Figure 6.30."
8628,"At the top of the
hierarchy, the border router connects to access routers (only two are shown in Figure 6.30, but there
can be many more)."
8629,Below each access router there are three tiers of switches.
8630,"Each access routerconnects to a top-tier switch, and each top-tier switch connects to multiple second-tier switches and aload balancer."
8631,Each second-tier switch in turn connects to multiple racks via the racks’ TOR switches(third-tier switches).
8632,"All links typically use Ethernet for their link-layer and physical-layer protocols, with a
mix of copper and fiber cabling."
8633,"With such a hierarchical design, it is possible to scale a data center to
hundreds of thousands of hosts."
8634,"Because it is critical for a cloud application provider to continually provide applications with high
availability, data centers also include redundant network equipment and redundant links in their designs
(not shown in Figure 6.30)."
8635,"For example, each TOR switch can connect to two tier-2 switches, and each
access router, tier-1 switch, and tier-2 switch can be duplicated and integrated into the design [Cisco
2012 ; Greenberg 2009b]."
8636,"In the hierarchical design in Figure 6.30, observe that the hosts below each
access router form a single subnet."
8637,"In order to localize ARP broadcast traffic, each of these subnets isfurther partitioned into smaller VLAN subnets, each comprising a few hundred hosts [Greenberg
2009a] ."
8638,"Although the conventional hierarchical architecture just described solves the problem of scale, it suffersfrom limited host-to-host capacity  [Greenberg 2009b]."
8639,"To understand this limitation, consider again
Figure 6.30, and suppose each host connects to its TOR switch with a 1 Gbps link, whereas the links
between switches are 10 Gbps Ethernet links."
8640,"Two hosts in the same rack can always communicate at a
full 1 Gbps, limited only by the rate of the hosts’ network interface cards."
8641,"However, if there are many
simultaneous flows in the data center network, the maximum rate between two hosts in different racks
can be much less."
8642,"To gain insight into this issue, consider a traffic pattern consisting of 40 simultaneous
flows between 40 pairs of hosts in different racks."
8643,"Specifically, suppose each of 10 hosts in rack 1 in
Figure 6.30 sends a flow to a corresponding host in rack 5."
8644,"Similarly, there are ten simultaneous flows
between pairs of hosts in racks 2 and 6, ten simultaneous flows between racks 3 and 7, and ten
simultaneous flows between racks 4 and 8."
8645,"If each flow evenly shares a link’s capacity with other flows
traversing that link, then the 40 flows crossing the 10 Gbps A-to-B link (as well as the 10 Gbps B-to-Clink) will each only receive  which is significantly less than the 1 Gbps network
10 Gbps/40=250 Mbps,interface card rate."
8646,"The problem becomes even more acute for flows between hosts that need to travel
higher up the hierarchy."
8647,"One possible solution to this limitation is to deploy higher-rate switches and
routers."
8648,"But this would significantly increase the cost of the data center, because switches and routerswith high port speeds are very expensive."
8649,"Supporting high-bandwidth host-to-host communication is important because a key requirement in data
centers is flexibility in placement of computation and services [Greenberg 2009b; Farrington 2010]."
8650,"For example, a large-scale Internet search engine may run on thousands of hosts spread across
multiple racks with significant bandwidth requirements between all pairs of hosts."
8651,"Similarly, a cloudcomputing service such as EC2 may wish to place the multiple virtual machines comprising acustomer’s service on the physical hosts with the most capacity irrespective of their location in the datacenter."
8652,"If these physical hosts are spread across multiple racks, network bottlenecks as describedabove may result in poor performance."
8653,"Trends in Data Center Networking
In order to reduce the cost of data centers, and at the same time improve their delay and throughput
performance, Internet cloud giants such as Google, Facebook, ­Amazon, and Microsoft are continually
deploying new data center network designs."
8654,"Although these designs are proprietary, many importanttrends can nevertheless be identified."
8655,"One such trend is to deploy new interconnection architectures and network protocols that overcome the
drawbacks of the traditional hierarchical designs."
8656,"One such approach is to replace the hierarchy of
switches and routers with a fully connected topology  [Facebook 2014; Al-Fares 2008 ; Greenberg
2009b; Guo 2009], such as the topology shown in Figure 6.31."
8657,"In this design, each tier-1 switch
connects to all of the tier-2 switches so that (1) host-to-host traffic never has to rise above the switchtiers, and (2) with n tier-1 switches, between any two tier-2 switches there are n disjoint paths."
8658,"Such a
design can significantly improve the host-to-host capacity."
8659,"To see this, consider again our example of 40flows."
8660,"The topology in Figure 6.31 can handle such a flow pattern since there are four distinct paths
between the first tier-2 switch and the second tier-2 switch, together providing an aggregate capacity of
40 Gbps between the first two tier-2 switches."
8661,"Such a design not only alleviates the host-to-hostcapacity limitation, but also creates a more flexible computation and service environment in which
communication between any two racks not connected to the same switch is logically equivalent,
irrespective of their locations in the data center."
8662,"Another major trend is to employ shipping container–based modular data centers (MDCs) [YouTube
2009 ; Waldrop 2007]."
8663,"In an MDC, a factory builds, within aFigure 6.31 Highly interconnected data network topology
standard 12-meter shipping container, a “mini data center” and ships the container to the data center
location."
8664,"Each container has up to a few thousand hosts, stacked in tens of racks, which are packed
closely together."
8665,"At the data center location, multiple containers are interconnected with each other andalso with the Internet."
8666,"Once a prefabricated container is deployed at a data center, it is often difficult toservice."
8667,"Thus, each container is designed for graceful performance degradation: as components(servers and switches) fail over time, the container continues to operate but with degraded performance.When many components have failed and performance has dropped below a threshold, the entirecontainer is removed and replaced with a fresh one."
8668,Building a data center out of containers creates new networking challenges.
8669,"With an MDC, there are two
types of networks: the container-internal networks within each of the containers and the core network
connecting each container [Guo 2009; Farrington 2010]."
8670,"Within each container, at the scale of up to a
few thousand hosts, it is possible to build a fully connected network (as described above) using
inexpensive commodity Gigabit Ethernet switches."
8671,"However, the design of the core network,interconnecting hundreds to thousands of containers while providing high host-to-host bandwidth acrosscontainers for typical workloads, remains a challenging problem."
8672,"A hybrid electrical/optical switch
architecture for interconnecting the containers is proposed in [Farrington 2010]."
8673,"When using highly interconnected topologies, one of the major issues is designing routing algorithmsamong the switches."
8674,One possibility [Greenberg 2009b] is to use a form of random routing.
8675,"Another
possibility [Guo 2009] is to deploy multiple network interface cards in each host, connect each host to
multiple low-cost commodity switches, and allow the hosts themselves to intelligently route traffic among
the switches."
8676,Variations and extensions of these approaches are currently being deployed incontemporary data centers.
8677,"Another important trend is that large cloud providers are increasingly building or customizing just about
everything that is in their data centers, including network adapters, switches routers, TORs, software,and networking protocols [Greenberg 2015 , Singh 2015]."
8678,"Another trend, pioneered by Amazon, is to
improve reliability with “availability zones,” which essentially replicate distinct data centers in different
nearby buildings."
8679,"By having the buildings nearby (a few kilometers apart), transactional data can besynchronized across the data centers in the same availability zone while providing fault tolerance
[Amazon 2014] ."
8680,"Many more innovations in data center design are likely to continue to come; interested
readers are encouraged to see the recent papers and videos on data center network design.6.7 Retrospective: A Day in the Life of a Web Page Request
Now that we’ve covered the link layer in this chapter, and the network, transport and application layers
in earlier chapters, our journey down the protocol stack is complete! In the very beginning of this book
(Section 1.1), we wrote “much of this book is concerned with computer network protocols,” and in the
first five chapters, we’ve certainly seen that this is indeed the case! Before heading into the topical
chapters in second part of this book, we’d like to wrap up our journey down the protocol stack by taking
an integrated, holistic view of the protocols we’ve learned about so far."
8681,"One way then to take this “big
picture” view is to identify the many (many!) protocols that are involved in satisfying even the simplest
request: downloading a Web page."
8682,"Figure 6.32 illustrates our setting: a student, Bob, connects a laptop
to his school’s Ethernet switch and downloads a Web page (say the home page of www.google.com )."
8683,"As we now know, there’s a lot going on “under the hood” to satisfy this seemingly simple request."
8684,"A
Wireshark lab at the end of this chapter examines trace files containing a number of the packets
involved in similar scenarios in more detail."
8685,"6.7.1 Getting Started: DHCP, UDP, IP, and Ethernet
Let’s suppose that Bob boots up his laptop and then connects it to an Ethernet cable connected to the
school’s Ethernet switch, which in turn is connected to the school’s router, as shown in Figure 6.32."
8686,"The
school’s router is connected to an ISP, in this example, comcast.net."
8687,"In this example, comcast.net is
providing the DNS service for the school; thus, the DNS server resides in the Comcast network ratherthan the school network."
8688,"We’ll assume that the DHCP server is running within the router, as is often the
case."
8689,"When Bob first connects his laptop to the network, he can’t do anything (e.g., download a Web page)
without an IP address."
8690,"Thus, the first network-relatedFigure 6.32 A day in the life of a Web page request: Network setting and actions
action taken by Bob’s laptop is to run the DHCP protocol to obtain an IP address, as well as other
information, from the local DHCP server:
1."
8691,"The operating system on Bob’s laptop creates a DHCP request message  ­(Section 4.3.3) and
puts this message within a UDP segment  (Section 3.3) with destination port 67 (DHCP server)
and source port 68 (DHCP client)."
8692,"The UDP segment is then placed within an IP datagram
(Section 4.3.1) with a broadcast IP destination address (255.255.255.255) and a source IP
address of 0.0.0.0, since Bob’s laptop doesn’t yet have an IP address."
8693,2.
8694,"The IP datagram containing the DHCP request message is then placed within an Ethernet
frame  (Section 6.4.2)."
8695,"The Ethernet frame has a destination MAC addresses of
FF:FF:FF:FF:FF:FF so that the frame will be broadcast to all devices connected to the switch
(hopefully including a DHCP server); the frame’s source MAC address is that of Bob’s laptop,
00:16:D3:23:68:8A."
8696,3.
8697,"The broadcast Ethernet frame containing the DHCP request is the first frame sent by Bob’s
laptop to the Ethernet switch."
8698,"The switch broadcasts the incoming frame on all outgoing ports,
including the port connected to the router."
8699,4.
8700,"The router receives the broadcast Ethernet frame containing the DHCP request on its interface
with MAC address 00:22:6B:45:1F:1B and the IP datagram is extracted from the Ethernet frame."
8701,"The datagram’s broadcast IP destination address indicates that this IP datagram should beprocessed by upper layer protocols at this node, so the datagram’s payload (a UDP segment) isthus demultiplexed  (Section 3.2) up to UDP, and the DHCP request message is extracted from
the UDP segment."
8702,The DHCP server now has the DHCP request message.
8703,5.
8704,"Let’s suppose that the DHCP server running within the router can allocate IP addresses in the
CIDR  (Section 4.3.3) block 68.85.2.0/24."
8705,"In this example, all IP addresses used within the
school are thus within Comcast’s address block."
8706,"Let’s suppose the DHCP server allocates
address 68.85.2.101 to Bob’s laptop."
8707,"The DHCP server creates a DHCP ACK message
(Section 4.3.3) containing this IP address, as well as the IP address of the DNS server
(68.87.71.226), the IP address for the default gateway router (68.85.2.1), and the subnet block
(68.85.2.0/24) (equivalently, the “network mask”)."
8708,"The DHCP message is put inside a UDPsegment, which is put inside an IP datagram, which is put inside an Ethernet frame."
8709,TheEthernet frame has a source MAC address of the router’s interface to the home network(00:22:6B:45:1F:1B) and a destination MAC address of Bob’s laptop (00:16:D3:23:68:8A).
8710,6.
8711,"The Ethernet frame containing the DHCP ACK is sent (unicast) by the router to the switch.Because the switch is self-learning  (Section 6.4.3) and previously received an Ethernet frame
(containing the DHCP request) from Bob’s laptop, the switch knows to forward a frameaddressed to 00:16:D3:23:68:8A only to the output port leading to Bob’s laptop."
8712,7.
8713,"Bob’s laptop receives the Ethernet frame containing the DHCP ACK, extracts the IP datagram
from the Ethernet frame, extracts the UDP segment from the IP datagram, and extracts the
DHCP ACK message from the UDP segment."
8714,Bob’s DHCP client then records its IP addressand the IP address of its DNS server.
8715,"It also installs the address of the default gateway into its IP
forwarding table  (Section 4.1)."
8716,"Bob’s laptop will send all datagrams with destination address
outside of its subnet 68.85.2.0/24 to the default gateway."
8717,"At this point, Bob’s laptop hasinitialized its networking components and is ready to begin processing the Web page fetch."
8718,"(Note that only the last two DHCP steps of the four presented in Chapter 4 are actually
necessary.)
6.7.2 Still Getting Started: DNS and ARP
When Bob types the URL for www.google.com  into his Web browser, he begins the long chain of
events that will eventually result in Google’s home page being displayed by his Web browser."
8719,"Bob’sWeb browser begins the process by creating a TCP socket  (Section 2.7) that will be used to send the
HTTP request  (Section 2.2) to www.google.com ."
8720,"In order to create the socket, Bob’s laptop will need
to know the IP address of www.google.com ."
8721,"We learned in Section 2.5, that the DNS ­protocol  is
used to provide this name-to-IP-address translation service."
8722,8.
8723,"The operating system on Bob’s laptop thus creates a DNS query message  (Section 2.5.3),
putting the string “www.google.com ” in the question section of the DNS message."
8724,"This DNS
message is then placed within a UDP segment with a destination port of 53 (DNS server)."
8725,"The
UDP segment is then placed within an IP datagram with an IP destination address of68.87.71.226 (the address of the DNS server returned in the DHCP ACK in step 5) and a source
IP address of 68.85.2.101."
8726,9.
8727,Bob’s laptop then places the datagram containing the DNS query message in an Ethernet frame.
8728,"This frame will be sent (addressed, at the link layer) to the gateway router in Bob’s school’s
network."
8729,"However, even though Bob’s laptop knows the IP address of the school’s gatewayrouter (68.85.2.1) via the DHCP ACK message in step 5 above, it doesn’t know the gateway
router’s MAC address."
8730,"In order to obtain the MAC address of the gateway router, Bob’s ­laptop
will need to use the ARP protocol  (Section 6.4.1)."
8731,10.
8732,"Bob’s laptop creates an ARP query  message with a target IP address of 68.85.2.1 (the default
gateway), places the ARP message within an Ethernet frame with a broadcast destination
address (FF:FF:FF:FF:FF:FF) and sends the Ethernet frame to the switch, which delivers theframe to all connected devices, including the gateway router."
8733,11.
8734,"The gateway router receives the frame containing the ARP query message on the interface to
the school network, and finds that the target IP address of 68.85.2.1 in the ARP message
matches the IP address of its interface."
8735,"The gateway router thus prepares an ARP reply,
indicating that its MAC address of 00:22:6B:45:1F:1B corresponds to IP address 68.85.2.1. It
places the ARP reply message in an Ethernet frame, with a destination address of
00:16:D3:23:68:8A (Bob’s laptop) and sends the frame to the switch, which delivers the frame toBob’s laptop."
8736,12.
8737,"Bob’s laptop receives the frame containing the ARP reply message and extracts the MAC
address of the gateway router (00:22:6B:45:1F:1B) from the ARP reply message."
8738,13.
8739,"Bob’s laptop can now ( finally!) address the Ethernet frame containing the DNS query to the
gateway router’s MAC address."
8740,"Note that the IP datagram in this frame has an IP destination
address of 68.87.71.226 (the DNS server), while the frame has a destination address of00:22:6B:45:1F:1B (the gateway router)."
8741,"Bob’s laptop sends this frame to the switch, which
delivers the frame to the gateway router."
8742,"6.7.3 Still Getting Started: Intra-Domain Routing to the DNS Server
14."
8743,The gateway router receives the frame and extracts the IP datagram containing the DNS query.
8744,"The router looks up the destination address of this datagram (68.87.71.226) and determines
from its forwarding table that the datagram should be sent to the leftmost router in the Comcast
network in Figure 6.32."
8745,"The IP datagram is placed inside a link-layer frame appropriate for the
link connecting the school’s router to the leftmost Comcast router and the frame is sent over this
link."
8746,15.
8747,"The leftmost router in the Comcast network receives the frame, extracts the IP datagram,
examines the datagram’s destination address (68.87.71.226) and determines the outgoing
interface on which to forward the datagram toward the DNS server from its forwarding table,which has been filled in by ­Comcast’s intra-domain protocol (such as RIP, OSPF or IS-IS,Section 5.3) as well as the Internet’s inter-domain protocol , BGP  (Section 5.4)."
8748,16.
8749,Eventually the IP datagram containing the DNS query arrives at the DNS server.
8750,"The DNS
server extracts the DNS query message, looks up the name www.google.com  in its DNS
database ( Section 2.5), and finds the DNS resource record  that contains the IP address
(64.233.169.105) for www.google.com ."
8751,"(assuming that it is currently cached in the DNS
server)."
8752,"Recall that this cached data originated in the authoritative DNS server  (Section 2.5.2)
for googlecom."
8753,"The DNS server forms a DNS reply message  containing this hostname-to-IP-
address mapping, and places the DNS reply message in a UDP segment, and the segmentwithin an IP datagram addressed to Bob’s laptop (68.85.2.101)."
8754,"This datagram will be forwardedback through the Comcast network to the school’s router and from there, via the Ethernet switchto Bob’s laptop."
8755,17.
8756,Bob’s laptop extracts the IP address of the server www.google.com  from the DNS message.
8757,"Finally , after a lot of work, Bob’s laptop is now ready to contact the www.google.com  server!
6.7.4 Web Client-Server Interaction: TCP and HTTP
18."
8758,"Now that Bob’s laptop has the IP address of www.google.com , it can create the TCP socket
(Section 2.7) that will be used to send the HTTP GET  message (Section 2.2.3) to
www.google.com ."
8759,"When Bob creates the TCP socket, the TCP in Bob’s laptop must first
perform a three-way handshake  (Section 3.5.6) with the TCP in www.google.com ."
8760,"Bob’s
laptop thus first creates a TCP SYN segment with destination port 80 (for HTTP), places theTCP segment inside an IP datagram with a destination IP address of 64.233.169.105
(www.google.com ), places the datagram inside a frame with a destination MAC address of
00:22:6B:45:1F:1B (the gateway router) and sends the frame to the switch."
8761,19.
8762,"The routers in the school network, Comcast’s network, and Google’s network forward the
datagram containing the TCP SYN toward www.google.com , using the forwarding table in each
router, as in steps 14–16 above."
8763,"Recall that the router forwarding table entries governingforwarding of packets over the inter-domain link between the Comcast and Google networks are
determined by the BGP  protocol (Chapter 5)."
8764,20.
8765,"Eventually, the datagram containing the TCP SYN arrives at www.google.com ."
8766,"The TCP SYN
message is extracted from the datagram and demultiplexed to the welcome socket associatedwith port 80."
8767,"A connection socket ( Section 2.7) is created for the TCP connection between the
Google HTTP server and Bob’s laptop."
8768,"A TCP SYNACK ( Section 3.5.6) segment is generated,
placed inside a datagram addressed to Bob’s laptop, and finally placed inside a link-layer frameappropriate for the link connecting www.google.com  to its first-hop router."
8769,21.
8770,"The datagram containing the TCP SYNACK segment is forwarded through the Google,
Comcast, and school networks, eventually arriving at the Ethernet card in Bob’s laptop."
8771,"The
datagram is demultiplexed within the operating system to the TCP socket created in step 18,which enters the connected state.22."
8772,"With the socket on Bob’s laptop now ( finally!) ready to send bytes to www.google.com , Bob’s
browser creates the HTTP GET message (Section 2.2.3) containing the URL to be fetched."
8773,"The
HTTP GET message is then written into the socket, with the GET message becoming the
payload of a TCP segment."
8774,"The TCP segment is placed in a datagram and sent and delivered to
www.google.com  as in steps 18–20 above."
8775,23.
8776,"The HTTP server at www.google.com  reads the HTTP GET message from the TCP socket,
creates an HTTP response  message (Section 2.2), places the requested Web page content in
the body of the HTTP response message, and sends the message into the TCP socket."
8777,24.
8778,"The datagram containing the HTTP reply message is forwarded through the Google, Comcast,
and school networks, and arrives at Bob’s laptop."
8779,"Bob’s Web browser program reads the HTTP
response from the socket, extracts the html for the Web page from the body of the HTTP
response, and finally ( finally!) displays the Web page!
Our scenario above has covered a lot of networking ground! If you’ve understood most or all of theabove example, then you’ve also covered a lot of ground since you first read Section 1.1, where we
wrote “much of this book is concerned with computer network protocols” and you may have wondered
what a protocol actually was! As detailed as the above example might seem, we’ve omitted a number ofpossible additional protocols (e.g., NAT running in the school’s gateway router, wireless access to theschool’s network, security protocols for accessing the school network or encrypting segments ordatagrams, network management protocols), and considerations (Web caching, the DNS hierarchy) thatone would encounter in the public ­Internet."
8780,"We’ll cover a number of these topics and more in the
second part of this book."
8781,"Lastly, we note that our example above was an integrated and holistic, but also very “nuts and bolts,”
view of many of the protocols that we’ve studied in the first part of this book."
8782,"The example focused moreon the “how” than the “why.” For a broader, more reflective view on the design of network protocols in
general, see [Clark 1988 , RFC 5218] .6.8 Summary
In this chapter, we’ve examined the link layer—its services, the principles underlying its operation, and a
number of important specific protocols that use these principles in implementing link-layer services."
8783,"We saw that the basic service of the link layer is to move a network-layer datagram from one node
(host, switch, router, WiFi access point) to an adjacent node."
8784,"We saw that all link-layer protocols operate
by encapsulating a network-layer datagram within a link-layer frame before transmitting the frame over
the link to the adjacent node."
8785,"Beyond this common framing function, however, we learned that differentlink-layer protocols provide very different link access, delivery, and transmission services."
8786,"Thesedifferences are due in part to the wide variety of link types over which link-layer protocols must operate.A simple point-to-point link has a single sender and receiver communicating over a single “wire.” Amultiple access link is shared among many senders and receivers; consequently, the link-layer protocolfor a multiple access channel has a protocol (its multiple access protocol) for coordinating link access."
8787,"Inthe case of MPLS, the “link” connecting two adjacent nodes (for example, two IP routers that are
adjacent in an IP sense—that they are next-hop IP routers toward some destination) may actually be a
network in and of itself."
8788,"In one sense, the idea of a network being considered as a link should not seem
odd."
8789,"A telephone link connecting a home modem/computer to a remote modem/router, for example, is
actually a path through a sophisticated and complex telephone network."
8790,"Among the principles underlying link-layer communication, we examined error-detection and -correction
techniques, multiple access protocols, link-layer addressing, virtualization (VLANs), and the constructionof extended switched LANs and data center networks."
8791,Much of the focus today at the link layer is onthese switched networks.
8792,"In the case of error detection/correction, we examined how it is possible to
add additional bits to a frame’s header in order to detect, and in some cases correct, bit-flip errors that
might occur when the frame is transmitted over the link."
8793,"We covered simple parity and checksummingschemes, as well as the more robust cyclic redundancy check."
8794,We then moved on to the topic ofmultiple access protocols.
8795,"We identified and studied three broad approaches for coordinating access toa broadcast channel: channel partitioning approaches (TDM, FDM), random access approaches (theALOHA protocols and CSMA protocols), and taking-turns approaches (polling and token passing)."
8796,Westudied the cable access network and found that it uses many of these multiple access methods.
8797,"Wesaw that a consequence of having multiple nodes share a single broadcast channel was the need to
provide node addresses at the link layer."
8798,"We learned that link-layer addresses were quite different from
network-layer addresses and that, in the case of the Internet, a special protocol (ARP—the AddressResolution Protocol) is used to translate between these two forms of addressing and studied the hugelysuccessful Ethernet protocol in detail."
8799,"We then examined how nodes sharing a broadcast channel forma LAN and how multiple LANs can be connected together to form larger LANs—all without the
intervention of network-layer routing to interconnect these local nodes."
8800,"We also learned how ­multiple
virtual LANs can be created on a single physical LAN infrastructure."
8801,"We ended our study of the link layer by focusing on how MPLS networks provide link-layer services
when they interconnect IP routers and an overview of the network designs for today’s massive data
centers."
8802,"We wrapped up this chapter (and indeed the first five chapters) by identifying the many
protocols that are needed to fetch a simple Web page."
8803,"Having covered the link layer, our journey down
the protocol stack is now ove r! Certainly, the physical layer lies below the link layer, but the details of the
physical layer are probably best left for another course (for example, in communication theory, rather
than computer networking)."
8804,"We have, however, touched upon several aspects of the physical layer in
this chapter and in Chapter 1 (our discussion of physical media in Section 1.2)."
8805,"We’ll consider the
physical layer again when we study wireless link characteristics in the next chapter."
8806,"Although our journey down the protocol stack is over, our study of computer networking is not yet at an
end."
8807,"In the following three chapters we cover wireless networking, network security, and multimedianetworking."
8808,"These four topics do not fit conveniently into any one layer; indeed, each topic crosscutsmany layers."
8809,"Understanding these topics (billed as advanced topics in some networking texts) thusrequires a firm foundation in all layers of the protocol stack—a foundation that our study of the link layerhas now completed!Homework Problems and Questions
Chapter 6 Review Questions
SECTIONS 6.1–6.2
SECTION 6.3
SECTION 6.4R1."
8810,Consider the transportation analogy in Section 6.1.1 .
8811,"If the passenger is analagous to a
datagram, what is analogous to the link layer frame?"
8812,R2.
8813,"If all the links in the Internet were to provide reliable delivery service, would the TCP reliable
delivery service be redundant?"
8814,Why or why not?
8815,R3.
8816,"What are some of the possible services that a link-layer protocol can offer to the network
layer?"
8817,Which of these link-layer services have corresponding services in IP?
8818,In TCP?
8819,R4.
8820,"Suppose two nodes start to transmit at the same time a packet of length L over a broadcast
channel of rate R."
8821,Denote the propagation delay between the two nodes as d.
8822,"Will there be a
collision if ?"
8823,Why or why not?
8824,R5.
8825,"In Section 6.3 , we listed four desirable characteristics of a broadcast channel."
8826,"Which of
these characteristics does slotted ALOHA have?"
8827,"Which of these characteristics does token
passing have?"
8828,R6.
8829,"In CSMA/CD, after the fifth collision, what is the probability that a node chooses ?"
8830,"The
result  corresponds to a delay of how many ­seconds on a 10 Mbps Ethernet?"
8831,R7.
8832,Describe polling and token-passing protocols using the analogy of cocktail party interactions.
8833,R8.
8834,"Why would the token-ring protocol be inefficient if a LAN had a very large perimeter?prop
dprop<L/R
K=4
K=4
R9."
8835,How big is the MAC address space?
8836,The IPv4 address space?
8837,The IPv6 address space?R10.
8838,"Suppose nodes A, B, and C each attach to the same broadcast LAN (through their
adapters)."
8839,"If A sends thousands of IP datagrams to B with each encapsulating frame addressed
to the MAC address of B, will C’s adapter process these frames?"
8840,"If so, will C’s adapter pass the
IP datagrams in these frames to the network layer C?"
8841,How would your answers change if Asends frames with the MAC broadcast address?
8842,R11.
8843,Why is an ARP query sent within a broadcast frame?
8844,Why is an ARP response sent withinProblemsa frame with a specific destination MAC address?
8845,R12.
8846,"For the network in Figure 6.19 , the router has two ARP modules, each with its own ARP
table."
8847,Is it possible that the same MAC address appears in both tables?
8848,R13.
8849,"Compare the frame structures for 10BASE-T, 100BASE-T, and Gigabit ­Ethernet."
8850,"How do
they differ?"
8851,R14.
8852,Consider Figure 6.15 .
8853,"How many subnetworks are there, in the addressing sense of
Section 4.3 ?"
8854,R15.
8855,"What is the maximum number of VLANs that can be configured on a switch supporting the
802.1Q protocol?"
8856,Why?
8857,R16.
8858,"Suppose that N switches supporting K VLAN groups are to be connected via a trunking
protocol."
8859,How many ports are needed to connect the switches?
8860,Justify your answer.
8861,P1.
8862,"Suppose the information content of a packet is the bit pattern 1110 0110 1001 1101 and an
even parity scheme is being used."
8863,"What would the value of the field containing the parity bits be
for the case of a two-dimensional parity scheme?"
8864,Your answer should be such that a minimum-length checksum field is used.
8865,P2.
8866,"Show (give an example other than the one in Figure 6.5 ) that two-dimensional parity checks
can correct and detect a single bit error."
8867,"Show (give an example of) a double-bit error that can
be detected but not corrected."
8868,P3.
8869,"Suppose the information portion of a packet ( D in Figure 6.3 ) contains 10 bytes consisting
of the 8-bit unsigned binary ASCII representation of string “Networking.” Compute the Internet
checksum for this data."
8870,P4.
8871,"Consider the previous problem, but instead suppose these 10 bytes contain
a."
8872,the binary representation of the numbers 1 through 10.
8873,b.
8874,the ASCII representation of the letters B through K (uppercase).
8875,c.
8876,the ASCII representation of the letters b through k (lowercase).
8877,Compute the Internet checksum for this data.
8878,P5.
8879,"Consider the 5-bit generator, , and suppose that D has the value 1010101010."
8880,What is the value of R?
8881,P6.
8882,"Consider the previous problem, but suppose that D has the value
a."
8883,1001010101.
8884,b.
8885,0101101010.
8886,c.
8887,1010100000.
8888,P7.
8889,"In this problem, we explore some of the properties of the CRC."
8890,"For the ­generator 
given in Section 6.2.3 , answer the following questions.G=10011
G(=1001 )a."
8891,Why can it detect any single bit error in data D?
8892,b.
8893,Can the above G detect any odd number of bit errors?
8894,Why?
8895,P8.
8896,"In Section 6.3 , we provided an outline of the derivation of the efficiency of slotted ALOHA."
8897,In this problem we’ll complete the derivation.
8898,a.
8899,"Recall that when there are N active nodes, the efficiency of slotted ALOHA is
."
8900,Find the value of p that maximizes this expression.
8901,b.
8902,"Using the value of p found in (a), find the efficiency of slotted ALOHA by letting N
approach infinity."
8903,Hint:  approaches 1/ e as N approaches infinity.
8904,P9.
8905,Show that the maximum efficiency of pure ALOHA is 1/(2 e).
8906,"Note: This problem is easy if
you have completed the problem above!
P 10."
8907,"Consider two nodes, A and B, that use the slotted ALOHA protocol to contend for a
channel."
8908,"Suppose node A has more data to transmit than node B, and node A’s retransmission
probability p is greater than node B’s retransmission probability, p."
8909,a.
8910,Provide a formula for node A’s average throughput.
8911,"What is the total efficiency of the
protocol with these two nodes?"
8912,b.
8913,If  is node A’s average throughput twice as large as that of node B?
8914,"Why or why
not?"
8915,"If not, how can you choose p  and p  to make that happen?"
8916,c.
8917,"In general, suppose there are N nodes, among which node A has retransmission
probability 2p and all other nodes have retransmission probability p."
8918,"Provide expressions
to compute the average throughputs of node A and of any other node."
8919,P11.
8920,"Suppose four active nodes—nodes A, B, C and D—are competing for access to a channel
using slotted ALOHA."
8921,Assume each node has an infinite number of packets to send.
8922,"Each node
attempts to transmit in each slot with probability p."
8923,"The first slot is numbered slot 1, the second
slot is numbered slot 2, and so on."
8924,a.
8925,What is the probability that node A succeeds for the first time in slot 5?
8926,b.
8927,"What is the probability that some node (either A, B, C or D) succeeds in slot 4?"
8928,c.
8929,What is the probability that the first success occurs in slot 3?
8930,d.
8931,What is the efficiency of this four-node system?
8932,P12.
8933,"Graph the efficiency of slotted ALOHA and pure ALOHA as a function of p for the following
values of N:
a."
8934,.
8935,b.
8936,.
8937,c.
8938,.
8939,P13.
8940,Consider a broadcast channel with N nodes and a transmission rate of R bps.
8941,"Suppose the
broadcast channel uses polling (with an additional polling node) for multiple access."
8942,"Suppose theNp(1−p)N−1
(1−1/N)N
A B
pA=2pB,
A B
N=15
N=25N=35amount of time from when a node completes transmission until the subsequent node is permitted
to transmit (that is, the polling delay) is d."
8943,"Suppose that within a polling round, a given node is
allowed to transmit at most Q bits."
8944,What is the maximum throughput of the broadcast channel?
8945,P14.
8946,"Consider three LANs interconnected by two routers, as shown in Figure 6.33 ."
8947,a.
8948,Assign IP addresses to all of the interfaces.
8949,"For Subnet 1 use addresses of the form
192.168.1.xxx; for Subnet 2 uses addresses of the form 192.168.2.xxx; and for Subnet 3
use addresses of the form 192.168.3.xxx."
8950,b.
8951,Assign MAC addresses to all of the adapters.
8952,c.
8953,Consider sending an IP datagram from Host E to Host B.
8954,Suppose all of the ARP tablesare up to date.
8955,"Enumerate all the steps, as done for the single-router example in Section
6.4.1 ."
8956,d.
8957,"Repeat (c), now assuming that the ARP table in the sending host is empty (and the other
tables are up to date)."
8958,P15.
8959,Consider Figure 6.33 .
8960,"Now we replace the router between subnets 1 and 2 with a switch
S1, and label the router between subnets 2 and 3 as R1."
8961,"Figure 6.33 Three subnets, interconnected by routers
a."
8962,Consider sending an IP datagram from Host E to Host F.
8963,Will Host E ask router R1 tohelp forward the datagram?
8964,Why?
8965,"In the Ethernet frame containing the IP datagram,
what are the source and destination IP and MAC addresses?"
8966,b.
8967,"Suppose E would like to send an IP datagram to B, and assume that E’s ARP cache
does not contain B’s MAC address."
8968,Will E perform an ARP query to find B’s MACpolladdress?
8969,Why?
8970,"In the Ethernet frame (containing the IP datagram destined to B) that is
delivered to router R1, what are the source and destination IP and MAC addresses?"
8971,c.
8972,"Suppose Host A would like to send an IP datagram to Host B, and neither A’s ARP cache
contains B’s MAC address nor does B’s ARP cache contain A’s MAC address."
8973,"Further
suppose that the switch S1’s forwarding table contains entries for Host B and router R1only."
8974,"Thus, A will broadcast an ARP request message."
8975,"What actions will switch S1
perform once it receives the ARP request message?"
8976,"Will router R1 also receive this ARP
request message?"
8977,"If so, will R1 forward the message to Subnet 3?"
8978,"Once Host B receivesthis ARP request message, it will send back to Host A an ARP response message."
8979,Butwill it send an ARP query message to ask for A’s MAC address?
8980,Why?
8981,What will switchS1 do once it receives an ARP response message from Host B?
8982,P16.
8983,"Consider the previous problem, but suppose now that the router between subnets 2 and 3
is replaced by a switch."
8984,Answer questions (a)–(c) in the previous problem in this new context.
8985,P17.
8986,"Recall that with the CSMA/CD protocol, the adapter waits  bit times after a collision,
where K is drawn randomly."
8987,"For , how long does the adapter wait until returning to Step 2
for a 10 Mbps broadcast channel?"
8988,For a 100 Mbps broadcast channel?P18.
8989,"Suppose nodes A and B are on the same 10 Mbps broadcast channel, and the propagation
delay between the two nodes is 325 bit times."
8990,"Suppose CSMA/CD and Ethernet packets are
used for this broadcast channel."
8991,"Suppose node A begins transmitting a frame and, before itfinishes, node B begins transmitting a frame."
8992,Can A finish transmitting before it detects that Bhas transmitted?
8993,Why or why not?
8994,"If the answer is yes, then A incorrectly believes that its frame
was successfully transmitted without a collision."
8995,"Hint: Suppose at time  bits, A begins
transmitting a frame."
8996,"In the worst case, A transmits a minimum-sized frame of  bit times."
8997,So A would finish transmitting the frame at  bit times.
8998,"Thus, the answer is no, if B’s
signal reaches A before bit time  bits."
8999,"In the worst case, when does B’s signal reach A?"
9000,P19.
9001,"Suppose nodes A and B are on the same 10 Mbps broadcast channel, and the propagation
delay between the two nodes is 245 bit times."
9002,"Suppose A and B send Ethernet frames at the
same time, the frames collide, and then A and B choose different values of K in the CSMA/CD
algorithm."
9003,"Assuming no other nodes are active, can the retransmissions from A and B collide?"
9004,"For our purposes, it suffices to work out the following example."
9005,Suppose A and B begintransmission at  bit times.
9006,They both detect collisions at  t bit times.
9007,"Suppose  and
."
9008,At what time does B schedule its retransmission?
9009,"At what time does A begin
transmission?"
9010,"( Note: The nodes must wait for an idle channel after returning to Step 2—see
protocol.) At what time does A’s signal reach B?"
9011,Does B refrain from transmitting at itsscheduled time?
9012,P20.
9013,"In this problem, you will derive the efficiency of a CSMA/CD-like multiple access protocol."
9014,"In this protocol, time is slotted and all adapters are synchronized to the slots."
9015,"Unlike slotted
ALOHA, however, the length of a slot (in seconds) is much less than a frame time (the time to
transmit a frame)."
9016,Let S be the length of a slot.
9017,"Suppose all frames are of constant lengthK⋅512
K=100
t=0
512+64
t=512+64
t=512+64
t=0 t=245 KA=0
KB=1, where R is the transmission rate of the channel and k is a large integer."
9018,"Suppose there
are N nodes, each with an infinite number of frames to send."
9019,"We also assume that , so
that all nodes can detect a collision before the end of a slot time."
9020,"The protocol is as follows:
If, for a given slot, no node has possession of the channel, all nodes contend for the channel;
in particular, each node transmits in the slot with probability p."
9021,"If exactly one node transmits
in the slot, that node takes possession of the channel for the subsequent  slots and
transmits its entire frame."
9022,"If some node has possession of the channel, all other nodes refrain from transmitting until
the node that possesses the channel has finished transmitting its frame."
9023,"Once this node has
transmitted its frame, all nodes contend for the channel."
9024,"Note that the channel alternates between two states: the productive state, which lasts exactly k
slots, and the nonproductive state, which lasts for a random number of slots."
9025,"Clearly, the
channel efficiency is the ratio of , where x is the expected number of consecutive
unproductive slots."
9026,a.
9027,"For fixed N and p, determine the efficiency of this protocol."
9028,b.
9029,"For fixed N, determine the p that maximizes the efficiency."
9030,c.
9031,"Using the p (which is a function of N) found in (b), determine the efficiency as N
approaches infinity."
9032,d.
9033,Show that this efficiency approaches 1 as the frame length becomes large.
9034,P21.
9035,Consider Figure 6.33 in problem P14.
9036,"Provide MAC addresses and IP addresses for the
interfaces at Host A, both routers, and Host F."
9037,Suppose Host A sends a datagram to Host F.
9038,"Give the source and destination MAC addresses in the frame encapsulating this IP datagram as
the frame is transmitted (i) from A to the left router, (ii) from the left router to the right router, (iii)
from the right router to F."
9039,"Also give the source and destination IP addresses in the IP datagram
encapsulated within the frame at each of these points in time."
9040,P22.
9041,Suppose now that the leftmost router in Figure 6.33 is replaced by a switch.
9042,"Hosts A, B, C,
and D and the right router are all star-connected into this switch."
9043,"Give the source and destinationMAC addresses in the frame encapsulating this IP datagram as the frame is transmitted (i) from
A to the switch, (ii) from the switch to the right router, (iii)  from the right router to F."
9044,"Also give the
source and destination IP addresses in the IP datagram encapsulated within the frame at each
of these points in time."
9045,P23.
9046,Consider Figure 6.15 .
9047,Suppose that all links are 100 Mbps.
9048,"What is the maximum total
aggregate throughput that can be achieved among the 9 hosts and 2 servers in this network?"
9049,You can assume that any host or server can send to any other host or server.
9050,Why?
9051,P24.
9052,Suppose the three departmental switches in Figure 6.15 are replaced by hubs.
9053,"All links are
100 Mbps."
9054,Now answer the questions posed in problem P23.P25.
9055,Suppose that all the switches in Figure 6.15 are replaced by hubs.
9056,All links are 100 Mbps.
9057,"Now answer the questions posed in problem P23.L=kRS
dprop<S
k−1
k/(k+x)P26."
9058,"Let’s consider the operation of a learning switch in the context of a network in which 6
nodes labeled A through F are star connected into an Ethernet switch."
9059,"Suppose that (i) B sends
a frame to E, (ii) E replies with a frame to B, (iii)  A sends a frame to B, (iv) B replies with a frame
to A."
9060,The switch table is initially empty.
9061,"Show the state of the switch table before and after each
of these events."
9062,"For each of these events, identify the link(s) on which the transmitted frame will
be forwarded, and briefly justify your answers."
9063,P27.
9064,"In this problem, we explore the use of small packets for Voice-over-IP applications."
9065,"One of
the drawbacks of a small packet size is that a large fraction of link bandwidth is consumed by
overhead bytes."
9066,"To this end, suppose that the packet consists of P bytes and 5 bytes of header."
9067,a.
9068,Consider sending a digitally encoded voice source directly.
9069,"Suppose the source is
encoded at a constant rate of 128 kbps."
9070,"Assume each packet is entirely filled before the
source sends the packet into the network."
9071,The time required to fill a packet is thepacketization delay .
9072,"In terms of L, determine the packetization delay in milliseconds."
9073,b.
9074,Packetization delays greater than 20 msec can cause a noticeable and unpleasant echo.
9075,"Determine the packetization delay for  bytes (roughly corresponding to a
maximum-sized Ethernet packet) and for  (corresponding to an ATM packet)."
9076,c.
9077,"Calculate the store-and-forward delay at a single switch for a link rate of  Mbps for
 bytes, and for  bytes."
9078,d.
9079,Comment on the advantages of using a small packet size.
9080,P28.
9081,"Consider the single switch VLAN in Figure 6.25 , and assume an external router is
connected to switch port 1."
9082,Assign IP addresses to the EE and CS hosts and router interface.
9083,"Trace the steps taken at both the network layer and the link layer to transfer an IP datagram
from an EE host to a CS host ( Hint: Reread the discussion of Figure 6.19 in the text)."
9084,P29.
9085,"Consider the MPLS network shown in Figure 6.29 , and suppose that routers R5 and R6
are now MPLS enabled."
9086,"Suppose that we want to perform traffic engineering so that packets
from R6 destined for A are switched to A via R6-R4-R3-R1, and packets from R5 destined for Aare switched via R5-R4-R2-R1."
9087,"Show the MPLS tables in R5 and R6, as well as the modifiedtable in R4, that would make this possible."
9088,P30.
9089,"Consider again the same scenario as in the previous problem, but suppose that packets
from R6 destined for D are switched via R6-R4-R3, while packets from R5 destined to D are
switched via R4-R2-R1-R3."
9090,Show the MPLS tables in all routers that would make this possible.
9091,P31.
9092,"In this problem, you will put together much of what you have learned about Internet
protocols."
9093,"Suppose you walk into a room, connect to Ethernet, and want to download a Web
page."
9094,"What are all the protocol steps that take place, starting from powering on your PC togetting the Web page?"
9095,"Assume there is nothing in our DNS or browser caches when you power
on your PC."
9096,"(Hint: The steps include the use of Ethernet, DHCP, ARP, DNS, TCP, and HTTP
protocols.) Explicitly indicate in your steps how you obtain the IP and MAC addresses of a
gateway router."
9097,P32.
9098,Consider the data center network with hierarchical topology in Figure 6.30 .
9099,"Suppose nowL=1,500
L=50
R=622
L=1,500 L=50Wireshark Labs
At the Companion website for this textbook, http:/ /www.pearsonhighered.com/ cs-resources/ , you’ll
find a Wireshark lab that examines the operation of the IEEE 802.3 protocol and the Wireshark frame
format."
9100,A second Wireshark lab examines packet traces taken in a home network scenario.
9101,"AN INTERVIEW WITH…
Simon S."
9102,"Lam
Simon S."
9103,Lam is Professor and Regents Chair in Computer Sciences at the University of Texasat Austin.
9104,"From 1971 to 1974, he was with the ARPA Network Measurement Center at UCLA,
where he worked on satellite and radio packet switching."
9105,"He led a research group that invented
secure sockets and prototyped, in 1993, the first secure sockets layer named Secure NetworkProgramming, which won the 2004 ACM Software System Award."
9106,His research interests are indesign and analysis of network protocols and security services.
9107,"He received his BSEE fromthere are 80 pairs of flows, with ten flows between the first and ninth rack, ten flows between the
second and tenth rack, and so on."
9108,"Further suppose that all links in the network are 10 Gbps,except for the links between hosts and TOR switches, which are 1 Gbps."
9109,a.
9110,Each flow has the same data rate; determine the maximum rate of a flow.
9111,b.
9112,"For the same traffic pattern, determine the maximum rate of a flow for the highlyinterconnected topology in Figure 6.31 ."
9113,c.
9114,"Now suppose there is a similar traffic pattern, but involving 20 hosts on each rack and
160 pairs of flows."
9115,Determine the maximum flow rates for the two topologies.
9116,P33.
9117,"Consider the hierarchical network in Figure 6.30 and suppose that the data center needs to
support e-mail and video distribution among other applications."
9118,"Suppose four racks of servers
are reserved for e-mail and four racks are reserved for video."
9119,"For each of the applications, allfour racks must lie below a single tier-2 switch since the tier-2 to tier-1 links do not havesufficient bandwidth to support the intra-application traffic."
9120,"For the e-mail application, supposethat for 99.9 percent of the time only three racks are used, and that the video application hasidentical usage patterns."
9121,a.
9122,For what fraction of time does the e-mail application need to use a fourth rack?
9123,"How
about for the video application?"
9124,b.
9125,"Assuming e-mail usage and video usage are independent, for what fraction of time do(equivalently, what is the probability that) both applications need their fourth rack?"
9126,c.
9127,Suppose that it is acceptable for an application to have a shortage of servers for 0.001percent of time or less (causing rare periods of performance degradation for users).
9128,"Discuss how the topology in Figure 6.31 can be used so that only seven racks are
collectively assigned to the two applications (assuming that the topology can support all
the traffic).Washington State University and his MS and PhD from UCLA."
9129,"He was elected to the National
Academy of Engineering in 2007."
9130,Why did you decide to specialize in networking?
9131,"When I arrived at UCLA as a new graduate student in Fall 1969, my intention was to study
control theory."
9132,Then I took the queuing theory classes of Leonard Kleinrock and was veryimpressed by him.
9133,"For a while, I was working on adaptive control of queuing systems as apossible thesis topic."
9134,"In early 1972, Larry Roberts initiated the ARPAnet Satellite System project
(later called Packet Satellite)."
9135,Professor Kleinrock asked me to join the project.
9136,"The first thing we
did was to introduce a simple, yet realistic, backoff algorithm to the slotted ALOHA protocol.Shortly thereafter, I found many interesting research problems, such as ALOHA’s instabilityproblem and need for adaptive backoff, which would form the core of my thesis."
9137,"You were active in the early days of the Internet in the 1970s, beginning with your student days
at UCLA."
9138,What was it like then?
9139,Did people have any inkling of what the Internet would become?
9140,"The atmosphere was really no different from other system-building projects I have seen in
industry and academia."
9141,"The initially stated goal of the ARPAnet was fairly modest, that is, toprovide access to expensive computers from remote locations so that many more scientistscould use them."
9142,"However, with the startup of the Packet Satellite project in 1972 and the PacketRadio project in 1973, ARPA’s goal had expanded substantially."
9143,"By 1973, ARPA was buildingthree different packet networks at the same time, and it became necessary for Vint Cerf and Bob
Kahn to develop an interconnection strategy."
9144,"Back then, all of these progressive developments in networking were viewed (I believe) as
logical rather than magical."
9145,No one could have envisioned the scale of the Internet and power ofpersonal computers today.
9146,"It was a decade before appearance of the first PCs. To put things inperspective, most students submitted their computer programs as decks of punched cards for
batch processing."
9147,"Only some students had direct access to computers, which were typicallyhoused in a restricted area."
9148,Modems were slow and still a rarity.
9149,"As a graduate student, I hadonly a phone on my desk, and I used pencil and paper to do most of my work.Where do you see the field of networking and the Internet heading in the future?"
9150,"In the past, the simplicity of the Internet’s IP protocol was its greatest strength in vanquishing
competition and becoming the de facto standard for internetworking."
9151,"Unlike competitors, such as
X.25 in the 1980s and ATM in the 1990s, IP can run on top of any link-layer networking
technology, because it offers only a best-effort datagram service."
9152,"Thus, any packet network can
connect to the Internet."
9153,"Today, IP’s greatest strength is actually a shortcoming."
9154,"IP is like a straitjacket that confines the
Internet’s development to specific directions."
9155,"In recent years, many researchers have redirectedtheir efforts to the application layer only."
9156,"There is also a great deal of research on wireless adhoc networks, sensor networks, and satellite networks."
9157,"These networks can be viewed either asstand-alone systems or link-layer systems, which can flourish because they are outside of the IPstraitjacket."
9158,"Many people are excited about the possibility of P2P systems as a platform for novel Internet
applications."
9159,"However, P2P systems are highly inefficient in their use of Internet resources."
9160,"A
concern of mine is whether the transmission and switching capacity of the Internet core willcontinue to increase faster than the traffic demand on the Internet as it grows to interconnect allkinds of devices and support future P2P-enabled applications."
9161,"Without substantialoverprovisioning of capacity, ensuring network stability in the presence of malicious attacks andcongestion will continue to be a significant challenge."
9162,"The Internet’s phenomenal growth also requires the allocation of new IP addresses at a rapid
rate to network operators and enterprises worldwide."
9163,"At the current rate, the pool of unallocated
IPv4 addresses would be depleted in a few years."
9164,"When that happens, large contiguous blocks
of address space can only be allocated from the IPv6 address space."
9165,"Since adoption of IPv6 isoff to a slow start, due to lack of incentives for early adopters, IPv4 and IPv6 will most likely co-exist on the Internet for many years to come."
9166,Successful migration from an IPv4-dominantInternet to an IPv6-dominant Internet will require a substantial global effort.
9167,"What is the most challenging part of your job?The most challenging part of my job as a professor is teaching and motivating every student in
my class, and every doctoral student under my supervision, rather than just the high achievers."
9168,The very bright and motivated may require a little guidance but not much else.
9169,"I often learn more
from these students than they learn from me."
9170,"Educating and motivating the underachievers
present a major challenge."
9171,What impacts do you foresee technology having on learning in the future?
9172,"Eventually, almost all human knowledge will be accessible through the Internet, which will be the
most powerful tool for learning."
9173,This vast knowledge base will have the potential of leveling theplaying field for students all over the world.
9174,"For example, motivated students in any country will
be able to access the best-class Web sites, multimedia lectures, and teaching materials.Already, it was said that the IEEE and ACM digital libraries have accelerated the development ofcomputer science researchers in China."
9175,"In time, the Internet will transcend all geographicbarriers to learning.Chapter 7 Wireless and Mobile Networks
In the telephony world, the past 20 years have arguably been the golden years of cellular telephony."
9176,"The number of worldwide mobile cellular subscribers increased from 34 million in 1993 to nearly 7.0billion subscribers by 2014, with the number of cellular subscribers now surpassing the number of wiredtelephone lines."
9177,There are now a larger number of mobile phone subscriptions than there are people onour planet.
9178,"The many advantages of cell phones are evident to all—anywhere, anytime, untethered
access to the global telephone network via a highly portable lightweight device."
9179,"More recently, laptops,
smartphones, and tablets are wirelessly connected to the Internet via a cellular or WiFi network."
9180,"Andincreasingly, devices such as gaming consoles, thermostats, home security systems, home appliances,watches, eye glasses, cars, traffic control systems and more are being wirelessly connected to theInternet."
9181,"From a networking standpoint, the challenges posed by networking these wireless and mobile devices,
particularly at the link layer and the network layer, are so different from traditional wired computer
networks that an individual chapter devoted to the study of wireless and mobile networks (i.e., this
chapter) is appropriate."
9182,"We’ll begin this chapter with a discussion of mobile users, wireless links, and networks, and their
relationship to the larger (typically wired) networks to which they connect."
9183,"We’ll draw a distinction
between the challenges posed by the ­wireless  nature of the communication links in such networks,
and by the mobility  that these wireless links enable."
9184,"Making this important distinction—between wireless
and mobility—will allow us to better isolate, identify, and master the key concepts in each area."
9185,"Note
that there are indeed many networked environments in which the network nodes are wireless but not
mobile (e.g., wireless home or office networks with stationary workstations and large displays), and that
there are limited forms of mobility that do not require wireless links (e.g., a worker who uses a wired
laptop at home, shuts down the laptop, drives to work, and attaches the laptop to the company’s wirednetwork)."
9186,"Of course, many of the most exciting networked environments are those in which users are
both wireless and mobile—for example, a scenario in which a mobile user (say in the back seat of car)
maintains a Voice-over-IP call and multiple ongoing TCP connections while racing down the autobahn at
160 kilometers per hour, soon in an autonomous vehicle."
9187,"It is here, at the intersection of wireless andmobility, that we’ll find the most interesting technical challenges!We’ll begin by illustrating the setting in which we’ll consider wireless communication and mobility—a
network in which wireless (and possibly mobile) users are connected into the larger network
infrastructure by a wireless link at the network’s edge."
9188,"We’ll then consider the characteristics of this
wireless link in Section 7.2. We include a brief introduction to code division multiple access (CDMA), a
shared-medium access protocol that is often used in wireless networks, in Section 7.2. In Section 7.3,
we’ll examine the link-level aspects of the IEEE 802.11 (WiFi) wireless LAN standard in some depth;
we’ll also say a few words about Bluetooth and other wireless personal area networks."
9189,"In Section 7.4,
we’ll provide an overview of cellular Internet access, including 3G and emerging 4G cellular
technologies that provide both voice and high-speed Internet access."
9190,"In Section 7.5, we’ll turn our
attention to mobility, focusing on the problems of locating a mobile user, routing to the mobile user, and
“handing off” the mobile user who dynamically moves from one point of attachment to the network toanother."
9191,"We’ll examine how these mobility services are implemented in the mobile IP standard in
enterprise 802.11 networks, and in LTE cellular networks in Sections 7.6 and 7.7, respectively."
9192,"Finally,
we’ll consider the impact of wireless links and mobility on transport-layer protocols and networkedapplications in Section 7.8.7.1 Introduction
Figure 7.1 shows the setting in which we’ll consider the topics of wireless data communication and
mobility."
9193,"We’ll begin by keeping our discussion general enough to cover a wide range of networks,
including both wireless LANs such as IEEE 802.11 and cellular networks such as a 4G network; we’lldrill down into a more detailed discussion of specific wireless architectures in later sections."
9194,"We can
identify the following elements in a wireless network:
Wireless hosts."
9195,"As in the case of wired networks, hosts are the end-system devices that run
applications."
9196,"A wireless host might be a laptop, tablet, smartphone, or desktop computer."
9197,"The hosts
themselves may or may not be mobile."
9198,"Figure 7.1 Elements of a wireless network
Wireless links."
9199,A host connects to a base station (defined below) or to another wireless hostthrough a wireless communication link .
9200,Different wireless link technologies have differenttransmission rates and can transmit over different distances.
9201,"Figure 7.2 shows two key
characteristics (coverage area and link rate) of the more popular wireless network standards."
9202,"(The
figure is only meant to provide a rough idea of these characteristics."
9203,"For example, some of thesetypes of networks are only now being deployed, and some link rates can increase or decreasebeyond the values shown depending on distance, channel conditions, and the number of users inthe wireless network.) We’ll cover these standards later in the first half of this chapter; we’ll also
consider other wireless link characteristics (such as their bit error rates and the causes of bit errors)
in Section 7.2.
In Figure 7.1, wireless links connect wireless hosts located at the edge of the network into the larger
network infrastructure."
9204,"We hasten to add that wireless links are also sometimes used within  a network to
connect routers, switches, and
Figure 7.2 Link characteristics of selected wireless network standards
other network equipment."
9205,"However, our focus in this chapter will be on the use of wireless
communication at the network edge, as it is here that many of the most exciting technical challenges,
and most of the growth, are occurring."
9206,Base station.
9207,The base station  is a key part of the wireless network infrastructure.
9208,"Unlike the
wireless host and wireless link, a base station has no obvious counterpart in a wired network."
9209,"A basestation is responsible for sending and receiving data (e.g., packets) to and from a wireless host thatis associated with that base station."
9210,"A base station will often be responsible for coordinating the
transmission of multiple wireless hosts with which it is associated."
9211,"When we say a wireless host is“associated” with a base station, we mean that (1) the host is within the wireless communication
distance of the base station, and (2) the host uses that base station to relay data between it (thehost) and the larger network."
9212,"Cell towers in cellular networks and access points in 802.11 wireless
LANs are examples of base stations."
9213,"In Figure 7.1, the base station is connected to the larger network (e.g., the ­Internet, corporate or
home network, or telephone network), thus functioning as a link-layer relay between the wireless
host and the rest of the world with which the host communicates."
9214,"Hosts associated with a base station are often referred to as operating in ­infrastructure mode,
since all traditional network services (e.g., address assignment and routing) are provided by the
network to which a host is connected via
CASE HISTORY
PUBLIC WIFI ACCESS: COMING SOON TO A LAMP POST NEAR YOU?"
9215,"WiFi hotspots—public locations where users can find 802.11 wireless access—are becoming
increasingly common in hotels, airports, and cafés around the world."
9216,"Most college campuses
offer ubiquitous wireless access, and it’s hard to find a hotel that doesn’t offer wirelessInternet access."
9217,"Over the past decade a number of cities have designed, deployed, and operated municipal
WiFi networks."
9218,The vision of providing ubiquitous WiFi access to the community as a publicservice (much like streetlights)—helping to bridge the digital divide by providing Internetaccess to all citizens and to promote economic development—is compelling.
9219,"Many citiesaround the world, including Philadelphia, Toronto, Hong Kong, Minneapolis, London, and
Auckland, have plans to provide ubiquitous wireless within the city, or have already done so
to varying degrees."
9220,"The goal in Philadelphia was to “turn Philadelphia into the nation’slargest WiFi hotspot and help to improve education, bridge the digital divide, enhanceneighborhood development, and reduce the costs of government.” The ambitious program—an agreement between the city, Wireless Philadelphia (a nonprofit entity), and the InternetService Provider Earthlink—built an operational network of 802.11b hotspots on streetlamppole arms and traffic control devices that covered 80 percent of the city."
9221,"But financial andoperational concerns caused the network to be sold to a group of private investors in 2008,
who later sold the network back to the city in 2010."
9222,"Other cities, such as Minneapolis,
Toronto, Hong Kong, and Auckland, have had success with smaller-scale efforts."
9223,"The fact that 802.11 networks operate in the unlicensed spectrum (and hence can be
deployed without purchasing expensive spectrum use rights) would seem to make them
financially attractive."
9224,"However, 802.11 access points (see Section 7.3) have much shorter
ranges than 4G cellular base stations (see Section 7.4), requiring a larger number of
deployed endpoints to cover the same geographic region."
9225,"Cellular data networks providing
Internet access, on the other hand, operate in the licensed spectrum."
9226,"Cellular providers paybillions of dollars for spectrum access rights for their networks, making cellular data networks
a business rather than municipal undertaking."
9227,the base station.
9228,"In ad hoc networks, wireless hosts have no such infrastructure with which to
connect."
9229,"In the absence of such infrastructure, the hosts themselves must provide for services suchas routing, address assignment, DNS-like name translation, and more."
9230,"When a mobile host moves beyond the range of one base station and into the range of another, it
will change its point of attachment into the larger network (i.e., change the base station with which it
is associated)—a process referred to as handoff ."
9231,Such mobility raises many challenging questions.
9232,"If a host can move, how does one find the mobile host’s current location in the network so that datacan be forwarded to that mobile host?"
9233,"How is addressing performed, given that a host can be in one
of many possible locations?"
9234,"If the host moves during  a TCP connection or phone call, how is data
routed so that the connection continues uninterrupted?"
9235,"These and many (many!) other questions
make wireless and mobile networking an area of exciting networking research."
9236,Network infrastructure.
9237,"This is the larger network with which a wireless host may wish to
communicate."
9238,"Having discussed the “pieces” of a wireless network, we note that these pieces can be combined in
many different ways to form different types of wireless networks."
9239,"You may find a taxonomy of these
types of wireless networks useful as you read on in this chapter, or read/learn more about wirelessnetworks beyond this book."
9240,"At the highest level we can classify wireless networks according to two
criteria: (i) whether a packet in the wireless network crosses exactly one wireless hop or multiple
wireless hops , and (ii) whether there is infrastructure such as a base station in the network:
Single-hop, infrastructure-based."
9241," These networks have a base station that is connected to a
larger wired network (e.g., the Internet)."
9242,"Furthermore, all communication is between this base station
and a wireless host over a single wireless hop."
9243,"The 802.11 networks you use in the classroom, café,or library; and the 4G LTE data networks that we will learn about shortly all fall in this category."
9244,"The
vast majority of our daily interactions are with single-hop, infrastructure-based ­wireless networks."
9245,"Single-hop, infrastructure-less."
9246," In these networks, there is no base station that is connected to a
wireless network."
9247,"However, as we will see, one of the nodes in this single-hop network may
coordinate the transmissions of the other nodes."
9248,"­Bluetooth networks (that connect small wireless
devices such as keyboards, speakers, and headsets, and which we will study in Section 7.3.6) and
802.11 networks in ad hoc mode are single-hop, infrastructure-less networks."
9249,"Multi-hop, infrastructure-based."
9250," In these networks, a base station is present that is wired to the
larger network."
9251,"However, some wireless nodes may have to relay their communication through otherwireless nodes in order to communicate via the base station."
9252,Some wireless sensor networks andso-called wireless mesh networks fall in this category.
9253,"Multi-hop, infrastructure-less."
9254," There is no base station in these networks, and nodes may have to
relay messages among several other nodes in order to reach a destination."
9255,"Nodes may also bemobile, with connectivity changing among nodes—a class of networks known as mobile ad hoc
networks (MANETs)."
9256,"If the mobile nodes are vehicles, the network is a vehicular ad hoc network
(VANET)."
9257,"As you might imagine, the development of protocols for such networks is challenging and
is the subject of much ongoing research."
9258,"In this chapter, we’ll mostly confine ourselves to single-hop networks, and then mostly to infrastructure-
based networks."
9259,Let’s now dig deeper into the technical challenges that arise in wireless and mobile networks.
9260,"We’ll
begin by first considering the individual wireless link, deferring our discussion of mobility until later in thischapter.7.2 Wireless Links and Network Characteristics
Let’s begin by considering a simple wired network, say a home network, with a wired Ethernet switch
(see Section 6.4) interconnecting the hosts."
9261,"If we replace the wired Ethernet with a wireless 802.11
network, a wireless network interface would replace the host’s wired Ethernet interface, and an access
point would replace the Ethernet switch, but virtually no changes would be needed at the network layeror above."
9262,"This suggests that we focus our attention on the link layer when looking for important
differences between wired and wireless networks."
9263,"Indeed, we can find a number of important
differences between a wired link and a wireless link:
Decreasing signal strength."
9264,"Electromagnetic radiation attenuates as it passes through matter (e.g.,
a radio signal passing through a wall)."
9265,"Even in free space, the signal will disperse, resulting in
decreased signal strength (sometimes referred to as path loss) as the distance between sender and
receiver increases."
9266,Interference from other sources.
9267,"Radio sources transmitting in the same frequency band will
interfere with each other."
9268,"For example, 2.4 GHz wireless phones and 802.11b wireless LANs
transmit in the same frequency band."
9269,"Thus, the 802.11b wireless LAN user talking on a 2.4 GHzwireless phone can expect that neither the network nor the phone will perform particularly well."
9270,"In
addition to interference from transmitting sources, electromagnetic noise within the environment
(e.g., a nearby motor, a microwave) can result in interference."
9271,Multipath propagation.
9272," Multipath propagation  occurs when portions of the electromagnetic wave
reflect off objects and the ground, taking paths of different lengths between a sender and receiver.This results in the blurring of the received signal at the receiver."
9273,Moving objects between the senderand receiver can cause multipath propagation to change over time.
9274,"For a detailed discussion of wireless channel characteristics, models, and measurements, see
[Anderson 1995]."
9275,The discussion above suggests that bit errors will be more common in wireless links than in wired links.
9276,"For this reason, it is perhaps not surprising that wireless link protocols (such as the 802.11 protocol we’llexamine in the following section) employ not only powerful CRC error detection codes, but also link-levelreliable-data-transfer protocols that retransmit corrupted frames."
9277,"Having considered the impairments that can occur on a wireless channel, let’s next turn our attention to
the host receiving the wireless signal."
9278,"This host receives an electromagnetic signal that is a combinationof a degraded form of the original signal transmitted by the sender (degraded due to the attenuation and
multipath propagation effects that we discussed above, among others) and background noise in theenvironment."
9279,"The signal-to-noise ratio (SNR)  is a relative measure of the strength of the received
signal (i.e., the information being transmitted) and this noise."
9280,"The SNR is typically measured in units of
decibels (dB), a unit of measure that some think is used by electrical engineers primarily to confusecomputer scientists."
9281,"The SNR, measured in dB, is twenty times the ratio of the base-10 logarithm of theamplitude of the received signal to the amplitude of the noise."
9282,"For our purposes here, we need only
know that a larger SNR makes it easier for the receiver to extract the transmitted signal from the
background noise."
9283,"Figure 7.3 (adapted from [Holland 2001]) shows the bit error rate (BER)—roughly speaking, the
probability that a transmitted bit is received in error at the receiver—versus the SNR for three different
modulation techniques for encoding information for transmission on an idealized wireless channel."
9284,"Thetheory of modulation and coding, as well as signal extraction and BER, is well beyond the scope of
Figure 7.3 Bit error rate, transmission rate, and SNR
Figure 7.4 Hidden terminal problem caused by obstacle (a) and fading (b)this text (see [Schwartz 1980]  for a discussion of these topics)."
9285,"Nonetheless, Figure 7.3 illustrates
several physical-layer characteristics that are important in understanding higher-layer wireless
communication protocols:
For a given modulation scheme, the higher the SNR, the lower the BER."
9286," Since a sender can
increase the SNR by increasing its transmission power, a sender can decrease the probability that aframe is received in error by increasing its transmission power."
9287,"Note, however, that there is arguablylittle practical gain in increasing the power beyond a certain threshold, say to decrease the BER from
 to ."
9288,"There are also disadvantages  associated with increasing the transmission power:
More energy must be expended by the sender (an important concern for battery-powered mobileusers), and the sender’s transmissions are more likely to interfere with the transmissions of another
sender (see Figure 7.4(b))."
9289,"For a given SNR, a modulation technique with a higher bit transmission rate (whether in error
or not) will have a higher BER."
9290," For example, in Figure 7.3, with an SNR of 10 dB, BPSK
modulation with a transmission rate of 1 Mbps has a BER of less than , while with QAM16
modulation with a transmission rate of 4 Mbps, the BER is , far too high to be practically useful."
9291,"However, with an SNR of 20 dB, QAM16 modulation has a transmission rate of 4 Mbps and a BERof , while BPSK modulation has a transmission rate of only 1 Mbps and a BER that is so low as
to be (literally) “off the charts.” If one can tolerate a BER of , the higher transmission rate
offered by QAM16 would make it the preferred modulation technique in this situation."
9292,"Theseconsiderations give rise to the final characteristic, described next."
9293,Dynamic selection of the physical-layer modulation technique can be used to adapt themodulation technique to channel conditions.
9294," The SNR (and hence the BER) may change as a
result of mobility or due to changes in the environment."
9295,"Adaptive modulation and coding are used incellular data systems and in the 802.11 WiFi and 4G cellular data networks that we’ll study in
Sections 7.3 and 7.4. This allows, for example, the selection of a modulation technique that
provides the highest transmission rate possible subject to a constraint on the BER, for given channel
characteristics.10−12 10−13
10−7
10−1
10−7
10−7A higher and time-varying bit error rate is not the only difference between a wired and wireless link."
9296,"Recall that in the case of wired broadcast links, all nodes receive the transmissions from all other nodes."
9297,"In the case of wireless links, the situation is not as simple, as shown in Figure 7.4. Suppose that Station
A is transmitting to Station B."
9298,Suppose also that Station C is transmitting to Station B.
9299,"With the so-called
hidden terminal problem , physical obstructions in the environment (for example, a mountain or a
building) may prevent A and C from hearing each other’s transmissions, even though A’s and C’s
transmissions are indeed interfering at the destination, B."
9300,This is shown in Figure 7.4(a).
9301,"A second
scenario that results in undetectable collisions at the receiver results from the fading  of a signal’s
strength as it propagates through the wireless medium."
9302,"Figure 7.4(b) illustrates the case where A and C
are placed such that their signals are not strong enough to detect each other’s transmissions, yet theirsignals are strong enough to interfere with each other at station B."
9303,"As we’ll see in Section 7.3, the
hidden terminal problem and fading make multiple access in a wireless network considerably more
complex than in a wired network."
9304,"7.2.1 CDMA
Recall from Chapter 6 that when hosts communicate over a shared medium, a protocol is needed sothat the signals sent by multiple senders do not interfere at the receivers."
9305,"In Chapter 6 we described
three classes of medium access protocols: channel partitioning, random access, and taking turns."
9306,Codedivision multiple access (CDMA) belongs to the family of channel partitioning protocols.
9307,"It is prevalent in
wireless LAN and cellular technologies."
9308,"Because CDMA is so important in the wireless world, we’ll take
a quick look at CDMA now, before getting into specific wireless access technologies in the subsequentsections."
9309,"In a CDMA protocol, each bit being sent is encoded by multiplying the bit by a signal (the code) that
changes at a much faster rate (known as the chipping rate ) than the original sequence of data bits."
9310,"Figure 7.5 shows a simple, idealized CDMA encoding/decoding scenario."
9311,"Suppose that the rate at
which original data bits reach the CDMA encoder defines the unit of time; that is, each original data bit to
be transmitted requires a one-bit slot time."
9312,Let d be the value of the data bit for the ith bit slot.
9313,"For
mathematical convenience, we represent a data bit with a 0 value as ."
9314,"Each bit slot is further
subdivided into M mini-slots; in Figure 7.5, ,
i
−1
M=8Figure 7.5 A simple CDMA example: Sender encoding, receiver decoding
although in practice M is much larger."
9315,"The CDMA code used by the sender consists of a sequence of M
values, , each taking  or  value."
9316,"In the example in Figure 7.5, the M-bit CDMA code
being used by the sender is ."
9317,"To illustrate how CDMA works, let us focus on the ith data bit, d ."
9318,"For the mth mini-slot of the bit-
transmission time of d , the output of the CDMA encoder, Z , is the value of d  multiplied by the mth bit
in the assigned CDMA code, c:
In a simple world, with no interfering senders, the receiver would receive the encoded bits, Z, and
recover the original data bit, d, by computing:cm, m=1,…, M a+1−1
(1,1,1,−1,1,−1,−1,−1)
i
i i,m i
m
Zi,m=di⋅cm (7.1)
i,m
iThe reader might want to work through the details of the example in Figure 7.5 to see that the original
data bits are indeed correctly recovered at the receiver using Equation  7.2.
The world is far from ideal, however, and as noted above, CDMA must work in the presence of
interfering senders that are encoding and transmitting their data using a different assigned code."
9319,"But
how can a CDMA receiver recover a sender’s original data bits when those data bits are being tangledwith bits being transmitted by other senders?"
9320,CDMA works under the assumption that the interferingtransmitted bit signals are additive.
9321,"This means, for example, that if three senders send a 1 value, and afourth sender sends a  value during the same mini-slot, then the received signal at all receivers during
that mini-slot is a 2 (since )."
9322,"In the presence of multiple senders, sender s computes its
encoded transmissions, , in exactly the same manner as in Equation  7.1. The value received at a
receiver during the mth mini-slot of the ith bit slot, however, is now the sum of the transmitted bits from
all N senders during that mini-slot:
Amazingly, if the senders’ codes are chosen carefully, each receiver can recover the data sent by a
given sender out of the aggregate signal simply by using the sender’s code in exactly the same manner
as in Equation  7.2:
as shown in Figure 7.6, for a two-sender CDMA example."
9323,"The M-bit CDMA code being used by the
upper sender is , while the CDMA code being used by the lower sender is
."
9324,"Figure 7.6 illustrates a receiver recovering the original data bits from the upper
sender."
9325,"Note that the receiver is able to extract the data from sender 1 in spite of the interfering
transmission from sender 2."
9326,Recall our cocktail analogy from Chapter 6.
9327,"A CDMA protocol is similar to having partygoers speaking
in multiple languages; in such circumstances humans are actually quite good at locking into the
conversation in the language they understand, while filtering out the remaining conversations."
9328,"We see
here that CDMA is a partitioning protocol in that it partitions the codespace (as opposed to time orfrequency) and assigns each node a dedicated piece of the codespace."
9329,"Our discussion here of CDMA is necessarily brief; in practice a number of difficult issues must be
addressed."
9330,"First, in order for the CDMA receivers to be abledi=1M∑m=1MZi,m⋅cm (7.2)
−1
1+1+1−1=2
Zi,ms
Zi,m*=∑s=1NZi,ms
di=1M∑m=1MZi,m*⋅cm (7.3)
(1,1,1,−1,1,−1,−1,−1)
(1,−1,1,1,1,−1,1,1)Figure 7.6 A two-sender CDMA example
to extract a particular sender’s signal, the CDMA codes must be carefully chosen."
9331,"­Second, our
discussion has assumed that the received signal strengths from various senders are the same; in reality
this can be difficult to achieve."
9332,"There is a considerable body of literature addressing these and other
issues related to CDMA; see ­[Pickholtz 1982; Viterbi 1995] for details.7.3 WiFi: 802.11 Wireless LANs
Pervasive in the workplace, the home, educational institutions, cafés, airports, and street corners,
wireless LANs are now one of the most important access network technologies in the Internet today.Although many technologies and standards for wireless LANs were developed in the 1990s, oneparticular class of standards has clearly emerged as the winner: the IEEE 802.11 wireless LAN, also
known as WiFi ."
9333,"In this section, we’ll take a close look at 802.11 wireless LANs, examining its frame
structure, its medium access protocol, and its internetworking of 802.11 LANs with wired Ethernet LANs.
There are several 802.11 standards for wireless LAN technology in the IEEE 802.11 (“WiFi”) family, as
summarized in Table 7.1. The different 802.11 standards all share some common characteristics."
9334,"They
all use the same medium access protocol, CSMA/CA, which we’ll discuss shortly."
9335,"All three use the same
frame structure for their link-layer frames as well."
9336,All three standards have the ability to reduce theirtransmission rate in order to reach out over greater distances.
9337,"And, importantly, 802.11 products arealso all backwards compatible, meaning, for example, that a mobile capable only of 802.11g may still
interact with a newer 802.11ac base station."
9338,"However, as shown in Table 7.1, the standards have some major differences at the physical layer."
9339,"802.11 devices operate in two difference frequency ranges: 2.4–2.485 GHz (referred to as the 2.4 GHz
range) and 5.1 – 5.8 GHz (referred to as the 5 GHz range)."
9340,"The 2.4 GHz range is an unlicensedfrequency band, where 802.11 devices may compete for frequency spectrum with 2.4 GHz phones andmicrowave ovens."
9341,"At 5 GHz, 802.11 LANs have a shorter transmission distance for a given power level
and suffer more from multipath propagation."
9342,"The two most recent standards, 802.11n [IEEE 802.11n
2012]  and 802.11ac [IEEE 802.11ac 2013 ; Cisco 802.11ac 2015] uses multiple input multiple-output
(MIMO) antennas; i.e., two or more antennas on the sending side and two or more antennas on thereceiving side that are transmitting/receiving different signals [Diggavi 2004]."
9343,"802.11ac base
Table 7.1 Summary of IEEE 802.11 standards
Standard Frequency Range Data Rate
802.11b 2.4 GHz up to 11 Mbps
802.11a 5 GHz up to 54 Mbps
802.11g 2.4 GHz up to 54 Mbps802.11n 2.5 GHz and 5 GHz up to 450 Mbps
802.11ac 5 GHz up to 1300 Mbps
stations may transmit to multiple stations simultaneously, and use “smart” antennas to adaptively
beamform to target transmissions in the direction of a receiver."
9344,"This decreases interference and
increases the distance reached at a given data rate."
9345,"The data rates shown in Table 7.1 are for an
idealized environment, e.g., a receiver placed 1 meter away from the base station, with no interference
—a scenario that we’re unlikely to experience in practice! So as the saying goes, YMMV: Your Mileage
(or in this case your wireless data rate) May Vary."
9346,"7.3.1 The 802.11 Architecture
Figure 7.7 illustrates the principal components of the 802.11 wireless LAN architecture."
9347,"The
fundamental building block of the 802.11 architecture is the basic service set (BSS) ."
9348,"A BSS contains
one or more wireless stations and a central base station, known as an access point (AP) in 802.11
parlance."
9349,"Figure 7.7 shows the AP in each of two BSSs connecting to an interconnection device (such
as a switch or router), which in turn leads to the Internet."
9350,"In a typical home network, there is one AP and
one router (typically integrated together as one unit) that connects the BSS to the Internet."
9351,"As with Ethernet devices, each 802.11 wireless station has a 6-byte MAC address that is stored in the
firmware of the station’s adapter (that is, 802.11 network interface card)."
9352,Each AP also has a MACaddress for its wireless interface.
9353,"As with Ethernet, these MAC addresses are administered by IEEE andare (in theory) ­globally unique.Figure 7.7 IEEE 802.11 LAN architecture
Figure 7.8 An IEEE 802.11 ad hoc network
As noted in Section 7.1, wireless LANs that deploy APs are often referred to as infrastructure
wireless LANs, with the “infrastructure” being the APs along with the wired Ethernet infrastructure that
interconnects the APs and a router."
9354,"Figure 7.8 shows that IEEE 802.11 stations can also group
themselves together to form an ad hoc network—a network with no central control and with no
connections to the ­“outside world.” Here, the network is formed “on the fly,” by mobile devices thathave found themselves in proximity to each other, that have a need to communicate, and that find nopreexisting network infrastructure in their location."
9355,"An ad hoc network might be formed when people withlaptops get together (for example, in a conference room, a train, or a car) and want to exchange data in
the absence of a centralized AP."
9356,"There has been tremendous interest in ad hoc networking, as
communicating portable devices continue to proliferate."
9357,"In this section, though, we’ll focus our attentionon infrastructure wireless LANs.
Channels and Association
In 802.11, each wireless station needs to associate with an AP before it can send or receive network-
layer data."
9358,"Although all of the 802.11 standards use association, we’ll discuss this topic specifically inthe context of IEEE 802.11b/g."
9359,"When a network administrator installs an AP, the administrator assigns a one- or two-word Service Set
Identifier (SSID)  to the access point."
9360,"(When you choose Wi-Fi under Setting on your iPhone, for
example, a list is displayed showing the SSID of each AP in range.) The administrator must also assign
a channel number to the AP."
9361,"To understand channel numbers, recall that 802.11 operates in the
frequency range of 2.4 GHz to 2.4835 GHz. Within this 85 MHz band, 802.11 defines 11 partially
overlapping channels."
9362,Any two channels are non-overlapping if and only if they are separated by four ormore channels.
9363,"In particular, the set of channels 1, 6, and 11 is the only set of three non-overlapping
channels."
9364,"This means that an administrator could create a wireless LAN with an aggregate maximumtransmission rate of 33 Mbps by installing three 802.11b APs at the same physical location, assigningchannels 1, 6, and 11 to the APs, and interconnecting each of the APs with a switch."
9365,"Now that we have a basic understanding of 802.11 channels, let’s describe an interesting (and not
completely uncommon) situation—that of a WiFi jungle."
9366,"A WiFi jungle  is any physical location where a
wireless station receives a sufficiently strong signal from two or more APs. For example, in many cafés
in New York City, a wireless station can pick up a signal from numerous nearby APs. One of the APsmight be managed by the café, while the other APs might be in residential apartments near the café.Each of these APs would likely be located in a different IP subnet and would have been independentlyassigned a channel."
9367,"Now suppose you enter such a WiFi jungle with your phone, tablet, or ­laptop, seeking wireless Internet
access and a blueberry muffin."
9368,Suppose there are five APs in the WiFi jungle.
9369,"To gain Internet access,
your wireless device needs to join exactly one of the subnets and hence needs to associate  with
exactly one of the APs. ­Associating means the wireless device creates a virtual wire between itself and
the AP."
9370,"Specifically, only the associated AP will send data frames (that is, frames containing data, suchas a datagram) to your wireless device, and your wireless device will send data frames into the Internetonly through the associated AP."
9371,But how does your wireless device associate with a particular AP?
9372,"Andmore fundamentally, how does your wireless device know which APs, if any, are out there in the jungle?"
9373,"The 802.11 standard requires that an AP periodically send beacon frames , each of which includes theAP’s SSID and MAC address."
9374,"Your wireless device, knowing that APs are sending out beacon frames,
scans the 11 channels, seeking beacon frames from any APs that may be out there (some of which may
be transmitting on the same channel—it’s a jungle out there!)."
9375,"Having learned about available APs fromthe beacon frames, you (or your wireless device) select one of the APs for association."
9376,"The 802.11 standard does not specify an algorithm for selecting which of the available APs to associate
with; that algorithm is left up to the designers of the 802.11 firmware and software in your wireless
device."
9377,"Typically, the device chooses the AP whose beacon frame is received with the highest signal
strength."
9378,"While a high signal strength is good (see, e.g., Figure 7.3), signal strength is not the only AP
characteristic that will determine the performance a device receives."
9379,"In particular, it’s possible that the
selected AP may have a strong signal, but may be overloaded with other affiliated devices (that willneed to share the wireless bandwidth at that AP), while an unloaded AP is not selected due to a slightlyweaker signal."
9380,"A number of alternative ways of choosing APs have thus recently been proposed
[Vasudevan 2005; Nicholson 2006; Sundaresan 2006] ."
9381,"For an interesting and down-to-earth
discussion of how signal strength is measured, see [Bardwell 2004]."
9382,"Figure 7.9 Active and passive scanning for access points
The process of scanning channels and listening for beacon frames is known as passive scanning (see
Figure 7.9a)."
9383,"A wireless device can also perform active scanning , by broadcasting a probe frame that
will be received by all APs within the wireless device’s range, as shown in Figure 7.9b."
9384,"APs respond to
the probe request frame with a probe response frame."
9385,"The wireless device can then choose the AP with
which to associate from among the responding APs.After selecting the AP with which to associate, the wireless device sends an association request frame
to the AP, and the AP responds with an association response frame."
9386,"Note that this second
request/response handshake is needed with active scanning, since an AP responding to the initial proberequest frame doesn’t know which of the (possibly many) responding APs the device will choose toassociate with, in much the same way that a DHCP client can choose from among multiple DHCP
servers (see Figure 4.21)."
9387,"Once associated with an AP, the device will want to join the subnet (in the IP
addressing sense of Section 4.3.3) to which the AP belongs."
9388,"Thus, the device will typically send a
DHCP discovery message (see Figure 4.21) into the subnet via the AP in order to obtain an IP address
on the subnet."
9389,"Once the address is obtained, the rest of the world then views that device simply as
another host with an IP address in that subnet."
9390,"In order to create an association with a particular AP, the wireless device may be required to
authenticate itself to the AP."
9391,802.11 wireless LANs provide a number of alternatives for authenticationand access.
9392,"One approach, used by many companies, is to permit access to a wireless network based
on a device’s MAC address."
9393,"A second approach, used by many Internet cafés, employs usernames and
passwords."
9394,"In both cases, the AP typically communicates with an authentication server, relayinginformation between the wireless device and the authentication server using a protocol such as RADIUS
[RFC 2865]  or DIAMETER [RFC 3588] ."
9395,"Separating the authentication server from the AP allows one
authentication server to serve many APs, centralizing the (often sensitive) decisions of authenticationand access within the single server, and keeping AP costs and complexity low."
9396,"We’ll see in Chapter 8
that the new IEEE 802.11i protocol defining security aspects of the 802.11 protocol family takes
precisely this approach."
9397,"7.3.2 The 802.11 MAC Protocol
Once a wireless device is associated with an AP, it can start sending and receiving data frames to andfrom the access point."
9398,"But because multiple wireless devices, or the AP itself may want to transmit dataframes at the same time over the same channel, a multiple access protocol is needed to coordinate thetransmissions."
9399,"In the following, we'll refer to the devices or the AP as wireless “stations” that share the
multiple access channel."
9400,"As discussed in Chapter 6 and Section 7.2.1, broadly speaking there are
three classes of multiple access protocols: channel partitioning (including CDMA), random access, and
taking turns."
9401,"Inspired by the huge success of Ethernet and its random access protocol, the designers of802.11 chose a random access protocol for 802.11 wireless LANs. This random access protocol isreferred to as CSMA with collision avoidance , or more succinctly as CSMA/CA."
9402,"As with Ethernet’s
CSMA/CD, the “CSMA” in CSMA/CA stands for “carrier sense multiple access,” meaning that eachstation senses the channel before transmitting, and refrains from transmitting when the channel issensed busy."
9403,"Although both ­Ethernet and 802.11 use carrier-sensing random access, the two MAC
protocols have important differences."
9404,"First, instead of using collision detection, 802.11 uses collision-
avoidance techniques."
9405,"Second, because of the relatively high bit error rates of wireless channels,802.11 (unlike Ethernet) uses a link-layer acknowledgment/retransmission (ARQ) scheme."
9406,"We’ll
describe 802.11’s collision-avoidance and link-layer acknowledgment schemes below."
9407,"Recall from Sections 6.3.2 and 6.4.2 that with Ethernet’s collision-detection algorithm, an Ethernet
station listens to the channel as it transmits."
9408,"If, while transmitting, it detects that another station is also
transmitting, it aborts its transmission and tries to transmit again after waiting a small, random amount of
time."
9409,"Unlike the 802.3 Ethernet protocol, the 802.11 MAC protocol does not implement collision
detection."
9410,"There are two important reasons for this:
The ability to detect collisions requires the ability to send (the station’s own ­signal) and receive (to
determine whether another station is also transmitting) at the same time."
9411,"Because the strength of the
received signal is typically very small compared to the strength of the transmitted signal at the802.11 adapter, it is costly to build hardware that can detect a collision."
9412,"More importantly, even if the adapter could transmit and listen at the same time (and presumably
abort transmission when it senses a busy channel), the adapter would still not be able to detect all
collisions, due to the hidden terminal problem and fading, as discussed in Section 7.2.
Because 802.11wireless LANs do not use collision detection, once a station begins to transmit a frame,it transmits the frame in its entirety; that is, once a station gets started, there is no turning back."
9413,"As one
might expect, transmitting entire frames (particularly long frames) when collisions are prevalent can
significantly degrade a multiple access protocol’s performance."
9414,"In order to reduce the likelihood ofcollisions, 802.11 employs several collision-avoidance techniques, which we’ll shortly discuss."
9415,"Before considering collision avoidance, however, we’ll first need to examine 802.11’s link-layer
acknowledgment  scheme."
9416,"Recall from Section 7.2 that when a station in a wireless LAN sends a
frame, the frame may not reach the destination station intact for a variety of reasons."
9417,"To deal with this
non-negligible chance of failure, the 802.11 MAC protocol uses link-layer acknowledgments."
9418,"As shown
in Figure 7.10, when the destination station receives a frame that passes the CRC, it waits a short
period of time known as the Short Inter-frame Spacing (SIFS)  and then sends backFigure 7.10 802.11 uses link-layer acknowledgments
an acknowledgment frame."
9419,"If the transmitting station does not receive an acknowledgment within a
given amount of time, it assumes that an error has occurred and retransmits the frame, using the
CSMA/CA protocol to access the channel."
9420,"If an acknowledgment is not received after some fixednumber of retransmissions, the transmitting station gives up and discards the frame."
9421,"Having discussed how 802.11 uses link-layer acknowledgments, we’re now in a position to describe the
802.11 CSMA/CA protocol."
9422,Suppose that a station (wireless device or an AP) has a frame to transmit.
9423,1.
9424,"If initially the station senses the channel idle, it transmits its frame after a short period of timeknown as the Distributed Inter-frame Space (DIFS) ; see ­Figure 7.10."
9425,2.
9426,"Otherwise, the station chooses a random backoff value using binary exponential backoff (as weencountered in Section 6.3.2) and counts down this value after DIFS when the channel is
sensed idle."
9427,"While the channel is sensed busy, the counter value remains frozen."
9428,3.
9429,"When the counter reaches zero (note that this can only occur while the channel is sensed idle),
the station transmits the entire frame and then waits for an acknowledgment."
9430,4.
9431,"If an acknowledgment is received, the transmitting station knows that its frame has beencorrectly received at the destination station."
9432,"If the station has another frame to send, it beginsthe CSMA/CA protocol at step 2."
9433,"If the acknowledgment isn’t received, the transmitting station
reenters the backoff phase in step 2, with the random value chosen from a larger interval."
9434,"Recall that under Ethernet’s CSMA/CD, multiple access protocol ( Section 6.3.2), a station begins
transmitting as soon as the channel is sensed idle."
9435,"With CSMA/CA, however, the station refrains from
transmitting while counting down, even when it senses the channel to be idle."
9436,"Why do CSMA/CD and
CDMA/CA take such different approaches here?"
9437,"To answer this question, let’s consider a scenario in which two stations each have a data frame to
transmit, but neither station transmits immediately because each senses that a third station is alreadytransmitting."
9438,"With Ethernet’s CSMA/CD, the two stations would each transmit as soon as they detectthat the third station has finished transmitting."
9439,"This would cause a collision, which isn’t a serious issue inCSMA/CD, since both stations would abort their transmissions and thus avoid the useless transmissionsof the remainders of their frames."
9440,"In 802.11, however, the situation is quite different."
9441,"Because 802.11
does not detect a collision and abort transmission, a frame suffering a collision will be transmitted in its
entirety."
9442,The goal in 802.11 is thus to avoid collisions whenever possible.
9443,"In 802.11, if the two stationssense the channel busy, they both immediately enter random backoff, hopefully choosing differentbackoff values."
9444,"If these values are indeed different, once the channel becomes idle, one of the twostations will begin transmitting before the other, and (if the two stations are not hidden from each other)the “losing station” will hear the “winning station’s” signal, freeze its counter, and refrain from
transmitting until the winning station has completed its transmission."
9445,"In this manner, a costly collision isavoided."
9446,"Of course, collisions can still occur with 802.11 in this scenario: The two stations could behidden from each other, or the two stations could choose random backoff values that are close enough
that the transmission from the station starting first have yet to reach the second station."
9447,"Recall that we
encountered this problem earlier in our discussion of random access algorithms in the context of Figure
6.12."
9448,"Dealing with Hidden Terminals: RTS and CTSThe 802.11 MAC protocol also includes a nifty (but optional) reservation scheme that helps avoid
collisions even in the presence of hidden terminals."
9449,"Let’s investigate this scheme in the context of
Figure 7.11, which shows two wireless ­stations and one access point."
9450,"Both of the wireless stations are
within range of the AP (whose ­coverage is shown as a shaded circle) and both have associated with
the AP."
9451,"­However, due to fading, the signal ranges of wireless stations are limited to the interiors of theshaded circles shown in Figure 7.11."
9452,"Thus, each of the wireless stations is hidden from the other,
although neither is hidden from the AP."
9453,Let’s now consider why hidden terminals can be problematic.
9454,"Suppose Station H1 is transmitting a
frame and halfway through H1’s transmission, Station H2 wants to send a frame to the AP."
9455,"H2, nothearing the transmission from H1, will first wait a DIFS interval and then transmit the frame, resulting ina collision."
9456,"The channel will therefore be wasted during the entire period of H1’s transmission as well as
during H2’s transmission."
9457,"In order to avoid this problem, the IEEE 802.11 protocol allows a station to use a short Request to
Send (RTS)  control frame and a short Clear to Send (CTS)  control frame to reserve access to the
channel."
9458,"When a sender wants to send a DATA
Figure 7.11 Hidden terminal example: H1 is hidden from H2, and vice versa
frame, it can first send an RTS frame to the AP, indicating the total time required to transmit the DATA
frame and the acknowledgment (ACK) frame."
9459,"When the AP receives the RTS frame, it responds by
broadcasting a CTS frame."
9460,This CTS frame serves two purposes: It gives the sender explicit permissionto send and also instructs the other stations not to send for the reserved duration.
9461,"Thus, in Figure 7.12, before transmitting a DATA frame, H1 first broadcasts an RTS frame, which is
heard by all stations in its circle, including the AP."
9462,"The AP then respondsFigure 7.12 Collision avoidance using the RTS and CTS frames
with a CTS frame, which is heard by all stations within its range, including H1 and H2."
9463,"Station H2,
having heard the CTS, refrains from transmitting for the time specified in the CTS frame."
9464,"The RTS, CTS,
DATA, and ACK frames are shown in Figure 7.12."
9465,"The use of the RTS and CTS frames can improve performance in two important ways:
The hidden station problem is mitigated, since a long DATA frame is transmitted only after the
channel has been reserved."
9466,"Because the RTS and CTS frames are short, a collision involving an RTS or CTS frame will last onlyfor the duration of the short RTS or CTS frame."
9467,"Once the RTS and CTS frames are correctly
transmitted, the following DATA and ACK frames should be transmitted without collisions."
9468,You are encouraged to check out the 802.11 applet in the textbook’s Web site.
9469,"This interactive applet
illustrates the CSMA/CA protocol, including the RTS/CTS exchange sequence."
9470,"Although the RTS/CTS exchange can help reduce collisions, it also introduces delay and consumes
channel resources."
9471,"For this reason, the RTS/CTS exchange is only used (if at all) to reserve the channelfor the transmission of a long DATA frame."
9472,"In practice, each wireless station can set an RTS thresholdsuch that the RTS/CTS sequence is used only when the frame is longer than the threshold."
9473,"For manywireless stations, the default RTS threshold value is larger than the maximum frame length, so theRTS/CTS sequence is skipped for all DATA frames sent."
9474,"Using 802.11 as a Point-to-Point Link
Our discussion so far has focused on the use of 802.11 in a multiple access setting."
9475,"We should mention
that if two nodes each have a directional antenna, they can point their directional antennas at each otherand run the 802.11 protocol over what is essentially a point-to-point link."
9476,"Given the low cost ofcommodity 802.11 hardware, the use of directional antennas and an increased transmission powerallow 802.11 to be used as an inexpensive means of providing wireless point-to-point connections over
tens of kilometers distance."
9477,"[Raman 2007]  describes one of the first such multi-hop wireless networks,
operating in the rural Ganges plains in India using point-to-point 802.11 links."
9478,"7.3.3 The IEEE 802.11 Frame
Although the 802.11 frame shares many similarities with an Ethernet frame, it also contains a number offields that are specific to its use for wireless links."
9479,The 802.11 frame is shown in Figure 7.13.
9480,"The
numbers above each of the fields in the frame represent the lengths of the fields in bytes; the numbers
above each of the subfields in the frame control field represent the lengths of the subfields in bits."
9481,"Let’s
now examine the fields in the frame as well as some of the more important subfields in the frame’s
control field.Figure 7.13 The 802.11 frame
Payload and CRC Fields
At the heart of the frame is the payload, which typically consists of an IP datagram or an ARP packet."
9482,"Although the field is permitted to be as long as 2,312 bytes, it is typically fewer than 1,500 bytes, holdingan IP datagram or an ARP packet."
9483,"As with an Ethernet frame, an 802.11 frame includes a 32-bit cyclicredundancy check (CRC) so that the receiver can detect bit errors in the received frame."
9484,"As we’ve seen,bit errors are much more common in wireless LANs than in wired LANs, so the CRC is even more usefulhere."
9485,"Address Fields
Perhaps the most striking difference in the 802.11 frame is that it has four address fields, each of which
can hold a 6-byte MAC address."
9486,But why four address fields?
9487,"Doesn’t a source MAC field and
destination MAC field suffice, as they do for ­Ethernet?"
9488,"It turns out that three address fields are needed
for internetworking ­purposes—specifically, for moving the network-layer datagram from a wireless
station through an AP to a router interface."
9489,"The fourth address field is used when APs ­forward frames
to each other in ad hoc mode."
9490,"Since we are only considering infrastructure networks here, let’s focusour attention on the first three address fields."
9491,"The 802.11 standard defines these fields as follows:
Address 2 is the MAC address of the station that transmits the frame."
9492,"Thus, if a wireless station
transmits the frame, that station’s MAC address is inserted in the address 2 field."
9493,"Similarly, if an AP
transmits the frame, the AP’s MAC address is inserted in the address 2 field."
9494,Address 1 is the MAC address of the wireless station that is to receive the frame.
9495,"Thus if a mobile
wireless station transmits the frame, address 1 contains the MAC address of the destination AP."
9496,"Similarly, if an AP transmits the frame, address 1 contains the MAC address of the destinationwireless station.Figure 7.14 The use of address fields in 802.11 frames: Sending frames between H1 and R1
To understand address 3, recall that the BSS (consisting of the AP and wireless stations) is part of a
subnet, and that this subnet connects to other subnets via some router interface."
9497,"Address 3 contains
the MAC address of this router ­interface."
9498,"To gain further insight into the purpose of address 3, let’s walk through an internetworking example in
the context of Figure 7.14."
9499,"In this figure, there are two APs, each of which is responsible for a number
of wireless stations."
9500,"Each of the APs has a direct connection to a router, which in turn connects to the
global Internet."
9501,"We should keep in mind that an AP is a link-layer device, and thus neither “speaks” IPnor understands IP addresses."
9502,Consider now moving a datagram from the router interface R1 to thewireless Station H1.
9503,"The router is not aware that there is an AP between it and H1; from the router’sperspective, H1 is just a host in one of the subnets to which it (the router) is connected."
9504,"The router, which knows the IP address of H1 (from the destination address of the datagram), uses
ARP to determine the MAC address of H1, just as in an ordinary Ethernet LAN."
9505,"After obtaining H1’s
MAC address, router interface R1 encapsulates the datagram within an Ethernet frame."
9506,"The sourceaddress field of this frame contains R1’s MAC address, and the destination address field contains
H1’s MAC address."
9507,"When the Ethernet frame arrives at the AP, the AP converts the 802.3 Ethernet frame to an 802.11
frame before transmitting the frame into the wireless channel."
9508,"The AP fills in address 1 and address
2 with H1’s MAC address and its own MAC address, respectively, as described above."
9509,"For address3, the AP inserts the MAC address of R1."
9510,"In this manner, H1 can determine (from address 3) the
MAC address of the router interface that sent the datagram into the subnet.Now consider what happens when the wireless station H1 responds by moving a datagram from H1 to
R1."
9511,"H1 creates an 802.11 frame, filling the fields for address 1 and address 2 with the AP’s MAC
address and H1’s MAC address, respectively, as described above."
9512,"For address 3, H1 inserts R1’s
MAC address."
9513,"When the AP receives the 802.11 frame, it converts the frame to an Ethernet frame."
9514,"The source
address field for this frame is H1’s MAC address, and the destination address field is R1’s MAC
address."
9515,"Thus, address 3 allows the AP to determine the appropriate destination MAC addresswhen constructing the Ethernet frame."
9516,"In summary, address 3 plays a crucial role for internetworking the BSS with a wired LAN."
9517,"Sequence Number, Duration, and Frame Control Fields
Recall that in 802.11, whenever a station correctly receives a frame from another station, it sends back
an acknowledgment."
9518,"Because acknowledgments can get lost, the sending station may send multiple
copies of a given frame."
9519,"As we saw in our discussion of the rdt2.1 protocol ( Section 3.4.1), the use of
sequence numbers allows the receiver to distinguish between a newly transmitted frame and the
retransmission of a previous frame."
9520,"The sequence number field in the 802.11 frame thus serves exactly
the same purpose here at the link layer as it did in the transport layer in Chapter 3."
9521,"Recall that the 802.11 protocol allows a transmitting station to reserve the channel for a period of time
that includes the time to transmit its data frame and the time to transmit an acknowledgment."
9522,Thisduration value is included in the frame’s duration field (both for data frames and for the RTS and CTSframes).
9523,"As shown in Figure 7.13, the frame control field includes many subfields."
9524,"We’ll say just a few words
about some of the more important subfields; for a more complete discussion, you are encouraged to
consult the 802.11 specification [Held 2001; Crow 1997; IEEE 802.11 1999] ."
9525,"The type and subtype
fields are used to distinguish the association, RTS, CTS, ACK, and data frames."
9526,"The to and from fields
are used to define the meanings of the different address fields."
9527,"(These meanings change depending on
whether ad hoc or infrastructure modes are used and, in the case of infrastructure mode, whether awireless station or an AP is sending the frame.) Finally the WEP field indicates whether encryption is
being used or not (WEP is discussed in Chapter 8)."
9528,"7.3.4 Mobility in the Same IP SubnetIn order to increase the physical range of a wireless LAN, companies and universities will often deploy
multiple BSSs within the same IP subnet."
9529,"This naturally raises the issue of mobility among the BSSs—
how do wireless stations seamlessly move from one BSS to another while maintaining ongoing TCPsessions?"
9530,"As we’ll see in this subsection, mobility can be handled in a relatively straightforward mannerwhen the BSSs are part of the subnet."
9531,"When stations move between subnets, more sophisticated
mobility management protocols will be needed, such as those we’ll study in Sections 7.5 and 7.6.
Let’s now look at a specific example of mobility between BSSs in the same subnet."
9532,"Figure 7.15 shows
two interconnected BSSs with a host, H1, moving from BSS1 to BSS2."
9533,"Because in this example theinterconnection device that connects the two BSSs is not a router, all of the stations in the two BSSs,
including the APs, belong to the same IP subnet."
9534,"Thus, when H1 moves from BSS1 to BSS2, it may
keep its IP address and all of its ongoing TCP connections."
9535,"If the interconnection device were a router,then H1 would have to obtain a new IP address in the subnet in which it was moving."
9536,"This address
change would disrupt (and eventually terminate) any on-going TCP connections at H1."
9537,"In Section 7.6,
we’ll see how a network-layer mobility protocol, such as mobile IP, can be used to avoid this problem."
9538,But what specifically happens when H1 moves from BSS1 to BSS2?
9539,"As H1 wanders away from AP1, H1
detects a weakening signal from AP1 and starts to scan for a stronger signal."
9540,H1 receives beaconframes from AP2 (which in many corporate and university settings will have the same SSID as AP1).
9541,"H1then disassociates with AP1 and associates with AP2, while keeping its IP address and maintaining itsongoing TCP sessions."
9542,This addresses the handoff problem from the host and AP viewpoint.
9543,"But what about the switch in
Figure 7.15?"
9544,How does it know that the host has moved from one AP to another?
9545,"As you may recall
from Chapter 6, switches are “self-learning” and automatically build their forwarding tables."
9546,"This self-
learning feature nicely handles
Figure 7.15 Mobility in the same subnetoccasional moves (for example, when an employee gets transferred from one department to another);
however, switches were not designed to support highly mobile users who want to maintain TCP
connections while moving between BSSs. To appreciate the problem here, recall that before the move,the switch has an entry in its forwarding table that pairs H1’s MAC address with the outgoing switchinterface through which H1 can be reached."
9547,"If H1 is initially in BSS1, then a datagram destined to H1 willbe directed to H1 via AP1."
9548,"Once H1 associates with BSS2, however, its frames should be directed to
AP2."
9549,"One solution (a bit of a hack, really) is for AP2 to send a broadcast Ethernet frame with H1’s
source address to the switch just after the new association."
9550,"When the switch receives the frame, itupdates its forwarding table, allowing H1 to be reached via AP2."
9551,The 802.11f standards group isdeveloping an inter-AP protocol to handle these and related issues.
9552,Our discussion above has focused on mobility with the same LAN subnet.
9553,"Recall that VLANs, which we
studied in Section 6.4.4, can be used to connect together islands of LANs into a large virtual LAN that
can span a large geographical region."
9554,Mobility among base stations within such a VLAN can be handledin exactly the same manner as above [Yu 2011].
9555,"7.3.5 Advanced Features in 802.11
We’ll wrap up our coverage of 802.11 with a short discussion of two advanced capabilities found in802.11 networks."
9556,"As we’ll see, these capabilities are not completely specified in the 802.11 standard,
but rather are made possible by mechanisms specified in the standard."
9557,"This allows different vendors to
implement these capabilities using their own (proprietary) approaches, presumably giving them an edgeover the competition."
9558,"802.11 Rate Adaptation
We saw earlier in Figure 7.3 that different modulation techniques (with the different transmission rates
that they provide) are appropriate for different SNR scenarios."
9559,"Consider for example a mobile 802.11
user who is initially 20 meters away from the base station, with a high signal-to-noise ratio."
9560,"Given thehigh SNR, the user can communicate with the base station using a physical-layer modulation techniquethat provides high transmission rates while maintaining a low BER."
9561,"This is one happy user! Supposenow that the user becomes mobile, walking away from the base station, with the SNR falling as the
distance from the base station increases."
9562,"In this case, if the modulation technique used in the 802.11
protocol operating between the base station and the user does not change, the BER will becomeunacceptably high as the SNR decreases, and eventually no transmitted frames will be receivedcorrectly."
9563,"For this reason, some 802.11 implementations have a rate adaptation capability that adaptively selects
the underlying physical-layer modulation technique to use based on current or recent channelcharacteristics."
9564,"If a node sends two frames in a row without receiving an acknowledgment (an implicit
indication of bit errors on the channel), the transmission rate falls back to the next lower rate."
9565,"If 10
frames in a row are acknowledged, or if a timer that tracks the time since the last fallback expires, the
transmission rate increases to the next higher rate."
9566,"This rate adaptation mechanism shares the same“probing” philosophy as TCP’s congestion-control mechanism—when conditions are good (reflected byACK receipts), the transmission rate is increased until something “bad” happens (the lack of ACK
receipts); when something “bad” happens, the transmission rate is reduced."
9567,"802.11 rate adaptation and
TCP congestion control are thus similar to the young child who is constantly pushing his/her parents formore and more (say candy for a young child, later curfew hours for the teenager) until the parents finallysay “Enough!” and the child backs off (only to try again later after conditions have hopefully improved!).A number of other schemes have also been proposed to improve on this basic automatic rate-
adjustment scheme [Kamerman 1997 ; Holland 2001; Lacage 2004] ."
9568,"Power Management
Power is a precious resource in mobile devices, and thus the 802.11 standard provides power-
management capabilities that allow 802.11 nodes to minimize the amount of time that their sense,transmit, and receive functions and other circuitry need to be “on.” 802.11 power management operatesas follows."
9569,A node is able to explicitly alternate between sleep and wake states (not unlike a sleepystudent in a classroom!).
9570,A node indicates to the access point that it will be going to sleep by setting thepower-management bit in the header of an 802.11 frame to 1.
9571,A timer in the node is then set to wake upthe node just before the AP is scheduled to send its beacon frame (recall that an AP typically sends abeacon frame every 100 msec).
9572,"Since the AP knows from the set power-transmission bit that the node
is going to sleep, it (the AP) knows that it should not send any frames to that node, and will buffer any
frames destined for the sleeping host for later transmission."
9573,"A node will wake up just before the AP sends a beacon frame, and quickly enter the fully active state
(unlike the sleepy student, this wakeup requires only 250 microseconds [Kamerman 1997] !)."
9574,"The
beacon frames sent out by the AP contain a list of nodes whose frames have been buffered at the AP."
9575,"If
there are no buffered frames for the node, it can go back to sleep."
9576,"Otherwise, the node can explicitlyrequest that the buffered frames be sent by sending a polling message to the AP."
9577,"With an inter-beacontime of 100 msec, a wakeup time of 250 microseconds, and a similarly small time to receive a beacon
frame and check to ensure that there are no buffered frames, a node that has no frames to send or
receive can be asleep 99% of the time, resulting in a significant energy savings."
9578,"7.3.6 Personal Area Networks: Bluetooth and Zigbee
As illustrated in Figure 7.2, the IEEE 802.11 WiFi standard is aimed at communication among devices
separated by up to 100 meters (except when 802.11 is used in a point-to-point configuration with adirectional antenna)."
9579,"Two other wireless protocols in the IEEE 802 family are Bluetooth and Zigbee
(defined in the IEEE 802.15.1 and IEEE 802.15.4 standards [IEEE 802.15 2012] )."
9580,"Bluetooth
An IEEE 802.15.1 network operates over a short range, at low power, and at low cost."
9581,"It is essentially a
low-power, short-range, low-rate “cable replacement” technology for interconnecting a computer with itswireless keyboard, mouse or other peripheral device; cellular phones, speakers, headphones, and manyother devices, whereas 802.11 is a higher-power, medium-range, higher-rate “access” technology."
9582,"Forthis reason, 802.15.1 networks are sometimes referred to as wireless personal area networks (WPANs).The link and physical layers of 802.15.1 are based on the earlier Bluetooth  specification for personal
area networks [Held 2001, Bisdikian 2001]."
9583,"802.15.1 networks operate in the 2.4 GHz unlicensed radio
band in a TDM manner, with time slots of 625 microseconds."
9584,"During each time slot, a sender transmitson one of 79 channels, with the channel changing in a known but pseudo-random manner from slot to
slot."
9585,"This form of channel hopping, known as frequency-hopping spread spectrum (FHSS) , spreads
transmissions in time over the frequency spectrum."
9586,802.15.1 can provide data rates up to 4 Mbps.
9587,"802.15.1 networks are ad hoc networks: No network infrastructure (e.g., an access point) is needed to
interconnect 802.15.1 devices."
9588,"Thus, 802.15.1 devices must organize themselves."
9589,"802.15.1 devices are
first organized into a piconet  of up to eight active devices, as shown in Figure 7.16."
9590,"One of these
devices is designated as the master, with the remaining devices acting as slaves."
9591,"The master node truly
rules the piconet—its clock determines time in the piconet, it can transmit in each odd-numbered slot,
and a
Figure 7.16 A Bluetooth piconetslave can transmit only after the master has communicated with it in the previous slot and even then the
slave can only transmit to the master."
9592,"In addition to the slave devices, there can also be up to 255
parked devices in the network."
9593,These devices cannot communicate until their status has been changedfrom parked to active by the master node.
9594,"For more information about WPANs, the interested reader should consult the Bluetooth references
[Held 2001, Bisdikian 2001] or the official IEEE 802.15 Web site [IEEE 802.15 2012] ."
9595,"Zigbee
A second personal area network standardized by the IEEE is the 802.15.4 standard [IEEE 802.15 2012]
known as Zigbee."
9596,"While Bluetooth networks provide a “cable replacement” data rate of over a Megabit
per second, Zigbee is targeted at lower-powered, lower-data-rate, lower-duty-cycle applications thanBluetooth."
9597,"While we may tend to think that “bigger and faster is better,” not all network applications needhigh bandwidth and the consequent higher costs (both economic and power costs)."
9598,"For example, home
temperature and light sensors, security devices, and wall-mounted switches are all very simple, low-
power, low-duty-cycle, low-cost devices."
9599,Zigbee is thus well-suited for these devices.
9600,"Zigbee defineschannel rates of 20, 40, 100, and 250 Kbps, depending on the channel frequency."
9601,Nodes in a Zigbee network come in two flavors.
9602,"So-called “reduced-function devices” operate as slave
devices under the control of a single “full-function device,” much as Bluetooth slave devices."
9603,"A full-function device can operate as a master device as in Bluetooth by controlling multiple slave devices,and multiple full-function devices can additionally be configured into a mesh network in which full-
function devices route frames amongst themselves."
9604,"Zigbee shares many protocol mechanisms that
we’ve already encountered in other link-layer protocols: beacon frames and link-layer acknowledgments(similar to 802.11), carrier-sense random access protocols with binary exponential backoff (similar to802.11 and Ethernet), and fixed, guaranteed allocation of time slots (similar to DOCSIS)."
9605,Zigbee networks can be configured in many different ways.
9606,"Let’s consider the simple case of a single
full-function device controlling multiple reduced-function devices in a time-slotted manner using beacon
frames."
9607,"Figure 7.17 shows the case
Figure 7.17 Zigbee 802.15.4 super-frame structure
where the Zigbee network divides time into recurring super frames, each of which begins with a beacon
frame."
9608,"Each beacon frame divides the super frame into an active period (during which devices may
transmit) and an inactive period (during which all devices, including the controller, can sleep and thusconserve power)."
9609,"The active period consists of 16 time slots, some of which are used by devices in aCSMA/CA random access manner, and some of which are allocated by the controller to specificdevices, thus providing guaranteed channel access for those devices."
9610,"More details about Zigbee
networks can be found at [Baronti 2007, IEEE 802.15.4 2012] .7.4 Cellular Internet Access
In the previous section we examined how an Internet host can access the Internet when inside a WiFi
hotspot—that is, when it is within the vicinity of an 802.11 access point."
9611,But most WiFi hotspots have asmall coverage area of between 10 and 100 meters in diameter.
9612,What do we do then when we have adesperate need for wireless Internet access and we cannot access a WiFi hotspot?
9613,"Given that cellular telephony is now ubiquitous in many areas throughout the world, a natural strategy is
to extend cellular networks so that they support not only voice telephony but wireless Internet access aswell."
9614,"Ideally, this Internet access would be at a reasonably high speed and would provide for seamlessmobility, allowing users to maintain their TCP sessions while traveling, for example, on a bus or a train.With sufficiently high upstream and downstream bit rates, the user could even maintain video-conferencing sessions while roaming about."
9615,This scenario is not that far-fetched.
9616,Data rates of severalmegabits per second are becoming available as broadband data services such as those we will coverhere become more widely deployed.
9617,"In this section, we provide a brief overview of current and emerging cellular Internet access
technologies."
9618,"Our focus here will be on both the wireless first hop as well as the network that connects
the wireless first hop into the larger telephone network and/or the Internet; in Section 7.7 we’ll consider
how calls are routed to a user moving between base stations."
9619,"Our brief discussion will necessarily
provide only a simplified and high-level description of cellular technologies."
9620,"Modern cellularcommunications, of course, has great breadth and depth, with many universities offering several
courses on the topic."
9621,"Readers seeking a deeper understanding are encouraged to see [Goodman
1997 ; Kaaranen 2001 ; Lin 2001; Korhonen 2003; Schiller 2003; Palat 2009 ; Scourias 2012; Turner
2012 ; Akyildiz 2010], as well as the particularly excellent and exhaustive references [Mouly 1992;
Sauter 2014] ."
9622,"7.4.1 An Overview of Cellular Network Architecture
In our description of cellular network architecture in this section, we’ll adopt the terminology of theGlobal System for Mobile Communications ( GSM ) standards."
9623,"(For history buffs, the GSM acronym was
originally derived from Groupe Spécial Mobile , until the more anglicized name was adopted, preserving
the original acronym letters.) In the 1980s, Europeans recognized the need for a pan-European digital
cellular telephony system that would replace the numerous incompatible analog cellular telephony
systems, leading to the GSM standard [Mouly 1992]."
9624,"Europeans deployed GSM technology with greatsuccess in the early 1990s, and since then GSM has grown to be the 800-pound gorilla of the cellular
telephone world, with more than 80% of all cellular subscribers worldwide using GSM."
9625,"CASE HISTORY
4G Cellular Mobile Versus Wireless LANs
Many cellular mobile phone operators are deploying 4G cellular mobile systems."
9626,"In some
countries (e.g., Korea and Japan), 4G LTE coverage is higher than 90%—nearly ubiquitous."
9627,"In
2015, average download rates over deployed LTE systems range from 10Mbps in the US andIndia to close to 40 Mbps in New Zealand."
9628,"These 4G systems are being deployed in licensedradio-frequency bands, with some operators paying considerable sums to governments forspectrum-use licenses."
9629,"4G systems allow users to access the Internet from remote outdoorlocations while on the move, in a manner similar to today’s cellular phone-only access."
9630,"In manycases, a user may have simultaneous access to both wireless LANs and 4G."
9631,"With the capacityof 4G systems being both more constrained and more expensive, many mobile devices defaultto the use of WiFi rather than 4G, when both are avilable."
9632,"The question of whether wireless edge
network access will be primarily over wireless LANs or cellular systems remains an open
question:
The emerging wireless LAN infrastructure may become nearly ubiquitous."
9633,"IEEE 802.11
wireless LANs, operating at 54 Mbps and higher, are enjoying widespread deployment."
9634,"Essentially all laptops, tablets and smartphones are factory-equipped with 802.11 LANcapabilities."
9635,"Furthermore, emerging Internet appliances—such as wireless cameras and
picture frames—also have low-powered wireless LAN capabilities."
9636,Wireless LAN base stations can also handle mobile phone appliances.
9637,"Many phones are
already capable of connecting to the cellular phone network or to an IP network either
natively or using a Skype-like Voice-over-IP service, thus bypassing the operator’s cellularvoice and 4G data services."
9638,"Of course, many other experts believe that 4G not only will be a major ­success, but will also
dramatically revolutionize the way we work and live."
9639,"Most likely, both WiFi and 4G will bothbecome prevalent wireless technologies, with roaming ­wireless devices automatically selecting
the access technology that provides the best service at their current physical location."
9640,"When people talk about cellular technology, they often classify the technology as belonging to one ofseveral “generations.” The earliest generations were designed primarily for voice traffic."
9641,"First generation
(1G) systems were analog FDMA systems designed exclusively for voice-only communication."
9642,"These
1G systems are almost extinct now, having been replaced by digital 2G systems."
9643,"The original 2Gsystems were also designed for voice, but later extended (2.5G) to support data (i.e., Internet) as well asvoice service."
9644,"3G systems also support voice and data, but with an emphasis on data capabilities andhigher-speed radio access links."
9645,"The 4G systems being deployed today are based on LTE technology,
feature an all-IP core network, and provide integrated voice and data at multi-Megabit speeds."
9646,"Cellular Network Architecture, 2G: Voice Connections to the ­Telephone Network
The term cellular  refers to the fact that the region covered by a cellular network is partitioned into a
number of geographic coverage areas, known as cells , shown as hexagons on the left side of Figure
7.18."
9647,"As with the 802.11WiFi standard we ­studied in Section 7.3.1, GSM has its own particular
nomenclature."
9648,"Each cell
Figure 7.18 Components of the GSM 2G cellular network architecture
contains a base transceiver station (BTS)  that transmits signals to and receives signals from the
mobile stations in its cell."
9649,"The coverage area of a cell depends on many factors, including the
transmitting power of the BTS, the transmitting power of the user devices, obstructing buildings in the
cell, and the height of base station antennas."
9650,"Although Figure 7.18 shows each cell containing one
base transceiver station residing in the middle of the cell, many systems today place the BTS at corners
where three cells intersect, so that a single BTS with directional antennas can service three cells."
9651,The GSM standard for 2G cellular systems uses combined FDM/TDM (radio) for the air interface.
9652,"Recall
from Chapter 1 that, with pure FDM, the channel is partitioned into a number of frequency bands with
each band devoted to a call."
9653,"Also recall from Chapter 1 that, with pure TDM, time is partitioned intoframes with each frame further partitioned into slots and each call being assigned the use of a particular
slot in the revolving frame."
9654,"In combined FDM/TDM systems, the channel is partitioned into a number of
frequency sub-bands; within each sub-band, time is partitioned into frames and slots."
9655,"Thus, for a
combined FDM/TDM system, if the channel is partitioned into F sub-bands and time is partitioned into T
slots, then the channel will be able to support F.T simultaneous calls."
9656,"Recall that we saw in Section
6.3.4 that cable access networks also use a combined FDM/TDM approach."
9657,"GSM systems consist of
200-kHz frequency bands with each band supporting eight TDM calls."
9658,"GSM encodes speech at 13 kbps
and 12.2 kbps."
9659,"A GSM network’s base station controller (BSC) will typically service several tens of base transceiver
stations."
9660,"The role of the BSC is to allocate BTS radio channels to mobile subscribers, perform paging
(finding the cell in which a mobile user is resident), and perform handoff of mobile users—a topic we’ll
cover shortly in Section 7.7.2. The base station controller and its controlled base transceiver stations
collectively constitute a GSM base station subsystem (BSS)."
9661,"As we’ll see in Section 7.7, the mobile switching center (MSC)  plays the central role in user
authorization and accounting (e.g., determining whether a mobile device is allowed to connect to the
cellular network), call establishment and teardown, and handoff."
9662,"A single MSC will typically contain up tofive BSCs, resulting in approximately 200K subscribers per MSC."
9663,"A cellular provider’s network will havea number of MSCs, with special MSCs known as gateway MSCs connecting the provider’s cellularnetwork to the larger public telephone network."
9664,"7.4.2 3G Cellular Data Networks: Extending the Internet to Cellular Subscribers
Our discussion in Section 7.4.1 focused on connecting cellular voice users to the public telephone
network."
9665,"But, of course, when we’re on the go, we’d also like to read e-mail, access the Web, getlocation-dependent services (e.g., maps and restaurant recommendations) and perhaps even watchstreaming video."
9666,"To do this, our smartphone will need to run a full TCP/IP protocol stack (including the
physical link, network, transport, and application layers) and connect into the Internet via the cellular
data network."
9667,The topic of cellular data networks is a rather bewildering collection of competing andever-evolving standards as one generation (and half-generation) succeeds the former and introducesnew technologies and services with new acronyms.
9668,"To make matters worse, there’s no single officialbody that sets requirements for 2.5G, 3G, 3.5G, or 4G technologies, making it hard to sort out thedifferences among competing standards."
9669,"In our discussion below, we’ll focus on the UMTS (UniversalMobile Telecommunications Service) 3G and 4G standards developed by the 3rd Generation
Partnership project (3GPP) [3GPP 2016]."
9670,"Let’s first take a top-down look at 3G cellular data network architecture shown in Figure 7.19.Figure 7.19 3G system architecture
3G Core Network
The 3G core cellular data network connects radio access networks to the public Internet."
9671,"The core
network interoperates with components of the existing cellular voice network (in particular, the MSC)
that we previously encountered in Figure 7.18."
9672,"Given the considerable amount of existing infrastructure
(and profitable services!) in the existing cellular voice network, the approach taken by the designers of3G data services is clear: leave the existing core GSM cellular voice network untouched, adding
additional cellular data functionality in parallel to the existing cellular voice network ."
9673,"The alternative—
integrating new data services directly into the core of the existing cellular voice network—would have
raised the same challenges encountered in Section 4.3, where we discussed integrating new (IPv6) and
legacy (IPv4) technologies in the Internet.There are two types of nodes in the 3G core network: Serving GPRS Support Nodes (SGSNs)  and
Gateway GPRS Support Nodes (GGSNs) ."
9674,"(GPRS stands for Generalized Packet Radio Service, an
early cellular data service in 2G networks; here we discuss the evolved version of GPRS in 3G
networks)."
9675,An SGSN is responsible for delivering datagrams to/from the mobile nodes in the radioaccess network to which the SGSN is attached.
9676,"The SGSN interacts with the cellular voice network’sMSC for that area, providing user authorization and handoff, maintaining location (cell) information about
active mobile nodes, and performing datagram forwarding between mobile nodes in the radio access
network and a GGSN."
9677,"The GGSN acts as a gateway, connecting multiple SGSNs into the largerInternet."
9678,A GGSN is thus the last piece of 3G infrastructure that a datagram originating at a mobile nodeencounters before entering the larger Internet.
9679,"To the outside world, the GGSN looks like any othergateway router; the mobility of the 3G nodes within the GGSN’s network is hidden from the outsideworld behind the GGSN."
9680,"3G Radio Access Network: The Wireless Edge
The 3G radio access network is the wireless first-hop network that we see as a 3G user."
9681,"The Radio
Network Controller (RNC) typically controls several cell base transceiver stations similar to the base
stations that we encountered in 2G systems (but officially known in 3G UMTS parlance as a “NodeBs”—a rather non-descriptive name!)."
9682,"Each cell’s wireless link operates between the mobile nodes anda base transceiver station, just as in 2G networks."
9683,"The RNC connects to both the circuit-switchedcellular voice network via an MSC, and to the packet-switched Internet via an SGSN."
9684,"Thus, while 3Gcellular voice and cellular data services use different core networks, they share a common first/last-hopradio access network."
9685,"A significant change in 3G UMTS over 2G networks is that rather than using GSM’s FDMA/TDMA
scheme, UMTS uses a CDMA technique known as Direct Sequence Wideband CDMA (DS-WCDMA)
[Dahlman 1998]  within TDMA slots; TDMA slots, in turn, are available on multiple frequencies—an
interesting use of all three dedicated channel-sharing approaches that we earlier identified in Chapter 6
and similar to the approach taken in wired cable access networks (see Section 6.3.4)."
9686,"This change
requires a new 3G cellular wireless-access network operating in parallel with the 2G BSS radio networkshown in Figure 7.19."
9687,"The data service associated with the WCDMA specification is known as HSPA
(High Speed Packet Access) and promises downlink data rates of up to 14 Mbps."
9688,"Details regarding 3G
networks can be found at the 3rd Generation Partnership Project (3GPP) Web site [3GPP 2016]."
9689,"7.4.3 On to 4G: LTE
Fourth generation (4G) cellular systems are becoming widely deployed."
9690,"In 2015, more than 50 countries
had 4G coverage exceeding 50%."
9691,"The 4G Long-Term ­Evolution (LTE) standard [Sauter 2014]  put
forward by the 3GPP has two important innovations over 3G systems an all-IP core network and anenhanced radio access network, as discussed below."
9692,"4G System Architecture: An All-IP Core Network
Figure 7.20 shows the overall 4G network architecture, which (unfortunately) introduces yet another
(rather impenetrable) new vocabulary and set of acronyms for
Figure 7.20 4G network architecture
­network ­components."
9693,"But let’s not get lost in these acronyms! There are two important high-level
observations about the 4G architecture:
A unified, all-IP network architecture."
9694," Unlike the 3G network shown in Figure 7.19, which has
separate network components and paths for voice and data traffic, the 4G architecture shown in
Figure 7.20 is “all-IP”—both voice and data are carried in IP datagrams to/from the wireless device
(the User Equipment, UE in 4G parlance) to the gateway to the packet gateway (P-GW) that
connects the 4G edge network to the rest of the network."
9695,"With 4G, the last vestiges of cellular
networks’ roots in the telephony have disappeared, giving way to universal IP service!
A clear separation of the 4G data plane and 4G control plane."
9696," Mirroring our distinction between
the data and control planes for IP’s network layer in Chapters 4 and 5 respectively, the 4G network
architecture also clearly separates the data and control planes."
9697,We’ll discuss their functionalitybelow.
9698,"A clear separation between the radio access network, and the all-IP-core ­network."
9699,"IP
datagrams carrying user data are forwarded between the user (UE) and the gateway (P-GW inFigure 7.20) over a 4G-internal IP network to the external Internet."
9700,"Control packets are exchanged
over this same internal network among the 4G’s control services components, whose roles are
described below."
9701,The principal components of the 4G architecture are as follows.
9702,"The eNodeB  is the logical descendant of the 2G base station and the 3G Radio Network Controller
(a.k.a Node B) and again plays a central role here."
9703,Its data-plane role is to forward datagramsbetween UE (over the LTE radio access ­network) and the P-GW.
9704,"UE datagrams are encapsulated at the eNodeB and tunneled to the P-GW through the 4G network’s
all-IP enhanced packet core (EPC)."
9705,"This tunneling between the eNodeB and P-GW is similar the
tunneling we saw in Section 4.3 of IPv6 datagrams between two IPv6 endpoints through a network
of IPv4 routers."
9706,These tunnels may have associated quality of service (QoS) guarantees.
9707,"For
example, a 4G network may guarantee that voice traffic experiences no more than a 100 msec delaybetween UE and P-GW, and has a packet loss rate of less than 1%; TCP traffic might have a
guarantee of 300 msec and a packet loss rate of less than .0001% [Palat 2009] ."
9708,"We’ll cover QoS in
Chapter 9."
9709,"In the control plane, the eNodeB handles registration and mobility signaling traffic on behalf of the
UE."
9710,"The Packet Data Network Gateway (P-GW)  allocates IP addresses to the UEs and performs QoS
enforcement."
9711,"As a tunnel endpoint it also performs datagram encapsulation/decapsulation when
forwarding a datagram to/from a UE."
9712,"The Serving Gateway (S-GW) is the data-plane mobility anchor point—all UE traffic will pass through
the S-GW."
9713,The S-GW also performs charging/billing functions and lawful traffic interception.
9714,"The Mobility Management Entity (MME)  performs connection and mobility management on behalf
of the UEs resident in the cell it controls."
9715,It receives UE subscription information from the HHS.
9716,"We
cover mobility in cellular networks in detail in Section 7.7.
The Home Subscriber Server (HSS)  contains UE information including roaming access
capabilities, quality of service profiles, and authentication information."
9717,"As we’ll see in Section 7.7,
the HSS obtains this information from the UE’s home cellular provider."
9718,"Very readable introductions to 4G network architecture and its EPC are [Motorola 2007; Palat 2009 ;
Sauter 2014] ."
9719,"LTE Radio Access Network
LTE uses a combination of frequency division multiplexing and time division multiplexing on the
downstream channel, known as orthogonal frequency division multiplexing (OFDM) [Rohde 2008;
Ericsson 2011]."
9720,"(The term “orthogonal” comes from the fact the signals being sent on different frequencychannels are created so that they interfere very little with each other, even when channel frequencies
are tightly spaced)."
9721,"In LTE, each active mobile node is allocated one or more 0.5 ms time slots in one or
more of the channel frequencies."
9722,"Figure 7.21 shows an allocation of eight time slots over four
frequencies."
9723,"By being allocated increasingly more time slots (whether on the same frequency or on
different frequencies), a mobile node is able to achieve increasingly higher transmission rates."
9724,"Slot(re)allocation among mobile
Figure 7.21 Twenty 0.5 ms slots organized into 10 ms frames at each frequency."
9725,"An eight-slot
allocation is shown shaded."
9726,nodes can be performed as often as once every millisecond.
9727,"Different modulation schemes can also be
used to change the transmission rate; see our earlier discussion of Figure 7.3 and dynamic selection of
modulation schemes in WiFi networks."
9728,The particular allocation of time slots to mobile nodes is not mandated by the LTE standard.
9729,"Instead, the
decision of which mobile nodes will be allowed to transmit in a given time slot on a given frequency isdetermined by the scheduling algorithms provided by the LTE equipment vendor and/or the network
operator."
9730,"With opportunistic scheduling [Bender 2000 ; Kolding 2003; Kulkarni 2005], matching the
physical-layer protocol to the channel conditions between the sender and receiver and choosing the
receivers to which packets will be sent based on channel conditions allow the radio network controller to
make best use of the wireless medium."
9731,"In addition, user priorities and contracted levels of service (e.g.,silver, gold, or platinum) can be used in scheduling downstream packet transmissions."
9732,"In addition to theLTE capabilities described above, LTE-Advanced allows for downstream bandwidths of hundreds of
Mbps by allocating aggregated channels to a mobile node [Akyildiz 2010].An additional 4G wireless technology—WiMAX (World Interoperability for Microwave Access)—is a
family of IEEE 802.16 standards that differ significantly from LTE."
9733,"WiMAX has not yet been able to enjoy
the widespread deployment of LTE."
9734,"A detailed discussion of WiMAX can be found on this book’s Website.7.5 Mobility Management: Principles
Having covered the wireless  nature of the communication links in a wireless network, it’s now time to
turn our attention to the mobility  that these wireless links enable."
9735,"In the broadest sense, a mobile node is
one that changes its point of attachment into the network over time."
9736,"Because the term mobility  has taken
on many meanings in both the computer and telephony worlds, it will serve us well first to consider
several dimensions of mobility in some detail."
9737,"From the network layer’s standpoint, how mobile is a user?"
9738," A physically mobile user will present
a very different set of challenges to the network layer, depending on how he or she moves between
points of attachment to the network."
9739,"At one end of the spectrum in Figure 7.22, a user may carry a
laptop with a wireless network interface card around in a building."
9740,"As we saw in Section 7.3.4, this
user is not mobile from a network-layer perspective."
9741,"Moreover, if the user associates with the same
access point regardless of location, the user is not even mobile from the perspective of the link layer."
9742,"At the other end of the spectrum, consider the user zooming along the autobahn in a BMW or Tesla
at 150 kilometers per hour, passing through multiple wireless access networks and wanting tomaintain an uninterrupted TCP connection to a remote application throughout the trip."
9743,"This user is
definitely  mobile! In between
Figure 7.22 Various degrees of mobility, from the network layer’s point of view
these extremes is a user who takes a laptop from one location (e.g., office or dormitory) into another
(e.g., coffeeshop, classroom) and wants to connect into the-network in the new location."
9744,"This user is
also mobile (although less so than the BMW driver!) but does not need to maintain an ongoing
connection while moving between points of attachment to the network."
9745,"Figure 7.22 illustrates this
spectrum of user mobility from the network layer’s perspective."
9746,How important is it for the mobile node’s address to always remain the same?
9747," With mobile
telephony, your phone number—essentially the network-layer address of your phone—remains the
same as you travel from one provider’s mobile phone network to another."
9748,Must a laptop similarlymaintain the same IP address while moving between IP networks?
9749,The answer to this question will depend strongly on the applications being run.
9750,"For the BMW or
Tesla driver who wants to maintain an uninterrupted TCP connection to a remote application whilezipping along the autobahn, it would be convenient to maintain the same IP address."
9751,"Recall from
Chapter 3 that an Internet application needs to know the IP address and port number of the remote
entity with which it is communicating."
9752,"If a mobile entity is able to maintain its IP address as it moves,
mobility becomes invisible from the application standpoint."
9753,"There is great value to this transparency—an application need not be concerned with a potentially changing IP address, and the sameapplication code serves mobile and nonmobile connections alike."
9754,"We’ll see in the following sectionthat mobile IP provides this transparency, allowing a mobile node to maintain its permanent IPaddress while moving among networks."
9755,"On the other hand, a less glamorous mobile user might simply want to turn off an office laptop, bring
that laptop home, power up, and work from home."
9756,"If the laptop functions primarily as a client in
client-server applications (e.g., send/read e-mail, browse the Web, Telnet to a remote host) fromhome, the particular IP address used by the laptop is not that important."
9757,"In particular, one could getby fine with an address that is temporarily allocated to the laptop by the ISP serving the home."
9758,"We
saw in Section 4.3 that DHCP already provides this functionality."
9759,What supporting wired infrastructure is available?
9760," In all of our scenarios above, we’ve implicitly
assumed that there is a fixed infrastructure to which the mobile user can connect—for example, the
home’s ISP network, the wireless access network in the office, or the wireless access networkslining the autobahn."
9761,What if no such infrastructure exists?
9762,"If two users are within communication
proximity of each other, can they establish a network connection in the absence of any other
network-layer infrastructure?"
9763,Ad hoc networking provides precisely these capabilities.
9764,"This rapidlydeveloping area is at the cutting edge of mobile networking research and is beyond the scope of this
book."
9765,"[Perkins 2000]  and the IETF Mobile Ad Hoc Network (manet) working group Web pages
[manet 2016] provide thorough treatments of the subject."
9766,"In order to illustrate the issues involved in allowing a mobile user to maintain ongoing connections while
moving between networks, let’s consider a human analogy."
9767,"A twenty-something adult moving out of thefamily home becomes mobile, living in a series of dormitories and/or apartments, and often changing
addresses."
9768,"If an old friend wants to get in touch, how can that friend find the address of her mobile
friend?"
9769,"One common way is to contact the family, since a mobile adult will often register his or hercurrent address with the family (if for no other reason than so that the parents can send money to helppay the rent!)."
9770,"The family home, with its permanent address, becomes that one place that others can goas a first step in communicating with the mobile adult."
9771,"Later communication from the friend may beeither indirect (for example, with mail being sent first to the parents’ home and then forwarded to themobile adult) or direct (for example, with the friend using the address obtained from the parents to sendmail directly to her mobile friend).In a network setting, the permanent home of a mobile node (such as a laptop or smartphone) is known
as the home network, and the entity within the home network that performs the mobility management
functions discussed below on behalf of the mobile node is known as the home agent."
9772,"The network in
which the mobile node is currently residing is known as the foreign (or visited) network, and the entity
within the foreign network that helps the mobile node with the mobility management functions discussedbelow is known as a foreign agent ."
9773,"For mobile professionals, their home network might likely be their
company network, while the visited network might be the network of a colleague they are visiting."
9774,Acorrespondent  is the entity wishing to communicate with the mobile node.
9775,"Figure 7.23 illustrates these
concepts, as well as addressing concepts considered below."
9776,"In Figure 7.23, note that agents are shown
as being collocated with routers (e.g., as processes running on routers), but alternatively they could beexecuting on other hosts or servers in the network."
9777,"7.5.1 Addressing
We noted above that in order for user mobility to be transparent to network applications, it is desirablefor a mobile node to keep its address as it moves from one network
Figure 7.23 Initial elements of a mobile network architectureto another."
9778,"When a mobile node is resident in a foreign network, all traffic addressed to the node’s
permanent address now needs to be routed to the foreign network."
9779,How can this be done?
9780,One option isfor the foreign network to advertise to all other networks that the mobile node is resident in its network.This could be via the usual exchange of intradomain and interdomain routing information and wouldrequire few changes to the existing routing infrastructure.
9781,"The foreign network could simply advertise to
its neighbors that it has a highly specific route to the mobile node’s permanent address (that is,
essentially inform other networks that it has the correct path for routing datagrams to the mobile node’s
permanent address; see Section 4.3)."
9782,"These neighbors would then propagate this routing information
throughout the network as part of the normal procedure of updating routing information and forwarding
tables."
9783,"When the mobile node leaves one foreign network and joins another, the new foreign networkwould advertise a new, highly specific route to the mobile node, and the old foreign network wouldwithdraw its routing information regarding the mobile node."
9784,"This solves two problems at once, and it does so without making significant changes to the network-
layer infrastructure."
9785,"Other networks know the location of the mobile node, and it is easy to route
datagrams to the mobile node, since the forwarding tables will direct datagrams to the foreign network.A significant drawback, however, is that of scalability."
9786,"If mobility management were to be theresponsibility of network routers, the routers would have to maintain forwarding table entries forpotentially millions of mobile nodes, and update these entries as nodes move."
9787,Some additionaldrawbacks are explored in the problems at the end of this chapter.
9788,"An alternative approach (and one that has been adopted in practice) is to push mobility functionality
from the network core to the network edge—a recurring theme in our study of Internet architecture."
9789,"A
natural way to do this is via the mobile node’s home network."
9790,"In much the same way that parents of themobile twenty-something track their child’s location, the home agent in the mobile node’s home networkcan track the foreign network in which the mobile node resides."
9791,A protocol between the mobile node (ora foreign agent representing the mobile node) and the home agent will certainly be needed to updatethe mobile node’s location.
9792,Let’s now consider the foreign agent in more detail.
9793,"The conceptually simplest approach, shown in
Figure 7.23, is to locate foreign agents at the edge routers in the foreign network."
9794,"One role of the
foreign agent is to create a so-called care-of address (COA)  for the mobile node, with the network
portion of the COA matching that of the foreign network."
9795,"There are thus two addresses associated with
a mobile node, its permanent address  (analogous to our mobile youth’s family’s home address) and its
COA, sometimes known as a foreign address (analogous to the address of the house in which our
mobile youth is currently residing)."
9796,"In the example in Figure 7.23, the permanent address of the mobile
node is 128.119.40.186."
9797,"When visiting network 79.129.13/24, the mobile node has a COA of
79.129.13.2. A second role of the foreign agent is to inform the home agent that the mobile node isresident in its (the foreign agent’s) network and has the given COA."
9798,We’ll see shortly that the COA willbe used to “reroute” datagrams to the mobile node via its foreign agent.
9799,"Although we have separated the functionality of the mobile node and the foreign agent, it is worth noting
that the mobile node can also assume the responsibilities of the foreign agent."
9800,"For example, the mobilenode could obtain a COA in the foreign network (for example, using a protocol such as DHCP) and itselfinform the home agent of its COA."
9801,"7.5.2 Routing to a Mobile Node
We have now seen how a mobile node obtains a COA and how the home agent can be informed of thataddress."
9802,But having the home agent know the COA solves only part of the problem.
9803,How shoulddatagrams be addressed and forwarded to the mobile node?
9804,"Since only the home agent (and notnetwork-wide routers) knows the location of the mobile node, it will no longer suffice to simply address adatagram to the mobile node’s permanent address and send it into the network-layer infrastructure."
9805,Something more must be done.
9806,"Two approaches can be identified, which we will refer to as indirect and
direct routing."
9807,"Indirect Routing to a Mobile Node
Let’s first consider a correspondent that wants to send a datagram to a mobile node."
9808,"In the indirect
routing  approach, the correspondent simply addresses the datagram to the mobile node’s permanent
address and sends the datagram into the network, blissfully unaware of whether the mobile node is
resident in its home network or is visiting a foreign network; mobility is thus completely transparent to
the correspondent."
9809,"Such datagrams are first routed, as usual, to the mobile node’s home network."
9810,"This
is illustrated in step 1 in Figure 7.24."
9811,Let’s now turn our attention to the home agent.
9812,"In addition to being responsible for interacting with a
foreign agent to track the mobile node’s COA, the home agent has another very important function."
9813,Itssecond job is to be on the lookout for arriving datagrams addressed to nodes whose home network isthat of the home agent but that are currently resident in a foreign network.
9814,The home agent interceptsthese datagrams and then forwards them to a mobile node in a two-step process.
9815,"The datagram is first
forwarded to the foreign agent, using the mobile node’s COA (step 2 in Figure 7.24), and then
forwarded from the foreign agent to the mobile node (step 3 in Figure 7.24).Figure 7.24 Indirect routing to a mobile node
It is instructive to consider this rerouting in more detail."
9816,"The home agent will need to address the
datagram using the mobile node’s COA, so that the network layer will route the datagram to the foreign
network."
9817,"On the other hand, it is desirable to leave the correspondent’s datagram intact, since theapplication receiving the datagram should be unaware that the datagram was forwarded via the homeagent."
9818,"Both goals can be satisfied by having the home agent encapsulate the correspondent’s original
complete datagram within a new (larger) datagram."
9819,This larger datagram is addressed and delivered tothe mobile node’s COA.
9820,"The foreign agent, who “owns” the COA, will receive and decapsulate thedatagram—that is, remove the correspondent’s original datagram from within the larger encapsulating
datagram and forward (step 3 in Figure 7.24) the original datagram to the mobile node."
9821,"Figure 7.25
shows a correspondent’s original datagram being sent to the home network, an encapsulated datagram
being sent to the foreign agent, and the original datagram being delivered to the mobile node."
9822,"The sharp
reader will note that the encapsulation/decapsulation described here is identical to the notion of
tunneling, discussed in Section 4.3 in the context of IP multicast and IPv6."
9823,Let’s next consider how a mobile node sends datagrams to a correspondent.
9824,"This is quite simple, as themobile node can address its datagram directly to the correspondent (using its own permanent address
as the source address, and theFigure 7.25 Encapsulation and decapsulation
correspondent’s address as the destination address)."
9825,"Since the mobile node knows the correspondent’s
address, there is no need to route the datagram back through the home agent."
9826,"This is shown as step 4
in Figure 7.24."
9827,"Let’s summarize our discussion of indirect routing by listing the new network-layer functionality required
to support mobility."
9828,A mobile-node–to–foreign-agent protocol.
9829," The mobile node will register with the foreign agent
when attaching to the foreign network."
9830,"Similarly, a mobile node will deregister with the foreign agentwhen it leaves the foreign network."
9831,A foreign-agent–to–home-agent registration protocol.
9832," The foreign agent will register the mobile
node’s COA with the home agent."
9833,"A foreign agent need not explicitly deregister a COA when amobile node leaves its network, because the subsequent registration of a new COA, when themobile node moves to a new network, will take care of this."
9834,A home-agent datagram encapsulation protocol.
9835," Encapsulation and forwarding of the
correspondent’s original datagram within a datagram addressed to the COA."
9836,A foreign-agent decapsulation protocol.
9837," Extraction of the correspondent’s original datagram from
the encapsulating datagram, and the forwarding of the original datagram to the mobile node."
9838,"The previous discussion provides all the pieces—foreign agents, the home agent, and indirectforwarding—needed for a mobile node to maintain an ongoing connection while moving among
networks."
9839,"As an example of how these pieces fit together, assume the mobile node is attached to
foreign network A, has registered a COA in network A with its home agent, and is receiving datagramsthat are being indirectly routed through its home agent."
9840,"The mobile node now moves to foreign networkB and registers with the foreign agent in network B, which informs the home agent of the mobile node’snew COA."
9841,"From this point on, the home agent will reroute datagrams to foreign network B."
9842,"As far as a
correspondent is concerned, mobility is transparent—datagrams are routed via the same home agent
both before and after the move."
9843,"As far as the home agent is concerned, there is no disruption in the flowof datagrams—arriving datagrams are first forwarded to foreign network A; after the change in COA,datagrams are forwarded to foreign network B."
9844,But will the mobile node see an interrupted flow ofdatagrams as it moves between networks?
9845,"As long as the time between the mobile node’sdisconnection from network A (at which point it can no longer receive datagrams via A) and itsattachment to network B (at which point it will register a new COA with its home agent) is small, few
datagrams will be lost."
9846,"Recall from Chapter 3 that end-to-end connections can suffer datagram loss due
to network congestion."
9847,"Hence occasional datagram loss within a connection when a node moves
between networks is by no means a catastrophic problem."
9848,"If loss-free communication is required, upper-layer mechanisms will recover from datagram loss, whether such loss results from network congestion
or from user mobility."
9849,"An indirect routing approach is used in the mobile IP standard [RFC 5944] , as discussed in Section 7.6.
Direct Routing to a Mobile NodeThe indirect routing approach illustrated in Figure 7.24 suffers from an inefficiency known as the
triangle routing problem —datagrams addressed to the mobile node must be routed first to the home
agent and then to the foreign network, even when a much more efficient route exists between the
correspondent and the mobile node."
9850,"In the worst case, imagine a mobile user who is visiting the foreignnetwork of a colleague."
9851,"The two are sitting side by side and exchanging data over the network.Datagrams from the correspondent (in this case the colleague of the visitor) are routed to the mobileuser’s home agent and then back again to the foreign network!
Direct routing overcomes the inefficiency of triangle routing, but does so at the cost of additional
complexity."
9852,"In the direct routing approach, a correspondent agent in the correspondent’s network first
learns the COA of the mobile node."
9853,"This can be done by having the correspondent agent query the
home agent, assuming that (as in the case of indirect routing) the mobile node has an up-to-date valuefor its COA registered with its home agent."
9854,"It is also possible for the correspondent itself to perform thefunction of the correspondent agent, just as a mobile node could perform the function of the foreign
agent."
9855,This is shown as steps 1 and 2 in Figure 7.26.
9856,"The correspondent agent then tunnels datagrams
directly to the mobile node’s COA, in a manner analogous to the tunneling performed by the homeagent, steps 3 and 4 in Figure 7.26.While direct routing overcomes the triangle routing problem, it introduces two important additional
challenges:
A mobile-user location protocol  is needed for the correspondent agent to query the home agent to
obtain the mobile node’s COA (steps 1 and 2 in Figure 7.26)."
9857,"When the mobile node moves from one foreign network to another, how will data now be forwarded
to the new foreign network?"
9858,"In the case of indirect routing, this problem was easily solved by
updating the COA maintained by the home agent."
9859,"However, with direct routing, the home agent isqueried for the COA by the correspondent agent only once, at the beginning of the session."
9860,"Thus,
updating the COA at the home agent, while necessary, will not be enough to solve the problem of
routing data to the mobile node’s new foreign network."
9861,One solution would be to create a new protocol to notify the correspondent of the changing COA.
9862,"Analternate solution, and one that we’ll see adopted in practice
Figure 7.26 Direct routing to a mobile userin GSM networks, works as follows."
9863,"Suppose data is currently being forwarded to the mobile node in the
foreign network where the mobile node was located when the session first started (step 1 in Figure
7.27)."
9864,"We’ll identify the foreign agent in that foreign network where the mobile node was first found as
the anchor ­foreign agent ."
9865,"When the mobile node moves to a new foreign network (step 2 in Figure
7.27), the mobile node registers with the new foreign agent (step 3), and the new foreign agent provides
the anchor foreign agent with the mobile node’s new COA (step 4)."
9866,"When the anchor foreign agent
receives an encapsulated datagram for a departed mobile node, it can then re-encapsulate thedatagram and forward it to the mobile node (step 5) using the new COA."
9867,"If the mobile node later movesyet again to a new foreign network, the foreign agent in that new visited network would then contact theanchor foreign agent in order to set up forwarding to this new foreign network."
9868,"Figure 7.27 Mobile transfer between networks with direct routing7.6 Mobile IP
The Internet architecture and protocols for supporting mobility, collectively known as mobile IP, are
defined primarily in RFC 5944 for IPv4."
9869,"Mobile IP is a flexible standard, supporting many differentmodes of operation (for example, operation with or without a foreign agent), multiple ways for agentsand mobile nodes to discover each other, use of single or multiple COAs, and multiple forms ofencapsulation."
9870,"As such, mobile IP is a complex standard, and would require an entire book to describe
in detail; indeed one such book is [Perkins 1998b] ."
9871,"Our modest goal here is to provide an overview of
the most important aspects of mobile IP and to illustrate its use in a few common-case scenarios."
9872,"The mobile IP architecture contains many of the elements we have considered above, including the
concepts of home agents, foreign agents, care-of addresses, and encapsulation/decapsulation."
9873,"The
current standard [RFC 5944]  specifies the use of indirect routing to the mobile node."
9874,"The mobile IP standard consists of three main pieces:
Agent discovery."
9875,"Mobile IP defines the protocols used by a home or foreign agent to advertise its
services to mobile nodes, and protocols for mobile nodes to solicit the services of a foreign or home
agent."
9876,Registration with the home agent.
9877," Mobile IP defines the protocols used by the mobile node and/or
foreign agent to register and deregister COAs with a mobile node’s home agent."
9878,Indirect routing of datagrams.
9879," The standard also defines the manner in which datagrams are
forwarded to mobile nodes by a home agent, including rules for forwarding datagrams, rules for
handling error conditions, and several forms of encapsulation [RFC 2003 , RFC 2004] ."
9880,Security considerations are prominent throughout the mobile IP standard.
9881,"For example, authentication of
a mobile node is clearly needed to ensure that a ­malicious user does not register a bogus care-of
address with a home agent, which could cause all datagrams addressed to an IP address to beredirected to the malicious user."
9882,"Mobile IP achieves security using many of the mechanisms that we will
examine in Chapter 8, so we will not address security considerations in our discussion below."
9883,"Agent Discovery
A mobile IP node arriving to a new network, whether attaching to a foreign network or returning to its
home network, must learn the identity of the corresponding foreign or home agent."
9884,"Indeed it is the
discovery of a new foreign agent, with a new network address, that allows the network layer in a mobilenode to learn that it has moved into a new foreign network."
9885,This process is known as agent discovery.
9886,"Agent discovery can be accomplished in one of two ways: via agent advertisement or via agent
solicitation."
9887,"With agent advertisement , a foreign or home agent advertises its services using an extension to the
existing router discovery protocol [RFC 1256] ."
9888,"The agent periodically broadcasts an ICMP message
with a type field of 9 (router discovery) on all links to which it is connected."
9889,"The router discovery
message contains the IP address of the router (that is, the agent), thus allowing a mobile node to learnthe agent’s IP address."
9890,The router discovery message also contains a mobility agent advertisementextension that contains additional information needed by the mobile node.
9891,"Among the more importantfields in the extension are the following:
Home agent bit (H)."
9892, Indicates that the agent is a home agent for the network in which it resides.
9893,Foreign agent bit (F).
9894, Indicates that the agent is a foreign agent for the network in which it resides.
9895,Registration required bit (R).
9896," Indicates that a mobile user in this network must register with a
foreign agent."
9897,"In particular, a mobile user cannot obtain a care-of address in the foreign network (forexample, using DHCP) and assume the functionality of the foreign agent for itself, without registeringwith the foreign agent."
9898,"Figure 7.28 ICMP router discovery message with mobility agent ­advertisement extension
M, G encapsulation bits."
9899," Indicate whether a form of encapsulation other than IP-in-IP
encapsulation will be used."
9900,Care-of address (COA) fields.
9901,A list of one or more care-of addresses provided by the foreignagent.
9902,"In our example below, the COA will be associated with the foreign agent, who will receive
datagrams sent to the COA and then forward them to the appropriate mobile node."
9903,"The mobile user
will select one of these addresses as its COA when registering with its home agent."
9904,Figure 7.28 illustrates some of the key fields in the agent advertisement message.
9905,"With agent solicitation , a mobile node wanting to learn about agents without waiting to receive an
agent advertisement can broadcast an agent solicitation message, which is simply an ICMP message
with type value 10."
9906,"An agent receiving the solicitation will unicast an agent advertisement directly to themobile node, which can then proceed as if it had received an unsolicited advertisement."
9907,"Registration with the Home Agent
Once a mobile IP node has received a COA, that address must be registered with the home agent."
9908,"This
can be done either via the foreign agent (who then registers the COA with the home agent) or directly by
the mobile IP node itself."
9909,We consider the former case below.
9910,Four steps are involved.
9911,1.
9912,"Following the receipt of a foreign agent advertisement, a mobile node sends a mobile IP
registration message to the foreign agent."
9913,"The registration message is carried within a UDP
datagram and sent to port 434."
9914,"The registration message carries a COA advertised by theforeign agent, the address of the home agent (HA), the permanent address of the mobile node
(MA), the requested lifetime of the registration, and a 64-bit registration identification."
9915,"The
requested registration lifetime is the number of seconds that the registration is to be valid."
9916,"If theregistration is not renewed at the home agent within the specified lifetime, the registration willbecome invalid."
9917,"The registration identifier acts like a sequence number and serves to match areceived registration reply with a registration request, as discussed below."
9918,2.
9919,"The foreign agent receives the registration message and records the mobile node’s permanent
IP address."
9920,"The foreign agent now knows that it should be looking for datagrams containing an
encapsulated datagram whose destination address matches the permanent address of themobile node."
9921,"The foreign agent then sends a mobile IP registration message (again, within a
UDP datagram) to port 434 of the home agent."
9922,"The message contains the COA, HA, MA,
encapsulation format requested, requested registration lifetime, and registration identification."
9923,3.
9924,The home agent receives the registration request and checks for authenticity and correctness.
9925,"The home agent binds the mobile node’s permanent IP address with the COA; in the future,
datagrams arriving at the home agent and addressed to the mobile node will now beencapsulated and tunneled to the COA."
9926,"The home agent sends a mobile IP registration reply
containing the HA, MA, actual registration lifetime, and the registration identification of the
request that is being satisfied with this reply."
9927,4.
9928,"The foreign agent receives the registration reply and then forwards it to the mobile node.At this point, registration is complete, and the mobile node can receive datagrams sent to its permanent
address."
9929,Figure 7.29 illustrates these steps.
9930,"Note that the home agent specifies a lifetime that is smaller
than the lifetime requested by the mobile node."
9931,A foreign agent need not explicitly deregister a COA when a mobile node leaves its network.
9932,"This will
occur automatically, when the mobile node moves to a new network (whether another foreign network or
its home network) and registers a new COA."
9933,"The mobile IP standard allows many additional scenarios and capabilities in addition to those described
previously."
9934,The interested reader should consult [Perkins 1998b ; RFC 5944] .
9935,"Figure 7.29 Agent advertisement and mobile IP registration7.7 Managing Mobility in Cellular Networks
Having examined how mobility is managed in IP networks, let’s now turn our attention to networks with
an even longer history of supporting mobility—cellular telephony networks."
9936,"Whereas we focused on the
first-hop wireless link in cellular networks in Section 7.4, we’ll focus here on mobility, using the GSM
cellular network [Goodman 1997; Mouly 1992; Scourias 2012 ; Kaaranen 2001 ; Korhonen 2003;
Turner 2012] as our case study, since it is a mature and widely deployed technology."
9937,"Mobility in 3G and
4G networks is similar in principle to that used in GSM."
9938,"As in the case of mobile IP, we’ll see that a
number of the fundamental principles we identified in Section 7.5 are embodied in GSM’s network
architecture."
9939,"Like mobile IP, GSM adopts an indirect routing approach (see Section 7.5.2), first routing the
correspondent’s call to the mobile user’s home network and from there to the visited network."
9940,"In GSM
terminology, the mobile users’s home network is referred to as the mobile user’s home public land
mobile network (home PLMN) ."
9941,"Since the PLMN acronym is a bit of a mouthful, and mindful of our
quest to avoid an alphabet soup of acronyms, we’ll refer to the GSM home PLMN simply as the home
network."
9942,"The home network is the cellular provider with which the mobile user has a subscription (i.e.,the provider that bills the user for monthly cellular service)."
9943,"The visited PLMN, which we’ll refer to simplyas the visited network, is the network in which the mobile user is currently residing."
9944,"As in the case of mobile IP, the responsibilities of the home and visited networks are quite different."
9945,"The home network maintains a database known as the home location register (HLR) , which
contains the permanent cell phone number and subscriber profile information for each of its
subscribers."
9946,"Importantly, the HLR also contains information about the current locations of thesesubscribers."
9947,"That is, if a mobile user is currently roaming in another provider’s cellular network, the
HLR contains enough information to obtain (via a process we’ll describe shortly) an address in the
visited network to which a call to the mobile user should be routed."
9948,"As we’ll see, a special switch inthe home network, known as the Gateway Mobile services Switching Center (GMSC)  is contacted
by a correspondent when a call is placed to a mobile user."
9949,"Again, in our quest to avoid an alphabetsoup of acronyms, we’ll refer to the GMSC here by a more descriptive term, home MSC."
9950,The visited network maintains a database known as the visitor location register (VLR) .
9951,"The VLR
contains an entry for each mobile user that is currently in the portion of the network served by the
VLR."
9952,VLR entries thus come and go as mobile users enter and leave the network.
9953,"A VLR is usuallyco-located with the mobile switching center (MSC) that coordinates the setup of a call to and from
the visited network.In practice, a provider’s cellular network will serve as a home network for its subscribers and as a visited
network for mobile users whose subscription is with a different cellular provider."
9954,"Figure 7.30 Placing a call to a mobile user: Indirect routing
7.7.1 Routing Calls to a Mobile User
We’re now in a position to describe how a call is placed to a mobile GSM user in a visited network."
9955,"We’ll
consider a simple example below; more complex scenarios are described in [Mouly 1992]."
9956,"The steps,
as illustrated in Figure 7.30, are as follows:
1."
9957,The correspondent dials the mobile user’s phone number.
9958,"This number itself does not refer to a
particular telephone line or location (after all, the phone number is fixed and the user is mobile!)."
9959,"The leading digits in the number are sufficient to globally identify the mobile’s home network.The call is routed from the correspondent through the PSTN to the home MSC in the mobile’s
home network."
9960,This is the first leg of the call.
9961,2.
9962,"The home MSC receives the call and interrogates the HLR to determine the location of the
mobile user."
9963,"In the simplest case, the HLR returns the mobile station roaming number
(MSRN), which we will refer to as the roaming number."
9964,"Note that this number is different from
the mobile’s permanent phone number, which is associated with the mobile’s home network."
9965,"Theroaming number is ephemeral: It is temporarily assigned to a mobile when it enters a visited
network."
9966,"The roaming number serves a role similar to that of the care-of address in mobile IP
and, like the COA, is invisible to the correspondent and the mobile."
9967,"If HLR does not have the
roaming number, it returns the address of the VLR in the visited network."
9968,"In this case (not shown
in Figure 7.30), the home MSC will need to query the VLR to obtain the roaming number of the
mobile node."
9969,"But how does the HLR get the roaming number or the VLR address in the first
place?"
9970,What happens to these values when the mobile user moves to another visited network?
9971,We’ll consider these important questions shortly.
9972,3.
9973,"Given the roaming number, the home MSC sets up the second leg of the call through the
network to the MSC in the visited network."
9974,"The call is completed, being routed from the
correspondent to the home MSC, and from there to the visited MSC, and from there to the basestation serving the mobile user."
9975,An unresolved question in step 2 is how the HLR obtains information about the location of the mobileuser.
9976,"When a mobile telephone is switched on or enters a part of a visited network that is covered by anew VLR, the mobile must register with the visited network."
9977,This is done through the exchange ofsignaling messages between the mobile and the VLR.
9978,"The visited VLR, in turn, sends a location updaterequest message to the mobile’s HLR."
9979,"This message informs the HLR of either the roaming number atwhich the mobile can be contacted, or the address of the VLR (which can then later be queried to obtainthe mobile number)."
9980,"As part of this exchange, the VLR also obtains subscriber information from the HLRabout the mobile and determines what services (if any) should be accorded the mobile user by the
visited network."
9981,"7.7.2 Handoffs in GSM
A handoff occurs when a mobile station changes its association from one base station to another during
a call."
9982,"As shown in Figure 7.31, a mobile’s call is initially (before handoff) routed to the mobile through
one base station (which we’ll refer to as the old base station), and after handoff is routed to the mobile
through another base
Figure 7.31 Handoff scenario between base stations with a common MSC
station (which we’ll refer to as the new base station)."
9983,"Note that a handoff between base stations results
not only in the mobile transmitting/receiving to/from a new base station, but also in the rerouting of the
ongoing call from a switching point within the network to the new base station."
9984,"Let’s initially assume thatthe old and new base stations share the same MSC, and that the rerouting occurs at this MSC."
9985,"There may be several reasons for handoff to occur, including (1) the signal between the current base
station and the mobile may have deteriorated to such an extent that the call is in danger of beingdropped, and (2) a cell may have become overloaded, handling a large number of calls."
9986,This congestionmay be alleviated by handing off mobiles to less congested nearby cells.
9987,"While it is associated with a base station, a mobile periodically measures the strength of a beacon signal
from its current base station as well as beacon signals from nearby base stations that it can “hear.”These measurements are reported once or twice a second to the mobile’s current base station."
9988,"Handoffin GSM is initiated by the old base station based on these measurements, the current loads of mobiles
in nearby cells, and other factors [Mouly 1992]."
9989,"The GSM standard does not specify the specific
algorithm to be used by a base station to determine whether or not to perform handoff."
9990,"Figure 7.32 illustrates the steps involved when a base station does decide to hand off a mobile user:
1."
9991,"The old base station (BS) informs the visited MSC that a handoff is to be performed and the BS
(or possible set of BSs) to which the mobile is to be handed off."
9992,2.
9993,"The visited MSC initiates path setup to the new BS, allocating the resources needed to carry thererouted call, and signaling the new BS that a handoff is about to occur."
9994,3.
9995,The new BS allocates and activates a radio channel for use by the mobile.
9996,4.
9997,"The new BS signals back to the visited MSC and the old BS that the visited-MSC-to-new-BSpath has been established and that the mobile should be
Figure 7.32 Steps in accomplishing a handoff between base stations with a common MSC
informed of the impending handoff."
9998,"The new BS provides all of the information that the mobile
will need to associate with the new BS."
9999,5.
10000,The mobile is informed that it should perform a handoff.
10001,"Note that up until this point, the mobile
has been blissfully unaware that the network has been laying the groundwork (e.g., allocating a
channel in the new BS and allocating a path from the visited MSC to the new BS) for a handoff."
10002,6.
10003,"The mobile and the new BS exchange one or more messages to fully activate the new channel
in the new BS."
10004,7.
10005,"The mobile sends a handoff complete message to the new BS, which is forwarded up to thevisited MSC."
10006,The visited MSC then reroutes the ongoing call to the mobile via the new BS.
10007,8.
10008,The resources allocated along the path to the old BS are then released.
10009,"Let’s conclude our discussion of handoff by considering what happens when the mobile moves to a BS
that is associated with a different MSC than the old BS, and what happens when this inter-MSC handoff
occurs more than once."
10010,"As shown in Figure 7.33, GSM defines the notion of an anchor MSC ."
10011,"The
anchor MSC is the MSC visited by the mobile when a call first begins; the anchor MSC thus remainsunchanged during the call."
10012,"Throughout the call’s duration and regardless of the number of inter-MSC
Figure 7.33 Rerouting via the anchor MSCTable 7.2 Commonalities between mobile IP and GSM mobility
GSM element Comment on GSM element Mobile
IPelement
Home system Network to which the mobile user's permanent phone numberbelongs.Homenetwork
Gateway mobile
switching center or
simply home MSC,Home location register(HLR)Home MSC: point of contact to obtain routable address of
mobile user."
10013,"HLR: database in home system containing
permanent phone number, profile information, current locationof mobile user, subscription information.Home
agent
Visited system Network other than home system where mobile user is
currently residing.Visitednetwork
Visited mobile servicesswitching center,Visitor location register(VLR)Visited MSC: responsible for setting up calls to/from mobilenodes in cells associated with MSC."
10014,"VLR: temporary databaseentry in visited system, containing subscription information foreach visiting mobile user.ForeignagentMobile station roaming
number (MSRN) or
simply roaming numberRoutable address for telephone call segment between home
MSC and visited MSC, visible to neither the mobile nor thecorrespondent.Care-of
address
transfers performed by the mobile, the call is routed from the home MSC to the anchor MSC, and thenfrom the anchor MSC to the visited MSC where the mobile is currently located."
10015,"When a mobile movesfrom the coverage area of one MSC to another, the ongoing call is rerouted from the anchor MSC to the
new visited MSC containing the new base station."
10016,"Thus, at all times there are at most three MSCs (the
home MSC, the anchor MSC, and the visited MSC) between the correspondent and the mobile."
10017,"Figure
7.33 illustrates the routing of a call among the MSCs visited by a mobile user."
10018,"Rather than maintaining a single MSC hop from the anchor MSC to the current MSC, an alternative
approach would have been to simply chain the MSCs visited by the mobile, having an old MSC forwardthe ongoing call to the new MSC each time the mobile moves to a new MSC."
10019,"Such MSC chaining can infact occur in IS-41 cellular networks, with an optional path minimization step to remove MSCs between
the anchor MSC and the current visited MSC [Lin 2001]."
10020,Let’s wrap up our discussion of GSM mobility management with a comparison of mobility managementin GSM and Mobile IP.
10021,"The comparison in Table 7.2 indicates that although IP and cellular networks are
fundamentally different in many ways, they share a surprising number of common functional elements
and overall approaches in handling mobility.7.8 Wireless and Mobility: Impact on ­Higher-Layer Protocols
In this chapter, we’ve seen that wireless networks differ significantly from their wired counterparts at
both the link layer (as a result of wireless channel characteristics such as fading, multipath, and hiddenterminals) and at the network layer (as a result of mobile users who change their points of attachment to
the network)."
10022,But are there important differences at the transport and application layers?
10023,"It’s tempting tothink that these differences will be minor, since the network layer provides the same best-effort delivery
service model to upper layers in both wired and wireless networks."
10024,"Similarly, if protocols such as TCP or
UDP are used to provide transport-layer services to applications in both wired and wireless networks,then the application layer should remain unchanged as well."
10025,In one sense our intuition is right—TCP andUDP can (and do) operate in networks with wireless links.
10026,"On the other hand, transport protocols ingeneral, and TCP in particular, can sometimes have very different performance in wired and wirelessnetworks, and it is here, in terms of performance, that differences are manifested."
10027,Let’s see why.
10028,"Recall that TCP retransmits a segment that is either lost or corrupted on the path between sender and
receiver."
10029,"In the case of mobile users, loss can result from either network congestion (router buffer
overflow) or from handoff (e.g., from delays in rerouting segments to a mobile’s new point of attachmentto the network)."
10030,"In all cases, TCP’s receiver-to-sender ACK indicates only that a segment was notreceived intact; the sender is unaware of whether the segment was lost due to congestion, duringhandoff, or due to detected bit errors."
10031,"In all cases, the sender’s response is the same—to retransmit the
segment."
10032,"TCP’s congestion-control response is also the same in all cases—TCP decreases its
congestion window, as discussed in Section 3.7. By unconditionally decreasing its congestion window,
TCP implicitly assumes that segment loss results from congestion rather than corruption or handoff."
10033,Wesaw in Section 7.2 that bit errors are much more common in wireless networks than in wired networks.
10034,"When such bit errors occur or when handoff loss occurs, there’s really no reason for the TCP sender to
decrease its congestion window (and thus decrease its sending rate)."
10035,"Indeed, it may well be the casethat router buffers are empty and packets are flowing along the end-to-end path unimpeded bycongestion."
10036,"Researchers realized in the early to mid 1990s that given high bit error rates on wireless links and the
possibility of handoff loss, TCP’s congestion-control response could be problematic in a wireless setting.Three broad classes of approaches are possible for dealing with this problem:
Local recovery."
10037,"Local recovery protocols recover from bit errors when and where (e.g., at thewireless link) they occur, e.g., the 802.11 ARQ protocol we studied in Section 7.3, or more
sophisticated approaches that use both ARQ and FEC [Ayanoglu 1995].TCP sender awareness of wireless links."
10038,"In the local recovery approaches, the TCP sender is
blissfully unaware that its segments are traversing a wireless link."
10039,"An alternative approach is for the
TCP sender and receiver to be aware of the existence of a wireless link, to distinguish betweencongestive losses occurring in the wired network and corruption/loss occurring at the wireless link,and to invoke congestion control only in response to congestive wired-network losses."
10040,"[Balakrishnan 1997]  investigates various types of TCP, assuming that end ­systems can make this
distinction."
10041,"[Liu 2003] investigates techniques for distinguishing between losses on the wired and
wireless segments of an end-to-end path."
10042,Split-connection approaches.
10043," In a split-connection approach [Bakre 1995] , the end-to-end
connection between the mobile user and the other end point is broken into two transport-layer
connections: one from the mobile host to the wireless access point, and one from the wirelessaccess point to the other communication end point (which we’ll assume here is a wired host)."
10044,"The
end-to-end connection is thus formed by the concatenation of a wireless part and a wired part."
10045,"The
transport layer over the wireless segment can be a standard TCP connection [Bakre 1995] , or a
specially tailored error recovery protocol on top of UDP."
10046,"[Yavatkar 1994]  investigates the use of a
transport-layer selective repeat protocol over the wireless connection."
10047,"Measurements reported in[Wei 2006] indicate that split TCP connections are widely used in cellular data networks, and that
significant improvements can indeed be made through the use of split TCP connections."
10048,Our treatment of TCP over wireless links has been necessarily brief here.
10049,"­In-depth surveys of TCP
challenges and solutions in wireless networks can be found in [Hanabali 2005; Leung 2006]."
10050,"We
encourage you to consult the references for details of this ongoing area of research."
10051,"Having considered transport-layer protocols, let us next consider the effect of wireless and mobility on
application-layer protocols."
10052,"Here, an important consideration is that wireless links often have relatively
low bandwidths, as we saw in Figure 7.2. As a result, applications that operate over wireless links,
particularly over cellular wireless links, must treat bandwidth as a scarce commodity."
10053,"For example, a
Web server serving content to a Web browser executing on a 4G phone will likely not be able to providethe same image-rich content that it gives to a browser operating over a wired connection."
10054,"Although
wireless links do provide challenges at the application layer, the mobility they enable also makes
possible a rich set of location-aware and context-aware applications [Chen 2000; Baldauf 2007]."
10055,"More
generally, wireless and mobile networks will play a key role in realizing the ubiquitous computingenvironments of the future [Weiser 1991] ."
10056,"It’s fair to say that we’ve only seen the tip of the iceberg when
it comes to the impact of wireless and mobile networks on networked applications and their protocols!7.9 Summary
Wireless and mobile networks have revolutionized telephony and are having an increasingly profound
impact in the world of computer networks as well."
10057,"With their anytime, anywhere, untethered access intothe global network infrastructure, they are not only making network access more ubiquitous, they arealso enabling an exciting new set of location-dependent services."
10058,"Given the growing importance ofwireless and mobile networks, this chapter has focused on the principles, common link technologies,
and network architectures for supporting wireless and mobile communication."
10059,"We began this chapter with an introduction to wireless and mobile networks, drawing an important
distinction between the challenges posed by the wireless  nature of the communication links in such
networks, and by the mobility  that these wireless links enable."
10060,"This allowed us to better isolate, identify,
and master the key concepts in each area."
10061,"We focused first on wireless communication, considering thecharacteristics of a wireless link in Section 7.2. In Sections 7.3 and 7.4, we examined the link-level
aspects of the IEEE 802.11 (WiFi) wireless LAN standard, two IEEE 802.15 personal area networks
(Bluetooth and Zigbee), and 3G and 4G cellular Internet access."
10062,"We then turned our attention to the
issue of mobility."
10063,"In Section 7.5, we identified several forms of mobility, with points along this spectrum
posing different challenges and admitting different solutions."
10064,"We considered the problems of locating
and routing to a mobile user, as well as approaches for handing off the mobile user who dynamicallymoves from one point of attachment to the network to another."
10065,"We examined how these issues were
addressed in the mobile IP standard and in GSM, in Sections 7.6 and 7.7, respectively."
10066,"Finally, we
considered the impact of wireless links and mobility on transport-layer protocols and networkedapplications in ­Section 7.8.
Although we have devoted an entire chapter to the study of wireless and mobile networks, an entire
book (or more) would be required to fully explore this exciting and rapidly expanding field."
10067,"Weencourage you to delve more deeply into this field by consulting the many references provided in thischapter.Homework Problems and Questions
Chapter 7 Review Questions
Section 7.1
Section 7.2
Sections 7.3 and 7.4R1."
10068,What does it mean for a wireless network to be operating in “infrastructure mode”?
10069,"If the
network is not in infrastructure mode, what mode of operation is it in, and what is the difference
between that mode of operation and infrastructure mode?"
10070,R2.
10071,What are the four types of wireless networks identified in our taxonomy in Section 7.1 ?
10072,Which of these types of wireless networks have you used?
10073,R3.
10074,"What are the differences between the following types of wireless channel impairments: path
loss, multipath propagation, interference from other sources?"
10075,R4.
10076,"As a mobile node gets farther and farther away from a base station, what are two actions
that a base station could take to ensure that the loss probability of a transmitted frame does not
increase?"
10077,R5.
10078,Describe the role of the beacon frames in 802.11.
10079,R6.
10080,"True or false: Before an 802.11 station transmits a data frame, it must first send an RTS
frame and receive a corresponding CTS frame."
10081,R7.
10082,Why are acknowledgments used in 802.11 but not in wired Ethernet?
10083,R8.
10084,True or false: Ethernet and 802.11 use the same frame structure.R9.
10085,Describe how the RTS threshold works.R10.
10086,"Suppose the IEEE 802.11 RTS and CTS frames were as long as the standard DATA and
ACK frames."
10087,Would there be any advantage to using the CTS and RTS frames?
10088,"Why or why
not?"
10089,R11.
10090,"Section 7.3.4 discusses 802.11 mobility, in which a wireless station moves from one BSS
to another within the same subnet."
10091,"When the APs are interconnected with a switch, an AP may
need to send a frame with a spoofed MAC address to get the switch to forward the frame
properly."
10092,"Why?Sections 7.5 and 7.6
Section 7.7
Section 7.8
ProblemsR12."
10093,"What are the differences between a master device in a Bluetooth network and a base
station in an 802.11 network?"
10094,R13.
10095,What is meant by a super frame in the 802.15.4 Zigbee standard?
10096,R14.
10097,What is the role of the “core network” in the 3G cellular data architecture?R15.
10098,What is the role of the RNC in the 3G cellular data network architecture?
10099,"What role does
the RNC play in the cellular voice network?"
10100,R16.
10101,"What is the role of the eNodeB, MME, P-GW, and S-GW in 4G architecture?"
10102,R17.
10103,What are three important differences between the 3G and 4G cellular ­architectures?
10104,R18.
10105,"If a node has a wireless connection to the Internet, does that node have to be mobile?"
10106,Explain.
10107,"Suppose that a user with a laptop walks around her house with her laptop, and always
accesses the Internet through the same access point."
10108,Is this user mobile from a networkstandpoint?
10109,Explain.
10110,R19.
10111,What is the difference between a permanent address and a care-of address?
10112,"Who assigns
a care-of address?"
10113,R20.
10114,Consider a TCP connection going over Mobile IP.
10115,"True or false: The TCP connection
phase between the correspondent and the mobile host goes through the mobile’s home network,
but the data transfer phase is directly between the correspondent and the mobile host,bypassing the home network."
10116,R21.
10117,What are the purposes of the HLR and VLR in GSM networks?
10118,"What elements of mobile IP
are similar to the HLR and VLR?"
10119,R22.
10120,What is the role of the anchor MSC in GSM networks?
10121,R23.
10122,"What are three approaches that can be taken to avoid having a single ­wireless link
degrade the performance of an end-to-end transport-layer TCP ­connection?"
10123,P1.
10124,Consider the single-sender CDMA example in Figure 7.5 .
10125,"What would be the sender’s
output (for the 2 data bits shown) if the sender’s CDMA code were ?"
10126,P2.
10127,Consider sender 2 in Figure 7.6 .
10128,"What is the sender’s output to the channel (before it is
added to the signal from sender 1), ?(1,−1,1,−1,1,−1,1,−1)
Zi,m2P3."
10129,Suppose that the receiver in Figure 7.6 wanted to receive the data being sent by sender 2.
10130,"Show (by calculation) that the receiver is indeed able to recover sender 2’s data from the
aggregate channel signal by using sender 2’s code."
10131,P4.
10132,"For the two-sender, two-receiver example, give an example of two CDMA codes containing
1 and 21 values that do not allow the two receivers to extract the original transmitted bits from
the two CDMA senders."
10133,P5.
10134,"Suppose there are two ISPs providing WiFi access in a particular café, with each ISP
operating its own AP and having its own IP address block."
10135,a.
10136,"Further suppose that by accident, each ISP has configured its AP to operate overchannel 11."
10137,Will the 802.11 protocol completely break down in this situation?
10138,"Discuss
what happens when two stations, each associated with a different ISP, attempt totransmit at the same time."
10139,b.
10140,Now suppose that one AP operates over channel 1 and the other over channel 11.
10141,"How
do your answers change?"
10142,P6.
10143,"In step 4 of the CSMA/CA protocol, a station that successfully transmits a frame begins the
CSMA/CA protocol for a second frame at step 2, rather than at step 1."
10144,"What rationale might the
designers of CSMA/CA have had in mind by having such a station not transmit the second frameimmediately (if the channel is sensed idle)?"
10145,P7.
10146,"Suppose an 802.11b station is configured to always reserve the channel with the RTS/CTS
sequence."
10147,"Suppose this station suddenly wants to ­transmit 1,000 bytes of data, and all other
stations are idle at this time."
10148,"As a ­function of SIFS and DIFS, and ignoring propagation delay
and assuming no bit errors, calculate the time required to transmit the frame and receive theacknowledgment."
10149,P8.
10150,"Consider the scenario shown in Figure 7.34 , in which there are four wireless nodes, A, B,
C, and D."
10151,"The radio coverage of the four nodes is shown via the shaded ovals; all nodes share
the same frequency."
10152,"When A transmits, it
Figure 7.34 Scenario for problem P8
can only be heard/received by B; when B transmits, both A and C can hear/receive from B; when
C transmits, both B and D can hear/receive from C; when D transmits, only C can hear/receivefrom D."
10153,"Suppose now that each node has an infinite supply of messages that it wants to send to each of
the other nodes."
10154,"If a message’s destination is not an immediate neighbor, then the messagemust be relayed."
10155,"For example, if A wants to send to D, a message from A must first be sent to B,which then sends the message to C, which then sends the message to D."
10156,"Time is slotted, with amessage transmission time taking exactly one time slot, e.g., as in slotted Aloha."
10157,"During a slot, a
node can do one of the following: ( i) send a message, (ii) receive a message (if exactly one
message is being sent to it), (iii) remain silent."
10158,"As always, if a node hears two or more
simultaneous transmissions, a collision occurs and none of the transmitted messages are
received successfully."
10159,"You can assume here that there are no bit-level errors, and thus if exactlyone message is sent, it will be received correctly by those within the transmission radius of thesender."
10160,a.
10161,"Suppose now that an omniscient controller (i.e., a controller that knows the state of every
node in the network) can command each node to do whatever it (the omniscient
controller) wishes, i.e., to send a message, to receive a message, or to remain silent.Given this omniscient controller, what is the maximum rate at which a data message can
be transferred from C to A, given that there are no other messages between any other
source/destination pairs?"
10162,b.
10163,"Suppose now that A sends messages to B, and D sends messages to C."
10164,"What is the
combined maximum rate at which data messages can flow from A to B and from D to C?"
10165,c.
10166,"Suppose now that A sends messages to B, and C sends messages to D."
10167,What is thecombined maximum rate at which data messages can flow from A to B and from C to D?
10168,d.
10169,Suppose now that the wireless links are replaced by wired links.
10170,Repeat questions (a)through (c) again in this wired scenario.
10171,e.
10172,"Now suppose we are again in the wireless scenario, and that for every data messagesent from source to destination, the destination will send an ACK message back to the
source (e.g., as in TCP)."
10173,Also suppose that each ACK message takes up one slot.Repeat questions (a)–(c) above for this scenario.
10174,P9.
10175,Describe the format of the 802.15.1 Bluetooth frame.
10176,"You will have to do some reading
outside of the text to find this information."
10177,"Is there anything in the frame format that inherently
limits the number of active nodes in an 802.15.1 network to eight active nodes?"
10178,Explain.
10179,P10.
10180,Consider the following idealized LTE scenario.
10181,"The downstream channel (see Figure 7.21 )
is slotted in time, across F frequencies."
10182,"There are four nodes, A, B, C, and D, reachable from the
base station at rates of 10 Mbps, 5 Mbps, 2.5 Mbps, and 1 Mbps, respectively, on thedownstream channel."
10183,These rates assume that the base station utilizes all time slots availableon all F frequencies to send to just one station.
10184,"The base station has an infinite amount of data
to send to each of the nodes, and can send to any one of these four nodes using any of the F
frequencies during any time slot in the ­downstream sub-frame."
10185,a.
10186,"What is the maximum rate at which the base station can send to the nodes, assuming itcan send to any node it chooses during each time slot?"
10187,Is your solution fair?
10188,"Explain and
define what you mean by “fair.”
b."
10189,"If there is a fairness requirement that each node must receive an equal amount of data
during each one second interval, what is the average transmission rate by the base
station (to all nodes) during the downstream sub-frame?"
10190,Explain how you arrived at youranswer.
10191,c.
10192,"Suppose that the fairness criterion is that any node can receive at most twice as much
data as any other node during the sub-frame."
10193,"What is the average transmission rate by
the base station (to all nodes) during the sub-frame?"
10194,Explain how you arrived at youranswer.
10195,P11.
10196,"In Section 7.5 , one proposed solution that allowed mobile users to maintain their IP
addresses as they moved among foreign networks was to have a foreign network advertise a
highly specific route to the mobile user and use the existing routing infrastructure to propagatethis information throughout the network."
10197,We identified scalability as one concern.
10198,"Suppose thatwhen a mobile user moves from one network to another, the new foreign network advertises aspecific route to the mobile user, and the old foreign network withdraws its route."
10199,Consider howrouting information propagates in a distance-vector algorithm (particularly for the case ofinterdomain routing among networks that span the globe).
10200,a.
10201,"Will other routers be able to route datagrams immediately to the new foreign network as
soon as the foreign network begins advertising its route?"
10202,b.
10203,Is it possible for different routers to believe that different foreign networks contain themobile user?
10204,c.
10205,Discuss the timescale over which other routers in the network will eventually learn thepath to the mobile users.
10206,P12.
10207,Suppose the correspondent in Figure 7.23 were mobile.
10208,"Sketch the additional network-
layer infrastructure that would be needed to route the datagram from the original mobile user to
the (now mobile) correspondent."
10209,"Show the structure of the datagram(s) between the original
mobile user and the (now mobile) correspondent, as in Figure 7.24 ."
10210,P13.
10211,"In mobile IP, what effect will mobility have on end-to-end delays of datagrams between the
source and destination?"
10212,P14.
10213,Consider the chaining example discussed at the end of Section 7.7.2 .
10214,"Suppose a mobile
user visits foreign networks A, B, and C, and that a correspondent begins a connection to the
mobile user when it is resident in foreign ­network A."
10215,"List the sequence of messages between
foreign agents, and between foreign agents and the home agent as the mobile user moves from
network A to network B to network C."
10216,"Next, suppose chaining is not performed, and the
correspondent (as well as the home agent) must be explicitly notified of the changes in themobile user’s care-of address."
10217,"List the sequence of messages that would need to be exchangedin this second scenario.Wireshark Lab
At the Web site for this textbook, www.pearsonhighered.com/ cs-resources , you’ll find a Wireshark
lab for this chapter that captures and studies the 802.11 frames exchanged between a wireless laptop
and an access point."
10218,"AN INTERVIEW WITH…
Deborah Estrin
Deborah Estrin is a Professor of Computer Science at Cornell Tech in New York City and a
Professor of Public Health at Weill Cornell Medical College."
10219,"She is founder of the Health Tech
Hub at Cornell Tech and co-founder of the non-profit startup Open mHealth ."
10220,"She received her
Ph.D. (1985) in Computer Science from M.I.T. and her B.S. (1980) from UC Berkeley."
10221,"Estrin’s
early research focused on the design of network protocols, including multicast and inter-domainrouting."
10222,"In 2002 Estrin founded the NSF-funded Science and Technology Center at UCLA,
Center for Embedded Networked Sensing (CENS http:/ /cens.ucla.edu.)."
10223,"CENS launched new
areas of multi-disciplinary computer systems research from sensor networks for environmental
monitoring, to participatory sensing for citizen science."
10224,"Her current focus is on mobile health andsmall data, leveraging the pervasiveness of mobile devices and digital interactions for health andlife management, as described in her 2013 TEDMED talk."
10225,Professor Estrin is an elected memberof the American Academy of Arts and Sciences (2007) and the National Academy ofEngineering (2009).
10226,"She is a fellow of the IEEE, ACM, and AAAS."
10227,"She was selected as the firstACM-W Athena Lecturer (2006), awarded the Anita Borg Institute’s Women of Vision Award for
Innovation (2007), inducted into the WITI hall of fame (2008) and awarded Doctor Honoris
Causa  from EPFL (2008) and Uppsala University (2011)."
10228,P15.
10229,Consider two mobile nodes in a foreign network having a foreign agent.
10230,"Is it possible for the
two mobile nodes to use the same care-of address in mobile IP?"
10231,Explain your answer.P16.
10232,"In our discussion of how the VLR updated the HLR with information about the mobile’s
current location, what are the advantages and disadvantages of providing the MSRN as opposed
to the address of the VLR to the HLR?Please describe a few of the most exciting projects you have worked on during your career."
10233,What were the biggest challenges?
10234,"In the mid-90s at USC and ISI, I had the great fortune to work with the likes of Steve Deering,
Mark Handley, and Van Jacobson on the design of multicast routing protocols (in particular,PIM)."
10235,"I tried to carry many of the architectural design lessons from multicast into the design ofecological monitoring arrays, where for the first time I really began to take applications andmultidisciplinary research seriously."
10236,"That interest in jointly innovating in the social and
technological space is what interests me so much about my latest area of research, mobile
health."
10237,"The challenges in these projects were as diverse as the problem domains, but what they
all had in common was the need to keep our eyes open to whether we had the problemdefinition right as we iterated between design and deployment, prototype and pilot."
10238,"None of themwere problems that could be solved analytically, with simulation or even in constructedlaboratory experiments."
10239,"They all challenged our ability to retain clean architectures in thepresence of messy problems and contexts, and they all called for extensive collaboration."
10240,"What changes and innovations do you see happening in wireless networks and mobility in the
future?"
10241,"In a prior edition of this interview I said that I have never put much faith into predicting the future,
but I did go on to speculate that we might see the end of feature phones (i.e., those that are notprogrammable and are used only for voice and text messaging) as smart phones become more
and more powerful and the primary point of Internet access for many—and now not so many
years later that is clearly the case."
10242,I also predicted that we would see the continued proliferationof embedded SIMs by which all sorts of devices have the ability to communicate via the cellularnetwork at low data rates.
10243,"While that has occurred, we see many devices and “Internet ofThings” that use embedded WiFi and other lower power, shorter range, forms of connectivity tolocal hubs."
10244,I did not anticipate at that time the emergence of a large consumer wearablesmarket.
10245,By the time the next edition is published I expect broad proliferation of personalapplications that leverage data from IoT and other digital traces.
10246,Where do you see the future of networking and the Internet?
10247,Again I think its useful to look both back and forward.
10248,"Previously I observed that the efforts in
named data and software-defined networking would emerge to create a more manageable,
evolvable, and richer infrastructure and more generally represent moving the role of architecturehigher up in the stack."
10249,"In the beginnings of the Internet, architecture was layer 4 and below, withapplications being more siloed/monolithic, sitting on top."
10250,"Now data and analytics dominate
transport."
10251,"The adoption of SDN (which I’m really happy to see is featured in this 7th edition of
this book) has been well beyond what I ever anticipated."
10252,"However, looking up the stack, ourdominant applications increasingly live in walled gardens, whether mobile apps or largeconsumer platforms such as Facebook."
10253,"As Data Science and Big Data techniques develop, theymight help to lure these applications out of their silos because of the value in connecting with
other apps and platforms."
10254,What people inspired you professionally?
10255,There are three people who come to mind.
10256,"First, Dave Clark, the secret sauce and under-sung
hero of the Internet community."
10257,I was lucky to be around in the early days to see him act as the“organizing principle” of the IAB and Internet governance; the priest of rough consensus andrunning code.
10258,"Second, Scott Shenker, for his intellectual brilliance, integrity, and persistence."
10259,"Istrive for, but rarely attain, his clarity in defining problems and solutions."
10260,He is always the firstperson I e-mail for advice on matters large and small.
10261,"Third, my sister Judy Estrin, who had thecreativity and courage to spend her career bringing ideas and concepts to market."
10262,Without theJudys of the world the Internet technologies would never have transformed our lives.
10263,"What are your recommendations for students who want careers in computer science and
networking?"
10264,"First, build a strong foundation in your academic work, balanced with any and every real-world
work experience you can get."
10265,"As you look for a working environment, seek opportunities in
problem areas you really care about and with smart teams that you can learn from.Chapter 8 Security in Computer Networks
Way back in Section 1.6 we described some of the more prevalent and damaging classes of Internet
attacks, including malware attacks, denial of service, sniffing, source masquerading, and message
modification and deletion."
10266,"Although we have since learned a tremendous amount about computernetworks, we still haven’t examined how to secure networks from those attacks."
10267,"Equipped with our
newly acquired expertise in computer networking and Internet protocols, we’ll now study in-depth secure
communication and, in particular, how computer networks can be defended from those nasty bad guys."
10268,"Let us introduce Alice and Bob, two people who want to communicate and wish to do so “securely.” This
being a networking text, we should remark that Alice and Bob could be two routers that want toexchange routing tables securely, a client and server that want to establish a secure transportconnection, or two e-mail applications that want to exchange secure e-mail—all case studies that we willconsider later in this chapter."
10269,"Alice and Bob are well-known fixtures in the security community, perhapsbecause their names are more fun than a generic entity named “A” that wants to communicate securely
with a generic entity named “B.” Love affairs, wartime communication, and business transactions are the
commonly cited human needs for secure communications; preferring the first to the latter two, we’rehappy to use Alice and Bob as our sender and receiver, and imagine them in this first scenario."
10270,"We said that Alice and Bob want to communicate and wish to do so “securely,” but what precisely does
this mean?"
10271,"As we will see, security (like love) is a many-splendored thing; that is, there are many facetsto security."
10272,"Certainly, Alice and Bob would like for the contents of their communication to remain secretfrom an eavesdropper."
10273,"They probably would also like to make sure that when they are communicating,
they are indeed communicating with each other, and that if their communication is tampered with by aneavesdropper, that this tampering is detected."
10274,"In the first part of this chapter, we’ll cover thefundamental cryptography techniques that allow for encrypting communication, authenticating the partywith whom one is communicating, and ensuring message integrity."
10275,"In the second part of this chapter, we’ll examine how the fundamental ­cryptography principles can be
used to create secure networking protocols."
10276,"Once again taking a top-down approach, we’ll examine
secure protocols in each of the (top four) layers, beginning with the application layer."
10277,"We’ll examine howto secure e-mail, how to secure a TCP connection, how to provide blanket security at the network layer,
and how to secure a wireless LAN."
10278,"In the third part of this chapter we’ll consider operational security,which is about protecting organizational networks from attacks."
10279,"In particular, we’ll take a careful look at
how firewalls and intrusion detection systems can enhance the security of an organizational network.8.1 What Is Network Security?"
10280,"Let’s begin our study of network security by returning to our lovers, Alice and Bob, who want to
communicate “securely.” What precisely does this mean?"
10281,"Certainly, Alice wants only Bob to be able to
understand a message that she has sent, even though they are communicating over an insecure
medium where an intruder (Trudy, the intruder) may intercept whatever is transmitted from Alice to Bob."
10282,"Bob also wants to be sure that the message he receives from Alice was indeed sent by Alice, and Alice
wants to make sure that the person with whom she is communicating is indeed Bob."
10283,"Alice and Bob also
want to make sure that the contents of their messages have not been altered in transit."
10284,"They also wantto be assured that they can communicate in the first place (i.e., that no one denies them access to theresources needed to communicate)."
10285,"Given these considerations, we can identify the following desirableproperties of secure communication."
10286,Confidentiality.
10287," Only the sender and intended receiver should be able to understand the contents of
the transmitted message."
10288,"Because eavesdroppers may intercept the message, this necessarilyrequires that the message be somehow encrypted so that an intercepted message cannot be
understood by an interceptor."
10289,"This aspect of confidentiality is probably the most commonly perceived
meaning of the term secure communication ."
10290,"We’ll study cryptographic techniques for encrypting and
decrypting data in Section 8.2.
Message integrity."
10291,"Alice and Bob want to ensure that the content of their ­communication is not
altered, either maliciously or by accident, in transit."
10292,"Extensions to the checksumming techniques that
we encountered in reliable transport and data link protocols can be used to provide such message
integrity."
10293,"We will study message integrity in Section 8.3.
End-point authentication."
10294," Both the sender and receiver should be able to confirm the identity of the
other party involved in the communication—to confirm that the other party is indeed who or whatthey claim to be."
10295,Face-to-face human communication solves this problem easily by visualrecognition.
10296,"When communicating entities exchange messages over a medium where they cannot
see the other party, authentication is not so simple."
10297,"When a user wants to access an inbox, how
does the mail server verify that the user is the person he or she claims to be?"
10298,"We study end-point
authentication in Section 8.4.
Operational security."
10299,"Almost all organizations (companies, universities, and so on) today have
networks that are attached to the public Internet."
10300,"These networks therefore can potentially be
compromised."
10301,"Attackers can attempt to deposit worms into the hosts in the network, obtaincorporate secrets, map the internal network configurations, and launch DoS attacks."
10302,"We’ll see in
Section 8.9 that operational devices such as firewalls and intrusion detection systems are used to
counter attacks against an organization’s network."
10303,"A firewall sits between the organization’s network
and the public network, controlling packet access to and from the network."
10304,"An intrusion detectionsystem performs “deep packet ­inspection,” ­alerting the network administrators about suspicious
activity."
10305,"Having established what we mean by network security, let’s next consider exactly what information an
intruder may have access to, and what actions can be taken by the intruder."
10306,"Figure 8.1 illustrates the
scenario."
10307,"Alice, the sender, wants to send data to Bob, the receiver."
10308,"In order to exchange data securely,
while meeting the requirements of confidentiality, end-point authentication, and message integrity, Aliceand Bob will exchange control messages and data messages (in much the same way that TCP sendersand receivers exchange control segments and data segments)."
10309,"Figure 8.1 Sender, receiver, and intruder (Alice, Bob, and Trudy)
All or some of these messages will typically be encrypted."
10310,"As discussed in Section 1.6, an intruder can
potentially perform
eavesdropping —sniffing and recording control and data messages on the ­channel."
10311,"modification, insertion , or deletion  of messages or message content."
10312,"As we’ll see, unless appropriate countermeasures are taken, these capabilities allow an intruder tomount a wide variety of security attacks: snooping on communication (possibly stealing passwords and
data), impersonating another entity, hijacking an ongoing session, denying service to legitimate network
users by overloading system resources, and so on."
10313,"A summary of reported attacks is maintained at the
CERT Coordination Center [CERT 2016] ."
10314,"Having established that there are indeed real threats loose in the Internet, what are the Internet
equivalents of Alice and Bob, our friends who need to communicate securely?"
10315,"Certainly, Bob and Alicemight be human users at two end systems, for example, a real Alice and a real Bob who really do wantto exchange secure e-mail."
10316,They might also be participants in an electronic commerce transaction.
10317,"Forexample, a real Bob might want to transfer his credit card number securely to a Web server to purchasean item online."
10318,"Similarly, a real Alice might want to interact with her bank online."
10319,"The parties needing
secure communication might themselves also be part of the network infrastructure."
10320,"Recall that the
domain name system (DNS, see Section 2.4) or routing daemons that exchange routing information
(see Chapter 5) require secure communication between two parties."
10321,"The same is true for network
management applications, a topic we examined in Chapter 5)."
10322,"An intruder that could actively interfere
with DNS lookups (as discussed in Section 2.4), routing computations [RFC 4272] , or network
management functions [RFC 3414]  could wreak havoc in the Internet."
10323,"Having now established the framework, a few of the most important definitions, and the need fornetwork security, let us next delve into cryptography."
10324,"While the use of cryptography in providingconfidentiality is self-evident, we’ll see shortly that it is also central to providing end-point authenticationand message integrity—making cryptography a cornerstone of network security.8.2 Principles of Cryptography
Although cryptography has a long history dating back at least as far as Julius Caesar, modern
cryptographic techniques, including many of those used in the Internet, are based on advances made in
the past 30 years."
10325,"Kahn’s book, The Codebreakers  [Kahn 1967], and Singh’s book, The Code Book:
The Science of Secrecy from Ancient Egypt to Quantum Cryptography  [Singh 1999], provide a
fascinating look at the
Figure 8.2 Cryptographic components
long history of cryptography."
10326,"A complete discussion of cryptography itself requires a complete book[Kaufman 1995 ; Schneier 1995] and so we only touch on the essential aspects of cryptography,
particularly as they are practiced on the Internet."
10327,"We also note that while our focus in this section will be
on the use of cryptography for confidentiality, we’ll see shortly that cryptographic techniques areinextricably woven into authentication, message integrity, nonrepudiation, and more."
10328,"Cryptographic techniques allow a sender to disguise data so that an intruder can gain no information
from the intercepted data."
10329,"The receiver, of course, must be able to recover the original data from the
disguised data."
10330,Figure 8.2 illustrates some of the important terminology.
10331,Suppose now that Alice wants to send a message to Bob.
10332,"Alice’s message in its original form (forexample, “ Bob, I love you."
10333,"Alice ”) is known as ­ plaintext , or cleartext ."
10334,"Alice encrypts her
plaintext message using an encryption algorithm  so that the encrypted message, known as
ciphertext, looks unintelligible to any intruder."
10335,"Interestingly, in many modern cryptographic systems,including those used in the Internet, the encryption technique itself is known —published, standardized,
and available to everyone (for example, [RFC 1321 ; RFC 3447 ; RFC 2420 ; NIST 2001]), even a
potential intruder! Clearly, if everyone knows the method for encoding data, then there must be some
secret information that prevents an intruder from decrypting the transmitted data."
10336,"This is where keys
come in."
10337,"In Figure 8.2, Alice provides a key, K, a string of numbers or characters, as input to the encryption
algorithm."
10338,"The encryption algorithm takes the key and the plaintext message, m, as input and produces
ciphertext as output."
10339,"The notation K(m) refers to the ciphertext form (encrypted using the key K) of the
plaintext message, m."
10340,The actual encryption algorithm that uses key K will be evident from the context.
10341,"Similarly, Bob will provide a key, K, to the decryption algorithm  that takes the ciphertext and Bob’s
key as input and produces the original plaintext as output."
10342,"That is, if Bob receives an encrypted
message K (m), he decrypts it by computing  In symmetric key systems , Alice’s and
Bob’s keys are identical and are secret."
10343,"In public key systems, a pair of keys is used."
10344,"One of the keys
is known to both Bob and Alice (indeed, it is known to the whole world)."
10345,"The other key is known only by
either Bob or Alice (but not both)."
10346,"In the following two subsections, we consider symmetric key andpublic key systems in more detail."
10347,"8.2.1 Symmetric Key Cryptography
All cryptographic algorithms involve substituting one thing for another, for example, taking a piece ofplaintext and then computing and substituting the appropriate ciphertext to create the encryptedmessage."
10348,"Before studying a modern key-based cryptographic system, let us first get our feet wet bystudying a very old, very simple symmetric key algorithm attributed to Julius Caesar, known as theCaesar cipher  (a cipher is a method for encrypting data)."
10349,"For English text, the Caesar cipher would work by taking each letter in the plaintext message and
substituting the letter that is k letters later (allowing wraparound; that is, having the letter z followed by
the letter a) in the alphabet."
10350,"For example if , then the letter a in plaintext becomes d in ciphertext; b
in plaintext becomes e in ciphertext, and so on."
10351,"Here, the value of k serves as the key."
10352,"As an example,
the plaintext message “ bob, i love you."
10353,"Alice ” becomes “ ere, l oryh brx."
10354,"dolfh ” in
ciphertext."
10355,"While the ciphertext does indeed look like gibberish, it wouldn’t take long to break the code if
you knew that the Caesar cipher was being used, as there are only 25 possible key values."
10356,"An improvement on the Caesar cipher is the monoalphabetic cipher , which also substitutes one letter
of the alphabet with another letter of the alphabet."
10357,"­However, rather than substituting according to a
regular pattern (for example, substitution with an offset of k for all letters), any letter can be substituted
for any other letter, as long as each letter has a unique substitute letter, and vice versa."
10358,"The substitutionA
A A
A
B
A KB(KA(m))=m."
10359,k=3rule in Figure 8.3 shows one possible rule for encoding plaintext.
10360,"The plaintext message “ bob, i love you."
10361,"Alice ” becomes “nkn, s gktc wky."
10362,"Mgsbc.”
Thus, as in the case of the Caesar cipher, this looks like gibberish."
10363,"A monoalphabetic cipher would also
appear to be better than the Caesar cipher in that there are 26! (on the order of 10 ) possible pairings of
letters rather than 25 possible pairings."
10364,"A brute-force approach of trying all 10  possible pairings
Figure 8.3 A monoalphabetic cipher
would require far too much work to be a feasible way of breaking the encryption algorithm and decoding
the message."
10365,"However, by statistical analysis of the plaintext language, for example, knowing that the
letters e and t are the most frequently occurring letters in typical English text (accounting for 13 percent
and 9 percent of letter occurrences), and knowing that particular two-and three-letter occurrences of
letters appear quite often together (for example, “in,” “it,” “the,” “ion,” “ing,” and so forth) make itrelatively easy to break this code."
10366,"If the intruder has some knowledge about the possible contents of themessage, then it is even easier to break the code."
10367,"For example, if Trudy the intruder is Bob’s wife andsuspects Bob of having an affair with Alice, then she might suspect that the names “bob” and “alice”appear in the text."
10368,"If Trudy knew for certain that those two names appeared in the ciphertext and had acopy of the example ciphertext message above, then she could immediately determine seven of the 26
letter pairings, requiring 10  fewer possibilities to be checked by a brute-force method."
10369,"Indeed, if Trudy
suspected Bob of having an affair, she might well expect to find some other choice words in the
message as well."
10370,"When considering how easy it might be for Trudy to break Bob and Alice’s encryption scheme, one can
distinguish three different scenarios, depending on what information the intruder has."
10371,Ciphertext-only attack.
10372,"In some cases, the intruder may have access only to the intercepted
ciphertext, with no certain information about the contents of the plaintext message."
10373,"We have seen
how statistical analysis can help in a ciphertext-only attack on an encryption scheme."
10374,Known-plaintext attack.
10375,"We saw above that if Trudy somehow knew for sure that “bob” and “alice”
appeared in the ciphertext message, then she could have determined the (plaintext, ciphertext)
pairings for the letters a, l, i, c, e, b , and o."
10376,"Trudy might also have been fortunate enough to have
recorded all of the ciphertext transmissions and then found Bob’s own decrypted version of one of
the transmissions scribbled on a piece of paper."
10377,"When an intruder knows some of the (plaintext,
ciphertext) pairings, we refer to this as a known-plaintext attack on the encryption scheme."
10378,Chosen-plaintext attack.
10379,"In a chosen-plaintext attack , the intruder is able to choose the plaintext26
26
9message and obtain its corresponding ciphertext form."
10380,"For the simple encryption algorithms we’ve
seen so far, if Trudy could get Alice to send the message, “ The quick brown fox jumps over
the lazy dog, ” she could completely break the encryption scheme."
10381,"We’ll see shortly that for
more sophisticated encryption techniques, a chosen-plaintext attack does not necessarily mean that
the encryption technique can be broken."
10382,"Five hundred years ago, techniques improving on monoalphabetic encryption, known aspolyalphabetic encryption , were invented."
10383,"The idea behind polyalphabetic encryption is to use
multiple monoalphabetic ciphers, with a specific
Figure 8.4 A polyalphabetic cipher using two Caesar ciphers
monoalphabetic cipher to encode a letter in a specific position in the plaintext message."
10384,"Thus, the same
letter, appearing in different positions in the plaintext message, might be encoded differently."
10385,"An
example of a polyalphabetic encryption scheme is shown in Figure 8.4. It has two Caesar ciphers (with
 and ), shown as rows."
10386,"We might choose to use these two Caesar ciphers, C  and C , in the
repeating pattern C , C, C, C, C."
10387,"That is, the first letter of plaintext is to be encoded using C , the
second and third using C , the fourth using C , and the fifth using C ."
10388,"The pattern then repeats, with the
sixth letter being encoded using C , the seventh with C , and so on."
10389,"The plaintext message “ bob, i
love you."
10390,"” is thus encrypted “ ghu, n etox dhz."
10391,"” Note that the first b in the plaintext message is
encrypted using C , while the second b is encrypted using C ."
10392,"In this example, the encryption and
decryption “key” is the knowledge of the two Caesar keys  and the pattern C , C, C, C, C."
10393,"Block Ciphers
Let us now move forward to modern times and examine how symmetric key encryption is done today."
10394,There are two broad classes of symmetric encryption techniques: stream ciphers  and block ciphers.
10395,"We’ll briefly examine stream ciphers in ­Section 8.7 when we investigate security for wireless LANs. In
this section, we focus on block ciphers, which are used in many secure Internet protocols, includingPGP (for secure e-mail), SSL (for securing TCP connections), and IPsec (for securing the network-layer
transport)."
10396,"In a block cipher, the message to be encrypted is processed in blocks of k bits."
10397,"For example, if ,
then the message is broken into 64-bit blocks, and each block is encrypted independently."
10398,"To encode a
block, the cipher uses a one-to-one mapping to map the k-bit block of cleartext to a k-bit block ofk=5 k=191 2
1 2 2 1 2 1
2 1 2
1 2
1 2
(k=5, k=19)1 2 2 1 2
k=64ciphertext."
10399,Let’s look at an example.
10400,"Suppose that , so that the block cipher maps 3-bit inputs
(cleartext) to 3-bit outputs (ciphertext)."
10401,"One possible mapping is given in Table 8.1. Notice that this is a
one-to-one mapping; that is, there is a different output for each input."
10402,"This block cipher breaks the
message up into 3-bit blocks and encrypts each block according to the above mapping."
10403,You shouldverify that the message 010110001111 gets encrypted into 101000111001.
10404,"Continuing with this 3-bit block example, note that the mapping in Table 8.1 is just one mapping of many
possible mappings."
10405,"How many possible mappings are
Table 8.1 A specific 3-bit block cipher
input output input output
000 110 100 011
001 111 101 010
010 101 110 000
011 100 111 001
there?"
10406,"To answer this question, observe that a mapping is nothing more than a permutation of all the
possible inputs."
10407,There are  possible inputs (listed under the input columns).
10408,"These eight inputs
can be permuted in  different ways."
10409,"Since each of these permutations specifies a mapping,
there are 40,320 possible mappings."
10410,"We can view each of these mappings as a key—if Alice and Bobboth know the mapping (the key), they can encrypt and decrypt the messages sent between them."
10411,The brute-force attack for this cipher is to try to decrypt ciphtertext by using all mappings.
10412,"With only
40,320 mappings (when ), this can quickly be accomplished on a desktop PC."
10413,"To thwart brute-force
attacks, block ciphers typically use much larger blocks, consisting of  bits or even larger."
10414,"Note that
the number of possible mappings for a general k-block cipher is 2 !, which is astronomical for even
moderate values of k (such as )."
10415,"Although full-table block ciphers, as just described, with moderate values of k can produce robust
symmetric key encryption schemes, they are unfortunately difficult to implement."
10416,"For  and for a
given mapping, Alice and Bob would need to maintain a table with 2  input values, which is an
infeasible task."
10417,"Moreover, if Alice and Bob were to change keys, they would have to each regeneratethe table."
10418,"Thus, a full-table block cipher, providing predetermined mappings between all inputs andoutputs (as in the example above), is simply out of the question.k=3
23(=8)
8!=40,320
k=3
k=64
k
k=64
k=64
64Instead, block ciphers typically use functions that simulate randomly permuted tables."
10419,"An example
(adapted from [Kaufman 1995] ) of such a function for  bits is shown in Figure 8.5. The function
first breaks a 64-bit block into 8 chunks, with each chunk consisting of 8 bits."
10420,"Each 8-bit chunk is
processed by an 8-bit to 8-bit table, which is of manageable size."
10421,"For example, the first chunk is
processed by the table denoted by T ."
10422,"Next, the 8 output chunks are reassembled into a 64-bit block."
10423,The positions of the 64 bits in the block are then scrambled (permuted) to produce a 64-bit output.
10424,"Thisoutput is fed back to the 64-bit input, where another cycle begins."
10425,"After n such cycles, the function
provides a 64-bit block of ciphertext."
10426,"The purpose of the rounds is to make each input bit affect most (if
not all) of the final output bits."
10427,"(If only one round were used, a given input bit would affect only 8 of the64 output bits.) The key for this block cipher algorithm would be the eight permutation tables (assumingthe scramble function is publicly known)."
10428,"Figure 8.5 An example of a block cipher
Today there are a number of popular block ciphers, including DES (standing for Data Encryption
Standard), 3DES, and AES (standing for Advanced Encryption Standard)."
10429,"Each of these standards uses
functions, rather than predetermined tables, along the lines of Figure 8.5 (albeit more complicated and
specific to each cipher)."
10430,Each of these algorithms also uses a string of bits for a key.
10431,"For example, DES
uses 64-bit blocks with a 56-bit key."
10432,"AES uses 128-bit blocks and can operate with keys that are 128,192, and 256 bits long."
10433,An algorithm’s key determines the specific “mini-table” mappings andpermutations within the algorithm’s internals.
10434,"The brute-force attack for each of these ciphers is to cyclethrough all the keys, applying the decryption algorithm with each key."
10435,"Observe that with a key length of
n, there are 2  possible keys."
10436,"NIST [NIST 2001] estimates that a machine that could crack 56-bit DES in
one second (that is, try all 2  keys in one second) would take approximately 149 trillion years to crack a
128-bit AES key.k=64
1
n
56Cipher-Block Chaining
In computer networking applications, we typically need to encrypt long messages (or long streams of
data)."
10437,"If we apply a block cipher as described by simply chopping up the message into k-bit blocks and
independently encrypting each block, a subtle but important problem occurs."
10438,"To see this, observe that
two or more of the cleartext blocks can be identical."
10439,"For example, the cleartext in two or more blocks
could be “HTTP/1.1”."
10440,"For these identical blocks, a block cipher would, of course, produce the sameciphertext."
10441,"An attacker could potentially guess the cleartext when it sees identical ciphertext blocks andmay even be able to decrypt the entire message by identifying identical ciphtertext blocks and using
knowledge about the underlying protocol structure [Kaufman 1995] ."
10442,"To address this problem, we can mix some randomness into the ciphertext so that identical plaintext
blocks produce different ciphertext blocks."
10443,"To explain this idea, let m(i) denote the ith plaintext block, c(i)
denote the ith ciphertext block, and  denote the exclusive-or (XOR) of two bit strings, a and b."
10444,"(Recall that the  and , and the XOR of two bit strings is done on a bit-by-bit
basis."
10445,"So, for example, .) Also, denote the block-cipher encryption
algorithm with key S as K ."
10446,The basic idea is as follows.
10447,"The sender creates a random k-bit number r(i)
for the ith block and calculates ."
10448,"Note that a new k-bit random number is chosen for
each block."
10449,"The sender then sends c(1), r(1), c(2), r(2), c(3), r(3), and so on."
10450,"Since the receiver receives
c(i) and r(i), it can recover each block of the plaintext by computing ."
10451,"It is important to
note that, although r(i) is sent in the clear and thus can be sniffed by Trudy, she cannot obtain the
plaintext m(i), since she does not know the key K."
10452,"Also note that if two plaintext blocks m(i) and m(j) are
the same, the corresponding ciphertext blocks c(i) and c(j) will be different (as long as the random
numbers r(i) and r(j) are different, which occurs with very high probability)."
10453,"As an example, consider the 3-bit block cipher in Table 8.1. Suppose the plaintext is 010010010."
10454,"If Alice
encrypts this directly, without including the randomness, the resulting ciphertext becomes 101101101."
10455,"If
Trudy sniffs this ciphertext, because each of the three cipher blocks is the same, she can correctlysurmise that each of the three plaintext blocks are the same."
10456,"Now suppose instead Alice generates therandom blocks , and  and uses the above technique to generate the
ciphertext  and ."
10457,"Note that the three ciphertext blocks are different even
though the plaintext blocks are the same."
10458,"Alice then sends c(1), r(1), c(2), and r(2)."
10459,"You should verify
that Bob can obtain the original plaintext using the shared key K."
10460,"The astute reader will note that introducing randomness solves one problem but creates another:namely, Alice must transmit twice as many bits as before."
10461,"Indeed, for each cipher bit, she must now alsosend a random bit, doubling the required bandwidth."
10462,"In order to have our cake and eat it too, blockciphers typically use a technique called Cipher Block Chaining (CBC) ."
10463,"The basic idea is to send only
one random value along with the very first message, and then have the sender and receiver use thea⊕b
0⊕0=1⊕1=0 0⊕1=1⊕0=1
10101010 ⊕11110000 =01011010
S
c(i)=KS(m(i)⊕r(i))
m(i)=KS(c(i))⊕r(i)
S
r(1)=001, r(2)=111 r(3)=100
c(1)=100, c(2)=010, c(3)=000
Scomputed coded blocks in place of the subsequent random number."
10464," Specifically, CBC operates as
follows:
1."
10465,"Before encrypting the message (or the stream of data), the sender generates a random k-bit
string, called the Initialization Vector (IV) ."
10466,Denote this initialization vector by c(0).
10467,"The sender
sends the IV to the receiver in cleartext."
10468,2.
10469,"For the first block, the sender calculates  that is, calculates the exclusive-or of the first
block of cleartext with the IV."
10470,"It then runs the result through the block-cipher algorithm to get the
corresponding ciphertext block; that is, ."
10471,"The sender sends the encrypted
block c(1) to the receiver."
10472,3.
10473,"For the ith block, the sender generates the ith ciphertext block from  ."
10474,Let’s now examine some of the consequences of this approach.
10475,"First, the receiver will still be able to
recover the original message."
10476,"Indeed, when the receiver receives c(i), it decrypts it with K  to obtain
; since the receiver also knows , it then obtains the cleartext block from
."
10477,"Second, even if two cleartext blocks are identical, the corresponding ciphtertexts
(almost always) will be different."
10478,"Third, although the sender sends the IV in the clear, an intruder will stillnot be able to decrypt the ciphertext blocks, since the intruder does not know the secret key, S."
10479,"Finally,
the sender only sends one overhead block (the IV), thereby negligibly increasing the bandwidth usage
for long messages (consisting of hundreds of blocks)."
10480,"As an example, let’s now determine the ciphertext for the 3-bit block cipher in Table 8.1 with plaintext
010010010 and ."
10481,The sender first uses the IV to calculate .
10482,"The
sender then calculates  , and 
 The reader should verify that the receiver, knowing the IV and K can recover the original
plaintext."
10483,"CBC has an important consequence when designing secure network protocols: we’ll need to provide a
mechanism within the protocol to distribute the IV from sender to receiver."
10484,We’ll see how this is done forseveral protocols later in this chapter.
10485,"8.2.2 Public Key Encryption
For more than 2,000 years (since the time of the Caesar cipher and up to the 1970s), encryptedcommunication required that the two communicating parties share a common secret—the symmetrickey used for encryption and decryption."
10486,"One difficulty with this approach is that the two parties must
somehow agree on the shared key; but to do so requires (presumably secure) communication! Perhaps
the parties could first meet and agree on the key in person (for example, two of Caesar’s centurions
might meet at the Roman baths) and thereafter communicate with encryption."
10487,"In a networked world,m(1)⊕c(0),
c(1)=KS(m(1)⊕c(0))
c(i)= KS(m(i)⊕c(i−1))
S
s(i)=m(i)⊕c(i−1) c(i−1)
m(i)=s(i)⊕c(i−1)
IV=c(0)=001 c(1)=KS(m(1)⊕c(0))=100
c(2)= KS(m(2)⊕c(1))=KS(010⊕100)=000 C(3)=KS(m(3)⊕c(2))=KS(010⊕
000)=101.Showever, communicating parties may never meet and may never converse except over the network."
10488,"Is it
possible for two parties to communicate with encryption without having a shared secret key that is
known in advance?"
10489,"In 1976, Diffie and Hellman [Diffie 1976] demonstrated an algorithm (known now as
Diffie-Hellman Key Exchange) to do just that—a radically different and marvelously elegant approach
toward secure communication that has led to the development of today’s public key cryptography
systems."
10490,"We’ll see shortly that public key cryptography systems also have several wonderful properties
that make them useful not only
Figure 8.6 Public key cryptography
for encryption, but for authentication and digital signatures as well."
10491,"Interestingly, it has recently come to
light that ideas similar to those in [Diffie 1976] and [RSA 1978]  had been independently developed in
the early 1970s in a series of secret reports by researchers at the Communications-Electronics SecurityGroup in the United ­Kingdom [Ellis 1987]."
10492,"As is often the case, great ideas can spring up
independently in many places; fortunately, public key advances took place not only in private, but also in
the public view, as well."
10493,The use of public key cryptography is conceptually quite simple.
10494,"Suppose Alice wants to communicate
with Bob."
10495,"As shown in Figure 8.6, rather than Bob and Alice sharing a single secret key (as in the case
of symmetric key systems), Bob (the recipient of Alice’s messages) instead has two keys—a public key
that is available to everyone  in the world (including Trudy the intruder) and a private key  that is known
only to Bob."
10496,"We will use the notation  and  to refer to Bob’s public and private keys,
respectively."
10497,"In order to communicate with Bob, Alice first fetches Bob’s public key."
10498,"Alice then encrypts
her message, m, to Bob using Bob’s public key and a known (for example, standardized) encryption
algorithm; that is, Alice computes ."
10499,"Bob receives Alice’s encrypted message and uses his private
key and a known (for example, standardized) decryption algorithm to decrypt Alice’s encrypted
message."
10500,"That is, Bob computes ."
10501,"We will see below that there are encryption/decryptionKB+ KB−
KB−(m)
KB−(KB+(m))algorithms and techniques for choosing public and private keys such that ; that is,
applying Bob’s public key, , to a message, m (to get ), and then applying Bob’s private key,
, to the encrypted version of m (that is, computing ) gives back m."
10502,"This is a remarkable
result! In this manner, Alice can use Bob’s publicly available key to send a secret message to Bob
without either of them having to distribute any secret keys! We will see shortly that we can interchange
the public key and private key encryption and get the same remarkable result––that is,
."
10503,The use of public key cryptography is thus conceptually simple.
10504,"But two immediate worries may spring
to mind."
10505,"A first concern is that although an intruder intercepting Alice’s encrypted message will see onlygibberish, the intruder knows both the key (Bob’s public key, which is available for all the world to see)and the algorithm that Alice used for encryption."
10506,"Trudy can thus mount a chosen-plaintext attack, usingthe known standardized encryption algorithm and Bob’s publicly available encryption key to encode anymessage she chooses! Trudy might well try, for example, to encode messages, or parts of messages,
that she suspects that Alice might send."
10507,"Clearly, if public key cryptography is to work, key selection and
encryption/decryption must be done in such a way that it is impossible (or at least so hard as to benearly impossible) for an intruder to either determine Bob’s private key or somehow otherwise decrypt orguess Alice’s message to Bob."
10508,"A second concern is that since Bob’s encryption key is public, anyone
can send an encrypted message to Bob, including Alice or someone claiming  to be Alice."
10509,"In the case of
a single shared secret key, the fact that the sender knows the secret key implicitly identifies the sender
to the receiver."
10510,"In the case of public key cryptography, however, this is no longer the case since anyonecan send an encrypted message to Bob using Bob’s publicly available key."
10511,"A digital signature, a topic
we will study in Section 8.3, is needed to bind a sender to a message."
10512,"RSA
While there may be many algorithms that address these concerns, the RSA ­algorithm (named after
its founders, Ron Rivest, Adi Shamir, and Leonard Adleman) has become almost synonymous with
public key cryptography."
10513,Let’s first see how RSA works and then examine why it works.
10514,RSA makes extensive use of arithmetic operations using modulo- n arithmetic.
10515,"So let’s briefly review
modular arithmetic."
10516,"Recall that x mod n simply means the remainder of x when divided by n; so, for
example, 19 mod ."
10517,"In modular arithmetic, one performs the usual operations of addition,
multiplication, and exponentiation."
10518,"However, the result of each operation is replaced by the integer
remainder that is left when the result is divided by n."
10519,"Adding and multiplying with modular arithmetic is
facilitated with the following handy facts:KB−(KB+(m))=m
KB+ KB−(m)
KB− KB−(KB+(m))
KB−(B+(m))=KB+(KB−(m))=m
5=4
[ (a mod n)+(b mod n)]mod n=(a+b)mod n[ (a mod n)−(b mod n)]mod n=(a−b)mod n[
(a mod n)⋅(b mod n)]mod n=(a⋅b)mod nIt follows from the third fact that ( a mod n)   mod n, which is an identity that we will soon find very
useful."
10520,"Now suppose that Alice wants to send to Bob an RSA-encrypted message, as shown in Figure 8.6. In
our discussion of RSA, let’s always keep in mind that a message is nothing but a bit pattern, and every
bit pattern can be uniquely represented by an integer number (along with the length of the bit pattern)."
10521,"For example, suppose a message is the bit pattern 1001; this message can be represented by thedecimal integer 9."
10522,"Thus, when encrypting a message with RSA, it is equivalent to encrypting the uniqueinteger number that represents the message."
10523,"There are two interrelated components of RSA:
The choice of the public key and the private key
The encryption and decryption algorithm
To generate the public and private RSA keys, Bob performs the following steps:
1."
10524,"Choose two large prime numbers, p and q."
10525,How large should p and q be?
10526,"The larger the values,
the more difficult it is to break RSA, but the longer it takes to perform the encoding and
decoding."
10527,"RSA Laboratories recommends that the product of p and q be on the order of 1,024
bits."
10528,"For a discussion of how to find large prime numbers, see [Caldwell 2012]."
10529,2.
10530,Compute  and .
10531,3.
10532,"Choose a number, e, less than n, that has no common factors (other than 1) with z."
10533,"(In this case,
e and z are said to be relatively prime.) The letter e is used since this value will be used in
encryption."
10534,4.
10535,"Find a number, d, such that  is exactly divisible (that is, with no ­remainder) by z."
10536,"The letter
d is used because this value will be used in decryption."
10537,"Put another way, given e, we choose d
such that
5."
10538,"The public key that Bob makes available to the world, , is the pair of numbers (n, e); his
private key, , is the pair of numbers (n, d)."
10539,"The encryption by Alice and the decryption by Bob are done as follows:
Suppose Alice wants to send Bob a bit pattern represented by the integer number m (with )."
10540,"To
encode, Alice performs the exponentiation m, and then computes the integer remainder when m is
divided by n."
10541,"In other words, the encrypted value, c, of Alice’s plaintext message, m, isdn=ad
n=pq z=(p−1)(q−1)
ed−1
ed modz=1
KB+
KB−
m<n
e e
c=memod nThe bit pattern corresponding to this ciphertext c is sent to Bob."
10542,"To decrypt the received ciphertext message, c, Bob computes
which requires the use of his private key ( n, d)."
10543,"Table 8.2 Alice’s RSA encryption, , 
Plaintext Letter m: numeric representation m Ciphertext  mod n
l 12 248832 17
o 15 759375 15
v 22 5153632 22
e 5 3125 10
As a simple example of RSA, suppose Bob chooses  and ."
10544,"­(Admittedly, these values are far
too small to be secure.) Then  and ."
10545,"Bob chooses , since 5 and 24 have no common
factors."
10546,"Finally, Bob chooses , since  (that is, ) is exactly divisible by 24."
10547,"Bob makes
the two values,  and , public and keeps the value  secret."
10548,"Observing these two public
values, suppose Alice now wants to send the letters l, o, v, and e to Bob."
10549,"Interpreting each letter as a
number between 1 and 26 (with a being 1, and z being 26), Alice and Bob perform the encryption and
decryption shown in Tables 8.2 and 8.3, respectively."
10550,"Note that in this example, we consider each of the
four letters as a distinct message."
10551,"A more realistic example would be to convert the four letters into their
8-bit ASCII representations and then encrypt the integer corresponding to the resulting 32-bit bit pattern.(Such a realistic example generates numbers that are much too long to print in a textbook!)
Given that the “toy” example in Tables 8.2 and 8.3 has already produced some extremely large
numbers, and given that we saw earlier that p and q should each be several hundred bits long, several
practical issues regarding RSA come to mind."
10552,How does one choose large prime numbers?
10553,"How does
one then choose e and d?"
10554,How does one perform exponentiation with large numbers?
10555,"A discussion of
these important issues is beyond the scope of this book; see [Kaufman 1995]  and the references
therein for details."
10556,"Table 8.3 Bob’s RSA decryption, , 
Ciphertext c c m = c  mod n Plaintext Letterm=cdmod n
e=5 n=35
ec=me
p=5 q=7
n=35 z=24 e=5
d=29 5⋅29−1 ed−1
n=35 e=5 d=29
d=29 n=35
d d17 4819685721067509150915091411825223071697 12 l
15 127834039403948858939111232757568359375 15 o
22 851643319086537701956194499721106030592 22 v
10 1000000000000000000000000000000 5 e
Session Keys
We note here that the exponentiation required by RSA is a rather time-consuming process."
10557,"By contrast,
DES is at least 100 times faster in software and between 1,000 and 10,000 times faster in hardware
[RSA Fast 2012] ."
10558,"As a result, RSA is often used in practice in combination with symmetric key
cryptography."
10559,"For example, if Alice wants to send Bob a large amount of encrypted data, she could do
the following."
10560,"First Alice chooses a key that will be used to encode the data itself; this key is referred to
as a session key , and is denoted by K ."
10561,"Alice must inform Bob of the session key, since this is the
shared ­symmetric key they will use with a symmetric key cipher (e.g., with DES or AES)."
10562,"Aliceencrypts the session key using Bob’s public key, that is, computes  mod n."
10563,"Bob receives the
RSA-encrypted session key, c, and decrypts it to obtain the session key, K ."
10564,"Bob now knows the
session key that Alice will use for her encrypted data transfer."
10565,Why Does RSA Work?
10566,RSA encryption/decryption appears rather magical.
10567,"Why should it be that by applying the encryption
algorithm and then the decryption algorithm, one recovers the original message?"
10568,"In order to understand
why RSA works, again denote , where p and q are the large prime numbers used in the RSA
algorithm."
10569,"Recall that, under RSA encryption, a message (uniquely represented by an ­integer), m, is
exponentiated to the power e using modulo- n arithmetic, that is,
Decryption is performed by raising this value to the power d, again using modulo- n arithmetic."
10570,"The result
of an encryption step followed by a decryption step is thus ( m mod n)  mod n."
10571,"Let’s now see what we
can say about this quantity."
10572,"As mentioned earlier, one important property of modulo arithmetic is ( a mod
n) mod  mod n for any values a, n, and d."
10573,"Thus, using  in this property, we haveS
c=(KS)e
S
n=pq
c=memod n
e d
d n=ad a=me
(memod n)dmod n=medmod nIt therefore remains to show that ."
10574,"Although we’re trying to remove some of the magic
about why RSA works, to establish this, we’ll need to use a rather magical result from number theory
here."
10575,"Specifically, we’ll need the result that says if p and q are prime, , and , then x
mod n is the same as x    mod n [Kaufman 1995] ."
10576,"Applying this result with  and  we have
But remember that we have chosen e and d such that ."
10577,"This gives us
which is exactly the result we are looking for! By first exponentiating to the power of e (that is,
encrypting) and then exponentiating to the power of d (that is, ­decrypting), we obtain the original value,
m."
10578,"Even more wonderful is the fact that if we first exponentiate to the power of d and then exponentiate
to the power of e—that is, we reverse the order of encryption and decryption, performing the decryption
operation first and then applying the encryption operation—we also obtain the original value, m."
10579,"This
wonderful result follows immediately from the modular arithmetic:
The security of RSA relies on the fact that there are no known algorithms for quickly factoring a number,
in this case the public value n, into the primes p and q."
10580,"If one knew p and q, then given the public value
e, one could easily compute the secret key, d."
10581,"On the other hand, it is not known whether or not there
exist fast algorithms for factoring a number, and in this sense, the security of RSA is not guaranteed."
10582,"Another popular public-key encryption algorithm is the Diffie-Hellman algorithm, which we will briefly
explore in the homework problems."
10583,"Diffie-Hellman is not as versatile as RSA in that it cannot be used toencrypt messages of arbitrary length; it can be used, however, to establish a symmetric session key,which is in turn used to encrypt messages.medmod n=m
n=pq z=(p−1)(q−1)
y
(ymod z) x=m y=ed
medmod n=m(edmod z)mod n
edmod z=1
medmod n=m1mod n=m
(mdmod n)emod n=mdemod n=medmod n=(memod n)dmod n8.3 Message Integrity and Digital Signatures
In the previous section we saw how encryption can be used to provide confidentiality to two
communicating entities."
10584,In this section we turn to the equally important cryptography topic of providingmessage integrity (also known as message ­authentication).
10585,"Along with message integrity, we will
discuss two related topics in this section: digital signatures and end-point authentication."
10586,"We define the message integrity problem using, once again, Alice and Bob."
10587,"Suppose Bob receives a
message (which may be encrypted or may be in plaintext) and he believes this message was sent byAlice."
10588,"To authenticate this message, Bob needs to verify:
1."
10589,The message indeed originated from Alice.
10590,2.
10591,The message was not tampered with on its way to Bob.
10592,"We’ll see in Sections 8.4 through 8.7 that this problem of message integrity is a critical concern in just
about all secure networking protocols."
10593,"As a specific example, consider a computer network using a link-state routing algorithm (such as OSPF)
for determining routes between each pair of routers in the network (see Chapter 5)."
10594,"In a link-state
algorithm, each router needs to broadcast a link-state message to all other routers in the network."
10595,"A
router’s link-state message includes a list of its directly connected neighbors and the direct costs tothese neighbors."
10596,"Once a router receives link-state messages from all of the other routers, it can create acomplete map of the network, run its least-cost routing algorithm, and configure its forwarding table."
10597,Onerelatively easy attack on the routing algorithm is for Trudy to distribute bogus link-state messages withincorrect link-state information.
10598,"Thus the need for message integrity—when router B receives a link-
state message from router A, router B should verify that router A actually created the message and,
further, that no one tampered with the message in transit."
10599,"In this section, we describe a popular message integrity technique that is used by many secure
networking protocols."
10600,"But before doing so, we need to cover another important topic in cryptography—cryptographic hash functions."
10601,"8.3.1 Cryptographic Hash Functions
As shown in Figure 8.7, a hash function takes an input, m, and computes a fixed-size string H(m)known as a hash."
10602,The Internet checksum ( Chapter 3) and CRCs (Chapter 6) meet this definition.
10603,"A
cryptographic hash function  is required to have the following additional property:
It is computationally infeasible to find any two different messages x and y such that ."
10604,"Informally, this property means that it is computationally infeasible for an intruder to substitute one
message for another message that is protected by the hash
Figure 8.7 Hash functions
Figure 8.8 Initial message and fraudulent message have the same ­checksum!
function."
10605,"That is, if (m, H(m)) are the message and the hash of the message created by the sender, thenH(x)=H(y)an intruder cannot forge the contents of another message, y, that has the same hash value as the
original message."
10606,"Let’s convince ourselves that a simple checksum, such as the Internet checksum, would make a poor
cryptographic hash function."
10607,"Rather than performing 1s complement arithmetic (as in the Internet
checksum), let us compute a checksum by treating each character as a byte and adding the bytestogether using 4-byte chunks at a time."
10608,"Suppose Bob owes Alice $100.99 and sends an IOU to Alice
consisting of the text string “ IOU100.99BOB."
10609,"” The ASCII representation (in hexadecimal notation) for
these letters is 49, 4F, 55, 31, 30, 30, 2E, 39, 39, 42, 4F, 42."
10610,Figure 8.8 (top) shows that the 4-byte checksum for this message is B2 C1 D2 AC.
10611,"A slightly different
message (and a much more costly one for Bob) is shown in the bottom half of Figure 8.8. The
messages “ IOU100.99BOB ” and “ IOU900.19BOB ” have the same checksum."
10612,"Thus, this simple
checksum algorithm violates the requirement above."
10613,"Given the original data, it is simple to find another
set of data with the same checksum."
10614,"Clearly, for security purposes, we are going to need a more
powerful hash function than a checksum."
10615,The MD5 hash algorithm of Ron Rivest [RFC 1321]  is in wide use today.
10616,"It computes a 128-bit hash in a
four-step process consisting of a padding step (adding a one followed by enough zeros so that the
length of the message satisfies certain conditions), an append step (appending a 64-bit representationof the message length before padding), an initialization of an accumulator, and a final looping step inwhich the message’s 16-word blocks are processed (mangled) in four rounds."
10617,"For a description of MD5
(including a C source code implementation) see [RFC 1321] ."
10618,The second major hash algorithm in use today is the Secure Hash Algorithm (SHA-1) [FIPS 1995].
10619,"This
algorithm is based on principles similar to those used in the design of MD4 [RFC 1320] , the predecessor
to MD5."
10620,"SHA-1, a US federal standard, is required for use whenever a cryptographic hash algorithm is
needed for federal applications."
10621,It produces a 160-bit message digest.
10622,The longer output length makesSHA-1 more secure.
10623,"8.3.2 Message Authentication Code
Let’s now return to the problem of message integrity."
10624,"Now that we understand hash functions, let’s takea first stab at how we might perform message integrity:
1."
10625,Alice creates message m and calculates the hash H(m) (for example with SHA-1).
10626,2.
10627,"Alice then appends H(m) to the message m, creating an extended message ( m, H(m)), and
sends the extended message to Bob.3. Bob receives an extended message ( m, h) and calculates H(m)."
10628,"If , Bob concludes that
everything is fine."
10629,This approach is obviously flawed.
10630,"Trudy can create a bogus message m´ in which she says she is
Alice, calculate H(m´), and send Bob (m´, H(m´))."
10631,"When Bob receives the message, everything checks
out in step 3, so Bob doesn’t suspect any funny ­business."
10632,"To perform message integrity, in addition to using cryptographic hash functions, Alice and Bob will need
a shared secret s."
10633,"This shared secret, which is nothing more than a string of bits, is called the
authentication key."
10634,"Using this shared secret, message integrity can be performed as follows:
1."
10635,"Alice creates message m, concatenates s with m to create , and calculates the hash 
(for example with SHA-1)."
10636, is called the message authentication code (MAC).
10637,2.
10638,"Alice then appends the MAC to the message m, creating an extended message ,
and sends the extended message to Bob."
10639,3.
10640,"Bob receives an extended message ( m, h) and knowing s, calculates the MAC ."
10641,"If
, Bob concludes that everything is fine."
10642,"A summary of the procedure is shown in Figure 8.9. Readers should note that the MAC here (standing
for “message authentication code”) is not the same MAC used in link-layer protocols (standing for
“medium access control”)!
One nice feature of a MAC is that it does not require an encryption algorithm."
10643,"Indeed, in many
applications, including the link-state routing algorithm described earlier, communicating entities are onlyconcerned with message integrity and are not concerned with message confidentiality."
10644,"Using a MAC,the entities can authenticate
Figure 8.9 Message authentication code (MAC)H(m)=h
m+s H(m+s)
H(m+s)
(m, H(m+s))
H(m+s)
H(m+s)=hthe messages they send to each other without having to integrate complex encryption algorithms into
the integrity process."
10645,"As you might expect, a number of different standards for MACs have been proposed over the years."
10646,"The most popular standard today is HMAC, which can be used either with MD5 or SHA-1."
10647,"HMAC
actually runs data and the authentication key through the hash function twice [Kaufman 1995 ; RFC
2104]."
10648,There still remains an important issue.
10649,"How do we distribute the shared authentication key to the
communicating entities?"
10650,"For example, in the link-state routing algorithm, we would somehow need todistribute the secret authentication key to each of the routers in the autonomous system."
10651,(Note that therouters can all use the same authentication key.) A network administrator could actually accomplish thisby physically visiting each of the routers.
10652,"Or, if the network administrator is a lazy guy, and if each router
has its own public key, the network administrator could distribute the authentication key to any one of
the routers by encrypting it with the router’s public key and then sending the encrypted key over thenetwork to the router."
10653,"8.3.3 Digital Signatures
Think of the number of the times you’ve signed your name to a piece of paper during the last week."
10654,"Yousign checks, credit card receipts, legal documents, and letters."
10655,Your signature attests to the fact that you(as opposed to someone else) have acknowledged and/or agreed with the document’s contents.
10656,"In adigital world, one often wants to indicate the owner or creator of a document, or to signify one’sagreement with a document’s content."
10657,"A digital signature  is a cryptographic technique for achieving
these goals in a digital world."
10658,"Just as with handwritten signatures, digital signing should be done in a way that is verifiable and
nonforgeable."
10659,"That is, it must be possible to prove that a document signed by an individual was indeed
signed by that individual (the signature must be verifiable) and that only that individual could have
signed the document (the signature cannot be forged)."
10660,Let’s now consider how we might design a digital signature scheme.
10661,"Observe that when Bob signs a
message, Bob must put something on the message that is unique to him."
10662,"Bob could consider attaching
a MAC for the signature, where the MAC is created by appending his key (unique to him) to themessage, and then taking the hash."
10663,"But for Alice to verify the signature, she must also have a copy ofthe key, in which case the key would not be unique to Bob."
10664,"Thus, MACs are not going to get the jobdone here.Recall that with public-key cryptography, Bob has both a public and private key, with both of these keys
being unique to Bob."
10665,"Thus, public-key cryptography is an excellent candidate for providing digital
signatures."
10666,Let us now examine how it is done.
10667,"Suppose that Bob wants to digitally sign a document, m."
10668,"We can think of the document as a file or a
message that Bob is going to sign and send."
10669,"As shown in Figure 8.10, to sign this document, Bob
simply uses his private key, , to compute ."
10670,"At first, it might seem odd that Bob is using his
private key (which, as we saw in Section 8.2, was used to decrypt a message that had been encrypted
with his public key) to sign a document."
10671,"But recall that encryption and decryption are nothing more than
mathematical operations (exponentiation to the power of e or d in RSA; see Section 8.2) and recall that
Bob’s goal is not to scramble or obscure the contents of the document, but rather to sign the document
in a manner that is verifiable and nonforgeable."
10672,Bob’s digital signature of the document is .
10673,Does the digital signature  meet our requirements of being verifiable and nonforgeable?
10674,Suppose Alice has m and .
10675,"She wants to prove in court (being
Figure 8.10 Creating a digital signature for a document
litigious) that Bob had indeed signed the document and was the only person who could have possibly
signed the document."
10676,"Alice takes Bob’s public key, , and applies it to the digital signature, ,
associated with the document, m."
10677,"That is, she computes , and voilà, with a dramatic flurry,
she produces m, which exactly matches the original document! Alice then argues that only Bob could
have signed the document, for the following reasons:
Whoever signed the message must have used the private key, , in computing the signature
, such that ."
10678,"The only person who could have known the private key, , is Bob."
10679,"Recall from our discussion ofKB− KB−(m)
KB−(m)
KB−(m)
KB−(m)
KB+ KB−(m)
KB+(KB−(m))
KB−
KB−(m) KB+(KB−(m))=m
KB−RSA in Section 8.2 that knowing the public key, , is of no help in learning the private key, ."
10680,"Therefore, the only person who could know  is the person who generated the pair of keys, ( ,
), in the first place, Bob."
10681,"(Note that this assumes, though, that Bob has not given  to anyone,
nor has anyone stolen  from Bob.)
It is also important to note that if the original document, m, is ever modified to some alternate form, m´,
the signature that Bob created for m will not be valid for m´, since  does not equal m´."
10682,"Thus
we see that digital signatures also provide message integrity, allowing the receiver to verify that the
message was unaltered as well as the source of the message."
10683,"One concern with signing data by encryption is that encryption and decryption are computationally
expensive."
10684,"Given the overheads of encryption and decryption, signing data via completeencryption/decryption can be overkill."
10685,"A more efficient approach is to introduce hash functions into the
digital signature."
10686,"Recall from ­Section 8.3.2 that a hash algorithm takes a message, m, of arbitrary
length and computes a fixed-length “fingerprint” of the message, denoted by H(m)."
10687,"Using a hash
function, Bob signs the hash of a message rather than the message itself, that is, Bob calculates
."
10688,"Since H(m) is generally much smaller than the original message m, the computational effort
required to create the digital signature is substantially reduced."
10689,"In the context of Bob sending a message to Alice, Figure 8.11 provides a summary of the operational
procedure of creating a digital signature."
10690,Bob puts his original long message through a hash function.
10691,He then digitally signs the resulting hash with his private key.
10692,"The original message (in cleartext) alongwith the digitally signed message digest (henceforth referred to as the digital signature) is then sent to
Alice."
10693,Figure 8.12 provides a summary of the operational procedure of the signature.
10694,"Alice applies the
sender’s public key to the message to obtain a hash result."
10695,"Alice also applies the hash function to the
cleartext message to obtain a second hash result."
10696,"If the two hashes match, then Alice can be sure aboutthe integrity and author of the message."
10697,"Before moving on, let’s briefly compare digital signatures with MACs, since they have parallels, but also
have important subtle differences."
10698,"Both digital signatures andKB+ KB−
KB− KB+
KB− KB−
KB−
KB+(KB−(m))
KB−(H(m))Figure 8.11 Sending a digitally signed message
MACs start with a message (or a document)."
10699,"To create a MAC out of the message, we append an
authentication key to the message, and then take the hash of the result."
10700,"Note that neither public key nor
symmetric key encryption is involved in creating the MAC."
10701,"To create a digital signature, we first take thehash of the message and then encrypt the message with our private key (using public keycryptography)."
10702,"Thus, a digital signature is a “heavier” technique, since it requires an underlying Public
Key Infrastructure (PKI) with certification authorities as described below."
10703,"We’ll see in Section 8.4 that
PGP—a popular secure e-mail system—uses digital signatures for message integrity."
10704,We’ve seenalready that OSPF uses MACs for message integrity.
10705,"We’ll see in Sections 8.5 and 8.6 that MACs are
also used for popular transport-layer and network-layer security protocols."
10706,"Public Key Certification
An important application of digital signatures is public key certification , that is, certifying that a public
key belongs to a specific entity."
10707,"Public key certification is used in many popular secure networking
protocols, including IPsec and SSL."
10708,"To gain insight into this problem, let’s consider an Internet-commerce version of the classic “pizza
prank.” Alice is in the pizza delivery business and accepts ordersFigure 8.12 Verifying a signed message
over the Internet."
10709,"Bob, a pizza lover, sends Alice a plaintext message that includes his home address
and the type of pizza he wants."
10710,"In this message, Bob also includes a digital signature (that is, a signed
hash of the original plaintext message) to prove to Alice that he is the true source of the message."
10711,"Toverify the signature, Alice obtains Bob’s public key (perhaps from a public key server or from the e-mailmessage) and checks the digital signature."
10712,"In this manner she makes sure that Bob, rather than someadolescent prankster, placed the order."
10713,This all sounds fine until clever Trudy comes along.
10714,"As shown in Figure 8.13, Trudy is indulging in a
prank."
10715,"She sends a message to Alice in which she says she is Bob, gives Bob’s home address, and
orders a pizza."
10716,"In this message she also includes her (Trudy’s) public key, although Alice naturally
assumes it is Bob’s public key."
10717,"Trudy also attaches a digital signature, which was created with her own
(Trudy’s) private key."
10718,"After receiving the message, Alice applies Trudy’s public key (thinking that it isBob’s) to the digital signature and concludes that the plaintext message wasFigure 8.13 Trudy masquerades as Bob using public key cryptography
indeed created by Bob."
10719,"Bob will be very surprised when the delivery person brings a pizza with
pepperoni and anchovies to his home!
We see from this example that for public key cryptography to be useful, you need to be able to verify
that you have the actual public key of the entity (person, router, browser, and so on) with whom youwant to communicate."
10720,"For example, when Alice wants to communicate with Bob using public keycryptography, she needs to verify that the public key that is supposed to be Bob’s is indeed Bob’s."
10721,"Binding a public key to a particular entity is typically done by a Certification Authority (CA), whose job
is to validate identities and issue certificates."
10722,"A CA has the following roles:
1."
10723,"A CA verifies that an entity (a person, a router, and so on) is who it says it is."
10724,"There are no
mandated procedures for how certification is done."
10725,"When dealing with a CA, one must trust the
CA to have performed a suitably rigorous identity verification."
10726,"For example, if Trudy were able towalk into the Fly-by-NightFigure 8.14 Bob has his public key certified by the CA
CA and simply announce “I am Alice” and receive certificates associated with the identity of
Alice, then one shouldn’t put much faith in public keys certified by the Fly-by-Night CA."
10727,"On the
other hand, one might (or might not!) be more willing to trust a CA that is part of a federal orstate program."
10728,You can trust the identity associated with a public key only to the extent to whichyou can trust a CA and its identity verification techniques.
10729,"What a tangled web of trust we spin!
2."
10730,"Once the CA verifies the identity of the entity, the CA creates a certificate  that binds the public
key of the entity to the identity."
10731,"The certificate contains the public key and globally uniqueidentifying information about the owner of the public key (for example, a human name or an IP
address)."
10732,The certificate is digitally signed by the CA.
10733,These steps are shown in Figure 8.14.
10734,"Let us now see how certificates can be used to combat pizza-ordering pranksters, like Trudy, and other
undesirables."
10735,When Bob places his order he also sends his CA-signed certificate.
10736,Alice uses the CA’spublic key to check the validity of Bob’s certificate and extract Bob’s public key.
10737,"Both the International Telecommunication Union (ITU) and the IETF have developed standards for CAs.
ITU X.509 [ITU 2005a] specifies an authentication service as well as a specific syntax for certificates."
10738,[RFC 1422]  describes CA-based key management for use with secure Internet e-mail.
10739,"It is compatible
with X.509 but goes beyond X.509 by establishing procedures and conventions for a key management
architecture."
10740,Table 8.4 describes some of the important fields in a certificate.
10741,"Table 8.4 Selected fields in an X.509 and RFC 1422 public keyField Name Description
Version Version number of X.509 specification
Serial
numberCA-issued unique identifier for a certificate
Signature Specifies the algorithm used by CA to sign this certificate
IssuernameIdentity of CA issuing this certificate, in distinguished name (DN) [RFC 4514]  format
Validity
periodStart and end of period of validity for certificate
Subject
nameIdentity of entity whose public key is associated with this certificate, in DN format
Subjectpublic keyThe subject’s public key as well indication of the public key algorithm (and algorithmparameters) to be used with this key8.4 End-Point Authentication
End-point authentication  is the process of one entity proving its identity to another entity over a
computer network, for example, a user proving its identity to an e-mail server."
10742,"As humans, we
authenticate each other in many ways: We recognize each ­other’s faces when we meet, we recognize
each other’s voices on the telephone, we are authenticated by the customs official who checks usagainst the picture on our passport."
10743,"In this section, we consider how one party can authenticate another party when the two are
communicating over a network."
10744,"We focus here on authenticating a “live” party, at the point in time whencommunication is actually occurring."
10745,A concrete example is a user authenticating him or herself to an e-mail server.
10746,"This is a subtly different problem from proving that a message received at some point in the
past did indeed come from that claimed sender, as studied in Section 8.3.
When performing authentication over the network, the communicating parties cannot rely on biometric
information, such as a visual appearance or a voiceprint."
10747,"Indeed, we will see in our later case studies
that it is often network elements such as routers and client/server processes that must authenticateeach other."
10748,"Here, authentication must be done solely on the basis of messages and data exchanged as
part of an authentication protocol ."
10749,"Typically, an authentication protocol would run before the two
communicating parties run some other protocol (for example, a reliable data transfer protocol, a routing
information exchange protocol, or an e-mail protocol)."
10750,The authentication protocol first establishes theidentities of the parties to each other’s satisfaction; only after authentication do the parties get down tothe work at hand.
10751,"As in the case of our development of a reliable data transfer (rdt) protocol in Chapter 3, we will find it
instructive here to develop various versions of an authentication protocol, which we will call ap
(authentication protocol), and poke holes in each versionFigure 8.15 Protocol ap1.0 and a failure scenario
as we proceed."
10752,"(If you enjoy this stepwise evolution of a design, you might also enjoy [Bryant 1988] ,
which recounts a fictitious narrative between designers of an open-network authentication system, and
their discovery of the many subtle issues involved.)
Let’s assume that Alice needs to authenticate herself to Bob."
10753,"8.4.1 Authentication Protocol ap1.0
Perhaps the simplest authentication protocol we can imagine is one where Alice simply sends a
message to Bob saying she is Alice."
10754,This protocol is shown in Figure 8.15.
10755,"The flaw here is obvious—
there is no way for Bob actually to know that the person sending the message “I am Alice” is indeed
Alice."
10756,"For example, Trudy (the intruder) could just as well send such a message."
10757,"8.4.2 Authentication Protocol ap2.0
If Alice has a well-known network address (e.g., an IP address) from which she always communicates,Bob could attempt to authenticate Alice by verifying that the source address on the IP datagram carryingthe authentication message matches Alice’s well-known address."
10758,"In this case, Alice would beauthenticated."
10759,"This might stop a very network-naive intruder from impersonating Alice, but it wouldn’tstop the determined student studying this book, or many others!
From our study of the network and data link layers, we know that it is not that hard (for example, if one
had access to the operating system code and could build one’s own operating system kernel, as is thecase with Linux and several other freely available operating systems) to create an IP datagram, put
whatever IP source address we want (for example, Alice’s well-known IP address) into the IP datagram,
and send the datagram over the link-layer protocol to the first-hop router."
10760,"From then
Figure 8.16 Protocol ap2.0 and a failure scenario
on, the incorrectly source-addressed datagram would be dutifully forwarded to Bob."
10761,"This approach,
shown in Figure 8.16, is a form of IP spoofing."
10762,"IP spoofing can be avoided if Trudy’s first-hop router is
configured to forward only datagrams containing Trudy’s IP source address [RFC 2827] ."
10763,"However, this
capability is not universally deployed or enforced."
10764,"Bob would thus be foolish to assume that Trudy’s
network manager (who might be Trudy herself) had configured Trudy’s first-hop router to forward onlyappropriately addressed datagrams."
10765,"8.4.3 Authentication Protocol ap3.0
One classic approach to authentication is to use a secret password."
10766,The password is a shared secretbetween the authenticator and the person being authenticated.
10767,"Gmail, Facebook, telnet, FTP, and manyother services use password authentication."
10768,"In protocol ap3.0, Alice thus sends her secret password to
Bob, as shown in Figure 8.17."
10769,"Since passwords are so widely used, we might suspect that protocol ap3.0 is fairly secure."
10770,"If so, we’d be
wrong! The security flaw here is clear."
10771,"If Trudy eavesdrops on Alice’s communication, then she can
learn Alice’s password."
10772,"Lest you think this is unlikely, consider the fact that when you Telnet to anothermachine and log in, the login password is sent unencrypted to the Telnet server."
10773,Someone connected tothe Telnet client or server’s LAN can possibly sniff (read and store) all packets transmitted on the LANand thus steal the login password.
10774,"In fact, this is a well-known approach for stealing passwords (see, for
example, [Jimenez 1997] )."
10775,"Such a threat is obviously very real, so ap3.0 clearly won’t do.8.4.4 Authentication Protocol ap3.1
Our next idea for fixing ap3.0 is naturally to encrypt the password."
10776,"By encrypting the password, we can
prevent Trudy from learning Alice’s password."
10777,"If we assume
Figure 8.17 Protocol ap3.0 and a failure scenario
that Alice and Bob share a symmetric secret key,  then Alice can encrypt the password and send
her identification message, “ I am Alice, ” and her encrypted password to Bob."
10778,"Bob then decrypts the
password and, assuming the password is correct, authenticates Alice."
10779,"Bob feels comfortable inauthenticating Alice since Alice not only knows the password, but also knows the shared secret keyvalue needed to encrypt the password."
10780,"Let’s call this protocol ap3.1.
While it is true that ap3.1 prevents Trudy from learning Alice’s password, the use of cryptography here
does not solve the authentication problem."
10781,"Bob is subject to a playback attack : Trudy need only
eavesdrop on Alice’s communication, record the encrypted version of the password, and play back the
encrypted version of the password to Bob to pretend that she is Alice."
10782,"The use of an encrypted
password in ap3.1 doesn’t make the situation manifestly different from that of protocol ap3.0 in Figure
8.17.KA−B,8.4.5 Authentication Protocol ap4.0
The failure scenario in Figure 8.17 resulted from the fact that Bob could not distinguish between the
original authentication of Alice and the later playback of Alice’s original authentication."
10783,"That is, Bob
could not tell if Alice was live (that is, was currently really on the other end of the connection) or whetherthe messages he was receiving were a recorded playback of a previous authentication of Alice."
10784,"The
very (very) observant reader will recall that the three-way TCP handshake protocol needed to address
the same problem—the server side of a TCP connection did not want to accept a connection if the
received SYN segment was an old copy (retransmission) of a SYN segment from an earlier connection.How did the TCP server side solve the problem of determining whether the client was really live?"
10785,"Itchose an initial sequence number that had not been used in a very long time, sent that number to theclient, and then waited for the client to respond with an ACK segment containing that number."
10786,We canadopt the same idea here for authentication purposes.
10787,A nonce is a number that a protocol will use only once in a lifetime.
10788,"That is, once a protocol uses a
nonce, it will never use that number again."
10789,"Our ap4.0 protocol uses a nonce as follows:
1."
10790,Alice sends the message “ I am Alice ” to Bob.
10791,2.
10792,"Bob chooses a nonce, R, and sends it to Alice."
10793,3.
10794,"Alice encrypts the nonce using Alice and Bob’s symmetric secret key,  and sends the
encrypted nonce,  (R), back to Bob."
10795,"As in protocol ap3.1, it is the fact that Alice knows
 and uses it to encrypt a value that lets Bob know that the message he receives was
generated by Alice."
10796,The nonce is used to ensure that Alice is live.
10797,4.
10798,Bob decrypts the received message.
10799,"If the decrypted nonce equals the nonce he sent Alice, then
Alice is authenticated."
10800,Protocol ap4.0 is illustrated in Figure 8.18.
10801,"By using the once-in-a-lifetime value, R, and then checking
the returned value,  (R), Bob can be sure that Alice is both who she says she is (since she knows
the secret key value needed to encrypt R) and live (since she has encrypted the nonce, R, that Bob just
created)."
10802,"The use of a nonce and symmetric key cryptography forms the basis of ap4.0. A natural question is
whether we can use a nonce and public key cryptography (rather than symmetric key cryptography) to
solve the authentication problem."
10803,"This issue is explored in the problems at the end of the chapter.KA−B,
KA−B
KA−B
KA−BFigure 8.18 Protocol ap4.0 and a failure scenario8.5 Securing E-Mail
In previous sections, we examined fundamental issues in network security, including symmetric key and
public key cryptography, end-point authentication, key distribution, message integrity, and digitalsignatures."
10804,We are now going to examine how these tools are being used to provide security in theInternet.
10805,"Interestingly, it is possible to provide security services in any of the top four layers of the Internet
protocol stack."
10806,"When security is provided for a specific application-layer protocol, the application usingthe protocol will enjoy one or more security services, such as confidentiality, authentication, or integrity.When security is provided for a transport-layer protocol, all applications that use that protocol enjoy thesecurity services of the transport protocol."
10807,"When security is provided at the network layer on a host-to-host basis, all transport-layer segments (and hence all application-layer data) enjoy the security servicesof the network layer."
10808,"When security is provided on a link basis, then the data in all frames traveling overthe link receive the security services of the link."
10809,"In Sections 8.5 through 8.8, we examine how security tools are being used in the application, transport,
network, and link layers."
10810,"Being consistent with the general structure of this book, we begin at the top of
the protocol stack and discuss security at the application layer."
10811,"Our approach is to use a specificapplication, e-mail, as a case study for application-layer security."
10812,We then move down the protocolstack.
10813,"We’ll examine the SSL protocol (which provides security at the transport layer), IPsec (whichprovides security at the network layer), and the security of the IEEE 802.11 wireless LAN protocol."
10814,"You might be wondering why security functionality is being provided at more than one layer in the
Internet."
10815,"Wouldn’t it suffice simply to provide the security functionality at the network layer and be done
with it?"
10816,There are two answers to this question.
10817,"First, although security at the network layer can offer“blanket coverage” by encrypting all the data in the datagrams (that is, all the transport-layer segments)and by authenticating all the source IP addresses, it can’t provide user-level security."
10818,"For example, acommerce site cannot rely on IP-layer security to authenticate a customer who is purchasing goods atthe commerce site."
10819,"Thus, there is a need for security functionality at higher layers as well as blanketcoverage at lower layers."
10820,"Second, it is generally easier to deploy new Internet services, includingsecurity services, at the higher layers of the protocol stack."
10821,"While waiting for security to be broadly
deployed at the network layer, which is probably still many years in the future, many application
developers “just do it” and introduce security functionality into their favorite applications."
10822,"A classicexample is Pretty Good Privacy (PGP), which provides secure e-mail (discussed later in this section).Requiring only client and server application code, PGP was one of the first security technologies to be
broadly used in the Internet.8.5.1 Secure E-Mail
We now use the cryptographic principles of Sections 8.2 through 8.3 to create a secure e-mail system."
10823,"We create this high-level design in an incremental manner, at each step introducing new security
services."
10824,"When designing a secure e-mail system, let us keep in mind the racy example introduced in
Section 8.1—the love affair between Alice and Bob."
10825,"Imagine that Alice wants to send an e-mail
message to Bob, and Trudy wants to intrude."
10826,"Before plowing ahead and designing a secure e-mail system for Alice and Bob, we should consider
which security features would be most desirable for them."
10827,First and foremost is confidentiality.
10828," As
discussed in Section 8.1, neither Alice nor Bob wants Trudy to read Alice’s e-mail message."
10829,"The
second feature that Alice and Bob would most likely want to see in the secure e-mail system is sender
authentication ."
10830,"In particular, when Bob receives the message “ I don’t love you anymore."
10831,"I
never want to see you again."
10832,"Formerly yours, Alice, ” he would naturally want to be
sure that the message came from Alice and not from Trudy."
10833,"Another feature that the two lovers wouldappreciate is message integrity , that is, assurance that the message Alice sends is not modified while
en route to Bob."
10834,"Finally, the e-mail system should provide receiver authentication ; that is, Alice wants to
make sure that she is indeed sending the letter to Bob and not to someone else (for example, Trudy)
who is impersonating Bob."
10835,"So let’s begin by addressing the foremost concern, confidentiality."
10836,"The most straightforward way to
provide confidentiality is for Alice to encrypt the message with symmetric key technology (such as DES
or AES) and for Bob to decrypt the message on receipt."
10837,"As discussed in Section 8.2, if the symmetric
key is long enough, and if only Alice and Bob have the key, then it is extremely difficult for anyone else
(including Trudy) to read the message."
10838,"Although this approach is straightforward, it has the fundamental
difficulty that we discussed in Section 8.2—distributing a symmetric key so that only Alice and Bob have
copies of it."
10839,"So we naturally consider an alternative approach—public key cryptography (using, for
example, RSA)."
10840,"In the public key approach, Bob makes his public key publicly available (e.g., in a public
key server or on his personal Web page), Alice encrypts her message with Bob’s public key, and shesends the encrypted message to Bob’s e-mail address."
10841,"When Bob receives the message, he simplydecrypts it with his private key."
10842,"Assuming that Alice knows for sure that the public key is Bob’s publickey, this approach is an excellent means to provide the desired confidentiality."
10843,"One problem, however,is that public key encryption is relatively inefficient, particularly for long messages."
10844,"To overcome the efficiency problem, let’s make use of a session key (discussed in Section 8.2.2)."
10845,"In
particular, Alice (1) selects a random symmetric session key, K, (2) encrypts her message, m, with the
symmetric key, (3) encrypts the symmetric key with Bob’s public key, , (4) concatenates the
S
KB+encrypted message and the encrypted symmetric key to form a “package,” and (5) sends the package to
Bob’s
Figure 8.19 Alice used a symmetric session key, K , to send a secret e-mail to Bob
e-mail address."
10846,The steps are illustrated in Figure 8.19.
10847,"(In this and the subsequent figures, the circled
“” represents concatenation and the circled “ ” represents deconcatenation.) When Bob receives the
package, he (1) uses his private key, , to obtain the symmetric key, K , and (2) uses the symmetric
key K  to decrypt the message m."
10848,"Having designed a secure e-mail system that provides confidentiality, let’s now design another system
that provides both sender authentication and message integrity."
10849,"We’ll suppose, for the moment, thatAlice and Bob are no longer concerned with confidentiality (they want to share their feelings witheveryone!), and are concerned only about sender authentication and message integrity."
10850,"To accomplish
this task, we use digital signatures and message digests, as described in Section 8.3. Specifically, Alice
(1) applies a hash function, H (for example, MD5), to her message, m, to obtain a message digest, (2)
signs the result of the hash function with her private key, , to create a digital signature, (3)
concatenates the original (unencrypted) message with the signature to create a package, and (4) sends
the package to Bob’s e-mail address."
10851,"When Bob receives the package, he (1) applies Alice’s public key,
, to the signed message digest and (2) compares the result of this operation with his own hash, H,
of the message."
10852,The steps are illustrated in Figure 8.20.
10853,"As discussed in Section 8.3, if the two results
are the same, Bob can be pretty confident that the message came from Alice and is unaltered."
10854,"Now let’s consider designing an e-mail system that provides confidentiality, sender authentication, and
message integrity."
10855,This can be done by combining the procedures in Figures 8.19 and 8.20.
10856,"Alice first
creates a preliminary package, exactly as in Figure 8.20, that consists of her original message along
with a digitally signed hash of the message."
10857,"She then treats this preliminary package as a message in
itself and sends this new message through the sender steps in Figure 8.19, creating a new package
that is sent to Bob."
10858,The steps applied by Alice are shown in Figure 8.21.
10859,"When Bob receives theS
+ −
KB−S
S
KA−
KA+package, he first applies his side of Figure 8.19 and then his
Figure 8.20 Using hash functions and digital signatures to provide ­sender authentication and
message integrity
side of Figure 8.20."
10860,"It should be clear that this design achieves the goal of providing confidentiality,
sender authentication, and message integrity."
10861,"Note that, in this scheme, Alice uses public key
cryptography twice: once with her own private key and once with Bob’s public key."
10862,"Similarly, Bob alsouses public key cryptography twice—once with his private key and once with Alice’s public key."
10863,"The secure e-mail design outlined in Figure 8.21 probably provides satisfactory security for most e-mail
users for most occasions."
10864,But there is still one important issue that remains to be addressed.
10865,"The design
in Figure 8.21 requires Alice to obtain Bob’s public key, and requires Bob to obtain Alice’s public key."
10866,The distribution of these public keys is a nontrivial problem.
10867,"For example, Trudy might masquerade as
Bob and give Alice her own public key while saying that it is Bob’s public key,
Figure 8.21 Alice uses symmetric key cyptography, public key ­cryptography, a hash function,
and a digital signature to ­provide secrecy, sender authentication, and message integrityenabling her to receive the message meant for Bob."
10868,"As we learned in Section 8.3, a popular approach
for securely distributing public keys is to certify the public keys using a CA."
10869,"8.5.2 PGP
Written by Phil Zimmermann in 1991, Pretty Good Privacy (PGP) is a nice example of an e-mail
encryption scheme [PGPI 2016]."
10870,"Versions of PGP are available in the public domain; for example, you
can find the PGP software for your favorite platform as well as lots of interesting reading at the
International PGP Home Page [PGPI 2016]."
10871,"The PGP design is, in essence, the same as the design
shown in Figure 8.21."
10872,"Depending on the version, the PGP software uses MD5 or SHA for calculating
the message digest; CAST, triple-DES, or IDEA for symmetric key encryption; and RSA for the public
key encryption."
10873,"When PGP is installed, the software creates a public key pair for the user."
10874,"The public key can be posted
on the user’s Web site or placed in a public key server."
10875,The private key is protected by the use of apassword.
10876,The password has to be entered every time the user accesses the private key.
10877,"PGP gives theuser the option of digitally signing the message, encrypting the message, or both digitally signing and
encrypting."
10878,Figure 8.22 shows a PGP signed message.
10879,This message appears after the MIME header.
10880,"The encoded data in the message is , that is, the digitally signed message digest."
10881,"As we
discussed above, in order for Bob to verify the integrity of the message, he needs to have access to
Alice’s public key."
10882,Figure 8.23 shows a secret PGP message.
10883,This message also appears after the MIME header.
10884,"Of
course, the plaintext message is not included within the secret e-mail message."
10885,"When a sender (such
as Alice) wants both confidentiality and integrity, PGP contains a message like that of Figure 8.23 within
the message of Figure 8.22."
10886,"PGP also provides a mechanism for public key certification, but the mechanism is quite different from
the more conventional CA."
10887,"PGP public keys are certified by
KA−(H(m))Figure 8.22 A PGP signed message
Figure 8.23 A secret PGP message
a web of trust."
10888,"Alice herself can certify any key/username pair when she believes the pair really belong
together."
10889,"In addition, PGP permits Alice to say that she trusts another user to vouch for the authenticity
of more keys."
10890,Some PGP users sign each other’s keys by holding key-signing parties.
10891,"Users physicallygather, exchange ­public keys, and certify each other’s keys by signing them with their private keys.8.6 Securing TCP Connections: SSL
In the previous section, we saw how cryptographic techniques can provide confidentiality, data integrity,
and end-point authentication to a specific application, namely, e-mail."
10892,"In this section, we’ll drop down alayer in the protocol stack and examine how cryptography can enhance TCP with security services,including confidentiality, data integrity, and end-point authentication."
10893,This enhanced version of TCP iscommonly known as Secure Sockets Layer (SSL) .
10894,"A slightly modified version of SSL version 3, called
Transport Layer Security (TLS) , has been standardized by the IETF [RFC 4346] ."
10895,"The SSL protocol was originally designed by Netscape, but the basic ideas behind securing TCP had
predated Netscape’s work (for example, see Woo [Woo 1994])."
10896,"Since its inception, SSL has enjoyed
broad deployment."
10897,"SSL is supported by all popular Web browsers and Web servers, and it is used by
Gmail and essentially all Internet commerce sites (including Amazon, eBay, and TaoBao)."
10898,Hundreds ofbillions of dollars are spent over SSL every year.
10899,"In fact, if you have ever purchased anything over theInternet with your credit card, the communication between your browser and the server for this purchase
almost certainly went over SSL."
10900,"(You can identify that SSL is being used by your browser when the URL
begins with https: rather than http.)
To understand the need for SSL, let’s walk through a typical Internet commerce scenario."
10901,"Bob is surfing
the Web and arrives at the Alice Incorporated site, which is selling perfume."
10902,"The Alice Incorporated sitedisplays a form in which Bob is supposed to enter the type of perfume and quantity desired, his address,and his payment card number."
10903,"Bob enters this information, clicks on Submit, and expects to receive (viaordinary postal mail) the purchased perfumes; he also expects to receive a charge for his order in his
next payment card statement."
10904,"This all sounds good, but if no security measures are taken, Bob could be
in for a few surprises."
10905,"If no confidentiality (encryption) is used, an intruder could intercept Bob’s order and obtain his
payment card information."
10906,The intruder could then make purchases at Bob’s expense.
10907,"If no data integrity is used, an intruder could modify Bob’s order, having him purchase ten timesmore bottles of perfume than desired."
10908,"Finally, if no server authentication is used, a server could display Alice Incorporated’s famous logowhen in actuality the site maintained by Trudy, who is masquerading as Alice Incorporated."
10909,"After
receiving Bob’s order, Trudy could take Bob’s money and run."
10910,"Or Trudy could carry out an identitytheft by collecting Bob’s name, address, and credit card number."
10911,"SSL addresses these issues by enhancing TCP with confidentiality, data integrity, server authentication,
and client authentication.SSL is often used to provide security to transactions that take place over HTTP."
10912,"However, because SSL
secures TCP, it can be employed by any application that runs over TCP."
10913,"SSL provides a simpleApplication Programmer Interface (API) with sockets, which is similar and analogous to TCP’s API.When an application wants to employ SSL, the application includes SSL classes/libraries."
10914,"As shown in
Figure 8.24, although SSL technically resides in the application layer, from the developer’s perspective
it is a transport protocol that provides TCP’s services enhanced with security services."
10915,"8.6.1 The Big Picture
We begin by describing a simplified version of SSL, one that will allow us to get a big-picture
understanding of the why and how of SSL."
10916,"We will refer to this simplified
Figure 8.24 Although SSL technically resides in the application layer, from the developer’s
perspective it is a transport-layer ­protocol
version of SSL as “almost-SSL.” After describing almost-SSL, in the next subsection we’ll then describe
the real SSL, filling in the details."
10917,"Almost-SSL (and SSL) has three phases: handshake , key derivation ,
and data transfer."
10918,"We now describe these three phases for a communication session between a client
(Bob) and a server (Alice), with Alice having a private/public key pair and a certificate that binds her
identity to her public key.Handshake
During the handshake phase, Bob needs to (a) establish a TCP connection with Alice, (b) verify that
Alice is really  Alice, and (c) send Alice a master secret key, which will be used by both Alice and Bob to
generate all the symmetric keys they need for the SSL session."
10919,"These three steps are shown in Figure
8.25."
10920,"Note that once the TCP connection is established, Bob sends Alice a hello message."
10921,"Alice then
responds with her certificate, which contains her public key."
10922,"As discussed in Section 8.3, because the
certificate has been certified by a CA, Bob knows for sure that the public key in the certificate belongs toAlice."
10923,"Bob then generates a Master Secret (MS) (which will only be used for this SSL session), encryptsthe MS with Alice’s public key to create the Encrypted Master Secret (EMS), and sends the EMS toAlice."
10924,Alice decrypts the EMS with her private key to get the MS.
10925,"After this phase, both Bob and Alice(and no one else) know the master secret for this SSL session."
10926,"Figure 8.25 The almost-SSL handshake, beginning with a TCP ­connection
Key Derivation
In principle, the MS, now shared by Bob and Alice, could be used as the symmetric session key for all
subsequent encryption and data integrity checking."
10927,"It is, however, generally considered safer for Aliceand Bob to each use different cryptographic keys, and also to use different keys for encryption andintegrity checking."
10928,"Thus, both Alice and Bob use the MS to generate four keys:
 session encryption key for data sent from Bob to Alice
 session MAC key for data sent from Bob to AliceEB=MB=
EA= session encryption key for data sent from Alice to Bob
 session MAC key for data sent from Alice to Bob
Alice and Bob each generate the four keys from the MS."
10929,"This could be done by simply slicing the MS
into four keys."
10930,"(But in real SSL it is a little more complicated, as we’ll see.) At the end of the key
derivation phase, both Alice and Bob have all four keys."
10931,"The two encryption keys will be used to encrypt
data; the two MAC keys will be used to verify the integrity of the data."
10932,"Data TransferNow that Alice and Bob share the same four session keys (E , M, E, and M ), they can start to send
secured data to each other over the TCP connection."
10933,"Since TCP is a byte-stream protocol, a natural
approach would be for SSL to encrypt application data on the fly and then pass the encrypted data on
the fly to TCP."
10934,"But if we were to do this, where would we put the MAC for the integrity check?"
10935,"Wecertainly do not want to wait until the end of the TCP session to verify the integrity of all of Bob’s datathat was sent over the entire session! To address this issue, SSL breaks the data stream into records,appends a MAC to each record for integrity checking, and then encrypts the record ."
10936,"To create the
MAC, Bob inputs the record data along with the key M  into a hash function, as discussed in Section
8.3. To encrypt the package record , Bob uses his session encryption key E ."
10937,"This encrypted
package is then passed to TCP for transport over the Internet."
10938,"Although this approach goes a long way, it still isn’t bullet-proof when it comes to providing data integrity
for the entire message stream."
10939,"In particular, suppose Trudy is a woman-in-the-middle and has the abilityto insert, delete, and replace segments in the stream of TCP segments sent between Alice and Bob."
10940,"Trudy, for example, could capture two segments sent by Bob, reverse the order of the segments, adjust
the TCP sequence numbers (which are not encrypted), and then send the two reverse-orderedsegments to Alice."
10941,"Assuming that each TCP segment encapsulates exactly one record, let’s now take alook at how Alice would process these segments."
10942,1.
10943,"TCP running in Alice would think everything is fine and pass the two records to the SSL
sublayer."
10944,2.
10945,SSL in Alice would decrypt the two records.
10946,3.
10947,SSL in Alice would use the MAC in each record to verify the data integrity of the two records.
10948,4.
10949,"SSL would then pass the decrypted byte streams of the two records to the application layer; butthe complete byte stream received by Alice would not be in the correct order due to reversal of
the records!
You are encouraged to walk through similar scenarios for when Trudy removes segments or whenTrudy replays segments.MA=
B B A A
+MAC
B
+MACBThe solution to this problem, as you probably guessed, is to use sequence numbers."
10950,"SSL does this as
follows."
10951,"Bob maintains a sequence number counter, which begins at zero and is incremented for each
SSL record he sends."
10952,"Bob doesn’t actually include a sequence number in the record itself, but when hecalculates the MAC, he includes the sequence number in the MAC calculation."
10953,"Thus, the MAC is now a
hash of the data plus the MAC key M  plus the current sequence number ."
10954,"Alice tracks Bob’s sequence
numbers, allowing her to verify the data integrity of a record by including the appropriate sequence
number in the MAC calculation."
10955,"This use of SSL sequence numbers prevents Trudy from carrying out awoman-in-the-middle attack, such as reordering or replaying segments."
10956,"(Why?)
SSL RecordThe SSL record (as well as the almost-SSL record) is shown in Figure 8.26."
10957,"The record consists of a
type field, version field, length field, data field, and MAC field."
10958,"Note that the first three fields are not
encrypted."
10959,The type field indicates whether the record is a handshake message or a message thatcontains application data.
10960,"It is also used to close the SSL connection, as discussed below."
10961,SSL at thereceiving end uses the length field to extract the SSL records out of the incoming TCP byte stream.
10962,Theversion field is self-explanatory.
10963,"8.6.2 A More Complete Picture
The previous subsection covered the almost-SSL protocol; it served to give us a basic understanding ofthe why and how of SSL."
10964,"Now that we have a basic understanding of SSL, we can dig a little deeperand examine the essentials of the actual SSL protocol."
10965,"In parallel to reading this description of the SSLprotocol, you are encouraged to complete the Wireshark SSL lab, available at the textbook’s Web site."
10966,"Figure 8.26 Record format for SSL
SSL Handshake
SSL does not mandate that Alice and Bob use a specific symmetric key algorithm, a specific public-key
algorithm, or a specific MAC."
10967,"Instead, SSL allows Alice and Bob to agree on the cryptographicalgorithms at the beginning of the SSL session, during the handshake phase."
10968,"Additionally, during thehandshake phase, Alice and Bob send nonces to each other, which are used in the creation of theBsession keys (E , M, E, and M )."
10969,"The steps of the real SSL handshake are as follows:
1."
10970,"The client sends a list of cryptographic algorithms it supports, along with a ­client nonce."
10971,2.
10972,"From the list, the server chooses a symmetric algorithm (for example, AES), a public key
algorithm (for example, RSA with a specific key length), and a MAC algorithm."
10973,"It sends back to
the client its choices, as well as a certificate and a server nonce."
10974,3.
10975,"The client verifies the certificate, extracts the server’s public key, generates a Pre-Master Secret
(PMS), encrypts the PMS with the server’s public key, and sends the encrypted PMS to the
server."
10976,4.
10977,"Using the same key derivation function (as specified by the SSL standard), the client and server
independently compute the Master Secret (MS) from the PMS and nonces."
10978,"The MS is then
sliced up to generate the two encryption and two MAC keys."
10979,"Furthermore, when the chosensymmetric cipher employs CBC (such as 3DES or AES), then two Initialization Vectors (IVs)—
one for each side of the connection—are also obtained from the MS."
10980,"Henceforth, all ­messages
sent between client and server are encrypted and authenticated (with the MAC)."
10981,5.
10982,The client sends a MAC of all the handshake messages.
10983,6.
10984,The server sends a MAC of all the handshake messages.
10985,The last two steps protect the handshake from tampering.
10986,"To see this, observe that in step 1, the client
typically offers a list of algorithms—some strong, some weak."
10987,"This list of algorithms is sent in cleartext,
since the encryption algorithms and keys have not yet been agreed upon."
10988,"Trudy, as a woman-in-the-
middle, could delete the stronger algorithms from the list, forcing the client to select a weak algorithm.To prevent such a tampering attack, in step 5 the client sends a MAC of the concatenation of all thehandshake messages it sent and received."
10989,The server can compare this MAC with the MAC of thehandshake messages it received and sent.
10990,"If there is an inconsistency, the server can terminate theconnection."
10991,"Similarly, the server sends a MAC of the handshake messages it has seen, allowing theclient to check for inconsistencies."
10992,You may be wondering why there are nonces in steps 1 and 2.
10993,"Don’t sequence numbers suffice for
preventing the segment replay attack?"
10994,"The answer is yes, but they don’t alone prevent the “connection
replay attack.” Consider the following connection replay attack."
10995,"Suppose Trudy sniffs all messages
between Alice and Bob."
10996,"The next day, Trudy masquerades as Bob and sends to Alice exactly the samesequence of messages that Bob sent to Alice on the previous day."
10997,"If Alice doesn’t use nonces, she willrespond with exactly the same sequence of messages she sent the previous day."
10998,"Alice will not suspectany funny business, as each message she receives will pass the integrity check."
10999,"If Alice is an e-commerce server, she will think that Bob is placing a second order (for exactly the same thing)."
11000,"On theother hand, by including a nonce in the protocol, Alice will send different nonces for each TCP session,
causing the encryption keys to be different on the two days."
11001,"Therefore, when Alice receives played-back
SSL records from Trudy, the records will fail the integrity checks, and the bogus e-commerce transactionwill not succeed."
11002,"In summary, in SSL, nonces are used to defend against the “connection replay attack”B B A Aand sequence numbers are used to defend against replaying individual packets during an ongoing
session."
11003,"Connection Closure
At some point, either Bob or Alice will want to end the SSL session."
11004,"One approach would be to let Bob
end the SSL session by simply terminating the underlying TCP connection—that is, by having Bob send
a TCP FIN segment to Alice."
11005,"But such a naive design sets the stage for the truncation attack whereby
Trudy once again gets in the middle of an ongoing SSL session and ends the session early with a TCP
FIN."
11006,"If Trudy were to do this, Alice would think she received all of Bob’s data when ­actuality she only
received a portion of it."
11007,The solution to this problem is to indicate in the type field whether the recordserves to terminate the SSL session.
11008,"(Although the SSL type is sent in the clear, it is authenticated atthe receiver using the record’s MAC.) By including such a field, if Alice were to receive a TCP FINbefore ­receiving a closure SSL record, she would know that something funny was going on."
11009,This completes our introduction to SSL.
11010,"We’ve seen that it uses many of the cryptography principles
discussed in Sections 8.2 and 8.3. Readers who want to explore SSL on yet a deeper level can read
Rescorla’s highly readable book on SSL [Rescorla 2001] .8.7 Network-Layer Security: IPsec and Virtual Private Networks
The IP security protocol, more commonly known as IPsec, provides security at the network layer."
11011,"IPsec
secures IP datagrams between any two network-layer entities, including hosts and routers."
11012,"As we will
soon describe, many institutions (corporations, government branches, non-profit organizations, and soon) use IPsec to create virtual private networks (VPNs) that run over the public Internet."
11013,"Before getting into the specifics of IPsec, let’s step back and consider what it means to provide
confidentiality at the network layer."
11014,"With network-layer confidentiality between a pair of network entities(for example, between two routers, between two hosts, or between a router and a host), the sendingentity encrypts the payloads of all the datagrams it sends to the receiving entity."
11015,"The encrypted payloadcould be a TCP segment, a UDP segment, an ICMP message, and so on."
11016,"If such a network-layerservice were in place, all data sent from one entity to the other—including e-mail, Web pages, TCPhandshake messages, and management messages (such as ICMP and SNMP)—would be hidden fromany third party that might be sniffing the network."
11017,"For this reason, network-layer security is said to
provide “blanket coverage.”
In addition to confidentiality, a network-layer security protocol could potentially provide other security
services."
11018,"For example, it could provide source authentication, so that the receiving entity can verify thesource of the secured datagram."
11019,"A network-layer security protocol could provide data integrity, so thatthe receiving entity can check for any tampering of the datagram that may have occurred while thedatagram was in transit."
11020,"A network-layer security service could also provide replay-attack prevention,meaning that Bob could detect any duplicate datagrams that an attacker might insert."
11021,"We will soon seethat IPsec indeed provides mechanisms for all these security services, that is, for confidentiality, source
authentication, data ­integrity, and replay-attack prevention."
11022,"8.7.1 IPsec and Virtual Private Networks (VPNs)
An institution that extends over multiple geographical regions often desires its own IP network, so that
its hosts and servers can send data to each other in a secure and confidential manner."
11023,"To achieve thisgoal, the institution could actually deploy a stand-alone physical network—including routers, links, and aDNS ­infrastructure—that is completely separate from the public Internet."
11024,"Such a disjoint network,dedicated to a particular institution, is called a private network."
11025,"Not surprisingly, a private network can
be very costly, as the institution needs to purchase, install, and maintain its own physical networkinfrastructure.Instead of deploying and maintaining a private network, many institutions today create VPNs over the
existing public Internet."
11026,"With a VPN, the institution’s inter-office traffic is sent over the public Internetrather than over a physically independent network."
11027,"But to provide confidentiality, the inter-office traffic is
encrypted before it enters the public Internet."
11028,A simple example of a VPN is shown in Figure 8.27.
11029,"Here
the institution consists of a headquarters, a branch office, and traveling salespersons that typically
access the Internet from their hotel rooms."
11030,"(There is only one salesperson shown in the figure.) In this
VPN, whenever two hosts within headquarters send IP datagrams to each other or whenever two hostswithin the branch office want to communicate, they use good-old vanilla IPv4 (that is, without IPsecservices)."
11031,"However, when two of the institution’s hosts
Figure 8.27 Virtual private network (VPN)
communicate over a path that traverses the public Internet, the traffic is encrypted before it enters the
Internet."
11032,"To get a feel for how a VPN works, let’s walk through a simple example in the context of Figure 8.27."
11033,"When a host in headquarters sends an IP datagram to a salesperson in a hotel, the gateway router in
headquarters converts the vanilla IPv4 datagram into an IPsec datagram and then forwards this IPsecdatagram into the Internet."
11034,"This IPsec datagram actually has a traditional IPv4 header, so that therouters in the public Internet process the datagram as if it were an ordinary IPv4 datagram—to them, the
datagram is a perfectly ordinary datagram."
11035,"But, as shown Figure 8.27, the payload of the IPsec
datagram includes an IPsec header, which is used for IPsec processing; furthermore, the payload of theIPsec datagram is encrypted."
11036,"When the IPsec datagram arrives at the salesperson’s laptop, the OS in
the laptop decrypts the payload (and provides other security services, such as verifying data integrity)
and passes the unencrypted payload to the upper-layer protocol (for example, to TCP or UDP)."
11037,We have just given a high-level overview of how an institution can employ IPsec to create a VPN.
11038,"To
see the forest through the trees, we have brushed aside many important details."
11039,"Let’s now take a closer
look."
11040,"8.7.2 The AH and ESP Protocols
IPsec is a rather complex animal—it is defined in more than a dozen RFCs. Two important RFCs are
RFC 4301, which describes the overall IP security architecture, and RFC 6071, which provides anoverview of the IPsec protocol suite."
11041,"Our goal in this textbook, as usual, is not simply to re-hash the dryand arcane RFCs, but instead take a more operational and pedagogic approach to describing theprotocols."
11042,"In the IPsec protocol suite, there are two principal protocols: the Authentication Header (AH) protocol
and the Encapsulation Security Payload (ESP)  protocol."
11043,"When a source IPsec entity (typically a host
or a router) sends secure datagrams to a destination entity (also a host or a router), it does so with
either the AH protocol or the ESP protocol."
11044,"The AH protocol provides source authentication and data
integrity but does not provide confidentiality."
11045,"The ESP protocol provides source authentication, data
integrity, and confidentiality."
11046,"Because confidentiality is often critical for VPNs and other IPsec
applications, the ESP protocol is much more widely used than the AH protocol."
11047,"In order to de-mystify
IPsec and avoid much of its complication, we will henceforth focus exclusively on the ESP protocol."
11048,Readers wanting to learn also about the AH protocol are encouraged to explore the RFCs and otheronline resources.
11049,"8.7.3 Security Associations
IPsec datagrams are sent between pairs of network entities, such as between two hosts, between tworouters, or between a host and router."
11050,"Before sending IPsec datagrams from source entity to destinationentity, the source and destination entities create a network-layer logical connection."
11051,This logicalconnection is called a security association (SA).
11052,"An SA is a simplex logical connection; that is, it is
unidirectional from source to destination."
11053,"If both entities want to send secure datagrams to each other,
then two SAs (that is, two logical connections) need to be established, one in each direction."
11054,"For example, consider once again the institutional VPN in Figure 8.27."
11055,"This institution consists of aheadquarters office, a branch office and, say, n traveling salespersons."
11056,"For the sake of example, let’s
suppose that there is bi-directional IPsec traffic between headquarters and the branch office and bi-
directional IPsec traffic between headquarters and the salespersons."
11057,"In this VPN, how many SAs arethere?"
11058,"To answer this question, note that there are two SAs between the headquarters gateway routerand the branch-office gateway router (one in each direction); for each salesperson’s laptop, there aretwo SAs between the headquarters gateway router and the laptop (again, one in each direction)."
11059,"So, in
total, there are  SAs. Keep in mind, however, that not all traffic sent into the Internet by the
gateway routers or by the laptops will be IPsec secured."
11060," For example, a host in headquarters may want
to access a Web server (such as Amazon or Google) in the public Internet."
11061,"Thus, the gateway router
(and the laptops) will emit into the Internet both vanilla IPv4 ­datagrams and secured IPsec datagrams."
11062,"Figure 8.28 Security association (SA) from R1 to R2
Let’s now take a look “inside” an SA."
11063,"To make the discussion tangible and ­concrete, let’s do this in the
context of an SA from router R1 to router R2 in Figure 8.28."
11064,"(You can think of Router R1 as the
headquarters gateway router and Router R2 as the branch office gateway router from Figure 8.27.)
Router R1 will maintain state information about this SA, which will include:
A 32-bit identifier for the SA, called the Security Parameter Index (SPI)
The origin interface of the SA (in this case 200.168.1.100) and the destination interface of the SA (in
this case 193.68.2.23)
The type of encryption to be used (for example, 3DES with CBC)
The encryption key
The type of integrity check (for example, HMAC with MD5)
The authentication key
Whenever router R1 needs to construct an IPsec datagram for forwarding over this SA, it accesses this
state information to determine how it should authenticate and encrypt the datagram."
11065,"Similarly, router R2
will maintain the same state information for this SA and will use this information to authenticate and
decrypt any IPsec datagram that arrives from the SA."
11066,"An IPsec entity (router or host) often maintains state information for many SAs. For example, in the VPN(2+2n)example in Figure 8.27 with n salespersons, the headquarters gateway router maintains state
information for  SAs. An IPsec entity stores the state information for all of its SAs in its Security
Association Database  (SAD), which is a data structure in the entity’s OS kernel."
11067,"8.7.4 The IPsec Datagram
Having now described SAs, we can now describe the actual IPsec datagram."
11068,"IPsec has two different
packet forms, one for the so-called tunnel mode  and the other for the so-called transport mode."
11069,"The
tunnel mode, being more appropriate for VPNs,
Figure 8.29 IPsec datagram format
is more widely deployed than the transport mode."
11070,"In order to further de-mystify IPsec and avoid much of
its complication, we henceforth focus exclusively on the tunnel mode."
11071,"Once you have a solid grip on the
tunnel mode, you should be able to easily learn about the transport mode on your own."
11072,The packet format of the IPsec datagram is shown in Figure 8.29.
11073,"You might think that packet formats
are boring and insipid, but we will soon see that the IPsec datagram actually looks and tastes like a
popular Tex-Mex delicacy! Let’s examine the IPsec fields in the context of Figure 8.28."
11074,"Suppose router
R1 receives an ordinary IPv4 datagram from host 172.16.1.17 (in the headquarters network) which is
destined to host 172.16.2.48 (in the branch-office network)."
11075,"Router R1 uses the ­following recipe to
convert this “original IPv4 datagram” into an IPsec datagram:
Appends to the back of the original IPv4 datagram (which includes the original header fields!) an
“ESP trailer” field
Encrypts the result using the algorithm and key specified by the SA
Appends to the front of this encrypted quantity a field called “ESP header”; the resulting package iscalled the “enchilada”
Creates an authentication MAC over the whole enchilada  using the algorithm and key specified in(2+2n)the SA
Appends the MAC to the back of the enchilada forming the payload
Finally, creates a brand new IP header with all the classic IPv4 header fields (together normally 20
bytes long), which it appends before the payload
Note that the resulting IPsec datagram is a bona fide IPv4 datagram, with the traditional IPv4 header
fields followed by a payload."
11076,"But in this case, the payload contains an ESP header, the original IP
datagram, an ESP trailer, and an ESP authentication field (with the original datagram and ESP trailerencrypted)."
11077,The original IP datagram has 172.16.1.17 for the source IP address and 172.16.2.48 for thedestination IP address.
11078,"Because the IPsec datagram includes the original IP datagram, these addressesare included (and encrypted) as part of the payload of the IPsec packet."
11079,"But what about the source anddestination IP addresses that are in the new IP header, that is, in the left-most header of the IPsecdatagram?"
11080,"As you might expect, they are set to the source and destination router interfaces at the twoends of the tunnels, namely, 200.168.1.100 and 193.68.2.23."
11081,"Also, the protocol number in this new IPv4header field is not set to that of TCP, UDP, or SMTP, but instead to 50, designating that this is an IPsec
datagram using the ESP protocol."
11082,"After R1 sends the IPsec datagram into the public Internet, it will pass through many routers before
reaching R2."
11083,Each of these routers will process the datagram as if it were an ordinary datagram—theyare completely oblivious to the fact that the datagram is carrying IPsec-encrypted data.
11084,"For these publicInternet routers, because the destination IP address in the outer header is R2, the ultimate destination ofthe datagram is R2."
11085,"Having walked through an example of how an IPsec datagram is constructed, let’s now take a closer
look at the ingredients in the enchilada."
11086,"We see in Figure 8.29 that the ESP trailer consists of three
fields: padding; pad length; and next header."
11087,"Recall that block ciphers require the message to be
encrypted to be an integer multiple of the block length."
11088,"Padding (consisting of meaningless bytes) isused so that when added to the original datagram (along with the pad length and next header fields), theresulting “message” is an integer number of blocks."
11089,The pad-length field indicates to the receiving entityhow much padding was inserted (and thus needs to be removed).
11090,"The next header identifies the type(e.g., UDP) of data contained in the payload-data field."
11091,The payload data (typically the original IPdatagram) and the ESP trailer are concatenated and then encrypted.
11092,"Appended to the front of this encrypted unit is the ESP header, which is sent in the clear and consists of
two fields: the SPI and the sequence number field."
11093,The SPI indicates to the receiving entity the SA towhich the datagram belongs; the receiving entity can then index its SAD with the SPI to determine theappropriate authentication/decryption algorithms and keys.
11094,The sequence number field is used todefend against replay attacks.
11095,The sending entity also appends an authentication MAC.
11096,"As stated earlier, the sending entity calculatesa MAC over the whole enchilada (consisting of the ESP header, the original IP datagram, and the ESP
trailer—with the datagram and trailer being encrypted)."
11097,"Recall that to calculate a MAC, the sender
appends a secret MAC key to the enchilada and then calculates a fixed-length hash of the result."
11098,"When R2 receives the IPsec datagram, R2 observes that the destination IP address of the datagram is
R2 itself."
11099,R2 therefore processes the datagram.
11100,"Because the protocol field (in the left-most IP header) is
50, R2 sees that it should apply IPsec ESP processing to the datagram."
11101,"First, peering into the
enchilada, R2 uses the SPI to determine to which SA the datagram belongs."
11102,"Second, it calculates theMAC of the enchilada and verifies that the MAC is consistent with the value in the ESP MAC field."
11103,"If it is,it knows that the enchilada comes from R1 and has not been tampered with."
11104,"Third, it checks thesequence-number field to verify that the datagram is fresh (and not a replayed datagram)."
11105,"Fourth, it
decrypts the encrypted unit using the decryption algorithm and key associated with the SA."
11106,"Fifth, itremoves padding and extracts the original, vanilla IP datagram."
11107,"And finally, sixth, it forwards the originaldatagram into the branch office network toward its ultimate destination."
11108,"Whew, what a complicated
recipe, huh?"
11109,"Well no one ever said that preparing and unraveling an enchilada was easy!
There is actually another important subtlety that needs to be addressed."
11110,"It centers on the following
question: When R1 receives an (unsecured) datagram from a host in the headquarters network, and thatdatagram is destined to some destination IP address outside of headquarters, how does R1 knowwhether it should be converted to an IPsec datagram?"
11111,"And if it is to be processed by IPsec, how doesR1 know which SA (of many SAs in its SAD) should be used to construct the IPsec datagram?"
11112,Theproblem is solved as follows.
11113,"Along with a SAD, the IPsec entity also maintains another data structurecalled the Security Policy Database (SPD)."
11114,"The SPD indicates what types of datagrams (as a function
of source IP address, destination IP address, and protocol type) are to be IPsec processed; and forthose that are to be IPsec processed, which SA should be used."
11115,"In a sense, the information in a SPDindicates “what” to do with an arriving datagram; the information in the SAD indicates “how” to do it."
11116,"Summary of IPsec Services
So what services does IPsec provide, exactly?"
11117,"Let us examine these services from the perspective of an
attacker, say Trudy, who is a woman-in-the-middle, sitting somewhere on the path between R1 and R2
in Figure 8.28."
11118,"Assume throughout this ­discussion that Trudy does not know the authentication and
encryption keys used by the SA."
11119,What can and cannot Trudy do?
11120,"First, Trudy cannot see the original
datagram."
11121,"If fact, not only is the data in the original datagram hidden from Trudy, but so is the protocolnumber, the source IP address, and the destination IP address."
11122,"For datagrams sent over the SA, Trudyonly knows that the datagram originated from some host in 172.16.1.0/24 and is destined to some hostin 172.16.2.0/24."
11123,"She does not know if it is carrying TCP, UDP, or ICMP data; she does not know if it iscarrying HTTP, SMTP, or some other type of application data."
11124,This confidentiality thus goes a lot fartherthan SSL.
11125,"Second, suppose Trudy tries to tamper with a datagram in the SA by flipping some of its bits.When this tampered datagram arrives at R2, it will fail the integrity check (using the MAC), thwartingTrudy’s vicious attempts once again."
11126,"Third, suppose Trudy tries to masquerade as R1, creating a IPsec
datagram with source 200.168.1.100 and destination 193.68.2.23."
11127,"Trudy’s attack will be futile, as this
datagram will again fail the integrity check at R2."
11128,"Finally, because IPsec includes sequence numbers,Trudy will not be able create a successful replay attack."
11129,"In summary, as claimed at the beginning of thissection, IPsec provides—between any pair of devices that process packets through the network layer—confidentiality, source authentication, data integrity, and replay-attack prevention."
11130,"8.7.5 IKE: Key Management in IPsec
When a VPN has a small number of end points (for example, just two routers as in Figure 8.28), the
network administrator can manually enter the SA information (encryption/authentication algorithms andkeys, and the SPIs) into the SADs of the endpoints."
11131,"Such “manual keying” is clearly impractical for alarge VPN, which may consist of hundreds or even thousands of IPsec routers and hosts."
11132,"Large,
geographically distributed deployments require an automated mechanism for creating the SAs. IPsec
does this with the Internet Key Exchange (IKE) protocol, specified in RFC 5996."
11133,IKE has some similarities with the handshake in SSL (see Section 8.6).
11134,"Each IPsec entity has a
certificate, which includes the entity’s public key."
11135,"As with SSL, the IKE protocol has the two entities
exchange certificates, negotiate authentication and encryption algorithms, and securely exchange keymaterial for creating session keys in the IPsec SAs. Unlike SSL, IKE employs two phases to carry outthese tasks."
11136,"Let’s investigate these two phases in the context of two routers, R1 and R2, in Figure 8.28."
11137,"The first
phase consists of two exchanges of message pairs between R1 and R2:
During the first exchange of messages, the two sides use Diffie-Hellman (see Homework Problems)
to create a bi-directional IKE SA between the routers."
11138,"To keep us all confused, this bi-directional IKE
SA is entirely different from the IPsec SAs discussed in Sections 8.6.3 and 8.6.4. The IKE SA
provides an authenticated and encrypted channel between the two routers."
11139,"During this first
message-pair exchange, keys are established for encryption and authentication for the IKE SA."
11140,"Also
established is a master secret that will be used to compute IPSec SA keys later in phase 2."
11141,"Observethat during this first step, RSA public and private keys are not used."
11142,"In particular, neither R1 nor R2reveals its identity by signing a message with its private key."
11143,"During the second exchange of messages, both sides reveal their identity to each other by signing
their messages."
11144,"However, the identities are not revealed to a passive sniffer, since the messages
are sent over the secured IKE SA channel."
11145,"Also during this phase, the two sides negotiate the IPsecencryption and authentication algorithms to be employed by the IPsec SAs.
In phase 2 of IKE, the two sides create an SA in each direction."
11146,"At the end of phase 2, the encryptionand authentication session keys are established on both sides for the two SAs. The two sides can then
use the SAs to send secured datagrams, as described in Sections 8.7.3 and 8.7.4. The primary
motivation for having two phases in IKE is computational cost—since the second phase doesn’t involve
any public-key cryptography, IKE can generate a large number of SAs between the two IPsec entitieswith relatively little computational cost.8.8 Securing Wireless LANs
Security is a particularly important concern in wireless networks, where radio waves carrying frames can
propagate far beyond the building containing the wireless base station and hosts."
11147,In this section wepresent a brief introduction to wireless security.
11148,"For a more in-depth treatment, see the highly readable
book by Edney and Arbaugh [Edney 2003]."
11149,"The issue of security in 802.11 has attracted considerable attention in both technical circles and in the
media."
11150,"While there has been considerable discussion, there has been little debate—there seems to beuniversal agreement that the original 802.11 specification contains a number of serious security flaws.Indeed, public domain software can now be downloaded that exploits these holes, making those whouse the vanilla 802.11 security mechanisms as open to security attacks as users who use no securityfeatures at all."
11151,"In the following section, we discuss the security mechanisms initially standardized in the 802.11
specification, known collectively as Wired Equivalent Privacy (WEP) ."
11152,"As the name suggests, WEP is
meant to provide a level of security similar to that found in wired networks."
11153,"We’ll then discuss a few of
the security holes in WEP and discuss the 802.11i standard, a fundamentally more secure version of802.11 adopted in 2004."
11154,"8.8.1 Wired Equivalent Privacy (WEP)
The IEEE 802.11 WEP protocol was designed in 1999 to provide authentication and data encryptionbetween a host and a wireless access point (that is, base station) using a symmetric shared keyapproach."
11155,"WEP does not specify a key management algorithm, so it is assumed that the host andwireless access point have somehow agreed on the key via an out-of-band method."
11156,"Authentication iscarried out as ­follows:
1."
11157,A wireless host requests authentication by an access point.
11158,2.
11159,The access point responds to the authentication request with a 128-byte nonce value.
11160,3.
11161,"The wireless host encrypts the nonce using the symmetric key that it shares with the access
point."
11162,4.
11163,The access point decrypts the host-encrypted nonce.
11164,"If the decrypted nonce matches the nonce value originally sent to the host, then the host isauthenticated by the access point."
11165,The WEP data encryption algorithm is illustrated in Figure 8.30.
11166,"A secret 40-bit symmetric key, K , is
assumed to be known by both a host and the access point."
11167,"In addition, a 24-bit Initialization Vector (IV)
is appended to the 40-bit key to create a 64-bit key that will be used to encrypt a single frame."
11168,"The IV
will
Figure 8.30 802.11 WEP protocol
change from one frame to another, and hence each frame will be encrypted with a different 64-bit key."
11169,Encryption is performed as follows.
11170,"First a 4-byte CRC value (see Section 6.2) is computed for the data
payload."
11171,The payload and the four CRC bytes are then encrypted using the RC4 stream cipher.
11172,We willnot cover the details of RC4 here (see [Schneier 1995]  and [Edney 2003] for details).
11173,"For our
purposes, it is enough to know that when presented with a key value (in this case, the 64-bit ( K, IV)
key), the RC4 algorithm produces a stream of key values,  that are used to encrypt the
data and CRC value in a frame."
11174,"For practical purposes, we can think of these operations beingperformed a byte at a time."
11175,"Encryption is performed by XOR-ing the ith byte of data, d, with the ith key,
, in the stream of key values generated by the ( K, IV) pair to produce the ith byte of ciphertext, c :
The IV value changes from one frame to the next and is included in plaintext  in the header of each
WEP-encrypted 802.11 frame, as shown in Figure 8.30."
11176,"The receiver takes the secret 40-bit symmetric
key that it shares with the sender, appends the IV, and uses the resulting 64-bit key (which is identical to
the key used by the sender to perform encryption) to decrypt the frame:
Proper use of the RC4 algorithm requires that the same 64-bit key value never be used more than once."
11177,Recall that the WEP key changes on a frame-by-frame basis.
11178,"For a given K (which changes rarely, if
ever), this means that there are only 2  unique keys."
11179,"If these keys are chosen randomly, we can showS
S
k1IV,k2IV,k3IV,…
i
kiIVS i
ci=di⊕kiIV
di=ci⊕kiIV
S
24[Edney 2003] that the probability of having chosen the same IV value (and hence used the same 64-bit
key) is more than 99 percent after only 12,000 frames."
11180,"With 1 Kbyte frame sizes and a data
transmission rate of 11 Mbps, only a few seconds are needed before 12,000 frames are transmitted."
11181,"Furthermore, since the IV is transmitted in plaintext in the frame, an eavesdropper will know whenever aduplicate IV value is used."
11182,"To see one of the several problems that occur when a duplicate key is used, consider the following
chosen-plaintext attack taken by Trudy against Alice."
11183,"Suppose that Trudy (possibly using IP spoofing)sends a request (for example, an HTTP or FTP request) to Alice to transmit a file with known content,
 Trudy also observes the encrypted data  Since , if we XOR
c with each side of this equality we have
With this relationship, Trudy can use the known values of d and c  to compute ."
11184,"The next time Trudy
sees the same value of IV being used, she will know the key sequence  and will thus
be able to decrypt the encrypted message."
11185,There are several additional security concerns with WEP as well.
11186,"[Fluhrer 2001] described an attack
exploiting a known weakness in RC4 when certain weak keys are chosen."
11187,"[Stubblefield 2002]
discusses efficient ways to implement and exploit this attack."
11188,"Another concern with WEP involves the
CRC bits shown in Figure 8.30 and transmitted in the 802.11 frame to detect altered bits in the payload."
11189,"However, an attacker who changes the encrypted content (e.g., substituting gibberish for the original
encrypted data), computes a CRC over the substituted gibberish, and places the CRC into a WEP framecan produce an 802.11 frame that will be accepted by the receiver."
11190,"What is needed here are message
integrity techniques such as those we studied in Section 8.3 to detect content tampering or substitution."
11191,"For more details of WEP security, see [Edney 2003; Wright 2015] and the ­references therein."
11192,"8.8.2 IEEE 802.11i
Soon after the 1999 release of IEEE 802.11, work began on developing a new and improved version of
802.11 with stronger security mechanisms."
11193,"The new standard, known as 802.11i, underwent finalratification in 2004."
11194,"As we’ll see, while WEP provided relatively weak encryption, only a single way toperform authentication, and no key distribution mechanisms, IEEE 802.11i provides for much strongerforms of encryption, an extensible set of authentication mechanisms, and a key distribution mechanism."
11195,"In the following, we present an overview of 802.11i; an excellent (streaming audio) technical overview of
802.11i is [TechOnline 2012]."
11196,Figure 8.31 overviews the 802.11i framework.
11197,"In addition to the wireless client and access point,d1, d2, d3, d4,…."
11198,"c1, c2, c3, c4,…."
11199,"di=ci⊕kiIV
i
di⊕ci=kiIV
i i kiIV
k1IV,k2IV,k3IV,…802.11i defines an authentication server with which the AP can communicate."
11200,"Separating the
authentication server from the AP allows one authentication server to serve many APs, centralizing the
(often sensitive) decisions
Figure 8.31 802.11i: Four phases of operation
regarding authentication and access within the single server, and keeping AP costs and complexity low."
11201,"802.11i operates in four phases:
1."
11202,Discovery.
11203," In the discovery phase, the AP advertises its presence and the forms of
authentication and encryption that can be provided to the wireless client node."
11204,"The client then
requests the specific forms of authentication and encryption that it desires."
11205,"Although the clientand AP are already exchanging messages, the client has not yet been authenticated nor does it
have an encryption key, and so several more steps will be required before the client can
communicate with an arbitrary remote host over the wireless channel."
11206,2.
11207,Mutual authentication and Master Key (MK) generation.
11208," Authentication takes place between
the wireless client and the authentication server."
11209,"In this phase, the access point acts essentiallyas a relay, forwarding messages between the client and the authentication server."
11210,"TheExtensible Authentication Protocol (EAP)  [RFC 3748]  defines the end-to-end message
formats used in a simple request/response mode of interaction between the client and
authentication server."
11211,"As shown in Figure 8.32, EAP messages are encapsulated using EAPoL
(EAP over LAN, [IEEE 802.1X]) and sent over the 802.11 wireless link."
11212,"These EAP messagesare then decapsulated at the access point, and then re-encapsulated using the RADIUS protocol
for transmission over UDP/IP to the authentication server."
11213,"While
Figure 8.32 EAP is an end-to-end protocol."
11214,"EAP messages are encapsulated using EAPoL
over the wireless link between the ­client and the access point, and using RADIUS over
UDP/IP between the access point and the authentication server
the RADIUS server and protocol [RFC 2865]  are not required by the 802.11i protocol, they are
de facto standard components for 802.11i."
11215,"The recently standardized DIAMETER  protocol [RFC
3588]  is likely to replace RADIUS in the near future."
11216,"With EAP, the authentication server can choose one of a number of ways to perform
authentication."
11217,"While 802.11i does not mandate a particular authentication method, the EAP-
TLS authentication scheme [RFC 5216]  is often used."
11218,"EAP-TLS uses public key techniques
(including nonce encryption and message digests) similar to those we studied in Section 8.3 to
allow the client and the authentication server to mutually authenticate each other, and to derive a
Master Key (MK) that is known to both parties."
11219,3.
11220,Pairwise Master Key (PMK) generation.
11221,"The MK is a shared secret known only to the client
and the authentication server, which they each use to generate a second key, the Pairwise
Master Key (PMK)."
11222,The authentication server then sends the PMK to the AP.
11223,"This is where wewanted to be! The client and AP now have a shared key (recall that in WEP, the problem of key
distribution was not addressed at all) and have mutually authenticated each other."
11224,"They’re just
about ready to get down to business."
11225,4.
11226,Temporal Key (TK) generation.
11227,"With the PMK, the wireless client and AP can now generate
additional keys that will be used for communication."
11228,"Of ­particular interest is the Temporal Key
(TK), which will be used to perform the link-level encryption of data sent over the wireless link
and to an arbitrary remote host."
11229,"802.11i provides several forms of encryption, including an AES-based encryption scheme and astrengthened version of WEP encryption.8.9 Operational Security: Firewalls and Intrusion Detection
Systems
We’ve seen throughout this chapter that the Internet is not a very safe place—bad guys are out there,
wreaking all sorts of havoc."
11230,"Given the hostile nature of the Internet, let’s now consider an organization’snetwork and the network administrator who administers it."
11231,"From a network administrator’s point of view,the world divides quite neatly into two camps—the good guys (who belong to the organization’s network,and who should be able to access resources inside the organization’s network in a relatively
unconstrained manner) and the bad guys (everyone else, whose access to network resources must be
carefully scrutinized)."
11232,"In many organizations, ranging from medieval castles to modern corporate officebuildings, there is a single point of entry/exit where both good guys and bad guys entering and leavingthe organization are security-checked."
11233,"In a castle, this was done at a gate at one end of the drawbridge;in a corporate building, this is done at the security desk."
11234,"In a computer network, when trafficentering/leaving a network is security-checked, logged, dropped, or forwarded, it is done by operationaldevices known as firewalls, intrusion detection systems (IDSs), and intrusion prevention systems (IPSs)."
11235,"8.9.1 Firewalls
A firewall is a combination of hardware and software that isolates an organization’s internal networkfrom the Internet at large, allowing some packets to pass and blocking others."
11236,A firewall allows anetwork administrator to control access between the outside world and resources within theadministered network by managing the traffic flow to and from these resources.
11237,"A firewall has threegoals:
All traffic from outside to inside, and vice versa, passes through the firewall."
11238," Figure 8.33
shows a firewall, sitting squarely at the boundary between the administered network and the rest ofthe Internet."
11239,"While large organizations may use multiple levels of firewalls or distributed firewalls
[Skoudis 2006], locating a firewall at a single access point to the network, as shown in Figure 8.33,
makes it easier to manage and enforce a security-access policy."
11240,"Only authorized traffic, as defined by the local security policy, will be allowed to pass."
11241," With all
traffic entering and leaving the institutional network passing through the firewall, the firewall can
restrict access to authorized traffic."
11242,The firewall itself is immune to penetration.
11243," The firewall itself is a device connected to the
network."
11244,"If not designed or installed properly, it can be compromised, in which case it provides onlya false sense of security (which is worse than no firewall at all!)."
11245,"Figure 8.33 Firewall placement between the administered network and the outside world
Cisco and Check Point are two of the leading firewall vendors today."
11246,"You can also easily create a
firewall (packet filter) from a Linux box using iptables (public-domain software that is normally shipped
with Linux)."
11247,"Furthermore, as discussed in Chapters 4 and 5, firewalls are now frequently implemented
in routers and controlled remotely using SDNs.
Firewalls can be classified in three categories: traditional packet filters, stateful filters, and
application gateways."
11248,We’ll cover each of these in turn in the following subsections.
11249,"Traditional Packet FiltersAs shown in Figure 8.33, an organization typically has a gateway router connecting its internal network
to its ISP (and hence to the larger public Internet)."
11250,"All traffic leaving and entering the internal network
passes through this router, and it is at this router where packet filtering occurs."
11251,"A packet filter
examines each datagram in isolation, determining whether the datagram should be allowed to pass orshould be dropped based on administrator-specific rules."
11252,"Filtering decisions are typically based on:
IP source or destination address
Protocol type in IP datagram field: TCP, UDP, ICMP, OSPF, and so on
TCP or UDP source and destination portTable 8.5 Policies and corresponding filtering rules for an organization’s network 130.207/16
with Web server at 130.207.244.203
Policy Firewall Setting
No outside Web access."
11253,"Drop all outgoing packets to any IP address,
port 80."
11254,"No incoming TCP connections, except those fororganization’s public Web server only.Drop all incoming TCP SYN packets to anyIP except 130.207.244.203, port 80."
11255,Prevent Web-radios from eating up theavailable bandwidth.Drop all incoming UDP packets—except DNSpackets.
11256,Prevent your network from being used for asmurf DoS attack.Drop all ICMP ping packets going to a“broadcast” address (eg 130.207.255.255).
11257,Prevent your network from being tracerouted.
11258,Drop all outgoing ICMP TTL expired traffic.
11259,"TCP flag bits: SYN, ACK, and so on
ICMP message type
Different rules for datagrams leaving and entering the network
Different rules for the different router interfaces
A network administrator configures the firewall based on the policy of the organization."
11260,"The policy maytake user productivity and bandwidth usage into account as well as the security concerns of an
organization."
11261,"Table 8.5 lists a number of possible polices an organization may have, and how they
would be addressed with a packet filter."
11262,"For example, if the organization doesn’t want any incoming TCP
connections except those for its public Web server, it can block all incoming TCP SYN segments exceptTCP SYN segments with destination port 80 and the destination IP address corresponding to the Webserver."
11263,"If the organization doesn’t want its users to monopolize access bandwidth with Internet radioapplications, it can block all not-critical UDP traffic (since Internet radio is often sent over UDP)."
11264,"If theorganization doesn’t want its internal network to be mapped (tracerouted) by an outsider, it can block allICMP TTL expired messages leaving the organization’s network."
11265,A filtering policy can be based on a combination of addresses and port numbers.
11266,"For example, a filtering
router could forward all Telnet datagrams (those with a port number of 23) except those going to andcoming from a list of specific IP addresses."
11267,This policy permits Telnet connections to and from hosts onthe allowed list.
11268,"Unfortunately, basing the policy on external addresses provides no protection againstdatagrams that have had their source addresses spoofed."
11269,Filtering can also be based on whether or not the TCP ACK bit is set.
11270,"This trick is quite useful if an
organization wants to let its internal clients connect to external servers but wants to prevent externalclients from connecting to internal servers."
11271,"Table 8.6 An access control list for a router interface
action source address dest address protocol source
portdestportflagbit
allow 222.22/16 outside of222.22/16TCP > 1023 80 any
allow outside of222.22/16222.22/16 TCP 80 > 1023 ACK
allow 222.22/16 outside of222.22/16UDP > 1023 53 —
allow outside of222.22/16222.22/16 UDP 53 > 1023 —
deny all all all all all all
Recall from Section 3.5 that the first segment in every TCP connection has the ACK bit set to 0,whereas all the other segments in the connection have the ACK bit set to 1."
11272,"Thus, if an organizationwants to prevent external clients from initiating connections to internal servers, it simply filters allincoming segments with the ACK bit set to 0."
11273,"This policy kills all TCP connections originating from the
outside, but permits connections originating internally."
11274,"Firewall rules are implemented in routers with access control lists, with each router interface having its
own list."
11275,"An example of an access control list for an organization 222.22/16 is shown in Table 8.6. This
access control list is for an interface that connects the router to the organization’s external ISPs. Rules
are applied to each datagram that passes through the interface from top to bottom."
11276,"The first two rulestogether allow internal users to surf the Web: The first rule allows any TCP packet with destination port80 to leave the organization’s network; the second rule allows any TCP packet with source port 80 and
the ACK bit set to enter the organization’s network."
11277,"Note that if an external source attempts to establish
a TCP connection with an internal host, the connection will be blocked, even if the source or destinationport is 80."
11278,The second two rules together allow DNS packets to enter and leave the organization’snetwork.
11279,"In summary, this rather restrictive access control list blocks all traffic except Web traffic initiated
from within the organization and DNS traffic."
11280,"[CERT Filtering 2012] provides a list of recommended
port/protocol packet filterings to avoid a number of well-known security holes in existing network
applications."
11281,"Stateful Packet Filters
In a traditional packet filter, filtering decisions are made on each packet in isolation."
11282,"Stateful filters
actually track TCP connections, and use this knowledge to make ­filtering decisions."
11283,"Table 8.7 Connection table for stateful filter
source address dest address source port dest port
222.22.1.7 37.96.87.123 12699 80
222.22.93.2 199.1.205.23 37654 80
222.22.65.143 203.77.240.43 48712 80
To understand stateful filters, let’s reexamine the access control list in Table 8.6. Although rather
restrictive, the access control list in Table 8.6 nevertheless allows any packet arriving from the outside
with ACK = 1 and source port 80 to get through the filter."
11284,"Such packets could be used by attackers in
attempts to crash internal systems with malformed packets, carry out denial-of-service attacks, or mapthe internal network."
11285,"The naive solution is to block TCP ACK packets as well, but such an approachwould prevent the organization’s internal users from surfing the Web."
11286,Stateful filters solve this problem by tracking all ongoing TCP connections in a connection table.
11287,"This is
possible because the firewall can observe the beginning of a new connection by observing a three-way
handshake (SYN, SYNACK, and ACK); and it can observe the end of a connection when it sees a FIN
packet for the connection."
11288,"The firewall can also (conservatively) assume that the connection is overwhen it hasn’t seen any activity over the connection for, say, 60 seconds."
11289,"An example connection table
for a firewall is shown in Table 8.7. This connection table indicates that there are currently three ongoing
TCP connections, all of which have been initiated from within the organization."
11290,"Additionally, the statefulfilter includes a new column, “check connection,” in its access control list, as shown in Table 8.8. Note
that Table 8.8 is identical to the access control list in Table 8.6, except now it indicates that the
connection should be checked for two of the rules."
11291,Let’s walk through some examples to see how the connection table and the extended access control listwork hand-in-hand.
11292,"Suppose an attacker attempts to send a malformed packet into the organization’s
network by sending a datagram with TCP source port 80 and with the ACK flag set."
11293,"Further suppose
that this packet has source port number 12543 and source IP address 150.23.23.155."
11294,"When this packet
reaches the firewall, the firewall checks the access control list in Table 8.7, which indicates that the
connection table must also be checked before permitting this packet to enter the organization’s network."
11295,"The firewall duly checks the connection table, sees that this packet is not part of an ongoing TCP
connection, and rejects the packet."
11296,"As a second example, suppose that an internal user wants to surf an
external Web site."
11297,"Because this user first sends a TCP SYN segment, the user’s TCP connection getsrecorded in the connection table."
11298,"When
Table 8.8 Access control list for stateful filter
action source address dest address protocol source
portdestportflagbitcheckconxion
allow 222.22/16 outside of222.22/16TCP > 1023 80 any
allow outside of222.22/16222.22/16 TCP 80 >1023ACK X
allow 222.22/16 outside of222.22/16UDP > 1023 53 —
allow outside of222.22/16222.22/16 UDP 53 >1023— X
deny all all all all all all
the Web server sends back packets (with the ACK bit necessarily set), the firewall checks the table andsees that a corresponding connection is in progress."
11299,"The firewall will thus let these packets pass,thereby not interfering with the internal user’s Web surfing activity."
11300,"Application Gateway
In the examples above, we have seen that packet-level filtering allows an organization to perform
coarse-grain filtering on the basis of the contents of IP and TCP/UDP headers, including IP addresses,
port numbers, and acknowledgment bits."
11301,"But what if an organization wants to provide a Telnet service to
a restricted set of internal users (as opposed to IP addresses)?"
11302,And what if the organization wants suchprivileged users to authenticate themselves first before being allowed to create Telnet sessions to theoutside world?
11303,Such tasks are beyond the capabilities of traditional and stateful filters.
11304,"Indeed,
information about the identity of the internal users is application-layer data and is not included in the
IP/TCP/UDP headers."
11305,"To have finer-level security, firewalls must combine packet filters with application gateways."
11306,"Application
gateways look beyond the IP/TCP/UDP headers and make policy decisions based on application data."
11307,"An application gateway  is an application-specific server through which all application data (inbound
and outbound) must pass."
11308,"Multiple application gateways can run on the same host, but each gateway is
a separate server with its own processes."
11309,"To get some insight into application gateways, let’s design a firewall that allows only a restricted set of
internal users to Telnet outside and prevents all external clients from Telneting inside."
11310,"Such a policy canbe accomplished by implementing
Figure 8.34 Firewall consisting of an application gateway and a filter
a combination of a packet filter (in a router) and a Telnet application gateway, as shown in Figure 8.34."
11311,The router’s filter is configured to block all Telnet connections except those that originate from the IPaddress of the application gateway.
11312,Such a filter configuration forces all outbound Telnet connections topass through the application gateway.
11313,Consider now an internal user who wants to Telnet to the outsideworld.
11314,The user must first set up a Telnet session with the application gateway.
11315,"An application running inthe gateway, which listens for incoming Telnet sessions, prompts the user for a user ID and password.When the user supplies this information, the application gateway checks to see if the user haspermission to Telnet to the outside world."
11316,"If not, the Telnet connection from the internal user to the
gateway is terminated by the gateway."
11317,"If the user has permission, then the gateway (1) prompts theuser for the host name of the external host to which the user wants to connect, (2) sets up a Telnetsession between the gateway and the external host, and (3) relays to the external host all data arrivingfrom the user, and relays to the user all data arriving from the external host."
11318,"Thus, the Telnet application
gateway not only performs user authorization but also acts as a Telnet server and a Telnet client,
relaying information between the user and the remote Telnet server."
11319,Note that the filter will permit step 2because the gateway initiates the Telnet connection to the outside world.
11320,"CASE HISTORY
ANONYMITY AND PRIVACY
Suppose you want to visit a controversial Web site (for example, a political activist site) and you
(1) don’t want to reveal your IP address to the Web site, (2) don’t want your local ISP (whichmay be your home or office ISP) to know that you are visiting the site, and (3) don’t want your
local ISP to see the data you are exchanging with the site."
11321,"If you use the traditional approach of
connecting directly to the Web site without any encryption, you fail on all three counts."
11322,"Even ifyou use SSL, you fail on the first two counts: Your source IP address is presented to the Website in every datagram you send; and the destination address of every packet you send caneasily be sniffed by your local ISP."
11323,"To obtain privacy and anonymity, you can instead use a combination of a trusted proxy server
and SSL, as shown in Figure 8.35."
11324,"With this approach, you first make an SSL connection to the
trusted proxy."
11325,"You then send, into this SSL connection, an HTTP request for a page at the
desired site."
11326,"When the proxy receives the SSL-encrypted HTTP request, it decrypts the request
and forwards the cleartext HTTP request to the Web site."
11327,"The Web site then responds to theproxy, which in turn forwards the response to you over SSL."
11328,"Because the Web site only sees theIP address of the proxy, and not of your client’s address, you are indeed obtaining anonymousaccess to the Web site."
11329,"And because all traffic between you and the proxy is encrypted, yourlocal ISP cannot invade your privacy by logging the site you visited or recording the data you are
exchanging."
11330,Many companies today (such as proxify .com) make available such proxy services.
11331,"Of course, in this solution, your proxy knows everything: It knows your IP address and the IP
address of the site you’re surfing; and it can see all the traffic in ­cleartext exchanged between
you and the Web site."
11332,"Such a solution, therefore, is only as good as the trustworthiness of the
proxy."
11333,"A more robust approach, taken by the TOR anonymizing and privacy service, is to route
your traffic through a series of non- ­colluding proxy servers [TOR 2016]."
11334,"In particular, TOR
allows independent ­individuals to contribute proxies to its proxy pool."
11335,"When a user connects to
a server using TOR, TOR randomly chooses (from its proxy pool) a chain of three proxies and
routes all traffic between client and server over the chain."
11336,"In this manner, assuming the proxiesdo not collude, no one knows that communication took place between your IP address and thetarget Web site."
11337,"Furthermore, although cleartext is sent between the last proxy and the server,
the last proxy doesn’t know what IP address is sending and receiving the cleartext."
11338,"Figure 8.35 Providing anonymity and privacy with a proxy
Internal networks often have multiple application gateways, for example, gateways for Telnet, HTTP,
FTP, and e-mail."
11339,"In fact, an organization’s mail server (see Section 2.3) and Web cache are application
gateways."
11340,Application gateways do not come without their disadvantages.
11341,"First, a different application gateway is
needed for each application."
11342,"Second, there is a performance penalty to be paid, since all data will berelayed via the gateway."
11343,This becomes a concern particularly when multiple users or applications areusing the same gateway machine.
11344,"Finally, the client software must know how to contact the gatewaywhen the user makes a request, and must know how to tell the application gateway what external serverto connect to."
11345,"8.9.2 Intrusion Detection Systems
We’ve just seen that a packet filter (traditional and stateful) inspects IP, TCP, UDP, and ICMP headerfields when deciding which packets to let pass through the firewall."
11346,"However, to detect many attacktypes, we need to perform deep packet inspection, that is, look beyond the header fields and into the
actual application data that the packets carry."
11347,"As we saw in Section 8.9.1, application gateways often
do deep packet inspection."
11348,But an application gateway only does this for a specific application.
11349,"Clearly, there is a niche for yet another device—a device that not only examines the headers of all
packets passing through it (like a packet filter), but also performs deep packet inspection (unlike apacket filter)."
11350,"When such a device observes a suspicious packet, or a suspicious series of packets, itcould prevent those packets from entering the organizational network."
11351,"Or, because the activity is onlydeemed as suspicious, the device could let the packets pass, but send alerts to a network administrator,
who can then take a closer look at the traffic and take appropriate actions."
11352,"A device that generates
alerts when it observes potentially malicious traffic is called an intrusion detection system (IDS) ."
11353,"A
device that filters out suspicious traffic is called an intrusion prevention system (IPS) ."
11354,"In this section
we study both systems—IDS and IPS—together, since the most interesting technical aspect of thesesystems is how they detect suspicious traffic (and not whether they send alerts or drop packets)."
11355,"We will
henceforth collectively refer to IDS systems and IPS systems as IDS systems."
11356,"An IDS can be used to detect a wide range of attacks, including network mapping (emanating, for
example, from nmap), port scans, TCP stack scans, DoS bandwidth-flooding attacks, worms and
viruses, OS vulnerability attacks, and application vulnerability attacks."
11357,"(See Section 1.6 for a survey of
network attacks.) Today, thousands of organizations employ IDS systems."
11358,"Many of these deployed
systems are proprietary, marketed by Cisco, Check Point, and other security equipment vendors."
11359,"Butmany of the deployed IDS systems are public-domain systems, such as the immensely popular Snort
IDS system (which we’ll discuss shortly)."
11360,An organization may deploy one or more IDS sensors in its organizational network.
11361,"Figure 8.36 shows
an organization that has three IDS sensors."
11362,"When multiple sensors are deployed, they typically work in
concert, sending information about
Figure 8.36 An organization deploying a filter, an application gateway, and IDS sensors
suspicious traffic activity to a central IDS processor, which collects and integrates the information and
sends alarms to network administrators when deemed appropriate."
11363,"In Figure 8.36, the organization has
partitioned its network into two regions: a high-security region, protected by a packet filter and an
application gateway and monitored by IDS sensors; and a lower-security region—referred to as thedemilitarized zone (DMZ) —which is protected only by the packet filter, but also monitored by IDS
sensors."
11364,"Note that the DMZ includes the organization’s servers that need to communicate with theoutside world, such as its public Web server and its authoritative DNS server."
11365,"You may be wondering at this stage, why multiple IDS sensors?"
11366,"Why not just place one IDS sensor just
behind the packet filter (or even integrated with the packet filter) in Figure 8.36?"
11367,"We will soon see that
an IDS not only needs to do deep packet inspection, but must also compare each passing packet with
tens of thousands of “signatures”; this can be a significant amount of processing, particularly if theorganization receives gigabits/sec of traffic from the Internet."
11368,"By placing the IDS sensors further
downstream, each sensor sees only a fraction of the organization’s traffic, and can more easily keep up."
11369,"Nevertheless, high-performance IDS and IPS systems are available today, and many organizations canactually get by with just one sensor located near its access router."
11370,IDS systems are broadly classified as either signature-based systems  or ­anomaly-based systems .
11371,A signature-based IDS maintains an extensive database of attack signatures.
11372,"Each signature is a set of
rules pertaining to an intrusion activity."
11373,"A signature may simply be a list of characteristics about a singlepacket (e.g., source and destination port numbers, protocol type, and a specific string of bits in thepacket payload), or may relate to a series of packets."
11374,"The signatures are normally created by skilled
network security engineers who research known attacks."
11375,"An organization’s network administrator can
customize the signatures or add its own to the database."
11376,"Operationally, a signature-based IDS sniffs every packet passing by it, comparing each sniffed packet
with the signatures in its database."
11377,"If a packet (or series of packets) matches a signature in thedatabase, the IDS generates an alert."
11378,"The alert could be sent to the network administrator in an e-mailmessage, could be sent to the network management system, or could simply be logged for futureinspection."
11379,"Signature-based IDS systems, although widely deployed, have a number of limitations."
11380,"Most
importantly, they require previous knowledge of the attack to generate an accurate signature."
11381,"In otherwords, a signature-based IDS is completely blind to new attacks that have yet to be recorded."
11382,"Anotherdisadvantage is that even if a signature is matched, it may not be the result of an attack, so that a falsealarm is generated."
11383,"Finally, because every packet must be compared with an extensive collection ofsignatures, the IDS can become overwhelmed with processing and actually fail to detect many maliciouspackets."
11384,An anomaly-based IDS creates a traffic profile as it observes traffic in normal operation.
11385,"It then looks for
packet streams that are statistically unusual, for example, an inordinate percentage of ICMP packets ora sudden exponential growth in port scans and ping sweeps."
11386,"The great thing about anomaly-based IDS
systems is that they don’t rely on previous knowledge about existing attacks—that is, they canpotentially detect new, undocumented attacks."
11387,"On the other hand, it is an extremely challenging problem
to distinguish between normal traffic and statistically unusual traffic."
11388,"To date, most IDS deployments are
primarily signature-based, although some include some anomaly-based features."
11389,"SnortSnort is a public-domain, open source IDS with hundreds of thousands of existing deployments [Snort
2012 ; Koziol 2003]."
11390,"It can run on Linux, UNIX, and Windows platforms."
11391,"It uses the generic sniffing
interface libpcap, which is also used by Wireshark and many other packet sniffers."
11392,"It can easily handle
100 Mbps of traffic; for installations with gibabit/sec traffic rates, multiple Snort sensors may be needed."
11393,"To gain some insight into Snort, let’s take a look at an example of a Snort signature:
alert icmp $EXTERNAL_NET any -> $HOME_NET any
(msg:”ICMP PING NMAP”; dsize: 0; itype: 8;)
This signature is matched by any ICMP packet that enters the organization’s network ( $HOME_NET )
from the outside ( $EXTERNAL_NET ), is of type 8 (ICMP ping), and has an empty payload (dsize = 0)."
11394,"Since nmap (see Section 1.6) generates ping packets with these specific characteristics, this signature
is designed to detect nmap ping sweeps."
11395,"When a packet matches this signature, Snort generates an
alert that includes the message “ICMP PING NMAP” ."
11396,"Perhaps what is most impressive about Snort is the vast community of users and security experts that
maintain its signature database."
11397,"Typically within a few hours of a new attack, the Snort communitywrites and releases an attack signature, which is then downloaded by the hundreds of thousands ofSnort deployments distributed around the world."
11398,"Moreover, using the Snort signature syntax, networkadministrators can tailor the signatures to their own organization’s needs by either modifying existingsignatures or creating entirely new ones.8.10 Summary
In this chapter, we’ve examined the various mechanisms that our secret lovers, Bob and Alice, can use
to communicate securely."
11399,"We’ve seen that Bob and Alice are interested in confidentiality (so they aloneare able to understand the contents of a transmitted message), end-point authentication (so they aresure that they are talking with each other), and message integrity (so they are sure that their messagesare not altered in transit)."
11400,"Of course, the need for secure communication is not confined to secret lovers."
11401,"Indeed, we saw in Sections 8.5 through 8.8 that security can be used in various layers in a network
architecture to protect against bad guys who have a large arsenal of possible attacks at hand."
11402,The first part of this chapter presented various principles underlying secure communication.
11403,"In Section
8.2, we covered cryptographic techniques for encrypting and decrypting data, including symmetric key
cryptography and public key cryptography."
11404,"DES and RSA were examined as specific case studies of
these two major classes of cryptographic techniques in use in today’s networks."
11405,"In Section 8.3, we examined two approaches for providing message integrity: message authentication
codes (MACs) and digital signatures."
11406,The two approaches have a number of parallels.
11407,"Both use
cryptographic hash functions and both techniques enable us to verify the source of the message as wellas the integrity of the message itself."
11408,One important difference is that MACs do not rely on encryptionwhereas digital signatures require a public key infrastructure.
11409,"Both techniques are extensively used in
practice, as we saw in Sections 8.5 through 8.8. Furthermore, digital signatures are used to create
digital certificates, which are important for verifying the validity of public keys."
11410,"In Section 8.4, we
examined endpoint authentication and introduced nonces to defend against the replay attack."
11411,"In Sections 8.5 through 8.8 we examined several security networking protocols that enjoy extensive use
in practice."
11412,"We saw that symmetric key cryptography is at the core of PGP, SSL, IPsec, and wireless
security."
11413,We saw that public key cryptography is crucial for both PGP and SSL.
11414,"We saw that PGP usesdigital signatures for message integrity, whereas SSL and IPsec use MACs. Having now anunderstanding of the basic principles of cryptography, and having studied how these principles areactually used, you are now in position to design your own secure network protocols!
Armed with the techniques covered in Sections 8.2 through 8.8, Bob and Alice can communicate
securely."
11415,"(One can only hope that they are networking students who have learned this material and can
thus avoid having their tryst uncovered by Trudy!) But confidentiality is only a small part of the network
security picture."
11416,"As we learned in Section 8.9, increasingly, the focus in network security has been on
securing the network infrastructure against a potential onslaught by the bad guys."
11417,"In the latter part of
this chapter, we thus covered firewalls and IDS systems which inspect packets entering and leaving anorganization’s network."
11418,"This chapter has covered a lot of ground, while focusing on the most important topics in modern network
security."
11419,"Readers who desire to dig deeper are encouraged to investigate the references cited in this
chapter."
11420,"In particular, we recommend [Skoudis 2006] for attacks and operational security, [Kaufman
1995]  for cryptography and how it applies to network security, [Rescorla 2001]  for an in-depth but
readable treatment of SSL, and [Edney 2003] for a thorough discussion of 802.11 security, including an
insightful investigation into WEP and its flaws.Homework Problems and Questions
Chapter 8 Review Problems
SECTION 8.1
SECTION 8.2
SECTIONS 8.3–8.4R1."
11421,What are the differences between message confidentiality and message integrity?
11422,"Can you
have confidentiality without integrity?"
11423,Can you have integrity without confidentiality?
11424,"Justify your
answer."
11425,R2.
11426,"Internet entities (routers, switches, DNS servers, Web servers, user end systems, and so
on) often need to communicate securely."
11427,"Give three specific example pairs of Internet entities
that may want secure communication."
11428,R3.
11429,"From a service perspective, what is an important difference between a symmetric-key
system and a public-key system?"
11430,R4.
11431,"Suppose that an intruder has an encrypted message as well as the decrypted version of that
message."
11432,"Can the intruder mount a ciphertext-only attack, a known-plaintext attack, or a chosen-
plaintext attack?"
11433,R5.
11434,Consider an 8-block cipher.
11435,How many possible input blocks does this cipher have?
11436,"How
many possible mappings are there?"
11437,"If we view each mapping as a key, then how many possible
keys does this cipher have?"
11438,R6.
11439,"Suppose N people want to communicate with each of  other people using symmetric key
encryption."
11440,"All communication between any two people, i and j, is visible to all other people in
this group of N, and no other person in this group should be able to decode their communication."
11441,How many keys are required in the system as a whole?
11442,"Now suppose that public key encryption
is used."
11443,How many keys are required in this case?
11444,R7.
11445,"Suppose  , and  Use an identity of modular arithmetic to
calculate in your head ."
11446,R8.
11447,"Suppose you want to encrypt the message 10101111 by encrypting the decimal number that
corresponds to the message."
11448,"What is the decimal number?N−1
n=10,000, a=10,023 b=10,004."
11449,(a⋅b)mod nSECTIONS 8.5–8.8R9.
11450,"In what way does a hash provide a better message integrity check than a checksum (such
as the Internet checksum)?"
11451,R10.
11452,Can you “decrypt” a hash of a message to get the original message?
11453,Explain your answer.
11454,R11.
11455,"Consider a variation of the MAC algorithm ( Figure 8.9 ) where the sender sends
 where  is the concatenation of H(m) and s."
11456,Is this variation flawed?
11457,"Why or
why not?"
11458,R12.
11459,What does it mean for a signed document to be verifiable and nonforgeable?
11460,R13.
11461,"In what way does the public-key encrypted message hash provide a better digital signature
than the public-key encrypted message?"
11462,R14.
11463,Suppose certifier.com creates a certificate for foo.com.
11464,"Typically, the entire certificate
would be encrypted with certifier.com’s public key."
11465,True or false?
11466,R15.
11467,Suppose Alice has a message that she is ready to send to anyone who asks.
11468,"Thousands of
people want to obtain Alice’s message, but each wants to be sure of the integrity of the
message."
11469,"In this context, do you think a MAC-based or a digital-signature-based integrity
scheme is more suitable?"
11470,Why?
11471,R16.
11472,What is the purpose of a nonce in an end-point authentication protocol?
11473,R17.
11474,What does it mean to say that a nonce is a once-in-a-lifetime value?
11475,In whose lifetime?R18.
11476,Is the message integrity scheme based on HMAC susceptible to playback attacks?
11477,"If so,
how can a nonce be incorporated into the scheme to remove this susceptibility?(m, H(m)+s), H(m)+s
R19."
11478,Suppose that Bob receives a PGP message from Alice.
11479,"How does Bob know for sure that
Alice created the message (rather than, say, Trudy)?"
11480,"Does PGP use a MAC for message
integrity?"
11481,R20.
11482,"In the SSL record, there is a field for SSL sequence numbers."
11483,True or false?
11484,R21.
11485,What is the purpose of the random nonces in the SSL handshake?R22.
11486,Suppose an SSL session employs a block cipher with CBC.
11487,"True or false: The server
sends to the client the IV in the clear."
11488,R23.
11489,Suppose Bob initiates a TCP connection to Trudy who is pretending to be Alice.
11490,"During the
handshake, Trudy sends Bob Alice’s certificate."
11491,"In what step of the SSL handshake algorithm
will Bob discover that he is not communicating with Alice?"
11492,R24.
11493,Consider sending a stream of packets from Host A to Host B using IPsec.
11494,"Typically, a new
SA will be established for each packet sent in the stream."
11495,True or false?
11496,R25.
11497,"Suppose that TCP is being run over IPsec between headquarters and the branch office in
Figure 8.28 ."
11498,"If TCP retransmits the same packet, then the two corresponding packets sent by
R1 packets will have the same sequence number in the ESP header."
11499,True or false?
11500,R26.
11501,An IKE SA and an IPsec SA are the same thing.
11502,True or false?
11503,R27.
11504,Consider WEP for 802.11.
11505,"Suppose that the data is 10101100 and the keystream is
1111000."
11506,"What is the resulting ciphertext?SECTION 8.9
ProblemsR28."
11507,"In WEP, an IV is sent in the clear in every frame."
11508,True or false?
11509,R29.
11510,Stateful packet filters maintain two data structures.
11511,"Name them and briefly describe what
they do."
11512,R30.
11513,Consider a traditional (stateless) packet filter.
11514,"This packet filter may filter packets based on
TCP flag bits as well as other header fields."
11515,True or false?
11516,R31.
11517,"In a traditional packet filter, each interface can have its own access control list."
11518,"True or
false?"
11519,R32.
11520,Why must an application gateway work in conjunction with a router filter to be effective?
11521,R33.
11522,Signature-based IDSs and IPSs inspect into the payloads of TCP and UDP segments.
11523,"True
or false?"
11524,P1.
11525,"Using the monoalphabetic cipher in Figure 8.3 , encode the message “This is an easy
problem.” Decode the message “rmij’u uamu xyj.”
P2."
11526,"Show that Trudy’s known-plaintext attack, in which she knows the (ciphertext, plaintext)
translation pairs for seven letters, reduces the number of possible substitutions to be checked in
the example in Section 8.2.1 by approximately 109."
11527,P3.
11528,Consider the polyalphabetic system shown in Figure 8.4 .
11529,"Will a chosen-plaintext attack that
is able to get the plaintext encoding of the message “The quick brown fox jumps over the lazy
dog.” be sufficient to decode all messages?"
11530,Why or why not?
11531,P4.
11532,Consider the block cipher in Figure 8.5 .
11533,"Suppose that each block cipher T simply reverses
the order of the eight input bits (so that, for example, 11110000 becomes 00001111)."
11534,"Furthersuppose that the 64-bit scrambler does not modify any bits (so that the output value of the mth
bit is equal to the input value of the mth bit)."
11535,"(a) With  and the original 64-bit input equal to
10100000 repeated eight times, what is the value of the output?"
11536,"(b) Repeat part (a) but now
change the last bit of the original 64-bit input from a 0 to a 1."
11537,(c) Repeat parts (a) and (b) but nowsuppose that the 64-bit scrambler inverses the order of the 64 bits.
11538,P5.
11539,Consider the block cipher in Figure 8.5 .
11540,"For a given “key” Alice and Bob would need to
keep eight tables, each 8 bits by 8 bits."
11541,"For Alice (or Bob) to store all eight tables, how many bits
of storage are necessary?"
11542,How does this number compare with the number of bits required for afull-table 64-bit block cipher?
11543,P6.
11544,Consider the 3-bit block cipher in Table 8.1 .
11545,Suppose the plaintext is 100100100.
11546,"(a) Initially
assume that CBC is not used."
11547,What is the resulting ciphertext?
11548,"(b) Suppose Trudy sniffs the
ciphertext."
11549,"Assuming she knows that a 3-bit block cipher without CBC is being employed (but
doesn’t know the specific cipher), what can she surmise?"
11550,"(c) Now suppose that CBC is usedi
n=3with ."
11551,What is the resulting ciphertext?
11552,P7.
11553,"(a) Using RSA, choose  and , and encode the word “dog” by encrypting each letter
separately."
11554,"Apply the decryption algorithm to the encrypted version to recover the original
plaintext message."
11555,(b) Repeat part (a) but now encrypt “dog” as one message m.
11556,P8.
11557,Consider RSA with  and .
11558,a.
11559,What are n and z?
11560,b.
11561,Let e be 3.
11562,Why is this an acceptable choice for e?
11563,c.
11564,Find d such that  (mod z) and .
11565,d.
11566,"Encrypt the message  using the key (n, e)."
11567,"Let c denote the corresponding
ciphertext."
11568,Show all work.
11569,"Hint: To simplify the calculations, use the fact:
P9."
11570,"In this problem, we explore the Diffie-Hellman (DH) public-key encryption algorithm, which
allows two entities to agree on a shared key."
11571,"The DH algorithm makes use of a large prime
number p and another large number g less than p."
11572,"Both p and g are made public (so that an
attacker would know them)."
11573,"In DH, Alice and Bob each independently choose secret keys, S
and S , respectively."
11574,"Alice then computes her public key, T, by raising g to S  and then taking
mod p."
11575,Bob similarly computes his own public key T by raising g to S  and then taking mod p.
11576,Alice and Bob then exchange their public keys over the Internet.
11577,Alice then calculates the sharedsecret key S by raising T  to S  and then taking mod p.
11578,"Similarly, Bob calculates the shared key
S′ by raising T  to S  and then taking mod p."
11579,a.
11580,"Prove that, in general, Alice and Bob obtain the same symmetric key, that is, prove ."
11581,b.
11582,"With p = 11 and g = 2, suppose Alice and Bob choose private keys  and ,
respectively."
11583,"Calculate Alice’s and Bob’s public keys, T and T ."
11584,Show all work.
11585,c.
11586,"Following up on part (b), now calculate S as the shared symmetric key."
11587,Show all work.
11588,d.
11589,"Provide a timing diagram that shows how Diffie-Hellman can be attacked by a man-in-
the-middle."
11590,"The timing diagram should have three vertical lines, one for Alice, one for
Bob, and one for the attacker Trudy."
11591,P10.
11592,"Suppose Alice wants to communicate with Bob using symmetric key cryptography using a
session key K ."
11593,"In Section 8.2 , we learned how public-key cryptography can be used to
distribute the session key from Alice to Bob."
11594,"In this problem, we explore how the session key can
be distributed—without public key cryptography—using a key distribution center (KDC)."
11595,"The
KDC is a server that shares a unique secret symmetric key with each registered user."
11596,"For Alice
and Bob, denote these keys by K  and K ."
11597,"Design a scheme that uses the KDC to
distribute K  to Alice and Bob."
11598,"Your scheme should use three messages to distribute the session
key: a message from Alice to the KDC; a message from the KDC to Alice; and finally a messagefrom Alice to Bob."
11599,"The first message is K  (A, B)."
11600,"Using the notation, K , K , S, A, and
B answer the following questions.IV=111
p=3 q=11
p=5 q=11
de=1 d<160
m=8
[ (a mod n)⋅(b mod n)]mod n=(a⋅b)modn
A
B A A
B B
B A
A B
S=S′
SA=5 SB=12
A B
S
A-KDC B-KDC
S
A-KDC A-KDC B-KDCa. What is the second message?"
11601,b.
11602,What is the third message?
11603,P11.
11604,"Compute a third message, different from the two messages in Figure 8.8 , that has the
same checksum as the messages in Figure 8.8 ."
11605,P12.
11606,"Suppose Alice and Bob share two secret keys: an authentication key S and a symmetric
encryption key S."
11607,Augment Figure 8.9 so that both integrity and confidentiality are provided.
11608,P13.
11609,"In the BitTorrent P2P file distribution protocol (see Chapter 2 ), the seed breaks the file into
blocks, and the peers redistribute the blocks to each other."
11610,"Without any protection, an attacker
can easily wreak havoc in a torrent by masquerading as a benevolent peer and sending bogus
blocks to a small subset of peers in the torrent."
11611,"These unsuspecting peers then redistribute thebogus blocks to other peers, which in turn redistribute the bogus blocks to even more peers.Thus, it is critical for BitTorrent to have a mechanism that allows a peer to verify the integrity of ablock, so that it doesn’t redistribute bogus blocks."
11612,"Assume that when a peer joins a torrent, it
initially gets a .torrent file from a fully trusted source."
11613,"Describe a simple scheme that allows
peers to verify the integrity of blocks."
11614,P14.
11615,"The OSPF routing protocol uses a MAC rather than digital signatures to provide message
integrity."
11616,Why do you think a MAC was chosen over digital signatures?
11617,P15.
11618,"Consider our authentication protocol in Figure 8.18 in which Alice authenticates herself to
Bob, which we saw works well (i.e., we found no flaws in it)."
11619,"Now suppose that while Alice is
authenticating herself to Bob, Bob must authenticate himself to Alice."
11620,"Give a scenario by which
Trudy, pretending to be Alice, can now authenticate herself to Bob as Alice."
11621,"( Hint: Consider that
the sequence of operations of the protocol, one with Trudy initiating and one with Bob initiating,
can be arbitrarily interleaved."
11622,"Pay particular attention to the fact that both Bob and Alice will usea nonce, and that if care is not taken, the same nonce can be used maliciously.)
P16."
11623,"A natural question is whether we can use a nonce and public key cryptography to solve the
end-point authentication problem in Section 8.4 ."
11624,"Consider the following natural protocol: (1)
Alice sends the message “ I am Alice ” to Bob."
11625,"(2) Bob chooses a nonce, R, and sends it to
Alice."
11626,(3) Alice uses her private key to encrypt the nonce and sends the resulting value to Bob.
11627,(4) Bob applies Alice’s public key to the received message.
11628,"Thus, Bob computes R and
authenticates Alice."
11629,a.
11630,"Diagram this protocol, using the notation for public and private keys employed in the
textbook."
11631,b.
11632,Suppose that certificates are not used.
11633,Describe how Trudy can become a “woman-in-the-middle” by intercepting Alice’s messages and then ­pretending to be Alice to Bob.
11634,P17.
11635,"Figure 8.19 shows the operations that Alice must perform with PGP to provide
confidentiality, authentication, and integrity."
11636,"Diagram the corresponding operations that Bob
must perform on the package received from Alice."
11637,P18.
11638,Suppose Alice wants to send an e-mail to Bob.
11639,"Bob has a public-private key pair1
2, and Alice has Bob’s certificate."
11640,"But Alice does not have a public, private key pair."
11641,Alice and Bob (and the entire world) share the same hash function .
11642,a.
11643,"In this situation, is it possible to design a scheme so that Bob can verify that Alice
created the message?"
11644,"If so, show how with a block diagram for Alice and Bob."
11645,b.
11646,Is it possible to design a scheme that provides confidentiality for sending the messagefrom Alice to Bob?
11647,"If so, show how with a block diagram for Alice and Bob."
11648,P19.
11649,Consider the Wireshark output below for a portion of an SSL session.
11650,a.
11651,Is Wireshark packet 112 sent by the client or server?
11652,b.
11653,What is the server’s IP address and port number?
11654,c.
11655,"Assuming no loss and no retransmissions, what will be the sequence number of the nextTCP segment sent by the client?"
11656,d.
11657,How many SSL records does Wireshark packet 112 contain?
11658,e.
11659,Does packet 112 contain a Master Secret or an Encrypted Master Secret or neither?
11660,f.
11661,"Assuming that the handshake type field is 1 byte and each length field is 3 bytes, whatare the values of the first and last bytes of the Master Secret (or Encrypted Master
Secret)?"
11662,g.
11663,The client encrypted handshake message takes into account how many SSL records?
11664,h.
11665,The server encrypted handshake message takes into account how many SSL records?
11666,P20.
11667,"In Section 8.6.1 , it is shown that without sequence numbers, Trudy (a woman-in-the
middle) can wreak havoc in an SSL session by interchanging TCP segments."
11668,"Can Trudy do
something similar by deleting a TCP segment?"
11669,"What does she need to do to succeed at the
deletion attack?"
11670,"What effect will it have?(KB+,KB−)
H(⋅)(Wireshark screenshot reprinted by permission of the Wireshark Foundation.)
P21."
11671,Suppose Alice and Bob are communicating over an SSL session.
11672,"Suppose an attacker,
who does not have any of the shared keys, inserts a bogus TCP segment into a packet stream
with correct TCP checksum and sequence numbers (and correct IP addresses and port
numbers)."
11673,Will SSL at the receiving side accept the bogus packet and pass the payload to thereceiving application?
11674,Why or why not?
11675,P22.
11676,The following true/false questions pertain to Figure 8.28 .
11677,a.
11678,"When a host in 172.16.1/24 sends a datagram to an Amazon.com server, the router R1
will encrypt the datagram using IPsec."
11679,b.
11680,"When a host in 172.16.1/24 sends a datagram to a host in 172.16.2/24, the router R1 will
change the source and destination address of the IP datagram."
11681,c.
11682,Suppose a host in 172.16.1/24 initiates a TCP connection to a Web server in172.16.2/24.
11683,"As part of this connection, all datagrams sent by R1 will have protocol
number 50 in the left-most IPv4 header field."
11684,d.
11685,Consider sending a TCP segment from a host in 172.16.1/24 to a host in 172.16.2/24.
11686,"Suppose the acknowledgment for this segment gets lost, so that TCP resends the
segment."
11687,"Because IPsec uses sequence numbers, R1 will not resend the TCP segment.P23."
11688,Consider the example in Figure 8.28 .
11689,"Suppose Trudy is a woman-in-the-middle, who can
insert datagrams into the stream of datagrams going from R1 and R2."
11690,"As part of a replay attack,
Trudy sends a duplicate copy of one of the datagrams sent from R1 to R2."
11691,Will R2 decrypt theduplicate datagram and forward it into the branch-office network?
11692,"If not, describe in detail howR2 detects the duplicate datagram."
11693,P24.
11694,Consider the following pseudo-WEP protocol.
11695,The key is 4 bits and the IV is 2 bits.
11696,"The IV
is appended to the end of the key when generating the keystream."
11697,"Suppose that the shared
secret key is 1010."
11698,The keystreams for the four possible inputs are as follows:101000: 0010101101010101001011010100100 .
11699,.
11700,.
11701,101001: 1010011011001010110100100101101 .
11702,.
11703,.101010: 0001101000111100010100101001111 .
11704,.
11705,.101011: 1111101010000000101010100010111 .
11706,.
11707,.
11708,Suppose all messages are 8 bits long.
11709,"Suppose the ICV (integrity check) is 4 bits long, and is
calculated by XOR-ing the first 4 bits of data with the last 4 bits of data."
11710,"Suppose the pseudo-WEP packet consists of three fields: first the IV field, then the message field, and last the ICVfield, with some of these fields encrypted."
11711,a.
11712,We want to send the message  using the  and using WEP.
11713,"What will
be the values in the three WEP fields?"
11714,b.
11715,"Show that when the receiver decrypts the WEP packet, it recovers the message and the
ICV."
11716,c.
11717,"Suppose Trudy intercepts a WEP packet (not necessarily with the ) and wants to
modify it before forwarding it to the receiver."
11718,Suppose Trudy flips the first ICV bit.
11719,"Assuming that Trudy does not know the keystreams for any of the IVs, what other bit(s)must Trudy also flip so that the received packet passes the ICV check?"
11720,d.
11721,"Justify your answer by modifying the bits in the WEP packet in part (a), decrypting the
resulting packet, and verifying the integrity check."
11722,P25.
11723,"Provide a filter table and a connection table for a stateful firewall that is as restrictive as
possible but accomplishes the following:
a."
11724,Allows all internal users to establish Telnet sessions with external hosts.
11725,b.
11726,Allows external users to surf the company Web site at 222.22.0.12.
11727,c.
11728,But otherwise blocks all inbound and outbound traffic.
11729,The internal network is 222.22/16.
11730,"In your solution, suppose that the connection table is
currently caching three connections, all from inside to outside."
11731,You’ll need to inventappropriate IP addresses and port numbers.
11732,P26.
11733,Suppose Alice wants to visit the Web site activist.com using a TOR-like ­service.
11734,"This
service uses two non-colluding proxy servers, Proxy1 and Proxy2."
11735,"Alice first obtains them=10100000 IV=11
IV=11Wireshark Lab
In this lab (available from the book Web site), we investigate the Secure Sockets Layer (SSL) protocol."
11736,"Recall from Section 8.6 that SSL is used for securing a TCP connection, and that it is extensively used
in practice for secure Internet transactions."
11737,"In this lab, we will focus on the SSL records sent over the
TCP connection."
11738,"We will attempt to delineate and classify each of the records, with a goal ofunderstanding the why and how for each record."
11739,We investigate the various SSL record types as well asthe fields in the SSL messages.
11740,We do so by analyzing a trace of the SSL records sent between yourhost and an e-commerce server.
11741,"IPsec Lab
In this lab (available from the book Web site), we will explore how to create IPsec SAs between linux
boxes."
11742,"You can do the first part of the lab with two ordinary linux boxes, each with one Ethernet adapter.But for the second part of the lab, you will need four linux boxes, two of which having two Ethernetadapters."
11743,"In the second half of the lab, you will create IPsec SAs using the ESP protocol in the tunnelmode."
11744,"You will do this by first manually creating the SAs, and then by having IKE create the SAs.
AN INTERVIEW WITH…
Steven M."
11745,"Bellovin
Steven M."
11746,"Bellovin joined the faculty at Columbia University after many years at the NetworkServices Research Lab at AT&T Labs Research in Florham Park, New Jersey."
11747,"His focus is onnetworks, security, and why the two are incompatible."
11748,"In 1995, he was awarded the UsenixLifetime Achievement Award for his work in the creation of Usenet, the first newsgroup
exchange network that linked two or more computers and allowed users to share informationcertificates (each containing a public key) for Proxy1 and Proxy2 from some central server."
11749,"Denote  and  for the encryption/decryption with public and private RSA
keys."
11750,a.
11751,"Using a timing diagram, provide a protocol (as simple as possible) that enables Alice toestablish a shared session key S with Proxy1."
11752,"Denote S (m) for encryption/decryption of
data m with the shared key S ."
11753,b.
11754,"Using a timing diagram, provide a protocol (as simple as possible) that allows Alice toestablish a shared session key S with Proxy2 without revealing her IP address to
Proxy2."
11755,c.
11756,Assume now that shared keys S and S  are now established.
11757,"Using a timing diagram,
provide a protocol (as simple as possible and not using public-key cryptography ) that
allows Alice to request an html page from activist.com without revealing her IP address
to Proxy2 and without revealing to Proxy1 which site she is visiting ."
11758,"Your diagram should
end with an HTTP request arriving at activist.com.K1+(),K2+(),K1−(), K2−()
1 1
1
2
1 2and join in discussions."
11759,"Steve is also an elected member of the National Academy of
Engineering."
11760,He received his BA from Columbia University and his PhD from the University ofNorth Carolina at Chapel Hill.What led you to specialize in the networking security area?
11761,"This is going to sound odd, but the answer is simple: It was fun."
11762,"My background was in
systems programming and systems administration, which leads fairly naturally to security."
11763,"AndI’ve always been interested in communications, ranging back to part-time systemsprogramming jobs when I was in college."
11764,"My work on security continues to be motivated by two things—a desire to keep computers
useful, which means that their function can’t be corrupted by attackers, and a desire to protectprivacy."
11765,What was your vision for Usenet at the time that you were developing it?
11766,And now?
11767,"We originally viewed it as a way to talk about computer science and computer programming
around the country, with a lot of local use for administrative matters, for-sale ads, and so on."
11768,"Infact, my original prediction was one to two messages per day, from 50–100 sites at the most—ever."
11769,"But the real growth was in people-related topics, including—but not limited to—humaninteractions with computers."
11770,"My favorite newsgroups, over the years, have been things likerec.woodworking, as well as sci.crypt."
11771,"To some extent, netnews has been displaced by the Web."
11772,"Were I to start designing it today, it
would look very different."
11773,"But it still excels as a way to reach a very broad audience that isinterested in the topic, without having to rely on particular Web sites."
11774,Has anyone inspired you professionally?
11775,In what ways?
11776,"Professor Fred Brooks—the founder and original chair of the computer science department at
the University of North Carolina at Chapel Hill, the manager of the team that developed the IBM
S/360 and OS/360, and the author of The Mythical Man-Month —was a tremendous influence on
my career."
11777,"More than anything else, he taught outlook and trade-offs—how to look at problems
in the context of the real world (and how much messier the real world is than a theorist would
like), and how to balance competing interests in designing a solution."
11778,"Most computer work is
engineering—the art of making the right trade-offs to satisfy many contradictory objectives."
11779,What is your vision for the future of networking and security?
11780,"Thus far, much of the security we have has come from isolation."
11781,"A firewall, for example, works
by cutting off access to certain machines and services."
11782,But we’re in an era of increasingconnectivity—it’s gotten harder to isolate things.
11783,"Worse yet, our production systems require farmore separate pieces, interconnected by networks."
11784,Securing all that is one of our biggestchallenges.What would you say have been the greatest advances in security?
11785,"How much further do we
have to go?"
11786,"At least scientifically, we know how to do cryptography."
11787,That’s been a big help.
11788,"But most security
problems are due to buggy code, and that’s a much harder problem."
11789,"In fact, it’s the oldestunsolved problem in computer science, and I think it will remain that way."
11790,The challenge isfiguring out how to secure systems when we have to build them out of insecure components.
11791,"We
can already do that for reliability in the face of hardware failures; can we do the same for
security?"
11792,Do you have any advice for students about the Internet and networking security?
11793,Learning the mechanisms is the easy part.
11794,Learning how to “think paranoid” is harder.
11795,"You have
to remember that probability distributions don’t apply—the attackers can and will find improbableconditions."
11796,"And the details matter—a lot.Chapter 9 Multimedia Networking
While lounging in bed or riding buses and subways, people in all corners of the world are currently using
the Internet to watch movies and television shows on demand."
11797,Internet movie and television distributioncompanies such as Netflix and Amazon in North America and Youku and Kankan in China havepractically become household names.
11798,"But people are not only watching Internet videos, they are usingsites like YouTube to upload and distribute their own user-generated content, becoming Internet video
producers as well as consumers."
11799,"Moreover, network applications such as Skype, Google Talk, and
WeChat (enormously popular in China) allow people to not only make “telephone calls” over theInternet, but to also enhance those calls with video and multi-person conferencing."
11800,"In fact, we predictthat by the end of the current decade most of the video consumption and voice conversations will takeplace end-to-end over the Internet, more typically to wireless devices connected to the Internet viacellular and WiFi access networks."
11801,Traditional telephony and broadcast television are quickly becomingobsolete.
11802,"We begin this chapter with a taxonomy of multimedia applications in Section 9.1. We’ll see that a
multimedia application can be classified as either streaming stored audio/video , conversational
voice/video-over-IP , or streaming live audio/video ."
11803,"We’ll see that each of these classes of applications
has its own unique service requirements that differ significantly from those of traditional elastic
applications such as e-mail, Web browsing, and remote login."
11804,"In Section 9.2, we’ll examine video
streaming in some detail."
11805,"We’ll explore many of the underlying principles behind video streaming,
including client buffering, prefetching, and adapting video quality to available bandwidth."
11806,"In Section 9.3,
we investigate conversational voice and video, which, unlike elastic applications, are highly sensitive to
end-to-end delay but can tolerate occasional loss of data."
11807,"Here we’ll examine how techniques such as
adaptive playout, forward error correction, and error concealment can mitigate against network-induced
packet loss and delay."
11808,We’ll also examine Skype as a case study.
11809,"In Section 9.4, we’ll study RTP and
SIP, two popular protocols for real-time conversational voice and video applications."
11810,"In Section 9.5,
we’ll investigate mechanisms within the network that can be used to distinguish one class of traffic (e.g.,
delay-sensitive applications such as conversational voice) from another (e.g., elastic applications suchas browsing Web pages), and provide differentiated service among multiple classes of traffic.9.1 Multimedia Networking Applications
We define a multimedia network application as any network application that employs audio or video."
11811,"In
this section, we provide a taxonomy of multimedia applications."
11812,We’ll see that each class of applicationsin the taxonomy has its own unique set of service requirements and design issues.
11813,"But before diving intoan in-depth discussion of Internet multimedia applications, it is useful to consider the intrinsiccharacteristics of the audio and video media themselves."
11814,"9.1.1 Properties of Video
Perhaps the most salient characteristic of video is its high bit rate ."
11815,"Video distributed over the Internet
typically ranges from 100 kbps for low-quality video conferencing to over 3 Mbps for streaming high-definition movies."
11816,"To get a sense of how video bandwidth demands compare with those of other Internetapplications, let’s briefly consider three different users, each using a different Internet application."
11817,"Ourfirst user, Frank, is going quickly through photos posted on his friends’ Facebook pages."
11818,"Let’s assume
that Frank is looking at a new photo every 10 seconds, and that photos are on average 200 Kbytes in
size."
11819,"(As usual, throughout this discussion we make the simplifying assumption that )
Our second user, Martha, is streaming music from the Internet (“the cloud”) to her smartphone."
11820,"Let’sassume Martha is using a service such as Spotify to listen to many MP3 songs, one after the other,each encoded at a rate of 128 kbps."
11821,"Our third user, Victor, is watching a video that has been encoded at2 Mbps."
11822,"Finally, let’s suppose that the session length for all three users is 4,000 seconds (approximately
67 minutes)."
11823,Table 9.1 compares the bit rates and the total bytes transferred for these three users.
11824,"We
see that video streaming consumes by far the most bandwidth, having a bit rate of more than ten times
greater than that of the Facebook and music-streaming applications."
11825,"Therefore, when design
Table 9.1 Comparison of bit-rate requirements of three Internet applications
Bit rate Bytes transferred in 67 min
Facebook Frank 160 kbps 80 Mbytes
Martha Music 128 kbps 64 Mbytes
Victor Video 2 Mbps 1 Gbyte1 Kbyte=8,000 bits.ing networked video applications, the first thing we must keep in mind is the high bit-rate requirements of
video."
11826,"Given the popularity of video and its high bit rate, it is perhaps not surprising that Cisco predicts
[Cisco 2015]  that streaming and stored video will be approximately 80 percent of global consumer
Internet traffic by 2019."
11827,"Another important characteristic of video is that it can be compressed, thereby trading off video quality
with bit rate."
11828,"A video is a sequence of images, typically being displayed at a constant rate, for example,at 24 or 30 images per second."
11829,"An uncompressed, digitally encoded image consists of an array ofpixels, with each pixel encoded into a number of bits to represent luminance and color."
11830,"There are two
types of redundancy in video, both of which can be exploited by video compression ."
11831,"Spatial
redundancy  is the redundancy within a given image."
11832,"Intuitively, an image that consists of mostly white
space has a high degree of redundancy and can be efficiently compressed without significantlysacrificing image quality."
11833,Temporal redundancy  reflects repetition from image to subsequent image.
11834,"If,
for example, an image and the subsequent image are exactly the same, there is no reason to re-encode
the subsequent image; it is instead more efficient simply to indicate during encoding that the subsequentimage is exactly the same."
11835,Today’s off-the-shelf compression algorithms can compress a video toessentially any bit rate desired.
11836,"Of course, the higher the bit rate, the better the image quality and thebetter the overall user viewing experience."
11837,"We can also use compression to create multiple versions of the same video, each at a different quality
level."
11838,"For example, we can use compression to create, say, three versions of the same video, at rates of
300 kbps, 1 Mbps, and 3 Mbps."
11839,"Users can then decide which version they want to watch as a function of
their current available bandwidth."
11840,"Users with high-speed Internet connections might choose the 3 Mbps
version; users watching the video over 3G with a smartphone might choose the 300 kbps version.Similarly, the video in a video conference application can be compressed “on-the-fly” to provide the bestvideo quality given the available end-to-end bandwidth between conversing users."
11841,"9.1.2 Properties of Audio
Digital audio (including digitized speech and music) has significantly lower bandwidth requirements thanvideo."
11842,"Digital audio, however, has its own unique properties that must be considered when designingmultimedia network applications."
11843,"To understand these properties, let’s first consider how analog audio
(which humans and musical instruments generate) is converted to a digital signal:
The analog audio signal is sampled at some fixed rate, for example, at 8,000 samples per second."
11844,The value of each sample will be some real number.
11845,Each of the samples is then rounded to one of a finite number of values.
11846,This operation is referred toas quantization .
11847,"The number of such finite values—called quantization values—is typically a powerof two, for example, 256 quantization values."
11848,Each of the quantization values is represented by a fixed number of bits.
11849,"For example, if there are
256 quantization values, then each value—and hence each audio sample—is represented by one
byte."
11850,The bit representations of all the samples are then concatenated together to form the digitalrepresentation of the signal.
11851,"As an example, if an analog audio signal is sampled at 8,000 samples
per second and each sample is quantized and represented by 8 bits, then the resulting digital signal
will have a rate of 64,000 bits per second."
11852,"For playback through audio speakers, the digital signalcan then be converted back—that is, decoded—to an analog signal."
11853,"However, the decoded analogsignal is only an approximation of the original signal, and the sound quality may be noticeablydegraded (for example, high-frequency sounds may be missing in the decoded signal)."
11854,"Byincreasing the sampling rate and the number of quantization values, the decoded signal can betterapproximate the original analog signal."
11855,"Thus (as with video), there is a trade-off between the qualityof the decoded signal and the bit-rate and storage requirements of the digital signal."
11856,The basic encoding technique that we just described is called pulse code modulation (PCM) .
11857,"Speech
encoding often uses PCM, with a sampling rate of 8,000 samples per second and 8 bits per sample,resulting in a rate of 64 kbps."
11858,"The audio compact disk (CD) also uses PCM, with a sampling rate of44,100 samples per second with 16 bits per sample; this gives a rate of 705.6 kbps for mono and 1.411Mbps for stereo."
11859,"PCM-encoded speech and music, however, are rarely used in the Internet."
11860,"Instead, as with video,
compression techniques are used to reduce the bit rates of the stream."
11861,"Human speech can be
compressed to less than 10 kbps and still be intelligible."
11862,"A popular compression technique for near CD-
quality stereo music is MPEG 1 layer 3, more commonly known as MP3."
11863,"MP3 encoders can compress
to many different rates; 128 kbps is the most common encoding rate and produces very little sounddegradation."
11864,"A related standard is Advanced Audio Coding (AAC) , which has been popularized by
Apple."
11865,"As with video, multiple versions of a prerecorded audio stream can be created, each at a differentbit rate."
11866,"Although audio bit rates are generally much less than those of video, users are generally much more
sensitive to audio glitches than video glitches."
11867,"Consider, for example, a video conference taking place
over the Internet."
11868,"If, from time to time, the video signal is lost for a few seconds, the video conference
can likely proceed without too much user frustration."
11869,"If, however, the audio signal is frequently lost, the
users may have to terminate the session."
11870,"9.1.3 Types of Multimedia Network Applications
The Internet supports a large variety of useful and entertaining multimedia applications."
11871,"In this
subsection, we classify multimedia applications into three broad categories: (i) streaming storedaudio/video , (ii) conversational voice/video-over-IP , and (iii) streaming live audio/video ."
11872,"As we will soon
see, each of these application categories has its own set of service requirements and design issues."
11873,"Streaming Stored Audio and Video
To keep the discussion concrete, we focus here on streaming stored video, which typically combines
video and audio components."
11874,"Streaming stored audio (such as Spotify’s streaming music service) is
very similar to streaming stored video, although the bit rates are typically much lower."
11875,"In this class of applications, the underlying medium is prerecorded video, such as a movie, a television
show, a prerecorded sporting event, or a prerecorded user-generated video (such as those commonlyseen on YouTube)."
11876,"These prerecorded videos are placed on servers, and users send requests to the
servers to view the videos on demand ."
11877,"Many Internet companies today provide streaming video,
including YouTube (Google), Netflix, Amazon, and Hulu."
11878,"Streaming stored video has three key
distinguishing features."
11879,Streaming.
11880,"In a streaming stored video application, the client typically begins video playout within a
few seconds after it begins receiving the video from the server."
11881,"This means that the client will be
playing out from one location in the video while at the same time receiving later parts of the videofrom the server."
11882,"This technique, known as streaming, avoids having to download the entire video
file (and incurring a potentially long delay) before playout begins."
11883,Interactivity.
11884,"Because the media is prerecorded, the user may pause, reposition forward, reposition
backward, fast-forward, and so on through the video content."
11885,"The time from when the user makes
such a request until the action manifests itself at the client should be less than a few seconds foracceptable responsiveness."
11886,Continuous playout.
11887," Once playout of the video begins, it should proceed according to the original
timing of the recording."
11888,"Therefore, data must be received from the server in time for its playout at theclient; otherwise, users experience video frame freezing (when the client waits for the delayedframes) or frame skipping (when the client skips over delayed frames)."
11889,"By far, the most important performance measure for streaming video is average throughput."
11890,"In order toprovide continuous playout, the network must provide an average throughput to the streaming
application that is at least as large the bit rate of the video itself."
11891,"As we will see in Section 9.2, by using
buffering and prefetching, it is possible to provide continuous playout even when the throughputfluctuates, as long as the average throughput (averaged over 5–10 seconds) remains above the video
rate [Wang 2008]."
11892,"For many streaming video applications, prerecorded video is stored on, and streamed from, a CDN
rather than from a single data center."
11893,"There are also many P2P video streaming applications for which
the video is stored on users’ hosts (peers), with different chunks of video arriving from different peersthat may spread around the globe."
11894,"Given the prominence of Internet video streaming, we will explore
video streaming in some depth in Section 9.2, paying particular attention to client buffering, prefetching,
adapting quality to bandwidth availability, and CDN distribution."
11895,"Conversational Voice- and Video-over-IP
Real-time conversational voice over the Internet is often referred to as Internet telephony , since, from
the user’s perspective, it is similar to the traditional circuit-switched telephone service."
11896,"It is also
commonly called Voice-over-IP (VoIP)."
11897,"Conversational video is similar, except that it includes the video
of the participants as well as their voices."
11898,Most of today’s voice and video conversational systems allowusers to create conferences with three or more participants.
11899,"Conversational voice and video are widelyused in the Internet today, with the Internet companies Skype, QQ, and Google Talk boasting hundredsof millions of daily users."
11900,"In our discussion of application service requirements in Chapter 2 (Figure 2.4), we identified a number
of axes along which application requirements can be classified."
11901,"Two of these axes—timing
considerations and tolerance of data loss—are particularly important for conversational voice and videoapplications."
11902,Timing considerations are important because audio and video conversational applicationsare highly delay-sensitive.
11903,"For a conversation with two or more interacting speakers, the delay from
when a user speaks or moves until the action is manifested at the other end should be less than a fewhundred milliseconds."
11904,"For voice, delays smaller than 150 milliseconds are not perceived by a humanlistener, delays between 150 and 400 milliseconds can be acceptable, and delays exceeding 400milliseconds can result in frustrating, if not completely unintelligible, voice conversations."
11905,"On the other hand, conversational multimedia applications are loss-tolerant—occasional loss only
causes occasional glitches in audio/video playback, and these losses can often be partially or fully
concealed."
11906,"These delay-sensitive but loss-tolerant characteristics are clearly different from those ofelastic data applications such as Web browsing, e-mail, social networks, and remote login."
11907,"For elasticapplications, long delays are annoying but not particularly harmful; the completeness and integrity of thetransferred data, however, are of paramount importance."
11908,"We will explore conversational voice and video
in more depth in Section 9.3, paying particular attention to how adaptive playout, forward error
correction, and error concealment can mitigate against network-induced packet loss and delay."
11909,"Streaming Live Audio and Video
This third class of applications is similar to traditional broadcast radio and television, except that
transmission takes place over the Internet."
11910,"These applications allow a user to receive a live radio or
television transmission—such as a live sporting event or an ongoing news event—transmitted from any
corner of the world."
11911,"Today, thousands of radio and television stations around the world are broadcastingcontent over the Internet.Live, broadcast-like applications often have many users who receive the same audio/video program at
the same time."
11912,"In the Internet today, this is typically done with CDNs ( Section 2.6)."
11913,"As with streaming
stored multimedia, the network must provide each live multimedia flow with an average throughput that
is larger than the video consumption rate."
11914,"Because the event is live, delay can also be an issue,although the timing constraints are much less stringent than those for conversational voice."
11915,"Delays of up
to ten seconds or so from when the user chooses to view a live transmission to when playout begins can
be tolerated."
11916,"We will not cover streaming live media in this book because many of the techniques usedfor streaming live media—initial buffering delay, adaptive bandwidth use, and CDN distribution—aresimilar to those for streaming stored media.9.2 Streaming Stored Video
For streaming video applications, prerecorded videos are placed on servers, and users send requests to
these servers to view the videos on demand."
11917,"The user may watch the video from beginning to endwithout interruption, may stop watching the video well before it ends, or interact with the video bypausing or repositioning to a future or past scene."
11918,"Streaming video systems can be classified into three
categories: UDP streaming , HTTP streaming , and adaptive HTTP streaming  (see Section 2.6)."
11919,"Although all three types of systems are used in practice, the majority of today’s systems employ HTTP
streaming and adaptive HTTP streaming."
11920,"A common characteristic of all three forms of video streaming is the extensive use of client-side
application buffering to mitigate the effects of varying end-to-end delays and varying amounts ofavailable bandwidth between server and client."
11921,"For streaming video (both stored and live), usersgenerally can tolerate a small several-second initial delay between when the client requests a video andwhen video playout begins at the client."
11922,"Consequently, when the video starts to arrive at the client, the
client need not immediately begin playout, but can instead build up a reserve of video in an application
buffer."
11923,"Once the client has built up a reserve of several seconds of buffered-but-not-yet-played video,
the client can then begin video playout."
11924,"There are two important advantages provided by such client
buffering ."
11925,"First, client-side buffering can absorb variations in server-to-client delay."
11926,"If a particular piece
of video data is delayed, as long as it arrives before the reserve of received-but-not-yet-played video isexhausted, this long delay will not be noticed."
11927,"Second, if the server-to-client bandwidth briefly dropsbelow the video consumption rate, a user can continue to enjoy continuous playback, again as long asthe client application buffer does not become completely drained."
11928,Figure 9.1 illustrates client-side buffering.
11929,"In this simple example, suppose that video is encoded at a
fixed bit rate, and thus each video block contains video frames that are to be played out over the same
fixed amount of time, Δ."
11930,"The server transmits the first video block at t , the second block at  the
third block at  and so on."
11931,"Once the client begins playout, each block should be played out Δ time
units after the previous block in order to reproduce the timing of the original recorded video."
11932,"Because of
the variable end-to-end network delays, different video blocks experience different delays."
11933,"The first
video block arrives at the client at t and the second block arrives at t."
11934,"The network delay for the ith
block is the horizontal distance between the time the block was transmitted by the server and the time it
is received at the client; note that the network delay varies from one video block to another."
11935,"In this
example, if the client were to begin playout as soon as the first block arrived at t, then the second block
would not have arrived in time to be played out at out at ."
11936,"In this case, video playout would either
have to stall (waiting for block 2 to arrive) or block 2 could be skipped—both resulting in undesirable0 t0+Δ,
t0+2Δ,
1 2
1
t1+Δplayout impairments."
11937,"Instead, if the client were to delay the start of playout until t, when blocks 1
through 6 have all arrived, periodic playout can proceed with all blocks having been received before
their playout time."
11938,"Figure 9.1 Client playout delay in video streaming
9.2.1 UDP Streaming
We only briefly discuss UDP streaming here, referring the reader to more in-depth discussions of the
protocols behind these systems where appropriate."
11939,"With UDP streaming, the server transmits video at arate that matches the client’s video consumption rate by clocking out the video chunks over UDP at asteady rate."
11940,"For example, if the video consumption rate is 2 Mbps and each UDP packet carries 8,000bits of video, then the server would transmit one UDP packet into its socket every
."
11941,"As we learned in Chapter 3, because UDP does not employ a
congestion-control mechanism, the server can push packets into the network at the consumption rate ofthe video without the rate-control restrictions of TCP."
11942,"UDP streaming typically uses a small client-sidebuffer, big enough to hold less than a second of video."
11943,"Before passing the video chunks to UDP, the server will encapsulate the video chunks within transport
packets specially designed for transporting audio and video, using the Real-Time Transport Protocol
(RTP) [RFC 3550]  or a similar (possibly proprietary) scheme."
11944,"We delay our coverage of RTP until
Section 9.3, where we discuss RTP in the context of conversational voice and video systems."
11945,"Another distinguishing property of UDP streaming is that in addition to the server-to-client video stream,
the client and server also maintain, in parallel, a separate control connection over which the client sendscommands regarding session state changes (such as pause, resume, reposition, and so on)."
11946,"The Real-3
(8000  bits)/(2 Mbps)=4 msecTime Streaming Protocol (RTSP) [RFC 2326] , explained in some detail in the Web site for this textbook,
is a popular open protocol for such a control connection."
11947,"Although UDP streaming has been employed in many open-source systems and proprietary products, it
suffers from three significant drawbacks."
11948,"First, due to the unpredictable and varying amount of availablebandwidth between server and client, constant-rate UDP streaming can fail to provide continuous
playout."
11949,"For example, consider the scenario where the video consumption rate is 1 Mbps and the
server-to-client available bandwidth is usually more than 1 Mbps, but every few minutes the availablebandwidth drops below 1 Mbps for several seconds."
11950,"In such a scenario, a UDP streaming system thattransmits video at a constant rate of 1 Mbps over RTP/UDP would likely provide a poor user experience,with freezing or skipped frames soon after the available bandwidth falls below 1 Mbps."
11951,"The seconddrawback of UDP streaming is that it requires a media control server, such as an RTSP server, toprocess client-to-server interactivity requests and to track client state (e.g., the client’s playout point in
the video, whether the video is being paused or played, and so on) for each ongoing client session."
11952,"This
increases the overall cost and complexity of deploying a large-scale video-on-demand system."
11953,"The third
drawback is that many firewalls are configured to block UDP traffic, preventing the users behind thesefirewalls from receiving UDP video."
11954,"9.2.2 HTTP Streaming
In HTTP streaming, the video is simply stored in an HTTP server as an ordinary file with a specific URL.When a user wants to see the video, the client establishes a TCP connection with the server and issuesan HTTP GET request for that URL."
11955,"The server then sends the video file, within an HTTP responsemessage, as quickly as possible, that is, as quickly as TCP congestion control and flow control willallow."
11956,"On the client side, the bytes are collected in a client application buffer."
11957,"Once the number of bytes
in this buffer exceeds a predetermined threshold, the client application begins playback—specifically, it
periodically grabs video frames from the client application buffer, decompresses the frames, anddisplays them on the user’s screen."
11958,"We learned in Chapter 3 that when transferring a file over TCP, the server-to-client transmission rate
can vary significantly due to TCP’s congestion control mechanism."
11959,"In particular, it is not uncommon for
the transmission rate to vary in a “saw-tooth” manner associated with TCP congestion control.Furthermore, packets can also be significantly delayed due to TCP’s retransmission mechanism."
11960,"Because of these characteristics of TCP, the conventional wisdom in the 1990s was that video
streaming would never work well over TCP."
11961,"Over time, however, designers of streaming video systemslearned that TCP’s congestion control and reliable-data transfer mechanisms do not necessarilypreclude continuous playout when client buffering and prefetching (discussed in the next section) areused.The use of HTTP over TCP also allows the video to traverse firewalls and NATs more easily (which are
often configured to block most UDP traffic but to allow most HTTP traffic)."
11962,"Streaming over HTTP also
obviates the need for a media control server, such as an RTSP server, reducing the cost of a large-scale deployment over the Internet."
11963,"Due to all of these advantages, most video streaming applicationstoday—including YouTube and Netflix—use HTTP streaming (over TCP) as its underlying streamingprotocol."
11964,"Prefetching Video
As we just learned, client-side buffering can be used to mitigate the effects of varying end-to-end delays
and varying available bandwidth."
11965,"In our earlier example in Figure 9.1, the server transmits video at the
rate at which the video is to be played out."
11966,"However, for streaming stored video, the client can attempt
to download the video at a rate higher  than the consumption rate, thereby prefetching  video frames that
are to be consumed in the future."
11967,This prefetched video is naturally stored in the client application buffer.
11968,"Such prefetching occurs naturally with TCP streaming, since TCP’s congestion avoidance mechanism
will attempt to use all of the available bandwidth between server and client."
11969,"To gain some insight into prefetching, let’s take a look at a simple example."
11970,"Suppose the video
consumption rate is 1 Mbps but the network is capable of delivering the video from server to client at aconstant rate of 1.5 Mbps."
11971,"Then the client will not only be able to play out the video with a very small
playout delay, but will also be able to increase the amount of buffered video data by 500 Kbits everysecond."
11972,"In this manner, if in the future the client receives data at a rate of less than 1 Mbps for a briefperiod of time, the client will be able to continue to provide continuous playback due to the reserve in its
buffer."
11973,"[Wang 2008] shows that when the average TCP throughput is roughly twice the media bit rate,
streaming over TCP results in minimal starvation and low buffering delays."
11974,Client Application Buffer and TCP BuffersFigure 9.2 illustrates the interaction between client and server for HTTP streaming.
11975,"At the server side,
the portion of the video file in white has already been sent into the server’s socket, while the darkened
portion is what remains to be sent."
11976,"After “passing through the socket door,” the bytes are placed in the
TCP send buffer before being transmitted into the Internet, as described in Chapter 3."
11977,"In Figure 9.2,
because the TCP send buffer at the server side is shown to be full, the server is momentarily prevented
from sending more bytes from the video file into the socket."
11978,"On the client side, the client application(media player) reads bytes from the TCP receive buffer (through its client socket) and places the bytesinto the client application buffer."
11979,"At the same time, the client application periodically grabs video framesfrom the client application buffer, decompresses the frames, and displays them on the user’s screen.Note that if the client application buffer is larger than the video file, then the whole process of movingbytes from the server’s storage to the client’s application buffer is equivalent to an ordinary file downloadover HTTP—the client simply pulls the video off the server as fast as TCP will allow!Figure 9.2 Streaming stored video over HTTP/TCP
Consider now what happens when the user pauses the video during the streaming process."
11980,"During the
pause period, bits are not removed from the client application buffer, even though bits continue to enter
the buffer from the server."
11981,"If the client application buffer is finite, it may eventually become full, which willcause “back pressure” all the way back to the server."
11982,"Specifically, once the client application bufferbecomes full, bytes can no longer be removed from the client TCP receive buffer, so it too becomes full.Once the client receive TCP buffer becomes full, bytes can no longer be removed from the server TCPsend buffer, so it also becomes full."
11983,"Once the TCP becomes full, the server cannot send any more bytesinto the socket."
11984,"Thus, if the user pauses the video, the server may be forced to stop transmitting, inwhich case the server will be blocked until the user resumes the video."
11985,"In fact, even during regular playback (that is, without pausing), if the client application buffer becomes
full, back pressure will cause the TCP buffers to become full, which will force the server to reduce its
rate."
11986,"To determine the resulting rate, note that when the client application removes f bits, it creates room
for f bits in the client application buffer, which in turn allows the server to send f additional bits."
11987,"Thus, the
server send rate can be no higher than the video consumption rate at the client."
11988,"Therefore, a full client
application buffer indirectly imposes a limit on the rate that video can be sent from server to client when
streaming over HTTP."
11989,"Analysis of Video Streaming
Some simple modeling will provide more insight into initial playout delay and freezing due to application
buffer depletion."
11990,"As shown in Figure 9.3, let B denote the sizeFigure 9.3 Analysis of client-side buffering for video streaming
(in bits) of the client’s application buffer, and let Q denote the number of bits that must be buffered
before the client application begins playout."
11991,"(Of course, ) Let r denote the video consumption rate
—the rate at which the client draws bits out of the client application buffer during playback."
11992,"So, for
example, if the video’s frame rate is 30 frames/sec, and each (compressed) frame is 100,000 bits, then
."
11993,"To see the forest through the trees, we’ll ignore TCP’s send and receive buffers."
11994,Let’s assume that the server sends bits at a constant rate x whenever the client buffer is not full.
11995,"(This is
a gross simplification, since TCP’s send rate varies due to congestion control; we’ll examine more
realistic time-dependent rates x(t) in the problems at the end of this chapter.) Suppose at time  the
application buffer is empty and video begins arriving to the client application buffer."
11996,"We now ask at what
time  does playout begin?"
11997,"And while we are at it, at what time  does the client application buffer
become full?"
11998,"First, let’s determine t , the time when Q bits have entered the application buffer and playout begins."
11999,"Recall that bits arrive to the client application buffer at rate x and no bits are removed from this buffer
before playout begins."
12000,"Thus, the amount of time required to build up Q bits (the initial buffering delay) is
."
12001,"Now let’s determine t, the point in time when the client application buffer becomes full."
12002,"We first observe
that if  (that is, if the server send rate is less than the video consumption rate), then the client buffer
will never become full! Indeed, starting at time t, the buffer will be depleted at rate r and will only be
filled at rate ."
12003,"Eventually the client buffer will empty out entirely, at which time the video will freeze on
the screen while the client buffer waits another t seconds to build up Q bits of video."
12004,"Thus, when theQ<B."
12005,"r=3 Mbps
t=0,
t=tp t=tf
p
tp=Q/x
f
x<r
p
x<r
pavailable rate in the network is less than the video rate, playout will alternate between periods of
continuous playout and periods of freezing."
12006," In a homework problem, you will be asked to determine the
length of each continuous playout and freezing period as a function of Q, r, and x."
12007,"Now let’s determine t
for when  In this case, starting at time t, the buffer increases from Q to B at rate  since bits are
being depleted at rate r but are arriving at rate x, as shown in Figure 9.3. Given these hints, you will be
asked in a homework problem to determine t, the time the client buffer becomes full."
12008,"Note that when the
available rate in the network is more than the video rate, after the initial buffering delay, the user willenjoy continuous playout until the video ends."
12009,"Early Termination and Repositioning the VideoHTTP streaming systems often make use of the HTTP byte-range header in the HTTP GET request
message, which specifies the specific range of bytes the client currently wants to retrieve from thedesired video."
12010,"This is particularly useful when the user wants to reposition (that is, jump) to a future
point in time in the video."
12011,"When the user repositions to a new position, the client sends a new HTTP
request, indicating with the byte-range header from which byte in the file should the server send data.When the server receives the new HTTP request, it can forget about any earlier request and insteadsend bytes beginning with the byte indicated in the byte-range request."
12012,"While we are on the subject of repositioning, we briefly mention that when a user repositions to a future
point in the video or terminates the video early, some prefetched-but-not-yet-viewed data transmitted bythe server will go unwatched—a waste of network bandwidth and server resources."
12013,"For example,
suppose that the client buffer is full with B bits at some time t  into the video, and at this time the user
repositions to some instant  into the video, and then watches the video to completion from that
point on."
12014,"In this case, all B bits in the buffer will be unwatched and the bandwidth and server resources
that were used to transmit those B bits have been completely wasted."
12015,"There is significant wasted
bandwidth in the Internet due to early termination, which can be quite costly, particularly for wireless
links [Ihm 2011]."
12016,"For this reason, many streaming systems use only a moderate-size client application
buffer, or will limit the amount of prefetched video using the byte-range header in HTTP requests [Rao
2011] ."
12017,"Repositioning and early termination are analogous to cooking a large meal, eating only a portion of it,and throwing the rest away, thereby wasting food."
12018,"So the next time your parents criticize you for wastingfood by not eating all your dinner, you can quickly retort by saying they are wasting bandwidth andserver resources when they reposition while watching movies over the Internet! But, of course, twowrongs do not make a right—both food and bandwidth are not to be wasted!
In Sections 9.2.1 and 9.2.2, we covered UDP streaming and HTTP streaming, respectively."
12019,"A third type
of streaming is Dynamic Adaptive Streaming over HTTP (DASH), which uses multiple versions of thef
x>r.p x−r
f
0
t>t0+B/rvideo, each compressed at a different rate."
12020,"DASH is discussed in detail in Section 2.6.2. CDNs are
often used to distribute stored and live video."
12021,"CDNs are discussed in detail in Section 2.6.3.9.3 Voice-over-IP
Real-time conversational voice over the Internet is often referred to as Internet telephony , since, from
the user’s perspective, it is similar to the traditional circuit-switched telephone service."
12022,"It is also
commonly called Voice-over-IP (VoIP)."
12023,"In this section we describe the principles and protocols
underlying VoIP."
12024,"Conversational video is similar in many respects to VoIP, except that it includes thevideo of the participants as well as their voices."
12025,"To keep the discussion focused and concrete, we focus
here only on voice in this section rather than combined voice and video."
12026,"9.3.1 Limitations of the Best-Effort IP Service
The Internet’s network-layer protocol, IP, provides best-effort service."
12027,"That is to say the service makes
its best effort to move each datagram from source to destination as quickly as possible but makes nopromises whatsoever about getting the packet to the destination within some delay bound or about a
limit on the percentage of packets lost."
12028,"The lack of such guarantees poses significant challenges to thedesign of real-time conversational applications, which are acutely sensitive to packet delay, jitter, and
loss."
12029,"In this section, we’ll cover several ways in which the performance of VoIP over a best-effort network can
be enhanced."
12030,"Our focus will be on application-layer techniques, that is, approaches that do not requireany changes in the network core or even in the transport layer at the end hosts."
12031,"To keep the discussionconcrete, we’ll discuss the limitations of best-effort IP service in the context of a specific VoIP example.The sender generates bytes at a rate of 8,000 bytes per second; every 20 msecs the sender gathersthese bytes into a chunk."
12032,"A chunk and a special header (discussed below) are encapsulated in a UDP
segment, via a call to the socket interface."
12033,"Thus, the number of bytes in a chunk is
 and a UDP segment is sent every 20 msecs."
12034,"If each packet makes it to the receiver with a constant end-to-end delay, then packets arrive at the
receiver periodically every 20 msecs."
12035,"In these ideal conditions, the receiver can simply play back eachchunk as soon as it arrives."
12036,"But unfortunately, some packets can be lost and most packets will not havethe same end-to-end delay, even in a lightly congested Internet."
12037,"For this reason, the receiver must takemore care in determining (1) when to play back a chunk, and (2) what to do with a missing chunk."
12038,"Packet Loss(20 msecs)⋅(8,000 bytes/sec)=160 bytes,Consider one of the UDP segments generated by our VoIP application."
12039,"The UDP segment is
encapsulated in an IP datagram."
12040,"As the datagram wanders through the network, it passes through
router buffers (that is, queues) while waiting for transmission on outbound links."
12041,"It is possible that one ormore of the buffers in the path from sender to receiver is full, in which case the arriving IP datagram maybe discarded, never to arrive at the receiving application."
12042,"Loss could be eliminated by sending the packets over TCP (which provides for reliable data transfer)
rather than over UDP."
12043,"However, retransmission mechanisms are often considered unacceptable forconversational real-time audio applications such as VoIP, because they increase end-to-end delay
[Bolot 1996]."
12044,"Furthermore, due to TCP congestion control, packet loss may result in a reduction of the
TCP sender’s transmission rate to a rate that is lower than the receiver’s drain rate, possibly leading to
buffer starvation."
12045,This can have a severe impact on voice intelligibility at the receiver.
12046,"For these reasons,
most existing VoIP applications run over UDP by default."
12047,"[Baset 2006]  reports that UDP is used by
Skype unless a user is behind a NAT or firewall that blocks UDP segments (in which case TCP is used)."
12048,But losing packets is not necessarily as disastrous as one might think.
12049,"Indeed, packet loss rates
between 1 and 20 percent can be tolerated, depending on how voice is encoded and transmitted, andon how the loss is concealed at the receiver."
12050,"For example, forward error correction (FEC) can helpconceal packet loss."
12051,"We’ll see below that with FEC, redundant information is transmitted along with the
original information so that some of the lost original data can be recovered from the redundantinformation."
12052,"Nevertheless, if one or more of the links between sender and receiver is severelycongested, and packet loss exceeds 10 to 20 percent (for example, on a wireless link), then there isreally nothing that can be done to achieve acceptable audio quality."
12053,"Clearly, best-effort service has its
limitations."
12054,"End-to-End Delay
End-to-end delay  is the accumulation of transmission, processing, and queuing delays in routers;
propagation delays in links; and end-system processing delays."
12055,"For real-time conversational
applications, such as VoIP, end-to-end delays smaller than 150 msecs are not perceived by a humanlistener; delays between 150 and 400 msecs can be acceptable but are not ideal; and delays exceeding400 msecs can seriously hinder the interactivity in voice conversations."
12056,"The receiving side of a VoIP
application will typically disregard any packets that are delayed more than a certain threshold, for
example, more than 400 msecs."
12057,"Thus, packets that are delayed by more than the threshold areeffectively lost."
12058,"Packet Jitter
A crucial component of end-to-end delay is the varying queuing delays that a packet experiences in the
network’s routers."
12059,"Because of these varying delays, the time from when a packet is generated at thesource until it is received at the receiver can fluctuate from packet to packet, as shown in Figure 9.1.
This phenomenon is called jitter."
12060,"As an example, consider two consecutive packets in our VoIP
application."
12061,The sender sends the second packet 20 msecs after sending the first packet.
12062,"But at the
receiver, the spacing between these packets can become greater than 20 msecs."
12063,"To see this, supposethe first packet arrives at a nearly empty queue at a router, but just before the second packet arrives atthe queue a large number of packets from other sources arrive at the same queue."
12064,"Because the first
packet experiences a small queuing delay and the second packet suffers a large queuing delay at this
router, the first and second packets become spaced by more than 20 msecs."
12065,The spacing betweenconsecutive packets can also become less than 20 msecs.
12066,"To see this, again consider two consecutivepackets."
12067,"Suppose the first packet joins the end of a queue with a large number of packets, and thesecond packet arrives at the queue before this first packet is transmitted and before any packets fromother sources arrive at the queue."
12068,"In this case, our two packets find themselves one right after the otherin the queue."
12069,"If the time it takes to transmit a packet on the router’s outbound link is less than 20 msecs,then the spacing between first and second packets becomes less than 20 msecs."
12070,The situation is analogous to driving cars on roads.
12071,"Suppose you and your friend are each driving in
your own cars from San Diego to Phoenix."
12072,"Suppose you and your friend have similar driving styles, and
that you both drive at 100 km/hour, traffic permitting."
12073,"If your friend starts out one hour before you,depending on intervening traffic, you may arrive at Phoenix more or less than one hour after your friend."
12074,"If the receiver ignores the presence of jitter and plays out chunks as soon as they arrive, then the
resulting audio quality can easily become unintelligible at the receiver."
12075,"Fortunately, jitter can often beremoved by using sequence numbers, timestamps , and a playout delay, as discussed below."
12076,"9.3.2 Removing Jitter at the Receiver for Audio
For our VoIP application, where packets are being generated periodically, the receiver should attempt toprovide periodic playout of voice chunks in the presence of random network jitter."
12077,"This is typically doneby combining the following two mechanisms:
Prepending each chunk with a timestamp."
12078," The sender stamps each chunk with the time at which
the chunk was generated."
12079,Delaying playout of chunks at the receiver.
12080," As we saw in our earlier discussion of Figure 9.1, the
playout delay of the received audio chunks must be long enough so that most of the packets arereceived before their scheduled playout times."
12081,This playout delay can either be fixed throughout theduration of the audio session or vary adaptively during the audio session lifetime.
12082,"We now discuss how these three mechanisms, when combined, can alleviate or even eliminate theeffects of jitter."
12083,"We examine two playback strategies: fixed playout delay and adaptive playout delay.Fixed Playout Delay
With the fixed-delay strategy, the receiver attempts to play out each chunk exactly q msecs after the
chunk is generated."
12084,"So if a chunk is timestamped at the sender at time t, the receiver plays out the
chunk at time  assuming the chunk has arrived by that time."
12085,"Packets that arrive after their scheduled
playout times are discarded and considered lost.What is a good choice for q?"
12086,"VoIP can support delays up to about 400 msecs, although a more
satisfying conversational experience is achieved with smaller values of q."
12087,"On the other hand, if q is
made much smaller than 400 msecs, then many packets may miss their scheduled playback times dueto the network-induced packet jitter."
12088,"Roughly speaking, if large variations in end-to-end delay are typical,
it is preferable to use a large q; on the other hand, if delay is small and variations in delay are also small,
it is preferable to use a small q, perhaps less than 150 msecs."
12089,"The trade-off between the playback delay and packet loss is illustrated in Figure 9.4. The figure shows
the times at which packets are generated and played
Figure 9.4 Packet loss for different fixed playout delays
out for a single talk spurt."
12090,Two distinct initial playout delays are considered.
12091,"As shown by the leftmost
staircase, the sender generates packets at regular intervals—say, every 20 msecs."
12092,"The first packet in
this talk spurt is received at time r."
12093,"As shown in the figure, the arrivals of subsequent packets are not
evenly spaced due to the network jitter."
12094,"For the first playout schedule, the fixed initial playout delay is set to  With this schedule, the fourtht+q,
p−r.packet does not arrive by its scheduled playout time, and the receiver considers it lost."
12095,"For the second
playout schedule, the fixed initial playout delay is set to  For this schedule, all packets arrive before
their scheduled playout times, and there is therefore no loss."
12096,"Adaptive Playout Delay
The previous example demonstrates an important delay-loss trade-off that arises when designing a
playout strategy with fixed playout delays."
12097,"By making the initial playout delay large, most packets willmake their deadlines and there will therefore be negligible loss; however, for conversational servicessuch as VoIP, long delays can become bothersome if not intolerable."
12098,"Ideally, we would like the playoutdelay to be minimized subject to the constraint that the loss be below a few percent."
12099,"The natural way to deal with this trade-off is to estimate the network delay and the variance of the
network delay, and to adjust the playout delay accordingly at the beginning of each talk spurt."
12100,"Thisadaptive adjustment of playout delays at the beginning of the talk spurts will cause the sender’s silent
periods to be compressed and elongated; however, compression and elongation of silence by a small
amount is not noticeable in speech."
12101,"Following [Ramjee 1994] , we now describe a generic algorithm that the receiver can use to adaptively
adjust its playout delays."
12102,"To this end, let
 the timestamp of the ith packet  the time the packet was generated by the sender
 the time packet i is received by receiver
 the time packet i is played at receiver
The end-to-end network delay of the ith packet is  Due to network jitter, this delay will vary from
packet to packet."
12103,"Let d  denote an estimate of the average  network delay upon reception of the ith
packet."
12104,"This estimate is constructed from the timestamps as follows:
where u is a fixed constant (for example, )."
12105,"Thus d  is a smoothed average of the observed
network delays  The estimate places more weight on the recently observed network delays
than on the observed network delays of the distant past."
12106,"This form of estimate should not be completely
unfamiliar; a similar idea is used to estimate round-trip times in TCP, as discussed in Chapter 3."
12107,"Let v
denote an estimate of the average deviation of the delay from the estimated average delay."
12108,"This
estimate is also constructed from the timestamps:p′−r."
12109,"ti= =
ri=
pi=
ri−ti."
12110,"i
di=(1−u)di−1+u(ri−ti)
u=0.01 i
r1−t1,…,ri−ti."
12111,"i
vi=(1−u)vi−1+u| ri−ti−di|The estimates d  and v  are calculated for every packet received, although they are used only to
determine the playout point for the first packet in any talk spurt."
12112,"Once having calculated these estimates, the receiver employs the following algorithm for the playout of
packets."
12113,"If packet i is the first packet of a talk spurt, its playout time, p, is computed as:
where K is a positive constant (for example, )."
12114,"The purpose of the Kv  term is to set the playout time
far enough into the future so that only a small fraction of the arriving packets in the talk spurt will be lost
due to late arrivals."
12115,The playout point for any subsequent packet in a talk spurt is computed as an offsetfrom the point in time when the first packet in the talk spurt was played out.
12116,"In particular, let
be the length of time from when the first packet in the talk spurt is generated until it is played out."
12117,"If
packet j also belongs to this talk spurt, it is played out at time
The algorithm just described makes perfect sense assuming that the receiver can tell whether a packet
is the first packet in the talk spurt."
12118,"This can be done by examining the signal energy in each received
packet."
12119,"9.3.3 Recovering from Packet Loss
We have discussed in some detail how a VoIP application can deal with packet jitter."
12120,"We now briefly
describe several schemes that attempt to preserve acceptable audio quality in the presence of packetloss."
12121,Such schemes are called loss recovery schemes .
12122,"Here we define packet loss in a broad sense:
A packet is lost either if it never arrives at the receiver or if it arrives after its scheduled playout time."
12123,OurVoIP example will again serve as a context for describing loss recovery schemes.
12124,"As mentioned at the beginning of this section, retransmitting lost packets may not be feasible in a real-
time conversational application such as VoIP."
12125,"Indeed, retransmitting a packet that has missed itsplayout deadline serves absolutely no purpose."
12126,And retransmitting a packet that overflowed a routerqueue cannot normally be accomplished quickly enough.
12127,"Because of these considerations, VoIPapplications often use some type of loss anticipation scheme."
12128,"Two types of loss anticipation schemesare forward error correction (FEC) and interleaving.i i
i
pi=ti+di+Kvi
K=4 i
qi=pi−ti
pj=tj+qiForward Error Correction (FEC)
The basic idea of FEC is to add redundant information to the original packet stream."
12129,"For the cost of
marginally increasing the transmission rate, the redundant information can be used to reconstruct
approximations or exact versions of some of the lost packets."
12130,"Following [Bolot 1996] and [Perkins
1998] , we now outline two simple FEC mechanisms."
12131,"The first mechanism sends a redundant encoded
chunk after every n chunks."
12132,"The redundant chunk is obtained by exclusive OR-ing the n original chunks
[Shacham 1990] ."
12133,"In this manner if any one packet of the group of  packets is lost, the receiver can
fully reconstruct the lost packet."
12134,"But if two or more packets in a group are lost, the receiver cannot
reconstruct the lost packets."
12135,"By keeping , the group size, small, a large fraction of the lost packets
can be recovered when loss is not excessive."
12136,"However, the smaller the group size, the greater the
relative increase of the transmission rate."
12137,"In particular, the transmission rate increases by a factor of 1/ n,
so that, if  then the transmission rate increases by 33 percent."
12138,"Furthermore, this simple scheme
increases the playout delay, as the receiver must wait to receive the entire group of packets before itcan begin playout."
12139,"For more practical details about how FEC works for multimedia transport see [RFC
5109] ."
12140,The second FEC mechanism is to send a lower-resolution audio stream as the redundant information.
12141,"For example, the sender might create a nominal audio stream and a corresponding low-resolution, low-bit rate audio stream."
12142,"(The nominal stream could be a PCM encoding at 64 kbps, and the lower-qualitystream could be a GSM encoding at 13 kbps.) The low-bit rate stream is referred to as the redundant
stream."
12143,"As shown in Figure 9.5, the sender constructs the nth packet by taking the nth chunk from the
nominal stream and appending to it the st chunk from the redundant stream."
12144,"In this manner,
whenever there is nonconsecutive packet loss, the receiver can conceal the loss by playing out the low-
bit rate encoded chunk that arrives with the subsequent packet."
12145,"Of course, low-bit rate chunks givelower quality than the nominal chunks."
12146,"However, a stream of mostly high-quality chunks, occasional low-quality chunks, and no missing chunks gives good overall audio quality."
12147,"Note that in this scheme, thereceiver only has to receive two packets before playback, so that the increased playout delay is small.Furthermore, if the low-bit rate encoding is much less than the nominal encoding, then the marginalincrease in the transmission rate will be small."
12148,"In order to cope with consecutive loss, we can use a simple variation."
12149,"Instead of appending just the
st low-bit rate chunk to the nth nominal chunk, the sender can append the st and nd low-
bit rate chunk, or append the st and rd low-bit rate chunk, and so on."
12150,"By appending more low-
bit rate chunks to each nominal chunk, the audio quality at the receiver becomes acceptable for a wider
variety of harsh best-effort environments."
12151,"On the other hand, the additional chunks increase thetransmission bandwidth and the playout delay.n+1
n+1
n=3,
(n−1)
(n−1) (n−1) (n−2)
(n−1) (n−3)Figure 9.5 Piggybacking lower-quality redundant information
Interleaving
As an alternative to redundant transmission, a VoIP application can send interleaved audio."
12152,"As shown in
Figure 9.6, the sender resequences units of audio data before transmission, so that originally adjacent
units are separated by a certain distance in the transmitted stream."
12153,"Interleaving can mitigate the effect
of packet losses."
12154,"If, for example, units are 5 msecs in length and chunks are 20 msecs (that is, four unitsper chunk), then the first chunk could contain units 1, 5, 9, and 13; the second chunk could contain units
2, 6, 10, and 14; and so on."
12155,"Figure 9.6 shows that the loss of a single packet from an interleaved
stream results in multiple small gaps in the reconstructed stream, as opposed to the single large gap
that would occur in a noninterleaved stream."
12156,Interleaving can significantly improve the perceived quality of an audio stream [Perkins 1998] .
12157,"It also
has low overhead."
12158,The obvious disadvantage of interleaving is that it increases latency.
12159,"This limits its
use for conversational applications such as VoIP, although it can perform well for streaming storedaudio."
12160,A major advantage of interleaving is that it does not increase the bandwidth requirements of astream.
12161,"Error Concealment
Error concealment schemes attempt to produce a replacement for a lost packet that is similar to the
original."
12162,"As discussed in [Perkins 1998] , this is possible since audioFigure 9.6 Sending interleaved audio
signals, and in particular speech, exhibit large amounts of short-term self-similarity."
12163,"As such, these
techniques work for relatively small loss rates (less than 15 percent), and for small packets (4–40
msecs)."
12164,"When the loss length approaches the length of a phoneme (5–100 msecs) these techniquesbreak down, since whole phonemes may be missed by the listener."
12165,Perhaps the simplest form of receiver-based recovery is packet repetition.
12166,"Packet repetition replaces
lost packets with copies of the packets that arrived immediately before the loss."
12167,It has low computationalcomplexity and performs reasonably well.
12168,"Another form of receiver-based recovery is interpolation,which uses audio before and after the loss to interpolate a suitable packet to cover the loss.Interpolation performs somewhat better than packet repetition but is significantly more computationally
intensive [Perkins 1998] ."
12169,"9.3.4 Case Study: VoIP with Skype
Skype is an immensely popular VoIP application with over 50 million accounts active on a daily basis."
12170,"In
addition to providing host-to-host VoIP service, Skype offers host-to-phone services, phone-to-hostservices, and multi-party host-to-host video conferencing services."
12171,"(Here, a host is again any Internetconnected IP device, including PCs, tablets, and smartphones.) Skype was acquired by Microsoft in2011.Because the Skype protocol is proprietary, and because all Skype’s control and media packets are
encrypted, it is difficult to precisely determine how Skype operates."
12172,"Nevertheless, from the Skype Web
site and several measurement studies, researchers have learned how Skype generally works [Baset
2006 ; Guha 2006; Chen 2006; Suh 2006; Ren 2006 ; Zhang X 2012]."
12173,"For both voice and video, the
Skype clients have at their disposal many different codecs, which are capable of encoding the media at
a wide range of rates and qualities."
12174,"For example, video rates for Skype have been measured to be as
low as 30 kbps for a low-quality session up to almost 1 Mbps for a high quality session [Zhang X 2012].Typically, Skype’s audio quality is better than the “POTS” (Plain Old Telephone Service) quality providedby the wire-line phone system."
12175,"(Skype codecs typically sample voice at 16,000 samples/sec or higher,which provides richer tones than POTS, which samples at 8,000/sec.) By default, Skype sends audioand video packets over UDP."
12176,"However, control packets are sent over TCP, and media packets are alsosent over TCP when firewalls block UDP streams."
12177,Skype uses FEC for loss recovery for both voice andvideo streams sent over UDP.
12178,"The Skype client also adapts the audio and video streams it sends to
current network conditions, by changing video quality and FEC overhead [Zhang X 2012]."
12179,"Skype uses P2P techniques in a number of innovative ways, nicely illustrating how P2P can be used in
applications that go beyond content distribution and file sharing."
12180,"As with instant messaging, host-to-hostInternet telephony is inherently P2P since, at the heart of the application, pairs of users (that is, peers)communicate with each other in real time."
12181,"But Skype also employs P2P techniques for two otherimportant functions, namely, for user location and for NAT traversal."
12182,"Figure 9.7 Skype peers
As shown in Figure 9.7, the peers (hosts) in Skype are organized into a hierarchical overlay network,
with each peer classified as a super peer or an ordinary peer."
12183,"Skype maintains an index that maps
Skype usernames to current IP addresses (and port numbers)."
12184,This index is distributed over the superpeers.
12185,"When Alice wants to call Bob, her Skype client searches the distributed index to determine Bob’s
current IP address."
12186,"Because the Skype protocol is proprietary, it is currently not known how the index
mappings are organized across the super peers, although some form of DHT organization is verypossible."
12187,"P2P techniques are also used in Skype relays , which are useful for establishing calls between hosts in
home networks."
12188,"Many home network configurations provide access to the Internet through NATs, as
discussed in Chapter 4."
12189,"Recall that a NAT prevents a host from outside the home network from initiating
a connection to a host within the home network."
12190,"If both Skype callers have NATs, then there is a
problem—neither can accept a call initiated by the other, making a call seemingly impossible."
12191,"The clever
use of super peers and relays nicely solves this problem."
12192,"Suppose that when Alice signs in, she is
assigned to a non-NATed super peer and initiates a session to that super peer."
12193,"(Since Alice is initiatingthe session, her NAT permits this session.) This session allows Alice and her super peer to exchangecontrol messages."
12194,The same happens for Bob when he signs in.
12195,"Now, when Alice wants to call Bob, sheinforms her super peer, who in turn informs Bob’s super peer, who in turn informs Bob of Alice’sincoming call."
12196,"If Bob accepts the call, the two super peers select a third non-NATed super peer—therelay peer—whose job will be to relay data between Alice and Bob."
12197,"Alice’s and Bob’s super peers then
instruct Alice and Bob respectively to initiate a session with the relay."
12198,"As shown in Figure 9.7, Alice then
sends voice packets to the relay over the Alice-to-relay connection (which was initiated by Alice), and
the relay then forwards these packets over the relay-to-Bob connection (which was initiated by Bob);
packets from Bob to Alice flow over these same two relay connections in reverse."
12199,"And voila!—Bob and
Alice have an end-to-end connection even though neither can accept a session originating from outside."
12200,"Up to now, our discussion on Skype has focused on calls involving two persons."
12201,"Now let’s examine
multi-party audio conference calls."
12202,"With  participants, if each user were to send a copy of its audio
stream to each of the  other users, then a total of  audio streams would need to be sent into
the network to support the audio conference."
12203,"To reduce this bandwidth usage, Skype employs a clever
distribution technique."
12204,"Specifically, each user sends its audio stream to the conference initiator."
12205,"The
conference initiator combines the audio streams into one stream (basically by adding all the audiosignals together) and then sends a copy of each combined stream to each of the other  participants."
12206,"In this manner, the number of streams is reduced to  For ordinary two-person video
conversations, Skype routes the call peer-to-peer, unless NAT traversal is required, in which case thecall is relayed through a non-NATed peer, as described earlier."
12207,"For a video conference call involving
 participants, due to the nature of the video medium, Skype does not combine the call into oneN>2
N−1 N(N−1)
N−1
2(N−1)."
12208,"N>2stream at one location and then redistribute the stream to all the participants, as it does for voice calls."
12209,"Instead, each participant’s video stream is routed to a server cluster (located in Estonia as of 2011),
which in turn relays to each participant the  streams of the  other participants [Zhang X 2012]."
12210,You may be wondering why each participant sends a copy to a server rather than directly sending acopy of its video stream to each of the other  participants?
12211,"Indeed, for both approaches, 
video streams are being collectively received by the N participants in the conference."
12212,"The reason is,
because upstream link bandwidths are significantly lower than downstream link bandwidths in mostaccess links, the upstream links may not be able to support the  streams with the P2P approach."
12213,"VoIP systems such as Skype, WeChat, and Google Talk introduce new privacy concerns."
12214,"Specifically,when Alice and Bob communicate over VoIP, Alice can sniff Bob’s IP address and then use geo-location
services [MaxMind 2016; Quova 2016] to determine Bob’s current location and ISP (for example, his
work or home ISP)."
12215,"In fact, with Skype it is possible for Alice to block the transmission of certain packets
during call establishment so that she obtains Bob’s current IP address, say every hour, without Bob
knowing that he is being tracked and without being on Bob’s contact list."
12216,"Furthermore, the IP address
discovered from Skype can be correlated with IP addresses found in BitTorrent, so that Alice can
determine the files that Bob is downloading [LeBlond 2011]."
12217,"Moreover, it is possible to partially decrypt
a Skype call by doing a traffic analysis of the packet sizes in a stream [White 2011].N−1 N−1
N−1 N(N−1)
N−19.4 Protocols for Real-Time Conversational Applications
Real-time conversational applications, including VoIP and video conferencing, are compelling and very
popular."
12218,"It is therefore not surprising that standards bodies, such as the IETF and ITU, have been busyfor many years (and continue to be busy!) at hammering out standards for this class of applications.With the appropriate standards in place for real-time conversational applications, independentcompanies are creating new products that interoperate with each other."
12219,"In this section we examine RTP
and SIP for real-time conversational applications."
12220,"Both standards are enjoying widespread
implementation in industry products."
12221,"9.4.1 RTP
In the previous section, we learned that the sender side of a VoIP application appends header fields tothe audio chunks before passing them to the transport layer."
12222,These header fields include sequencenumbers and timestamps.
12223,"Since most multimedia networking applications can make use of sequencenumbers and timestamps, it is convenient to have a standardized packet structure that includes fields foraudio/video data, sequence number, and timestamp, as well as other potentially useful fields."
12224,"RTP,
defined in RFC 3550, is such a standard."
12225,"RTP can be used for transporting common formats such as
PCM, ACC, and MP3 for sound and MPEG and H.263 for video."
12226,It can also be used for transportingproprietary sound and video formats.
12227,"Today, RTP enjoys widespread implementation in many productsand research prototypes."
12228,"It is also complementary to other important real-time interactive protocols,such as SIP."
12229,"In this section, we provide an introduction to RTP."
12230,"We also encourage you to visit Henning Schulzrinne’s
RTP site [Schulzrinne-RTP 2012], which provides a wealth of information on the subject."
12231,"Also, you may
want to visit the RAT site [RAT 2012], which documents VoIP application that uses RTP."
12232,"RTP Basics
RTP typically runs on top of UDP."
12233,"The sending side encapsulates a media chunk within an RTP packet,
then encapsulates the packet in a UDP segment, and then hands the segment to IP."
12234,"The receiving side
extracts the RTP packet from the UDP segment, then extracts the media chunk from the RTP packet,and then passes the chunk to the media player for decoding and rendering."
12235,"As an example, consider the use of RTP to transport voice."
12236,"Suppose the voice source is PCM-encoded(that is, sampled, quantized, and digitized) at 64 kbps."
12237,"Further suppose that the application collects the
encoded data in 20-msec chunks, that is, 160 bytes in a chunk."
12238,"The sending side precedes each chunk
of the audio data with an RTP header that includes the type of audio encoding, a sequence number,
and a timestamp."
12239,The RTP header is normally 12 bytes.
12240,The audio chunk along with the RTP headerform the RTP packet.
12241,The RTP packet is then sent into the UDP socket interface.
12242,"At the receiver side,the application receives the RTP packet from its socket interface."
12243,"The application extracts the audio
chunk from the RTP packet and uses the header fields of the RTP packet to properly decode and play
back the audio chunk."
12244,"If an application incorporates RTP—instead of a proprietary scheme to provide payload type, sequence
numbers, or timestamps—then the application will more easily interoperate with other networkedmultimedia applications."
12245,"For example, if two different companies develop VoIP software and they bothincorporate RTP into their product, there may be some hope that a user using one of the VoIP products
will be able to communicate with a user using the other VoIP product."
12246,"In Section 9.4.2, we’ll see that
RTP is often used in conjunction with SIP, an important standard for Internet telephony."
12247,"It should be emphasized that RTP does not provide any mechanism to ensure timely delivery of data or
provide other quality-of-service (QoS) guarantees; it does not even guarantee delivery of packets orprevent out-of-order delivery of packets."
12248,"Indeed, RTP encapsulation is seen only at the end systems.Routers do not distinguish between IP datagrams that carry RTP packets and IP datagrams that don’t."
12249,"RTP allows each source (for example, a camera or a microphone) to be assigned its own independent
RTP stream of packets."
12250,"For example, for a video conference between two participants, four RTP
streams could be opened—two streams for transmitting the audio (one in each direction) and two
streams for transmitting the video (again, one in each direction)."
12251,"However, many popular encodingtechniques—including MPEG 1 and MPEG 2—bundle the audio and video into a single stream duringthe encoding process."
12252,"When the audio and video are bundled by the encoder, then only one RTPstream is generated in each direction."
12253,RTP packets are not limited to unicast applications.
12254,"They can also be sent over one-to-many and many-
to-many multicast trees."
12255,"For a many-to-many multicast session, all of the session’s senders and sources
typically use the same multicast group for sending their RTP streams."
12256,"RTP multicast streams belonging
together, such as audio and video streams emanating from multiple senders in a video conferenceapplication, belong to an RTP session."
12257,"Figure 9.8 RTP header fieldsRTP Packet Header Fields
As shown in Figure 9.8, the four main RTP packet header fields are the payload type, sequence
number, timestamp, and source identifier fields."
12258,The payload type field in the RTP packet is 7 bits long.
12259,"For an audio stream, the payload type field is
used to indicate the type of audio encoding (for example, PCM, adaptive delta modulation, linear
predictive encoding) that is being used."
12260,"If a sender decides to change the encoding in the middle of asession, the sender can inform the receiver of the change through this payload type field."
12261,"The sendermay want to change the encoding in order to increase the audio quality or to decrease the RTP stream
bit rate."
12262,Table 9.2 lists some of the audio payload types currently supported by RTP.
12263,"For a video stream, the payload type is used to indicate the type of video encoding (for example, motion
JPEG, MPEG 1, MPEG 2, H.261)."
12264,"Again, the sender can change video encoding on the fly during a
session."
12265,Table 9.3 lists some of the video payload types currently supported by RTP.
12266,"The other
important fields are the following:
Sequence number field."
12267, The sequence number field is 16 bits long.
12268,"The sequence number
increments by one for each RTP packet sent, and may be used by the receiver to detect packet loss
and to restore packet sequence."
12269,"For example, if the receiver side of the application receives astream of RTP packets with a gap between sequence numbers 86 and 89, then the receiver knows
that packets 87 and 88 are missing."
12270,The receiver can then attempt to conceal the lost data.
12271,Timestamp field.
12272,The timestamp field is 32 bits long.
12273,"It reflects the sampling instant of the first byte
in the RTP data packet."
12274,"As we saw in the preceding section, the receiver can use timestamps to
remove packet jitter introduced in the network and to provide synchronous playout at the receiver.The timestamp is derived from a sampling clock at the sender."
12275,"As an example, for audio the
timestamp clock increments by one for each sampling period (for example, each 125 μsec for an 8
kHz sampling clock); if the audio application generates chunks consisting of 160 encoded samples,
then the timestamp increases by 160 for each RTP packet when the source is active."
12276,The timestampclock continues to increase at a constant rate even if the source is inactive.
12277,Synchronization source identifier (SSRC).
12278, The SSRC field is 32 bits long.
12279,"It identifies the source
of the RTP stream."
12280,"Typically, each stream in an RTP session has a distinct SSRC."
12281,"The SSRC is notthe IP address of the sender, but instead is a number that the source assigns randomly when thenew stream is started."
12282,The probability that two streams get assigned the same SSRC is very small.
12283,"Should this happen, the two sources pick a new SSRC value."
12284,"Table 9.2 Audio payload types supported by RTP
Payload-Type Number Audio Format Sampling Rate Rate
0 PCM μ-law 8 kHz 64 kbps1 1016 8 kHz 4.8 kbps
3 GSM 8 kHz 13 kbps
7 LPC 8 kHz 2.4 kbps
9 G.722 16 kHz 48–64 kbps
14 MPEG Audio 90 kHz —
15 G.728 8 kHz 16 kbps
Table 9.3 Some video payload types supported by RTP
Payload-Type Number Video Format
26 Motion JPEG
31 H.261
32 MPEG 1 video
33 MPEG 2 video
9.4.2 SIP
The Session Initiation Protocol (SIP), defined in [RFC 3261 ; RFC 5411] , is an open and lightweight
protocol that does the following:
It provides mechanisms for establishing calls between a caller and a callee over an IP network."
12285,"It
allows the caller to notify the callee that it wants to start a call."
12286,"It allows the participants to agree on
media encodings."
12287,It also allows participants to end calls.
12288,It provides mechanisms for the caller to determine the current IP address of the callee.
12289,"Users do not
have a single, fixed IP address because they may be assigned addresses dynamically (using DHCP)
and because they may have multiple IP devices, each with a different IP address."
12290,"It provides mechanisms for call management, such as adding new media streams during the call,changing the encoding during the call, inviting new participants during the call, call transfer, and call
holding."
12291,"Setting Up a Call to a Known IP Address
To understand the essence of SIP, it is best to take a look at a concrete example."
12292,"In this example, Alice
is at her PC and she wants to call Bob, who is also working at his PC."
12293,"Alice’s and Bob’s PCs are both
equipped with SIP-based software for making and receiving phone calls."
12294,"In this initial example, we’ll
assume that Alice knows the IP address of Bob’s PC."
12295,"Figure 9.9 illustrates the SIP call-establishment
process."
12296,"In Figure 9.9, we see that an SIP session begins when Alice sends Bob an INVITE message, which
resembles an HTTP request message."
12297,"This INVITE message is sent over UDP to the well-known port
5060 for SIP."
12298,"(SIP messages can also be sent over TCP.) The INVITE message includes an identifierfor Bob (bob@193.64.210.89), an indication of Alice’s current IP address, an indication that Alice
desires to receive audio, which is to be encoded in format AVP 0 (PCM encoded μ-law) and
Figure 9.9 SIP call establishment when Alice knows Bob’s IP address
encapsulated in RTP, and an indication that she wants to receive the RTP packets on port 38060."
12299,"After
receiving Alice’s INVITE message, Bob sends an SIP response message, which resembles an HTTP
response message."
12300,This response SIP message is also sent to the SIP port 5060.
12301,"Bob’s responseincludes a 200 OK as well as an indication of his IP address, his desired encoding and packetization forreception, and his port number to which the audio packets should be sent."
12302,Note that in this exampleAlice and Bob are going to use different audio-encoding mechanisms: Alice is asked to encode heraudio with GSM whereas Bob is asked to encode his audio with PCM μ-law.
12303,"After receiving Bob’s
response, Alice sends Bob an SIP acknowledgment message."
12304,"After this SIP transaction, Bob and Alice
can talk."
12305,"(For visual convenience, Figure 9.9 shows Alice talking after Bob, but in truth they would
normally talk at the same time.) Bob will encode and packetize the audio as requested and send the
audio packets to port number 38060 at IP address 167.180.112.24."
12306,"Alice will also encode and packetize
the audio as requested and send the audio packets to port number 48753 at IP address 193.64.210.89."
12307,"From this simple example, we have learned a number of key characteristics of SIP."
12308,"First, SIP is an out-
of-band protocol: The SIP messages are sent and received in sockets that are different from those usedfor sending and receiving the media data."
12309,"Second, the SIP messages themselves are ASCII-readableand resemble HTTP messages."
12310,"Third, SIP requires all messages to be acknowledged, so it can runover UDP or TCP."
12311,"In this example, let’s consider what would happen if Bob does not have a PCM μ-law codec for encoding
audio."
12312,"In this case, instead of responding with 200 OK, Bob would likely respond with a 606 Not
Acceptable and list in the message all the codecs he can use."
12313,"Alice would then choose one of the listedcodecs and send another INVITE message, this time advertising the chosen codec."
12314,Bob could alsosimply reject the call by sending one of many possible rejection reply codes.
12315,"(There are many suchcodes, including “busy,” “gone,” “payment required,” and “forbidden.”)
SIP Addresses
In the previous example, Bob’s SIP address is sip:bob@193.64.210.89."
12316,"However, we expect many—if
not most—SIP addresses to resemble e-mail addresses."
12317,"For example, Bob’s address might be
sip:bob@domain.com ."
12318,"When Alice’s SIP device sends an INVITE message, the message would
include this e-mail-like address; the SIP infrastructure would then route the message to the IP device
that Bob is currently using (as we’ll discuss below)."
12319,Other possible forms for the SIP address could beBob’s legacy phone number or simply Bob’s first/middle/last name (assuming it is unique).
12320,"An interesting feature of SIP addresses is that they can be included in Web pages, just as people’s e-
mail addresses are included in Web pages with the mailto URL."
12321,"For example, suppose Bob has apersonal homepage, and he wants to provide a means for visitors to the homepage to call him."
12322,"He could
then simply include the URL sip:bob@domain.com ."
12323,"When the visitor clicks on the URL, the SIP
application in the visitor’s device is launched and an INVITE message is sent to Bob."
12324,"SIP Messages
In this short introduction to SIP, we’ll not cover all SIP message types and headers."
12325,"Instead, we’ll take a
brief look at the SIP INVITE message, along with a few common header lines."
12326,"Let us again suppose thatAlice wants to initiate a VoIP call to Bob, and this time Alice knows only Bob’s SIP address,
bob@domain.com , and does not know the IP address of the device that Bob is currently using."
12327,"Then
her message might look something like this:
INVITE sip:bob@domain.com  SIP/2.0
Via: SIP/2.0/UDP 167.180.112.24
From: sip:alice@hereway.com
To: sip:bob@domain.com
Call-ID: a2e3a@pigeon.hereway.com
Content-Type: application/sdp
Content-Length: 885
c=IN IP4 167.180.112.24
m=audio 38060 RTP/AVP 0
The INVITE line includes the SIP version, as does an HTTP request message."
12328,"Whenever an SIPmessage passes through an SIP device (including the device that originates the message), it attaches aVia header, which indicates the IP address of the device."
12329,"(We’ll see soon that the typical INVITEmessage passes through many SIP devices before reaching the callee’s SIP application.) Similar to ane-mail message, the SIP message includes a From header line and a To header line."
12330,"The message
includes a Call-ID, which uniquely identifies the call (similar to the message-ID in e-mail)."
12331,"It includes a
Content-Type header line, which defines the format used to describe the content contained in the SIPmessage."
12332,"It also includes a Content-Length header line, which provides the length in bytes of thecontent in the message."
12333,"Finally, after a carriage return and line feed, the message contains the content.In this case, the content provides information about Alice’s IP address and how Alice wants to receivethe audio."
12334,"Name Translation and User Location
In the example in Figure 9.9, we assumed that Alice’s SIP device knew the IP address where Bob couldbe contacted."
12335,"But this assumption is quite unrealistic, not only because IP addresses are often
dynamically assigned with DHCP, but also because Bob may have multiple IP devices (for example,
different devices for his home, work, and car)."
12336,"So now let us suppose that Alice knows only Bob’s e-mail
address, bob@domain.com , and that this same address is used for SIP-based calls."
12337,"In this case, Alice
needs to obtain the IP address of the device that the user bob@domain.com  is currently using."
12338,"To find
this out, Alice creates an INVITE message that begins with INVITE bob@domain.com  SIP/2.0 and
sends this message to an SIP proxy."
12339,"The proxy will respond with an SIP reply that might include the IP
address of the device that bob@domain.com  is currently using."
12340,"Alternatively, the reply might include
the IP address of Bob’s voicemail box, or it might include a URL of a Web page (that says “Bob is
sleeping."
12341,Leave me alone!”).
12342,"Also, the result returned by the proxy might depend on the caller: If the callis from Bob’s wife, he might accept the call and supply his IP address; if the call is from Bob’s mother-in-law, he might respond with the URL that points to the I-am-sleeping Web page!
Now, you are probably wondering, how can the proxy server determine the current IP address for
bob@domain.com ?"
12343,"To answer this question, we need to say a few words about another SIP device,
the SIP registrar."
12344,Every SIP user has an associated registrar.
12345,"Whenever a user launches an SIP
application on a device, the application sends an SIP register message to the registrar, informing theregistrar of its current IP address."
12346,"For example, when Bob launches his SIP application on his PDA, theapplication would send a message along the lines of:
REGISTER sip:domain.com SIP/2.0
Via: SIP/2.0/UDP 193.64.210.89
From: sip:bob@domain.com
To: sip:bob@domain.com
Expires: 3600
Bob’s registrar keeps track of Bob’s current IP address."
12347,"Whenever Bob switches to a new SIP device,
the new device sends a new register message, indicating the new IP address."
12348,"Also, if Bob remains atthe same device for an extended period of time, the device will send refresh register messages,indicating that the most recently sent IP address is still valid."
12349,"(In the example above, refresh messagesneed to be sent every 3600 seconds to maintain the address at the registrar server.) It is worth noting
that the registrar is analogous to a DNS authoritative name server: The DNS server translates fixed host
names to fixed IP addresses; the SIP registrar translates fixed human identifiers (for example,
bob@domain.com ) to dynamic IP addresses."
12350,"Often SIP registrars and SIP proxies are run on the same
host."
12351,Now let’s examine how Alice’s SIP proxy server obtains Bob’s current IP address.
12352,"From the preceding
discussion we see that the proxy server simply needs to forward Alice’s INVITE message to Bob’s
registrar/proxy."
12353,The registrar/proxy could then forward the message to Bob’s current SIP device.
12354,"Finally,Bob, having now received Alice’s INVITE message, could send an SIP response to Alice."
12355,"As an example, consider Figure 9.10, in which jim@umass.edu, currently working on 217.123.56.89,
wants to initiate a Voice-over-IP (VoIP) session with keith@upenn.edu , currently working on
197.87.54.21."
12356,"The following steps are taken:
Figure 9.10 Session initiation, involving SIP proxies and registrars
(1) Jim sends an INVITE message to the umass SIP proxy."
12357,"(2) The proxy does a DNS lookup on the
SIP registrar upenn.edu (not shown in diagram) and then forwards the message to the registrar server."
12358,"(3) Because keith@upenn.edu  is no longer registered at the upenn registrar, the upenn registrar sends
a redirect response, indicating that it should try keith@nyu.edu."
12359,"(4) The umass proxy sends an INVITE
message to the NYU SIP registrar."
12360,"(5) The NYU registrar knows the IP address of keith@upenn.edu
and forwards the INVITE message to the host 197.87.54.21, which is running Keith’s SIP client."
12361,"(6–8)
An SIP response is sent back through registrars/proxies to the SIP client on 217.123.56.89."
12362,(9) Media issent directly between the two clients.
12363,"(There is also an SIP acknowledgment message, which is notshown.)
Our discussion of SIP has focused on call initiation for voice calls."
12364,"SIP, being a signaling protocol for
initiating and ending calls in general, can be used for video conference calls as well as for text-basedsessions."
12365,"In fact, SIP has become a fundamental component in many instant messaging applications."
12366,"Readers desiring to learn more about SIP are encouraged to visit Henning Schulzrinne’s SIP Web site
[Schulzrinne-SIP 2016]."
12367,"In particular, on this site you will find open source software for SIP clients and
servers [SIP Software 2016].9.5 Network Support for Multimedia
In Sections 9.2 through 9.4, we learned how application-level mechanisms such as client buffering,
prefetching, adapting media quality to available bandwidth, adaptive playout, and loss mitigation
techniques can be used by multimedia applications to improve a multimedia application’s performance.We also learned how content distribution networks and P2P overlay networks can be used to provide a
system-level  approach for delivering multimedia content."
12368,"These techniques and approaches are all
designed to be used in today’s best-effort Internet."
12369,"Indeed, they are in use today precisely because the
Internet provides only a single, best-effort class of service."
12370,"But as designers of computer networks, we
can’t help but ask whether the network (rather than the applications or application-level infrastructure
alone) might provide mechanisms to support multimedia content delivery."
12371,"As we’ll see shortly, the
answer is, of course, “yes”! But we’ll also see that a number of these new network-level mechanismshave yet to be widely deployed."
12372,"This may be due to their complexity and to the fact that application-leveltechniques together with best-effort service and properly dimensioned network resources (for example,bandwidth) can indeed provide a “good-enough” (even if not-always-perfect) end-to-end multimedia
delivery service."
12373,"Table 9.4 summarizes three broad approaches towards providing network-level support for multimedia
applications."
12374,Making the best of best-effort service.
12375,"The application-level mechanisms and infrastructure that
we studied in Sections 9.2 through 9.4 can be successfully used in a well-dimensioned network
where packet loss and excessive end-to-end delay rarely occur."
12376,"When demand increases areforecasted, the ISPs deploy additional bandwidth and switching capacity to continue to ensure
satisfactory delay and packet-loss performance [Huang 2005]."
12377,"We’ll discuss such network
dimensioning  further in Section 9.5.1.
Differentiated service."
12378," Since the early days of the Internet, it’s been envisioned that different types
of traffic (for example, as indicated in the Type-of-Service field in the IP4v packet header) could be
provided with different classes of service, rather than a single one-size-fits-all best-effort service.With differentiated service , one type of traffic might be given strict priority over another class of
traffic when both types of traffic are queued at a router."
12379,"For example, packets belonging to a real-time conversational application might be given priority over other packets due to their stringent delayconstraints."
12380,"Introducing differentiated service into the network will require new mechanisms forpacket marking (indicating a packet’s class of service), packet scheduling, and more."
12381,"We’ll cover
differentiated service, and new network mechanisms needed to implement this service, in Sections
9.5.2 and 9.5.3.Table 9.4 Three network-level approaches to supporting multimedia applications
Approach Granularity Guarantee Mechanisms Complexity Deployment
to date
Making the
best of best-
effort serviceall traffic
treated
equallynone, or
softapplication-layersupport, CDNs,
overlays, network-level resourceprovisioningminimal everywhere
Differentiatedservicedifferentclasses oftraffic
treated
differentlynone, orsoftpacket marking,policing,schedulingmedium some
Per-connectionQuality-of-Service (QoS)Guaranteeseachsource-destinationflows treateddifferentlysoft orhard, onceflow isadmittedpacket marking,policing,scheduling; calladmission andsignalinglight little
Per-connection Quality-of-Service (QoS) Guarantees."
12382," With per-connection QoS guarantees,
each instance of an application explicitly reserves end-to-end bandwidth and thus has a guaranteedend-to-end performance."
12383,"A hard guarantee means the application will receive its requested quality
of service (QoS) with certainty."
12384,"A soft guarantee means the application will receive its requested
quality of service with high probability."
12385,"For example, if a user wants to make a VoIP call from Host A
to Host B, the user’s VoIP application reserves bandwidth explicitly in each link along a routebetween the two hosts."
12386,But permitting applications to make reservations and requiring the network tohonor the reservations requires some big changes.
12387,"First, we need a protocol that, on behalf of theapplications, reserves link bandwidth on the paths from the senders to their receivers."
12388,"Second, we’llneed new scheduling policies in the router queues so that per-connection bandwidth reservationscan be honored."
12389,"Finally, in order to make a reservation, the applications must give the network adescription of the traffic that they intend to send into the network and the network will need to policeeach application’s traffic to make sure that it abides by that description."
12390,"These mechanisms, when
combined, require new and complex software in hosts and routers."
12391,"Because per-connection QoS
guaranteed service has not seen significant deployment, we’ll cover these mechanisms only briefly
in Section 9.5.4.9.5.1 Dimensioning Best-Effort Networks
Fundamentally, the difficulty in supporting multimedia applications arises from their stringent
performance requirements—low end-to-end packet delay, delay jitter, and loss—and the fact that packetdelay, delay jitter, and loss occur whenever the network becomes congested."
12392,"A first approach toimproving the quality of multimedia applications—an approach that can often be used to solve just aboutany problem where resources are constrained—is simply to “throw money at the problem” and thus
simply avoid resource contention."
12393,"In the case of networked multimedia, this means providing enough
link capacity throughout the network so that network congestion, and its consequent packet delay andloss, never (or only very rarely) occurs."
12394,"With enough link capacity, packets could zip through today’sInternet without queuing delay or loss."
12395,"From many perspectives this is an ideal situation—multimediaapplications would perform perfectly, users would be happy, and this could all be achieved with nochanges to Internet’s best-effort architecture."
12396,"The question, of course, is how much capacity is “enough” to achieve this nirvana, and whether the
costs of providing “enough” bandwidth are practical from a business standpoint to the ISPs. The
question of how much capacity to provide at network links in a given topology to achieve a given level ofperformance is often known as bandwidth provisioning ."
12397,"The even more complicated problem of how
to design a network topology (where to place routers, how to interconnect routers with links, and whatcapacity to assign to links) to achieve a given level of end-to-end performance is a network designproblem often referred to as network dimensioning ."
12398,"Both bandwidth provisioning and network
dimensioning are complex topics, well beyond the scope of this textbook."
12399,"We note here, however, thatthe following issues must be addressed in order to predict application-level performance between twonetwork end points, and thus provision enough capacity to meet an application’s performance
requirements."
12400,Models of traffic demand between network end points.
12401," Models may need to be specified at both
the call level (for example, users “arriving” to the network and starting up end-to-end applications)
and at the packet level (for example, packets being generated by ongoing applications)."
12402,Note thatworkload may change over time.
12403,Well-defined performance requirements.
12404,"For example, a performance requirement for supporting
delay-sensitive traffic, such as a conversational multimedia application, might be that the probability
that the end-to-end delay of the packet is greater than a maximum tolerable delay be less than some
small value [Fraleigh 2003]."
12405,"Models to predict end-to-end performance for a given workload model, and techniques to find
a minimal cost bandwidth allocation that will result in all user requirements being met."
12406,"Here,
researchers are busy developing performance models that can quantify performance for a givenworkload, and optimization techniques to find minimal-cost bandwidth allocations meeting
performance requirements.Given that today’s best-effort Internet could (from a technology standpoint) support multimedia traffic at
an appropriate performance level if it were dimensioned to do so, the natural question is why today’sInternet doesn’t do so."
12407,The answers are primarily economic and organizational.
12408,"From an economicstandpoint, would users be willing to pay their ISPs enough for the ISPs to install sufficient bandwidth tosupport multimedia applications over a best-effort Internet?"
12409,"The organizational issues are perhaps even
more daunting."
12410,"Note that an end-to-end path between two multimedia end points will pass through the
networks of multiple ISPs. From an organizational standpoint, would these ISPs be willing to cooperate(perhaps with revenue sharing) to ensure that the end-to-end path is properly dimensioned to support
multimedia applications?"
12411,"For a perspective on these economic and organizational issues, see [Davies
2005] ."
12412,"For a perspective on provisioning tier-1 backbone networks to support delay-sensitive traffic, see
[Fraleigh 2003]."
12413,"9.5.2 Providing Multiple Classes of Service
Perhaps the simplest enhancement to the one-size-fits-all best-effort service in today’s Internet is to
divide traffic into classes, and provide different levels of service to these different classes of traffic."
12414,"Forexample, an ISP might well want to provide a higher class of service to delay-sensitive Voice-over-IP orteleconferencing traffic (and charge more for this service!) than to elastic traffic such as e-mail or HTTP.Alternatively, an ISP may simply want to provide a higher quality of service to customers willing to pay
more for this improved service."
12415,"A number of residential wired-access ISPs and cellular wireless-access
ISPs have adopted such tiered levels of service—with platinum-service subscribers receiving betterperformance than gold- or silver-service subscribers."
12416,"We’re all familiar with different classes of service from our everyday lives—first-class airline passengers
get better service than business-class passengers, who in turn get better service than those of us whofly economy class; VIPs are provided immediate entry to events while everyone else waits in line; eldersare revered in some countries and provided seats of honor and the finest food at a table."
12417,"It’s important
to note that such differential service is provided among aggregates of traffic, that is, among classes of
traffic, not among individual connections."
12418,"For example, all first-class passengers are handled the same(with no first-class passenger receiving any better treatment than any other first-class passenger), justas all VoIP packets would receive the same treatment within the network, independent of the particularend-to-end connection to which they belong."
12419,"As we will see, by dealing with a small number of trafficaggregates, rather than a large number of individual connections, the new network mechanisms
required to provide better-than-best service can be kept relatively simple."
12420,The early Internet designers clearly had this notion of multiple classes of service in mind.
12421,"Recall the
type-of-service (ToS) field in the IPv4 header discussed in Chapter 4."
12422,"IEN123 [ISI 1979] describes the
ToS field also present in an ancestor of the IPv4 datagram as follows: “The Type of Service [field]provides an indication of the abstract parameters of the quality of service desired."
12423,"These parameters are
to be used to guide the selection of the actual service parameters when transmitting a datagram through
a particular network."
12424,"Several networks offer service precedence, which somehow treats highprecedence traffic as more important that other traffic.” More than four decades ago, the vision ofproviding different levels of service to different classes of traffic was clear! However, it’s taken us anequally long period of time to realize this vision."
12425,"Motivating Scenarios
Let’s begin our discussion of network mechanisms for providing multiple classes of service with a few
motivating scenarios."
12426,"Figure 9.11 shows a simple network scenario in which two application packet flows originate on Hosts
H1 and H2 on one LAN and are destined for Hosts H3 and H4 on another LAN."
12427,"The routers on the two
LANs are connected by a 1.5 Mbps link."
12428,"Let’s assume the LAN speeds are significantly higher than 1.5
Mbps, and focus on the output queue of router R1; it is here that packet delay and packet loss will occur
if the aggregate sending rate of H1 and H2 exceeds 1.5 Mbps."
12429,"Let’s further suppose that a 1 Mbpsaudio application (for example, a CD-quality audio call) shares the
Figure 9.11 Competing audio and HTTP applications
1.5 Mbps link between R1 and R2 with an HTTP Web-browsing application that is downloading a Web
page from H2 to H4."
12430,"In the best-effort Internet, the audio and HTTP packets are mixed in the output queue at R1 and
(typically) transmitted in a first-in-first-out (FIFO) order."
12431,"In this scenario, a burst of packets from the Webserver could potentially fill up the queue, causing IP audio packets to be excessively delayed or lost due
to buffer overflow at R1."
12432,How should we solve this potential problem?
12433,"Given that the HTTP Web-
browsing application does not have time constraints, our intuition might be to give strict priority to audiopackets at R1."
12434,"Under a strict priority scheduling discipline, an audio packet in the R1 output buffer wouldalways be transmitted before any HTTP packet in the R1 output buffer."
12435,"The link from R1 to R2 wouldlook like a dedicated link of 1.5 Mbps to the audio traffic, with HTTP traffic using the R1-to-R2 link only
when no audio traffic is queued."
12436,"In order for R1 to distinguish between the audio and HTTP packets in
its queue, each packet must be marked as belonging to one of these two classes of traffic."
12437,This was theoriginal goal of the type-of-service (ToS) field in IPv4.
12438,"As obvious as this might seem, this then is ourfirst insight into mechanisms needed to provide multiple classes of traffic:
Insight 1: Packet marking allows a router to distinguish among packets belonging to different classes
of traffic."
12439,"Note that although our example considers a competing multimedia and elastic flow, the same insight
applies to the case that platinum, gold, and silver classes of service are implemented—a packet-marking mechanism is still needed to indicate that class of service to which a packet belongs."
12440,"Now suppose that the router is configured to give priority to packets marked as belonging to the 1 Mbps
audio application."
12441,"Since the outgoing link speed is 1.5 Mbps, even though the HTTP packets receivelower priority, they can still, on average, receive 0.5 Mbps of transmission service."
12442,But what happens ifthe audio application starts sending packets at a rate of 1.5 Mbps or higher (either maliciously or due toan error in the application)?
12443,"In this case, the HTTP packets will starve, that is, they will not receive any
service on the R1-to-R2 link."
12444,"Similar problems would occur if multiple applications (for example, multiple
audio calls), all with the same class of service as the audio application, were sharing the link’sbandwidth; they too could collectively starve the FTP session."
12445,"Ideally, one wants a degree of isolationamong classes of traffic so that one class of traffic can be protected from the other."
12446,"This protection couldbe implemented at different places in the network—at each and every router, at first entry to thenetwork, or at inter-domain network boundaries."
12447,"This then is our second insight:
Insight 2:  It is desirable to provide a degree of traffic isolation  among classes so that one class is not
adversely affected by another class of traffic that misbehaves."
12448,We’ll examine several specific mechanisms for providing such isolation among traffic classes.
12449,"We note
here that two broad approaches can be taken."
12450,"First, it is possible to perform traffic policing , as shown
in Figure 9.12."
12451,"If a traffic class or flow must meet certain criteria (for example, that the audio flow not
exceed a peak rate of 1 Mbps), then a policing mechanism can be put into place to ensure that these
criteria are indeed observed."
12452,"If the policed application misbehaves, the policing mechanism will takesome action (for example, drop or delay packets that are in violation of the criteria) so that the trafficactually entering the network conforms to the criteria."
12453,The leaky bucket mechanism that we’ll examineshortly is perhaps the most widely used policing mechanism.
12454,"In Figure 9.12, the packet classification
and marking mechanism (Insight 1) and the policing mechanism (Insight 2) are both implemented
together at the network’s edge, either in the end system or at an edge router."
12455,"A complementary approach for providing isolation among traffic classes is for the link-level packet-
scheduling mechanism to explicitly allocate a fixed amount of link bandwidth to each class."
12456,"For example,
the audio class could be allocated 1 Mbps at R1, and the HTTP class could be allocated 0.5 Mbps."
12457,"In
this case, the audio and
Figure 9.12 Policing (and marking) the audio and HTTP traffic classesFigure 9.13 Logical isolation of audio and HTTP traffic classes
HTTP flows see a logical link with capacity 1.0 and 0.5 Mbps, respectively, as shown in Figure 9.13."
12458,"With strict enforcement of the link-level allocation of bandwidth, a class can use only the amount of
bandwidth that has been allocated; in particular, it cannot utilize bandwidth that is not currently beingused by others."
12459,"For example, if the audio flow goes silent (for example, if the speaker pauses andgenerates no audio packets), the HTTP flow would still not be able to transmit more than 0.5 Mbps overthe R1-to-R2 link, even though the audio flow’s 1 Mbps bandwidth allocation is not being used at thatmoment."
12460,"Since bandwidth is a “use-it-or-lose-it” resource, there is no reason to prevent HTTP trafficfrom using bandwidth not used by the audio traffic."
12461,"We’d like to use bandwidth as efficiently as possible,never wasting it when it could be otherwise used."
12462,"This gives rise to our third insight:
Insight 3:  While providing isolation among classes or flows, it is desirable to use resources (for
example, link bandwidth and buffers) as efficiently as possible."
12463,"Recall from our discussion in Sections 1.3 and 4.2 that packets belonging to various network flows are
multiplexed and queued for transmission at the output buffers associated with a link."
12464,"The manner in
which queued packets are selected for transmission on the link is known as the link-scheduling
discipline , and was discussed in detail in Section 4.2. Recall that in Section 4.2 three link-scheduling
disciplines were discussed, namely, FIFO, priority queuing, and Weighted Fair Queuing (WFQ)."
12465,"We’ll
see soon see that WFQ will play a particularly important role for isolating the traffic classes."
12466,"The Leaky Bucket
One of our earlier insights was that policing, the regulation of the rate at which a class or flow (we will
assume the unit of policing is a flow in our discussion below) is allowed to inject packets into thenetwork, is an important QoS mechanism."
12467,But what aspects of a flow’s packet rate should be policed?
12468,"We can identify three important policing criteria, each differing from the other according to the time scale
over which the packet flow is policed:
Average rate."
12469," The network may wish to limit the long-term average rate (packets per time interval)
at which a flow’s packets can be sent into the network."
12470,A crucial issue here is the interval of timeover which the average rate will be policed.
12471,"A flow whose average rate is limited to 100 packets persecond is more constrained than a source that is limited to 6,000 packets per minute, even though
both have the same average rate over a long enough interval of time."
12472,"For example, the latter
constraint would allow a flow to send 1,000 packets in a given second-long interval of time, while theformer constraint would disallow this sending behavior."
12473,Peak rate.
12474," While the average-rate constraint limits the amount of traffic that can be sent into the
network over a relatively long period of time, a peak-rate constraint limits the maximum number ofpackets that can be sent over a shorter period of time."
12475,"Using our example above, the network maypolice a flow at an average rate of 6,000 packets per minute, while limiting the flow’s peak rate to
1,500 packets per second."
12476,Burst size.
12477,"The network may also wish to limit the maximum number of packets (the “burst” of
packets) that can be sent into the network over an extremely short interval of time."
12478,"In the limit, as the
interval length approaches zero, the burst size limits the number of packets that can beinstantaneously sent into the network."
12479,"Even though it is physically impossible to instantaneously
send multiple packets into the network (after all, every link has a physical transmission rate that
cannot be exceeded!), the abstraction of a maximum burst size is a useful one."
12480,The leaky bucket mechanism is an abstraction that can be used to characterize these policing limits.
12481,"As
shown in Figure 9.14, a leaky bucket consists of a bucket that can hold up to b tokens."
12482,"Tokens are
added to this bucket as follows."
12483,"New tokens, which may potentially be added to the bucket, are alwaysbeing generated at a rate of r tokens per second."
12484,"(We assume here for simplicity that the unit of time is
a second.) If the bucket is filled with less than b tokens when a token is generated, the newly generated
token is added to the bucket; otherwise the newly generated token is ignored, and the token bucket
remains full with b tokens."
12485,Let us now consider how the leaky bucket can be used to police a packet flow.
12486,"Suppose that before a
packet is transmitted into the network, it must first remove a token from the token bucket."
12487,"If the tokenbucket is empty, the packet must wait forFigure 9.14 The leaky bucket policer
a token."
12488,"(An alternative is for the packet to be dropped, although we will not consider that option here.)
Let us now consider how this behavior polices a traffic flow."
12489,"Because there can be at most b tokens in
the bucket, the maximum burst size for a leaky-bucket-policed flow is b packets."
12490,"Furthermore, because
the token generation rate is r, the maximum number of packets that can enter the network of any interval
of time of length t is  Thus, the token-generation rate, r, serves to limit the long-term average rate at
which packets can enter the network."
12491,"It is also possible to use leaky buckets (specifically, two leaky
buckets in series) to police a flow’s peak rate in addition to the long-term average rate; see thehomework problems at the end of this chapter."
12492,"Leaky Bucket  Weighted Fair Queuing  Provable Maximum Delay in a Queue
Let’s close our discussion on policing by showing how the leaky bucket and WFQ can be combined to
provide a bound on the delay through a router’s queue."
12493,"(Readers who have forgotten about WFQ are
encouraged to review WFQ, which is covered in Section 4.2.) Let’s consider a router’s output link that
multiplexes n flows, each policed by a leaky bucket with parameters b and  using WFQ
scheduling."
12494,"We use the term flow here loosely to refer to the set of packets that are not distinguished
from each other by the scheduler."
12495,"In practice, a flow might be comprised of traffic from a single end-to-end connection or a collection of many such connections, see Figure 9.15."
12496,"Recall from our discussion of WFQ that each flow, i, is guaranteed to receive a share of the link
bandwidth equal to at least  where R is the transmissionrt+b."
12497,"+ =
i ri,i=1,…,n,
R⋅wi/(∑ wj),Figure 9.15 n multiplexed leaky bucket flows with WFQ scheduling
rate of the link in packets/sec."
12498,"What then is the maximum delay that a packet will experience while
waiting for service in the WFQ (that is, after passing through the leaky bucket)?"
12499,Let us focus on flow 1.
12500,Suppose that flow 1’s token bucket is initially full.
12501,"A burst of b packets then arrives to the leaky bucket
policer for flow 1."
12502,These packets remove all of the tokens (without wait) from the leaky bucket and thenjoin the WFQ waiting area for flow 1.
12503,"Since these b packets are served at a rate of at least 
packet/sec, the last of these packets will then have a maximum delay, d, until its transmission is
completed, where
The rationale behind this formula is that if there are b packets in the queue and packets are being
serviced (removed) from the queue at a rate of at least  packets per second, then the
amount of time until the last bit of the last packet is transmitted cannot be more than ."
12504,"A
homework problem asks you to prove that as long as  then d  is indeed the maximum
delay that any packet in flow 1 will ever experience in the WFQ queue."
12505,"9.5.3 Diffserv
Having seen the motivation, insights, and specific mechanisms for providing multiple classes of service,
let’s wrap up our study of approaches toward proving multiple classes of service with an example—the
Internet Diffserv architecture [RFC 2475 ; Kilkki 1999]."
12506,"Diffserv provides service differentiation—that is,
the ability to handle different classes of traffic in different ways within the Internet in a scalable manner.1
1 R⋅wi/(∑ wj)
max
dmax=b1R⋅w1/∑ wj
1
R⋅w1/(∑ wj)
b1/(R⋅w1/(∑ wj))
r1<R⋅w1/(∑ wj),maxThe need for scalability arises from the fact that millions of simultaneous source-destination traffic flows
may be present at a backbone router."
12507,"We’ll see shortly that this need is met by placing only simple
functionality within the network core, with more complex control operations being implemented at thenetwork’s edge."
12508,Let’s begin with the simple network shown in Figure 9.16.
12509,"We’ll describe one possible use of Diffserv
here; other variations are possible, as described in RFC 2475 ."
12510,"The Diffserv architecture consists of two
sets of functional elements:
Edge functions: Packet classification and traffic conditioning."
12511," At the incoming edge of the
network (that is, at either a Diffserv-capable host that generates traffic or at the first Diffserv-capable
router that the traffic passes through), arriving packets are marked."
12512,"More specifically, the
differentiated service (DS) field in the IPv4 or IPv6 packet header is set to some value [RFC 3260] ."
12513,The definition of the DS field is intended to supersede the earlier definitions of the IPv4 type-of-service field and the IPv6 traffic class fields that we discussed in Chapter 4.
12514,"For example, in Figure
9.16, packets being sent from H1 to H3 might be marked at R1, while packets being sent from H2 to
H4 might be marked at R2."
12515,"The mark that a packet receives identifies the class of traffic to which it
belongs."
12516,Different classes of traffic will then receive different service within the core network.
12517,"Figure 9.16 A simple Diffserv network example
Core function: Forwarding."
12518," When a DS-marked packet arrives at a Diffserv-capable router, the
packet is forwarded onto its next hop according to the so-called per-hop behavior (PHB) associatedwith that packet’s class."
12519,"The per-hop behavior influences how a router’s buffers and link bandwidth
are shared among the competing classes of traffic."
12520,"A crucial tenet of the Diffserv architecture is thata router’s per-hop behavior will be based only on packet markings, that is, the class of traffic to
which a packet belongs."
12521,"Thus, if packets being sent from H1 to H3 in Figure 9.16 receive the same
marking as packets being sent from H2 to H4, then the network routers treat these packets as an
aggregate, without distinguishing whether the packets originated at H1 or H2."
12522,"For example, R3would not distinguish between packets from H1 and H2 when forwarding these packets on to R4."
12523,"Thus, the Diffserv architecture obviates the need to keep router state for individual source-
destination pairs—a critical consideration in making Diffserv scalable."
12524,An analogy might prove useful here.
12525,"At many large-scale social events (for example, a large publicreception, a large dance club or discothèque, a concert, or a football game), people entering the eventreceive a pass of one type or another: VIP passes for Very Important People; over-21 passes for peoplewho are 21 years old or older (for example, if alcoholic drinks are to be served); backstage passes atconcerts; press passes for reporters; even an ordinary pass for the Ordinary Person."
12526,"These passes are
typically distributed upon entry to the event, that is, at the edge of the event."
12527,"It is here at the edge where
computationally intensive operations, such as paying for entry, checking for the appropriate type ofinvitation, and matching an invitation against a piece of identification, are performed."
12528,"Furthermore, theremay be a limit on the number of people of a given type that are allowed into an event."
12529,"If there is such alimit, people may have to wait before entering the event."
12530,"Once inside the event, one’s pass allows oneto receive differentiated service at many locations around the event—a VIP is provided with free drinks,a better table, free food, entry to exclusive rooms, and fawning service."
12531,"Conversely, an ordinary personis excluded from certain areas, pays for drinks, and receives only basic service."
12532,"In both cases, theservice received within the event depends solely on the type of one’s pass."
12533,"Moreover, all people within a
class are treated alike."
12534,Figure 9.17 provides a logical view of the classification and marking functions within the edge router.
12535,Packets arriving to the edge router are first classified.
12536,"The classifier selects packets based on the values
of one or more packet header fields (for example, source address, destination address, source port,destination port, and protocol ID) and steers the packet to the appropriate marking function."
12537,"As notedabove, a packet’s marking is carried in the DS field in the packet header."
12538,"In some cases, an end user may have agreed to limit its packet-sending rate to conform to a declared
traffic profile."
12539,"The traffic profile might contain a limit on the peak rate, as well as the burstiness of thepacket flow, as we saw previously with the leaky bucket mechanism."
12540,"As long as the user sends packetsinto the network in a way that conforms to the negotiated traffic profile, the packets receive their priorityFigure 9.17 A simple Diffserv network example
marking and are forwarded along their route to the destination."
12541,"On the other hand, if the traffic profile is
violated, out-of-profile packets might be marked differently, might be shaped (for example, delayed so
that a maximum rate constraint would be observed), or might be dropped at the network edge."
12542,"The role
of the metering function , shown in Figure 9.17, is to compare the incoming packet flow with the
negotiated traffic profile and to determine whether a packet is within the negotiated traffic profile."
12543,"The
actual decision about whether to immediately remark, forward, delay, or drop a packet is a policy issue
determined by the network administrator and is not specified in the Diffserv architecture."
12544,"So far, we have focused on the marking and policing functions in the Diffserv architecture."
12545,"The second
key component of the Diffserv architecture involves the per-hop behavior (PHB) performed by Diffserv-
capable routers."
12546,"PHB is rather cryptically, but carefully, defined as “a description of the externally
observable forwarding behavior of a Diffserv node applied to a particular Diffserv behavior aggregate”
[RFC 2475] ."
12547,"Digging a little deeper into this definition, we can see several important considerations
embedded within:
A PHB can result in different classes of traffic receiving different performance (that is, different
externally observable forwarding behaviors)."
12548,"While a PHB defines differences in performance (behavior) among classes, it does not mandate anyparticular mechanism for achieving these behaviors."
12549,"As long as the externally observable
performance criteria are met, any implementation mechanism and any buffer/bandwidth allocationpolicy can be used."
12550,"For example, a PHB would not require that a particular packet-queuing discipline
(for example, a priority queue versus a WFQ queue versus a FCFS queue) be used to achieve a
particular behavior."
12551,"The PHB is the end, to which resource allocation and implementationmechanisms are the means."
12552,"Differences in performance must be observable and hence measurable.Two PHBs have been defined: an expedited forwarding (EF) PHB [RFC 3246]  and an assured
forwarding (AF) PHB [RFC 2597] ."
12553,"The expedited forwarding  PHB specifies that the departure rate of a
class of traffic from a router must equal or exceed a configured rate."
12554,"The assured forwarding PHB
divides traffic into four classes, where each AF class is guaranteed to be provided with some minimum
amount of bandwidth and buffering."
12555,Let’s close our discussion of Diffserv with a few observations regarding its service model.
12556,"First, we have
implicitly assumed that Diffserv is deployed within a single administrative domain, but typically an end-to-end service must be fashioned from multiple ISPs sitting between communicating end systems."
12557,"Inorder to provide end-to-end Diffserv service, all the ISPs between the end systems must not onlyprovide this service, but most also cooperate and make settlements in order to offer end customers trueend-to-end service."
12558,"Without this kind of cooperation, ISPs directly selling Diffserv service to customerswill find themselves repeatedly saying: “Yes, we know you paid extra, but we don’t have a serviceagreement with the ISP that dropped and delayed your traffic."
12559,"I’m sorry that there were so many gaps in
your VoIP call!” Second, if Diffserv were actually in place and the network ran at only moderate load,
most of the time there would be no perceived difference between a best-effort service and a Diffservservice."
12560,"Indeed, end-to-end delay is usually dominated by access rates and router hops rather than byqueuing delays in the routers."
12561,"Imagine the unhappy Diffserv customer who has paid more for premiumservice but finds that the best-effort service being provided to others almost always has the sameperformance as premium service!
9.5.4 Per-Connection Quality-of-Service (QoS) Guarantees: Resource Reservation and
Call Admission
In the previous section, we have seen that packet marking and policing, traffic isolation, and link-level
scheduling can provide one class of service with better performance than another."
12562,"Under certainscheduling disciplines, such as priority scheduling, the lower classes of traffic are essentially “invisible”to the highest-priority class of traffic."
12563,"With proper network dimensioning, the highest class of service canindeed achieve extremely low packet loss and delay—essentially circuit-like performance."
12564,"But can the
network guarantee  that an ongoing flow in a high-priority traffic class will continue to receive such
service throughout the flow’s duration using only the mechanisms that we have described so far?"
12565,"It
cannot."
12566,"In this section, we’ll see why yet additional network mechanisms and protocols are requiredwhen a hard service guarantee is provided to individual connections."
12567,"Let’s return to our scenario from Section 9.5.2 and consider two 1 Mbps audio applications transmitting
their packets over the 1.5 Mbps link, as shown in Figure 9.18."
12568,"The combined data rate of the two flows
(2 Mbps) exceeds the link capacity."
12569,"Even with classification and marking, isolation of flows, and sharing
of unused bandwidth (of which there is none), this is clearly a losing proposition."
12570,"There is simply notenough bandwidth to accommodate the needs of both applications at
Figure 9.18 Two competing audio applications overloading the R1-to-R2 link
the same time."
12571,"If the two applications equally share the bandwidth, each application would lose 25
percent of its transmitted packets."
12572,"This is such an unacceptably low QoS that both audio applications
are completely unusable; there’s no need even to transmit any audio packets in the first place."
12573,"Given that the two applications in Figure 9.18 cannot both be satisfied simultaneously, what should the
network do?"
12574,"Allowing both to proceed with an unusable QoS wastes network resources on application
flows that ultimately provide no utility to the end user."
12575,"The answer is hopefully clear—one of theapplication flows should be blocked (that is, denied access to the network), while the other should beallowed to proceed on, using the full 1 Mbps needed by the application."
12576,"The telephone network is anexample of a network that performs such call blocking—if the required resources (an end-to-end circuit
in the case of the telephone network) cannot be allocated to the call, the call is blocked (prevented from
entering the network) and a busy signal is returned to the user."
12577,"In our example, there is no gain inallowing a flow into the network if it will not receive a sufficient QoS to be considered usable."
12578,"Indeed,there is a cost to admitting a flow that does not receive its needed QoS, as network resources are beingused to support a flow that provides no utility to the end user."
12579,"By explicitly admitting or blocking flows based on their resource requirements, and the source
requirements of already-admitted flows, the network can guarantee that admitted flows will be able to
receive their requested QoS."
12580,"Implicit in the need to provide a guaranteed QoS to a flow is the need for
the flow to declare its QoS requirements."
12581,"This process of having a flow declare its QoS requirement,and then having the network either accept the flow (at the required QoS) or block the flow is referred toas the call admission  process."
12582,"This then is our fourth insight (in addition to the three earlier insights
from Section 9.5.2,) into the mechanisms needed to provide QoS.Insight 4:  If sufficient resources will not always be available, and QoS is to be guaranteed , a call
admission process is needed in which flows declare their QoS requirements and are then either
admitted to the network (at the required QoS) or blocked from the network (if the required QoS cannotbe provided by the network)."
12583,"Our motivating example in Figure 9.18 highlights the need for several new network mechanisms and
protocols if a call (an end-to-end flow) is to be guaranteed a given quality of service once it begins:
Resource reservation."
12584," The only way to guarantee  that a call will have the resources (link
bandwidth, buffers) needed to meet its desired QoS is to explicitly allocate those resources to the
call—a process known in networking parlance as resource reservation ."
12585,"Once resources are
reserved, the call has on-demand access to these resources throughout its duration, regardless of
the demands of all other calls."
12586,"If a call reserves and receives a guarantee of x Mbps of link
bandwidth, and never transmits at a rate greater than x, the call will see loss- and delay-free
performance."
12587,Call admission.
12588," If resources are to be reserved, then the network must have a mechanism for calls
to request and reserve resources."
12589,"Since resources are not infinite, a call making a call admission
request will be denied admission, that is, be blocked, if the requested resources are not available.Such a call admission is performed by the telephone network—we request resources when we dial a
number."
12590,"If the circuits (TDMA slots) needed to complete the call are available, the circuits are
allocated and the call is completed."
12591,"If the circuits are not available, then the call is blocked, and wereceive a busy signal."
12592,"A blocked call can try again to gain admission to the network, but it is notallowed to send traffic into the network until it has successfully completed the call admissionprocess."
12593,"Of course, a router that allocates link bandwidth should not allocate more than is availableat that link."
12594,"Typically, a call may reserve only a fraction of the link’s bandwidth, and so a router mayallocate link bandwidth to more than one call."
12595,"However, the sum of the allocated bandwidth to allcalls should be less than the link capacity if hard quality of service guarantees are to be provided."
12596,Call setup signaling.
12597," The call admission process described above requires that a call be able to
reserve sufficient resources at each and every network router on its source-to-destination path toensure that its end-to-end QoS requirement is met."
12598,"Each router must determine the local resourcesrequired by the session, consider the amounts of its resources that are already committed to other
ongoing sessions, and determine whether it has sufficient resources to satisfy the per-hop QoS
requirement of the session at this router without violating local QoS guarantees made to an already-admitted session."
12599,"A signaling protocol is needed to coordinate these various activities—the per-hopallocation of local resources, as well as the overall end-to-end decision of whether or not the call hasbeen able to reserve sufFigure 9.19 The call setup process
ficient resources at each and every router on the end-to-end path."
12600,"This is the job of the call setup
protocol , as shown in Figure 9.19."
12601,"The RSVP protocol  [Zhang 1993, RFC 2210]  was proposed for
this purpose within an Internet architecture for providing quality-of-service guarantees."
12602,"In ATM
networks, the Q2931b protocol [Black 1995]  carries this information among the ATM network’s
switches and end point."
12603,"Despite a tremendous amount of research and development, and even products that provide for per-
connection quality of service guarantees, there has been almost no extended deployment of suchservices."
12604,There are many possible reasons.
12605,"First and foremost, it may well be the case that the simple
application-level mechanisms that we studied in Sections 9.2 through 9.4, combined with proper
network dimensioning ( Section 9.5.1) provide “good enough” best-effort network service for multimedia
applications."
12606,"In addition, the added complexity and cost of deploying and managing a network that
provides per-connection quality of service guarantees may be judged by ISPs to be simply too highgiven predicted customer revenues for that service.9.6 Summary
Multimedia networking is one of the most exciting developments in the Internet today."
12607,"People throughout
the world less and less time in front of their televisions, and are instead use their smartphones anddevices to receive audio and video trans missions, both live and prerecorded."
12608,"Moreover, with sites like
YouTube, users have become producers as well as consumers of multimedia Internet content."
12609,"Inaddition to video distribution, the Internet is also being used to transport phone calls."
12610,"In fact, over the
next 10 years, the Internet, along with wireless Internet access, may make the traditional circuit-
switched telephone system a thing of the past."
12611,"VoIP not only provides phone service inexpensively, butalso provides numerous value-added services, such as video conferencing, online directory services,voice messaging, and integration into social networks such as Facebook and WeChat."
12612,"In Section 9.1, we described the intrinsic characteristics of video and voice, and then classified
multimedia applications into three categories: (i) streaming stored audio/video, (ii) conversational
voice/video-over-IP, and (iii) streaming live audio/video."
12613,"In Section 9.2, we studied streaming stored video in some depth."
12614,"For streaming video applications,
prerecorded videos are placed on servers, and users send requests to these servers to view the videos
on demand."
12615,We saw that streaming video systems can be classified into two categories: UDP streamingand HTTP.
12616,We observed that the most important performance measure for streaming video is averagethroughput.
12617,"In Section 9.3, we examined how conversational multimedia applications, such as VoIP, can be
designed to run over a best-effort network."
12618,"For conversational multimedia, timing considerations are
important because conversational applications are highly delay-sensitive."
12619,"On the other hand,
conversational multimedia applications are loss—tolerant—occasional loss only causes occasionalglitches in audio/video playback, and these losses can often be partially or fully concealed."
12620,"We saw howa combination of client buffers, packet sequence numbers, and timestamps can greatly alleviate theeffects of network-induced jitter."
12621,"We also surveyed the technology behind Skype, one of the leading
voice- and video-over-IP companies."
12622,"In Section 9.4, we examined two of the most important
standardized protocols for VoIP, namely, RTP and SIP."
12623,"In Section 9.5, we introduced how several network mechanisms (link-level scheduling disciplines and
traffic policing) can be used to provide differentiated service among several classes of traffic.Homework Problems and Questions
Chapter 9 Review Questions
SECTION 9.1
SECTION 9.2
SECTION 9.3R1."
12624,"Reconstruct Table 9.1 for when Victor Video is watching a 4 Mbps video, Facebook Frank is
looking at a new 100 Kbyte image every 20 seconds, and Martha Music is listening to 200 kbps
audio stream."
12625,R2.
12626,There are two types of redundancy in video.
12627,"Describe them, and discuss how they can be
exploited for efficient compression."
12628,R3.
12629,"Suppose an analog audio signal is sampled 16,000 times per second, and each sample is
quantized into one of 1024 levels."
12630,"What would be the resulting bit rate of the PCM digital audio
signal?"
12631,R4.
12632,Multimedia applications can be classified into three categories.
12633,"Name and describe each
category."
12634,R5.
12635,Streaming video systems can be classified into three categories.
12636,"Name and briefly describe
each of these categories."
12637,R6.
12638,List three disadvantages of UDP streaming.
12639,R7.
12640,"With HTTP streaming, are the TCP receive buffer and the client’s application buffer the
same thing?"
12641,"If not, how do they interact?"
12642,R8.
12643,Consider the simple model for HTTP streaming.
12644,"Suppose the server sends bits at a constant
rate of 2 Mbps and playback begins when 8 million bits have been received."
12645,"What is the initial
buffering delay t?p
R9."
12646,What is the difference between end-to-end delay and packet jitter?
12647,"What are the causes of
packet jitter?"
12648,R10.
12649,Why is a packet that is received after its scheduled playout time considered lost?
12650,R11.
12651,Section 9.3 describes two FEC schemes.
12652,Briefly summarize them.
12653,"Both schemes increase
the transmission rate of the stream by adding overhead."
12654,"Does interleaving also increase theSECTION 9.4
Problemstransmission rate?"
12655,R12.
12656,How are different RTP streams in different sessions identified by a receiver?
12657,"How are
different streams from within the same session identified?"
12658,R13.
12659,What is the role of a SIP registrar?
12660,"How is the role of an SIP registrar different from that of
a home agent in Mobile IP?"
12661,P1.
12662,Consider the figure below.
12663,"Similar to our discussion of Figure 9.1 , suppose that video is
encoded at a fixed bit rate, and thus each video block contains video frames that are to be
played out over the same fixed amount of time, Δ."
12664,"The server transmits the first video block at t ,
the second block at  the third block at  and so on."
12665,"Once the client begins playout,
each block should be played out Δ time units after the previous block."
12666,a.
12667,Suppose that the client begins playout as soon as the first block arrives at t.
12668,"In the figure
below, how many blocks of video (including the first block) will have arrived at the client
in time for their playout?"
12669,Explain how you arrived at your answer.
12670,b.
12671,Suppose that the client begins playout now at .
12672,"How many blocks of video (including
the first block) will have arrived at the client in time for their playout?"
12673,"Explain how you
arrived at your answer."
12674,c.
12675,"In the same scenario at (b) above, what is the largest number of blocks that is ever
stored in the client buffer, awaiting playout?"
12676,Explain how you arrived at your answer.
12677,d.
12678,"What is the smallest playout delay at the client, such that every video block has arrived intime for its playout?"
12679,"Explain how you arrived at your answer.0
t0+Δ, t0+2Δ,
1
t1+ΔP2."
12680,Recall the simple model for HTTP streaming shown in Figure 9.3 .
12681,"Recall that B denotes the
size of the client’s application buffer, and Q denotes the number of bits that must be buffered
before the client application begins playout."
12682,Also r denotes the video consumption rate.
12683,"Assume
that the server sends bits at a constant rate x whenever the client buffer is not full."
12684,a.
12685,"Suppose that  As discussed in the text, in this case playout will alternate between
periods of continuous playout and periods of freezing."
12686,"Determine the length of each
continuous playout and freezing period as a function of Q, r, and x."
12687,b.
12688,Now suppose that  At what time  does the client application buffer become full?
12689,P3.
12690,Recall the simple model for HTTP streaming shown in Figure 9.3 .
12691,"Suppose the buffer size
is infinite but the server sends bits at variable rate x(t)."
12692,"Specifically, suppose x(t) has the
following saw-tooth shape."
12693,"The rate is initially zero at time  and linearly climbs to H at time
 It then repeats this pattern again and again, as shown in the figure below."
12694,a.
12695,What is the server’s average send rate?
12696,b.
12697,Suppose that  so that the client starts playback as soon as it receives a video frame.
12698,What will happen?
12699,c.
12700,"Now suppose  and  Determine as a function of Q, H, and T the time at which
playback first begins."
12701,d.
12702,Suppose  and  Prove there will be no freezing after the initial playout delay.
12703,e.
12704,"Suppose  Find the smallest value of Q such that there will be no freezing after the
initial playback delay."
12705,f.
12706,Now suppose that the buffer size B is finite.
12707,"Suppose  As a function of Q, B, T, and
H, determine the time  when the client application buffer first becomes full."
12708,P4.
12709,Recall the simple model for HTTP streaming shown in Figure 9.3 .
12710,"Suppose the client
application buffer is infinite, the server sends at the constant rate x, and the video consumptionx<r."
12711,x>r.
12712,"t=tf
t=0
t=T."
12713,"Q=0,
Q>0 HT/2≥Q."
12714,H>2r Q=HT/2.
12715,H>2r.
12716,H>2r.
12717,"t=tf
r<x.rate is r with  Also suppose playback begins immediately."
12718,"Suppose that the user terminates
the video early at time  At the time of termination, the server stops sending bits (if it hasn’t
already sent all the bits in the video)."
12719,a.
12720,Suppose the video is infinitely long.
12721,"How many bits are wasted (that is, sent but not
viewed)?"
12722,b.
12723,"Suppose the video is T seconds long with  How many bits are wasted (that is, sent
but not viewed)?"
12724,P5.
12725,"Consider a DASH system (as discussed in Section 2.6 ) for which there are N video
versions (at N different rates and qualities) and N audio versions (at N different rates and
qualities)."
12726,"Suppose we want to allow the player to choose at any time any of the N video
versions and any of the N audio versions."
12727,a.
12728,"If we create files so that the audio is mixed in with the video, so server sends only onemedia stream at given time, how many files will the server need to store (each a different
URL)?"
12729,b.
12730,"If the server instead sends the audio and video streams separately and has the client
synchronize the streams, how many files will the server need to store?"
12731,P6.
12732,"In the VoIP example in Section 9.3 , let h be the total number of header bytes added to each
chunk, including UDP and IP header."
12733,a.
12734,"Assuming an IP datagram is emitted every 20 msecs, find the transmission rate in bits
per second for the datagrams generated by one side of this application."
12735,b.
12736,What is a typical value of h when RTP is used?
12737,P7.
12738,Consider the procedure described in Section 9.3 for estimating average delay d.
12739,"Suppose
that  Let  be the most recent sample delay, let  be the next most recent sample
delay, and so on."
12740,a.
12741,"For a given audio application suppose four packets have arrived at the receiver with
sample delays  and  Express the estimate of delay d in terms of
the four samples."
12742,b.
12743,Generalize your formula for n sample delays.
12744,c.
12745,"For the formula in part (b), let n approach infinity and give the resulting formula."
12746,Comment on why this averaging procedure is called an exponential moving average.
12747,P8.
12748,Repeat parts (a) and (b) in Question P7 for the estimate of average delay deviation.
12749,P9.
12750,"For the VoIP example in Section 9.3 , we introduced an online procedure (exponential
moving average) for estimating delay."
12751,In this problem we will examine an alternative procedure.
12752,"Let t be the timestamp of the ith packet received; let r  be the time at which the ith packet is
received."
12753,Let d  be our estimate of average delay after receiving the nth packet.
12754,"After the first
packet is received, we set the delay estimate equal to t=E."
12755,T>E.
12756,"i
u=0.1. r1−t1 r2−t2
r4−t4, r3−t3, r2−t2, r1−t1."
12757,"i i
n
d1=r1−t1.a. Suppose that we would like  for all n."
12758,"Give a recursive
formula for d  in terms of  and t ."
12759,b.
12760,"Describe why for Internet telephony, the delay estimate described in Section 9.3 is more
appropriate than the delay estimate outlined in part (a)."
12761,P10.
12762,"Compare the procedure described in Section 9.3 for estimating average delay with the
procedure in Section 3.5 for estimating round-trip time."
12763,"What do the procedures have in
common?"
12764,How are they different?
12765,P11.
12766,Consider the figure below (which is similar to Figure 9.3 ).
12767,"A sender begins sending
packetized audio periodically at  The first packet arrives at the receiver at 
a."
12768,"What are the delays (from sender to receiver, ignoring any playout delays) of packets 2
through 8?"
12769,"Note that each vertical and horizontal line segment in the figure has a length
of 1, 2, or 3 time units."
12770,b.
12771,"If audio playout begins as soon as the first packet arrives at the receiver at  which of
the first eight packets sent will not arrive in time for playout?"
12772,c.
12773,"If audio playout begins at  which of the first eight packets sent will not arrive in time
for playout?"
12774,d.
12775,"What is the minimum playout delay at the receiver that results in all of the first eight
packets arriving in time for their playout?"
12776,P12.
12777,"Consider again the figure in P11, showing packet audio transmission and reception times."
12778,a.
12779,"Compute the estimated delay for packets 2 through 8, using the formula for d from
Section 9.3.2 ."
12780,"Use a value of .dn=(r1−t1+r2−t2+⋯+rn−tn)/n
n dn−1, rn,n
t=1."
12781,t=8.
12782,"t=8,
t=9,
i
u=0.1b."
12783,"Compute the estimated deviation of the delay from the estimated average for packets 2
through 8, using the formula for v from Section 9.3.2 ."
12784,Use a value of .
12785,P13.
12786,Recall the two FEC schemes for VoIP described in Section 9.3 .
12787,"Suppose the first scheme
generates a redundant chunk for every four original chunks."
12788,"Suppose the second scheme uses a
low-bit rate encoding whose transmission rate is 25 percent of the transmission rate of thenominal stream."
12789,a.
12790,How much additional bandwidth does each scheme require?
12791,"How much playback delay
does each scheme add?"
12792,b.
12793,How do the two schemes perform if the first packet is lost in every group of five packets?Which scheme will have better audio quality?
12794,c.
12795,How do the two schemes perform if the first packet is lost in every group of two packets?Which scheme will have better audio quality?
12796,P14.
12797,a.
12798,Consider an audio conference call in Skype with  participants.
12799,"Suppose each
participant generates a constant stream of rate r bps."
12800,"How many bits per second will the
call initiator need to send?"
12801,"How many bits per second will each of the other 
participants need to send?"
12802,"What is the total send rate, aggregated over all participants?"
12803,b.
12804,Repeat part (a) for a Skype video conference call using a central server.
12805,c.
12806,"Repeat part (b), but now for when each peer sends a copy of its video stream to each of
the  other peers."
12807,P15.
12808,a.
12809,"Suppose we send into the Internet two IP datagrams, each carrying a different UDPsegment."
12810,"The first datagram has source IP address A1, destination IP address B, source
port P1, and destination port T."
12811,"The second datagram has source IP address A2,destination IP address B, source port P2, and destination port T."
12812,"Suppose that A1 is
different from A2 and that P1 is different from P2."
12813,"Assuming that both datagrams reach
their final destination, will the two UDP datagrams be received by the same socket?"
12814,Whyor why not?
12815,b.
12816,"Suppose Alice, Bob, and Claire want to have an audio conference call using SIP and
RTP."
12817,"For Alice to send and receive RTP packets to and from Bob and Claire, is only one
UDP socket sufficient (in addition to the socket needed for the SIP messages)?"
12818,"If yes,then how does Alice’s SIP client distinguish between the RTP packets received from Bob
and Claire?"
12819,P16.
12820,"True or false:
a."
12821,"If stored video is streamed directly from a Web server to a media player, then the
application is using TCP as the underlying transport protocol.i u=0.1
N>2
N−1
N−1b."
12822,"When using RTP, it is possible for a sender to change encoding in the middle of a
session."
12823,c.
12824,All applications that use RTP must use port 87.
12825,d.
12826,"If an RTP session has a separate audio and video stream for each sender, then the
audio and video streams use the same SSRC."
12827,e.
12828,"In differentiated services, while per-hop behavior defines differences in performanceamong classes, it does not mandate any particular mechanism for achieving these
performances."
12829,f.
12830,Suppose Alice wants to establish an SIP session with Bob.
12831,"In her INVITE message she
includes the line: m=audio 48753 RTP/AVP 3 (AVP 3 denotes GSM audio)."
12832,"Alice has
therefore indicated in this message that she wishes to send GSM audio."
12833,g.
12834,"Referring to the preceding statement, Alice has indicated in her INVITE message that
she will send audio to port 48753."
12835,h.
12836,SIP messages are typically sent between SIP entities using a default SIP port number.
12837,i.
12838,"In order to maintain registration, SIP clients must periodically send REGISTERmessages."
12839,j.
12840,SIP mandates that all SIP clients support G.711 audio encoding.
12841,P17.
12842,"Consider the figure below, which shows a leaky bucket policer being fed by a stream ofpackets."
12843,"The token buffer can hold at most two tokens, and is initially full at  New tokens
arrive at a rate of one token per slot."
12844,"The output link speed is such that if two packets obtain
tokens at the beginning of a time slot, they can both go to the output link in the same slot."
12845,"Thetiming details of the system are as follows:
A."
12846,Packets (if any) arrive at the beginning of the slot.
12847,"Thus in the figure, packets 1, 2, and 3
arrive in slot 0."
12848,"If there are already packets in the queue, then the arriving packets join
the end of the queue."
12849,Packets proceed towards the front of the queue in a FIFO manner.
12850,B.
12851,"After the arrivals have been added to the queue, if there are any queued packets, one or
two of those packets (depending on the number of available tokens) will each remove a
token from the token buffer and go to the output link during that slot."
12852,"Thus, packets 1 andt=0.Programming Assignment
In this lab, you will implement a streaming video server and client."
12853,"The client will use the real-time
streaming protocol (RTSP) to control the actions of the server."
12854,The server will use the real-time protocol(RTP) to packetize the video for transport over UDP.
12855,"You will be given Python code that partially
implements RTSP and RTP at the client and server."
12856,"Your job will be to complete both the client and
server code."
12857,"When you are finished, you will have created a client-server application that does thefollowing:2 each remove a token from the buffer (since there are initially two tokens) and go to the
output link during slot 0."
12858,C.
12859,"A new token is added to the token buffer if it is not full, since the token generation rate isr = 1 token/slot."
12860,D.
12861,"Time then advances to the next time slot, and these steps repeat."
12862,"Answer the following questions:
a."
12863,"For each time slot, identify the packets that are in the queue and the number of tokens in
the bucket, immediately after the arrivals have been processed (step 1 above) but before
any of the packets have passed through the queue and removed a token."
12864,"Thus, for the
 time slot in the example above, packets 1, 2, and 3 are in the queue, and there are
two tokens in the buffer."
12865,b.
12866,"For each time slot indicate which packets appear on the output after the token(s) have
been removed from the queue."
12867,"Thus, for the  time slot in the example above, packets
1 and 2 appear on the output link from the leaky buffer during slot 0."
12868,P18.
12869,Repeat P17 but assume that  Assume again that the bucket is initially full.
12870,P19.
12871,Consider P18 and suppose now that  and that  as before.
12872,"Will your answer to the
question above change?"
12873,P20.
12874,"Consider the leaky bucket policer that polices the average rate and burst size of a packet
flow."
12875,"We now want to police the peak rate, p, as well."
12876,"Show how the output of this leaky bucket
policer can be fed into a second leaky bucket policer so that the two leaky buckets in seriespolice the average rate, peak rate, and burst size."
12877,Be sure to give the bucket size and tokengeneration rate for the second policer.
12878,P21.
12879,"A packet flow is said to conform to a leaky bucket specification ( r, b) with burst size b and
average rate r if the number of packets that arrive to the leaky bucket is less than  packets in
every interval of time of length t for all t."
12880,"Will a packet flow that conforms to a leaky bucket
specification ( r, b) ever have to wait at a leaky bucket policer with parameters r and b?"
12881,"Justify
your answer.P22."
12882,"Show that as long as  then d  is indeed the maximum delay that any
packet in flow 1 will ever experience in the WFQ queue.t=0
t=0
r=2."
12883,"r=3 b=2
rt+b
r1<Rw1/(∑ wj),
maxThe client sends SETUP, PLAY, PAUSE, and TEARDOWN RTSP commands, and the server
responds to the commands."
12884,"When the server is in the playing state, it periodically grabs a stored JPEG frame, packetizes theframe with RTP, and sends the RTP packet into a UDP socket."
12885,"The client receives the RTP packets, removes the JPEG frames, decompresses the frames, andrenders the frames on the client’s monitor."
12886,"The code you will be given implements the RTSP protocol in the server and the RTP depacketization in
the client."
12887,The code also takes care of displaying the transmitted video.
12888,"You will need to implement
RTSP in the client and RTP server."
12889,"This programming assignment will significantly enhance thestudent’s understanding of RTP, RTSP, and streaming video."
12890,It is highly recommended.
12891,"The assignmentalso suggests a number of optional exercises, including implementing the RTSP DESCRIBE commandat both client and server."
12892,"You can find full details of the assignment, as well as an overview of the RTSP
protocol, at the Web site www.pearsonhighered.com/ cs-resources ."
12893,AN INTERVIEW WITH .
12894,.
12895,.
12896,"Henning Schulzrinne
Henning Schulzrinne is a professor, chair of the Department of Computer Science, and head ofthe Internet Real-Time Laboratory at Columbia University."
12897,"He is the co-author of RTP, RTSP,SIP, and GIST—key protocols for audio and video communications over the Internet."
12898,"Henningreceived his BS in electrical and industrial engineering at TU Darmstadt in Germany, his MS inelectrical and computer engineering at the University of Cincinnati, and his PhD in electricalengineering at the University of Massachusetts, Amherst."
12899,What made you decide to specialize in multimedia networking?
12900,This happened almost by accident.
12901,"As a PhD student, I got involved with DARTnet, an
experimental network spanning the United States with T1 lines."
12902,DARTnet was used as a provingground for multicast and Internet real-time tools.
12903,"That led me to write my first audio tool, NeVoT.Through some of the DARTnet participants, I became involved in the IETF, in the then-nascentAudio Video Transport working group."
12904,This group later ended up standardizing RTP.
12905,What was your first job in the computer industry?
12906,What did it entail?
12907,"My first job in the computer industry was soldering together an Altair computer kit when I was a
high school student in Livermore, California."
12908,"Back in Germany, I started a little consultingcompany that devised an address management program for a travel agency—storing data oncassette tapes for our TRS-80 and using an IBM Selectric typewriter with a home-brew hardware
interface as a printer."
12909,"My first real job was with AT&T Bell Laboratories, developing a network emulator for
constructing experimental networks in a lab environment."
12910,What are the goals of the Internet Real-Time Lab?
12911,"Our goal is to provide components and building blocks for the Internet as the single future
communications infrastructure."
12912,"This includes developing new protocols, such as GIST (fornetwork-layer signaling) and LoST (for finding resources by location), or enhancing protocolsthat we have worked on earlier, such as SIP, through work on rich presence, peer-to-peersystems, next-generation emergency calling, and service creation tools."
12913,"Recently, we have alsolooked extensively at wireless systems for VoIP, as 802.11b and 802.11n networks and maybe
WiMax networks are likely to become important last-mile technologies for telephony."
12914,"We are
also trying to greatly improve the ability of users to diagnose faults in the complicated tangle ofproviders and equipment, using a peer-to-peer fault diagnosis system called DYSWIS (Do YouSee What I See)."
12915,"We try to do practically relevant work, by building prototypes and open source systems, by
measuring performance of real systems, and by contributing to IETF standards."
12916,What is your vision for the future of multimedia networking?
12917,"We are now in a transition phase; just a few years shy of when IP will be the universal platform
for multimedia services, from IPTV to VoIP."
12918,"We expect radio, telephone, and TV to be available
even during snowstorms and earthquakes, so when the Internet takes over the role of these
dedicated networks, users will expect the same level of reliability."
12919,"We will have to learn to design network technologies for an ecosystem of competing carriers,
service and content providers, serving lots of technically untrained users and defending themagainst a small, but destructive, set of malicious and criminal users."
12920,Changing protocols isbecoming increasingly hard.
12921,"They are also becoming more complex, as they need to take intoaccount competing business interests, security, privacy, and the lack of transparency ofnetworks caused by firewalls and network address translators."
12922,"Since multimedia networking is becoming the foundation for almost all of consumerentertainment, there will be an emphasis on managing very large networks, at low cost."
12923,"Users
will expect ease of use, such as finding the same content on all of their devices."
12924,Why does SIP have a promising future?
12925,"As the current wireless network upgrade to 3G networks proceeds, there is the hope of a single
multimedia signaling mechanism spanning all types of networks, from cable modems, tocorporate telephone networks and public wireless networks."
12926,"Together with software radios, this
will make it possible in the future that a single device can be used on a home network, as a
cordless BlueTooth phone, in a corporate network via 802.11 and in the wide area via 3Gnetworks."
12927,"Even before we have such a single universal wireless device, the personal mobilitymechanisms make it possible to hide the differences between networks."
12928,"One identifier becomesthe universal means of reaching a person, rather than remembering or passing around half adozen technology- or location-specific telephone numbers."
12929,SIP also breaks apart the provision of voice (bit) transport from voice services.
12930,"It now becomes
technically possible to break apart the local telephone monopoly, where one company provides
neutral bit transport, while others provide IP “dial tone” and the classical telephone services,
such as gateways, call forwarding, and caller ID."
12931,"Beyond multimedia signaling, SIP offers a new service that has been missing in the Internet:
event notification."
12932,"We have approximated such services with HTTP kludges and e-mail, but thiswas never very satisfactory."
12933,"Since events are a common abstraction for distributed systems, thismay simplify the construction of new services."
12934,Do you have any advice for students entering the networking field?
12935,Networking bridges disciplines.
12936,"It draws from electrical engineering, all aspects of computer
science, operations research, statistics, economics, and other disciplines."
12937,"Thus, networkingresearchers have to be familiar with subjects well beyond protocols and routing algorithms."
12938,"Given that networks are becoming such an important part of everyday life, students wanting to
make a difference in the field should think of the new resource constraints in networks: humantime and effort, rather than just bandwidth or storage."
12939,"Work in networking research can be immensely satisfying since it is about allowing people to
communicate and exchange ideas, one of the essentials of being human."
12940,"The Internet hasbecome the third major global infrastructure, next to the transportation system and energydistribution."
12941,"Almost no part of the economy can work without high-performance networks, sothere should be plenty of opportunities for the foreseeable future.References
A note on URLs.  In the references below, we have provided URLs for Web pages, Web-only documents, and other material that has not been published in a conference or
journal (when we have been able to locate a URL for such material)."
12942,"We have not provided URLs for conference and journal publications, as these documents can usually be
located via a search engine, from the conference Web site (e.g., papers in all ACM SIGCOMM conferences and workshops can be located via http:/ /www.acm.org/
sigcomm), or via a digital library subscription."
12943,While all URLs provided below were valid (and tested) in Jan.
12944,"2016, URLs can become out of date."
12945,"Please consult the online
version of this book ( www.pearsonhighered .com/ cs-resources ) for an up-to-date bibliography."
12946,A note on Internet Request for Comments (RFCs): Copies of Internet RFCs are available at many sites.
12947,"The RFC Editor of the Internet Society (the body that overseesthe RFCs) maintains the site, http:/ /www.rfc-editor.org ."
12948,"This site allows you to search for a specific RFC by title, number, or authors, and will show updates to any RFCs
listed."
12949,Internet RFCs can be updated or obsoleted by later RFCs. Our favorite site for getting RFCs is the original source— http:/ /www.rfc-editor.org .
12950,"[3GPP 2016] Third Generation Partnership Project homepage, http:/ /www.3gpp.org/
[Abramson 1970]  N."
12951,"Abramson, “The Aloha System—Another Alternative for Computer Communications,” Proc."
12952,"1970 Fall Joint Computer Conference, AFIPS Conference ,
p."
12953,"37, 1970."
12954,[Abramson 1985]  N.
12955,"Abramson, “Development of the Alohanet,” IEEE Transactions on Information Theory , Vol."
12956,"IT-31, No. 3 (Mar."
12957,"1985), pp."
12958,119–123.
12959,[Abramson 2009]  N.
12960,"Abramson, “The Alohanet—Surfing for Wireless Data,” IEEE Communications Magazine , Vol."
12961,"47, No. 12, pp."
12962,21–25.
12963,[Adhikari 2011a]  V.
12964,K.
12965,"Adhikari, S."
12966,"Jain, Y."
12967,"Chen, Z."
12968,L.
12969,"Zhang, “Vivisecting YouTube: An Active Measurement Study,” Technical Report, University of Minnesota, 2011."
12970,[Adhikari 2012] V.
12971,K.
12972,"Adhikari, Y."
12973,"Gao, F."
12974,"Hao, M."
12975,"Varvello, V."
12976,"Hilt, M."
12977,"Steiner, Z."
12978,L.
12979,"Zhang, “Unreeling Netflix: Understanding and Improving Multi-CDN Movie Delivery,”
Technical Report, University of Minnesota, 2012."
12980,[Afanasyev 2010]  A.
12981,"Afanasyev, N."
12982,"Tilley, P."
12983,"Reiher, L."
12984,"Kleinrock, “Host-to-Host Congestion Control for TCP,” IEEE Communications Surveys & Tutorials , Vol."
12985,"12, No. 3, pp."
12986,304–342.
12987,[Agarwal 2009]  S.
12988,"Agarwal, J."
12989,"Lorch, “Matchmaking for Online Games and Other Latency-sensitive P2P Systems,” Proc."
12990,2009 ACM SIGCOMM.
12991,[Ager 2012]  B.
12992,"Ager, N."
12993,"Chatzis, A."
12994,"Feldmann, N."
12995,"Sarrar, S."
12996,"Uhlig, W."
12997,"Willinger, “Anatomy of a Large European ISP,” Sigcomm, 2012.[Ahn 1995] J."
12998,S.
12999,"Ahn, P."
13000,B.
13001,"Danzig, Z."
13002,"Liu, and Y."
13003,"Yan, “Experience with TCP Vegas: Emulation and Experiment,” Proc."
13004,"1995 ACM SIGCOMM (Boston, MA, Aug."
13005,"1995), pp."
13006,185–195.
13007,"[Akamai 2016]  Akamai homepage , http:/ /www.akamai.com
[Akella 2003]  A."
13008,"Akella, S."
13009,"Seshan, A."
13010,"Shaikh, “An Empirical Evaluation of Wide-Area Internet Bottlenecks,” Proc."
13011,"2003 ACM Internet Measurement Conference  (Miami, FL,
Nov."
13012,2003).
13013,[Akhshabi 2011] S.
13014,"Akhshabi, A."
13015,C.
13016,"Begen, C."
13017,"Dovrolis, “An Experimental Evaluation of Rate-Adaptation Algorithms in Adaptive Streaming over HTTP,” Proc."
13018,"2011 ACM
Multimedia Systems Conf ."
13019,[Akyildiz 2010] I.
13020,"Akyildiz, D."
13021,"Gutierrex-Estevez, E."
13022,"Reyes, “The Evolution to 4G Cellular Systems, LTE Advanced,” Physical Communication , Elsevier, 3 (2010), 217–244."
13023,[Albitz 1993] P.
13024,Albitz and C.
13025,"Liu, DNS and BIND , O’Reilly & Associates, Petaluma, CA, 1993."
13026,[Al-Fares 2008]  M.
13027,"Al-Fares, A."
13028,"Loukissas, A."
13029,"Vahdat, “A Scalable, Commodity Data Center Network Architecture,” Proc."
13030,2008 ACM SIGCOMM.
13031,[Amazon 2014] J.
13032,"Hamilton, “AWS: Innovation at Scale, YouTube video, https://www.youtube.com/ watch?v=JIQETrFC_SQ
[Anderson 1995] J."
13033,B.
13034,"Andersen, T."
13035,S.
13036,"Rappaport, S."
13037,"Yoshida, “Propagation Measurements and Models for Wireless Communications Channels,” IEEE Communications
Magazine , (Jan."
13038,"1995), pp."
13039,42–49.
13040,[Alizadeh 2010] M.
13041,"Alizadeh, A."
13042,"Greenberg, D."
13043,"Maltz, J."
13044,"Padhye, P."
13045,"Patel, B."
13046,"Prabhakar, S."
13047,"Sengupta, M."
13048,Sridharan.
13049,"“Data center TCP (DCTCP),” ACM SIGCOMM 2010
Conference , ACM, New York, NY, USA, pp."
13050,63–74.
13051,[Allman 2011] E.
13052,"Allman, “The Robustness Principle Reconsidered: Seeking a Middle Ground,” Communications of the ACM , Vol."
13053,"54, No. 8 (Aug."
13054,"2011), pp."
13055,40–45.
13056,[Appenzeller 2004] G.
13057,"Appenzeller, I."
13058,"Keslassy, N."
13059,"McKeown, “Sizing Router Buffers,” Proc."
13060,"2004 ACM SIGCOMM (Portland, OR, Aug."
13061,2004).
13062,"[ASO-ICANN 2016]  The Address Supporting Organization homepage, http:/ /www.aso.icann.org
[AT&T 2013] “AT&T Vision Alignment Challenge Technology Survey,” AT&T Domain 2.0 Vision White Paper, November 13, 2013.[Atheros 2016]  Atheros Communications Inc., “Atheros AR5006 WLAN Chipset Product Bulletins,” http://www.atheros.com/pt/AR5006Bulletins.htm
[Ayanoglu 1995] E."
13063,"Ayanoglu, S."
13064,"Paul, T."
13065,F.
13066,"La Porta, K."
13067,K.
13068,"Sabnani, R."
13069,D.
13070,"Gitlin, “AIRMAIL: A Link-Layer Protocol for Wireless Networks,” ACM ACM/Baltzer Wireless
Networks Journal , 1: 47–60, Feb."
13071,1995.
13072,[Bakre 1995]  A.
13073,"Bakre, B."
13074,R.
13075,"Badrinath, “I-TCP: Indirect TCP for Mobile Hosts,” Proc."
13076,1995 Int.
13077,Conf.
13078,"on Distributed Computing Systems (ICDCS)  (May 1995), pp."
13079,136–143.
13080,[Balakrishnan 1997]  H.
13081,"Balakrishnan, V."
13082,"Padmanabhan, S."
13083,"Seshan, R."
13084,"Katz, “A Comparison of Mechanisms for Improving TCP Performance Over Wireless Links,”
IEEE/ACM Transactions on Networking  Vol."
13085,"5, No. 6 (Dec."
13086,1997).
13087,[Balakrishnan 2003]  H.
13088,"Balakrishnan, F."
13089,"Kaashoek, D."
13090,"Karger, R."
13091,"Morris, I."
13092,"Stoica, “Looking Up Data in P2P Systems,” Communications of the ACM , Vol."
13093,"46, No. 2 (Feb."
13094,"2003), pp."
13095,43–48.
13096,[Baldauf 2007] M.
13097,"Baldauf, S."
13098,"Dustdar, F."
13099,"Rosenberg, “A Survey on Context-Aware Systems,” Int."
13100,J.
13101,"Ad Hoc and Ubiquitous Computing , Vol."
13102,"2, No. 4 (2007), pp."
13103,263–277.
13104,[Baran 1964]  P.
13105,"Baran, “On Distributed Communication Networks,” IEEE Transactions on Communication Systems , Mar."
13106,1964.
13107,"Rand Corporation Technical report with the
same title (Memorandum RM-3420-PR, 1964)."
13108,"http:/ /www.rand.org/ publications/ RM/RM3420/
[Bardwell 2004] J."
13109,"Bardwell, “You Believe You Understand What You Think I Said ."
13110,.
13111,.
13112,"The Truth About 802.11 Signal and Noise Metrics: A Discussion Clarifying Often-
Misused 802.11 WLAN Terminologies,” http:/ /www.connect802.com/download/ techpubs/2004/you_believe_D100201.pdf
[Barford 2009]  P."
13113,"Barford, N."
13114,"Duffield, A."
13115,"Ron, J."
13116,"Sommers, “Network Performance Anomaly Detection and Localization,” Proc."
13117,2009 IEEE INFOCOM (Apr.
13118,2009).
13119,[Baronti 2007] P.
13120,"Baronti, P."
13121,"Pillai, V."
13122,"Chook, S."
13123,"Chessa, A."
13124,"Gotta, Y."
13125,"Hu, “Wireless Sensor Networks: A Survey on the State of the Art and the 802.15.4 and ZigBee
Standards,” Computer Communications , Vol."
13126,"30, No. 7 (2007), pp."
13127,1655–1695.
13128,[Baset 2006]  S.
13129,A.
13130,Basset and H.
13131,"Schulzrinne, “An Analysis of the Skype Peer-to-Peer Internet Telephony Protocol,” Proc."
13132,"2006 IEEE INFOCOM (Barcelona, Spain, Apr."
13133,2006).
13134,"[BBC 2001]  BBC news online “A Small Slice of Design,” Apr."
13135,"2001, http:/ /news.bbc.co.uk/ 2/hi/science/nature/1264205.stm
[Beheshti 2008]  N."
13136,"Beheshti, Y."
13137,"Ganjali, M."
13138,"Ghobadi, N."
13139,"McKeown, G."
13140,"Salmon, “Experimental Study of Router Buffer Sizing,” Proc."
13141,"ACM Internet Measurement Conference
(Oct."
13142,"2008, Vouliagmeni, Greece).[Bender 2000]  P."
13143,"Bender, P."
13144,"Black, M."
13145,"Grob, R."
13146,"Padovani, N."
13147,"Sindhushayana, A."
13148,"Viterbi, “CDMA/HDR: A Bandwidth-Efficient High-Speed Wireless Data Service for
Nomadic Users,” IEEE Commun."
13149,"Mag., Vol."
13150,"38, No. 7 (July 2000), pp."
13151,70–77.
13152,[Berners-Lee 1989]  T.
13153,"Berners-Lee, CERN, “Information Management: A Proposal,” Mar."
13154,"1989, May 1990."
13155,"http:/ /www.w3.org/ History/1989/proposal .html
[Berners-Lee 1994]  T."
13156,"Berners-Lee, R."
13157,"Cailliau, A."
13158,"Luotonen, H."
13159,"Frystyk Nielsen, A."
13160,"Secret, “The World-Wide Web,” Communications of the ACM , Vol."
13161,"37, No. 8 (Aug."
13162,"1994), pp."
13163,76–82.
13164,[Bertsekas 1991]  D.
13165,"Bertsekas, R."
13166,"Gallagher, Data Networks, 2nd Ed. , Prentice Hall, Englewood Cliffs, NJ, 1991."
13167,[Biersack 1992]  E.
13168,W.
13169,"Biersack, “Performance Evaluation of Forward Error Correction in ATM Networks,” Proc."
13170,"1999 ACM SIGCOMM (Baltimore, MD, Aug."
13171,"1992), pp."
13172,248–257.
13173,"[BIND 2016]  Internet Software Consortium page on BIND, http://www.isc.org/bind.html
[Bisdikian 2001] C."
13174,"Bisdikian, “An Overview of the Bluetooth Wireless Technology,” IEEE Communications Magazine , No. 12 (Dec."
13175,"2001), pp."
13176,86–94.
13177,[Bishop 2003] M.
13178,"Bishop, Computer Security: Art and Science , Boston: Addison Wesley, Boston MA, 2003."
13179,[Black 1995]  U.
13180,"Black, ATM Volume I: Foundation for Broadband Networks , Prentice Hall, 1995."
13181,[Black 1997]  U.
13182,"Black, ATM Volume II: Signaling in Broadband Networks , Prentice Hall, 1997."
13183,[Blumenthal 2001] M.
13184,"Blumenthal, D."
13185,"Clark, “Rethinking the Design of the Internet: The End-to-end Arguments vs."
13186,"the Brave New World,” ACM Transactions on Internet
Technology , Vol."
13187,"1, No. 1 (Aug."
13188,"2001), pp."
13189,70–109.
13190,[Bochman 1984]  G.
13191,V.
13192,"Bochmann, C."
13193,A.
13194,"Sunshine, “Formal Methods in Communication Protocol Design,” IEEE Transactions on Communications , Vol."
13195,"28, No. 4 (Apr."
13196,"1980)
pp."
13197,624–631.
13198,[Bolot 1996] J-C.
13199,"Bolot, A."
13200,"Vega-Garcia, “Control Mechanisms for Packet Audio in the Internet,” Proc."
13201,"1996 IEEE INFOCOM, pp."
13202,232–239.
13203,[Bosshart 2013]  P.
13204,"Bosshart, G."
13205,"Gibb, H."
13206,"Kim, G."
13207,"Varghese, N."
13208,"McKeown, M."
13209,"Izzard, F."
13210,"Mujica, M."
13211,"Horowitz, “Forwarding Metamorphosis: Fast Programmable Match-Action
Processing in Hardware for SDN,” ACM SIGCOMM Comput."
13212,Commun.
13213,Rev.
13214,"43, 4 (Aug."
13215,"2013), 99–110 .[Bosshart 2014]  P."
13216,"Bosshart, D."
13217,"Daly, G."
13218,"Gibb, M."
13219,"Izzard, N."
13220,"McKeown, J."
13221,"Rexford, C."
13222,"Schlesinger, D."
13223,"Talayco, A."
13224,"Vahdat, G."
13225,"Varghese, D."
13226,"Walker, “P4: Programming
Protocol-Independent Packet Processors,” ACM SIGCOMM Comput."
13227,Commun.
13228,Rev.
13229,"44, 3 (July 2014), pp."
13230,87–95.
13231,[Brakmo 1995]  L.
13232,"Brakmo, L."
13233,"Peterson, “TCP Vegas: End to End Congestion Avoidance on a Global Internet,” IEEE Journal of Selected Areas in Communications , Vol."
13234,"13,
No. 8 (Oct."
13235,"1995), pp."
13236,1465–1480.
13237,[Bryant 1988]  B.
13238,"Bryant, “Designing an Authentication System: A Dialogue in Four Scenes,” http:/ /web.mit.edu/ kerberos/www/ dialogue.html
[Bush 1945] V."
13239,"Bush, “As We May Think,” The Atlantic Monthly , July 1945."
13240,"http:/ /www.theatlantic.com/ unbound/ flashbks/computer/bushf.htm
[Byers 1998]  J."
13241,"Byers, M."
13242,"Luby, M."
13243,"Mitzenmacher, A."
13244,"Rege, “A Digital Fountain Approach to Reliable Distribution of Bulk Data,” Proc."
13245,"1998 ACM SIGCOMM (Vancouver,
Canada, Aug."
13246,"1998), pp."
13247,56–67.
13248,[Caesar 2005a]  M.
13249,"Caesar, D."
13250,"Caldwell, N."
13251,"Feamster, J."
13252,"Rexford, A."
13253,"Shaikh, J."
13254,"van der Merwe, “Design and implementation of a Routing Control Platform,” Proc."
13255,"Networked
Systems Design and Implementation  (May 2005)."
13256,[Caesar 2005b]  M.
13257,"Caesar, J."
13258,"Rexford, “BGP Routing Policies in ISP Networks,” IEEE Network Magazine , Vol."
13259,"19, No. 6 (Nov."
13260,2005).
13261,[Caldwell 2012] C.
13262,"Caldwell, “The Prime Pages,” http:/ /www.utm.edu/ research/ primes/prove
[Cardwell 2000] N."
13263,"Cardwell, S."
13264,"Savage, T."
13265,"Anderson, “Modeling TCP Latency,” Proc."
13266,"2000 IEEE INFOCOM (Tel-Aviv, Israel, Mar."
13267,2000).
13268,[Casado 2007]  M.
13269,"Casado, M."
13270,"Freedman, J."
13271,"Pettit, J."
13272,"Luo, N."
13273,"McKeown, S."
13274,"Shenker, “Ethane: Taking Control of the Enterprise,” Proc."
13275,"ACM SIGCOMM ’07, New York, pp."
13276,1–12.
13277,See also IEEE/ACM Trans.
13278,"Networking, 17, 4 (Aug."
13279,"2007), pp."
13280,270–1283.
13281,[Casado 2009]  M.
13282,"Casado, M."
13283,"Freedman, J."
13284,"Pettit, J."
13285,"Luo, N."
13286,"Gude, N."
13287,"McKeown, S."
13288,"Shenker, “Rethinking Enterprise Network Control,” IEEE/ACM Transactions on
Networking (ToN) , Vol."
13289,"17, No. 4 (Aug."
13290,"2009), pp."
13291,1270–1283.
13292,[Casado 2014]  M.
13293,"Casado, N."
13294,"Foster, A."
13295,"Guha, “Abstractions for Software-Defined Networks,” Communications of the ACM , Vol."
13296,"57 No. 10, (Oct."
13297,"2014), pp."
13298,86–95.
13299,[Cerf 1974]  V.
13300,"Cerf, R."
13301,"Kahn, “A Protocol for Packet Network Interconnection,” IEEE Transactions on Communications Technology , Vol."
13302,"COM-22, No. 5, pp."
13303,627–641.
13304,"[CERT 2001–09 ] CERT, “Advisory 2001–09: Statistical Weaknesses in TCP/IP Initial Sequence Numbers,” http:/ /www.cert.org/ advisories/CA-2001-09.html[CERT 2003–04]  CERT, “CERT Advisory CA-2003-04 MS-SQL Server Worm,” http:/ /www.cert.org/ advisories/CA-2003-04.html
[CERT 2016]  CERT, http:/ /www.cert.org
[CERT Filtering 2012] CERT, “Packet Filtering for Firewall Systems,” http://www.cert.org/ tech_tips/packet_filtering.html
[Cert SYN 1996]  CERT, “Advisory CA-96.21: TCP SYN Flooding and IP Spoofing Attacks,” http:/ /www.cert.org/ advisories/CA-1998-01.html
[Chandra 2007]  T."
13305,"Chandra, R."
13306,"Greisemer, J."
13307,"Redstone, “Paxos Made Live: an Engineering Perspective,” Proc."
13308,"of 2007 ACM Symposium on Principles of Distributed
Computing (PODC), pp."
13309,398–407.
13310,[Chao 2001] H.
13311,J.
13312,"Chao, C."
13313,"Lam, E."
13314,"Oki, Broadband Packet Switching Technologies—A Practical Guide to ATM Switches and IP Routers , John Wiley & Sons, 2001."
13315,[Chao 2011] C.
13316,"Zhang, P."
13317,"Dunghel, D."
13318,"Wu, K."
13319,W.
13320,"Ross, “Unraveling the BitTorrent Ecosystem,” IEEE Transactions on Parallel and Distributed Systems , Vol."
13321,"22, No. 7 (July
2011)."
13322,[Chen 2000] G.
13323,"Chen, D."
13324,"Kotz, “A Survey of Context-Aware Mobile Computing Research,” Technical Report TR2000-381 , Dept."
13325,"of Computer Science, Dartmouth College,
Nov."
13326,2000.
13327,"http:/ /www.cs.dartmouth.edu/ reports/TR2000-381.pdf
[Chen 2006] K.-T."
13328,"Chen, C.-Y."
13329,"Huang, P."
13330,"Huang, C.-L."
13331,"Lei, “Quantifying Skype User Satisfaction,” Proc."
13332,"2006 ACM SIGCOMM (Pisa, Italy, Sept."
13333,2006).
13334,[Chen 2011] Y.
13335,"Chen, S."
13336,"Jain, V."
13337,K.
13338,"Adhikari, Z."
13339,"Zhang, “Characterizing Roles of Front-End Servers in End-to-End Performance of Dynamic Content Distribution,” Proc."
13340,"2011
ACM Internet Measurement Conference  (Berlin, Germany, Nov."
13341,2011).
13342,[Cheswick 2000]  B.
13343,"Cheswick, H."
13344,"Burch, S."
13345,"Branigan, “Mapping and Visualizing the Internet,” Proc."
13346,"2000 Usenix Conference  (San Diego, CA, June 2000)."
13347,[Chiu 1989] D.
13348,"Chiu, R."
13349,"Jain, “Analysis of the Increase and Decrease Algorithms for Congestion Avoidance in Computer Networks,” Computer Networks and ISDN Systems ,
Vol."
13350,"17, No. 1, pp."
13351,1–14.
13352,"http:/ /www.cs.wustl.edu/ ~jain/ papers/cong_av.htm
[Christiansen 2001]  M."
13353,"Christiansen, K."
13354,"Jeffay, D."
13355,"Ott, F."
13356,D.
13357,"Smith, “Tuning Red for Web Traffic,” IEEE/ACM Transactions on Networking , Vol."
13358,"9, No. 3 (June 2001), pp."
13359,249–264.
13360,[Chuang 2005] S.
13361,"Chuang, S."
13362,"Iyer, N."
13363,"McKeown, “Practical Algorithms for Performance Guarantees in Buffered Crossbars,” Proc."
13364,"2005 IEEE INFOCOM.[Cisco 802.11ac 2014]  Cisco Systems, “802.11ac: The Fifth Generation of Wi-Fi,” Technical White Paper, Mar."
13365,2014.
13366,"[Cisco 7600 2016]  Cisco Systems, “Cisco 7600 Series Solution and Design Guide,” http:/ /www.cisco.com/ en/US/products/hw/ routers/ps368/prod_technical_
reference09186a0080092246.html
[Cisco 8500 2012]  Cisco Systems Inc., “Catalyst 8500 Campus Switch Router Architecture,”
http://www.cisco.com/univercd/cc/td/doc/product/l3sw/8540/rel_12_0/w5_6f/softcnfg/1cfg8500.pdf
[Cisco 12000 2016]  Cisco Systems Inc., “Cisco XR 12000 Series and Cisco 12000 Series Routers,” http:/ /www.cisco.com/ en/US/products/ps6342/index.html
[Cisco 2012]  Cisco 2012, Data Centers, http:/ /www.cisco.com/ go/dce
[Cisco 2015]  Cisco Visual Networking Index: Forecast and Methodology, 2014–2019, White Paper, 2015."
13367,"[Cisco 6500 2016]  Cisco Systems, “Cisco Catalyst 6500 Architecture White Paper,” http:/ /www.cisco.com/ c/en/us/products/collateral/switches/ catalyst-6500-series-
switches/prod_white_paper0900aecd80673385.html
[Cisco NAT 2016]  Cisco Systems Inc., “How NAT Works,” http://www.cisco.com/en/US/tech/tk648/tk361/technologies_tech_note09186a0080094831.shtml
[Cisco QoS 2016] Cisco Systems Inc., “Advanced QoS Services for the Intelligent Internet,” http://www.cisco.com/warp/public/cc/pd/iosw/ioft/ioqo/tech/qos_wp.htm
[Cisco Queue 2016] Cisco Systems Inc., “Congestion Management Overview,” http:/ /www.cisco.com/ en/US/docs/ios/12_2/qos/configuration/ guide/ qcfconmg.html
[Cisco SYN 2016]  Cisco Systems Inc., “Defining Strategies to Protect Against TCP SYN Denial of Service Attacks,” http:/ /www.cisco.com/ en/US/tech/tk828/
technologies_tech_note09186a00800f67d5.shtml
[Cisco TCAM 2014]  Cisco Systems Inc., “CAT 6500 and 7600 Series Routers and Switches TCAM Allocation Adjustment Procedures,” http:/ /www.cisco.com/ c/en/us/
support/ docs/switches/catalyst-6500-series-switches/ 117712-problemsolution-cat6500-00.html
[Cisco VNI 2015] Cisco Systems Inc., “Visual Networking Index,” http:/ /www.cisco.com/ web/solutions/ sp/vni/vni_forecast_highlights/ index.html
[Clark 1988]  D."
13368,"Clark, “The Design Philosophy of the DARPA Internet Protocols,” Proc."
13369,"1988 ACM SIGCOMM (Stanford, CA, Aug."
13370,1988).[Cohen 1977] D.
13371,"Cohen, “Issues in Transnet Packetized Voice Communication,” Proc."
13372,"Fifth Data Communications Symposium  (Snowbird, UT, Sept."
13373,"1977), pp."
13374,6–13.
13375,"[Cookie Central 2016]  Cookie Central homepage, http:/ /www.cookiecentral.com/  n_cookie_faq.htm
[Cormen 2001]  T."
13376,H.
13377,"Cormen, Introduction to Algorithms,  2nd Ed., MIT Press, Cambridge, MA, 2001."
13378,[Crow 1997] B.
13379,"Crow, I."
13380,"Widjaja, J."
13381,"Kim, P."
13382,"Sakai, “IEEE 802.11 Wireless Local Area Networks,” IEEE Communications Magazine  (Sept."
13383,"1997), pp."
13384,116–126.
13385,[Cusumano 1998] M.
13386,A.
13387,"Cusumano, D."
13388,B.
13389,"Yoffie, Competing on Internet Time: Lessons from Netscape and Its Battle with Microsoft , Free Press, New York, NY, 1998."
13390,[Czyz 2014]  J.
13391,"Czyz, M."
13392,"Allman, J."
13393,"Zhang, S."
13394,"Iekel-Johnson, E."
13395,"Osterweil, M."
13396,"Bailey, “Measuring IPv6 Adoption,” Proc."
13397,"ACM SIGCOMM 2014, ACM, New York, NY, USA,
pp."
13398,87–98.
13399,[Dahlman 1998]  E.
13400,"Dahlman, B."
13401,"Gudmundson, M."
13402,"Nilsson, J."
13403,"Sköld, “UMTS/IMT-2000 Based on Wideband CDMA,” IEEE Communications Magazine  (Sept."
13404,"1998), pp."
13405,70–80.
13406,[Daigle 1991] J.
13407,N.
13408,"Daigle, Queuing Theory for Telecommunications , Addison-Wesley, Reading, MA, 1991."
13409,"[DAM 2016]  Digital Attack Map, http:/ /www.digitalattackmap.com
[Davie 2000]  B."
13410,Davie and Y.
13411,"Rekhter, MPLS: Technology and Applications , Morgan Kaufmann Series in Networking, 2000."
13412,[Davies 2005]  G.
13413,"Davies, F."
13414,"Kelly, “Network Dimensioning, Service Costing, and Pricing in a Packet-Switched Environment,” Telecommunications Policy , Vol."
13415,"28, No. 4, pp."
13416,391–412.
13417,"[DEC 1990]  Digital Equipment Corporation, “In Memoriam: J."
13418,C.
13419,R.
13420,"Licklider 1915–1990,” SRC Research Report 61, Aug."
13421,1990.
13422,"http://www.memex.org/ licklider.pdf
[DeClercq 2002]  J."
13423,"DeClercq, O."
13424,"Paridaens, “Scalability Implications of Virtual Private Networks,” IEEE Communications Magazine , Vol."
13425,"40, No. 5 (May 2002), pp."
13426,151–157.
13427,[Demers 1990]  A.
13428,"Demers, S."
13429,"Keshav, S."
13430,"Shenker, “Analysis and Simulation of a Fair Queuing Algorithm,” Internetworking: Research and Experience,  Vol."
13431,"1, No. 1 (1990),
pp."
13432,"3–26.[dhc 2016] IETF Dynamic Host Configuration working group homepage, http:/ /www.ietf.org/ html.charters/dhc-charter.html
[Dhungel 2012] P."
13433,"Dhungel, K."
13434,W.
13435,"Ross, M."
13436,"Steiner., Y."
13437,"Tian, X."
13438,"Hei, “Xunlei: Peer-Assisted Download Acceleration on a Massive Scale,” Passive and Active Measurement
Conference (PAM) 2012 , Vienna, 2012."
13439,[Diffie 1976] W.
13440,"Diffie, M."
13441,E.
13442,"Hellman, “New Directions in Cryptography,” IEEE Transactions on Information Theory , Vol IT-22 (1976), pp."
13443,644–654.
13444,[Diggavi 2004] S.
13445,N.
13446,"Diggavi, N."
13447,"Al-Dhahir, A."
13448,"Stamoulis, R."
13449,"Calderbank, “Great Expectations: The Value of Spatial Diversity in Wireless Networks,” Proceedings of the
IEEE, Vol."
13450,"92, No. 2 (Feb."
13451,2004).
13452,[Dilley 2002] J.
13453,"Dilley, B."
13454,"Maggs, J."
13455,"Parikh, H."
13456,"Prokop, R."
13457,"Sitaraman, B."
13458,"Weihl, “Globally Distributed Content Delivert,” IEEE Internet Computing (Sept.–Oct."
13459,2002).
13460,[Diot 2000] C.
13461,"Diot, B."
13462,N.
13463,"Levine, B."
13464,"Lyles, H."
13465,"Kassem, D."
13466,"Balensiefen, “Deployment Issues for the IP Multicast Service and Architecture,” IEEE Network, Vol."
13467,"14, No. 1
(Jan./Feb."
13468,2000) pp.
13469,78–88.
13470,[Dischinger 2007] M.
13471,"Dischinger, A."
13472,"Haeberlen, K."
13473,"Gummadi, S."
13474,"Saroiu, “Characterizing residential broadband networks,” Proc."
13475,"2007 ACM Internet Measurement
Conference , pp."
13476,24–26.
13477,[Dmitiropoulos 2007] X.
13478,"Dmitiropoulos, D."
13479,"Krioukov, M."
13480,"Fomenkov, B."
13481,"Huffaker, Y."
13482,"Hyun, K."
13483,C.
13484,"Claffy, G."
13485,"Riley, “AS Relationships: Inference and Validation,” ACM
Computer Communication Review  (Jan."
13486,2007).
13487,"[DOCSIS 2011] Data-Over-Cable Service Interface Specifications, DOCSIS 3.0: MAC and Upper Layer Protocols Interface Specification, CM-SP-MULPIv3.0-I16-110623,
2011."
13488,[Dodge 2016] M.
13489,"Dodge, “An Atlas of Cyberspaces,” http://www.cybergeography.org/ atlas/isp_maps.html
[Donahoo 2001] M."
13490,"Donahoo, K."
13491,"Calvert, TCP/IP Sockets in C: Practical Guide for Programmers, Morgan Kaufman, 2001."
13492,"[DSL 2016] DSL Forum homepage, http:/ /www.dslforum.org/
[Dhunghel 2008] P."
13493,"Dhungel, D."
13494,"Wu, B."
13495,"Schonhorst, K.W. Ross, “A Measurement Study of Attacks on BitTorrent Leechers,” 7th International Workshop on Peer-to-Peer
Systems (IPTPS 2008) (Tampa Bay, FL, Feb."
13496,2008).
13497,[Droms 2002]  R.
13498,"Droms, T."
13499,"Lemon, The DHCP Handbook  (2nd Edition), SAMS Publishing, 2002.[Edney 2003] J."
13500,Edney and W.
13501,A.
13502,"Arbaugh, Real 802.11 Security: Wi-Fi Protected Access and 802.11i , Addison-Wesley Professional, 2003."
13503,[Edwards 2011] W.
13504,K.
13505,"Edwards, R."
13506,"Grinter, R."
13507,"Mahajan, D."
13508,"Wetherall, “Advancing the State of Home Networking,” Communications of the ACM , Vol."
13509,"54, No. 6 (June 2011),
pp."
13510,62–71.
13511,[Ellis 1987] H.
13512,"Ellis, “The Story of Non-Secret Encryption,” http://jya.com/ellisdoc.htm
[Erickson 2013]  D."
13513,"Erickson, “ The Beacon Openflow Controller,” 2nd ACM SIGCOMM Workshop on Hot Topics in Software Defined Networking  (HotSDN ’13)."
13514,"ACM, New
York, NY, USA, pp."
13515,13–18.
13516,"[Ericsson 2012]  Ericsson, “The Evolution of Edge,” http://www.ericsson.com/technology/whitepapers/broadband/evolution_of_EDGE.shtml
[Facebook 2014] A."
13517,"Andreyev, “Introducing Data Center Fabric, the Next-Generation Facebook Data Center Network,”
https://code.facebook.com/posts/360346274145943/introducing-data-center-fabric-the-next-generation-facebook-data-center-network
[Faloutsos 1999] C."
13518,"Faloutsos, M."
13519,"Faloutsos, P."
13520,"Faloutsos, “What Does the Internet Look Like?"
13521,"Empirical Laws of the Internet Topology,” Proc."
13522,"1999 ACM SIGCOMM
(Boston, MA, Aug."
13523,1999).
13524,[Farrington 2010] N.
13525,"Farrington, G."
13526,"Porter, S."
13527,"Radhakrishnan, H."
13528,"Bazzaz, V."
13529,"Subramanya, Y."
13530,"Fainman, G."
13531,"Papen, A."
13532,"Vahdat, “Helios: A Hybrid Electrical/Optical Switch
Architecture for Modular Data Centers,” Proc."
13533,2010 ACM SIGCOMM.
13534,[Feamster 2004]  N.
13535,"Feamster, H."
13536,"Balakrishnan, J."
13537,"Rexford, A."
13538,"Shaikh, K."
13539,"van der Merwe, “The Case for Separating Routing from Routers,” ACM SIGCOMM Workshop on
Future Directions in Network Architecture , Sept."
13540,2004.
13541,[Feamster 2004]  N.
13542,"Feamster, J."
13543,"Winick, J."
13544,"Rexford, “A Model for BGP Routing for Network Engineering,” Proc."
13545,"2004 ACM SIGMETRICS (New York, NY, June 2004)."
13546,[Feamster 2005]  N.
13547,"Feamster, H."
13548,"Balakrishnan, “Detecting BGP Configuration Faults with Static Analysis,” NSDI (May 2005)."
13549,[Feamster 2013]  N.
13550,"Feamster, J."
13551,"Rexford, E."
13552,"Zegura, “The Road to SDN,” ACM Queue, Volume 11, Issue 12, (Dec."
13553,2013).
13554,[Feldmeier 1995]  D.
13555,"Feldmeier, “Fast Software Implementation of Error Detection Codes,” IEEE/ACM Transactions on Networking , Vol."
13556,"3, No. 6 (Dec."
13557,"1995), pp."
13558,640–652.[Ferguson 2013] A.
13559,"Ferguson, A."
13560,"Guha, C."
13561,"Liang, R."
13562,"Fonseca, S."
13563,"Krishnamurthi, “Participatory Networking: An API for Application Control of SDNs,” Proceedings ACM
SIGCOMM 2013, pp."
13564,327–338.
13565,[Fielding 2000]  R.
13566,"Fielding, “Architectural Styles and the Design of Network-based Software Architectures,” 2000."
13567,"PhD Thesis, UC Irvine, 2000."
13568,"[FIPS 1995] Federal Information Processing Standard, “Secure Hash Standard,” FIPS Publication 180-1."
13569,"http:/ /www.itl.nist.gov/ fipspubs/ fip180-1.htm
[Floyd 1999] S."
13570,"Floyd, K."
13571,"Fall, “Promoting the Use of End-to-End Congestion Control in the Internet,” IEEE/ACM Transactions on Networking , Vol."
13572,"6, No. 5 (Oct."
13573,"1998), pp."
13574,458–472.
13575,[Floyd 2000] S.
13576,"Floyd, M."
13577,"Handley, J."
13578,"Padhye, J."
13579,"Widmer, “Equation-Based Congestion Control for Unicast Applications,” Proc."
13580,"2000 ACM SIGCOMM (Stockholm, Sweden,
Aug."
13581,2000).
13582,[Floyd 2001] S.
13583,"Floyd, “A Report on Some Recent Developments in TCP Congestion Control,” IEEE Communications Magazine  (Apr."
13584,2001).
13585,[Floyd 2016] S.
13586,"Floyd, “References on RED (Random Early Detection) Queue Management,” http:/ /www.icir.org/ floyd/ red.html
[Floyd Synchronization 1994]  S."
13587,"Floyd, V."
13588,"Jacobson, “Synchronization of Periodic Routing Messages,” IEEE/ACM Transactions on Networking , Vol."
13589,"2, No. 2 (Apr."
13590,"1997)
pp."
13591,122–136.
13592,[Floyd TCP 1994] S.
13593,"Floyd, “TCP and Explicit Congestion Notification,” ACM SIGCOMM Computer Communications Review , Vol."
13594,"24, No. 5 (Oct."
13595,"1994), pp."
13596,10–23.
13597,[Fluhrer 2001] S.
13598,"Fluhrer, I."
13599,"Mantin, A."
13600,"Shamir, “Weaknesses in the Key Scheduling Algorithm of RC4,” Eighth Annual Workshop on Selected Areas in Cryptography
(Toronto, Canada, Aug."
13601,2002).
13602,[Fortz 2000] B.
13603,"Fortz, M."
13604,"Thorup, “Internet Traffic Engineering by Optimizing OSPF Weights,” Proc."
13605,"2000 IEEE INFOCOM (Tel Aviv, Israel, Apr."
13606,2000).
13607,[Fortz 2002] B.
13608,"Fortz, J."
13609,"Rexford, M."
13610,"Thorup, “Traffic Engineering with Traditional IP Routing Protocols,” IEEE Communication Magazine  (Oct."
13611,2002).
13612,[Fraleigh 2003] C.
13613,"Fraleigh, F."
13614,"Tobagi, C."
13615,"Diot, “Provisioning IP Backbone Networks to Support Latency Sensitive Traffic,” Proc."
13616,"2003 IEEE INFOCOM (San Francisco, CA,
Mar."
13617,2003).
13618,[Frost 1994] J.
13619,"Frost, “BSD Sockets: A Quick and Dirty Primer,” http://world.std .com/~jimf/papers/sockets/sockets.html[FTC 2015] Internet of Things: Privacy and Security in a Connected World, Federal Trade Commission, 2015, https://www.ftc.gov/ system/ files/documents/reports/
federal-trade-commission-staff-report-november-2013-workshop-entitled-internet-things-privacy/ 150127iotrpt.pdf
[FTTH 2016] Fiber to the Home Council, http:/ /www.ftthcouncil.org/
[Gao 2001] L."
13620,"Gao, J."
13621,"Rexford, “Stable Internet Routing Without Global Coordination,” IEEE/ACM Transactions on Networking , Vol."
13622,"9, No. 6 (Dec."
13623,"2001), pp."
13624,681–692.
13625,"[Gartner 2014]  Gartner report on Internet of Things, http:/ /www.gartner.com/  technology/ research/ internet-of-things
[Gauthier 1999] L."
13626,"Gauthier, C."
13627,"Diot, and J."
13628,"Kurose, “End-to-End Transmission Control Mechanisms for Multiparty Interactive Applications on the Internet,” Proc."
13629,"1999 IEEE
INFOCOM (New York, NY, Apr."
13630,1999).
13631,[Gember-Jacobson 2014]  A.
13632,"Gember-Jacobson, R."
13633,"Viswanathan, C."
13634,"Prakash, R."
13635,"Grandl, J."
13636,"Khalid, S."
13637,"Das, A."
13638,"Akella, “OpenNF: Enabling Innovation in Network Function
Control,” Proc."
13639,"ACM SIGCOMM 2014, pp."
13640,163–174.
13641,[Goodman 1997] David J.
13642,"Goodman, Wireless Personal Communications Systems , Prentice-Hall, 1997."
13643,[Google IPv6 2015] Google Inc.
13644,"“IPv6 Statistics,” https://www.google.com/ intl/en/ipv6/statistics.html
[Google Locations 2016]  Google data centers."
13645,"http:/ /www.google.com/ corporate/datacenter/locations.html
[Goralski 1999] W."
13646,"Goralski, Frame Relay for High-Speed Networks , John Wiley, New York, 1999."
13647,[Greenberg 2009a]  A.
13648,"Greenberg, J."
13649,"Hamilton, D."
13650,"Maltz, P."
13651,"Patel, “The Cost of a Cloud: Research Problems in Data Center Networks,” ACM Computer Communications
Review  (Jan."
13652,2009).
13653,[Greenberg 2009b] A.
13654,"Greenberg, N."
13655,"Jain, S."
13656,"Kandula, C."
13657,"Kim, P."
13658,"Lahiri, D."
13659,"Maltz, P."
13660,"Patel, S."
13661,"Sengupta, “VL2: A Scalable and Flexible Data Center Network,” Proc."
13662,"2009
ACM SIGCOMM."
13663,[Greenberg 2011]  A.
13664,"Greenberg, J."
13665,"Hamilton, N."
13666,"Jain, S."
13667,"Kandula, C."
13668,"Kim, P."
13669,"Lahiri, D."
13670,"Maltz, P."
13671,"Patel, S."
13672,"Sengupta, “VL2: A Scalable and Flexible Data Center Network,”
Communications of the ACM , Vol."
13673,"54, No. 3 (Mar."
13674,"2011), pp."
13675,95–104.
13676,[Greenberg 2015] A.
13677,"Greenberg, “SDN for the Cloud,” Sigcomm 2015 Keynote Address, http:/ /conferences.sigcomm.org/sigcomm/2015/pdf/ papers/keynote.pdf[Griffin 2012] T."
13678,"Griffin, “Interdomain Routing Links,” http:/ /www.cl.cam.ac.uk/ ~tgg22/interdomain/
[Gude 2008] N."
13679,"Gude, T."
13680,"Koponen, J."
13681,"Pettit, B."
13682,"Pfaff, M."
13683,"Casado, N."
13684,"McKeown, and S."
13685,"Shenker, “NOX: Towards an Operating System for Networks,”  ACM SIGCOMM
Computer Communication Review, July 2008."
13686,[Guha 2006] S.
13687,"Guha, N."
13688,"Daswani, R."
13689,"Jain, “An Experimental Study of the Skype Peer-to-Peer VoIP System,” Proc."
13690,Fifth Int.
13691,"Workshop on P2P Systems  (Santa Barbara,
CA, 2006)."
13692,[Guo 2005] L.
13693,"Guo, S."
13694,"Chen, Z."
13695,"Xiao, E."
13696,"Tan, X."
13697,"Ding, X."
13698,"Zhang, “Measurement, Analysis, and Modeling of BitTorrent-Like Systems,” Proc."
13699,"2005 ACM Internet Measurement
Conference ."
13700,[Guo 2009] C.
13701,"Guo, G."
13702,"Lu, D."
13703,"Li, H."
13704,"Wu, X."
13705,"Zhang, Y."
13706,"Shi, C."
13707,"Tian, Y."
13708,"Zhang, S."
13709,"Lu, “BCube: A High Performance, Server-centric Network Architecture for Modular Data
Centers,” Proc."
13710,2009 ACM SIGCOMM.
13711,[Gupta 2001] P.
13712,"Gupta, N."
13713,"McKeown, “Algorithms for Packet Classification,” IEEE Network Magazine , Vol."
13714,"15, No. 2 (Mar./Apr."
13715,"2001), pp."
13716,24–32.
13717,[Gupta 2014] A.
13718,"Gupta, L."
13719,"Vanbever, M."
13720,"Shahbaz, S."
13721,"Donovan, B."
13722,"Schlinker, N."
13723,"Feamster, J."
13724,"Rexford, S."
13725,"Shenker, R."
13726,"Clark, E."
13727,"Katz-Bassett, “SDX: A Software Defined
Internet Exchange, “ Proc."
13728,ACM SIGCOMM 2014 (Aug.
13729,"2014), pp."
13730,551–562.
13731,[Ha 2008]  S.
13732,"Ha, I."
13733,"Rhee, L."
13734,"Xu, “CUBIC: A New TCP-Friendly High-Speed TCP Variant,” ACM SIGOPS Operating System Review, 2008."
13735,[Halabi 2000] S.
13736,"Halabi, Internet Routing Architectures,  2nd Ed., Cisco Press, 2000."
13737,[Hanabali 2005] A.
13738,A.
13739,"Hanbali, E."
13740,"Altman, P."
13741,"Nain, “A Survey of TCP over Ad Hoc Networks,” IEEE Commun."
13742,"Surveys and Tutorials, Vol."
13743,"7, No. 3 (2005), pp."
13744,22–36.
13745,[Hei 2007]  X.
13746,"Hei, C."
13747,"Liang, J."
13748,"Liang, Y."
13749,"Liu, K."
13750,W.
13751,"Ross, “A Measurement Study of a Large-scale P2P IPTV System,” IEEE Trans."
13752,on Multimedia  (Dec.
13753,2007).
13754,[Heidemann 1997]  J.
13755,"Heidemann, K."
13756,"Obraczka, J."
13757,"Touch, “Modeling the Performance of HTTP over Several Transport Protocols,” IEEE/ACM Transactions on Networking ,
Vol."
13758,"5, No. 5 (Oct."
13759,"1997), pp."
13760,616–630.
13761,[Held 2001] G.
13762,"Held, Data Over Wireless Networks: Bluetooth, WAP, and Wireless LANs , McGraw-Hill, 2001."
13763,[Holland 2001]  G.
13764,"Holland, N."
13765,"Vaidya, V."
13766,"Bahl, “A Rate-Adaptive MAC Protocol for Multi-Hop Wireless Networks,” Proc."
13767,2001 ACM Int.
13768,"Conference of Mobile Computing andNetworking (Mobicom01)  (Rome, Italy, July 2001)."
13769,"[Hollot 2002] C.V. Hollot, V."
13770,"Misra, D."
13771,"Towsley, W."
13772,"Gong, “Analysis and Design of Controllers for AQM Routers Supporting TCP Flows,” IEEE Transactions on Automatic
Control , Vol."
13773,"47, No. 6 (June 2002), pp."
13774,945–959.
13775,[Hong 2013] C.
13776,"Hong, S, Kandula, R."
13777,"Mahajan, M.Zhang, V."
13778,"Gill, M."
13779,"Nanduri, R."
13780,"Wattenhofer, “Achieving High Utilization with Software-driven WAN,” ACM SIGCOMM
Conference  (Aug."
13781,"2013), pp.15–26."
13782,[Huang 2002] C.
13783,"Haung, V."
13784,"Sharma, K."
13785,"Owens, V."
13786,"Makam, “Building Reliable MPLS Networks Using a Path Protection Mechanism,” IEEE Communications Magazine , Vol."
13787,"40, No. 3 (Mar."
13788,"2002), pp."
13789,156–162.
13790,[Huang 2005] Y.
13791,"Huang, R."
13792,"Guerin, “Does Over-Provisioning Become More or Less Efficient as Networks Grow Larger?,” Proc."
13793,IEEE Int.
13794,Conf.
13795,"Network Protocols (ICNP)
(Boston MA, Nov."
13796,2005).
13797,[Huang 2008] C.
13798,"Huang, J."
13799,"Li, A."
13800,"Wang, K."
13801,W.
13802,"Ross, “Understanding Hybrid CDN-P2P: Why Limelight Needs Its Own Red Swoosh,” Proc."
13803,"2008 NOSSDAV, Braunschweig,
Germany."
13804,[Huitema 1998]  C.
13805,"Huitema, IPv6: The New Internet Protocol, 2nd Ed., Prentice Hall, Englewood Cliffs, NJ, 1998."
13806,[Huston 1999a] G.
13807,"Huston, “Interconnection, Peering, and Settlements—Part I,” The Internet Protocol Journal , Vol."
13808,"2, No. 1 (Mar."
13809,1999).
13810,[Huston 2004] G.
13811,"Huston, “NAT Anatomy: A Look Inside Network Address Translators,” The Internet Protocol Journal , Vol."
13812,"7, No. 3 (Sept."
13813,2004).
13814,[Huston 2008a] G.
13815,"Huston, “Confronting IPv4 Address Exhaustion,” http:/ /www.potaroo.net/ ispcol/ 2008-10/ v4depletion.html
[Huston 2008b] G."
13816,"Huston, G."
13817,"Michaelson, “IPv6 Deployment: Just where are we?” http:/ /www.potaroo.net/ ispcol/ 2008-04/ ipv6.html
[Huston 2011a] G."
13818,"Huston, “A Rough Guide to Address Exhaustion,” The Internet Protocol Journal,  Vol."
13819,"14, No. 1 (Mar."
13820,2011).
13821,[Huston 2011b] G.
13822,"Huston, “Transitioning Protocols,” The Internet Protocol Journal , Vol."
13823,"14, No. 1 (Mar."
13824,2011).
13825,"[IAB 2016]  Internet Architecture Board homepage, http:/ /www.iab.org/[IANA Protocol Numbers 2016]  Internet Assigned Numbers Authority, Protocol Numbers, http:/ /www.iana.org/ assignments/protocol-numbers/ protocol-numbers.xhtml
[IBM 1997] IBM Corp., IBM Inside APPN - The Essential Guide to the Next-Generation SNA , SG24-3669-03, June 1997."
13826,"[ICANN 2016]  The Internet Corporation for Assigned Names and Numbers homepage, http:/ /www.icann.org
[IEEE 802 2016]  IEEE 802 LAN/MAN Standards Committee homepage, http:/ /www.ieee802.org/
[IEEE 802.11 1999]  IEEE 802.11, “1999 Edition (ISO/IEC 8802-11: 1999) IEEE Standards for Information Technology—Telecommunications and Information Exchange
Between Systems—Local and Metropolitan Area Network—Specific Requirements—Part 11: Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY)
Specification,” http://standards.ieee.org/getieee802/download/802.11-1999.pdf
[IEEE 802.11ac 2013]  IEEE, “802.11ac-2013—IEEE Standard for Information technology—Telecommunications and Information Exchange Between Systems—Local and
Metropolitan Area Networks—Specific Requirements—Part 11: Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) Specifications—Amendment 4:
Enhancements for Very High Throughput for Operation in Bands Below 6 GHz.”
[IEEE 802.11n 2012] IEEE, “IEEE P802.11—Task Group N—Meeting Update: Status of 802.11n,” http://grouper.ieee.org/ groups/ 802/11/Reports/tgn_update .htm
[IEEE 802.15 2012]  IEEE 802.15 Working Group for WPAN homepage, http:/ /grouper.ieee.org/ groups/ 802/15/."
13827,"[IEEE 802.15.4 2012]  IEEE 802.15 WPAN Task Group 4, http:/ /www.ieee802.org/15/pub/ TG4.html
[IEEE 802.16d 2004] IEEE, “IEEE Standard for Local and Metropolitan Area Networks, Part 16: Air Interface for Fixed Broadband Wireless Access Systems,” http:/ /
standards.ieee.org/getieee802/ download/ 802.16-2004.pdf
[IEEE 802.16e 2005]  IEEE, “IEEE Standard for Local and Metropolitan Area Networks, Part 16: Air Interface for Fixed and Mobile Broadband Wireless Access Systems,
Amendment 2: Physical and Medium Access Control Layers for Combined Fixed and Mobile Operation in Licensed Bands and Corrigendum 1,” http:/ /
standards.ieee.org/getieee802/ download/ 802.16e-2005.pdf
[IEEE 802.1q 2005] IEEE, “IEEE Standard for Local and Metropolitan Area Networks: Virtual Bridged Local Area Networks,” http:/ /standards.ieee.org/ getieee802/
download/ 802.1Q-2005.pdf
[IEEE 802.1X] IEEE Std 802.1X-2001 Port-Based Network Access Control, http://standards.ieee.org/reading/ieee/std_public/description/lanman/ 802.1x-2001_desc.html[IEEE 802.3 2012] IEEE, “IEEE 802.3 CSMA/CD (Ethernet),” http:/ /grouper.ieee.org/ groups/ 802/3/
[IEEE 802.5 2012] IEEE, IEEE 802.5 homepage, http://www.ieee802.org/5/ www8025org/
[IETF 2016] Internet Engineering Task Force homepage, http:/ /www.ietf.org
[Ihm 2011] S."
13828,"Ihm, V."
13829,S.
13830,"Pai, “Towards Understanding Modern Web Traffic,” Proc."
13831,2011 ACM Internet Measurement Conference  (Berlin).
13832,"[IMAP 2012] The IMAP Connection, http://www.imap.org/[Intel 2016] Intel Corp., “Intel 710 Ethernet Adapter,” http:/ /www.intel.com/  content/ www/ us/en/ethernet-products/converged-network-adapters/ethernet-xl710 .html
[Internet2 Multicast 2012] Internet2 Multicast Working Group homepage, http://www.internet2.edu/multicast/
[ISC 2016] Internet Systems Consortium homepage, http:/ /www.isc.org
[ISI 1979] Information Sciences Institute, “DoD Standard Internet Protocol,” Internet Engineering Note 123 (Dec."
13833,"1979), http:/ /www.isi.edu/ in-notes/ ien/ ien123.txt
[ISO 2016] International Organization for Standardization homepage, International Organization for Standardization, http:/ /www.iso.org/
[ISO X.680 2002] International Organization for Standardization, “X.680: ITU-T Recommendation X.680 (2002) Information Technology—Abstract Syntax Notation One
(ASN.1): Specification of Basic Notation,” http:/ /www.itu.int/ ITU-T/ studygroups/ com17/languages/X.680-0207.pdf
[ITU 1999] Asymmetric Digital Subscriber Line (ADSL) Transceivers."
13834,"ITU-T G.992.1, 1999.[ITU 2003] Asymmetric Digital Subscriber Line (ADSL) Transceivers—Extended Bandwidth ADSL2 (ADSL2Plus)."
13835,"ITU-T G.992.5, 2003."
13836,"[ITU 2005a] International Telecommunication Union, “ITU-T X.509, The Directory: Public-key and attribute certificate frameworks” (Aug."
13837,2005).
13838,"[ITU 2006] ITU, “G.993.1: Very High Speed Digital Subscriber Line Transceivers (VDSL),” https://www.itu.int/rec/T-REC-G.993.1-200406-I/en, 2006.[ITU 2015] “Measuring the Information Society Report,” 2015, http:/ /www.itu.int/ en/ITU-D/Statistics/Pages/publications/ mis2015.aspx[ITU 2012] The ITU homepage, http:/ /www.itu.int/
[ITU-T Q.2931 1995] International Telecommunication Union, “Recommendation Q.2931 (02/95)—Broadband Integrated Services Digital Network (B-ISDN)— Digital
Subscriber Signalling System No. 2 (DSS 2)—User-Network Interface (UNI)—Layer 3 Specification for Basic Call/Connection Control.”
[IXP List 2016] List of IXPs, Wikipedia, https://en.wikipedia.org/ wiki/ List_of_ Internet_exchange_points
[Iyengar 2015]  J."
13839,"Iyengar, I."
13840,"Swett, “QUIC: A UDP-Based Secure and Reliable Transport for HTTP/2,” Internet Draft draft-tsvwg-quic-protocol-00, June 2015."
13841,[Iyer 2008]  S.
13842,"Iyer, R."
13843,R.
13844,"Kompella, N."
13845,"McKeown, “Designing Packet Buffers for Router Line Cards,” IEEE Transactions on Networking , Vol."
13846,"16, No. 3 (June 2008), pp."
13847,705–717.
13848,[Jacobson 1988] V.
13849,"Jacobson, “Congestion Avoidance and Control,” Proc."
13850,"1988 ACM SIGCOMM (Stanford, CA, Aug."
13851,"1988), pp."
13852,314–329.
13853,[Jain 1986] R.
13854,"Jain, “A Timeout-Based Congestion Control Scheme for Window Flow-Controlled Networks,” IEEE Journal on Selected Areas in Communications SAC-4 , 7
(Oct."
13855,1986).
13856,[Jain 1989] R.
13857,"Jain, “A Delay-Based Approach for Congestion Avoidance in Interconnected Heterogeneous Computer Networks,” ACM SIGCOMM Computer
Communications Review , Vol."
13858,"19, No. 5 (1989), pp."
13859,56–71.
13860,[Jain 1994] R.
13861,"Jain, FDDI Handbook: High-Speed Networking Using Fiber and Other Media , Addison-Wesley, Reading, MA, 1994."
13862,[Jain 1996] R.
13863,Jain.
13864,S.
13865,"Kalyanaraman, S."
13866,"Fahmy, R."
13867,"Goyal, S."
13868,"Kim, “Tutorial Paper on ABR Source Behavior,” ATM Forum/96-1270, Oct."
13869,1996.
13870,"http://www.cse.wustl.edu/
~jain/ atmf/ftp/atm96-1270.pdf
[Jain 2013] S."
13871,"Jain, A."
13872,"Kumar, S."
13873,"Mandal, J."
13874,"Ong, L."
13875,"Poutievski, A."
13876,"Singh, S.Venkata, J."
13877,"Wanderer, J."
13878,"Zhou, M."
13879,"Zhu, J."
13880,"Zolla, U."
13881,"Hölzle, S."
13882,"Stuart, A, Vahdat, “B4: Experience
with a Globally Deployed Software Defined Wan,” ACM SIGCOMM 2013, pp."
13883,3–14.
13884,[Jaiswal 2003]  S.
13885,"Jaiswal, G."
13886,"Iannaccone, C."
13887,"Diot, J."
13888,"Kurose, D."
13889,"Towsley, “Measurement and Classification of Out-of-Sequence Packets in a Tier-1 IP backbone,” Proc."
13890,2003 IEEE INFOCOM.
13891,[Ji 2003] P.
13892,"Ji, Z."
13893,"Ge, J."
13894,"Kurose, D."
13895,"Towsley, “A Comparison of Hard-State and Soft-State Signaling Protocols,” Proc."
13896,"2003 ACM SIGCOMM (Karlsruhe, Germany, Aug."
13897,2003).[Jimenez 1997]  D.
13898,"Jimenez, “Outside Hackers Infiltrate MIT Network, Compromise Security,” The Tech, Vol."
13899,"117, No 49 (Oct."
13900,"1997), p."
13901,"1, http://www-tech.mit.edu/ V117/
N49/hackers.49n.html
[Jin 2004] C."
13902,"Jin, D."
13903,X.
13904,"We, S."
13905,"Low, “FAST TCP: Motivation, Architecture, Algorithms, Performance,” Proc."
13906,"2004 IEEE INFOCOM (Hong Kong, Mar."
13907,2004).
13908,"[Juniper Contrail 2016] Juniper Networks, “Contrail,” http:/ /www.juniper.net/ us/en/products-services/ sdn/contrail/
[Juniper MX2020 2015]  Juniper Networks, “MX2020 and MX2010 3D Universal Edge Routers,” www.juniper.net/us/en/local/pdf/.../1000417-en.pdf
[Kaaranen 2001]  H."
13909,"Kaaranen, S."
13910,"Naghian, L."
13911,"Laitinen, A."
13912,"Ahtiainen, V."
13913,"Niemi, Networks: Architecture, Mobility and Services , New York: John Wiley & Sons, 2001."
13914,[Kahn 1967] D.
13915,"Kahn, The Codebreakers: The Story of Secret Writing , The Macmillan Company, 1967."
13916,[Kahn 1978] R.
13917,E.
13918,"Kahn, S."
13919,"Gronemeyer, J."
13920,"Burchfiel, R."
13921,"Kunzelman, “Advances in Packet Radio Technology,” Proc."
13922,"1978 IEEE INFOCOM, 66, 11 (Nov."
13923,1978).
13924,[Kamerman 1997]  A.
13925,"Kamerman, L."
13926,"Monteban, “WaveLAN-II: A High– Performance Wireless LAN for the Unlicensed Band,” Bell Labs Technical Journal  (Summer 1997),
pp."
13927,118–133.
13928,[Kar 2000]  K.
13929,"Kar, M."
13930,"Kodialam, T."
13931,V.
13932,"Lakshman, “Minimum Interference Routing of Bandwidth Guaranteed Tunnels with MPLS Traffic Engineering Applications,” IEEE J."
13933,Selected Areas in Communications  (Dec.
13934,2000).
13935,[Karn 1987]  P.
13936,"Karn, C."
13937,"Partridge, “Improving Round-Trip Time Estimates in Reliable Transport Protocols,” Proc."
13938,1987 ACM SIGCOMM.
13939,[Karol 1987]  M.
13940,"Karol, M."
13941,"Hluchyj, A."
13942,"Morgan, “Input Versus Output Queuing on a Space-Division Packet Switch,” IEEE Transactions on Communications, Vol."
13943,"35, No. 12
(Dec.1987), pp."
13944,1347–1356.
13945,[Kaufman 1995]  C.
13946,"Kaufman, R."
13947,"Perlman, M."
13948,"Speciner, Network Security, Private Communication in a Public World , Prentice Hall, Englewood Cliffs, NJ, 1995."
13949,[Kelly 1998]  F.
13950,P.
13951,"Kelly, A."
13952,"Maulloo, D."
13953,"Tan, “Rate Control for Communication Networks: Shadow Prices, Proportional Fairness and Stability,” J."
13954,Operations Res.
13955,"Soc., Vol."
13956,"49, No. 3 (Mar."
13957,"1998), pp."
13958,237–252.
13959,[Kelly 2003]  T.
13960,"Kelly, “Scalable TCP: Improving Performance in High Speed Wide Area Networks,” ACM SIGCOMM Computer Communications Review , Volume 33, No. 2
(Apr."
13961,"2003), pp.83–91.[Kilkki 1999] K."
13962,"Kilkki, Differentiated Services for the Internet , Macmillan Technical Publishing, Indianapolis, IN, 1999."
13963,[Kim 2005]  H.
13964,"Kim, S."
13965,"Rixner, V."
13966,"Pai, “Network Interface Data Caching,” IEEE Transactions on Computers , Vol."
13967,"54, No. 11 (Nov."
13968,"2005), pp."
13969,1394–1408.
13970,[Kim 2008]  C.
13971,"Kim, M."
13972,"Caesar, J."
13973,"Rexford, “Floodless in SEATTLE: A Scalable Ethernet Architecture for Large Enterprises,” Proc."
13974,"2008 ACM SIGCOMM (Seattle, WA, Aug."
13975,2008).
13976,[Kleinrock 1961]  L.
13977,"Kleinrock, “Information Flow in Large Communication Networks,” RLE Quarterly Progress Report, July 1961."
13978,[Kleinrock 1964]  L.
13979,"Kleinrock, 1964 Communication Nets: Stochastic Message Flow and Delay , McGraw-Hill, New York, NY, 1964."
13980,[Kleinrock 1975]  L.
13981,"Kleinrock, Queuing Systems, Vol."
13982,"1, John Wiley, New York, 1975."
13983,[Kleinrock 1975b] L.
13984,"Kleinrock, F."
13985,A.
13986,"Tobagi, “Packet Switching in Radio Channels: Part I—Carrier Sense Multiple-Access Modes and Their Throughput-Delay
Characteristics,” IEEE Transactions on Communications , Vol."
13987,"23, No. 12 (Dec."
13988,"1975), pp."
13989,1400–1416.
13990,[Kleinrock 1976]  L.
13991,"Kleinrock, Queuing Systems, Vol."
13992,"2, John Wiley, New York, 1976."
13993,[Kleinrock 2004]  L.
13994,"Kleinrock, “The Birth of the Internet,” http://www.lk.cs.ucla.edu/ LK/Inet/birth.html
[Kohler 2006] E."
13995,"Kohler, M."
13996,"Handley, S."
13997,"Floyd, “DDCP: Designing DCCP: Congestion Control Without Reliability,” Proc."
13998,"2006 ACM SIGCOMM (Pisa, Italy, Sept."
13999,2006).
14000,[Kolding 2003] T.
14001,"Kolding, K."
14002,"Pedersen, J."
14003,"Wigard, F."
14004,"Frederiksen, P."
14005,"Mogensen, “High Speed Downlink Packet Access: WCDMA Evolution,” IEEE Vehicular Technology
Society News  (Feb."
14006,"2003), pp."
14007,4–10.
14008,[Koponen 2010] T.
14009,"Koponen, M."
14010,"Casado, N."
14011,"Gude, J."
14012,"Stribling, L."
14013,"Poutievski, M."
14014,"Zhu, R."
14015,"Ramanathan, Y."
14016,"Iwata, H."
14017,"Inoue, T."
14018,"Hama, S."
14019,"Shenker, “Onix: A Distributed Control
Platform for Large-Scale Production Networks,” 9th USENIX conference on Operating systems design and implementation  (OSDI’10), pp."
14020,1–6.
14021,[Koponen 2011] T.
14022,"Koponen, S."
14023,"Shenker, H."
14024,"Balakrishnan, N."
14025,"Feamster, I."
14026,"Ganichev, A."
14027,"Ghodsi, P."
14028,B.
14029,"Godfrey, N."
14030,"McKeown, G."
14031,"Parulkar, B."
14032,"Raghavan, J."
14033,"Rexford, S."
14034,"Arianfar, D."
14035,"Kuptsov, “Architecting for Innovation,” ACM Computer Communications Review , 2011."
14036,[Korhonen 2003] J.
14037,"Korhonen, Introduction to 3G Mobile Communications , 2nd ed., Artech House, 2003.[Koziol 2003] J."
14038,"Koziol, Intrusion Detection with Snort , Sams Publishing, 2003."
14039,[Kreutz 2015]  D.
14040,"Kreutz, F.M.V. Ramos, P."
14041,"Esteves Verissimo, C."
14042,"Rothenberg, S."
14043,"Azodolmolky, S."
14044,"Uhlig, “Software-Defined Networking: A Comprehensive Survey,”
Proceedings of the IEEE, Vol."
14045,"103, No. 1 (Jan."
14046,"2015), pp."
14047,14-76.
14048,"This paper is also being updated at https://github.com/ SDN-Survey/ latex/wiki
[Krishnamurthy 2001]  B."
14049,"Krishnamurthy, J."
14050,"Rexford, Web Protocols and Practice: HTTP/ 1.1, Networking Protocols, and Traffic Measurement , Addison-Wesley, Boston,
MA, 2001."
14051,[Kulkarni 2005] S.
14052,"Kulkarni, C."
14053,"Rosenberg, “Opportunistic Scheduling: Generalizations to Include Multiple Constraints, Multiple Interfaces, and Short Term Fairness,”
Wireless Networks , 11 (2005), 557–569."
14054,[Kumar 2006]  R.
14055,"Kumar, K.W. Ross, “Optimal Peer-Assisted File Distribution: Single and Multi-Class Problems,” IEEE Workshop on Hot Topics in Web Systems and
Technologies  (Boston, MA, 2006)."
14056,[Labovitz 1997] C.
14057,"Labovitz, G."
14058,R.
14059,"Malan, F."
14060,"Jahanian, “Internet Routing Instability,” Proc."
14061,"1997 ACM SIGCOMM (Cannes, France, Sept."
14062,"1997), pp."
14063,115–126.
14064,[Labovitz 2010] C.
14065,"Labovitz, S."
14066,"Iekel-Johnson, D."
14067,"McPherson, J."
14068,"Oberheide, F."
14069,"Jahanian, “Internet Inter-Domain Traffic,” Proc."
14070,2010 ACM SIGCOMM.
14071,[Labrador 1999] M.
14072,"Labrador, S."
14073,"Banerjee, “Packet Dropping Policies for ATM and IP Networks,” IEEE Communications Surveys , Vol."
14074,"2, No. 3 (Third Quarter 1999), pp."
14075,2–14.
14076,[Lacage 2004]  M.
14077,"Lacage, M.H. Manshaei, T."
14078,"Turletti, “IEEE 802.11 Rate Adaptation: A Practical Approach,” ACM Int."
14079,"Symposium on Modeling, Analysis, and Simulation of
Wireless and Mobile Systems (MSWiM)  (Venice, Italy, Oct."
14080,2004).
14081,[Lakhina 2004] A.
14082,"Lakhina, M."
14083,"Crovella, C."
14084,"Diot, “Diagnosing Network-Wide Traffic Anomalies,” Proc."
14085,2004 ACM SIGCOMM.
14086,[Lakhina 2005] A.
14087,"Lakhina, M."
14088,"Crovella, C."
14089,"Diot, “Mining Anomalies Using Traffic Feature Distributions,” Proc."
14090,2005 ACM SIGCOMM.
14091,[Lakshman 1997]  T.
14092,V.
14093,"Lakshman, U."
14094,"Madhow, “The Performance of TCP/IP for Networks with High Bandwidth-Delay Products and Random Loss,” IEEE/ACM
Transactions on Networking , Vol."
14095,"5, No. 3 (1997), pp."
14096,336–350.
14097,[Lakshman 2004]  T.
14098,V.
14099,"Lakshman, T."
14100,"Nandagopal, R."
14101,"Ramjee, K."
14102,"Sabnani, T."
14103,"Woo, “The SoftRouter Architecture,” Proc."
14104,"3nd ACM Workshop on Hot Topics in Networks
(Hotnets-III), Nov."
14105,2004.[Lam 1980]  S.
14106,"Lam, “A Carrier Sense Multiple Access Protocol for Local Networks,” Computer Networks , Vol."
14107,"4 (1980), pp."
14108,21–32.
14109,[Lamport 1989] L.
14110,"Lamport, “The Part-Time Parliament,” Technical Report 49, Systems Research Center, Digital Equipment Corp., Palo Alto, Sept."
14111,1989.
14112,"[Lampson 1983] Lampson, Butler W."
14113,"“Hints for computer system design,” ACM SIGOPS Operating Systems Review, Vol."
14114,"17, No. 5, 1983."
14115,[Lampson 1996] B.
14116,"Lampson, “How to Build a Highly Available System Using Consensus,” Proc."
14117,"10th International Workshop on Distributed Algorithms  (WDAG ’96), Özalp
Babaoglu and Keith Marzullo (Eds.), Springer-Verlag, pp."
14118,1–17.
14119,[Lawton 2001] G.
14120,"Lawton, “Is IPv6 Finally Gaining Ground?” IEEE Computer Magazine  (Aug."
14121,"2001), pp."
14122,11–15.
14123,[LeBlond 2011] S.
14124,"Le Blond, C."
14125,"Zhang, A."
14126,"Legout, K."
14127,"Ross, W."
14128,Dabbous.
14129,"2011, “I know where you are and what you are sharing: exploiting P2P communications to invade
users’ privacy.” 2011 ACM Internet Measurement Conference , ACM, New York, NY, USA, pp."
14130,45–60.
14131,[Leighton 2009] T.
14132,"Leighton, “Improving Performance on the Internet,” Communications of the ACM , Vol."
14133,"52, No. 2 (Feb."
14134,"2009), pp."
14135,44–51.
14136,[Leiner 1998] B.
14137,"Leiner, V."
14138,"Cerf, D."
14139,"Clark, R."
14140,"Kahn, L."
14141,"Kleinrock, D."
14142,"Lynch, J."
14143,"Postel, L."
14144,"Roberts, S."
14145,"Woolf, “A Brief History of the Internet,”
http://www.isoc.org/internet/history/brief.html
[Leung 2006] K."
14146,"Leung, V."
14147,"O.K. Li, “TCP in Wireless Networks: Issues, Approaches, and Challenges,” IEEE Commun."
14148,"Surveys and Tutorials , Vol."
14149,"8, No. 4 (2006), pp."
14150,64–79.
14151,[Levin 2012] D.
14152,"Levin, A."
14153,"Wundsam, B."
14154,"Heller, N."
14155,"Handigol, A."
14156,"Feldmann, “Logically Centralized?: State Distribution Trade-offs in Software Defined Networks,” Proc."
14157,"First
Workshop on Hot Topics in Software Defined Networks  (Aug."
14158,"2012), pp."
14159,1–6.
14160,[Li 2004] L.
14161,"Li, D."
14162,"Alderson, W."
14163,"Willinger, J."
14164,"Doyle, “A First-Principles Approach to Understanding the Internet’s Router-Level Topology,” Proc."
14165,"2004 ACM SIGCOMM
(Portland, OR, Aug."
14166,2004).
14167,[Li 2007] J.
14168,"Li, M."
14169,"Guidero, Z."
14170,"Wu, E."
14171,"Purpus, T."
14172,"Ehrenkranz, “BGP Routing Dynamics Revisited.” ACM Computer Communication Review  (Apr."
14173,2007).
14174,"[Li 2015] S.Q. Li, “Building Softcom Ecosystem Foundation,” Open Networking Summit, 2015."
14175,[Lin 2001] Y.
14176,"Lin, I."
14177,"Chlamtac, Wireless and Mobile Network Architectures , John Wiley and Sons, New York, NY, 2001.[Liogkas 2006] N."
14178,"Liogkas, R."
14179,"Nelson, E."
14180,"Kohler, L."
14181,"Zhang, “Exploiting BitTorrent for Fun (but Not Profit),” 6th International Workshop on Peer-to-Peer Systems (IPTPS
2006)."
14182,[Liu 2003] J.
14183,"Liu, I."
14184,"Matta, M."
14185,"Crovella, “End-to-End Inference of Loss Nature in a Hybrid Wired/Wireless Environment,” Proc."
14186,"WiOpt’03: Modeling and Optimization in Mobile,
Ad Hoc and Wireless Networks ."
14187,[Locher 2006] T.
14188,"Locher, P."
14189,"Moor, S."
14190,"Schmid, R."
14191,"Wattenhofer, “Free Riding in BitTorrent is Cheap,” Proc."
14192,"ACM HotNets 2006 (Irvine CA, Nov."
14193,2006).
14194,[Lui 2004] J.
14195,"Lui, V."
14196,"Misra, D."
14197,"Rubenstein, “On the Robustness of Soft State Protocols,” Proc."
14198,IEEE Int.
14199,"Conference on Network Protocols (ICNP ’04 ), pp."
14200,50–60.
14201,[Mahdavi 1997] J.
14202,"Mahdavi, S."
14203,"Floyd, “TCP-Friendly Unicast Rate-Based Flow Control,” unpublished note (Jan."
14204,1997).
14205,"[MaxMind 2016] http://www.maxmind.com/ app/ip-location
[Maymounkov 2002]  P."
14206,"Maymounkov, D."
14207,Mazières.
14208,"“Kademlia: A Peer-to-Peer Information System Based on the XOR Metric.” Proceedings of the 1st International
Workshop on Peerto-Peer Systems (IPTPS ‘02)  (Mar."
14209,"2002), pp."
14210,53–65.
14211,[McKeown 1997a]  N.
14212,"McKeown, M."
14213,"Izzard, A."
14214,"Mekkittikul, W."
14215,"Ellersick, M."
14216,"Horowitz, “The Tiny Tera: A Packet Switch Core,” IEEE Micro Magazine  (Jan.–Feb."
14217,1997).
14218,[McKeown 1997b] N.
14219,"McKeown, “A Fast Switched Backplane for a Gigabit Switched Router,” Business Communications Review,  Vol."
14220,"27, No. 12."
14221,"http://tiny-
tera.stanford.edu/~nickm/papers/cisco_fasts_wp.pdf
[McKeown 2008] N."
14222,"McKeown, T."
14223,"Anderson, H."
14224,"Balakrishnan, G."
14225,"Parulkar, L."
14226,"Peterson, J."
14227,"Rexford, S."
14228,"Shenker, J."
14229,Turner.
14230,2008.
14231,"OpenFlow: Enabling Innovation in Campus
Networks."
14232,SIGCOMM Comput.
14233,Commun.
14234,Rev.
14235,"38, 2 (Mar."
14236,"2008), pp."
14237,69–74.
14238,[McQuillan 1980] J.
14239,"McQuillan, I."
14240,"Richer, E."
14241,"Rosen, “The New Routing Algorithm for the Arpanet,” IEEE Transactions on Communications,  Vol."
14242,"28, No. 5 (May 1980), pp."
14243,711–719.
14244,[Metcalfe 1976]  R.
14245,M.
14246,"Metcalfe, D."
14247,R.
14248,Boggs.
14249,"“Ethernet: Distributed Packet Switching for Local Computer Networks,” Communications of the Association for Computing
Machinery,  Vol."
14250,"19, No. 7 (July 1976), pp."
14251,395–404.
14252,[Meyers 2004]  A.
14253,"Myers, T."
14254,"Ng, H."
14255,"Zhang, “Rethinking the Service Model: Scaling Ethernet to a Million Nodes ,” ACM Hotnets Conference , 2004.[MFA Forum 2016] IP/MPLS Forum homepage, http://www.ipmplsforum.org/
[Mockapetris 1988 ] P."
14256,V.
14257,"Mockapetris, K."
14258,J.
14259,"Dunlap, “Development of the Domain Name System,” Proc."
14260,"1988 ACM SIGCOMM (Stanford, CA, Aug."
14261,1988).
14262,[Mockapetris 2005]  P.
14263,"Mockapetris, Sigcomm Award Lecture, video available at http:/ /www.postel.org/ sigcomm
[Molinero-Fernandez 2002] P."
14264,"Molinaro-Fernandez, N."
14265,"McKeown, H."
14266,"Zhang, “Is IP Going to Take Over the World (of Communications)?” Proc."
14267,2002 ACM Hotnets.
14268,[Molle 1987] M.
14269,L.
14270,"Molle, K."
14271,"Sohraby, A."
14272,N.
14273,"Venetsanopoulos, “Space-Time Models of Asynchronous CSMA Protocols for Local Area Networks,” IEEE Journal on Selected
Areas in Communications,  Vol."
14274,"5, No. 6 (1987), pp."
14275,956–968.
14276,[Moore 2001] D.
14277,"Moore, G."
14278,"Voelker, S."
14279,"Savage, “Inferring Internet Denial of Service Activity,” Proc."
14280,"2001 USENIX Security Symposium  (Washington, DC, Aug."
14281,2001).
14282,"[Motorola 2007] Motorola, “Long Term Evolution (LTE): A Technical Overview,”
http://www.motorola.com/staticfiles/Business/Solutions/Industry%20Solutions/Service%20Providers/Wireless%20Operators/LTE/_Document/Static%20Files/6834_MotDoc_New.pdf
[Mouly 1992] M."
14283,"Mouly, M."
14284,"Pautet, The GSM System for Mobile Communications , Cell and Sys, Palaiseau, France, 1992."
14285,[Moy 1998] J.
14286,"Moy, OSPF: Anatomy of An Internet Routing Protocol, Addison-Wesley, Reading, MA, 1998."
14287,[Mukherjee 1997]  B.
14288,"Mukherjee, Optical Communication Networks , McGraw-Hill, 1997."
14289,[Mukherjee 2006]  B.
14290,"Mukherjee, Optical WDM Networks, Springer, 2006."
14291,[Mysore 2009]  R.
14292,N.
14293,"Mysore, A."
14294,"Pamboris, N."
14295,"Farrington, N."
14296,"Huang, P."
14297,"Miri, S."
14298,"Radhakrishnan, V."
14299,"Subramanya, A."
14300,"Vahdat, “PortLand: A Scalable Fault-Tolerant Layer 2
Data Center Network Fabric,” Proc."
14301,2009 ACM SIGCOMM.
14302,[Nahum 2002]  E.
14303,"Nahum, T."
14304,"Barzilai, D."
14305,"Kandlur, “Performance Issues in WWW Servers,” IEEE/ACM Transactions on Networking , Vol 10, No. 1 (Feb."
14306,2002).
14307,"[Netflix Open Connect 2016] Netflix Open Connect CDN, 2016, https:// openconnect.netflix.com/
[Netflix Video 1] Designing Netflix’s Content Delivery System, D."
14308,"Fulllager, 2014, https://www.youtube.com/ watch?v=LkLLpYdDINA[Netflix Video 2] Scaling the Netflix Global CDN, D."
14309,"Temkin, 2015, https://www .youtube.com/ watch?v=tbqcsHg-Q_o
[Neumann 1997]  R."
14310,"Neumann, “Internet Routing Black Hole,” The Risks Digest: Forum on Risks to the Public in Computers and Related Systems,  Vol."
14311,"19, No. 12 (May
1997)."
14312,"http:/ /catless.ncl.ac.uk/Risks/19.12.html#subj1.1
[Neville-Neil 2009]  G."
14313,"Neville-Neil, “Whither Sockets?” Communications of the ACM,  Vol."
14314,"52, No. 6 (June 2009), pp."
14315,51–55.
14316,"[Nicholson 2006] A Nicholson, Y."
14317,"Chawathe, M."
14318,"Chen, B."
14319,"Noble, D."
14320,"Wetherall, “Improved Access Point Selection,” Proc."
14321,"2006 ACM Mobisys Conference  (Uppsala Sweden,
2006)."
14322,[Nielsen 1997]  H.
14323,F.
14324,"Nielsen, J."
14325,"Gettys, A."
14326,"Baird-Smith, E."
14327,"Prud’hommeaux, H."
14328,W.
14329,"Lie, C."
14330,"Lilley, “Network Performance Effects of HTTP/1.1, CSS1, and PNG,” W3C
Document, 1997 (also appears in Proc."
14331,"1997 ACM SIGCOM (Cannes, France, Sept 1997), pp."
14332,155–166.
14333,"[NIST 2001] National Institute of Standards and Technology, “Advanced Encryption Standard (AES),” Federal Information Processing Standards 197, Nov."
14334,"2001, http:/ /
csrc.nist.gov/publications/ fips/fips197/fips-197.pdf
[NIST IPv6 2015] US National Institute of Standards and Technology, “Estimating IPv6 & DNSSEC Deployment SnapShots,” http:/ /fedv6-deployment.antd.nist.gov/ snap-
all.html
[Nmap 2012]  Nmap homepage, http:/ /www.insecure.com/ nmap
[Nonnenmacher 1998]  J."
14335,"Nonnenmacher, E."
14336,"Biersak, D."
14337,"Towsley, “Parity-Based Loss Recovery for Reliable Multicast Transmission,” IEEE/ACM Transactions on
Networking,  Vol."
14338,"6, No. 4 (Aug."
14339,"1998), pp."
14340,349–361.
14341,"[Nygren 2010]  Erik Nygren, Ramesh K."
14342,"Sitaraman, and Jennifer Sun, “The Akamai Network: A Platform for High-performance Internet Applications,” SIGOPS Oper."
14343,Syst.
14344,Rev.
14345,"44, 3 (Aug."
14346,"2010), 2–19."
14347,"[ONF 2016] Open Networking Foundation, Technical Library, https://www.opennetworking.org/ sdn-resources/technical-library
[ONOS 2016] Open Network Operating System (ONOS), “Architecture Guide,” https://wiki.onosproject.org/display/ONOS/Architecture+Guide , 2016."
14348,"[OpenFlow 2009]  Open Network Foundation, “OpenFlow Switch Specification 1.0.0, TS-001,” https://www.opennetworking.org/ images/stories/downloads/ sdn-
resources/ onf-specifications/ openflow/ openflow-spec-v1.0.0.pdf[OpenDaylight Lithium 2016]  OpenDaylight, “Lithium,” https://www.opendaylight.org/lithium
[OSI 2012] International Organization for Standardization homepage, http:/ /www.iso.org/ iso/en/ISOOnline.frontpage
[Osterweil 2012] E."
14349,"Osterweil, D."
14350,"McPherson, S."
14351,"DiBenedetto, C."
14352,"Papadopoulos, D."
14353,"Massey, “Behavior of DNS Top Talkers,” Passive and Active Measurement Conference ,
2012."
14354,[Padhye 2000]  J.
14355,"Padhye, V."
14356,"Firoiu, D."
14357,"Towsley, J."
14358,"Kurose, “Modeling TCP Reno Performance: A Simple Model and Its Empirical Validation,” IEEE/ACM Transactions on
Networking,  Vol."
14359,8 No. 2 (Apr.
14360,"2000), pp."
14361,133–145.
14362,[Padhye 2001]  J.
14363,"Padhye, S."
14364,"Floyd, “On Inferring TCP Behavior,” Proc."
14365,"2001 ACM SIGCOMM (San Diego, CA, Aug."
14366,2001).
14367,[Palat 2009]  S.
14368,"Palat, P."
14369,"Godin, “The LTE Network Architecture: A Comprehensive Tutorial,” in LTE—The UMTS Long Term Evolution: From Theory to Practice."
14370,"Also
available as a standalone Alcatel white paper ."
14371,[Panda 2013] A.
14372,"Panda, C."
14373,"Scott, A."
14374,"Ghodsi, T."
14375,"Koponen, S."
14376,"Shenker, “CAP for Networks,” Proc."
14377,"ACM HotSDN ’13 , pp."
14378,91–96.
14379,[Parekh 1993]  A.
14380,"Parekh, R."
14381,"Gallagher, “A Generalized Processor Sharing Approach to Flow Control in Integrated Services Networks: The Single-Node Case,” IEEE/ACM
Transactions on Networking,  Vol."
14382,"1, No. 3 (June 1993), pp."
14383,344–357.
14384,[Partridge 1992]  C.
14385,"Partridge, S."
14386,"Pink, “An Implementation of the Revised Internet Stream Protocol (ST-2),” Journal of Internetworking: Research and Experience , Vol."
14387,"3,
No. 1 (Mar."
14388,1992).
14389,[Partridge 1998]  C.
14390,"Partridge, et al."
14391,"“A Fifty Gigabit per second IP Router,” IEEE/ACM Transactions on Networking,  Vol."
14392,"6, No. 3 (Jun."
14393,"1998), pp."
14394,237–248.
14395,[Pathak 2010]  A.
14396,"Pathak, Y."
14397,A.
14398,"Wang, C."
14399,"Huang, A."
14400,"Greenberg, Y."
14401,C.
14402,"Hu, J."
14403,"Li, K."
14404,W.
14405,"Ross, “Measuring and Evaluating TCP Splitting for Cloud Services,” Passive and
Active Measurement (PAM) Conference  (Zurich, 2010)."
14406,[Perkins 1994]  A.
14407,"Perkins, “Networking with Bob Metcalfe,” The Red Herring Magazine  (Nov."
14408,1994).
14409,[Perkins 1998]  C.
14410,"Perkins, O."
14411,"Hodson, V."
14412,"Hardman, “A Survey of Packet Loss Recovery Techniques for Streaming Audio,” IEEE Network Magazine  (Sept./Oct."
14413,"1998), pp."
14414,40–47.[Perkins 1998b]  C.
14415,"Perkins, Mobile IP: Design Principles and Practice , Addison-Wesley, Reading, MA, 1998."
14416,[Perkins 2000]  C.
14417,"Perkins, Ad Hoc Networking , Addison-Wesley, Reading, MA, 2000."
14418,[Perlman 1999]  R.
14419,"Perlman, Interconnections: Bridges, Routers, Switches, and Internetworking Protocols,  2nd ed., Addison-Wesley Professional Computing Series,
Reading, MA, 1999."
14420,"[PGPI 2016] The International PGP homepage, http:/ /www.pgpi.org
[Phifer 2000] L."
14421,"Phifer, “The Trouble with NAT,” The Internet Protocol Journal,  Vol."
14422,"3, No. 4 (Dec."
14423,"2000), http://www.cisco.com/warp/public/759/ipj_3-4/ipj_ 3-4_nat.html
[Piatek 2007]  M."
14424,"Piatek, T."
14425,"Isdal, T."
14426,"Anderson, A."
14427,"Krishnamurthy, A."
14428,"Venkataramani, “Do Incentives Build Robustness in Bittorrent?,” Proc."
14429,NSDI (2007).
14430,[Piatek 2008]  M.
14431,"Piatek, T."
14432,"Isdal, A."
14433,"Krishnamurthy, T."
14434,"Anderson, “One Hop Reputations for Peer-to-peer File Sharing Workloads,” Proc."
14435,NSDI (2008).
14436,[Pickholtz 1982] R.
14437,"Pickholtz, D."
14438,"Schilling, L."
14439,"Milstein, “Theory of Spread Spectrum Communication—a Tutorial,” IEEE Transactions on Communications,  Vol."
14440,"30, No. 5
(May 1982), pp."
14441,855–884.
14442,"[PingPlotter 2016] PingPlotter homepage, http:/ /www.pingplotter.com
[Piscatello 1993] D."
14443,"Piscatello, A."
14444,"Lyman Chapin, Open Systems Networking,  Addison-Wesley, Reading, MA, 1993."
14445,[Pomeranz 2010]  H.
14446,"Pomeranz, “Practical, Visual, Three-Dimensional Pedagogy for Internet Protocol Packet Header Control Fields,” https://righteousit.wordpress.com/
2010/06/27/practical-visual-three-dimensional-pedagogy-for-internet-protocol-packet-header-control-fields/ , June 2010."
14447,"[Potaroo 2016] “Growth of the BGP Table–1994 to Present,” http:/ /bgp.potaroo.net/
[PPLive 2012] PPLive homepage, http://www.pplive.com
[Qazi 2013] Z."
14448,"Qazi, C."
14449,"Tu, L."
14450,"Chiang, R."
14451,"Miao, V."
14452,"Sekar, M."
14453,"Yu, “SIMPLE-fying Middlebox Policy Enforcement Using SDN,” ACM SIGCOMM Conference (Aug."
14454,"2013), pp."
14455,27–38.
14456,"[Quagga 2012] Quagga, “Quagga Routing Suite,” http:/ /www.quagga.net/[Quittner 1998] J."
14457,"Quittner, M."
14458,"Slatalla, Speeding the Net: The Inside Story of Netscape and How It Challenged Microsoft,  Atlantic Monthly Press, 1998."
14459,"[Quova 2016] www.quova.com
[Ramakrishnan 1990]  K."
14460,K.
14461,"Ramakrishnan, R."
14462,"Jain, “A Binary Feedback Scheme for Congestion Avoidance in Computer Networks,” ACM Transactions on Computer
Systems, Vol."
14463,"8, No. 2 (May 1990), pp."
14464,158–181.
14465,[Raman 1999]  S.
14466,"Raman, S."
14467,"McCanne, “A Model, Analysis, and Protocol Framework for Soft State-based Communication,” Proc."
14468,"1999 ACM SIGCOMM (Boston, MA, Aug."
14469,1999).
14470,[Raman 2007]  B.
14471,"Raman, K."
14472,"Chebrolu, “Experiences in Using WiFi for Rural Internet in India,” IEEE Communications Magazine,  Special Issue on New Directions in
Networking Technologies in Emerging Economies (Jan."
14473,2007).
14474,[Ramaswami 2010]  R.
14475,"Ramaswami, K."
14476,"Sivarajan, G."
14477,"Sasaki, Optical Networks: A Practical  Perspective , Morgan Kaufman Publishers, 2010."
14478,[Ramjee 1994]  R.
14479,"Ramjee, J."
14480,"Kurose, D."
14481,"Towsley, H."
14482,"Schulzrinne, “Adaptive Playout Mechanisms for Packetized Audio Applications in Wide-Area Networks,” Proc."
14483,"1994
IEEE INFOCOM."
14484,[Rao 2011]  A.
14485,S.
14486,"Rao, Y."
14487,S.
14488,"Lim, C."
14489,"Barakat, A."
14490,"Legout, D."
14491,"Towsley, W."
14492,"Dabbous, “Network Characteristics of Video Streaming Traffic,” Proc."
14493,2011 ACM CoNEXT  (Tokyo).
14494,[Ren 2006]  S.
14495,"Ren, L."
14496,"Guo, X."
14497,"Zhang, “ASAP: An AS-Aware Peer-Relay Protocol for High Quality VoIP,” Proc."
14498,"2006 IEEE ICDCS (Lisboa, Portugal, July 2006)."
14499,[Rescorla 2001]  E.
14500,"Rescorla, SSL and TLS: Designing and Building Secure Systems,  Addison-Wesley, Boston, 2001."
14501,[RFC 001] S.
14502,"Crocker, “Host Software,” RFC 001 (the very first RFC!).[RFC 768] J."
14503,"Postel, “User Datagram Protocol,” RFC 768, Aug."
14504,1980.
14505,[RFC 791] J.
14506,"Postel, “Internet Protocol: DARPA Internet Program Protocol Specification,” RFC 791, Sept."
14507,1981.[RFC 792] J.
14508,"Postel, “Internet Control Message Protocol,” RFC 792, Sept."
14509,1981.[RFC 793] J.
14510,"Postel, “Transmission Control Protocol,” RFC 793, Sept."
14511,1981.
14512,[RFC 801] J.
14513,"Postel, “NCP/TCP Transition Plan,” RFC 801, Nov."
14514,1981.
14515,[RFC 826] D.
14516,C.
14517,"Plummer, “An Ethernet Address Resolution Protocol—or— Converting Network Protocol Addresses to 48-bit Ethernet Address for Transmission on Ethernet
Hardware,” RFC 826, Nov."
14518,1982.
14519,[RFC 829] V.
14520,"Cerf, “Packet Satellite Technology Reference Sources,” RFC 829, Nov."
14521,1982.[RFC 854] J.
14522,"Postel, J."
14523,"Reynolds, “TELNET Protocol Specification,” RFC 854, May 1993.[RFC 950] J."
14524,"Mogul, J."
14525,"Postel, “Internet Standard Subnetting Procedure,” RFC 950, Aug."
14526,1985.
14527,[RFC 959] J.
14528,Postel and J.
14529,"Reynolds, “File Transfer Protocol (FTP),” RFC 959, Oct."
14530,1985.
14531,[RFC 1034]  P.
14532,V.
14533,"Mockapetris, “Domain Names—Concepts and Facilities,” RFC 1034, Nov."
14534,1987.
14535,[RFC 1035]  P.
14536,"Mockapetris, “Domain Names—Implementation and Specification,” RFC 1035, Nov."
14537,1987.
14538,[RFC 1058]  C.
14539,L.
14540,"Hendrick, “Routing Information Protocol,” RFC 1058, June 1988."
14541,[RFC 1071]  R.
14542,"Braden, D."
14543,"Borman, and C."
14544,"Partridge, “Computing the Internet Checksum,” RFC 1071, Sept."
14545,1988.
14546,[RFC 1122]  R.
14547,"Braden, “Requirements for Internet Hosts—Communication Layers,” RFC 1122, Oct."
14548,1989.
14549,[RFC 1123]  R.
14550,"Braden, ed., “Requirements for Internet Hosts—Application and Support,” RFC-1123, Oct."
14551,1989.
14552,[RFC 1142]  D.
14553,"Oran, “OSI IS-IS Intra-Domain Routing Protocol,” RFC 1142, Feb."
14554,1990.
14555,[RFC 1190]  C.
14556,"Topolcic, “Experimental Internet Stream Protocol: Version 2 (ST-II),” RFC 1190, Oct."
14557,1990.
14558,[RFC 1256]  S.
14559,"Deering, “ICMP Router Discovery Messages,” RFC 1256, Sept."
14560,1991.[RFC 1320]  R.
14561,"Rivest, “The MD4 Message-Digest Algorithm,” RFC 1320, Apr."
14562,1992.
14563,[RFC 1321]  R.
14564,"Rivest, “The MD5 Message-Digest Algorithm,” RFC 1321, Apr."
14565,1992.
14566,[RFC 1323]  V.
14567,"Jacobson, S."
14568,"Braden, D."
14569,"Borman, “TCP Extensions for High Performance,” RFC 1323, May 1992."
14570,[RFC 1422]  S.
14571,"Kent, “Privacy Enhancement for Internet Electronic Mail: Part II: Certificate-Based Key Management,” RFC 1422."
14572,[RFC 1546]  C.
14573,"Partridge, T."
14574,"Mendez, W."
14575,"Milliken, “Host Anycasting Service,” RFC 1546, 1993."
14576,[RFC 1584]  J.
14577,"Moy, “Multicast Extensions to OSPF,” RFC 1584, Mar."
14578,1994.
14579,[RFC 1633]  R.
14580,"Braden, D."
14581,"Clark, S."
14582,"Shenker, “Integrated Services in the Internet Architecture: an Overview,” RFC 1633, June 1994."
14583,[RFC 1636]  R.
14584,"Braden, D."
14585,"Clark, S."
14586,"Crocker, C."
14587,"Huitema, “Report of IAB Workshop on Security in the Internet Architecture,” RFC 1636, Nov."
14588,1994.
14589,[RFC 1700]  J.
14590,"Reynolds, J."
14591,"Postel, “Assigned Numbers,” RFC 1700, Oct."
14592,1994.
14593,[RFC 1752]  S.
14594,"Bradner, A."
14595,"Mankin, “The Recommendations for the IP Next Generation Protocol,” RFC 1752, Jan."
14596,1995.
14597,[RFC 1918]  Y.
14598,"Rekhter, B."
14599,"Moskowitz, D."
14600,"Karrenberg, G."
14601,J.
14602,"de Groot, E."
14603,"Lear, “Address Allocation for Private Internets,” RFC 1918, Feb."
14604,1996.
14605,[RFC 1930]  J.
14606,"Hawkinson, T."
14607,"Bates, “Guidelines for Creation, Selection, and Registration of an Autonomous System (AS),” RFC 1930, Mar."
14608,1996.
14609,[RFC 1939]  J.
14610,"Myers, M."
14611,"Rose, “Post Office Protocol—Version 3,” RFC 1939, May 1996."
14612,[RFC 1945]  T.
14613,"Berners-Lee, R."
14614,"Fielding, H."
14615,"Frystyk, “Hypertext Transfer Protocol—HTTP/1.0,” RFC 1945, May 1996."
14616,[RFC 2003]  C.
14617,"Perkins, “IP Encapsulation Within IP,” RFC 2003, Oct."
14618,1996.
14619,[RFC 2004]  C.
14620,"Perkins, “Minimal Encapsulation Within IP,” RFC 2004, Oct."
14621,1996.[RFC 2018]  M.
14622,"Mathis, J."
14623,"Mahdavi, S."
14624,"Floyd, A."
14625,"Romanow, “TCP Selective Acknowledgment Options,” RFC 2018, Oct."
14626,1996.
14627,[RFC 2131]  R.
14628,"Droms, “Dynamic Host Configuration Protocol,” RFC 2131, Mar."
14629,1997.
14630,[RFC 2136]  P.
14631,"Vixie, S."
14632,"Thomson, Y."
14633,"Rekhter, J."
14634,"Bound, “Dynamic Updates in the Domain Name System,” RFC 2136, Apr."
14635,1997.
14636,[RFC 2205]  R.
14637,"Braden, Ed., L."
14638,"Zhang, S."
14639,"Berson, S."
14640,"Herzog, S."
14641,"Jamin, “Resource ReSerVation Protocol (RSVP)—Version 1 Functional Specification,” RFC 2205, Sept."
14642,1997.
14643,[RFC 2210]  J.
14644,"Wroclawski, “The Use of RSVP with IETF Integrated Services,” RFC 2210, Sept."
14645,1997.
14646,[RFC 2211]  J.
14647,"Wroclawski, “Specification of the Controlled-Load Network Element Service,” RFC 2211, Sept."
14648,1997.
14649,[RFC 2215]  S.
14650,"Shenker, J."
14651,"Wroclawski, “General Characterization Parameters for Integrated Service Network Elements,” RFC 2215, Sept."
14652,1997.
14653,[RFC 2326]  H.
14654,"Schulzrinne, A."
14655,"Rao, R."
14656,"Lanphier, “Real Time Streaming Protocol (RTSP),” RFC 2326, Apr."
14657,1998.
14658,[RFC 2328]  J.
14659,"Moy, “OSPF Version 2,” RFC 2328, Apr."
14660,1998.
14661,[RFC 2420]  H.
14662,"Kummert, “The PPP Triple-DES Encryption Protocol (3DESE),” RFC 2420, Sept."
14663,1998.
14664,[RFC 2453]  G.
14665,"Malkin, “RIP Version 2,” RFC 2453, Nov."
14666,1998.
14667,[RFC 2460]  S.
14668,"Deering, R."
14669,"Hinden, “Internet Protocol, Version 6 (IPv6) Specification,” RFC 2460, Dec."
14670,1998.
14671,[RFC 2475]  S.
14672,"Blake, D."
14673,"Black, M."
14674,"Carlson, E."
14675,"Davies, Z."
14676,"Wang, W."
14677,"Weiss, “An Architecture for Differentiated Services,” RFC 2475, Dec."
14678,1998.
14679,[RFC 2578]  K.
14680,"McCloghrie, D."
14681,"Perkins, J."
14682,"Schoenwaelder, “Structure of Management Information Version 2 (SMIv2),” RFC 2578, Apr."
14683,1999.
14684,[RFC 2579]  K.
14685,"McCloghrie, D."
14686,"Perkins, J."
14687,"Schoenwaelder, “Textual Conventions for SMIv2,” RFC 2579, Apr."
14688,1999.
14689,[RFC 2580]  K.
14690,"McCloghrie, D."
14691,"Perkins, J."
14692,"Schoenwaelder, “Conformance Statements for SMIv2,” RFC 2580, Apr."
14693,1999.[RFC 2597]  J.
14694,"Heinanen, F."
14695,"Baker, W."
14696,"Weiss, J."
14697,"Wroclawski, “Assured Forwarding PHB Group,” RFC 2597, June 1999."
14698,[RFC 2616]  R.
14699,"Fielding, J."
14700,"Gettys, J."
14701,"Mogul, H."
14702,"Frystyk, L."
14703,"Masinter, P."
14704,"Leach, T."
14705,"Berners-Lee, R."
14706,"Fielding, “Hypertext Transfer Protocol—HTTP/1.1,” RFC 2616, June 1999."
14707,[RFC 2663]  P.
14708,"Srisuresh, M."
14709,"Holdrege, “IP Network Address Translator (NAT) Terminology and Considerations,” RFC 2663."
14710,[RFC 2702]  D.
14711,"Awduche, J."
14712,"Malcolm, J."
14713,"Agogbua, M."
14714,"O’Dell, J."
14715,"McManus, “Requirements for Traffic Engineering Over MPLS,” RFC 2702, Sept."
14716,1999.
14717,[RFC 2827]  P.
14718,"Ferguson, D."
14719,"Senie, “Network Ingress Filtering: Defeating Denial of Service Attacks which Employ IP Source Address Spoofing,” RFC 2827, May 2000."
14720,[RFC 2865]  C.
14721,"Rigney, S."
14722,"Willens, A."
14723,"Rubens, W."
14724,"Simpson, “Remote Authentication Dial In User Service (RADIUS),” RFC 2865, June 2000."
14725,[RFC 3007]  B.
14726,"Wellington, “Secure Domain Name System (DNS) Dynamic Update,” RFC 3007, Nov."
14727,2000.
14728,[RFC 3022]  P.
14729,"Srisuresh, K."
14730,"Egevang, “Traditional IP Network Address Translator (Traditional NAT),” RFC 3022, Jan."
14731,2001.
14732,[RFC 3022]  P.
14733,"Srisuresh, K."
14734,"Egevang, “Traditional IP Network Address Translator (Traditional NAT),” RFC 3022, Jan."
14735,2001.
14736,[RFC 3031]  E.
14737,"Rosen, A."
14738,"Viswanathan, R."
14739,"Callon, “Multiprotocol Label Switching Architecture,” RFC 3031, Jan."
14740,2001.
14741,[RFC 3032]  E.
14742,"Rosen, D."
14743,"Tappan, G."
14744,"Fedorkow, Y."
14745,"Rekhter, D."
14746,"Farinacci, T."
14747,"Li, A."
14748,"Conta, “MPLS Label Stack Encoding,” RFC 3032, Jan."
14749,2001.
14750,[RFC 3168]  K.
14751,"Ramakrishnan, S."
14752,"Floyd, D."
14753,"Black, “The Addition of Explicit Congestion Notification (ECN) to IP,” RFC 3168, Sept."
14754,2001.
14755,[RFC 3209]  D.
14756,"Awduche, L."
14757,"Berger, D."
14758,"Gan, T."
14759,"Li, V."
14760,"Srinivasan, G."
14761,"Swallow, “RSVP-TE: Extensions to RSVP for LSP Tunnels,” RFC 3209, Dec."
14762,2001.
14763,[RFC 3221]  G.
14764,"Huston, “Commentary on Inter-Domain Routing in the Internet,” RFC 3221, Dec."
14765,2001.
14766,[RFC 3232]  J.
14767,"Reynolds, “Assigned Numbers: RFC 1700 Is Replaced by an On-line Database,” RFC 3232, Jan."
14768,2002.
14769,[RFC 3234]  B.
14770,"Carpenter, S."
14771,"Brim, “Middleboxes: Taxonomy and Issues,” RFC 3234, Feb."
14772,2002.[RFC 3246]  B.
14773,"Davie, A."
14774,"Charny, J.C.R. Bennet, K."
14775,"Benson, J.Y. Le Boudec, W."
14776,"Courtney, S."
14777,"Davari, V."
14778,"Firoiu, D."
14779,"Stiliadis, “An Expedited Forwarding PHB (Per-Hop
Behavior),” RFC 3246, Mar."
14780,2002.
14781,[RFC 3260]  D.
14782,"Grossman, “New Terminology and Clarifications for Diffserv,” RFC 3260, Apr."
14783,2002.
14784,[RFC 3261]  J.
14785,"Rosenberg, H."
14786,"Schulzrinne, G."
14787,"Carmarillo, A."
14788,"Johnston, J."
14789,"Peterson, R."
14790,"Sparks, M."
14791,"Handley, E."
14792,"Schooler, “SIP: Session Initiation Protocol,” RFC 3261, July
2002."
14793,[RFC 3272]  J.
14794,"Boyle, V."
14795,"Gill, A."
14796,"Hannan, D."
14797,"Cooper, D."
14798,"Awduche, B."
14799,"Christian, W."
14800,S.
14801,"Lai, “Overview and Principles of Internet Traffic Engineering,” RFC 3272, May 2002."
14802,[RFC 3286]  L.
14803,"Ong, J."
14804,"Yoakum, “An Introduction to the Stream Control Transmission Protocol (SCTP),” RFC 3286, May 2002."
14805,[RFC 3346]  J.
14806,"Boyle, V."
14807,"Gill, A."
14808,"Hannan, D."
14809,"Cooper, D."
14810,"Awduche, B."
14811,"Christian, W."
14812,S.
14813,"Lai, “Applicability Statement for Traffic Engineering with MPLS,” RFC 3346, Aug."
14814,2002.
14815,[RFC 3390]  M.
14816,"Allman, S."
14817,"Floyd, C."
14818,"Partridge, “Increasing TCP’s Initial Window,” RFC 3390, Oct."
14819,2002.
14820,[RFC 3410]  J.
14821,"Case, R."
14822,"Mundy, D."
14823,"Partain, “Introduction and Applicability Statements for Internet Standard Management Framework,” RFC 3410, Dec."
14824,2002.
14825,[RFC 3414]  U.
14826,Blumenthal and B.
14827,"Wijnen, “User-based Security Model (USM) for Version 3 of the Simple Network Management Protocol (SNMPv3),” RFC 3414, Dec."
14828,2002.
14829,[RFC 3416]  R.
14830,"Presuhn, J."
14831,"Case, K."
14832,"McCloghrie, M."
14833,"Rose, S."
14834,"Waldbusser, “Version 2 of the Protocol Operations for the Simple Network Management Protocol (SNMP),”
Dec."
14835,2002.
14836,[RFC 3439]  R.
14837,"Bush, D."
14838,"Meyer, “Some Internet Architectural Guidelines and Philosophy,” RFC 3439, Dec."
14839,2003.
14840,[RFC 3447]  J.
14841,"Jonsson, B."
14842,"Kaliski, “Public-Key Cryptography Standards (PKCS) #1: RSA Cryptography Specifications Version 2.1,” RFC 3447, Feb."
14843,2003.
14844,[RFC 3468]  L.
14845,"Andersson, G."
14846,"Swallow, “The Multiprotocol Label Switching (MPLS) Working Group Decision on MPLS Signaling Protocols,” RFC 3468, Feb."
14847,2003.
14848,[RFC 3469]  V.
14849,"Sharma, Ed., F."
14850,"Hellstrand, Ed, “Framework for Multi-Protocol Label Switching (MPLS)-based Recovery,” RFC 3469, Feb."
14851,2003.
14852,"ftp://ftp.rfc-editor.org/in-
notes/rfc3469.txt
[RFC 3501]  M."
14853,"Crispin, “Internet Message Access Protocol—Version 4rev1,” RFC 3501, Mar."
14854,2003.[RFC 3550]  H.
14855,"Schulzrinne, S."
14856,"Casner, R."
14857,"Frederick, V."
14858,"Jacobson, “RTP: A Transport Protocol for Real-Time Applications,” RFC 3550, July 2003."
14859,[RFC 3588]  P.
14860,"Calhoun, J."
14861,"Loughney, E."
14862,"Guttman, G."
14863,"Zorn, J."
14864,"Arkko, “Diameter Base Protocol,” RFC 3588, Sept."
14865,2003.
14866,[RFC 3649]  S.
14867,"Floyd, “HighSpeed TCP for Large Congestion Windows,” RFC 3649, Dec."
14868,2003.
14869,[RFC 3746]  L.
14870,"Yang, R."
14871,"Dantu, T."
14872,"Anderson, R."
14873,"Gopal, “Forwarding and Control Element Separation (ForCES) Framework,” Internet, RFC 3746, Apr."
14874,2004.
14875,[RFC 3748]  B.
14876,"Aboba, L."
14877,"Blunk, J."
14878,"Vollbrecht, J."
14879,"Carlson, H."
14880,"Levkowetz, Ed., “Extensible Authentication Protocol (EAP),” RFC 3748, June 2004."
14881,[RFC 3782]  S.
14882,"Floyd, T."
14883,"Henderson, A."
14884,"Gurtov, “The NewReno Modification to TCP’s Fast Recovery Algorithm,” RFC 3782, Apr."
14885,2004.
14886,[RFC 4213]  E.
14887,"Nordmark, R."
14888,"Gilligan, “Basic Transition Mechanisms for IPv6 Hosts and Routers,” RFC 4213, Oct."
14889,2005.
14890,[RFC 4271]  Y.
14891,"Rekhter, T."
14892,"Li, S."
14893,"Hares, Ed., “A Border Gateway Protocol 4 (BGP-4),” RFC 4271, Jan."
14894,2006.
14895,[RFC 4272]  S.
14896,"Murphy, “BGP Security Vulnerabilities Analysis,” RFC 4274, Jan."
14897,2006.
14898,[RFC 4291]  R.
14899,"Hinden, S."
14900,"Deering, “IP Version 6 Addressing Architecture,” RFC 4291, Feb."
14901,2006.
14902,[RFC 4340]  E.
14903,"Kohler, M."
14904,"Handley, S."
14905,"Floyd, “Datagram Congestion Control Protocol (DCCP),” RFC 4340, Mar."
14906,2006.
14907,[RFC 4443]  A.
14908,"Conta, S."
14909,"Deering, M."
14910,"Gupta, Ed., “Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification,” RFC 4443, Mar."
14911,2006.
14912,[RFC 4346]  T.
14913,"Dierks, E."
14914,"Rescorla, “The Transport Layer Security (TLS) Protocol Version 1.1,” RFC 4346, Apr."
14915,2006.
14916,[RFC 4514]  K.
14917,"Zeilenga, Ed., “Lightweight Directory Access Protocol (LDAP): String Representation of Distinguished Names,” RFC 4514, June 2006."
14918,[RFC 4601]  B.
14919,"Fenner, M."
14920,"Handley, H."
14921,"Holbrook, I."
14922,"Kouvelas, “Protocol Independent Multicast—Sparse Mode (PIM-SM): Protocol Specification (Revised),” RFC 4601, Aug."
14923,2006.[RFC 4632]  V.
14924,"Fuller, T."
14925,"Li, “Classless Inter-domain Routing (CIDR): The Internet Address Assignment and Aggregation Plan,” RFC 4632, Aug."
14926,2006.
14927,[RFC 4960]  R.
14928,"Stewart, ed., “Stream Control Transmission Protocol,” RFC 4960, Sept."
14929,2007.
14930,[RFC 4987]  W.
14931,"Eddy, “TCP SYN Flooding Attacks and Common Mitigations,” RFC 4987, Aug."
14932,2007.
14933,"[RFC 5000]  RFC editor, “Internet Official Protocol Standards,” RFC 5000, May 2008."
14934,[RFC 5109]  A.
14935,"Li (ed.), “RTP Payload Format for Generic Forward Error Correction,” RFC 5109, Dec."
14936,2007.
14937,[RFC 5216]  D.
14938,"Simon, B."
14939,"Aboba, R."
14940,"Hurst, “The EAP-TLS Authentication Protocol,” RFC 5216, Mar."
14941,2008.
14942,[RFC 5218]  D.
14943,"Thaler, B."
14944,"Aboba, “What Makes for a Successful Protocol?,” RFC 5218, July 2008."
14945,[RFC 5321]  J.
14946,"Klensin, “Simple Mail Transfer Protocol,” RFC 5321, Oct."
14947,2008.
14948,[RFC 5322]  P.
14949,"Resnick, Ed., “Internet Message Format,” RFC 5322, Oct."
14950,2008.
14951,[RFC 5348]  S.
14952,"Floyd, M."
14953,"Handley, J."
14954,"Padhye, J."
14955,"Widmer, “TCP Friendly Rate Control (TFRC): Protocol Specification,” RFC 5348, Sept."
14956,2008.
14957,[RFC 5389]  J.
14958,"Rosenberg, R."
14959,"Mahy, P."
14960,"Matthews, D."
14961,"Wing, “Session Traversal Utilities for NAT (STUN),” RFC 5389, Oct."
14962,2008.
14963,"[RFC 5411]  J Rosenberg, “A Hitchhiker’s Guide to the Session Initiation Protocol (SIP),” RFC 5411, Feb."
14964,2009.
14965,[RFC 5681]  M.
14966,"Allman, V."
14967,"Paxson, E."
14968,"Blanton, “TCP Congestion Control,” RFC 5681, Sept."
14969,2009.
14970,[RFC 5944]  C.
14971,"Perkins, Ed., “IP Mobility Support for IPv4, Revised,” RFC 5944, Nov."
14972,2010.
14973,"[RFC 6265]  A Barth, “HTTP State Management Mechanism,” RFC 6265, Apr."
14974,2011.
14975,[RFC 6298]  V.
14976,"Paxson, M."
14977,"Allman, J."
14978,"Chu, M."
14979,"Sargent, “Computing TCP’s Retransmission Timer,” RFC 6298, June 2011.[RFC 7020]  R."
14980,"Housley, J."
14981,"Curran, G."
14982,"Huston, D."
14983,"Conrad, “The Internet Numbers Registry System,” RFC 7020, Aug."
14984,2013.
14985,[RFC 7094]  D.
14986,"McPherson, D."
14987,"Oran, D."
14988,"Thaler, E."
14989,"Osterweil, “Architectural Considerations of IP Anycast,” RFC 7094, Jan."
14990,2014.
14991,[RFC 7323]  D.
14992,"Borman, R."
14993,"Braden, V."
14994,"Jacobson, R."
14995,"Scheffenegger (ed.), “TCP Extensions for High Performance,” RFC 7323, Sept."
14996,2014.
14997,[RFC 7540]  M.
14998,"Belshe, R."
14999,"Peon, M."
15000,"Thomson (Eds), “Hypertext Transfer Protocol Version 2 (HTTP/2),” RFC 7540, May 2015."
15001,[Richter 2015]  P.
15002,"Richter, M."
15003,"Allman, R."
15004,"Bush, V."
15005,"Paxson, “A Primer on IPv4 Scarcity,” ACM SIGCOMM Computer Communication Review,  Vol."
15006,"45, No. 2 (Apr."
15007,"2015), pp."
15008,21–32.
15009,[Roberts 1967]  L.
15010,"Roberts, T."
15011,"Merril, “Toward a Cooperative Network of Time-Shared Computers,” AFIPS Fall Conference  (Oct."
15012,1966).
15013,[Rodriguez 2010] R.
15014,"Rodrigues, P."
15015,"Druschel, “Peer-to-Peer Systems,” Communications of the ACM,  Vol."
15016,"53, No. 10 (Oct."
15017,"2010), pp."
15018,72–82.
15019,"[Rohde 2008] Rohde, Schwarz, “UMTS Long Term Evolution (LTE) Technology Introduction,” Application Note 1MA111."
15020,[Rom 1990]  R.
15021,"Rom, M."
15022,"Sidi, Multiple Access Protocols: Performance and Analysis,  Springer-Verlag, New York, 1990."
15023,"[Root Servers 2016]  Root Servers home page, http:/ /www.root-servers.org/
[RSA 1978]  R."
15024,"Rivest, A."
15025,"Shamir, L."
15026,"Adelman, “A Method for Obtaining Digital Signatures and Public-key Cryptosystems,” Communications of the ACM,  Vol."
15027,"21, No. 2 (Feb."
15028,"1978), pp."
15029,120–126.
15030,"[RSA Fast 2012]  RSA Laboratories, “How Fast Is RSA?” http:/ /www.rsa.com/rsalabs/node.asp?id=2215
[RSA Key 2012]  RSA Laboratories, “How Large a Key Should Be Used in the RSA Crypto System?” http:/ /www.rsa.com/rsalabs/node.asp?id=2218
[Rubenstein 1998] D."
15031,"Rubenstein, J."
15032,"Kurose, D."
15033,"Towsley, “Real-Time Reliable Multicast Using Proactive Forward Error Correction,” Proceedings of NOSSDAV ‘98
(Cambridge, UK, July 1998)."
15034,[Ruiz-Sanchez 2001] M.
15035,"Ruiz-Sánchez, E."
15036,"Biersack, W."
15037,"Dabbous, “Survey and Taxonomy of IP Address Lookup Algorithms,” IEEE Network Magazine,  Vol."
15038,"15, No. 2
(Mar./Apr."
15039,"2001), pp."
15040,8–23.[Saltzer 1984]  J.
15041,"Saltzer, D."
15042,"Reed, D."
15043,"Clark, “End-to-End Arguments in System Design,” ACM Transactions on Computer Systems (TOCS), Vol."
15044,"2, No. 4 (Nov."
15045,1984).
15046,"[Sandvine 2015] “Global Internet Phenomena Report, Spring 2011,” http://www.sandvine.com/news/globalbroadbandtrends.asp , 2011."
15047,[Sardar 2006]  B.
15048,"Sardar, D."
15049,"Saha, “A Survey of TCP Enhancements for Last-Hop Wireless Networks,” IEEE Commun."
15050,"Surveys and Tutorials,  Vol."
15051,"8, No. 3 (2006), pp."
15052,20–34.
15053,[Saroiu 2002] S.
15054,"Saroiu, P."
15055,K.
15056,"Gummadi, S."
15057,D.
15058,"Gribble, “A Measurement Study of Peer-to-Peer File Sharing Systems,” Proc."
15059,"of Multimedia Computing and Networking
(MMCN) (2002)."
15060,[Sauter 2014]  M.
15061,"Sauter, From GSM to LTE-Advanced, John Wiley and Sons, 2014."
15062,[Savage 2015]  D.
15063,"Savage, J."
15064,"Ng, S."
15065,"Moore, D."
15066,"Slice, P."
15067,"Paluch, R."
15068,"White, “Enhanced Interior Gateway Routing Protocol,” Internet Draft, draft-savage-eigrp-04.txt, Aug."
15069,2015.
15070,[Saydam 1996]  T.
15071,"Saydam, T."
15072,"Magedanz, “From Networks and Network Management into Service and Service Management,” Journal of Networks and System
Management,  Vol."
15073,"4, No. 4 (Dec."
15074,"1996), pp."
15075,345–348.
15076,[Schiller 2003] J.
15077,"Schiller, Mobile Communications  2nd edition, Addison Wesley, 2003."
15078,[Schneier 1995]  B.
15079,"Schneier, Applied Cryptography: Protocols, Algorithms, and Source Code in C,  John Wiley and Sons, 1995."
15080,"[Schulzrinne-RTP 2012] Henning Schulzrinne’s RTP site, http:/ /www.cs.columbia .edu/ ~hgs/rtp
[Schulzrinne-SIP 2016] Henning Schulzrinne’s SIP site, http:/ /www.cs.columbia.edu/ ~hgs/sip
[Schwartz 1977]  M."
15081,"Schwartz, Computer-Communication Network Design and Analysis , Prentice-Hall, Englewood Cliffs, NJ, 1997."
15082,[Schwartz 1980]  M.
15083,"Schwartz, Information, Transmission, Modulation, and Noise,  McGraw Hill, New York, NY 1980."
15084,[Schwartz 1982]  M.
15085,"Schwartz, “Performance Analysis of the SNA Virtual Route Pacing Control,” IEEE Transactions on Communications,  Vol."
15086,"30, No. 1 (Jan."
15087,"1982), pp."
15088,172–184.[Scourias 2012]  J.
15089,"Scourias, “Overview of the Global System for Mobile Communications: GSM.” http://www.privateline.com/PCS/GSM0.html
[SDNHub 2016]  SDNHub, “App Development Tutorials,” http:/ /sdnhub.org/  tutorials/
[Segaller 1998]  S."
15090,"Segaller, Nerds 2.0.1, A Brief History of the Internet, TV Books, New York, 1998."
15091,[Sekar 2011 ] V.
15092,"Sekar, S."
15093,"Ratnasamy, M."
15094,"Reiter, N."
15095,"Egi, G."
15096,"Shi, “ The Middlebox Manifesto: Enabling Innovation in Middlebox Deployment,” Proc."
15097,"10th ACM Workshop on
Hot Topics in Networks (HotNets),  Article 21, 6 pages."
15098,[Serpanos 2011]  D.
15099,"Serpanos, T."
15100,"Wolf, Architecture of Network Systems, Morgan Kaufmann Publishers, 2011."
15101,[Shacham 1990]  N.
15102,"Shacham, P."
15103,"McKenney, “Packet Recovery in High-Speed Networks Using Coding and Buffer Management,” Proc."
15104,"1990 IEEE INFOCOM (San
Francisco, CA, Apr."
15105,"1990), pp."
15106,124–131.
15107,[Shaikh 2001] A.
15108,"Shaikh, R."
15109,"Tewari, M."
15110,"Agrawal, “On the Effectiveness of DNS-based Server Selection,” Proc."
15111,2001 IEEE INFOCOM.
15112,[Singh 1999] S.
15113,"Singh, The Code Book: The Evolution of Secrecy from Mary, Queen of Scotsto Quantum Cryptography,  Doubleday Press, 1999."
15114,[Singh 2015] A.
15115,"Singh, J."
15116,"Ong,."
15117,"Agarwal, G."
15118,"Anderson, A."
15119,"Armistead, R."
15120,"Banno, S."
15121,"Boving, G."
15122,"Desai, B."
15123,"Felderman, P."
15124,"Germano, A."
15125,"Kanagala, J."
15126,"Provost, J."
15127,"Simmons, E."
15128,"Tanda, J."
15129,"Wanderer, U."
15130,"Hölzle, S."
15131,"Stuart, A."
15132,"Vahdat, “Jupiter Rising: A Decade of Clos Topologies and Centralized Control in Google’s Datacenter Network,” Sigcomm,
2015."
15133,[SIP Software 2016] H.
15134,"Schulzrinne Software Package site, http:/ /www.cs.columbia.edu/ IRT/software
[Skoudis 2004] E."
15135,"Skoudis, L."
15136,"Zeltser, Malware: Fighting Malicious Code , Prentice Hall, 2004."
15137,[Skoudis 2006] E.
15138,"Skoudis, T."
15139,"Liston, Counter Hack Reloaded: A Step-by-Step Guide to Computer Attacks and Effective Defenses (2nd Edition) , Prentice Hall, 2006."
15140,[Smith 2009] J.
15141,"Smith, “Fighting Physics: A Tough Battle,” Communications of the ACM,  Vol."
15142,"52, No. 7 (July 2009), pp."
15143,60–65.
15144,"[Snort 2012] Sourcefire Inc., Snort homepage, http://http://www.snort.org/
[Solensky 1996]  F."
15145,"Solensky, “IPv4 Address Lifetime Expectations,” in IPng: Internet Protocol Next Generation  (S."
15146,"Bradner, A."
15147,"Mankin, ed.), Addison-Wesley, Reading, MA,1996."
15148,[Spragins 1991] J.
15149,D.
15150,"Spragins, Telecommunications Protocols and Design,  Addison-Wesley, Reading, MA, 1991."
15151,[Srikant 2004]  R.
15152,"Srikant, The Mathematics of Internet Congestion Control,  Birkhauser, 2004
[Steinder 2002] M."
15153,"Steinder, A."
15154,"Sethi, “Increasing Robustness of Fault Localization Through Analysis of Lost, Spurious, and Positive Symptoms,” Proc."
15155,"2002 IEEE
INFOCOM."
15156,[Stevens 1990]  W.
15157,R.
15158,"Stevens, Unix Network Programming,  Prentice-Hall, Englewood Cliffs, NJ."
15159,[Stevens 1994]  W.
15160,R.
15161,"Stevens, TCP/IP Illustrated, Vol."
15162,"1: The Protocols, Addison-Wesley, Reading, MA, 1994."
15163,"[Stevens 1997]  W.R. Stevens, Unix Network Programming, Volume 1: Networking APIs-Sockets and XTI,  2nd edition, Prentice-Hall, Englewood Cliffs, NJ, 1997."
15164,[Stewart 1999]  J.
15165,"Stewart, BGP4: Interdomain Routing in the Internet,  Addison-Wesley, 1999."
15166,[Stone 1998] J.
15167,"Stone, M."
15168,"Greenwald, C."
15169,"Partridge, J."
15170,"Hughes, “Performance of Checksums and CRC’s Over Real Data,” IEEE/ACM Transactions on Networking,  Vol."
15171,"6,
No. 5 (Oct."
15172,"1998), pp."
15173,529–543.
15174,[Stone 2000] J.
15175,"Stone, C."
15176,"Partridge, “When Reality and the Checksum Disagree,” Proc."
15177,"2000 ACM SIGCOMM (Stockholm, Sweden, Aug."
15178,2000).
15179,[Strayer 1992]  W.
15180,T.
15181,"Strayer, B."
15182,"Dempsey, A."
15183,"Weaver, XTP: The Xpress Transfer Protocol, Addison-Wesley, Reading, MA, 1992."
15184,[Stubblefield 2002] A.
15185,"Stubblefield, J."
15186,"Ioannidis, A."
15187,"Rubin, “Using the Fluhrer, Mantin, and Shamir Attack to Break WEP,” Proceedings of 2002 Network and Distributed
Systems Security Symposium  (2002), pp."
15188,17–22.
15189,[Subramanian 2000] M.
15190,"Subramanian, Network Management: Principles and Practice,  Addison-Wesley, Reading, MA, 2000."
15191,[Subramanian 2002] L.
15192,"Subramanian, S."
15193,"Agarwal, J."
15194,"Rexford, R."
15195,"Katz, “Characterizing the Internet Hierarchy from Multiple Vantage Points,” Proc."
15196,2002 IEEE INFOCOM.
15197,"[Sundaresan 2006]  K.Sundaresan, K."
15198,"Papagiannaki, “The Need for Cross-layer Information in Access Point Selection,” Proc."
15199,"2006 ACM Internet Measurement Conference
(Rio De Janeiro, Oct."
15200,2006).[Suh 2006] K.
15201,"Suh, D."
15202,R.
15203,"Figueiredo, J."
15204,Kurose and D.
15205,"Towsley, “Characterizing and Detecting Relayed Traffic: A Case Study Using Skype,” Proc."
15206,"2006 IEEE INFOCOM
(Barcelona, Spain, Apr."
15207,2006).
15208,[Sunshine 1978] C.
15209,"Sunshine, Y."
15210,"Dalal, “Connection Management in Transport Protocols,” Computer Networks,  North-Holland, Amsterdam, 1978."
15211,[Tariq 2008] M.
15212,"Tariq, A."
15213,"Zeitoun, V."
15214,"Valancius, N."
15215,"Feamster, M."
15216,"Ammar, “Answering What-If Deployment and Configuration Questions with WISE,” Proc."
15217,"2008 ACM
SIGCOMM (Aug."
15218,2008).
15219,"[TechnOnLine 2012] TechOnLine, “Protected Wireless Networks,” online webcast tutorial, http://www.techonline.com/community/tech_topic/internet/21752
[Teixeira 2006]  R."
15220,"Teixeira, J."
15221,"Rexford, “Managing Routing Disruptions in Internet Service Provider Networks,” IEEE Communications Magazine  (Mar."
15222,2006).
15223,"[Think 2012] Technical History of Network Protocols, “Cyclades,” http://www.cs.utexas.edu/users/chris/think/Cyclades/index.shtml
[Tian 2012] Y."
15224,"Tian, R."
15225,"Dey, Y."
15226,"Liu, K."
15227,W.
15228,"Ross, “China’s Internet: Topology Mapping and Geolocating,” IEEE INFOCOM Mini-Conference 2012  (Orlando, FL, 2012)."
15229,"[TLD list 2016] TLD list maintained by Wikipedia, https://en.wikipedia.org/ wiki/ List_of_Internet_top-level_domains
[Tobagi 1990] F."
15230,"Tobagi, “Fast Packet Switch Architectures for Broadband Integrated Networks,” Proc."
15231,"1990 IEEE INFOCOM,  Vol."
15232,"78, No. 1 (Jan."
15233,"1990), pp."
15234,133–167.
15235,"[TOR 2016] Tor: Anonymity Online, http://www.torproject.org
[Torres 2011]  R."
15236,"Torres, A."
15237,"Finamore, J."
15238,R.
15239,"Kim, M."
15240,M.
15241,"Munafo, S."
15242,"Rao, “Dissecting Video Server Selection Strategies in the YouTube CDN,” Proc."
15243,2011 Int.
15244,Conf.
15245,"on
Distributed Computing Systems ."
15246,[Tourrilhes 2014] J.
15247,"Tourrilhes, P."
15248,"Sharma, S."
15249,"Banerjee, J."
15250,"Petit, “SDN and Openflow Evolution: A Standards Perspective,” IEEE Computer Magazine,  Nov."
15251,"2014, pp."
15252,22–29.
15253,[Turner 1988] J.
15254,S.
15255,"Turner, “Design of a Broadcast packet switching network,” IEEE Transactions on Communications,  Vol."
15256,"36, No. 6 (June 1988), pp."
15257,734–743.
15258,[Turner 2012] B.
15259,"Turner, “2G, 3G, 4G Wireless Tutorial,” http://blogs.nmscommunications.com/communications/2008/10/2g-3g-4g-wireless-tutorial.html[UPnP Forum 2016] UPnP Forum homepage, http:/ /www.upnp.org/
[van der Berg 2008]  R."
15260,"van der Berg, “How the ’Net Works: An Introduction to Peering and Transit,” http:/ /arstechnica.com/guides/ other/peering-and-transit.ars
[van der Merwe 1998]  J."
15261,"van der Merwe, S."
15262,"Rooney, I."
15263,"Leslie, S."
15264,"Crosby, “The Tempest: A Practical Framework for Network Programmability,” IEEE Network, Vol."
15265,"12, No. 3
(May 1998), pp."
15266,20–28.
15267,[Varghese 1997]  G.
15268,"Varghese, A."
15269,"Lauck, “Hashed and Hierarchical Timing Wheels: Efficient Data Structures for Implementing a Timer Facility,” IEEE/ACM Transactions on
Networking,  Vol."
15270,"5, No. 6 (Dec."
15271,"1997), pp."
15272,824–834.
15273,[Vasudevan 2012]  S.
15274,"Vasudevan, C."
15275,"Diot, J."
15276,"Kurose, D."
15277,"Towsley, “Facilitating Access Point Selection in IEEE 802.11 Wireless Networks,” Proc."
15278,"2005 ACM Internet
Measurement Conference , (San Francisco CA, Oct."
15279,2005).
15280,[Villamizar 1994] C.
15281,"Villamizar, C."
15282,Song.
15283,"“High Performance tcp in ansnet,” ACM SIGCOMM Computer Communications Review , Vol."
15284,"24, No. 5 (1994), pp."
15285,45–60.
15286,[Viterbi 1995] A.
15287,"Viterbi, CDMA: Principles of Spread Spectrum Communication,  Addison-Wesley, Reading, MA, 1995."
15288,[Vixie 2009] P.
15289,"Vixie, “What DNS Is Not,” Communications of the ACM,  Vol."
15290,"52, No. 12 (Dec."
15291,"2009), pp."
15292,43–47.
15293,[Wakeman 1992]  I.
15294,"Wakeman, J."
15295,"Crowcroft, Z."
15296,"Wang, D."
15297,"Sirovica, “Layering Considered Harmful,” IEEE Network (Jan."
15298,"1992), pp."
15299,20–24.
15300,[Waldrop 2007] M.
15301,"Waldrop, “Data Center in a Box,” Scientific American  (July 2007)."
15302,[Wang 2004] B.
15303,"Wang, J."
15304,"Kurose, P."
15305,"Shenoy, D."
15306,"Towsley, “Multimedia Streaming via TCP: An Analytic Performance Study,” Proc."
15307,"2004 ACM Multimedia Conference  (New
York, NY, Oct."
15308,2004).
15309,[Wang 2008] B.
15310,"Wang, J."
15311,"Kurose, P."
15312,"Shenoy, D."
15313,"Towsley, “Multimedia Streaming via TCP: An Analytic Performance Study ,” ACM Transactions on Multimedia Computing
Communications and Applications (TOMCCAP) , Vol."
15314,"4, No. 2 (Apr."
15315,"2008), p."
15316,16.
15317,1–22.
15318,[Wang 2010] G.
15319,"Wang, D."
15320,G.
15321,"Andersen, M."
15322,"Kaminsky, K."
15323,"Papagiannaki, T."
15324,S.
15325,E.
15326,"Ng, M."
15327,"Kozuch, M."
15328,"Ryan, “c-Through: Part-time Optics in Data Centers,” Proc."
15329,"2010 ACM
SIGCOMM."
15330,[Wei 2006] W.
15331,"Wei, C."
15332,"Zhang, H."
15333,"Zang, J."
15334,"Kurose, D."
15335,"Towsley, “Inference and Evaluation of Split-Connection Approaches in Cellular Data Networks,” Proc."
15336,"Active and
Passive Measurement Workshop  (Adelaide, Australia, Mar."
15337,2006).[Wei 2007] D.
15338,X.
15339,"Wei, C."
15340,"Jin, S."
15341,H.
15342,"Low, S."
15343,"Hegde, “FAST TCP: Motivation, Architecture, Algorithms, Performance,” IEEE/ACM Transactions on Networking  (2007)."
15344,[Weiser 1991]  M.
15345,"Weiser, “The Computer for the Twenty-First Century,” Scientific American  (Sept."
15346,1991): 94–10.
15347,"http://www.ubiq.com/ hypertext/weiser/
SciAmDraft3.html
[White 2011] A."
15348,"White, K."
15349,"Snow, A."
15350,"Matthews, F."
15351,"Monrose, “Hookt on fon-iks: Phonotactic Reconstruction of Encrypted VoIP Conversations,” IEEE Symposium on Security
and Privacy , Oakland, CA, 2011."
15352,"[Wigle.net 2016] Wireless Geographic Logging Engine, http:/ /www.wigle.net
[Wiki Satellite 2016] Satellite Internet access, https://en.wikipedia.org/ wiki/ Satellite_Internet_access
[Wireshark 2016]  Wireshark homepage, http:/ /www.wireshark.org
[Wischik 2005] D."
15353,"Wischik, N."
15354,"McKeown, “Part I: Buffer Sizes for Core Routers,” ACM SIGCOMM Computer Communications Review , Vol."
15355,"35, No. 3 (July 2005)."
15356,[Woo 1994] T.
15357,"Woo, R."
15358,"Bindignavle, S."
15359,"Su, S."
15360,"Lam, “SNP: an interface for secure network programming,” Proc."
15361,"1994 Summer USENIX (Boston, MA, June 1994), pp."
15362,45–58.
15363,[Wright 2015] J.
15364,"Wright, J."
15365,"Wireless Security Secrets & Solutions,  3e, “Hacking Exposed Wireless,” McGraw-Hill Education, 2015."
15366,[Wu 2005] J.
15367,"Wu, Z."
15368,M.
15369,"Mao, J."
15370,"Rexford, J."
15371,"Wang, “Finding a Needle in a Haystack: Pinpointing Significant BGP Routing Changes in an IP Network,” Proc."
15372,"USENIX NSDI
(2005)."
15373,"[Xanadu 2012] Xanadu Project homepage, http:/ /www.xanadu.com/
[Xiao 2000] X."
15374,"Xiao, A."
15375,"Hannan, B."
15376,"Bailey, L."
15377,"Ni, “Traffic Engineering with MPLS in the Internet,” IEEE Network (Mar./Apr."
15378,2000).
15379,[Xu 2004] L.
15380,"Xu, K Harfoush, I."
15381,"Rhee, “Binary Increase Congestion Control (BIC) for Fast Long-Distance Networks,” IEEE INFOCOM 2004, pp."
15382,2514–2524.
15383,[Yavatkar 1994]  R.
15384,"Yavatkar, N."
15385,"Bhagwat, “Improving End-to-End Performance of TCP over Mobile Internetworks,” Proc."
15386,"Mobile 94 Workshop on Mobile Computing
Systems and Applications  (Dec."
15387,"1994).[YouTube 2009] YouTube 2009, Google container data center tour, 2009."
15388,"[YouTube 2016] YouTube Statistics, 2016, https://www.youtube.com/ yt/press/ statistics.html
[Yu 2004] Yu, Fang, H."
15389,"Katz, Tirunellai V."
15390,Lakshman.
15391,"“Gigabit Rate Packet Pattern-Matching Using TCAM,” Proc."
15392,2004 Int.
15393,Conf.
15394,"Network Protocols, pp."
15395,174–183.
15396,[Yu 2011] M.
15397,"Yu, J."
15398,"Rexford, X."
15399,"Sun, S."
15400,"Rao, N."
15401,"Feamster, “A Survey of VLAN Usage in Campus Networks,” IEEE Communications Magazine,  July 2011."
15402,[Zegura 1997] E.
15403,"Zegura, K."
15404,"Calvert, M."
15405,"Donahoo, “A Quantitative Comparison of Graph-based Models for Internet Topology,” IEEE/ACM Transactions on Networking,  Vol."
15406,"5, No. 6, (Dec."
15407,1997).
15408,See also http://www.cc.gatech.edu/projects/gtim  for a software package that generates networks with a transit-stub structure.
15409,[Zhang 1993] L.
15410,"Zhang, S."
15411,"Deering, D."
15412,"Estrin, S."
15413,"Shenker, D."
15414,"Zappala, “RSVP: A New Resource Reservation Protocol,” IEEE Network Magazine,  Vol."
15415,"7, No. 9 (Sept."
15416,"1993),
pp."
15417,8–18.
15418,[Zhang 2007] L.
15419,"Zhang, “A Retrospective View of NAT,” The IETF Journal, Vol."
15420,"3, Issue 2 (Oct."
15421,2007).
15422,[Zhang 2015] G.
15423,"Zhang, W."
15424,"Liu, X."
15425,"Hei, W."
15426,"Cheng, “Unreeling Xunlei Kankan: Understanding Hybrid CDN-P2P Video-on-Demand Streaming,” IEEE Transactions on
Multimedia , Vol."
15427,"17, No. 2, Feb."
15428,2015.
15429,[Zhang X 2102] X.
15430,"Zhang, Y."
15431,"Xu, Y."
15432,"Liu, Z."
15433,"Guo, Y."
15434,"Wang, “Profiling Skype Video Calls: Rate Control and Video Quality,” IEEE INFOCOM  (Mar."
15435,2012).
15436,[Zink 2009] M.
15437,"Zink, K."
15438,"Suh, Y."
15439,"Gu, J."
15440,"Kurose, “Characteristics of YouTube Network Traffic at a Campus Network—Measurements, Models, and Implications,” Computer
Networks, Vol."
15441,"53, No. 4, pp."
15442,"501–514, 2009.Index"
